//***MULTI-PART
//*******************
//LOGICAL-PATH:plnextv2/utils/AAASDescriptionUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.AAASDescriptionUtils",$dependencies:["plnextv2.utils.CatalogServicesUtils","plnextv2.utils.PriceUtils","plnextv2.utils.I18n","plnextv2.utils.QuotaUtils","plnextv2.utils.aaas.AAASMinimumPriceUtils","plnextv2.components.catalogServices.desktop.controller.DCatalogServicesConstants","plnextv2.utils.aaas.AAASDiscountUtils"],$constructor:function(e){this.MinimumPriceUtils=plnextv2.utils.aaas.AAASMinimumPriceUtils,this.QuotaUtils=plnextv2.utils.QuotaUtils,this.I18n=plnextv2.utils.I18n,this.CatalogServicesUtils=plnextv2.utils.CatalogServicesUtils,this.PriceUtils=plnextv2.utils.PriceUtils,this.DiscountUtils=plnextv2.utils.aaas.AAASDiscountUtils,this._catalogConstants=plnextv2.components.catalogServices.desktop.controller.DCatalogServicesConstants,this._defaultPrice=e},$statics:{CATEGORY_STRINGS:{textFromPriceCashUnknown:"tx_pltg_text_AASCategoryDescriptionFromPriceCashUnknown",textFromPriceCash:"tx_pltg_text_AASCategoryDescriptionFromPriceCash",textFromPriceMilesUnknown:"tx_pltg_text_AASCategoryDescriptionFromPriceMilesUnknown",textFromPriceMiles:"tx_pltg_text_AASCategoryDescriptionFromPriceMiles",textFromPriceMilesAndCash:"tx_pltg_text_AASCategoryDescriptionFromPriceMilesAndCash",textFromPriceCashDiscount:"tx_pltg_text_AASCategoryDescriptionFromPriceCashDiscount",textQuotaInfo:"tx_pltg_text_AASCategoryDescriptionQuotaInformation",textQuotaInfoUnknown:"tx_pltg_text_AASCategoryDescriptionQuotaInformationUnknown",textDiscountReason:"tx_pltg_text_AASCategoryDescriptionDiscountReason",textDiscountReasonUnknown:"tx_pltg_text_AASCategoryDescriptionDiscountReasonUnknown"},CATEGORY_TEASER_STRINGS:{textFromPriceCashUnknown:"tx_pltg_text_AASCategoryTeaserDescriptionFromPriceCashUnknown",textFromPriceCash:"tx_pltg_text_AASCategoryTeaserDescriptionFromPriceCash",textFromPriceMilesUnknown:"tx_pltg_text_AASCategoryTeaserDescriptionFromPriceMilesUnknown",textFromPriceMiles:"tx_pltg_text_AASCategoryTeaserDescriptionFromPriceMiles",textFromPriceMilesAndCash:"tx_pltg_text_AASCategoryTeaserDescriptionFromPriceMilesAndCash",textFromPriceCashDiscount:"tx_pltg_text_AASCategoryTeaserDescriptionFromPriceCashDiscount",textQuotaInfo:"tx_pltg_text_AASCategoryTeaserDescriptionQuotaInformation",textQuotaInfoUnknown:"tx_pltg_text_AASCategoryTeaserDescriptionQuotaInformationUnknown",textDiscountReason:"tx_pltg_text_AASCategoryTeaserDescriptionDiscountReason",textDiscountReasonUnknown:"tx_pltg_text_AASCategoryTeaserDescriptionDiscountReasonUnknown"},SUBCATEGORY_STRINGS:{textFromPriceCashUnknown:"tx_pltg_text_AASSubcategoryDescriptionFromPriceCashUnknown",textFromPriceCash:"tx_pltg_text_AASSubcategoryDescriptionFromPriceCash",textFromPriceMilesUnknown:"tx_pltg_text_AASSubcategoryDescriptionFromPriceMilesUnknown",textFromPriceMiles:"tx_pltg_text_AASSubcategoryDescriptionFromPriceMiles",textFromPriceMilesAndCash:"tx_pltg_text_AASSubcategoryDescriptionFromPriceMilesAndCash",textFromPriceCashDiscount:"tx_pltg_text_AASSubcategoryDescriptionFromPriceCashDiscount",textQuotaInfo:"tx_pltg_text_AASSubcategoryDescriptionQuotaInformation",textQuotaInfoUnknown:"tx_pltg_text_AASSubcategoryDescriptionQuotaInformationUnknown",textDiscountReason:"tx_pltg_text_AASSubcategoryDescriptionDiscountReason",textDiscountReasonUnknown:"tx_pltg_text_AASSubcategoryDescriptionDiscountReasonUnknown"},SERVICE_STRINGS:{textFromPriceCashUnknown:"tx_pltg_text_AASServiceDescriptionFromPriceCashUnknown",textFromPriceCash:"tx_pltg_text_AASServiceDescriptionFromPriceCash",textFromPriceMilesUnknown:"tx_pltg_text_AASServiceDescriptionFromPriceMilesUnknown",textFromPriceMiles:"tx_pltg_text_AASServiceDescriptionFromPriceMiles",textFromPriceMilesAndCash:"tx_pltg_text_AASServiceDescriptionFromPriceMilesAndCash",textFromPriceCashDiscount:"tx_pltg_text_AASServiceDescriptionFromPriceCashDiscount",textQuotaInfo:"tx_pltg_text_AASServiceDescriptionQuotaInformation",textQuotaInfoUnknown:"tx_pltg_text_AASServiceDescriptionQuotaInformationUnknown",textDiscountReason:"tx_pltg_text_AASServiceDescriptionDiscountReason",textDiscountReasonUnknown:"tx_pltg_text_AASServiceDescriptionDiscountReasonUnknown",textFreeOfCharge:"tx_pltg_text_ServicesFreeOfCharge"},PLACEHOLDER_CASH:"{0}",PLACEHOLDER_MILES_PRICE:"{MILES_PRICE}",PLACEHOLDER_QUOTA:"{QUOTA}",PLACEHOLDER_PACK_SUBSERVICES:"{PACK_SUBSERVICES}",PLACEHOLDER_DISCOUNT_REASON:"{DISCOUNT_REASON}"},$prototype:{getCategoryDescription:function(e,c){if(e.description){var t=this.CATEGORY_STRINGS,a={};return a.element=e,a.typeElement=this._catalogConstants.TYPE_CATEGORY,a.description=e.description,this._getGenericCategoryDescription(a,t,c)}return""},getCategoryTeaserDescription:function(e,c){if(e.teaserDescription){var t=this.CATEGORY_TEASER_STRINGS,a={};return a.element=e,a.typeElement=this._catalogConstants.TYPE_CATEGORY,a.description=e.teaserDescription,this._getGenericCategoryDescription(a,t,c)}return""},getSubcategoryDescription:function(e,c,t,a){if(e.description){var l=this.SUBCATEGORY_STRINGS,n={};return n.element=e,n.typeElement=this._catalogConstants.TYPE_SUBCATEGORY,n.description=e.description,n.services=c,n.elementId=t,this._getDescriptionWithPattern(n,l,a)}return""},getServiceDescription:function(e,c,t,a,l,n){if(c.description){if(!this.CatalogServicesUtils.isSeatmapService(c)){var o=this.SERVICE_STRINGS,s={};if(s.element=c,s.typeElement=this._catalogConstants.TYPE_SERVICE,s.description=c.description,s.elementId=t,s.price=l,n){var d=l&&l.cash?this.DiscountUtils.getDiscountClassForPrice(l.cash):this.DiscountUtils.getServiceDiscountClassForElement(e,c,t);s.description=this._wrapDescriptionWithDiv(s.description,d)}return this._getDescriptionWithPattern(s,o,a,e)}return c.description}return""},getServiceTeaserDescription:function(e,c,t,a,l,n){if(c.teaserDescription){if(!this.CatalogServicesUtils.isSeatmapService(c)){var o=this.CATEGORY_TEASER_STRINGS,s={};if(s.element=c,s.typeElement=this._catalogConstants.TYPE_SERVICE,s.description=c.teaserDescription,s.elementId=t,s.price=l,n){var d=l&&l.cash?this.DiscountUtils.getDiscountClassForPrice(l.cash):this.DiscountUtils.getServiceDiscountClassForElement(e,c,t);s.description=this._wrapDescriptionWithDiv(s.description,d)}return this._getDescriptionWithPattern(s,o,a)}return c.teaserDescription}return""},_getGenericCategoryDescription:function(e,c,t){return this.CatalogServicesUtils.isSeatmapCategory(e.element)?e.description:this._getDescriptionWithPattern(e,c,t)},_getDescriptionWithPattern:function(e,c,t,a){var l=e.description,n=-1!==l.indexOf(this.PLACEHOLDER_CASH),o=-1!==l.indexOf(this.PLACEHOLDER_MILES_PRICE),s=-1!==l.indexOf(this.PLACEHOLDER_QUOTA),d=-1!==l.indexOf(this.PLACEHOLDER_PACK_SUBSERVICES),f=-1!==l.indexOf(this.PLACEHOLDER_DISCOUNT_REASON);if(n){var r=this._getPriceCashString(e,c,a);l=l.replace(this.PLACEHOLDER_CASH,r)}if(o){var b=this._getPriceMilesString(e,c,t);l=l.replace(this.PLACEHOLDER_MILES_PRICE,b)}if(s){var i=this._getQuotaString(e,c,t);l=l.replace(this.PLACEHOLDER_QUOTA,i)}if(d){var p=this._getPackDescription(e);l=l.replace(this.PLACEHOLDER_PACK_SUBSERVICES,p)}if(f){var m=this._getReasonForDiscount(e,c,t);l=l.replace(this.PLACEHOLDER_DISCOUNT_REASON,m)}return l},_shouldDisplayFreeOfCharge:function(e,c,t){return e.price&&t.data.config.enableNewServicing?0===c.totalAmount:!1},_getPriceCashString:function(e,c,t){var a="",l=this._getServiceSelection(t),n=e.price?e.price.cash:this.MinimumPriceUtils.getMinimumPrice(e,this._catalogConstants.PRICE_IN_CASH,l);if(n){var o=this._shouldDisplayFreeOfCharge(e,n,t)?this.I18n.getLabel(this.SERVICE_STRINGS.textFreeOfCharge):this.PriceUtils.formatCurrency(n.totalAmount,n.currency);if(this.DiscountUtils.isPriceDiscounted(n)&&c.textFromPriceCashDiscount){var s=this.PriceUtils.formatCurrency(n.discountInformation.nonDiscountedTotalAmount,n.currency);a=this.I18n.getStringFromPattern(c.textFromPriceCashDiscount,[o,s])}else c.textFromPriceCash&&(a=this.I18n.getStringFromPattern(c.textFromPriceCash,[o]))}else if(c.textFromPriceCashUnknown)if(this._defaultPrice&&this._defaultPrice.cash){var d=this.PriceUtils.formatCurrency(this._defaultPrice.cash.totalAmount,this._defaultPrice.cash.currency);a=this.I18n.getStringFromPattern(c.textFromPriceCashUnknown,[d])}else a=this.I18n.getLabel(c.textFromPriceCashUnknown);return a},_getServiceSelection:function(e){return e?e.data.serviceSelection:null},_getPriceMilesString:function(e,c,t){var a="",l=e.price?e.price.miles:this.MinimumPriceUtils.getMinimumPrice(e,this._catalogConstants.PRICE_IN_MILES,t);if(l){var n=this.PriceUtils.getAASPriceInMiles(l);l.cashAmount&&l.cashAmount.totalAmount>0&&c.textFromPriceMilesAndCash?(formattedMinPriceCashWithMiles=this.PriceUtils.formatCurrency(l.cashAmount.totalAmount,l.cashAmount.currency),a=this.I18n.getStringFromPattern(c.textFromPriceMilesAndCash,[n,formattedMinPriceCashWithMiles])):c.textFromPriceMiles&&(a=this.I18n.getStringFromPattern(c.textFromPriceMiles,[n]))}else c.textFromPriceMilesUnknown&&(a=this.I18n.getLabel(c.textFromPriceMilesUnknown));return a},_getQuotaString:function(e,c,t){var a=(e.element,e.typeElement),l="";if(c.textQuotaInfo&&a){var n=this.QuotaUtils.getQuotaInfo(e,t);if(null!=n&&null!=n.quotaValue){var o=n.quotaValue,s=this.QuotaUtils.getQuotaStringToDisplay(o);0>o&&(o*=-1);var d=this.I18n.getStringFromPattern(s,[o]);return l=this.I18n.getStringFromPattern(c.textQuotaInfo,[d]),a!==this._catalogConstants.TYPE_CATEGORY||n.allSoldOut||0!=o||(l=""),l}}return l=this.I18n.getLabel(c.textQuotaInfoUnknown)},_getPackDescription:function(e){var c=e.element;if(!c.services)return"";var t="";t+="<ul>";for(var a in c.services[0].subServices)if(!aria.utils.Json.isMetadata(a)){var l=c.services[0].subServices[a];t+="<li>",t+=l.name,t+="</li>"}return t+="</ul>"},_wrapDescriptionWithDiv:function(e,c){var t="<div";return c&&(t+=' class="'+c+'"'),t+=">"+e+"</div>"},_getReasonForDiscount:function(e,c,t){var a=c.textDiscountReasonUnknown?this.I18n.getLabel(c.textDiscountReasonUnknown):"",l=e.price?e.price.cash:this.MinimumPriceUtils.getMinimumPrice(e,this._catalogConstants.PRICE_IN_CASH,t),n=this.DiscountUtils.getDiscountReason(l);return n&&c.textDiscountReason&&(a=this.I18n.getStringFromPattern(c.textDiscountReason,[n])),a}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/ATCMilesAndCashRebookingUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.ATCMilesAndCashRebookingUtils",$singleton:!0,$dependencies:["plnextv2.utils.storage.SessionStorageManager"],$constructor:function(){this._storageManager=plnextv2.utils.storage.SessionStorageManager},$statics:{ATC_MILES_AND_CASH:{STORAGE_KEY:"ATCRebooking",STORAGE_CONTEXT:"PreviousBookingMilesAndCash"}},$prototype:{isATCAndMilesAndCashRefund:function(e){return e&&e.infoCell&&e.infoCell.isRebookingFlowAndPrevSelectionMilesAndCash&&e.infoCell.rebookingPrice&&e.infoCell.rebookingPrice<0},addStatusToSession:function(e){this._storageManager.set(this.ATC_MILES_AND_CASH.STORAGE_KEY,e,this.ATC_MILES_AND_CASH.STORAGE_CONTEXT)},getStatusFromSession:function(){return!!this._storageManager.get(this.ATC_MILES_AND_CASH.STORAGE_KEY,this.ATC_MILES_AND_CASH.STORAGE_CONTEXT)},clearSessionStatus:function(){this._storageManager.clearContext(this.ATC_MILES_AND_CASH.STORAGE_CONTEXT)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/AbstractErrorUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.AbstractErrorUtils",$dependencies:["plnextv2.utils.context.AppContext","plnextv2.utils.I18n","aria.utils.Json"],$constructor:function(){this._i18nUtils=plnextv2.utils.I18n,this._appContext=plnextv2.utils.context.AppContext},$statics:{WARNING:"W",ERROR:"E",FATAL_ERROR:"F",WARNING_LABEL:"Warning",ERROR_LABEL:"Error",WIDGET_ERROR_LABEL:"WidgetError",AVAILABILITY_BOUND:"availability-bound-",SEPARATOR_LEVEL_2:"~"},$prototype:{addError:function(e,c,t){this.add(e,c,t,this.ERROR)},addErrors:function(e,c){for(var t=e.length,a=0;t>a;a++)this.addError(e[a].code,e[a].message,c)},addWarning:function(e,c,t){this.add(e,c,t,this.WARNING)},addWarnings:function(e,c){for(var t=e.length,a=0;t>a;a++)this.addWarning(e[a].code,e[a].message,c)},removeWarning:function(e,c){this.remove(e,c,this.WARNING)},removeError:function(e,c){this.remove(e,c,this.ERROR)},remove:function(e,c,t){var a;a=c?c:this._appContext.getPageData().errorList.globalErrors;for(var l=a[t]?a[t].length:0,n=0;l>n;n++)if(a[t][n].code==e)return void aria.utils.Json.splice(a[t],n,1)},removeAll:function(e,c){var t;t=e?e:this._appContext.getPageData().errorList.globalErrors,t[c]&&aria.utils.Json.splice(t[c],0,t[c].length)},add:function(e,c,t,a){var l,n,o;"object"==typeof e?(n={code:e.code,message:e.message,linkMessage:e.linkMessage,linkTargetId:e.linkTargetId},o=e.path):(n={code:e,message:c},o=t),l=o?t:this._appContext.getPageData().errorList.globalErrors,l[a]?aria.utils.Json.add(l[a],n):this.set([n],t,a)},setFatalErrors:function(e,c){this.set(e,c,this.FATAL_ERROR)},setErrors:function(e,c){this.set(e,c,this.ERROR)},setWarnings:function(e,c){this.set(e,c,this.WARNING)},set:function(e,c,t){var a;a=c?c:this._appContext.getPageData().errorList.globalErrors,aria.utils.Json.setValue(a,t,e)},_has:function(e,c,t){var a;a=t?t:this._appContext.getPageData().errorList.globalErrors;for(var l=a[c]?a[c].length:0,n=0;l>n;n++)if(a[c][n].code===e)return!0;return!1},hasError:function(e,c){return this._has(e,this.ERROR,c)},hasWarning:function(e,c){return this._has(e,this.WARNING,c)},hasErrorsOrWarnings:function(e){var c=e.errorList.globalErrors,t=c&&(c.E&&c.E.length>0||c.W&&c.W.length>0);return t},raiseAnalyticsErrorEvents:function(e){this.raiseAnalyticsErrorEventsInList(e.E,this.ERROR_LABEL),this.raiseAnalyticsErrorEventsInList(e.W,this.WARNING_LABEL)},raiseAnalyticsErrorEventsInList:function(e,c){if(e)for(var t in e)e[t].code&&this.raiseAnalyticsEventError(e[t].code,c)},raiseAnalyticsEventError:function(e,c){var t=plnextv2.utils.analytics.AnalyticsUtils,a=t.EVENT_TYPE.ERROR;c===this.WIDGET_ERROR_LABEL&&(a=t.EVENT_TYPE.WIDGET_ERROR);var l={errorCode:e,pageID:plnextv2.utils.context.AppContext.getPageId(),type:c,eventType:a};this._appContext.getEventBus().publish("analytics:event:error",this,l)},getCodeList:function(e){var c="";if(e)for(var t=0;t<e.length;t++)""!==c&&(c+=this.SEPARATOR_LEVEL_2),c+=e[t].code;return c},createErrorBound:function(e,c,t,a){return{code:e,message:c,linkMessage:t,linkTargetId:this.AVAILABILITY_BOUND+a}},setErrorsOnNextStep:function(e){var c=this._i18nUtils.getLabel("tx_pltg_text_DefaultPleaseSelect"),t=this._i18nUtils.getLabel("tx_pltg_text_ErrorDepartureflight"),a=this._i18nUtils.getLabel("tx_pltg_text_ErrorReturnflight");this.setErrors(0===e?[this.createErrorBound("666",c,t,0)]:1===e?[this.createErrorBound("666",c,a,1)]:[this.createErrorBound("666",c,t,0),this.createErrorBound("666",c,a,1)])},updateAjaxErrorsAndWarnings:function(e,c){"object"!=typeof e.ajaxErrors&&(e.ajaxErrors={}),this.removeAjaxErrorsAndWarnings(e),this.setAjaxErrorsAndWarnings(e,c)},removeAjaxErrorsAndWarnings:function(e){var c=e.ajaxErrors[this.ERROR];if(c){for(var t=0;t<c.length;t++)this.removeError(c[t].code);this.removeAll(e.ajaxErrors,this.ERROR)}var a=e.ajaxErrors[this.WARNING];if(a){for(var t=0;t<a.length;t++)this.removeWarning(a[t].code);this.removeAll(e.ajaxErrors,this.WARNING)}},setAjaxErrorsAndWarnings:function(e,c){c&&(c.E?(this.addErrors(c.E),this.setErrors(c.E,e.ajaxErrors)):c.W&&(this.addWarnings(c.W),this.setWarnings(c.W,e.ajaxErrors)))}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/AccessibilityUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.AccessibilityUtils",$singleton:!0,$prototype:{getConfigSkipTo:function(e,c){e=e||{};var t=this.getClassName(e,c),a={className:e.className?e.className+t:t,targetId:e.href||"",href:"#"+e.href,title:e.title||"",tabindex:e.tabindex||"1",content:e.content||"Skip Navigation",id:e.id||e.href,$appendTo:e.$appendTo,$removeFrom:e.$removeFrom};return a},getClassName:function(e,c){var t=" plnext-sr-only skip-link hidden-print ";return c&&c.local?t+=" plnext-sr-only-inner-page btn ":e.isPageContent&&(t+=" plnext-sr-only-page btn "),c&&c.hidden&&(t=" plnext-sr-only "),t},append:function(e,c){var t=jQuery,a=t("#skip-to-"+e.id);if(!a[0])if(a=this._createLink(e),e.$appendTo)t(e.$appendTo).append(a);else{var l=t("#plnext-skip-link-container");c?l=t(c):0==l.length&&(l=t("<div id='plnext-skip-link-container'/>"),t("#page-container").prepend(l)),l.append(a)}a.html(e.content)},removeSkipToLink:function(e){var c=jQuery;c("a").remove("#skip-to-"+e.id)},_createLink:function(e){var c=jQuery,t=c("<a/>").addClass("plnext-sr-only "+e.className);return t.attr("id","skip-to-"+e.id),t.attr("href",plnextv2.utils.UrlUtils.urlFor(e.href)),t.attr("data-target-id",e.targetId),t.attr("tabindex",e.tabindex),t.click({elmId:e.id},this.changeFocus),t},changeFocus:function(e){e.preventDefault();var c=jQuery(e.target).attr("data-target-id"),t=aria.utils.Dom.getElementById(c),a=t.getAttribute("tabindex");null==a&&t.setAttribute("tabindex","-1"),t.focus()}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/AvailabilityErrorUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.AvailabilityErrorUtils",$extends:"plnextv2.utils.AbstractErrorUtils",$singleton:!0,$constructor:function(){this.$AbstractErrorUtils.constructor.call(this)},$statics:{LINK:{AVAILABILITY_BOUND_0:"availability-bound-0",AVAILABILITY_BOUND_1:"availability-bound-1",ITINERARY_BOUND:"itinerary-bound",OUTBOUNDSECTION:"availability-schedule-outboundsection",INBOUNDSECTION:"availability-schedule-inboundsection",COMPLEX_FP:"complex-itinerary-bound",FAKE_LINK:"javascript:void(0);",COMPLEX_ITI_HEADER:"complexItinerary-ff-header",TRIPSUMMARY_HEADER:"tripsummary-mini-container"},LABEL:{SELECT_FLIGHTS:"tx_pltg_text_SelectFlights",SELECT_FLIGHTS_PATTERN:"tx_pltg_pattern_SelectFlightsError",SELECT_REMAINING_FLIGHTS_PATTERN:"tx_pltg_pattern_SelectRemainingFlightsError",SELECT_FLIGHT_PATTERN:"tx_pltg_pattern_SelectFlightError",SELECT_DEPARTURE_ERROR_PATTERN:"tx_pltg_pattern_SelectDepartureFlightError",SELECT_RETURN_ERROR_PATTERN:"tx_pltg_pattern_SelectReturnFlightError",SELECT_FLIGHT_NUMBER_PATTERN:"tx_pltg_pattern_SelectFlightNumberError"}},$prototype:{computeErrorString:function(e,c){return e?this._i18nUtils.getStringFromPattern(e,[c]):this._i18nUtils.getLabel(this.LABEL.SELECT_FLIGHTS)},displayItineraryErrors:function(e,c,t){var a=this.getTripSummaryHeaderId(),l=[];"O"===t?e[0]||l.push({code:"666",message:this.computeErrorString(this.LABEL.SELECT_FLIGHT_PATTERN,this.LINK.FAKE_LINK),linkToTarget:this.LINK.AVAILABILITY_BOUND_0,headerId:a}):(c||"R"===t||"M"===t)&&(e[0]||l.push({code:"666",message:this.computeErrorString(this.LABEL.SELECT_DEPARTURE_ERROR_PATTERN,this.LINK.FAKE_LINK),linkToTarget:this.LINK.AVAILABILITY_BOUND_0,headerId:a}),e[1]||!e[0]&&c||l.push({code:"666",message:this.computeErrorString(this.LABEL.SELECT_RETURN_ERROR_PATTERN,this.LINK.FAKE_LINK),linkToTarget:this.LINK.AVAILABILITY_BOUND_1,headerId:a})),this.setErrorsAndFocus(l)},setErrorsAndFocus:function(e){e.length>0&&(this.setErrors(e),document.getElementById("global-error-message").focus())},getTripSummaryHeaderId:function(){return document.getElementById(this.LINK.TRIPSUMMARY_HEADER)?this.LINK.TRIPSUMMARY_HEADER:null}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/BlockerUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.BlockerUtils",$singleton:!0,$statics:{TIME_TO_THINK:"TTT",INSURANCE:"INS",MCP:"MCP",AMOP:"AMOP",MAC:"MAC",EBANK:"EBANK",PROMOCODE:"PROMOCODE",AVIOS:"AVIOS",UNBLOCKED:"UNBLOCKED",DEFAULT_BLOCKER:{type:"",description:""},BS_GRID:{dialogButton:{cols:{xxs:24}}}},$prototype:{removeFromBlockers:function(e,c){for(var t=0;t<c.length;t++){var a=c[t];if(a.type===e)return void c.splice(t,1)}},addToBlockers:function(e,c,t){for(var a=0;a<t.length;a++){var l=t[a];if(l.type===e)return l.description=c,!1}return t.push({type:e,description:c}),!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/BookingConfirmationUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.BookingConfirmationUtils",$singleton:!0,$prototype:{allowCancelFlightButton:function(e){return e?e.allowCancelFlightButton:!1},allowCancelBookingButton:function(e){return e?e.allowCancelBookingButton:!1},isPayNow:function(e){if(e){if(e.isResponsiveReservationPanel)return e.enablePayNow&&!e.hasTimeToThinkDisruptionIncompatibility;var c=e.RTPL||e.CONF||e.RCONF;return c.enablePayNow&&!c.hasTimeToThinkDisruptionIncompatibility}return!1},isShoppingBasketFlowAndPayWithMiles:function(e,c){if(!e||!c)return!1;var t=c.enableShoppingBasket,a=e.milesAndCashMergedFlow||e.milesAndCash;return t&&a&&a.milesCost>0},isFrequentFlyerNumberAvailable:function(e){return e&&e.FREQ_Number?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/BootstrapUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.BootstrapUtils",$singleton:!0,$statics:{XXXS_MIN:"320px",XXXS_MAX:"479px",XXS_MIN:"480px",XXS_MAX:"599px",XS_MIN:"600px",XS_MAX:"767px",SM_MIN:"768px",SM_MAX:"991px",MD_MIN:"992px",MD_MAX:"1199px",LG_MIN:"1200px"},$prototype:{getBsGridClass:function(e,c){var t=e;c&&(t=e[c]);var a="";if(t){var l=aria.utils.Json.copy(t.cols),n=aria.utils.Json.copy(t.offsets),o=aria.utils.Json.copy(t.hidden)||[],s=aria.utils.Json.copy(t.visible)||[];for(var d in l)a+=" col-"+d+"-"+l[d]+" ";for(var d in n)a+=" col-"+d+"-offset-"+n[d]+" ";for(var r=o.length,f=0;r>f;f++)a+=" hidden-"+o[f]+" ";for(var r=s.length,f=0;r>f;f++)a+=" visible-"+s[f]+" "}return a},getClasses:function(e,c,t){var a,l=e[c]||e,n=this.getBsGridClass.apply(this,arguments).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");return l&&l.classNames&&(a=[].concat(a,l.classNames)),t&&(a=[].concat(a,t)),a.join(" ")+" "+n},getBreakpointForXSDisplay:function(){return this.XS},getBreakpointForSMDisplay:function(){return this.SM},getBreakpointForMDDisplay:function(){return this.MD}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/BoundUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.BoundUtils",$singleton:!0,$prototype:{isModifiableBound:function(e,t,c,a){return this.isModifiedBound(e,c)||this.areAllBoundsModifiable(t,c,a)},isModifiedBound:function(e,t){return null!=t&&(aria.utils.Array.contains(t,e)||aria.utils.Array.contains(t,e.toString()))},areAllBoundsModifiable:function(e,t,c){return!t||aria.utils.Array.isEmpty(t)||!c||t.length===e.length},boundHasMultipleFareFamilies:function(e){if(e&&null!=e.listSegment&&e.listSegment.length>1&&null!=e.listSegment[0].fareFamily)for(var t=e.listSegment[0].fareFamily.ffCode,c=1;c<e.listSegment.length;c++)if(e.listSegment[c].fareFamily&&e.listSegment[c].fareFamily.ffCode){var a=e.listSegment[c].fareFamily.ffCode;if(t!==a)return!0}return!1},boundHasMultipleCabins:function(e){var t=this.getCabinsFromBound(e);return t&&t.length>1},getCabinsFromBound:function(e){var t=[];if(e&&e.listSegment)for(var c=0;c<e.listSegment.length;c++)if(e.listSegment[c].listCabin)for(var a=0;a<e.listSegment[c].listCabin.length;a++)-1===t.indexOf(e.listSegment[c].listCabin[a].name)&&t.push(e.listSegment[c].listCabin[a].name);return t},getCabinsFromBoundAsString:function(e){for(var t=this.getCabinsFromBound(e),c="",a=0;a<t.length;a++)c+=t[a],a<t.length-1&&(c+=", ");return c+="."},getSegmentIds:function(e){var t=[];if(e)for(var c=0;c<e.length>0;c++)t.push(e[c].id);return t}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/CEMInformationUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.CEMInformationUtils",$dependencies:["plnextv2.utils.storage.LocalStorageManager","plnextv2.config.LocalStorageBeans"],$singleton:!0,$statics:{LOCAL_STORAGE_BEANS:"plnextv2.config.LocalStorageBeans",COMMON_KEY:"COMMON",CEM_INFORMATION_KEY:"CEM_INFORMATION"},$constructor:function(){this.localStorageManager=plnextv2.utils.storage.LocalStorageManager,this.beanCfg=this.LOCAL_STORAGE_BEANS+"."+this.CEM_INFORMATION_KEY},$prototype:{storeCEMInformation:function(e){aria.core.JsonValidator.validateCfg(this.beanCfg,e),this.localStorageManager.set(this.CEM_INFORMATION_KEY,e,this.COMMON_KEY)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/CarUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.CarUtils",$dependencies:["aria.utils.Type","aria.utils.Array","plnextv2.utils.HtmlUtils","plnextv2.utils.storage.SessionStorageManager","plnextv2.utils.widgets.plnextLib.navigationManager.PlnextNavigationManager","plnextv2.utils.ErrorUtils","aria.utils.Json","plnextv2.utils.requestManager.PlnextRequestManager"],$singleton:!0,$statics:{CANCELLATION_FEE_CODE:"CLF"},$constructor:function(){this._navigationManager=plnextv2.utils.widgets.plnextLib.navigationManager.PlnextNavigationManager,this._htmlUtils=plnextv2.utils.HtmlUtils,this._storageManager=plnextv2.utils.storage.SessionStorageManager,this._errorUtils=plnextv2.utils.ErrorUtils,this._json=aria.utils.Json,this._reqMgr=plnextv2.utils.requestManager.PlnextRequestManager},$prototype:{__addZero:function(e){return 10>e&&(e="0"+e),e},getAirportLabel:function(e,t,c){var a="",n="";if(e&&t)a=e,n=t;else if(t&&3==t.length){var l=jQuery.grep(c,function(e){return e.airportCode===t});l.length>0?(a=l[0].cityName,n=l[0].airportCode):n=t}else e&&(n=e);return a&&n?plnextv2.utils.I18n.getStringFromPattern("CARP.listingView.pattern.airportAddress",[a,n]):n},timeToString:function(e){var t=this.__addZero(e.getHours()),c=this.__addZero(e.getMinutes()<30?0:30);return t+":"+c},isListCarRecapPopulated:function(e){return!!e&&!!e.listCarRecap&&aria.utils.Type.isArray(e.listCarRecap)&&!aria.utils.Array.isEmpty(e.listCarRecap)&&!!e.listCarRecap[0].car},hasCarContactCompany:function(e){return this.isListCarRecapPopulated(e)&&e.carContact&&e.carContact.carCompany},hasCarCompanyName:function(e){return this.isListCarRecapPopulated(e)&&!!e.listCarRecap[0].car.company&&!!e.listCarRecap[0].car.company.name},getCarCompanyName:function(e){return this.hasCarCompanyName(e)?e.listCarRecap[0].car.company.name:void 0},hasCarCompanyCode:function(e){return this.isListCarRecapPopulated(e)&&!!e.listCarRecap[0].car.company&&!!e.listCarRecap[0].car.company.code},getCarCompanyCode:function(e){return this.hasCarCompanyCode(e)?e.listCarRecap[0].car.company.code:void 0},hasCarReservation:function(e){return!!e&&!!e.carReservation},hasLeisureCar:function(e){return this.hasCarReservation(e)&&!!e.carReservation.hasLeisureCar},hasCorporateCar:function(e){return this.hasCarReservation(e)&&!!e.carReservation.hasCorporateCar},hasCarReservations:function(e){return this.hasCarReservation(e)&&!!e.carReservation.carReservations&&aria.utils.Type.isArray(e.carReservation.carReservations)&&!aria.utils.Array.isEmpty(e.carReservation.carReservations)},getCarCancellationFee:function(e){var t=null,c=!!e&&!!e.ListCancellation&&aria.utils.Type.isArray(e.ListCancellation)&&!aria.utils.Array.isEmpty(e.ListCancellation);if(c){var a=aria.utils.Array.filter(e.ListCancellation,function(e){return e.Code===this.CANCELLATION_FEE_CODE},this);a.length&&(t=a[0])}return t},removeCarAjaxSuccess:function(e,t){if(this._htmlUtils.deactivateLoading(document.body),!this._hasErrors(e)){this._storageManager.remove("driverAssociated","car");var c=aria.utils.Path.describe(e,"response.data.business.listCarRecap");null!=c&&c.value&&t.carData.listCarRecap.length>0&&this._json.removeAt(t.carData.listCarRecap,0),this.priceUtils=new plnextv2.utils.PriceBeanUtils(t.carData.price),this.priceUtils.clearCarPrice(),t.eventBus.publish("carRecap:car:removed",this)}this._navigationManager.snapshot()},_hasErrors:function(e){var t=!1,c=e.response.data.errorList.globalErrors;return c&&c.E&&c.E.length>0&&(this._errorUtils.setErrors(c.E),t=!0),t},sendRemoveCarAjax:function(e,t,c,a,n){n||(n={}),n.ITEM_ID=e,n.TYPE="CAR";var l={url:"ajax",uid:t,data:n,callback:{fn:this.removeCarAjaxSuccess,scope:this,args:{carData:c,eventBus:a}}};this._htmlUtils.activateLoading({container:document.body}),this._reqMgr.sendAjax(l)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/CardinalUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.CardinalUtils",$singleton:!0,$dependencies:["plnextv2.utils.context.AppContext","plnextv2.utils.ErrorUtils","plnextv2.utils.HtmlUtils","plnextv2.utils.ErrorCodes","plnextv2.utils.I18n","plnextv2.utils.storage.SessionStorageManager"],$statics:{LABEL:{CARDINAL_GERR_MESSAGE:"tx_pltg_text_cardinaljs_setup_generic_error_message"},CARDINAL_ERROR_RESPONSE_CODE:["ERROR","FAILURE"]},$constructor:function(){this._errorUtils=plnextv2.utils.ErrorUtils,this._appContext=plnextv2.utils.context.AppContext,this._htmlUtils=plnextv2.utils.HtmlUtils,this._errorCodes=plnextv2.utils.ErrorCodes,this._i18n=plnextv2.utils.I18n,this._arrayUtils=aria.utils.Array,this._sessionStorage=plnextv2.utils.storage.SessionStorageManager,this.__isSongbirdLoaded()&&(this.configure(),this._registerOnPaymentSetupComplete(this),this._registerOnUiSetupComplete(),this._registerOnPaymentValidated(this))},$prototype:{init:function(e){this.__isSongbirdLoaded()&&(this._htmlUtils.activateLoading({container:document.body}),window.Cardinal.setup("init",{jwt:e}))},setupOnVeri:function(e){this.__isSongbirdLoaded()&&window.Cardinal.setup("init",{jwt:e})},__isSongbirdLoaded:function(){return!!window.Cardinal},configure:function(){window.Cardinal.configure({logging:{level:Aria.debug?"verbose":"off"},payment:{framework:"inline"}})},_registerOnPaymentSetupComplete:function(e){window.Cardinal.on("payments.setupComplete",function(t){var c=e._appContext.getPageData().business.ThreeDSAccessControl,a=e._sessionStorage.get("cardinal","ALL");a.sessionId=t.sessionId,e._sessionStorage.set("cardinal",a,"CARDINAL"),c&&c.acsUrl&&c.payload&&c.transactionId&&window.Cardinal.continue("cca",{AcsUrl:c.acsUrl,Payload:c.payload},{OrderDetails:{TransactionId:c.transactionId}}),e._appContext.getEventBus().publish("purc:sessionIdThreeDS:update",e,{sessionId:a.sessionId})})},_registerOnUiSetupComplete:function(){window.Cardinal.on("ui.inline.setup",function(e,t,c,a){try{var n;if(void 0===e||void 0===t)throw new Error("Unable to process request due to invalid arguments");switch(t.paymentType){case"CCA":switch(t.data.mode){case"static":n=document.getElementById("cardinal-check-form");break;case"suppress":n=document.getElementById("cardinal-check-form");break;default:throw new Error("Unsupported inline mode found ["+t.data.mode+"]")}break;default:throw new Error("Unsupported inline payment type found ["+t.paymentType+"]")}n.innerHTML=e,c()}catch(l){a(l)}})},_registerOnPaymentValidated:function(e){window.Cardinal.on("payments.validated",function(t,c){e._htmlUtils.deactivateLoading(document.body),e._arrayUtils.contains(e.CARDINAL_ERROR_RESPONSE_CODE,t.ActionCode)?e._errorUtils.setErrors([{code:e._errorCodes.CARDINAL_SETUP_GENERIC_ERROR,message:e._i18n.getLabel(e.LABEL.CARDINAL_GERR_MESSAGE)}]):c&&(this.window.document.BREAK_FORM.elements.PAYMENT_ENCRYPTED_TOKEN.value=c)})}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/CatalogServicesUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.CatalogServicesUtils",$singleton:!0,$dependencies:["plnextv2.components.catalogServices.desktop.controller.DCatalogServicesConstants"],$statics:{LIST_PROPERTIES_NUMBER:"NUMBER",INPUT_PARAMS_VALUE:"VALUE"},$constructor:function(){this._catalogConstants=plnextv2.components.catalogServices.desktop.controller.DCatalogServicesConstants,this.ASSOCIATIONS_WITHOUT_ELEMENT_CHECKING=[this._catalogConstants.ASSOCIATION_MODE_ITINERARY,this._catalogConstants.ASSOCIATION_MODE_GROUND]},$prototype:{getEligibilitiesForCategory:function(e){for(var t=[],c=e.services,a=c.length,n=0;a>n;n++){var l=c[n];t=t.concat(this.getEligibilitiesForService(l,e))}return t},getEligibilitiesForService:function(e){for(var t=[],c=e.eligibilityGroups,a=0;c&&a<c.length;a++)t=t.concat(c[a].eligibilities);return t},getPassengerIdsForService:function(e){for(var t=[],c=this.getEligibilitiesForService(e),a=0;a<c.length;a++){var n=c[a].passengerIds;if(n)for(var l=0;l<n.length;l++)aria.utils.Array.contains(t,n[l])||t.push(n[l])}return t},getElementIdsForService:function(e){var t=[],c=this.getEligibilitiesForService(e);if(null!=c)for(var a=0;a<c.length;a++){var n=c[a].elementIds;if(n)for(var l=0;l<n.length;l++)aria.utils.Array.contains(t,n[l])||t.push(n[l])}return t},getServicesEligibleForPax:function(e,t,c){for(var a=[],n=0;n<e.length;n++)for(var l=e[n],o=this.getEligibilitiesForService(l),s=0;s<o.length;s++){if(l.passengerAssociated&&aria.utils.Array.contains(o[s].passengerIds,t)){a.push(l);break}if(!c){a.push(l);break}}return a},getEligibilityForService:function(e,t,c,a){for(var n=this._extractMatchingEligibilities(e,t,c),l=this._extractEligibilityKeysInSelectionForService(e,a),o=0;l.length>0&&o<n.length;++o)if(aria.utils.Array.contains(l,n[o].eligibilityKey))return n[o];return n.length>0?n[0]:null},_extractEligibilityKeysInSelectionForService:function(e,t){var c=[];if(t&&t.selectionByCategoryServiceEligibilityAndIndex&&t.selectionByCategoryServiceEligibilityAndIndex[e.categoryCode]&&t.selectionByCategoryServiceEligibilityAndIndex[e.categoryCode][e.code]){var a=t.selectionByCategoryServiceEligibilityAndIndex[e.categoryCode][e.code];a=aria.utils.Json.removeMetadata(a),c=Object.keys(a)}return c},_extractMatchingEligibilities:function(e,t,c){var a=this.getEligibilitiesForService(e);return aria.utils.Array.filter(a,function(a){return this._isEligibilityMatching(e,t,c,a)},this)},_isEligibilityMatching:function(e,t,c,a){return e.passengerAssociated&&c&&!aria.utils.Array.contains(a.passengerIds,c)?!1:a.eligibilityType===e.associationMode&&aria.utils.Array.contains(this.ASSOCIATIONS_WITHOUT_ELEMENT_CHECKING,e.associationMode)||aria.utils.Array.contains(a.elementIds,t)?!0:!1},_getServicesForElement:function(e,t,c){var a=[],n=e.length;e:for(var l=0;n>l;l++){{var o=e[l];o.associationMode}if(o.associationMode===t)for(var s=o.eligibilityGroups.length,r=0;s>r;r++)for(var d=o.eligibilityGroups[r],i=d.eligibilities.length,f=0;i>f;f++){var b=d.eligibilities[f];if(b.eligibilityType===t&&(!b.elementIds||0==b.elementIds.length||aria.utils.Array.contains(b.elementIds,c))){a.push(o);continue e}}}return a},getServicesEligibleForBound:function(e,t){return this._getServicesForElement(e,this._catalogConstants.ASSOCIATION_MODE_ELEMENT,t)},getServicesEligibleForSegment:function(e,t){return this._getServicesForElement(e,this._catalogConstants.ASSOCIATION_MODE_SEGMENT,t)},getServicesEligibleForItinerary:function(e){for(var t=[],c=e.length,a=0;c>a;a++){var n=e[a];n.associationMode===this._catalogConstants.ASSOCIATION_MODE_ITINERARY&&t.push(n)}return t},getServicesEligibleForGround:function(e){for(var t=[],c=e.length,a=0;c>a;a++){var n=e[a];n.associationMode===this._catalogConstants.ASSOCIATION_MODE_GROUND&&t.push(n)}return t},getEligibilitiesForServiceAndPassengers:function(e,t,c,a){var n=[];if(c)for(var l=0;l<c.length;l++){var o=this.getEligibilityForService(e,t,c[l],a);o&&n.push(o)}return n},isSeatmapService:function(e){return e.code===this._catalogConstants.SEATMAP_CODE},isSeatmapCategory:function(e){return e.services&&1===e.services.length&&this.isSeatmapService(e.services[0])},containsPackWithSeat:function(e){for(var t=0;t<e.services.length;t++)if(e.services[t].isPack&&e.services[t].hasSeat)return!0;return!1},getNumberForServices:function(e){for(var t=0,c=0;c<e.length;c++){var a=e[c];t+=a.number?a.number:this.isSeatmapService(a)?1:0}return t},getServicesInSelection:function(e,t,c){var a=[],n=aria.utils.Json.removeMetadata(c.data.selectionByCategoryServiceEligibilityAndIndex);if(n&&n[e.categoryCode]&&n[e.categoryCode][e.code]){var l=this._getSegmentIds(e,t,c);for(var o in n[e.categoryCode][e.code])for(var s in n[e.categoryCode][e.code][o]){var r=n[e.categoryCode][e.code][o][s];(c.fromServiceSelection===!0&&(aria.utils.Array.contains(l,0)||aria.utils.Array.contains(l,r.elementId))||c.fromServiceSelection===!1&&(0===t||r.elementId===t))&&a.push(r)}}return a},_getSegmentIds:function(e,t,c){var a=[];if(e.associationMode===this._catalogConstants.ASSOCIATION_MODE_ITINERARY)a[0]=t;else{var n=this.getEligibilityForService(e,t,null,c);a=n.mapSegmentIds[t]}return a},getNumberServiceSelectedInSelection:function(e,t,c){var a=0,n=this.getServicesInSelection(e,t,c);if(n)for(var l=0;l<n.length;l++)n[l].number&&(a+=n[l].number);return a},isNIPParameter:function(e,t){return e==this._catalogConstants.NIP_PROPERTY_CODE&&t==this._catalogConstants.VALUE_PARAMETER_CODE},isSubcategoryPaxAssociated:function(e){return e?e[0].passengerAssociated:void 0},getSubcategoryByCode:function(e,t){for(var c=0;c<t.subcategories.length;c++)if(t.subcategories[c].code==e)return t.subcategories[c];return null},getEligibilityKeysForServiceAndElement:function(e,t){for(var c=this.getEligibilitiesForService(e),a=[],n=c.length,l=0;n>l;l++){var o=c[l];o.eligibilityType!=e.associationMode||e.associationMode!=this._catalogConstants.ASSOCIATION_MODE_ITINERARY&&e.associationMode!=this._catalogConstants.ASSOCIATION_MODE_GROUND&&!aria.utils.Array.contains(o.elementIds,t)||a.push(o.eligibilityKey)}return a},getAssociatedInputTag:function(e,t,c){for(var a=e.substring(1,e.indexOf(".")),n=e.substring(e.indexOf(".")+1),l=0;l<t.listProperties.length;l++)if(t.listProperties[l].code==a)for(var o=0;o<t.listProperties[l].inputParams.length;o++){var s=t.listProperties[l].inputParams[o];if(s.code==n){var r=s.inputTag,d=c.split("_"),i=d[d.length-3],f=d[d.length-1];return r=r.replace(this._catalogConstants.INPUT_PARAM_TRAVELLER_ID,i),r=r.replace(this._catalogConstants.INPUT_PARAM_INDEX,f)}}},addDropdownOption:function(e,t,c,a){var n=a?"code":"value",l={};l[n]=e,l.label=t,c.push(l)},getEligibilityGroupFromEligibility:function(e,t){for(var c=e.eligibilityGroups,a=0;a<c.length;a++)for(var n=c[a].eligibilities,l=0;l<n.length;l++)if(n[l].eligibilityKey===t.eligibilityKey&&n[l].eligibilityType===t.eligibilityType)return c[a];return null},getPassengerIdsForServices:function(e){for(var t=[],c=e.length,a=0;c>a;a++)for(var n=e[a],l=this.getPassengerIdsForService(n),o=l.length,s=0;o>s;s++){var r=l[s];aria.utils.Array.contains(t,r)||t.push(r)}return t},getElementIdsForServices:function(e){for(var t=[],c=e.length,a=0;c>a;a++)for(var n=e[a],l=this.getElementIdsForService(n),o=l.length,s=0;o>s;s++){var r=l[s];aria.utils.Array.contains(t,r)||t.push(r)}return t},getServicesEligibleForElementAndPassenger:function(e,t,c){return aria.utils.Array.filter(e,function(e){return null!==this.getEligibilityForService(e,t,c)},this)},shouldDisplayCatalogPrice:function(e,t){return t.currentDisplay&&"boolean"==typeof t.currentDisplay.displayCatalogPrice?!!t.currentDisplay.displayCatalogPrice:e&&e.currentDisplay&&!!e.currentDisplay.displayCatalogPrice},shouldComputeFixedPrice:function(e,t){return t&&e.listProperties&&1===e.listProperties.length&&e.listProperties[0].code===this.LIST_PROPERTIES_NUMBER&&1===e.listProperties[0].inputParams.length&&e.listProperties[0].inputParams[0].code===this.INPUT_PARAMS_VALUE}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/ColorUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.ColorUtils",$dependencies:["aria.core.Browser"],$singleton:!0,$constructor:function(){this.browser=aria.core.Browser},$statics:{RGBA:"rgba",RGB:"rgb"},$prototype:{convertHexToRGB:function(e){if(e){var t=this.__decomposeColorHexToRGB(e);return this.__buildCSSRule(this.RGB,t)}return""},convertHexToRGBA:function(e,t){if(e){var c=this.__decomposeColorHexToRGB(e);return this.__buildCSSRule(this.RGBA,c,t)}return""},computeGradient:function(e,t,c){var a=this.__decomposeColorHexToRGB(e),n=this.__decomposeColorHexToRGB(t),l=Math.ceil(a[0]*c+n[0]*(1-c)),o=Math.ceil(a[1]*c+n[1]*(1-c)),s=Math.ceil(a[2]*c+n[2]*(1-c));return this.__buildCSSRule(this.RGB,[l,o,s])},__buildCSSRule:function(e,t,c){return 3!==t.length?"":e===this.RGBA&&c>=0&&1>=c&&!this.isLessIE(9)?[this.RGBA,"(",t.join(","),",",c,")"].join(""):[this.RGB,"(",t.join(","),")"].join("")},__decomposeColorHexToRGB:function(e){if(e&&e.length>=7){var t=this.__filterInt(parseInt(e.substring(1,3),16)),c=this.__filterInt(parseInt(e.substring(3,5),16)),a=this.__filterInt(parseInt(e.substring(5,7),16));if(!isNaN(t)&&!isNaN(c)&&!isNaN(a))return[t,c,a]}return[]},__convertToHex:function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},isLessIE:function(e){return this.browser.isIE&&this.browser.majorVersion<e},__filterInt:function(e){return/^(\-|\+)?([0-9]+|Infinity)$/.test(e)?Number(e):0/0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/CommonReservationDetailsUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.CommonReservationDetailsUtils",$dependencies:[],$singleton:!0,$statics:{},$constructor:function(){},$prototype:{isRebookFlow:function(e,t){return e.flowType===t.FLOW_TYPE_REBOOK},isTimeToThinkEmdAvailable:function(e,t){return t&&t.isSelected&&t.tickets[e]&&t.tickets[e].tickets.length>0},getTTTAmount:function(e){var t={isSelected:!1};return e&&e.timeToThink&&e.timeToThink.isSelected&&(t={amount:e.timeToThink.price.cash.totalAmount,currency:e.timeToThink.price.cash.currency,isSelected:e.timeToThink.isSelected}),t}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/ContactsAtRootUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.ContactsAtRootUtils",$singleton:!0,$statics:{CONTACT_PATTERN:/CONTACT_(\d+)_/,ELEMENT_TO_REMOVE_PATTERN:/ELEMENT_TO_REMOVE_(\d+)_/},$constructor:function(){},$prototype:{getNextContactNumber:function(e){return this.getNextNumber(this.CONTACT_PATTERN,e)},getNextContactNumberToDelete:function(e){return this.getNextNumber(this.ELEMENT_TO_REMOVE_PATTERN,e)},getNextNumber:function(e,t){if(null===t||"object"!=typeof t)return 1;var c=0;for(var a in t)if(t.hasOwnProperty(a)){var n=e.exec(a);if(n&&2===n.length){var l=n[1];c=Math.max(l,c)}}return c+1},deleteOldContacts:function(e,t,c,a){if(t.existingContactId){var n=t.existingContactId[c];if(n&&n.length>0){var l,o=this.getNextContactNumberToDelete(e);for(l=0;l<n.length;l++)a["ELEMENT_TO_REMOVE_"+(l+o)+"_ID"]=n[l],a["ELEMENT_TO_REMOVE_"+(l+o)+"_TYPE"]="CONTACT"}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/CountryUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.CountryUtils",$dependencies:["plnextv2.utils.GlobalLists"],$singleton:!0,$statics:{},$constructor:function(){this._globalLists=plnextv2.utils.GlobalLists,this.$json=aria.utils.Json},$prototype:{getCountryName:function(e,t){return this._globalLists.findNameFromList(e.globalLists.LANG_COUNTRY_LIST,t,1)},retrieveStatesFromGlobalList:function(e){for(var t=e.globalLists.LANG_PROVINCE_NAME,c=[],a=0;a<t.length;a++){var n=t[a][0],l=this.getCountryIndex(c,n);if(-1===l){var o={country:n,states:[]};this.$json.add(c,o),l=c.length-1}var o={stateCode:t[a][1],stateName:t[a][3]};this.$json.add(c[l].states,o)}return c},getCountryIndex:function(e,t){for(var c=0;c<e.length;c++)if(this.$json.getValue(e[c],"country")===t)return c;return-1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/CouponUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.CouponUtils",$dependencies:["plnextv2.utils.storage.SessionStorageManager","aria.utils.Array"],$singleton:!0,$statics:{COUPON:{LIST_COUPON_STORAGE_KEY:"listCoupon",COUPON_CHECKED_IN_STORAGE_KEY:"isModifiedCouponCheckedIn",STORAGE_CONTEXT:"coupon",CHECKEDIN_STATUS:"CK"}},$constructor:function(){this._storageManager=plnextv2.utils.storage.SessionStorageManager,this._arrayUtils=aria.utils.Array},$prototype:{addCheckedInCouponToSession:function(e){if(e&&0!==e.length){var t=this._arrayUtils.filter(e,function(e){return e.status===this.COUPON.CHECKEDIN_STATUS},this);t&&t.length>0&&this._storageManager.set(this.COUPON.LIST_COUPON_STORAGE_KEY,t,this.COUPON.STORAGE_CONTEXT)}},_getListCouponFromSession:function(){return this._storageManager.get(this.COUPON.LIST_COUPON_STORAGE_KEY,this.COUPON.STORAGE_CONTEXT)},_isBoundCheckedIn:function(e){var t=this._getListCouponFromSession();if(!t||0===t.length)return!1;var c=this._arrayUtils.filter(t,function(t){return t.boundId===parseInt(e)},this);return c&&c.length>0},addcheckedInStatusToSession:function(e){if(e||0!==e.length){for(var t=!1,c=0;c<e.length;c++)if(this._isBoundCheckedIn(e[c])){t=!0;break}this._storageManager.set(this.COUPON.COUPON_CHECKED_IN_STORAGE_KEY,t,this.COUPON.STORAGE_CONTEXT)}},shouldDisplayCheckInMessage:function(){return!!this._storageManager.get(this.COUPON.COUPON_CHECKED_IN_STORAGE_KEY,this.COUPON.STORAGE_CONTEXT)},clearCouponSessionContext:function(){this._storageManager.clearContext(this.COUPON.STORAGE_CONTEXT)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/CurrencyUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.CurrencyUtils",$singleton:!0,$statics:{LANG_CURRENCY_DESCRIPTION:"LANG_CURRENCY_DESCRIPTION"},$constructor:function(){},$prototype:{getCurrencyDescription:function(e){var t="",c=plnextv2.utils.GlobalLists.getList(this.LANG_CURRENCY_DESCRIPTION,!1);if(null!=c)for(var a=0;a<c.length;a++){var n=c[a][0];if(e==n){t=c[a][1];break}}return t}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/CustomAriaUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.CustomAriaUtils",$dependencies:["aria.utils.Type","aria.utils.Json","aria.utils.Object"],$singleton:!0,$constructor:function(){this.$object=aria.utils.Object},$prototype:{isMetadata:function(e){return-1!=e.indexOf(":")},removeMetadata:function(e,t,c,a){if(c=this.$object.assign({},{cleanCircular:!1,exclude:[]},c),a=a||[],t&&!Aria.debug)return e;var n,l=Object.prototype.toString.apply(e);if("[object Object]"===l)n={};else{if("[object Array]"!==l)return e;n=[]}for(var o in e)if(e.hasOwnProperty(o)&&-1===o.indexOf(":")){var s=e[o],r=Object.prototype.toString.apply(s);c.cleanCircular&&this.isNested(r)&&this.isCircularObject(a,s)||c.cleanCircular&&s&&s.$constructor||(e[o]&&this.isNested(r)?(a.push(s),n[o]=this.removeMetadata(s,t,c,a),a.splice(-1,1)):n[o]=s)}return n},isCircularObject:function(e,t){return Array.isArray(e)&&e.indexOf(t)>-1},isNested:function(e){return"[object Object]"===e||"[object Array]"===e},cloneObject:function(e){if(null===e||"object"!=typeof e)return e;var t={};for(var c in e)t[c]=e[c];return t},cloneDeep:function(e){return aria.utils.Json.copy(e,!0,null,!1)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/CustomerHelper.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.CustomerHelper",$singleton:!0,$constructor:function(){this._customSearchFunction=Aria.empty},$prototype:{customUpdateSearch:function(e){return this._customSearchFunction(e)},setCustomSearchFunction:function(e){this._customSearchFunction=e}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/DOMUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.DOMUtils",$singleton:!0,$prototype:{getInnerText:function(e,t){if(e){var c=e;if(t&&(c=e.querySelector(t)),c&&c.innerText)return this._formatText(c.innerText)}},getInnerTextFromDropDown:function(e){if(e&&!(e.selectedIndex<0)){var t=e[e.selectedIndex];return this.getInnerText(t)}},getTextFromInput:function(e){return e&&e.value?this._formatText(e.value):void 0},_formatText:function(e){return e.replace(/[\r\n\t]/g," ").trim()}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/DateTimeUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.DateTimeUtils",$dependencies:["plnextv2.utils.Symbols","aria.utils.Date","aria.utils.environment.Date"],$singleton:!0,$constructor:function(){this._symbols=plnextv2.utils.Symbols},$prototype:{formatDate:function(e,t){var c=new Date(e);if(isNaN(c.getTime()))return this._symbols.NO_DATA;var a=aria.utils.environment.Date.getDateFormats(),n=a.longFormat;t&&t in a||(t=n);var l=new Date;return l.getYear()==c.getYear()&&(t=t.replace("yy",""),t=t.replace("YY","")),aria.utils.Date.format(c,t,!0).toUpperCase()},formatTime:function(e,t){var c=new Date(e);return isNaN(c.getTime())?this._symbols.NO_DATA:(void 0==t&&(t=this._symbols.FMT_HOURS_MIN),aria.utils.Date.format(c,t,!0))},formatExpiryDate:function(e){var t=new Date(e.getTime()+6e4*e.getTimezoneOffset()),c=t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1,a=t.getFullYear().toString().slice(2);return c+a},getTimeZoneString:function(e){var t=e.getTimezoneOffset(),c=Math.abs(t);return(0>t?"+":"-")+("00"+Math.floor(c/60)).slice(-2)+":"+("00"+c%60).slice(-2)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/DateUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.DateUtils",$dependencies:["aria.utils.Date","plnextv2.utils.GlobalLists","plnextv2.utils.context.AppContext"],$singleton:!0,$statics:{UNIT_MILLISECOND_FACTORS:{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},SL_FULL_MONTH_LIST:"SL_FULL_MONTH_LIST",SL_SHORT_MONTH_LIST:"SL_SHORT_MONTH_LIST",SL_FULL_DAYS_LIST:"SL_FULL_DAYS_LIST",SL_SHORT_DAYS_LIST:"SL_SHORT_DAYS_LIST",SHORT_MONTH_LIST:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],FORMATS:{SHORT_MONTH_FORMAT:"SHORT_MONTH_FORMAT",MONTH_FORMAT:"MONTH_FORMAT",FULL_DATE_FORMAT:"FULL_DATE_FORMAT",FULL_DATE_FORMAT_1:"FULL_DATE_FORMAT_1",FULL_DATE_FORMAT_2:"FULL_DATE_FORMAT_2",FULL_DATE_FORMAT_3:"FULL_DATE_FORMAT_3",FULL_DATE_FORMAT_4:"FULL_DATE_FORMAT_4",FULL_DATE_FORMAT_5:"FULL_DATE_FORMAT_5",FULL_DATE_TIME_FORMAT:"FULL_DATE_TIME_FORMAT",FULL_DATE_TIME_FORMAT_1:"FULL_DATE_TIME_FORMAT_1",FULL_DATE_STRING:"FULL_DATE_STRING",SHORT_DATE_FORMAT:"SHORT_DATE_FORMAT",SHORT_DATE_FORMAT_1:"SHORT_DATE_FORMAT_1",SHORT_DATE_FORMAT_2:"SHORT_DATE_FORMAT_2",SHORT_DATE_FORMAT_3:"SHORT_DATE_FORMAT_3",SHORT_DATE_FORMAT_4:"SHORT_DATE_FORMAT_4",SHORT_DATE_FORMAT_5:"SHORT_DATE_FORMAT_5",SHORT_DATE_FORMAT_6:"SHORT_DATE_FORMAT_6",SHORT_DATE_FORMAT_8:"SHORT_DATE_FORMAT_8",TIME_FORMAT:"TIME_FORMAT",DURATION_FORMAT:"DURATION_FORMAT",DURATION_FORMAT_1:"DURATION_FORMAT_1",CALE_CELL_WEEK:"CALEcellWeek",CALE_CELL_DATE:"CALEcellDate",CALENDAR_MATRIX_DayOfWeekShort:"CALENDAR_MATRIX_DayOfWeekShort",CALENDAR_MATRIX_CellHeader_Top:"CALENDAR_MATRIX_CellHeader_Top",CALENDAR_MATRIX_CellHeader_Bottom:"CALENDAR_MATRIX_CellHeader_Bottom",CALENDAR_MATRIX_CellHeader_Bottom_left:"CALENDAR_MATRIX_CellHeader_Bottom_left",CALENDAR_MATRIX_CellHeader_Bottom_right:"CALENDAR_MATRIX_CellHeader_Bottom_right",COMPLEX_CALENDAR_MATRIX_CellHeader_Top:"COMPLEX_CALENDAR_MATRIX_CellHeader_Top",COMPLEX_CALENDAR_MATRIX_CellHeader_Bottom:"COMPLEX_CALENDAR_MATRIX_CellHeader_Bottom",COMPLEX_CALENDAR_MATRIX_CellHeader_Bottom_left:"CALENDAR_MATRIX_CellHeader_Bottom_left",COMPLEX_CALENDAR_MATRIX_CellHeader_Bottom_right:"CALENDAR_MATRIX_CellHeader_Bottom_right",OW_CALENDAR_CellHeader:"OW_CALENDAR_CellHeader",TIME_TABLE_CellHeader:"TIME_TABLE_CellHeader",SHORT_DAY_NAME_FORMAT:"SHORT_DAY_NAME_FORMAT",SHORT_RESPONSIVE_DAY_NAME_FORMAT:"SHORT_RESPONSIVE_DAY_NAME_FORMAT"},SCREEN_READER_FORMATS:{MONTH_YEAR:"MMMM yyyy",DAY_NUMBER_MONTH_YEAR:"EEEE dd MMMM yyyy",NUMBER_MONTH_YEAR:"dd MMMM yyyy",DAY_NUMBER_MONTH:"EEEE dd MMMM"},REGEXP_DURATION:"'[^']+'|''|\"[^\"]+\"|\"\"|M{1,2}|d{1,2}|y{1,2}|D{1,2}|H{1,2}|m{1,2}|s{1,2}|[^MdyHhms]{1,2}",REGEXP_FLAG_GLOBAL:"g",TIMEZONE:{UTC:"utc",LOCAL:"local"}},$prototype:{retrieveDateTimePattern:function(e){var t=plnextv2.utils.context.AppContext.getSiteConfig(),c=t.appData.config.dateTimeFormats;if(e in c)return c[e];switch(e){case this.FORMATS.SHORT_MONTH_FORMAT:return"MMM";case this.FORMATS.MONTH_FORMAT:return"MMMM yyyy";case this.FORMATS.FULL_DATE_FORMAT:return"EEEE d MMMM yyyy";case this.FORMATS.FULL_DATE_FORMAT_1:return"EEE dd MMM yyyy";case this.FORMATS.FULL_DATE_FORMAT_2:return"EEEE dd MMMM";case this.FORMATS.FULL_DATE_FORMAT_3:return"EEE d MMM yyyy";case this.FORMATS.FULL_DATE_FORMAT_4:return"EEE d MMMM";case this.FORMATS.FULL_DATE_FORMAT_5:return"EEE d MMMM yyyy";case this.FORMATS.FULL_DATE_TIME_FORMAT:return"EEEE, MMMM dd, yyyy HH:mm";case this.FORMATS.FULL_DATE_TIME_FORMAT_1:return"EEEE dd MMMM yyyy HH:mm";case this.FORMATS.SHORT_DATE_FORMAT:return"dd MMM yyyy";case this.FORMATS.SHORT_DATE_FORMAT_1:return"dd MMMM yyyy";case this.FORMATS.SHORT_DATE_FORMAT_2:return"dd MMMM";case this.FORMATS.SHORT_DATE_FORMAT_3:return"dd MMM";case this.FORMATS.SHORT_DATE_FORMAT_4:return"d MMM";case this.FORMATS.SHORT_DATE_FORMAT_5:return"dd/MM/yyyy";case this.FORMATS.SHORT_DATE_FORMAT_6:return"EEE dd MMM";case this.FORMATS.SHORT_DATE_FORMAT_7:return"dd.MM.yyyy";case this.FORMATS.SHORT_DATE_FORMAT_8:return"yyyyMMdd";case this.FORMATS.TIME_FORMAT:return"HH:mm";case this.FORMATS.DURATION_FORMAT:return"HH'h'mm'm'";case this.FORMATS.DURATION_FORMAT_1:return"HH:mm";case this.FORMATS.CALE_CELL_WEEK:return"EEEE";case this.FORMATS.CALE_CELL_DATE:return"ddMMM";case this.FORMATS.CALENDAR_MATRIX_CellHeader_Top:return"EEE";case this.FORMATS.CALENDAR_MATRIX_CellHeader_Bottom:return"ddMMM";case this.FORMATS.CALENDAR_MATRIX_DayOfWeekShort:return"EEE";case this.FORMATS.CALENDAR_MATRIX_CellHeader_Bottom_left:return"dd";case this.FORMATS.CALENDAR_MATRIX_CellHeader_Bottom_right:return"MMM";case this.FORMATS.COMPLEX_CALENDAR_MATRIX_CellHeader_Bottom_left:return"dd";case this.FORMATS.COMPLEX_CALENDAR_MATRIX_CellHeader_Bottom_right:return"MMM";case this.FORMATS.COMPLEX_CALENDAR_MATRIX_CellHeader_Top:return"EEEE";case this.FORMATS.COMPLEX_CALENDAR_MATRIX_CellHeader_Bottom:return"ddMMM";case this.FORMATS.OW_CALENDAR_CellHeader:return"EEE dd";case this.FORMATS.TIME_TABLE_CellHeader:return"EEE dd";case this.FORMATS.FULL_DATE_STRING:return"yyyyMMddHHmm";case this.FORMATS.SHORT_DAY_NAME_FORMAT:return"EE";case this.FORMATS.SHORT_RESPONSIVE_DAY_NAME_FORMAT:return"E";default:return"dd MMM yyyy"}},formatDateTimeScreenReader:function(e,t){var c="";if(aria.utils.Type.isDate(e)&&!isNaN(e.getTime())){var a=this._replaceGlobalListNamesInDateFormat(t,e,!1);c=aria.utils.Date.format(e,a)}return c},formatDateTime:function(e,t,c){var a=this.retrieveDateTimePattern(t),n="";if("number"==typeof e)switch(t){case this.FORMATS.TIME_FORMAT:n=this.formatTimeOfDay(e,a);break;case this.FORMATS.DURATION_FORMAT:case this.FORMATS.DURATION_FORMAT_1:n=this.formatDuration(e,a);break;default:n=this.formatDuration(e,a)}else if(aria.utils.Type.isDate(e)&&!isNaN(e.getTime())){var l=this._replaceGlobalListNamesInDateFormat(a,e,c);n=aria.utils.Date.format(e,l,c)}return n},_replaceGlobalListNamesInDateFormat:function(e,t,c){for(var a="'[^']+'|''",n="E{3,}|M{3,}",l="[^EM]+|E{1,2}|M{1,2}",o=new RegExp(a+"|"+n+"|"+l,this.REGEXP_FLAG_GLOBAL),s=this._setPatternArray(o,e),r=new RegExp(n,this.REGEXP_FLAG_GLOBAL),i=new RegExp(a,this.REGEXP_FLAG_GLOBAL),d=c?t.getUTCDay():t.getDay(),f=c?t.getUTCMonth():t.getMonth(),b=0;b<s.length;b++)if(r.test(s[b])&&!i.test(s[b])){var p="";new RegExp("E{4,}").test(s[b])?p=this.getDayName(d,!1):new RegExp("E{3}").test(s[b])?p=this.getDayName(d,!0):new RegExp("M{4,}").test(s[b])?p=this.getMonthName(f,!1):new RegExp("M{3}").test(s[b])&&(p=this.getMonthName(f,!0)),s[b]="'"+p+"'"}return s.join("")},formatDuration:function(e,t){durationInSeconds=e/this.UNIT_MILLISECOND_FACTORS.Seconds;var c=new RegExp("'[^']+'|''|\"[^\"]+\"|\"\""),a=new RegExp(this.REGEXP_DURATION,this.REGEXP_FLAG_GLOBAL),n=this._setPatternArray(a,t);a=new RegExp(this.REGEXP_DURATION);for(var l=this._getTimeDataFromPattern(t,durationInSeconds),o=0;o<n.length;o++)a.test(n[o])&&!c.test(n[o])&&this._replacePatternTime(n,o,l);return n.join("").replace(new RegExp('"',this.REGEXP_FLAG_GLOBAL),"").replace(new RegExp("'",this.REGEXP_FLAG_GLOBAL),"")},formatTimeOfDay:function(e,t,c){return aria.utils.Date.format(new Date(e),t,void 0===c||c===this.TIMEZONE.UTC)},formatDateBis:function(e){var t=""+(e.getMonth()+1),c=""+e.getDate(),a=""+e.getFullYear(),n=""+e.getHours(),l=""+e.getMinutes();return t.length<2&&(t="0"+t),c.length<2&&(c="0"+c),n.length<2&&(n="0"+n),l.length<2&&(l="0"+l),[a,t,c,n,l].join("")},_setPatternArray:function(e,t){for(var c,a=new Array,n=0;null!==(c=e.exec(t));)a[n]=c[0],n++;return a},formatDate:function(e,t){t="undefined"!=typeof t&&null!=t?t:"yyyyMMddHHmm",e="undefined"!=typeof e&&null!=e?e:new Date;var c=new RegExp('"."|M{1,4}|d{1,4}|y{1,4}|H{1,4}|h{1,4}|m{1,4}|E{1,4}|s{1,2}|[^MdyHhmEs]{1,4}',this.REGEXP_FLAG_GLOBAL),a=this._setPatternArray(c,t);c=new RegExp("M{1,4}|d{1,4}|y{1,4}|H{1,4}|h{1,4}|m{1,4}|E{1,4}|s{1,2}|[^MdyHhmEs]{1,4}");var n=new RegExp('"."');for(i=0;i<a.length;i++)c.test(a[i])&&!n.test(a[i])&&this._replacePattern(a,i,e);return a.join("").replace(new RegExp('"',this.REGEXP_FLAG_GLOBAL),"")},_replacePattern:function(e,t,c){var a=new RegExp("[d{1,4}]",this.REGEXP_FLAG_GLOBAL),n=new RegExp("[y{1,4}]",this.REGEXP_FLAG_GLOBAL),l=new RegExp("[M{1,4}]",this.REGEXP_FLAG_GLOBAL),o=new RegExp("[H{1,2}]",this.REGEXP_FLAG_GLOBAL),s=new RegExp("[m{1,2}]",this.REGEXP_FLAG_GLOBAL),r=new RegExp("[E{3,4}]",this.REGEXP_FLAG_GLOBAL),i=new RegExp("[s{1,2}]",this.REGEXP_FLAG_GLOBAL);return a.test(e[t])?this._replacePatternDay(e,t,c):n.test(e[t])?this._replacePatternYear(e,t,c):l.test(e[t])?this._replacePatternMonth(e,t,c):o.test(e[t])?this._replacePatternHours(e,t,c):s.test(e[t])?this._replacePatternMinutes(e,t,c):r.test(e[t])?this._replacePatternDayName(e,t,c):i.test(e[t])?this._replacePatternSeconds(e,t,c):e},_getTimeDataFromPattern:function(e,t){var c=new RegExp("[d{1,2}]",this.REGEXP_FLAG_GLOBAL),a=new RegExp("[y{1,2}]",this.REGEXP_FLAG_GLOBAL),n=new RegExp("[M{1,2}]",this.REGEXP_FLAG_GLOBAL),l=new RegExp("[H{1,2}]",this.REGEXP_FLAG_GLOBAL),o=new RegExp("[m{1,2}]",this.REGEXP_FLAG_GLOBAL),s=new RegExp("[s{1,2}]",this.REGEXP_FLAG_GLOBAL),r={},i=60,d=60*i,f=24*d,b=30*f,p=12*b;return a.test(e)&&(r.years=Math.floor(t/p),t-=r.years*p),n.test(e)&&(r.months=Math.floor(t/b),t-=r.months*b),c.test(e)&&(r.days=Math.floor(t/f),t-=r.days*f),l.test(e)&&(r.hours=Math.floor(t/d),t-=r.hours*d),o.test(e)&&(r.minutes=Math.floor(t/i),t-=r.minutes*i),s.test(e)&&(r.seconds=t),r},_replacePatternTime:function(e,t,c){var a=new RegExp("[d{1,2}]",this.REGEXP_FLAG_GLOBAL),n=new RegExp("[y{1,2}]",this.REGEXP_FLAG_GLOBAL),l=new RegExp("[M{1,2}]",this.REGEXP_FLAG_GLOBAL),o=new RegExp("[H{1,2}]",this.REGEXP_FLAG_GLOBAL),s=new RegExp("[m{1,2}]",this.REGEXP_FLAG_GLOBAL),r=new RegExp("[s{1,2}]",this.REGEXP_FLAG_GLOBAL);return a.test(e[t])?(new RegExp("d{2}").test(e[t])?e[t]=("0"+c.days).slice(-2):new RegExp("d{1}").test(e[t])&&(e[t]=c.days),e[t]):n.test(e[t])?(new RegExp("y{2}").test(e[t])?e[t]=("0"+c.years).slice(-2):new RegExp("y{1}").test(e[t])&&(e[t]=c.years),e[t]):l.test(e[t])?(new RegExp("M{2}").test(e[t])?e[t]=("0"+c.months).slice(-2):new RegExp("M{1}").test(e[t])&&(e[t]=c.months),e[t]):o.test(e[t])?(new RegExp("H{2}").test(e[t])?e[t]=("0"+c.hours).slice(-2):new RegExp("H{1}").test(e[t])&&(e[t]=c.hours),e[t]):s.test(e[t])?(new RegExp("m{2}").test(e[t])?e[t]=("0"+c.minutes).slice(-2):new RegExp("m{1}").test(e[t])&&(e[t]=c.minutes),e[t]):r.test(e[t])?(new RegExp("s{2}").test(e[t])?e[t]=("0"+c.seconds).slice(-2):new RegExp("s{1}").test(e[t])&&(e[t]=c.seconds),e[t]):e},_replacePatternHours:function(e,t,c){return new RegExp("H{2}").test(e[t])?e[t]=("0"+c.getHours()).slice(-2):new RegExp("H{1}").test(e[t])&&(e[t]=c.getHours()),e},_replacePatternMinutes:function(e,t,c){return new RegExp("m{2}").test(e[t])?e[t]=("0"+c.getMinutes()).slice(-2):new RegExp("m{1}").test(e[t])&&(e[t]=c.getMinutes()),e},_replacePatternSeconds:function(e,t,c){return new RegExp("s{2}").test(e[t])?e[t]=("0"+c.getSeconds()).slice(-2):new RegExp("s{1}").test(e[t])&&(e[t]=c.getSeconds()),e},_replacePatternDay:function(e,t,c){return new RegExp("d{4}").test(e[t])?(dayOfWeek=this.getDayName(c.getDay(),!1),dayOfMonth=c.getDate(),e[t]=dayOfWeek+" "+dayOfMonth):new RegExp("d{3}").test(e[t])?(dayOfWeek=this.getDayName(c.getDay(),!0),dayOfMonth=c.getDate(),e[t]=dayOfWeek+" "+dayOfMonth):new RegExp("d{2}").test(e[t])?(dayOfMonth=("0"+c.getDate()).slice(-2),e[t]=dayOfMonth):new RegExp("d").test(e[t])&&(dayOfMonth=c.getDate(),e[t]=dayOfMonth),e},_replacePatternYear:function(e,t,c){return new RegExp("y{4}").test(e[t])||new RegExp("y{3}",this.REGEXP_FLAG_GLOBAL).test(e[t])?year=c.getFullYear():new RegExp("y{2}").test(e[t])?year=("0"+(""+c.getFullYear()).slice(-2)).slice(-2):new RegExp("y").test(e[t])&&(year=(""+c.getFullYear()).slice(-1)),e[t]=year,e},_replacePatternMonth:function(e,t,c){return new RegExp("M{4}").test(e[t])?monthName=this.getMonthName(c.getMonth(),!1):new RegExp("M{3}").test(e[t])?monthName=this.getMonthName(c.getMonth(),!0):new RegExp("M{2}").test(e[t])?monthName=("0"+(c.getMonth()+1)).slice(-2):new RegExp("M").test(e[t])&&(monthName=c.getMonth()+1),e[t]=monthName,e},_replacePatternDayName:function(e,t,c){return new RegExp("E{4}").test(e[t])?dayOfWeek=this.getDayName(c.getDay(),!1):new RegExp("E{3}").test(e[t])&&(dayOfWeek=this.getDayName(c.getDay(),!0)),e[t]=dayOfWeek,e},getMonthName:function(e,t){var c,a=t?this.SL_SHORT_MONTH_LIST:this.SL_FULL_MONTH_LIST,n=plnextv2.utils.GlobalLists.getList(a,!0);return n.length>0?c=n[e][1]:this.$logWarn(a+" returned an empty list"),c},getMonthNamesList:function(e){var t=e?this.SL_SHORT_MONTH_LIST:this.SL_FULL_MONTH_LIST,c=plnextv2.utils.GlobalLists.getList(t,!0),a=[];if(c.length>0)for(var n=0;n<c.length;n++)a.push(c[n][1]);else this.$logWarn(t+" returned an empty list");return a},getDayName:function(e,t){var c,a=t?this.SL_SHORT_DAYS_LIST:this.SL_FULL_DAYS_LIST,n=plnextv2.utils.GlobalLists.getList(a,!0);return n.length>0?c=n[e][1]:this.$logWarn(a+" returned an empty list"),c},getDayNamesList:function(e){var t=e?this.SL_SHORT_DAYS_LIST:this.SL_FULL_DAYS_LIST,c=plnextv2.utils.GlobalLists.getList(t,!0),a=[];if(c.length>0)for(var n=0;n<c.length;n++)a.push(c[n][1]);else this.$logWarn(t+" returned an empty list");return a},addDays:function(e,t){var c=aria.utils.Date.removeTime(new Date(e)).getTime()+12*this.UNIT_MILLISECOND_FACTORS.Hours,a=this.UNIT_MILLISECOND_FACTORS.Days*t;return new Date(c+a)},isNightDeparture:function(e){var t=!1;if(aria.utils.Type.isDate(e)){var c=new Date(e);c.setHours(0,1,0,0);var a=new Date(e);a.setHours(6,0,59,999),e>=c&&a>=e&&(t=!0)}return t},dateToJSON:function(e,t){return"number"==typeof e?new Date(e).toJSON():new Date(e+(t?" UTC":"")).toJSON()},fromDateToTimestamp:function(e){return new Date(e).getTime()},computeDatesInRange:function(e,t){if(!e||!t)return[];for(var c=[],a=1*e,n=1*t;n>=a;a+=this.UNIT_MILLISECOND_FACTORS.Days)c.push(new Date(a));return c},computeDatesInOffset:function(e,t,c){return e?(t=t||0,c=c||0,firstDate=1*e-t*this.UNIT_MILLISECOND_FACTORS.Days,lastDate=1*e+c*this.UNIT_MILLISECOND_FACTORS.Days,this.computeDatesInRange(firstDate,lastDate)):[]},isOnSameDay:function(e,t){return e&&t?e.toDateString()===t.toDateString():!1},dateAtStartOfDay:function(e){var t=this._getYearMonthDay(e);if(!t)return new Date(e);var c=new Date(Date.UTC(t.year,t.month,t.day)),a=c.getTimezoneOffset();return c.setTime(c.getTime()+a*this.UNIT_MILLISECOND_FACTORS.Minutes),t.day!==c.getDate()&&23===c.getHours()&&c.setTime(c.getTime()+this.UNIT_MILLISECOND_FACTORS.Hours),c},_getYearMonthDay:function(e){var t=new RegExp("("+this.SHORT_MONTH_LIST.join("|")+")\\s+(\\d{1,2}),\\s+(\\d{4})");if(e&&"string"==typeof e){var c=e.match(t);if(!(!c||c.length<4||isNaN(c[3])||isNaN(c[2])||-1===this.SHORT_MONTH_LIST.indexOf(c[1])))return{year:parseInt(c[3]),month:this.SHORT_MONTH_LIST.indexOf(c[1]),day:parseInt(c[2])}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/DeviceUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.DeviceUtils",$dependencies:["aria.utils.Device","plnextv2.utils.context.AppContext"],$singleton:!0,$statics:{DESKTOP:"DESKTOP",MOBILE:"MOBILE",TABLET:"TABLET",ANDROID:"ANDROID",IOS:"IOS"},$constructor:function(){this.deviceMgr=aria.utils.Device,this.appContext=plnextv2.utils.context.AppContext},$prototype:{getDeviceType:function(){var e=this.__getDeviceTypeFromAppContext();if(e)return e;var t=this.DESKTOP;return this.deviceMgr.isTablet()?t=this.TABLET:this.deviceMgr.isPhone()&&(t=this.MOBILE),t},setPageDeviceType:function(e,t){var c=e.pageId||t,a=e.pageData.config[c];a&&(this.pageDeviceType=a.pageDeviceType)},getPageDeviceType:function(){return this.pageDeviceType},isPageDeviceTypeDesktop:function(){return this.getPageDeviceType()===this.DESKTOP},isPageDeviceTypeTablet:function(){return this.getPageDeviceType()===this.TABLET},isPageDeviceTypeMobile:function(){return this.getPageDeviceType()===this.MOBILE},__getDeviceTypeFromAppContext:function(){var e=this.appContext.getAppData();return null!=e?e.deviceType||this.DESKTOP:void 0},isIOS:function(){return navigator.userAgent.toLowerCase().match(/(ipad|iphone)/)},isEmbeddedInApp:function(){var e=this.appContext.getAppData();return null!=e?e.embeddedInApp===this.ANDROID||e.embeddedInApp===this.IOS:void 0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/DiscountUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.DiscountUtils",$dependencies:["plnextv2.utils.I18n","plnextv2.utils.storage.SessionStorageManager","aria.utils.Array"],$singleton:!0,$statics:{AAM_TECHNIQUE:{DISCOUNT:"DISCOUNT",PROMOCODE:"PROMOCODE"},PROMOCODE_SESSION:{CONTEXT:"promocode",KEY:"PROMOCODE_VALUE"},PROMOCODE_MESSAGE:{WARNING:"WARN",INFORMATION:"INFO"}},$constructor:function(){this._i18n=plnextv2.utils.I18n,this._storageManager=plnextv2.utils.storage.SessionStorageManager,this._arrayUtils=aria.utils.Array},$prototype:{getPromocode:function(e){return e&&e.priceBean&&e.priceBean.promocodeDetails?e.priceBean.promocodeDetails.promocode:null},hasAamTechnique:function(e){if(!e.aamTechnique||!aria.utils.Type.isArray(e.recommendations))return!1;for(var t=0;t<e.recommendations.length;t++){var c=e.recommendations[t],a=c.bounds;if(this.hasBoundsAamTechnique(a,e.aamTechnique))return!0}return!1},hasBoundsAamTechnique:function(e,t){for(var c=0;c<e.length;c++){var a=e[c];if(this.hasBoundAamTechnique(a,t))return!0}return!1},hasBoundAamTechnique:function(e,t){return e.boundAmount&&e.boundAmount.discountWithReason&&e.boundAmount.discountWithReason.type&&e.boundAmount.discountWithReason.type===t},getDiscountMessage:function(e,t,c){var a="",n=null,l=this.getPromocodeDetails(e);return l&&(n=t===this.PROMOCODE_MESSAGE.WARNING?l.warningMessage:l.infoMessage),a=this.getFormattedDiscountMessage(n,e,c)},getFormattedDiscountMessage:function(e,t,c){return c||(c=this.getPromocode(t)),c&&e&&(e=this._i18n.getStringFromPattern(e,[c])),e},getPromocodeDetails:function(e){return e&&e.priceBean&&e.priceBean.promocodeDetails?e.priceBean.promocodeDetails:null},getPromocodeFromSession:function(){return this._storageManager.get(this.PROMOCODE_SESSION.KEY,this.PROMOCODE_SESSION.CONTEXT)},addPromocodeToSession:function(e){e&&this._storageManager.set(this.PROMOCODE_SESSION.KEY,e,this.PROMOCODE_SESSION.CONTEXT)},removePromocodeFromSession:function(){this._storageManager.remove(this.PROMOCODE_SESSION.KEY,this.PROMOCODE_SESSION.CONTEXT)},clearSessionContext:function(){this._storageManager.clearContext(this.PROMOCODE_SESSION.CONTEXT)},isPromocodeAppliedForPrice:function(e){return e?null!==this.getPromocodeDiscount(e.discounts):!1},displayWarningMessage:function(e){return this.getPromocodeFromSession()&&!this.isPromocodeAppliedForPrice(e)},getAirDiscountReason:function(e,t){if(!t||0===t.length)return"";if(1===t.length)return this.getSingleDiscountReason(e,t[0]);var c=this.getPromocodeDiscount(t);return this._i18n.getLabel(c?"tx_pltg_text_SpecialOfferSelectionPromoCode":"tx_pltg_text_SpecialOfferSelection")},getSingleDiscountReason:function(e,t){var c="";return t&&t.discountReason&&t.discountReason.discountReason&&(c=t.discountReason.discountReason),c&&t.type===this.AAM_TECHNIQUE.PROMOCODE&&(c=this.getFormattedDiscountMessage(t.discountReason.discountReason,{priceBean:e})),c},getPromocodeDiscount:function(e){if(!e)return null;var t=aria.utils.Array.filter(e,function(e){return e.type===this.AAM_TECHNIQUE.PROMOCODE},this);return t.length>0?t[0]:null},getDiscountCodeNotAppliedMessage:function(e,t){return this.getDiscountMessage({priceBean:e},this.PROMOCODE_MESSAGE.WARNING,t)},getDiscountCodeAppliedMessage:function(e,t){return this.getDiscountMessage({priceBean:e},this.PROMOCODE_MESSAGE.INFORMATION,t)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/DynamicWaiverUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.DynamicWaiverUtils",$dependencies:["plnextv2.utils.DateUtils","aria.utils.Array"],$singleton:!0,$statics:{LOCATION_TYPE:{AIRPORT:"AIR",CITY:"26",COUNTRY:"25",WORLD:"WD",AREA:"ARE",STATE:"S",ZONE:"Z"},TICKET_TYPE:{CURRENT_TICKET:"currentTicket",NEW_TICKET:"newTicket"},WAIVER_TYPE:{CHANGE_OF_ROUTING:"COR",SAME_FARE_WAIVER:"SFW",CAT:"CAT"}},$prototype:{getDisruptedDatesForBound:function(e,t){var c=[],a=this.getWaiverItemsForBound(e,t);if(e&&e.listSegment&&e.listSegment.length>0&&a&&a.length>0){var n=new Date(e.listSegment[0].beginDate);e.listSegment.forEach(function(e){var t=this.getDisruptedDates(a,n,e.beginLocation,e.endLocation);t.forEach(function(e){-1===c.indexOf(e)&&c.push(e)})},this)}return c},getWaivedDatesForBound:function(e,t){var c=[],a=this.getWaiverItemsForBound(e,t),n=this.getDisruptedDatesForBound(e,t);if(a&&a.length>0&&n&&n.length>0)for(var l=0;l<a.length;l++){var o=a[l].newTicket;aria.utils.Array.pushAll(c,this.getWaivedDatesFromListDateRanges(o)),aria.utils.Array.pushAll(c,this.getWaivedDatesFromListDateOffsets(o,n))}return c},getDisruptedDates:function(e,t,c,a){var n=this.filterWaiverItemsForLocations(e,c,a,this.TICKET_TYPE.CURRENT_TICKET);return n&&n.length>0&&t?[t]:[]},getWaivedDates:function(e,t,c,a){var n=this.getDisruptedDates(e,t,c,a),l=[],o=this.filterWaiverItemsForLocations(e,c,a,this.TICKET_TYPE.NEW_TICKET);if(o&&o.length>0)for(var s=0;s<o.length;s++){var r=o[s].newTicket;aria.utils.Array.pushAll(l,this.getWaivedDatesFromListDateRanges(r)),aria.utils.Array.pushAll(l,this.getWaivedDatesFromListDateOffsets(r,n))}return l},getWaivedDatesFromListDateRanges:function(e){var t=[];if(e&&e.listDateRanges)for(var c=0;c<e.listDateRanges.length;c++){var a=e.listDateRanges[c];a&&aria.utils.Array.pushAll(t,plnextv2.utils.DateUtils.computeDatesInRange(new Date(a.firstDate),new Date(a.lastDate)))}return t},getWaivedDatesFromListDateOffsets:function(e,t){var c=[];if(e&&e.listDateOffsets&&t&&t.length>0)for(var a=t[0],n=0;n<e.listDateOffsets.length;n++){var l=e.listDateOffsets[n];l&&aria.utils.Array.pushAll(c,plnextv2.utils.DateUtils.computeDatesInOffset(a,l.offsetBefore,l.offsetAfter))}return c},getWaiverItemsForBound:function(e,t){return e?this.getWaiverItemsForSegments(e.listSegment,t):[]},getWaiverItemsForSegments:function(e,t){var c=[],a=plnextv2.utils.BoundUtils.getSegmentIds(e);if(t&&a)for(var n=0;n<t.length;n++)aria.utils.Array.contains(a,t[n].segmentId)&&aria.utils.Array.pushAll(c,t[n].waiverItems);return c},filterWaiverItemsForLocations:function(e,t,c,a){var n=[];if(e)for(var l=0;l<e.length;l++){var o=e[l];this.doesWaiverItemMatchLocations(o,t,c,a)&&n.push(o)}return n},doesWaiverItemMatchLocations:function(e,t,c,a){if(e&&e[a]){var n=e[a];switch(a){case this.TICKET_TYPE.CURRENT_TICKET:return this.doesWaiverListLocationMatch(n.from,t)||this.doesWaiverListLocationMatch(n.to,c);case this.TICKET_TYPE.NEW_TICKET:return this.doesWaiverListLocationMatch(n.from,t)&&this.doesWaiverListLocationMatch(n.to,c)}}return!1},isLocationDisrupted:function(e,t,c){for(var a,n=!1,l=e?e.length:0,o=0;l>o;o++)if(a=e[o],a&&a[this.TICKET_TYPE.CURRENT_TICKET]){var s=a[this.TICKET_TYPE.CURRENT_TICKET];if(n=c?this.doesWaiverListLocationMatch(s.from,t):this.doesWaiverListLocationMatch(s.to,t))return!0}return n},doesWaiverListLocationMatch:function(e,t){if(!e||!t)return!0;var c=this._getLocationBeans(e.listLocations),a=this._getLocationBeans(e.listExcludedLocations),n=this._doListLocationsMatch(c,t),l=a.length>0&&this._doListLocationsMatch(a,t);return n&&!l},_getLocationBeans:function(e){var t=[];if(e)for(var c=0;c<e.length;c++){var a=e[c],n={};switch(a.locationType){case this.LOCATION_TYPE.AIRPORT:n.locationCode=a.locationCode;break;case this.LOCATION_TYPE.CITY:n.cityCode=a.locationCode;break;case this.LOCATION_TYPE.COUNTRY:n.countryCode=a.locationCode;break;case this.LOCATION_TYPE.WORLD:n.isWorld=!0;break;case this.LOCATION_TYPE.AREA:n.areaCode=a.locationCode;break;case this.LOCATION_TYPE.STATE:n.stateCode=a.locationCode;break;case this.LOCATION_TYPE.ZONE:n.zoneCode=a.locationCode;break;default:continue}t.push(n)}return t},_doListLocationsMatch:function(e,t){if(e&&0===e.length)return!0;for(var c=0;c<e.length;c++){var a=e[c];if(this._doLocationsMatch(a,t))return!0}return!1},_doLocationsMatch:function(e,t){return e.isWorld?!0:e.locationCode&&e.locationCode===t.locationCode?!0:e.cityCode&&e.cityCode===t.cityCode?!0:e.countryCode&&e.countryCode===t.countryCode?!0:!1},getDisruptedAirportTexts:function(e){var t=this,c=[];return e.forEach(function(e){e.currentTicket&&(e.currentTicket.from&&e.currentTicket.from.listLocations&&t.__extractLocationsAirportTexts(e.currentTicket.from.listLocations,c),e.currentTicket.to&&e.currentTicket.to.listLocations&&t.__extractLocationsAirportTexts(e.currentTicket.to.listLocations,c))}),c},__extractLocationsAirportTexts:function(e,t){var c=this;e.forEach(function(e){if(e.locationType===c.LOCATION_TYPE.AIRPORT){var a=c.__getAirportText(e);-1===t.indexOf(a)&&t.push(a)}})},__getAirportText:function(e){return e.locationLabel+" ("+e.locationCode+")"},getDynamicWaiverAirportText:function(e,t){var c,a=this.getWaiverItemsForSegments(e,t);if(a&&a.length>0&&(c=this.getDisruptedAirportTexts(a)),c&&c.length>0){var n;return n=1===c.length?"tx_pltg_text_AirportIsDisruptedPattern":"tx_pltg_text_AirportsAreDisruptedPattern",plnextv2.utils.I18n.getStringFromPattern(n,[c.join(", ")])}return""},getDynamicWaiverMightBeDisruptedText:function(e,t){var c,a=this.getWaiverItemsForSegments(e,t);if(a&&a.length>0&&(c=this.getDisruptedAirportTexts(a)),c&&c.length>0){var n="tx_pltg_pattern_BookingWaiverWrnMightBeDisrupted";return plnextv2.utils.I18n.getStringFromPattern(n,[c.join(", ")])}return""}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/ErrorCodes.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.ErrorCodes",$singleton:!0,$statics:{NOT_ENOUGH_MILES_FOR_SELECTION:"1818",NOT_ENOUGH_MILES_FOR_ANY_FLIGHT:"1819",MARGINAL_FARE_NOT_AVAILABLE_IN_CASH:"1820",CARDINAL_SETUP_GENERIC_ERROR:"1821"}});
//*******************
//LOGICAL-PATH:plnextv2/utils/ErrorUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.ErrorUtils",$extends:"plnextv2.utils.AbstractErrorUtils",$singleton:!0,$constructor:function(){this.$AbstractErrorUtils.constructor.call(this)},$prototype:{}});
//*******************
//LOGICAL-PATH:plnextv2/utils/EventBus.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.EventBus",$constructor:function(){this.subscribers={}},$prototype:{subscribe:function(e,t,c){for(var a=[],n=arguments.length,l=0;n>l;l++)a.push(arguments[l]);a=a.length>3?a.splice(3,a.length-1):[],"undefined"!=typeof this.subscribers[e]?this.subscribers[e].push({scope:c,callback:t,args:a}):this.subscribers[e]=[{scope:c,callback:t,args:a}]},unsubscribe:function(e,t,c){if("undefined"!=typeof this.subscribers[e]){for(var a=this.subscribers[e].length,n=[],l=0;a>l;l++){var o=this.subscribers[e][l];(o.scope!=c||o.callback!=t)&&n.push(o)}this.subscribers[e]=n}},hasSubscriber:function(e,t,c){if("undefined"!=typeof this.subscribers[e]){var a=this.subscribers[e].length;if(void 0===t&&void 0===c)return a>0;for(var n=0;a>n;n++){var l=this.subscribers[e][n];if((c?l.scope==c:!0)&&l.callback==t)return!0}}return!1},publish:function(e,t,c,a){for(var n=0,l={type:e,target:t},o=[],s=arguments.length,r=0;s>r;r++)o.push(arguments[r]);if(o=o.length>2?o.splice(2,o.length-1):[],o=[l].concat(o),"undefined"!=typeof this.subscribers[e])for(var i=this.subscribers[e].length,r=0;i>r;r++){var d=this.subscribers[e][r];if(d&&d.callback){var f=o.concat(d.args);d.callback.apply(d.scope,f),n+=1}}"function"==typeof c&&c.apply(t,[a])},doClear:function(){this.subscribers={}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/FareUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.FareUtils",$dependencies:["aria.utils.Array"],$singleton:!0,$prototype:{getFareURI:function(e,t){if(e)for(var c=0;c<e.length;c++)if(e[c].code===t)return e[c].uri},getShortDescription:function(e,t,c){if(c.displayFFShortDescrition&&e)for(var a=0;a<e.length;a++)if(e[a].code===t)return e[a].description;return""},getConditions:function(e,t){if(e)for(var c=0;c<e.length;c++)if(e[c].code===t)return e[c].conditions;return""},getCabinFromSegment:function(e){return e&&e.listCabin&&e.listCabin.length>0?e.listCabin[0]:void 0},getRbdFromSegment:function(e){var t=[],c=this.getCabinFromSegment(e);return c&&c.listRbd&&c.listRbd.length>0&&t.push(c.listRbd[0].rbd),t},getRbdFromBound:function(e){var t=[];if(e&&e.listSegment)for(var c=0;c<e.listSegment.length;c++)for(var a=this.getRbdFromSegment(e.listSegment[c]),n=0;n<a.length;n++){var l=a[n];-1===aria.utils.Array.indexOf(t,l)&&t.push(l)}return t}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/FeeUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.FeeUtils",$dependencies:["plnextv2.utils.I18n"],$statics:{DISPLAY_DYNAMIC_DISCOUNT_ALL:"ALL",DISPLAY_DYNAMIC_DISCOUNT_AVAIL:"AVAIL",DISPLAY_DYNAMIC_DISCOUNT_NONE:"NONE"},$singleton:!0,$constructor:function(){this._i18n=plnextv2.utils.I18n},$prototype:{displayFeesNotice:function(e,t){var c=!1,a=this,n=e.filter(function(e){return e.name===a._i18n.getLabel("tx_pltg_text_TravellerFee")||e.name===a._i18n.getLabel("tx_pltg_text_obFees_confirmed")});if(n&&n.length){var l=n[0];c="12"===t.code&&t.value!==l.value}return c},getBestDiscountPrice:function(e,t,c){var a=null;return t.hasDynamicDiscount?(c===this.DISPLAY_DYNAMIC_DISCOUNT_ALL||c===this.DISPLAY_DYNAMIC_DISCOUNT_AVAIL)&&(a=e+t.alreadyIncludedDiscount.value):t.estimatedDiscountAmount&&(a=e+t.estimatedDiscountAmount),a}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/FlightUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.FlightUtils",$dependencies:["plnextv2.utils.Symbols"],$singleton:!0,$constructor:function(){this._symbols=plnextv2.utils.Symbols},$prototype:{formatSegment:function(e,t,c){return void 0==c&&(c=""),e&&0!=e.length||t&&0!=t.length?(aria.utils.Type.isString(e)&&0!=e.length||(e=c),aria.utils.Type.isString(t)&&0!=t.length||(t=c),e+" "+this._symbols.SEGMENT_OD_SEPARATOR+" "+t):this._symbols.NO_DATA},formatOnD:function(e,t,c){return e&&0!=e.length||(e=c),t&&0!=t.length||(t=c),e+" "+this._symbols.SEGMENT_OD_SEPARATOR+" "+t},formatSegmentStatus:function(e,t){return e=void 0==e||null==e?"":e.toString(),t=void 0==t||null==t?"":t.toString(),e.length>0||t.length>0?e+t:this._symbols.NO_DATA},formatServiceStatus:function(e,t){return e=void 0==e||null==e?"":e.toString(),t=void 0==t||null==t?"":t.toString(),e.length>0||t.length>0?e+t:this._symbols.NO_DATA},formatFlight:function(e,t){return aria.utils.Type.isString(e)&&e.length>0?(void 0==t&&(t=""),t+e):this._symbols.NO_DATA}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/FlightsUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.FlightsUtils",$dependencies:["plnextv2.utils.I18n"],$singleton:!0,$constructor:function(){this._i18n=plnextv2.utils.I18n},$prototype:{getStopDuration:function(e,t){var c=new Date(e.endDate),n=new Date(t.beginDate);return n-c},getNumberOfStops:function(e){if(!aria.utils.Type.isArray(e))return 0;for(var t=e.length-1,c=0;c<e.length;c++)e[c].nbrOfStops&&(t+=e[c].nbrOfStops);return t},displayNumberOfStops:function(e,t){var c=this.getNumberOfStops(e),n=t||this._i18n.getLabel("tx_pltg_text_DirectFlight");return 1===c?n=c+" "+this._i18n.getLabel("tx_pltg_text_Stop"):c>1&&(n=c+" "+this._i18n.getLabel("tx_pltg_text_stopsLabel")),n},isDifferentTerminal:function(e,t){return e&&t?this.isDifferentAirport(e,t)?!1:e.endTerminal!==t.beginTerminal?!0:!1:!1},isDifferentAirport:function(e,t){return e&&t&&e.endLocation&&t.beginLocation?this.isDifferentLocation(e.endLocation,t.beginLocation):!1},getSegmentDuration:function(e){var t=e.segmentTime;if(!t){var c=new Date(e.beginDate),n=new Date(e.endDate);t=n-c}return Math.abs(t)},getLegDuration:function(e,t){if(t.duration)return t.duration;for(var c=this.getSegmentDuration(e),n=e.listLegs,a=n.length,l=0,o=0;a>o;o++)a-1>o&&(l+=this.getTechnicalStopDuration(n[o],n[o+1]));return(c-l)/a},getTechnicalStopDuration:function(e,t){return e&&t?new Date(t.departureDate)-new Date(e.arrivalDate):null},isDifferentLegAirport:function(e,t){return e&&t&&e.offPoint&&t.boardPoint?this.isDifferentLocation(e.offPoint,t.boardPoint):!1},isDifferentLegTerminal:function(e,t){return e&&t&&e.offPoint&&t.boardPoint&&e.offPoint.terminal&&t.boardPoint.terminal?e.offPoint.terminal!==t.boardPoint.terminal&&!this.isDifferentLegAirport(e,t):!1},getPreviousLeg:function(e,t){var c=parseInt(t,10);return e&&e.listLegs&&c>0&&c-1<e.listLegs.length?e.listLegs[c-1]:null},getNextLeg:function(e,t){var c=parseInt(t,10);return e&&e.listLegs&&c+1<e.listLegs.length?e.listLegs[c+1]:null},getPreviousSegment:function(e,t){var c=parseInt(t,10);return e&&c>0&&c-1<e.length?e[c-1]:null},getNextSegment:function(e,t){var c=parseInt(t,10);return e&&c+1<e.length?e[c+1]:null},isDifferentLocation:function(e,t){return e&&t?e.locationCode!==t.locationCode:e!==t},getFlightDuration:function(e){for(var t=e.length,c=e[0].segmentTime,n=1;t>n;n++)c+=this.getStopDuration(e[n-1],e[n]),c+=e[n].segmentTime;return c||(c=e[t-1].flightTime),c},hasWaitlistSegment:function(e){if(e&&e.listItineraryElem)for(var t in e.listItineraryElem)if(e.listItineraryElem[t]&&e.listItineraryElem[t].isWaitlisted)return!0;return!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/FocusUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.FocusUtils",$dependencies:[],$singleton:!0,$statics:{},$prototype:{focusFirst:function(e,t){for(var c=$(e).find(":visible"),n=c.length,a=t?n-1:0;a>=0&&n>a;t?a--:a++)if(this.isFocusable(c[a])){$(c[a]).focus();break}},isFocusable:function(e){var t=e.nodeName;return"INPUT"==t||"TEXTAREA"==t||"A"==t||"BUTTON"==t||$(e).attr("tabindex")>0},setTemporaryFocus:function(e){e&&(e.setAttribute("tabindex","0"),e.focus(),e.setAttribute("tabindex","-1"))}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/GlobalLists.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.GlobalLists",$dependencies:["plnextv2.utils.context.AppContext"],$singleton:!0,$constructor:function(){this._appContext=plnextv2.utils.context.AppContext},$prototype:{getList:function(e,t){var n=this._appContext.getPageData(),c=n.globalLists[e]||n.customGlobalLists[e]||[];return(t||0==c.length)&&(n=this._appContext.getAppData(),c=n.globalLists[e]||n.customGlobalLists[e]||[]),c},findNameFromList:function(e,t,n){if(null!=e)for(var c=0;c<e.length;c++)if(e[c][0]===t)return e[c][n]||t;return t}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/HtmlUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.HtmlUtils",$dependencies:["plnextv2.utils.DeviceUtils","aria.utils.Array"],$singleton:!0,$statics:{DEFAULT_FAV_ICON_URL:"/img/siteIcon.ico"},$constructor:function(){this.counters={},this.__loadingMessage="",this.__loadingEndMessage="",this._deviceUtils=plnextv2.utils.DeviceUtils,this._elementsToBeDisabledOnLoad=[]},$prototype:{setDeviceTypeClass:function(){var e=jQuery("body");e.attr("data-device-type",this._deviceUtils.getDeviceType()),e.attr("data-page-device-type",this._deviceUtils.getPageDeviceType())},setLoadingMessage:function(e){e&&(this.__loadingMessage=e)},setLoadingEndMessage:function(e){e&&(this.__loadingEndMessage=e)},activateLoading:function(e){var t;if("object"==typeof e)t=jQuery("string"==typeof e.container?"#"+e.container:e.container);else{if("string"!=typeof e)return;t=jQuery("#"+e)}0===aria.utils.Object.keys(this.counters).length&&this.setStatusMessage(this.__loadingMessage),this._setLoadingContent(t,e),jQuery(this._elementsToBeDisabledOnLoad).prop("disabled",!0),this._incrementCounter("object"==typeof e?e.container:e)},_setLoadingContent:function(e,t){var n=jQuery("<div class='loading' aria-busy='true'></div>"),c=jQuery("<div class='loading-content'></div>"),a=rootClassPath+"plnextv2/resources/img/loading.gif";t.image&&(a=t.image.match(/^https?:\/\//g)?t.image:rootClassPath+t.image);var o=jQuery("<img alt='' class='loading-image' src='"+a+"'>");if(t.componentContainer&&(n=jQuery("<div class='loading loading-component' aria-busy='true'></div>"),c=jQuery("<div class='loading-content loading-content-component'></div>")),0===jQuery("body > .loading").length){t.hideLoadingContent||(e.append(n),c.append(o));var l,s=t.message;s&&(l=jQuery("</p>"),l.html(s),c.append(l)),e.append(c);var r=c.height();r/=2;var i=c.width();return i/=2,c.css("margin-left","-"+i+"px"),c.css("margin-top","-"+r+"px"),!0}return!1},_incrementCounter:function(e){this.counters[e]||(this.counters[e]=0),this.counters[e]++},_decrementCounter:function(e){this.counters[e]&&this.counters[e]--,0===this.counters[e]&&delete this.counters[e]},_getCounter:function(e){return this.counters[e]},deactivateLoading:function(e){this._decrementCounter(e),this._getCounter(e)||("string"==typeof e?(jQuery("#"+e+"> .loading").remove(),jQuery("#"+e+"> .loading-content").remove()):(jQuery(e).children(".loading").remove(),jQuery(e).children(".loading-content").remove()),this.isLoading()||(this.setStatusMessage(this.__loadingEndMessage),jQuery(this._elementsToBeDisabledOnLoad).prop("disabled",!1)),window.performance&&"function"==typeof performance.mark&&performance.mark("disabledSpinner"))},isLoading:function(){var e=aria.utils.Object.keys(this.counters).length;return!(0===e)},setStatusMessage:function(e){jQuery("#sr-status").empty(),jQuery("#sr-status").html(e)},stickElement:function(e,t,n){if(n&&n.usePnextStickElement){var c=jQuery("#"+e),a=jQuery("#"+t);if(c&&a&&c.offset()){var o=c.offset().top,l=a.offset().top,s=this;this.detachStickyElement(e,t),jQuery(window).on("scroll."+e+"."+t,null,{domElement:c,domElementTop:o,domContainer:a,domContainerTop:l},s.onWindowScroll)}}else n&&n.forceRecalc?$("#"+e).stick_in_parent({parent:"#"+t,recalc_every:1}).on("sticky_kit:bottom",function(){$("#"+e).parent().css("position","")}):$("#"+e).stick_in_parent({parent:"#"+t,offset_top:n&&n.offset_top||0})},onWindowScroll:function(e){var t=e.data.domElement,n=e.data.domContainer,c=e.data.domElementTop,a=e.data.domContainerTop,o=t.height(),l=n.outerHeight(),s=jQuery(window).scrollTop(),r=(jQuery(window).width(),t.css("margin-top").replace(/[^-\d\.]/g,""));c!=t.offset().top-r&&l>o+s&&(c=t.offset().top-r),a>0&&(a=0),t.css(s+a>c?l>o+s?{"margin-top":s+a-c}:{"margin-top":l-o-(c-a)}:{"margin-top":0})},detachStickyElement:function(e,t){t?jQuery(window).off("scroll."+e+"."+t,null,this.onWindowScroll):$(e).trigger("sticky_kit:detach")},getFavIconUrl:function(){return jQuery("#fav-icon, link[rel='shortcut icon'], link[rel='icon']").get(0).href},setFavIcon:function(e){null!=e&&0==e.length&&(e=rootClassPath+this.DEFAULT_FAV_ICON_URL),jQuery("#fav-icon, link[rel='shortcut icon'], link[rel='icon']").attr("href",e)},getImageClassPath:function(){return rootClassPath+"plnextv2/resources/img/"},getCommonClassPath:function(){return rootClassPath+"plnextv2/"},scrollTop:function(){var e,t,n=arguments[0],c=jQuery("body, html"),a=0,o=0;"string"==typeof n?(e=n,t=arguments[1]||"slow"):"object"==typeof n&&(n.container&&(c=jQuery(n.container)),e=n.target,t=n.speed,o=n.offsetPadding),null!=e&&($target=jQuery(e),a=$target.offset().top),t=t||500,c.animate({scrollTop:a+o},t)},isRTLActivated:function(){return plnextv2.utils.context.AppContext.getAppData().config.language.isRtl},stickElementInsideScrollableContainer:function(e,t){var n=$("#"+e),c=$("#"+t),a=n.offset().top-c.offset().top;c.scroll(function(){var e=c.scrollTop(),t=n.outerHeight(),o=c.outerHeight();e>=a?o>t+a&&n.css({"margin-top":e}):n.css({"margin-top":0})})},isElementInViewport:function(e,t,n){var c={top:0,bottom:0,left:0,right:0};aria.utils.Json.inject(n,c),"function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]);var a=e.getBoundingClientRect(),o=this.__isElmInViewportVertical(a,c),l=this.__isElmInViewportHorizontal(a,c);switch(t){case"vertical":return o;case"horizontal":return l;default:return o&&l}},__isElmInViewportVertical:function(e,t){return e.top>=t.top&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)-t.bottom},__isElmInViewportHorizontal:function(e,t){return e.left>=t.left&&e.right<=(window.innerWidth||document.documentElement.clientWidth)-t.right},forceBrowserReflow:function(e,t){var n=aria.core.Browser;(null==t||n.isIE&&n.majorVersion<t)&&(document.getElementById(e).className=document.getElementById(e).className)},getElementSelector:function(e){var t=jQuery(e),n=t.prop("tagName"),c=t.attr("id");c=c?"#"+c.trim():"";var a=t.attr("class");return a=a?"."+a.trim():"",n+=c+a.replace(/\s+/g,".")},attributeValue:function(){var e=Array.prototype.slice.call(arguments);e=aria.utils.Array.filter(e,function(e){return"undefined"!=typeof e&&null!==e});var t=e.length;if(!t)return"";var n="object"==typeof e[t-1]?e.pop():{};return[].concat.apply([],e).join(n.separator||"-")},addElementToBeDisabledOnLoad:function(e){this._elementsToBeDisabledOnLoad.push(e),this.isLoading()&&jQuery(e).prop("disabled",!0)},removeElementFromBeDisabledOnLoad:function(e){aria.utils.Array.remove(this._elementsToBeDisabledOnLoad,e),jQuery(e).prop("disabled",!1)},removeHTMLTags:function(e){var t=document.createElement("div");return t.innerHTML=e,t.innerText||t.textContent},formatNumberAsCurrency:function(e){return e.replace(/(\d)\s+(?=\d)/g,"$1").replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")},formatPriceLabelForAccessibility:function(e){var t=this.removeHTMLTags(e);return this.formatNumberAsCurrency(t)},focus:function(e){var t=document.getElementById(e);t&&(t.focus(),(aria.core.Browser.isIOS||aria.core.Browser.isIE11)&&t.scrollIntoView())},smoothScroll:function(e,t){e=e||document.querySelector("body"),t=t||0,jQuery("html, body").stop().animate({scrollTop:jQuery(e).offset().top+t},400)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/I18n.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.I18n",$dependencies:["plnextv2.utils.context.AppContext","plnextv2.utils.StringUtils"],$singleton:!0,$constructor:function(){this._appContext=plnextv2.utils.context.AppContext,this._stringUtils=plnextv2.utils.StringUtils},$prototype:{getLabel:function(e,t){var n=this._appContext.getPageData().i18n,a=n.labels[e];return null==a?a=e:t&&(a=this._stringUtils.decodeHtmlEntity(a)),a},setLabel:function(e,t){var n=this._appContext.getPageData().i18n;aria.utils.Json.setValue(n.labels,e,t)},hasLabel:function(e){var t=this._appContext.getPageData().i18n,n=t.labels[e];return null!==n&&void 0!==n},getErrorMessage:function(e){var t=this._appContext.getPageData().i18n;return t.widgetErrors[e]||e},addErrorMessage:function(e,t){var n=this._appContext.getPageData().i18n;n.widgetErrors[e]=t},addStrings:function(e){var t=this._appContext.getPageData().i18n.labels;aria.utils.Json.inject(e,t,!0)},getStringFromPattern:function(e,t){for(var n=this.getLabel(e),a=0;a<t.length;a++)n=n.replace("{"+a+"}",t[a]);return n},getStringFromPatternAll:function(e,t){for(var n=this.getLabel(e),a=0;a<t.length;a++)n=n.split("{"+a+"}").join(t[a]);return n},getStrongStringFromPattern:function(e,t,n){var a="<strong>",c="</strong>",o=this.getLabel(e);n&&(a="<span class='"+n+"'>",c="</span>");for(var l=0;l<t.length;l++)o=o.replace("{"+l+"}",a+t[l]+c);return o},getParagraphFromLabel:function(e,t){var n="<p>",a="</p>",c=this.getLabel(e);return t&&(n="<p class='"+t+"'>",a="</p>"),n+c+a},getErrorFromPattern:function(e,t){for(var n=this.getErrorMessage(e),a=0;a<t.length;a++)n=n.replace("{"+a+"}",this.getLabel(t[a]));return n},getPatternTokens:function(e){var t=[],n="{0}";if(e){var a=e.indexOf(n);if(-1!==a){var c=e.substring(0,a),o=e.substring(a+n.length,e.length);t.push(c),t.push(n),t.push(o)}}return t}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/ImplementationUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.ImplementationUtils",$dependencies:["plnextv2.utils.UrlUtils","plnextv2.utils.requestManager.RequestFilter","plnextv2.utils.ErrorUtils"],$singleton:!0,$constructor:function(){this._urlUtils=plnextv2.utils.UrlUtils,this._requestFilter=plnextv2.utils.requestManager.RequestFilter,this._typeUtils=aria.utils.Type,this._errorUtils=plnextv2.utils.ErrorUtils},$prototype:{setStartOverUrl:function(e,t){if(t){var n="?";this._urlUtils.extractParamString(e)&&(n="&"),e+=n+jQuery.param(t,!0)}plnextv2.utils.context.AppContext.getAppData().config.links.startOver=e},addActionFilters:function(e,t,n,a){var c={};if(this._typeUtils.isString(e))c.action=e,c.actionToFilter.newAction=t,c.actionToFilter.context=n,c.actionToFilter.filter=a;else{if(!this._typeUtils.isArray(e)&&!this._typeUtils.isObject(e))return void this.$logError("action not valid: either string or object or array");c=e}this._requestFilter.addActionFilters(c)},removeActionFilters:function(e,t){if(this._typeUtils.isArray(e))for(var n=e.length,a=0;n>a;a++)this._requestFilter.removeAllActionFilters(e[a]);else this._typeUtils.isObject(e)?this._requestFilter.removeAllActionFilters(obj):this._typeUtils.isString(e)&&this._requestFilter.removeAllActionFilters({action:e,context:t})},addError:function(e,t,n){this._errorUtils.add(e,t,null,n)},removeError:function(e,t){this._errorUtils.remove(e,null,t)},removeAllErrors:function(e){this._errorUtils.removeAll(null,e)},getBasefacts:function(){var e=plnextv2.utils.context.AppContext.getPageData();return e.basefacts}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/LocationsRetrieverUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.LocationsRetrieverUtils",$dependencies:["plnextv2.components.common.searchBarResourcesHandler.config.DeparturesResourcesHandler","plnextv2.components.common.searchBarResourcesHandler.config.ArrivalsResourcesHandler","plnextv2.components.carSearchBase.config.CarSearchBaseAirportCityResourcesHandler","plnextv2.utils.requestManager.PlnextRequestManager","plnextv2.utils.context.AppContext"],$singleton:!0,$constructor:function(){this._alreadyCalled=!1,this._locations={originAirports:[],destinationAirports:[],originAll:[],destinationAll:[]},this._reqMgr=plnextv2.utils.requestManager.PlnextRequestManager,this._appContext=plnextv2.utils.context.AppContext},$statics:{AIRPORT_LIST_TYPE:"AIRPORT_LIST"},$prototype:{retrieveLocations:function(e,t,n,a){if(!this._alreadyCalled){var c={url:"",uid:"RETRIEVE_AIRPORT_LIST",action:"ajax",data:{TYPE:e},callback:{fn:this._onRetrieveLocationsSuccess,scope:this,args:{cb:n[t],cbArgs:a,type:e,scope:n,callbackName:t}}};this._reqMgr.sendAjax(c)}},_onRetrieveLocationsSuccess:function(e,t){e&&e.response&&e.response.data&&!this._checkForErrors(e)&&e.response.data.business&&(this._alreadyCalled=!0,t.type===this.AIRPORT_LIST_TYPE?(this.airportLists=[],aria.utils.Json.setValue(this._locations,"originAirports",e.response.data.business.departureAirportList),aria.utils.Json.setValue(this._locations,"destinationAirports",e.response.data.business.arrivalAirportList)):(aria.utils.Json.setValue(this._locations,"originAll",e.response.data.business.locationList),aria.utils.Json.setValue(this._locations,"destinationAll",e.response.data.business.locationList)),t.cb&&t.scope[t.callbackName](e,t.cbArgs))},_checkForErrors:function(e){var t=!1;if(e.response.data.errorList){var n=e.response.data.errorList.globalErrors,a=this._appContext.getPageData().errorList.globalErrors;n&&(n.E||n.W)?(aria.utils.Json.setValue(a,"errorList",e.response.data.errorList),n.E&&(t=!0)):aria.utils.Json.deleteKey(a,"errorList")}return t},getOriginAirportList:function(){return this._locations.originAirports},getDestinationAirportList:function(){return this._locations.destinationAirports},getFullOriginLocationList:function(){return this._locations.originAll},getFullDestinationLocationList:function(){return this._locations.destinationAll}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/MerciTripListUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.MerciTripListUtils",$dependencies:["plnextv2.utils.FlightsUtils","aria.utils.Path"],$singleton:!0,$constructor:function(){this._flightsUtils=plnextv2.utils.FlightsUtils,this._data={},this._isOnHold=!1,this._isPayNow=!1},$statics:{},$prototype:{fillMerciTripList:function(e){if(this._isNaviteAppCommAvailable()){var t={};this._data=e.data,this._isOnHold=e.isOnHold,this._isPayNow=e.isPayNow;for(var n=[],a=this._data.business.FareReview&&this._data.business.FareReview.tripSummary?this._data.business.FareReview.tripSummary.listItinerary.listItineraryElem:this._data.business.ItineraryList.listItinerary,c=0;c<a.length;c++){var s=this._getMerciTripListBound(a[c],c);n.push(s)}t[this._getRecloc()]=n,t.alerts=this._getAlerts(),nativeAppCommunication.sendTripData(JSON.stringify(t))}return t},_getMerciTripListBound:function(e,t){var n={};return this._fillMerciTripListCommon(n),this._fillBoundLocations(n,e),e.listSegment&&(n.flights=this._getMerciTripListBoundFlights(e.listSegment)),this._fillBoundTimesAndStops(n,e),e.fareFamily&&(n.fareFamily=e.fareFamily.ffName),n.watchData=this._getMerciTripListSegments(e.listSegment,t),this._data.config&&this._data.config.RESERVATION_MENU&&(n.addServiceCatalogue=!!this._data.config.RESERVATION_MENU.allowAdditionalServices),n},_fillBoundLocations:function(e,t){if(t.listSegment){var n=t.listSegment.length-1;t.listSegment[0]&&t.listSegment[0].beginLocation&&(e.blocCode=t.listSegment[0].beginLocation.locationCode,e.blocCityCode=t.listSegment[0].beginLocation.cityCode,e.blocCountryCode=t.listSegment[0].beginLocation.countryCode,e.bloc=t.listSegment[0].beginLocation.cityName),t.listSegment[n]&&t.listSegment[n].endLocation&&(e.elocCode=t.listSegment[n].endLocation.locationCode,e.elocCityCode=t.listSegment[n].endLocation.cityCode,e.elocCountryCode=t.listSegment[n].endLocation.countryCode,e.eloc=t.listSegment[n].endLocation.cityName)}},_fillBoundTimesAndStops:function(e,t){t.listSegment&&(e.numberOfStops=t.listSegment.length-1,e.duration=this._flightsUtils.getFlightDuration(t.listSegment),t.listSegment[0]&&(t.listSegment[0].beginDateGMT&&(e.beginDateTimeGMT=this._getUTCDateInMilliseconds(t.listSegment[0].beginDateGMT)),t.listSegment[0].beginDate&&(e.beginDateTime=this._getUTCDateInMilliseconds(t.listSegment[0].beginDate))),t.listSegment[t.listSegment.length-1]&&(t.listSegment[t.listSegment.length-1].endDateGMT&&(e.endDateTimeGMT=this._getUTCDateInMilliseconds(t.listSegment[t.listSegment.length-1].endDateGMT)),t.listSegment[t.listSegment.length-1].endDate&&(e.endDateTime=this._getUTCDateInMilliseconds(t.listSegment[t.listSegment.length-1].endDate))))},_fillMerciTripListCommon:function(e){e.recLoc=this._getRecloc(),this._data.business.RESERVATION_INFO&&this._data.business.RESERVATION_INFO.travellerFrequentFlyerBean&&(e.ffProgramCode=this._data.business.RESERVATION_INFO.travellerFrequentFlyerBean.FREQ_Airline,e.ffNumber=this._data.business.RESERVATION_INFO.travellerFrequentFlyerBean.FREQ_Number),this._fillBoundTravellerData(e),this._data.business.FareReview&&this._data.business.FareReview.tripSummary&&(e.tripType=this._data.business.FareReview.tripSummary.tripType),this._fillBoundPrice(e),this._fillBoundOnHold(e),e.enablePayNowBtn=this._isPayNow,this._isRefund()&&(e.refunded=!0,e.cancelled=!0),this._data.business.RESERVATION_INFO&&this._data.business.RESERVATION_INFO.hasBeenCancelled&&(e.cancelled=!0,e.refunded=!1),e.passengers=this._getMerciTripListPassengers()},_isRefund:function(){var e=this._data.business.RefundPreviewView&&"OK"===this._data.business.RefundPreviewView.refundStatus;return this._data.business.RESERVATION_INFO&&this._data.business.RESERVATION_INFO.isRefunded||e},_checkFullyRefund:function(){var e=!0,t=this._data.business.RESERVATION_INFO;if(t&&t.listCoupon&&t.listCoupon.length>0){var n=0;for(var a in t.listCoupon)("RF"===t.listCoupon[a].status||"I"===t.listCoupon[a].status)&&n++;n<t.listCoupon.length&&(e=!1)}return e},_fillBoundTravellerData:function(e){var t=this._getTravellerList();if(t&&t[0]){var n=this._getTicketNumber(t[0].Id);n&&(e.eTicketNumber=n),t[0].IdentityInformation&&(e.firstName=t[0].IdentityInformation.IDEN_FirstName,e.lastName=t[0].IdentityInformation.IDEN_LastName)}if(t){e.numberOfTravellers=t.length;var a=0;for(var c in t)t[c].Infants.length&&a++;e.numberOfTravellers+=a}},_fillBoundPrice:function(e){this._data.business.Price&&this._data.business.Price.totalAmount&&this._data.business.Price.totalAmount.currency&&(e.totalAmount=this._data.business.Price.totalAmount.amount,e.currencyCodeOrSymbol=this._data.business.Price.totalAmount.currency.code)},_fillBoundOnHold:function(e){if(e.onHold=this._isOnHold,this._isOnHold&&this._data.business.RESERVATION_INFO&&this._data.business.RESERVATION_INFO.paymentInformation&&this._data.business.RESERVATION_INFO.paymentInformation.expiryDate){var t=new Date(this._data.business.RESERVATION_INFO.paymentInformation.expiryDate);e.onHoldLimitDate=t.getTime()}},_getMerciTripListPassengers:function(){for(var e=[],t=this._getTravellerList(),n=0;n<t.length;n++){var a=t[n],c={};this._fillPassangerData(c,a),e.push(c);for(var s=0,o=a.Infants.length;o>s;s++){c={};var l=a.Infants[s];l.Id=a.Id,this._fillPassangerData(c,l),e.push(c)}}return e},_fillPassangerData:function(e,t){this._fillPassengerName(e,t),this._fillPassengerFF(e,t),this._fillPassangerNumber(e,t),this._fillPassangerType(e,t),this._fillPassengerTicket(e,t)},_fillPassengerName:function(e,t){t.IdentityInformation&&t.IdentityInformation.IDEN_FirstName&&t.IdentityInformation.IDEN_LastName&&(e.name=t.IdentityInformation.IDEN_FirstName+" "+t.IdentityInformation.IDEN_LastName)},_fillPassengerTicket:function(e,t){if(t.Id){e.paxNumber=t.Id;var n=this._getTicketNumber(t.Id,e.paxType);n&&(e.eTicket=n)}},_fillPassengerFF:function(e,t){t.FrequentFlyer&&t.FrequentFlyer.length>0&&(e.ffNumber=t.FrequentFlyer[0].FREQ_Number)},_fillPassangerNumber:function(e,t){t.Id&&(e.paxNumber=t.Id)},_fillPassangerType:function(e,t){t.Type&&t.Type.code&&(e.paxType=t.Type.code)},_getTravellerList:function(){var e=[];return this._data.business.TravellerList&&this._data.business.TravellerList.Travellers?e=this._data.business.TravellerList.Travellers:this._data.business.TRAVELLER_REVIEW&&this._data.business.TRAVELLER_REVIEW.travellerListBean&&this._data.business.TRAVELLER_REVIEW.travellerListBean.Travellers&&(e=this._data.business.TRAVELLER_REVIEW.travellerListBean.Travellers),e},_getMerciTripListBoundFlights:function(e){for(var t=[],n=0;n<e.length;n++)e[n].airline.code&&e[n].flightNumber&&t.push(e[n].airline.code+e[n].flightNumber);return t},_getMerciTripListSegments:function(e,t){watchData=[];for(var n=0;n<e.length;n++){var a={};this._fillFlightBasic(t,a,e[n]),this._fillFareFamilyAndClass(a,e[n]),this._fillSegmentDuration(a,e,n),this._fillSegmentDeparture(a,e[n]),this._fillSegmentArrival(a,e[n]),this._fillCouponStatus(a,e[n]),a.seatSelection=this._getSeatSelection(e[n].id),a.mode="AIR",watchData.push(a)}return watchData},_fillFlightBasic:function(e,t,n){t.itineraryIndex=e,t.flightNumber=n.flightNumber,n.airline&&(t.airlineName=n.airline.name,t.airlineCode=n.airline.code),n.opAirline&&(t.operatedBy=n.opAirline.name),n.equipment&&(t.equipmentName=n.equipment.name)},_fillFareFamilyAndClass:function(e,t){t.fareFamily&&(e.fareFamily=t.fareFamily.ffName);var n=aria.utils.Path.describe(t,"listCabin[0].name");n||(n=aria.utils.Path.describe(t,"listCabin[0].listRbd[0].rbd")),n&&(e.cabinClass=n.value)},_fillSegmentDuration:function(e,t,n){e.duration=t[n].segmentTime,t[n].beginDate&&t[n-1]&&t[n-1].endDate&&(e.layover=this._flightsUtils.getStopDuration(t[n-1],t[n]))},_fillCouponStatus:function(e,t){if(this._isRefund()){var n=this._data.business.RESERVATION_INFO.listCoupon;for(var a in this._data.business.RESERVATION_INFO.listCoupon)t.id===n[a].segmentId&&"RF"===n[a].status&&(e.coupon_status=n[a].status)}},_fillSegmentDeparture:function(e,t){if(t.beginLocation){var n=t.beginLocation;e.departureCityCode=n.cityCode,e.departureCityName=n.cityName,e.departureAirportCode=n.locationCode,e.departureAirportName=n.locationName}t.beginDateGMT&&(e.departureDateTimeGMT=this._getUTCDateInMilliseconds(t.beginDateGMT)),t.beginDate&&(e.departureDateTime=this._getUTCDateInMilliseconds(t.beginDate)),e.departureTerminal=t.beginTerminal},_fillSegmentArrival:function(e,t){if(t.endLocation){var n=t.endLocation;e.arrivalCityCode=n.cityCode,e.arrivalCityName=n.cityName,e.arrivalAirportCode=n.locationCode,e.arrivalAirportName=n.locationName}t.endDateGMT&&(e.arrivalDateTimeGMT=this._getUTCDateInMilliseconds(t.endDateGMT)),t.endDate&&(e.arrivalDateTime=this._getUTCDateInMilliseconds(t.endDate)),e.arrivalTerminal=t.endTerminal},_getSeatSelection:function(e){var t={};if(this._data.business.ServiceSelectionBreakdown&&this._data.business.ServiceSelectionBreakdown.servicesBySegment){var n=this._data.business.ServiceSelectionBreakdown.servicesBySegment;if(n[e])for(var a=0;a<n[e].length;a++)if(n[e][a]&&"SIT"===n[e][a].code)for(var c=0;c<n[e][a].listServices.length;c++)n[e][a].listServices[c].passengerId&&n[e][a].listServices[c].seat&&(t[n[e][a].listServices[c].passengerId]=n[e][a].listServices[c].seat)}return t},_getTicketNumber:function(e,t){for(var n=0;n<this._data.business.RESERVATION_INFO.listAirTicket.length;n++){var a=this._data.business.RESERVATION_INFO.listAirTicket[n],c=a.liTravellerId[0]===e&&a.faFh&&a.faFh.documentNumber,s="INF"===t&&"INF"===a.passengerType||"INF"!==t;if(c&&s)return a.faFh.documentNumber}return""},_getAlerts:function(){var e=[],t={};this._data.errorList&&this._data.errorList.globalErrors&&(t=this._data.errorList.globalErrors);for(var n in t)if(t.hasOwnProperty(n))for(var a=0;a<t[n].length;a++){var c={};c.ERROR_PRIORITY=a,c.ERROR_TYPE=t[n][a].type,c.ERROR_CODE=t[n][a].code,c.ERROR_MESSAGE=t[n][a].message,e.push(c)}return e},_getRecloc:function(){var e="",t=this._data.business.RESERVATION_INFO||this._data.business.CANCELLATION_INFO;return t&&(e=t.locator),e},_getUTCDateInMilliseconds:function(e){var t=new Date(e),n=60*t.getTimezoneOffset()*1e3;return t.getTime()-n},_isNaviteAppCommAvailable:function(){return null!==typeof nativeAppCommunication&&"undefined"!=typeof nativeAppCommunication&&"function"==typeof nativeAppCommunication.sendTripData?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/NativeAppCommunicationWrapper.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.NativeAppCommunicationWrapper",$dependencies:["aria.utils.String","aria.utils.Type","plnextv2.utils.HtmlUtils"],$singleton:!0,$constructor:function(){this._headerData={},this._htmlUtils=plnextv2.utils.HtmlUtils},$prototype:{sendHeaderData:function(e){this.isEnabled()&&(aria.utils.Type.isString(e.title)&&(e.title=aria.utils.String.capitalize(this._htmlUtils.removeHTMLTags(e.title))),this._headerData=e,window.nativeAppCommunication.sendHeaderData(JSON.stringify({pageData:{header:e}})))},getHeaderData:function(){return this._headerData},setNativeCloseButtonCallback:function(e){if(this.isEnabled()){var t=this;window.nativeAppCommunication.onCloseClicked=function(){t.$callback(e),t.removeNativeCloseButtonCallback()}}},removeNativeCloseButtonCallback:function(){this.isEnabled()&&(window.nativeAppCommunication.onCloseClicked=null)},isEnabled:function(){return!!window.nativeAppCommunication},navigateTo:function(e){this.isEnabled()&&window.nativeAppCommunication.navigateTo(JSON.stringify(e))},getDistilToken:function(){return this.isEnabled()?window.nativeAppCommunication.getDistilToken():void 0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/NumberUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.NumberUtils",$dependencies:["plnextv2.utils.Symbols","aria.utils.Number"],$singleton:!0,$constructor:function(){this._symbols=plnextv2.utils.Symbols},$prototype:{formatNumber:function(e,t){if(null==e)return this._symbols.NO_DATA;var n="",a=this._symbols.DEFAULT_AMOUNT_FORMAT;return t&&(t.format&&(a=t.format),t.negative===!0&&(n=this._symbols.NO_DATA),t.zero_hide===!0&&0==e)?this._symbols.NO_DATA:n+aria.utils.Number.formatNumber(e,a)},formatMonAmount:function(e,t){var n=t;return n||(n={}),n.format=this._symbols.DEFAULT_AMOUNT_FORMAT,this.formatNumber(e,n)+" ISK"},checkLuhn:function(e){var t=e.length;if(0===t)return!1;var n=0;e=e.split("").reverse();for(var a=0;t>a;a++){var c=parseInt(e[a]);if(a%2===1){c*=2;for(var s=String(c).split(""),o=0;o<s.length;o++)n+=parseInt(s[o])}else n+=c}return n%10===0},areEqualNumbers:function(e,t){return fixNo1=parseFloat(e.toFixed(2)),fixNo2=parseFloat(t.toFixed(2)),fixNo1===fixNo2}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/PaxUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.PaxUtils",$dependencies:["plnextv2.utils.Symbols","plnextv2.utils.StringResources"],$singleton:!0,$constructor:function(){this._symbols=plnextv2.utils.Symbols,this._stringResources=plnextv2.utils.StringResources},$statics:{PAX_NAME_SEPARATOR:"/"},$prototype:{formatPaxName:function(e,t,n){null==t&&(t="");var a="";return aria.utils.Type.isString(e)&&e.length>0&&(a+=e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()),aria.utils.Type.isString(t)&&t.length>0&&(a+=" "+t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()),aria.utils.Type.isString(n)&&n.length>0&&(a+=" ("+n+")"),a},formatInfantName:function(e,t,n){var a="";if(null!=n){var c="",s=aria.utils.environment.Date.getDateFormats();s&&s.longFormat?c=this.date(n):this.$logWarn("Missing 'longFormat' date pattern in appEnvironment.",null,s),a=" ("+c+")"}var o=this.formatPaxName(e,t,"");return o+a},isFirstTravellerTypeUNN:function(e){return e&&e.length>0&&this.isTravellerTypeUNN(e[0].travellerCode)},isTravellerTypeUNN:function(e){return void 0===e?!1:e===this._stringResources.UNACCOMPANIED_CHILD||e.match(/U\d{2}/g)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/PaymentGroupUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.PaymentGroupUtils",$singleton:!0,$statics:{PAYMENT_TYPE_CODE_EBK:"EBKC",PAYMENT_GROUP_STATUS_CREATED:"CREATED"},$prototype:{buildPaymentGroupToDelete:function(e){for(var t=[],n=0;n<e.length;n++){var a={TYPE:"PAYMENT_GROUP",PAYMENT_GROUP_ID:e[n],STATUS:"DELETE_FROM_SESSION"};t.push(a)}return t},getPaymentGroupIdsToDelete:function(e){var t=[],n=e&&e.listPaymentGroups;if(n)for(var a=0;a<n.length;a++){var c=n[a];if(c){var s=aria.utils.Path.describe(c,"listPayments[0].paymentType");c.status===this.PAYMENT_GROUP_STATUS_CREATED||null!=s&&s.value===this.PAYMENT_TYPE_CODE_EBK||t.push(c.paymentGroupId)}}return t}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/PriceUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.PriceUtils",$dependencies:["aria.utils.Number","plnextv2.utils.GlobalLists","plnextv2.utils.StringUtils"],$singleton:!0,$statics:{SL_CURRENCY_PATTERNS:"currencyPatterns",DEFAULT_PATTERN:"\xa4###,##0",MCP_DATA:"mcpData",MCP_CONTEXT:"mcpContext",GENERIC_CURRENCY_SYMBOL:"&curren;"},$constructor:function(){this._cache={}},$prototype:{setCurrencyFormat:function(e,t,n,a,c,s,o,l){var r=n.split("."),i=r.length>1?r[1].length:0;t=Number(t),a=a?a:".",c=c?c:"";var d=this._extractCurrencySymbol(e);return o||l?s?"<abbr title='"+e.name+"' class='"+o+"'>"+d+"</abbr><span class='"+l+"'>"+t.toFixed(i).replace(".",a).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+c)+"</span>":"<span class='"+l+"'>"+t.toFixed(i).replace(".",a).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+c)+"</span><abbr title='"+e.name+"' class='"+o+"'>"+d+"</abbr>":s?d+" "+t.toFixed(i).replace(".",a).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+c):t.toFixed(i).replace(".",a).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+c)+" "+d},formatCurrency:function(e,t,n,a){var c;c=t?this.getPatternDetails(t.code):this.getPatternDetails();var s=c.pattern,o={decimalSeparator:c.decimalSep,groupingSeparator:c.groupingSep};return e=aria.utils.Number.formatNumber(e,s,o),this._priceFormatDisplay(e,t,s,n,a)},formatNumber:function(e,t,n){var a=t.pattern,c={decimalSeparator:t.decimalSep,groupingSeparator:t.groupingSep};if(isNaN(e))return e;e=Number(e),c=aria.utils.Number._normalizeSymbols(c);var s=aria.utils.Number._explode(a);if(!s)return this.$logError(this.INVALID_FORMAT,["formatCurrency",this.CURRENCY_BEAN]);var o=0>e?"-":n&&e>0?"+":"",l=Math.abs(e).toString().split("."),r="",i=l[1]||"",d="";if(s.maxDecLen>i.length)r=l[0],d=aria.utils.String.pad(i,s.maxDecLen,"0");else{var f=Math.abs(e).toFixed(s.maxDecLen).split(".");r=f[0],d=f[1]||""}r.length<s.minIntLen&&(r=aria.utils.String.pad(r,s.minIntLen,"0",!0)),d.length!==i.length&&(d=aria.utils.String.crop(d,s.minDecLen,"0"));var p=[o+aria.utils.Number._addGrouping(r,s,c)];return d&&p.push(d),p.join(c.decimalSeparator)},addCurrencyToNumber:function(e,t,n,a){var c;c=t?this.getPatternDetails(t.code):this.getPatternDetails();var s=c.pattern;return this._priceFormatDisplay(e,t,s,n,a)},_priceFormatDisplay:function(e,t,n,a,c){var s=aria.utils.Number._explode(n);if(!s)return aria.utils.Number.$logError(aria.utils.Number.INVALID_FORMAT,["formatCurrency",aria.utils.Number.CURRENCY_BEAN]);var o=this._extractCurrencySymbol(t);return a||c?this._setCssFormat(a,c,s,t,e):s.currencyBegin?o+" "+e:s.currencyEnd?e+" "+o:e},removeDecimals:function(e){var t=e.split(".")[0];return t},getPatternDetails:function(e){var t,n=this._cache[e];if(n)return n;if(t=this._getCurrencyPatternByCode(e),!t||!t.pattern){t=new Object;var a=plnextv2.utils.context.AppContext.getSiteConfig().appData.config.currencyPatternDescription,c=a.LANG_DEF_DECIMAL_SEP?a.LANG_DEF_DECIMAL_SEP:".",s=a.LANG_DEF_GROUPING_SEP?a.LANG_DEF_GROUPING_SEP:" ",o=a.SITE_CURRENCY_FORMAT_JAVA,l=o?o.split("."):[""],r=l.length>1?"."+l[1]:"";n=this.DEFAULT_PATTERN+r,e==plnextv2.utils.I18n.getLabel("tx_pltg_text_Miles")&&(n=this.removeDecimals(n)),t.pattern=n,t.decimalSep=c,t.groupingSep=s}return this._cache[e]=t,t},_setCssFormat:function(e,t,n,a,c){var s="",o=this._extractCurrencySymbol(a);return a&&(s=a.name),n.currencyBegin?"<abbr title='"+s+"' class='"+e+"'>"+o+"</abbr><span class='"+t+"'>"+c+"</span>":n.currencyEnd?"<span class='"+t+"'>"+c+"</span><abbr title='"+s+"' class='"+e+"'>"+o+"</abbr>":"<span class='"+t+"'>"+c+"</span>"},_getCurrencyPatternByCode:function(e){for(var t=plnextv2.utils.GlobalLists.getList(this.SL_CURRENCY_PATTERNS,!0),n=t.length,a=0;n>a;a++){var c=t[a];if(e==c.currencyCode)return c.pattern&&(c.pattern=c.pattern.replace(/\\u([a-f0-9]{4})/gi,function(e,t){return String.fromCharCode(parseInt(t,16))})),c}return null},getFormattedMiles:function(e){var t={code:plnextv2.utils.I18n.getLabel("tx_pltg_text_Miles")},n=this.getPatternDetails(t.code);return this.formatNumber(e,n)},getAASPriceInMiles:function(e,t){var n=e.otherCurrencyAmount.totalAmount;return t&&(n=e.otherCurrencyAmount.balancedAmount),this.getPriceAmountInMiles(n)},getMaxPriceInMilesFromSlider:function(e){return null!=e&&null!=e.listRanks&&null!=e.listRanks[e.listRanks.length-1].milesAmount?this.getPriceAmountInMiles(e.listRanks[e.listRanks.length-1].milesAmount):void 0},getPriceAmountInMiles:function(e){return this.getFormattedMiles(e)+" "+plnextv2.utils.I18n.getLabel("tx_pltg_text_Miles")},getAASInformativePriceInMiles:function(e){var t=this.getAASPriceInMiles(e);if(e.cashAmount&&e.cashAmount.totalAmount>0){var n=this.formatCurrency(e.cashAmount.totalAmount,e.cashAmount.currency);return plnextv2.utils.I18n.getStringFromPattern("tx_pltg_text_AASInformativePriceInMilesAndCash",[t,n])}return plnextv2.utils.I18n.getStringFromPattern("tx_pltg_text_AASInformativePriceInMiles",[t])},addAASPrice:function(e,t){null!=e&&null!=t&&null!=e.cash&&null!=t.cash&&(this._addAASBalancedAmount(e,t),e.cash.totalAmount+=t.cash.totalAmount,this._addAASMiles(e,t))},_addAASBalancedAmount:function(e,t){t.cash.balancedAmount&&(e.cash.balancedAmount?e.cash.balancedAmount+=t.cash.balancedAmount:e.cash.balancedAmount=aria.utils.Json.copy(t.cash.balancedAmount))},_addAASMiles:function(e,t){t.miles&&(e.miles?(e.miles.otherCurrencyAmount.totalAmount+=t.miles.otherCurrencyAmount.totalAmount,e.miles.savingsAmount.totalAmount+=t.miles.savingsAmount.totalAmount,t.miles.cashAmount&&(e.miles.cashAmount?e.miles.cashAmount.totalAmount+=t.miles.cashAmount.totalAmount:e.miles.cashAmount=aria.utils.Json.copy(t.miles.cashAmount))):e.miles=aria.utils.Json.copy(t.miles))},isNonNetting:function(e,t){return t||this.hasRefundAmount(e)&&this.hasDifferentCollectAndTotalCollectAmount(e)},hasRefundAmount:function(e){return e&&e.totalRefund&&e.totalRefund.amount>0},hasDifferentCollectAndTotalCollectAmount:function(e){return e.collectBalance&&e.totalCollectBalance&&e.collectBalance.amount!==e.totalCollectBalance.amount},computeUpgradeAmount:function(e){var t=0,n=e.upgradesBySegment;for(var a in n)if(!plnextv2.utils.CustomAriaUtils.isMetadata(a)){var c=n[a],s=c.selectedCabinCode;c.upgradesByCabin[s]&&c.upgradesByCabin[s].price&&c.upgradesByCabin[s].price.amount&&(t+=c.upgradesByCabin[s].price.amount)}return t},currencySymbol:function(e){var t=e.code,n=e.symbol,a=e.name;if(n&&n.length>0){var c=n.replace(/\\u[\dA-F]{4}/gi,function(e){return String.fromCharCode(parseInt(e.replace(/\\u/g,""),16))});return'<abbr title="'+a+'">'+c}return'<abbr title="'+a+'">'+t},formatSaveUpToMiles:function(e,t){var n=this.getAASPriceInMiles(e,t),a=e.savingsAmount.totalAmount;t&&(a=e.savingsAmount.balancedAmount);var c=this.formatCurrency(a,e.savingsAmount.currency);return plnextv2.utils.I18n.getStringFromPattern("tx_pltg_text_AASSaveUpToMiles",[c,n])},formatSaveUpToMilesFromSlider:function(e,t){var n=this.getMaxPriceInMilesFromSlider(e),a=this.formatCurrency(e.listRanks[e.listRanks.length-1].convertedAmount,t);return plnextv2.utils.I18n.getStringFromPattern("tx_pltg_text_SaveUpToMiles",[a,n])},formatSaveUpToMilesFromUpgrade:function(e,t,n){var a=this.formatCurrency(e,n),c=this.getPriceAmountInMiles(t);return plnextv2.utils.I18n.getStringFromPattern("tx_pltg_text_SaveUpToMiles",[a,c])},formatSaveUpToMilesFromUpgradeFooter:function(e,t,n){var a=this.formatCurrency(e,n),c=this.getPriceAmountInMiles(t);return plnextv2.utils.I18n.getStringFromPattern("tx_pltg_text_AASSaveUpToMiles",[a,c])},formatTotalMiles:function(e,t,n){return plnextv2.utils.I18n.getStringFromPattern("tx_pltg_text_MilesTotal",[this.formatMilesWithHTML(e,t,n)])},formatMissingMilesForUpgrade:function(e){return plnextv2.utils.I18n.getStringFromPattern("tx_pltg_text_upgradeMissingMiles",[e])},formatMilesWithHTML:function(e,t,n){var a=["<b>","",this.getFormattedMiles(e),"","</b> ","",plnextv2.utils.I18n.getLabel("tx_pltg_text_Miles"),""];return n&&(a[1]='<span class="'+n+'">',a[3]="</span>"),t&&(a[5]='<span class="'+t+'">',a[7]="</span>"),a.join("")},_extractCurrencySymbol:function(e){return e?e.symbol&&this.GENERIC_CURRENCY_SYMBOL!==e.symbol?plnextv2.utils.StringUtils.evaluateUnicodeString(e.symbol):e.code:""},hasServicesWithConvertedAmount:function(e){return e&&e.totalServicesOtherCurrency&&e.totalServicesOtherCurrency.length},hasServicesCurrencyDifferentFromBookingCurrency:function(e){var t=aria.utils.Path.describe(e,"totalServices.totalAmount.amount");return!!(e&&e.mixedCurrencyServices&&t&&t.value)},getServicesConversionCurrencies:function(e){var t=aria.utils.Path.describe(e,"totalServicesOtherCurrency[0].totalAmount.currency.code");return{from:t&&t.value||"",to:e.currency.code}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/ProfileUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.ProfileUtils",$dependencies:["plnextv2.utils.storage.SessionStorageManager","plnextv2.utils.context.AppContext"],$singleton:!0,$statics:{DIGITAL_PROFILE_KEY:"DIGITAL_PROFILE",PROFILES_CONTEXT:"Profiles",ACCESS_TOKEN_KEY:"ACCESS_TOKEN",API_ENDPOINTS:{auth:"/v1/security/oauth2",cem:"/v1/cem"},DOCUMENT_TYPES:{PASSPORT:["P","PP"],IDENTITY_CARD:"I",ALIEN_REGISTRATION:"A",DRIVER_LICENCE:"DL",RESIDENT_CARD:"R",MILITARY_ID_CARD:"M",KNOWN_TRAVELER:"K",REDRESS:"R"},GENDER:{MALE:"M",FEMALE:"F"},MAIN_ADDRESS_USAGE:"MAIN",TEXTPSPT:"PASSPORT",TEXTREDRESS:"REDRESS"},$constructor:function(){this._storageManager=plnextv2.utils.storage.SessionStorageManager,this._cemSdk=window.CEM_SDK,this._gatewaySdk=window.GATEWAY_SDK},$prototype:{getProfileFromSession:function(){return this._storageManager.get(this.DIGITAL_PROFILE_KEY,this.PROFILES_CONTEXT)},getContactInformation:function(e){var t={};if(this._cemSdk){var n=this._cemSdk.getEmailFromProfile(e),a=this._getFormattedPhone(this._cemSdk.getMainMobilePhone(e)),c=this._getFormattedPhone(this._cemSdk.getEmergencyContactPhone(e));t={Email:n,EmailConfirm:n,PhoneMobile:a.number,PhoneMobileCode:a.countryCode,SosName:c.name,SosPhone:c.number,SosPhoneCode:c.countryCode}}return t},getIdentityInformation:function(e){var t={};if(this._cemSdk){var n=this._cemSdk.getNameFromCemProfile(e);t={IDEN_TitleCode:n?n.prefix:"",IDEN_FirstName:n?n.firstName:"",IDEN_LastName:n?n.lastName:""},t=this.getDemographicsInformation(e,null,t)}return t},getDocumentInformation:function(e,t,n){var a={};if(this.isCemsdkAndDocCemProfile(e)&&t&&n){var c=this._cemSdk.getDocumentFromCemProfile(e),s=this.DOCUMENT_TYPES[c.documentType];s&&c&&c.documentType!==this.TEXTREDRESS?(s=this.getDocumentType(c,t,s),a=this.getDocumentInfo(c,a,s)):n.REDN_DocumentNumber=c.number}return a},isCemsdkAndDocCemProfile:function(e){return this._cemSdk&&this._cemSdk.getDocumentFromCemProfile(e)},getDocumentType:function(e,t,n){if(e&&e.documentType===this.TEXTPSPT)for(var a=this.DOCUMENT_TYPES[e.documentType],c=0;c<t.length;c++){var s=a.indexOf(t[c].value);n=this.getDocumentTypeValue(s,e,n)}return n},getDocumentTypeValue:function(e,t,n){return-1!==e&&(n=this.DOCUMENT_TYPES[t.documentType][e]),n},getDocumentInfo:function(e,t,n){return t={PSPT_DocumentExpiryDate:e&&e.expiryDate?e.expiryDate.replace(/-/g,"/"):"",PSPT_DocumentIssuingCountry:e&&e.issuanceCountry?e.issuanceCountry:"",PSPT_DocumentNumber:e&&e.number?e.number:"",PSPT_DocumentType:e&&e.documentType?n:""}},getDemographicsInformation:function(e,t,n){var a=this._cemSdk.getIdentityDocuments(e),c=this._cemSdk.getDemographicsFromProfile(e);void 0===n&&(n={});var s=this.getDocumentPSPT(t);return c&&c.gender&&!s.previousGender&&(n.IDEN_Gender=this.GENDER[c.gender]),this.checkNationality(a)&&!s.previousNationality&&(n.IDEN_Nationality=a[0].nationality),c&&c.birthDate&&!s.previousDateOfBirth&&(n.IDEN_DateOfBirth=c.birthDate.replace(/-/g,"/")),n},getDocumentPSPT:function(e){var t={previousGender:"",previousNationality:"",previousDateOfBirth:""};return e&&(t.previousGender=e.IDEN_Gender,t.previousNationality=e.IDEN_Nationality,t.previousDateOfBirth=e.IDEN_DateOfBirth),t},checkNationality:function(e){return!!e&&!!e.length&&!!e[0].nationality},getHomeAddressInformation:function(e){var t={};if(this._cemSdk){var n=this._cemSdk.getAddressesFromProfile(e);n&&(t=this._iterateAddressesDocumentInfo(n))}return t},_iterateAddressesDocumentInfo:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t=this._getMainAddressInfo(e[n]));return t},_getMainAddressInfo:function(e){var t={};return this._isMainAdressInfo(e)&&(t={AddressCity:e.cityName?e.cityName:"",AddressCountry:e.countryCode?e.countryCode:"",AddressFirstLine:e.lines&&e.lines.length>0?e.lines[0]:"",AddressSecondLine:e.lines&&e.lines.length>0?e.lines[1]:"",AddressZipCode:e.postalCode?e.postalCode:"",AddressState:e.stateName?e.stateName:""}),t},_isMainAdressInfo:function(e){return e&&e.usage===this.MAIN_ADDRESS_USAGE},getFrequentFlyer:function(e){if(!this._cemSdk)return null;var t=this._cemSdk.getIndividualMembership(e);return t?{FREQ_Airline:t.program&&t.program.owner||"",FREQ_Number:t.memberId}:null},getAccessTokenFromSession:function(){return this._storageManager.get(this.ACCESS_TOKEN_KEY,this.PROFILES_CONTEXT)},setProfileToSession:function(e){var t="string"==typeof e?JSON.parse(e):e;this._storageManager.set(this.DIGITAL_PROFILE_KEY,t,this.PROFILES_CONTEXT)},setAccessTokenToSession:function(e){this._storageManager.set(this.ACCESS_TOKEN_KEY,e,this.PROFILES_CONTEXT)},setDigitalProfileDataToSession:function(e){e&&(this.setProfileToSession(e.profile),this.setAccessTokenToSession(e.accessToken))},getName:function(){if(!this._cemSdk)return null;var e=this.getProfileFromSession();return e?this._cemSdk.getNameFromCemProfile(e):null},isAlreadyLoggedToDigitalProfile:function(){return!!this.getProfileFromSession()},_getFormattedPhone:function(e){return{countryCode:e&&e.countryCode?"+"+e.countryCode:"",number:e&&e.number||"",name:e&&e.addresseeName||""}},_getProfileWithTrackedBooking:function(e,t){return this._cemSdk&&t&&e?this._cemSdk.getCEMProfileWithTrackedBooking(e,t):null},_getNewTrackedBooking:function(e){return e&&this._cemSdk?this._cemSdk.getNewTrackedBooking(e.locator,e.primeName,e.creationDate):null},_getTokenRequestPlugin:function(e){if(!e||!this._gatewaySdk)return null;var t=e.gatewayUrl+this.API_ENDPOINTS.auth;return new this._gatewaySdk.plugins.GatewayTokenRequestPlugin(t,e.gatewayClientId,e.gatewayClientSecret)},_getDigitalProfileById:function(e,t){return e.getDigitalProfileById({xBearerToken:t})},_updateDigitalProfileById:function(e,t,n){return e.updateDigitalProfileById({xBearerToken:t,body:{data:n}})},_updateDigitalProfileWithNewBooking:function(e,t,n,a){var c=this,s=this._getProfileWithTrackedBooking(t,n);s&&this._updateDigitalProfileById(a,e,s).then(c.setProfileToSession.bind(c,s))},storeBookingInProfile:function(e,t){var n=this;if(t&&e&&this._cemSdk&&this._gatewaySdk){var a=this.getAccessTokenFromSession(),c=this.getProfileFromSession();if(a){var s=e.gatewayUrl+this.API_ENDPOINTS.cem,o=this._getTokenRequestPlugin(e),l=new this._cemSdk.DigitalProfilesApi(s,[o]);if(l){var r=this._getNewTrackedBooking(t);c?this._updateDigitalProfileWithNewBooking(a,c,r,l):this._getDigitalProfileById(l,a).then(function(e){e&&e.data&&n._updateDigitalProfileWithNewBooking(a,e.data,r,l)})}}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/QuotaUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.QuotaUtils",$singleton:!0,$dependencies:["plnextv2.utils.CatalogServicesUtils","plnextv2.components.catalogServices.desktop.controller.DCatalogServicesConstants"],$constructor:function(){this._catalogConstants=plnextv2.components.catalogServices.desktop.controller.DCatalogServicesConstants},$statics:{QUOTA_REACHED:0,QUOTA_EXCELLENT_AVAIL:9},$prototype:{getLowestAvailabilityForService:function(e,t,n,a){var c=null;if(e){var o=plnextv2.utils.CatalogServicesUtils.getEligibilitiesForServiceAndPassengers(e,t,n,a);c=this._getLowestAvailabilityForEligibilities(o,t)}return c},_getLowestAvailabilityForEligibilities:function(e,t){var n=null;if(e)for(var a=0;a<e.length;a++){var c=e[a],o=c.elementIds;if(c.eligibilityType===this._catalogConstants.ASSOCIATION_MODE_ITINERARY||!t||aria.utils.Array.contains(o,parseInt(t))){var s=c.eligibilityQuotaNumber;c.numberOfEligibilitiesBooked&&(s+=c.numberOfEligibilitiesBooked),this.isQuotaNumberRelevant(s)&&(!n||n>s)&&(n=s)}}return n},computeQuotaToDisplay:function(e,t){return e&&t&&(e-=t),e},isThereAnyQuotaNumberRelevantInCategory:function(e){var t=plnextv2.utils.CatalogServicesUtils.getEligibilitiesForCategory(e);if(t)for(var n=0;n<t.length;n++)if(this.isQuotaNumberRelevant(t[n].eligibilityQuotaNumber))return!0;return!1},isQuotaNumberRelevant:function(e){return e?e>this.QUOTA_REACHED&&e<this.QUOTA_EXCELLENT_AVAIL:!1},getQuotaStringToDisplay:function(e){var t="tx_pltg_text_AASServiceQuotaInformation";return null!=e&&(0==e?t="tx_pltg_text_AASServiceQuotaInformationNonAvailable":0>e&&(t="tx_pltg_text_AASServiceQuotaInformationNegative")),t},getQuotaInfo:function(e,t){var n=null;return e.typeElement===this._catalogConstants.TYPE_CATEGORY?n=this._getCategoryQuota(e.element,t):e.typeElement===this._catalogConstants.TYPE_SERVICE?n=this._getServiceQuota(e.element,e.elementId,t):e.typeElement===this._catalogConstants.TYPE_SUBCATEGORY&&(n=this._getSubCategoryQuota(e.services,e.elementId,t)),n},_adjustElementIdForQuota:function(e,t){return e.associationMode===this._catalogConstants.ASSOCIATION_MODE_ITINERARY&&(t=parseInt(this._catalogConstants.NO_SEGMENT_ID)),t},_getServiceQuota:function(e,t,n){var a=null,c=this._computeQuotaForService(e,t,n);return null!=c&&(a={},a.quotaValue=c),a},_getSubCategoryQuota:function(e,t,n){for(var a=null,c=null,o=0;o<e.length;o++){t=this._adjustElementIdForQuota(e[o],t);var s=this._computeQuotaForService(e[o],t,n);null!=s&&(!c||c>s)&&(c=s)}return null!=c&&(a={},a.quotaValue=c),a},_getCategoryQuota:function(e,t){var n=null,a=e.services;if(a&&1===a.length){n={};for(var c=null,o=a[0],s=plnextv2.utils.CatalogServicesUtils.getElementIdsForService(o),l=!0,r=0;r<s.length;r++){var i=this._adjustElementIdForQuota(o,s[r]),d=this._computeQuotaForService(o,i,t);null!=d&&(0!=d&&(l=!1),(null==c||c>d)&&(c=d))}n.allSoldOut=l,n.quotaValue=c}return n},_computeQuotaForService:function(e,t,n){var a=null;if(null!=e&&null!=t){var c=plnextv2.utils.CatalogServicesUtils.getPassengerIdsForService(e),o=this.getLowestAvailabilityForService(e,t,c,n);if(null!=o&&this.isQuotaNumberRelevant(o)){var s=plnextv2.utils.CatalogServicesUtils.getNumberServiceSelectedInSelection(e,t,n);a=this.computeQuotaToDisplay(o,s)}}return a}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/RequestUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.RequestUtils",$singleton:!0,$prototype:{buildIgnoreChangesRequest:function(e,t){return{url:"ModifyIgnoreChanges.action",method:"POST",data:{ACTION:"MODIFY",DIRECT_RETRIEVE:"TRUE",REC_LOC:e,DIRECT_RETRIEVE_LASTNAME:t},isHTTP:!0}},buildIgnoreChangesRebookRepriceRequest:function(e,t){var n=this.buildIgnoreChangesRequest(e,t);return n.url="IgnoreRebookRepriceChanges.action",n.data.CLEAR_TRIP_PLAN="TRUE",n}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/RoundTripUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.RoundTripUtils",$singleton:!0,$statics:{},$prototype:{getSelectedFirstBoundAmount:function(e){return e.availability.selectedFirstBoundRecommendationAmount},getCurrentCalendarTab:function(e,t){var n=e.availability.owcCalendars[t];if(n){var a=n.activeRow;return n.array[a]}},getCurrentCalendarPrice:function(e,t){var n=this.getCurrentCalendarTab(e,t);return n?n.boundPrice:void 0},getCurrentCalendarDate:function(e,t){var n=this.getCurrentCalendarTab(e,t);return n?new Date(n.boundDate):void 0},getOtherBoundAmount:function(e,t){var n;return n=0===t?this.getCurrentCalendarPrice(e,1):this.getSelectedFirstBoundAmount(e)},getDisplayPrice:function(e,t,n,a){var c;if(0===aria.utils.Date.dayDifference(t,n)){var o=e.availability.prevChangeArgsPerBound[0],s=e.availability.recommendations[o];c=s.recoAmount,c.currency=a.totalPrice.currency}else c=a.totalPrice;return c},getOtherBoundPriceAmount:function(e,t,n){var a;if(t)a=this.getCurrentCalendarPrice(e,1);else{var c=this.getCurrentCalendarDate(e,1);a=0===aria.utils.Date.dayDifference(new Date(n.boundDate),c)?this.getSelectedFirstBoundAmount(e):this.getCurrentCalendarPrice(e,0)}return e.config.displayPricesWithoutTax?a.amountWithoutTax:a.totalAmount},calculateTotalAmount:function(e,t){var n=aria.utils.Object.assign({},e);return e&&t&&(n.amountWithoutTax+=t.amountWithoutTax,n.amountWithoutTaxAndFee+=t.amountWithoutTaxAndFee,n.serviceFee+=t.serviceFee,n.tax+=t.tax,n.totalAmount+=t.totalAmount),n}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/StickyUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.StickyUtils",$dependencies:["aria.utils.Type"],$singleton:!0,$statics:{CSS_FIXED:"fixed",CSS_STICK_TOP:"stick-top",CSS_STICK_BOTTOM:"stick-bottom",ID_PLACEHOLDER_SUFFIX:"-sticky-placeholder",BOOTSTRAP_PADDING:15},$constructor:function(){this.canBeZeroWidth=!0,this.__stickyElements=[],jQuery(window).on("scroll resize",null,null,jQuery.proxy(this,"__onStickyScroll"))},$prototype:{isActive:function(e){switch(e){case"NONE":return!0;case"ALL":return!1;case"IE":return!aria.core.Browser.isIE;default:return!0}},stickElement:function(e,t,n){var a=jQuery("#"+e),c=a.offset().top-parseInt(a.children(":first-child").css("margin-top")),s={id:a.attr("id"),jqElement:a,originalOffset:c||a.offset().top,originalWidth:a.width()};t&&document.getElementById(t)&&(s.containerId=t),n&&(this.canBeZeroWidth=!!n.canBeZeroWidth);for(var o=0;o<this.__stickyElements.length;o++)this.__stickyElements.id===s.id&&this.__stickyElements.splice(o,1);this.__stickyElements.push(s)},__onStickyScroll:function(e){for(var t=jQuery(window).height(),n=jQuery(document).height(),a=jQuery(window).scrollTop(),c=this.__scrollPos-a,s={windowHeight:t,documentHeight:n,scrollTop:a},o=0;o<this.__stickyElements.length;o++){var l=this.__stickyElements[o],r=l.jqElement,i=l.originalOffset,d=this.__getElementHeight(r),f=this.__getTop(r);d>n||i>a?this.__resetPosition(r,l,l.id):(e&&"resize"===e.type&&this.__resetPosition(r,l,l.id),this.__insertPlaceholder(r,d,l.id),s.elementHeight=d,0>c?this.__onScrollDownAfterThreshold(r,l,s,f,c):this.__onScrollUpAfterThreshold(r,l,s,f,c))}this.__scrollPos=a},resetPositionAfterHeightChange:function(e){if(e)for(var t=0;t<this.__stickyElements.length;t++)if(e===this.__stickyElements[t].id){var n=this.__stickyElements[t].jqElement,a=this.__getVisibleContainerHeight(this.__stickyElements[t].containerId);if(this.__elementOverflowsContainer(n,a)){n.removeClass(this.CSS_STICK_TOP),n.css("top",""),n.addClass(this.CSS_STICK_BOTTOM);var c=jQuery(window).height(),s=Math.max(0,c-a);n.css("bottom",s+"px")}}},__elementOverflowsContainer:function(e,t){var n=this.__getElementHeight(e),a=this.__getTop(e);return e.hasClass(this.CSS_FIXED)&&n+a>t},__resetPosition:function(e,t,n){var a=e.width();e.removeClass(this.CSS_FIXED),e.removeClass(this.CSS_STICK_BOTTOM),e.removeClass(this.CSS_STICK_TOP),e.css("width",""),(0!==a||this.canBeZeroWidth)&&(t.originalWidth=a),jQuery("#"+n+this.ID_PLACEHOLDER_SUFFIX).remove()},__insertPlaceholder:function(e,t,n){jQuery("#"+n+this.ID_PLACEHOLDER_SUFFIX)[0]||jQuery('<div id="'+n+this.ID_PLACEHOLDER_SUFFIX+'"></div>').css({position:"static",width:"100%",display:"block","vertical-align":"baseline","float":"none",height:t+"px"}).insertAfter(e)},__onScrollDownAfterThreshold:function(e,t,n,a,c){var s=n.windowHeight,o=n.elementHeight;if(e.addClass(this.CSS_FIXED),e.css("width",t.originalWidth),o>s)if(e.removeClass(this.CSS_STICK_TOP),e.hasClass(this.CSS_STICK_BOTTOM)){if(t.containerId){var l=this.__getVisibleContainerHeight(t.containerId),r=s-l;e.css("bottom",Math.max(0,r)+"px")}}else 0>a&&s>o+a?(e.addClass(this.CSS_STICK_BOTTOM),e.css("top","")):e.css("top",a+c);else if(e.removeClass(this.CSS_STICK_BOTTOM),e.hasClass(this.CSS_STICK_TOP)||(0>a?(e.addClass(this.CSS_STICK_TOP),e.css("top",0)):e.css("top",a+c)),t.containerId){var i=this.__getHiddenElementHeight(n,t.containerId);e.css("top",Math.min(0,-i)+"px")}},__getHiddenElementHeight:function(e,t){var n=jQuery("#"+t),a=n.height(),c=this.__getHiddenContainerHeight(t),s=a-e.elementHeight,o=c-s;return o},__getHiddenContainerHeight:function(e){var t=document.getElementById(e);return-t.getBoundingClientRect().top},__getVisibleContainerHeight:function(e){var t,n=document.getElementById(e);return n&&n.getBoundingClientRect()&&(t=n.getBoundingClientRect().bottom),t},__onScrollUpAfterThreshold:function(e,t,n,a,c){var s=n.windowHeight,o=n.elementHeight,l=n.scrollTop,r=n.documentHeight;if(o>s)e.css("width",t.originalWidth),e.addClass(this.CSS_FIXED),e.removeClass(this.CSS_STICK_BOTTOM),e.css("bottom",""),a>=0?e.hasClass(this.CSS_STICK_TOP)||(e.addClass(this.CSS_STICK_TOP),e.css("top",0)):l+s>r?e.css("top",a+c):e.css("bottom",0);else if(t.containerId){var i=this.__getHiddenElementHeight(n,t.containerId);e.css("top",Math.min(0,-i)+"px")}},__getElementHeight:function(e){return e.children().height()+parseInt(e.css("padding-bottom"))+parseInt(e.css("padding-top"))},__getTop:function(e){var t=parseInt(e.css("top"));return isNaN(t)&&(t=e.position().top),t},lazyStickElement:function(e,t,n){var a=jQuery("#"+e),c={jqElement:a,stickyOnlyInParent:t||!1};aria.core.Browser.isIE8||(n!==!1&&a.css("transition",n||"transform 0.5s ease 0.1s"),jQuery(window).on("scroll."+e,null,c,jQuery.proxy(this,"__onLazyStickyScroll")))},__onLazyStickyScroll:function(e){var t=e.data.jqElement,n=e.data.stickyOnlyInParent,a=window.pageYOffset,c=this.__lastPageYOffset<=a;this.__lastPageYOffset=a;var s=this.__calculateScrollDelta(t,c);0!==s&&this.__updateStickyPosition(t,s,n)},__calculateScrollDelta:function(e,t){var n=0;if(this.__isElementHigherThanWindow(e)){var a=e[0].getBoundingClientRect();n=t?this.__calculateScrollDownDelta(a):this.__calculateScrollUpDelta(a)}else n=e[0].getBoundingClientRect().top;return n},__isElementHigherThanWindow:function(e){return e.height()>window.innerHeight},__calculateScrollDownDelta:function(e){var t=0;return e.bottom-window.innerHeight<0&&(t=e.bottom-window.innerHeight),t},__calculateScrollUpDelta:function(e){var t=0;return e.top>=0&&(t=e.top),t},__updateStickyPosition:function(e,t,n){var a=this.__calculateNewTranslateY(e,t,n);this.__setTranslateY(e,a)},__calculateNewTranslateY:function(e,t,n){var a,c=this.__getTranslateY(e),s=c-t,o=0,l=this.__calculateMaxTranslateY(e,n,c);return a=Math.max(s,o),a=Math.min(a,l)},__getTranslateY:function(e){var t,n=0,a=e.css("transform")||"";return 0===a.indexOf("matrix(")?t=a.split(",")[5]:0===a.indexOf("matrix3d(")&&(t=a.split(",")[13]),t&&(n=Number(t.replace(/\)/g,""))),n},__calculateMaxTranslateY:function(e,t,n){var a=document.body.scrollHeight+n+document.body.clientTop-(e[0].getBoundingClientRect().top+window.pageYOffset+e.height()+parseInt(e.css("margin-bottom"))),c=e.parent().height();if(t&&c>0){var s=e.position().top-n;a=Math.max(c-(e.height()+s),0)}return a},__setTranslateY:function(e,t){e.css(aria.core.Browser.isIE9?{transform:"translateY("+t+"px)"}:{transform:"translate3d(0, "+t+"px, 0)"})},setMultipleStickies:function(e,t){var n=$(e),a=$(t);n.addClass("sticky"),Stickyfill.add(n),jQuery(window).on("scroll resize touchmove gesturechange transitionend",this,this._addControlClasses(n,a))},_addControlClasses:function(e,t){var n=this.isSticky;return function(){if(e){var a=0;n(t)&&(a=t.height()+(parseInt(t.css("top"),10)||0)),e.css({top:a}).each(function(){$(this).toggleClass("stuck",this.getBoundingClientRect().top-parseInt($(this).css("top"))<=1)})}}},isSticky:function(e){return e="string"==typeof e?jQuery(e):e,e&&("fixed"===e.css("position")||"sticky"===e.css("position")||"-webkit-sticky"===e.css("position"))},getTop:function(e){if(!e)return 0;var t=parseInt(e.css("top").replace("px",""));return aria.utils.Type.isNumber(t)?e.height()+t:e.height()}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/StringResources.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.StringResources",$dependencies:["plnextv2.utils.I18n"],$singleton:!0,$constructor:function(){this._i18n=plnextv2.utils.I18n,this._context=this._i18n._appContext},$statics:{ADULT:"ADT",INFANT:"INF",CHILD:"CHD",COMPANION:"CMP",GOVERNEMENT:"GVT",MILITARY:"MIL",SPOUSE:"SPS",STUDENT:"STU",STUDENT_FRANCE:"QHH",SENIOR:"YCD",YOUTH:"YTH",YOUNG_ADULT:"B15",HEAD_FAMILY:"HOF",ADULT_COMPANION:"CMA",UNACCOMPANIED_CHILD:"UNN"},$prototype:{getTravellerLabelKey:function(e,t){var n;if(t=t||1,e.messageKey&&t>1)n=this.getLabelfromTravType(e,t);else{var a=this.getTravTypeFromRequest(e);n=this.getLabelfromTravType(a,t)}return n},getTravellerNumberedLabelKey:function(e,t){var n;return t=t||1,n=e.messageKey&&t>1?e:this.getTravTypeFromRequest(e),n.travellerCode&&n.travellerCode.match(/U\d{2}/g)&&(n.travellerCode=this.UNACCOMPANIED_CHILD),this.getNumberedLabelFromTravType(n,t)},getTravTypeFromRequest:function(e){var t=e;return e.listTravellerTypeRequested&&(t=e.listTravellerTypeRequested[0]?e.listTravellerTypeRequested[0].travellerTypeBean:this.getTravTypeFromContext(e)),t},getTravTypeFromContext:function(e){var t=this._context.getPageData().business.TripSummary;return t||(t=this._context.getPageData().business.FareReview.tripSummary),t&&(e=this.getTravTypeFromTypeInfo(e,t)),e},getTravTypeFromTypeInfo:function(e,t){for(var n=t.listTravellerTypeInfo,a=0;a<n.length;a++)n[a].travellerCode===e.travellerCode&&n[a].listTravellerTypeRequested&&n[a].listTravellerTypeRequested[0].travellerTypeBean&&(e=n[a].listTravellerTypeRequested[0].travellerTypeBean);return e},getLabelfromTravType:function(e,t){var n;return n=e.messageKey?this._i18n.getLabel(e.messageKey):2>t?e.singularLabel:e.pluralLabel},getNumberedLabelFromTravType:function(e,t){var n;return n=e.messageKey?this._i18n.getLabel(e.messageKey):2>t?e.numberedSingularLabel:e.numberedPluralLabel},displayDayDifference:function(e){var t="",n="";if(e){var a=parseInt(e,10);a&&(a>0&&(n="+"),t=1===a||-1===a?n+a+" "+this._i18n.getLabel("tx_pltg_text_day"):n+a+" "+this._i18n.getLabel("tx_pltg_text_days"))}return t}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/StringUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.StringUtils",$dependencies:["plnextv2.utils.Symbols","aria.utils.Type"],$singleton:!0,$constructor:function(){this._symbols=plnextv2.utils.Symbols,this._typeUtils=aria.utils.Type},$prototype:{formatString:function(e){return this._typeUtils.isString(e)?0==e.length?this._symbols.NO_DATA:e:this._symbols.NO_DATA},capitalize:function(e,t){if(null==e||0===e.length)return e;var n=this.transformLocaleString(e[0],t,!0);return e.length>1&&(n+=this.transformLocaleString(e.substring(1),t,!1)),n},capitaliseFirstLetter:function(e,t){var n=this.getFirstAlphabeticIndex(e);if(-1!=n){var a=this.transformLocaleString(e.charAt(n),t,!0);e=e.substring(0,n)+a+e.slice(n+1)}return e},getFirstAlphabeticIndex:function(e){for(var t=new RegExp("[a-zA-Z]"),n=-1,a=0;a<e.length;a++)if(t.test(e.charAt(a)))return a;return n},toCamelCase:function(e,t){var n=this;return e.replace(/^([A-Z])|\s(\w)/g,function(e,a,c){return c?n.transformLocaleString(c,t,!0):n.transformLocaleString(a,t,!1)})},decodeHtmlEntity:function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(t)})},toProperCase:function(e,t){var n=this.transformLocaleString(e.charAt(0),t,!0),a=this.transformLocaleString(e.substring(1,e.length),t,!1);return n+a},toSentenceCase:function(e,t){var n=this;return e=void 0===e||null===e?"":e.toString(),e=n.transformLocaleString(e,t,!1),e.replace(/(^|\. *|<br\/>)([a-z])/g,function(e,a,c){var s=n.transformLocaleString(c,t,!0);return a+s})},evaluateUnicodeString:function(e){return unescape(e.replace(/\\/g,"%"))},collapseWhitespace:function(e){return e.replace(/\s+/g," ")},transformLocaleString:function(e,t,n){return this._typeUtils.isString(e)&&this._typeUtils.isBoolean(n)&&(e=n?this._typeUtils.isString(t)?e.toLocaleUpperCase(t):e.toLocaleUpperCase():this._typeUtils.isString(t)?e.toLocaleLowerCase(t):e.toLocaleLowerCase()),e}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/Symbols.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.Symbols",$singleton:!0,$constructor:function(){},$statics:{NO_DATA:"-",PAX_NAME_SEPARATOR:"/",SEGMENT_OD_SEPARATOR:"-",OD_AIRLINE_SEPARATOR:"|",MULTIPLE_AIRLINES_REPLACE:"-",E_DOCUMENT_SEPARATOR:"-",DEFAULT_AMOUNT_FORMAT:"#,###,###,##0.00",FMT_HOURS_MIN:"HHmm"},$prototype:{}});
//*******************
//LOGICAL-PATH:plnextv2/utils/TicketUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.TicketUtils",$dependencies:["plnextv2.utils.Symbols"],$singleton:!0,$constructor:function(){this._symbols=plnextv2.utils.Symbols},$prototype:{formatEDocument:function(e){var t=e;return t.indexOf(this._symbols.E_DOCUMENT_SEPARATOR)<0&&(t=t.substring(0,3)+this._symbols.E_DOCUMENT_SEPARATOR+t.substring(3)),t}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/TimeToThinkUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.TimeToThinkUtils",$dependencies:["plnextv2.utils.DateUtils","plnextv2.utils.PriceUtils"],$singleton:!0,$constructor:function(){this._dateUtils=plnextv2.utils.DateUtils,this._priceUtils=plnextv2.utils.PriceUtils},$prototype:{computeRemainingAmountParams:function(e){var t=null,n=null,a=e.getTotalAmount(!1),c=e.getTimeToThinkPrice();c.expiryDate&&(t=this._dateUtils.formatDateTime(c.expiryDate,this._dateUtils.FORMATS.DURATION_FORMAT_1),n=this._dateUtils.formatDateTime(c.expiryDate,this._dateUtils.FORMATS.SHORT_DATE_FORMAT));var s=this._priceUtils.formatCurrency(a.amount,a.currency,"timetothink-message-currency","timetothink-message-amount");return[s,t,n]}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/UpgradeUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.UpgradeUtils",$singleton:!0,$statics:{ALREADY_UPGRADED:"ALREADY_UPGRADED",ELIGIBLE:"ELIGIBLE",UPGRADE_STATUS_I:"I",UPGRADE_STATUS_G:"G"},$prototype:{isAlreadyUpgraded:function(e){return e&&e.upgradeData?e.upgradeData.alreadyUpgradedStatus===this.ALREADY_UPGRADED:!1},isSegmentEligible:function(e){return e&&e.upgradeData?e.upgradeData.globalStatus===this.ELIGIBLE:!1},isSegmentFlown:function(e){return e&&e.upgradeData?e.upgradeData.alreadyFlownStatus:!1},isUpgradeEligible:function(e){return e?e.globalStatus===this.ELIGIBLE:!1},getFareInfo:function(e,t){if(e.price&&e.price.fareInformation){var n=e.price.fareInformation;if(n[t])return n[t].value}return 0},getTotalFareInfo:function(e,t){var n=0;for(var a in e.upgradesBySegment)if(!plnextv2.utils.CustomAriaUtils.isMetadata(a)){var c=e.upgradesBySegment[a];c.selectedCabinCode!==c.currentCabinCode&&this.isUpgradeEligible(c)&&(n+=this.getFareInfo(c.upgradesByCabin[c.selectedCabinCode],t))}return n}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/UpsellUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.UpsellUtils",$dependencies:["plnextv2.utils.I18n","plnextv2.utils.storage.SessionStorageManager"],$singleton:!0,$statics:{STORAGE_AUTOUPSELL_CONTEXT:"AutoUpsell",STORAGE_AUTOUPSELL_PERFORMED:"AutoUpsellPerformed",STORAGE_AUTOUPSELL_ORIGINAL_FF:"AutoUpsellOriginalFF",STORAGE_AUTOUPSELL_UPGRADE:"IsUpgrade",AUTOUPSELL_VALUES:{NONE:"NONE",LOWER_CLASS:"LOWER",HIGHER_CLASS:"HIGHER",HIGHER_THEN_LOWER:"HIGHER_THEN_LOWER"},DEFAULT_IMAGE_PATH:"img/upsell_teaser_1.jpg",DEFAULT_TEMPLATE:'    <div class="fare-upsell-teaser-template">            \n            <div class="teaser-image-container col-sm-8">\n                    <figure class="segment-upsell-teaser-photo fare-upsellteaser-photo-itinerary">\n                        <img class="teaser-image" style="max-height: 100%; left: -10%" src="{10}">\n                    </figure>\n            </div>           \n            <div class="section2 col-xs-24 col-sm-16">\n                    <h2 class="col-xs-24 upsellteaser-heading-2">\n                    <div class="upsellteaser-current-fare col-xs-24" aria-hidden="true">\n                        Do you need more comfort and services?\n                    </div>\n<div class="upsellteaser-target-fare col-xs-24 upsellteaser-padding" aria-hidden="true">\n Upgrade to <strong class="upsellteaser-target-fare-name" style="color:#6a3492">{1} {2}</strong> \n                    </div>                    \n<strong class="plnext-sr-only"> Do you need more comfort and services? Upgrade to {1} </strong> \n                    </h2>\n                    <div class="upsellteaser-price-box col-xs-24">\n                        <strong class="upsellteaser-plus">+</strong> <strong class="upsellteaser-price-difference">{0}</strong> <strong class="upsellteaser-currency">{9} {4} </strong>\n                    </div>                  \n                    <div class="upsellteaser-sub-text col-xs-24 upsellteaser-padding">Price including taxes and fees for all the flights</div>\n            </div>\n        </div> '},$constructor:function(){this._i18nUtils=plnextv2.utils.I18n,this.sessionStorageManager=plnextv2.utils.storage.SessionStorageManager},$prototype:{getRecoTotalAmount:function(e){return this.getRecoAmount(e).totalAmount},getRecoAmount:function(e){return e.recoAmount},getReco:function(e,t){for(var n=0;n<e.length;n++)if(e[n].recoId===t)return e[n];return-1},getPriceDiff:function(e,t){var n=this.getRecoTotalAmount(e),a=this.getRecoTotalAmount(t);return a-n},getUpFareDescription:function(e,t,n){for(var a=0;a<e.length;a++)if(e[a].originFfCode===t&&e[a].destinationFfCode===n)return e[a].teaserDescription||e[a].description;return this.DEFAULT_TEMPLATE},getUpsellTeaserLink:function(e,t){return e?'<a href="'+e+'" target="_blank"><span aria-hidden="true">'+this._i18nUtils.getLabel("tx_pltg_text_MoreInfoUpsell")+'</span> <span class="icon-external-link" aria-hidden="true" title="'+this._i18nUtils.getLabel("tx_pltg_text_OpenNewWindow")+'"></span> <span class="plnext-sr-only">'+this._i18nUtils.getStringFromPattern("tx_pltg_pattern_MoreInfoUpsell",[t])+'</span><span class="plnext-sr-only">'+this._i18nUtils.getLabel("tx_pltg_text_OpenNewWindow")+"</span></a>":""},isMatched:function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<t.length;n++){var a=t[n].flightGroupList;if(parseInt(e[n].flightIndex)!==parseInt(a[0].flightId))return!1}return!0},getUpsellRecoId:function(e,t,n){for(var a=0;a<e.length;a++)if(e[a].ffCode===n)for(var s=e[a].journeys,c=0;c<s.length;c++){var o=s[c].boundList;if(this.isMatched(t,o))return a}return-1},getAutoUpsellCellInfo:function(e){for(var t=null,n=0,a=e.outboundFlightRecos.filter(function(t){return-1!==e.inboundCell.recommendationsIndex.indexOf(t)}),s=0;s<a.length;s++){var c=e.recommendations[a[s]],o=e.getFareFamilyIndexFn.call(e.getFareFamilyIndexFnScope,c.bounds[0].ffCode),l=this._getCurrentFFDifference(e.autoUpsellConfig,o,e.outboundCell.fareFamilyIndex,n);0!==l&&(n=l,t={boundIndex:0,fareFamilyIndex:o,flightIndex:e.outboundCell.flightIndex,recommendationIndex:a[s],isUpgrade:0>l},upsellBoundAmount=c.bounds[0].boundAmount)}return t},isAnyCellAutoUpsellable:function(e){var t=!1;for(var n in e.inboundCells)if(e.inboundCells.hasOwnProperty(n)){var a=e.inboundCells[n];-1!==a.currentBestRecommendationIndex||t||(e.inboundCell=a,t=null!=this.getAutoUpsellCellInfo(e))}return t},_getCurrentFFDifference:function(e,t,n,a){var s=n-t,c=this._isCurrentRecoAcceptableForAutoUpsell(e,t,n),o=this._isCurrentFFBestMatch(e,a,s);return c&&o||(s=0),s},_isCurrentRecoAcceptableForAutoUpsell:function(e,t,n){return e===this.AUTOUPSELL_VALUES.LOWER_CLASS&&n>t||e===this.AUTOUPSELL_VALUES.HIGHER_CLASS&&t>n||e===this.AUTOUPSELL_VALUES.HIGHER_THEN_LOWER&&t!==n},_isCurrentFFBestMatch:function(e,t,n){var a=!1;return 0===t?a=!0:e===this.AUTOUPSELL_VALUES.HIGHER_THEN_LOWER?n>0?a=t>n:0>n&&(a=t>0||n>t):a=t>Math.abs(n),a},isAutoUpsellUpgrade:function(){return this.sessionStorageManager.get(this.STORAGE_AUTOUPSELL_UPGRADE,this.STORAGE_AUTOUPSELL_CONTEXT)},getAutoUpsellOriginalFF:function(){return this.sessionStorageManager.get(this.STORAGE_AUTOUPSELL_ORIGINAL_FF,this.STORAGE_AUTOUPSELL_CONTEXT)},deleteAutoUpsellSessionInfo:function(){this.sessionStorageManager.set(this.STORAGE_AUTOUPSELL_ORIGINAL_FF,null,this.STORAGE_AUTOUPSELL_CONTEXT),this.sessionStorageManager.set(this.STORAGE_AUTOUPSELL_UPGRADE,null,this.STORAGE_AUTOUPSELL_CONTEXT)},isAutoUpsellPerformed:function(){return 1==this.sessionStorageManager.get(this.STORAGE_AUTOUPSELL_PERFORMED,this.STORAGE_AUTOUPSELL_CONTEXT)},setAutoUpsellPerformed:function(e){this.sessionStorageManager.set(this.STORAGE_AUTOUPSELL_PERFORMED,e,this.STORAGE_AUTOUPSELL_CONTEXT)},resetAutoUpsellPerformed:function(){this.sessionStorageManager.set(this.STORAGE_AUTOUPSELL_PERFORMED,null,this.STORAGE_AUTOUPSELL_CONTEXT)},saveAutoUpsellInfo:function(e,t,n){this.sessionStorageManager.set(this.STORAGE_AUTOUPSELL_ORIGINAL_FF,e,this.STORAGE_AUTOUPSELL_CONTEXT),this.sessionStorageManager.set(this.STORAGE_AUTOUPSELL_ORIGINAL_FF_INDEX,t,this.STORAGE_AUTOUPSELL_CONTEXT),this.sessionStorageManager.set(this.STORAGE_AUTOUPSELL_UPGRADE,n,this.STORAGE_AUTOUPSELL_CONTEXT)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/UrlUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.UrlUtils",$dependencies:["plnextv2.utils.context.AppContext"],$singleton:!0,$statics:{REGEXP_HTTP:/^(https?:\/\/|www)/gi},$constructor:function(){this._baseUrl=null,this._appContext=plnextv2.utils.context.AppContext,window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""))},$prototype:{urlFor:function(e){return this.isAbsoluteUrl(e)?null:this.isAbsoluteUrl(e)?e:void 0!==e?0===e.indexOf("#")?window.location.origin+window.location.pathname+e:(0===e.indexOf("/")&&(e=e.substr(1,e.length-1)),this._baseUrl+e):void 0},getBaseUrl:function(){return this._baseUrlExists()?this._baseUrl:null},_baseUrlExists:function(){return this._baseUrl=aria.utils.Path.resolve("config.links.baseUrl",this._appContext.getAppData()),this._baseUrl?!0:(this.$logError("BaseUrl has not been set"),!1)},extractAction:function(e){var t=/\/?(([a-z]|[A-Z]|\d|_|\.)*)(\?.*)?$/g,n=t.exec(e);return n[1]},extractParamString:function(e){var t=/\/?(([a-z]|[A-Z]|\d|_|\.)*)(\?[^#]*)?(#.*)?$/g,n=t.exec(e);return n[3]},isAbsoluteUrl:function(e){var t=/^(https?:\/\/|www)/gi,n=t.test(e);return n},getPlnextTag:function(){var e=aria.core.DownloadMgr.resolveURL(this.$classpath);return e.match(/[^\/]+\/\/[^\/]+\/[^\/]+\/[^\/]+\/([^\/]+)/)[1]},getPlnextVersion:function(){var e=this.getPlnextTag(),t=e.match(/[0-9\.]+(?:_[a-z]+|)/i);return t&&t.length>0?t[0]:""}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/WaitlistUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.WaitlistUtils",$singleton:!0,$statics:{WAITLIST_STATUS:["L","0","W"]},$prototype:{isWaitlistAvailableForSegment:function(e){if(e&&e.listCabin)for(var t=0;t<e.listCabin.length;t++)if(e.listCabin[t].isWaitlisted||this.isWaitlistStatus(e.listCabin[t].status))return!0;return!1},isWaitlistAvailableForBound:function(e){if(e){if(e.isWaitlisted)return!0;for(var t=0;t<e.listSegment.length;t++){var n=e.listSegment[t];if(this.isWaitlistAvailableForSegment(n))return!0}}return!1},isWaitlistStatus:function(e){return this.WAITLIST_STATUS.indexOf(e)>=0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/aaas/AAASDiscountUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.aaas.AAASDiscountUtils",$singleton:!0,$dependencies:["plnextv2.utils.CatalogServicesUtils"],$constructor:function(){this.CatalogUtils=plnextv2.utils.CatalogServicesUtils},$prototype:{isThereAnyDiscountInCategories:function(e,t){for(var n=0;n<t.length;n++)if(this.isThereAnyDiscountInCategory(e,t[n]))return!0;return!1},isThereAnyDiscountInCategory:function(e,t){for(var n=t.services,a=0;a<n.length;a++)if(this._isThereAnyDiscountInService(e,n[a]))return!0;return!1},_isThereAnyDiscountInServicesForElement:function(e,t,n){for(var a=0;a<t.length;a++)if(this._isThereAnyDiscountInServiceForElement(e,t[a],n))return!0;return!1},_isThereAnyDiscountInService:function(e,t){if(this.CatalogUtils.isSeatmapService(t))return this._isThereAnyDiscountInAllEligibilities(t);for(var n=this.CatalogUtils.getElementIdsForService(t),a=this.CatalogUtils.getPassengerIdsForService(t),s=0;s<n.length;s++)if(this._isThereAnyDiscountInServiceForElementAndPassengers(e,t,n[s],a))return!0;return!1},_isThereAnyDiscountInAllEligibilities:function(e){if(e.eligibilityGroups)for(var t=0,n=e.eligibilityGroups.length;n>t;t++){var a=e.eligibilityGroups[t];if(a.priceInfo&&this.isPriceDiscounted(a.priceInfo.cash))return!0}return!1},_isThereAnyDiscountInServiceForElement:function(e,t,n){var a=this.CatalogUtils.getPassengerIdsForService(t);return this._isThereAnyDiscountInServiceForElementAndPassengers(e,t,n,a)},_isThereAnyDiscountInServiceForElementAndPassengers:function(e,t,n,a){for(var s=e?e.data.serviceSelection:null,o=this.CatalogUtils.getEligibilitiesForServiceAndPassengers(t,n,a,s),c=0;c<o.length;c++){var l=o[c],r=this.CatalogUtils.getEligibilityGroupFromEligibility(t,l);if(r.priceInfo&&this.isPriceDiscounted(r.priceInfo.cash)){var i=this.isEligibilityPaid(e,t,l.eligibilityKey,l.passengerIds[0]);if(!i)return!0}}return!1},isEligibilityPaid:function(e,t,n,a){var s=t.code,o=t.categoryCode,c=e.moduleCtrl.getServiceIndex(o,s,a,n),l=e.moduleCtrl.getServiceInSelection(o,s,n,c);return l&&!l.isAdded?!0:!1},isPriceDiscounted:function(e){return e&&e.discountInformation&&e.discountInformation.nonDiscountedTotalAmount&&e.discountInformation.nonDiscountedTotalAmount>0?!0:!1},getDiscountReason:function(e){var t=aria.utils.Path.describe(e,"discountInformation.discountReasons[0].discountReason");return t?t.value:""},getCategoryDiscountClass:function(e,t){return this._getDiscountClass(this.isThereAnyDiscountInCategory(e,t))},getServiceDiscountClassForElement:function(e,t,n){return this._getDiscountClass(this._isThereAnyDiscountInServiceForElement(e,t,n))},getSubcategoryDiscountClassForElement:function(e,t,n){return this._getDiscountClass(this._isThereAnyDiscountInServicesForElement(e,t,n))},getDiscountClassForPrice:function(e){return this._getDiscountClass(this.isPriceDiscounted(e))},_getDiscountClass:function(e){return e?"discount-container-overlay":""},getDiscountReasonToDisplay:function(e,t,n){var a=this.getDiscountReason(t),s=this.getDiscountReason(e),o=n&&n.data.config.displayDiscountReasonUnderService;return a!==s||o?s:""}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/aaas/AAASMinimumPriceUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.aaas.AAASMinimumPriceUtils",$singleton:!0,$dependencies:["plnextv2.utils.CatalogServicesUtils"],$constructor:function(){this.CatalogServicesUtils=plnextv2.utils.CatalogServicesUtils,this._catalogConstants=plnextv2.components.catalogServices.desktop.controller.DCatalogServicesConstants},$prototype:{getMinimumPrice:function(e,t,n){return e.typeElement===this._catalogConstants.TYPE_CATEGORY?this._getMinimumPriceForCategory(e.element,t,n):e.typeElement===this._catalogConstants.TYPE_SERVICE?this._getMinimumPriceForServiceAndElement(e.element,e.elementId,t,void 0,n):e.typeElement===this._catalogConstants.TYPE_SUBCATEGORY?this._getMinimumPriceForSubCategory(e.services,e.elementId,t,n):void 0},getCashMinimumPriceForService:function(e,t,n){return this._getMinimumPriceForServiceAndElement(e,t,this._catalogConstants.PRICE_IN_CASH,void 0,n)},_getMinimumPriceForServiceAndElement:function(e,t,n,a,s){for(var o=this.CatalogServicesUtils.getPassengerIdsForService(e),c=this.CatalogServicesUtils.getEligibilitiesForServiceAndPassengers(e,t,o,s),l=0;l<c.length;l++){var i=c[l],r=this.CatalogServicesUtils.getEligibilityGroupFromEligibility(e,i);if(n===this._catalogConstants.PRICE_IN_CASH){var d=r.priceInfo&&r.priceInfo.cash?r.priceInfo.cash:null;this._isCashPriceLowerThanMinPrice(d,a)&&(a=d)}else if(n===this._catalogConstants.PRICE_IN_MILES){var f=r.priceInfo&&r.priceInfo.miles?r.priceInfo.miles:null;this._isMilesPriceLowerThanMinPrice(f,a)&&(a=f)}}return a},_getMinimumPriceForCategory:function(e,t,n){for(var a,s=e.services,o=0;o<s.length;o++)for(var c=s[o],l=this.CatalogServicesUtils.getElementIdsForService(c),i=0;i<l.length;i++)a=this._getMinimumPriceForServiceAndElement(c,l[i],t,a,n);return a},_getMinimumPriceForSubCategory:function(e,t,n,a){for(var s,o=0;o<e.length;o++)s=this._getMinimumPriceForServiceAndElement(e[o],t,n,s,a);return s},_isCashPriceLowerThanMinPrice:function(e,t){return"undefined"==typeof t||null===e||null!==t&&e.totalAmount<t.totalAmount},_isMilesPriceLowerThanMinPrice:function(e,t){return!t||e&&e.otherCurrencyAmount.totalAmount<t.otherCurrencyAmount.totalAmount}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/addressForm/AddressForm.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/formComponent/FormMacro.tml"),require("plnextv2/utils/addressForm/AddressFormScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.addressForm.AddressForm",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$AddressFormScript.constructor.call(this)},$destructor:function(){this.$AddressFormScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_renderAddressName:function(widget,parentTemplate,parentModel,options){try{with(this)this.macro_renderAddressField(widget,parentTemplate,parentModel,{formGroupConfig:{attributes:{classList:["col-xs-8","col-sm-8","col-md-8","address-max-width-full"]}}},{labelConfig:{attributes:{classList:["fontWeightBold"]}}},options)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderAddressName",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderCompanyName:function(widget,parentTemplate,parentModel,options){try{with(this)this.macro_renderAddressField(widget,parentTemplate,parentModel,{formGroupConfig:{attributes:{classList:["col-xs-8","col-sm-8","col-md-8","address-max-width-full"]}}},{labelConfig:{attributes:{classList:["fontWeightBold"]}}},options)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderCompanyName",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderAddressFirstLine:function(widget,parentTemplate,parentModel,options){try{with(this)this.macro_renderAddressField(widget,parentTemplate,parentModel,{formGroupConfig:{attributes:{classList:["col-xs-24","col-sm-24","col-md-24","address-max-width-full"]}}},{labelConfig:{attributes:{classList:["fontWeightBold"]}}},options)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderAddressFirstLine",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderAddressSecondLine:function(widget,parentTemplate,parentModel,options){try{with(this)this.macro_renderAddressField(widget,parentTemplate,parentModel,{formGroupConfig:{attributes:{classList:["col-xs-24","col-sm-24","col-md-24","address-max-width-full"]}}},null,options)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderAddressSecondLine",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderPostalCode:function(widget,parentTemplate,parentModel,options){try{with(this)this.macro_renderAddressField(widget,parentTemplate,parentModel,{formGroupConfig:{attributes:{classList:["col-xs-24","col-sm-24","col-md-8","address-max-width-small"]}}},{labelConfig:{attributes:{classList:["fontWeightBold","no-wrap-text"]}}},options)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderPostalCode",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderCity:function(widget,parentTemplate,parentModel,options){try{with(this)this.macro_renderAddressField(widget,parentTemplate,parentModel,{formGroupConfig:{attributes:{classList:["col-xs-24","col-sm-24","col-md-12","address-max-width-large"]}}},{labelConfig:{attributes:{classList:["fontWeightBold"]}}},options)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderCity",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderCountry:function(widget,stateWidget,parentTemplate,parentModel,options){try{with(this)this.macro_renderAddressField(widget,parentTemplate,parentModel,{formGroupConfig:{attributes:{classList:["col-xs-24","col-sm-24","col-md-10","address-max-width-medium"]}}},{labelConfig:{attributes:{classList:["fontWeightBold"]}}},__injectCountryOptions(options,widget,stateWidget,parentModel,parentTemplate))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderCountry",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderRecipientName:function(widget,parentTemplate,parentModel,options){try{with(this)this.macro_renderAddressField(widget,parentTemplate,parentModel,{formGroupConfig:{attributes:{classList:["col-xs-24","col-sm-24","col-md-24","address-max-width-full"]}}},{labelConfig:{attributes:{classList:["fontWeightBold"]}}},options)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderRecipientName",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderBRN:function(widget,parentTemplate,parentModel,options){try{with(this)this.macro_renderAddressField(widget,parentTemplate,parentModel,{formGroupConfig:{attributes:{classList:["col-xs-24","col-sm-24","col-md-24","address-max-width-full"]}}},null,options)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderBRN",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderState:function(widget,countryWidget,parentTemplate,parentModel,options){try{with(this)this.__$insertSection(94,{id:"stateSection",type:"span",macro:{name:"printStateSelect",args:[widget,countryWidget,parentTemplate,parentModel,options],scope:this},bindRefreshTo:[{to:countryWidget.name,inside:parentModel}]})}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderState",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printStateSelect:function(widget,countryWidget,parentTemplate,parentModel,options){try{with(this)this.__$write(this.$modifier("eat",[__populateStates(parentModel,parentModel[countryWidget.name],widget)]),110),widget.options.length>0&&this.macro_renderAddressField(widget,parentTemplate,parentModel,{formGroupConfig:{attributes:{classList:["col-xs-24","col-sm-24","col-md-10","address-max-width-medium"]}}},{labelConfig:{attributes:{classList:["fontWeightBold"]}}},options)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printStateSelect",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderAddressTitle:function(title){try{with(this)this.__$write('\n<h3 class="address-title">',121),this.__$write(title,121),this.__$write("</h3>\n",121)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderAddressTitle",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderAddressField:function(widget,template,parentModel,formGroupConfig,labelConfig,options){try{with(this)this.formLib.macro_formGroupStart(widget,formGroupConfig),this.formLib.macro_formLabel(widget,template,labelConfig),this.formLib.macro_formWidget(widget,parentModel,template,options),this.formLib.macro_formError(widget,template),this.formLib.macro_formGroupEnd()}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderAddressField",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={formLib:"plnextv2.utils.formComponent.FormMacro"},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.addressForm.AddressFormScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/addressForm/AddressFormScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.addressForm.AddressFormScript",$constructor:function(){this.$json=aria.utils.Json,this._i18n=plnextv2.utils.I18n},$destructor:function(){},$prototype:{setCountryStateMap:function(e){this.countryStateMap=e},__injectCountryOptions:function(e,t,n,a,s){e||(e={});var o={onBlur:[{fn:"onCountryChange",scope:this,args:[a,t,n,s]}],onChange:[{fn:"onCountryChange",scope:this,args:[a,t,n,s]}]};return this.$json.inject(o,e),e},__resetStateOptions:function(e,t){t&&(this.$json.splice(t.options,0,t.options.length),this.$json.setValue(e,t.name,"-"))},__populateStates:function(e,t,n){var a=this.__getCountryIndex(t);if(-1!=a){var s=this.countryStateMap[a].states,o=[],c=!1,l={value:"-",labelI18nKey:"tx_pltg_text_BillingStateDefaultSelect",label:"-"};o.push(l);for(var r=0;r<s.length;r++){var i=s[r].stateCode,d=s[r].stateName,f={value:i,labelI18nKey:d,labelI18nValue:d,label:i};o.push(f),i===e.State&&(c=!0)}c||this.__resetStateOptions(e,n),this.$json.setValue(n,"options",o),this.$json.setValue(n,"skipValidation",!1)}else this.$json.setValue(n,"skipValidation",!0),this.$json.setValue(n,"errorCode",void 0),this.__resetStateOptions(e,n)},__getCountryIndex:function(e){for(var t=0;t<this.countryStateMap.length;t++)if(this.$json.getValue(this.countryStateMap[t],"country")==e)return t;return-1},onCountryChange:function(e,t){var n=t[0],a=t[1],s=(t[2],t[3]),o=t[1].htmlId,c=aria.utils.Dom.getElementById(o);if(c&&null!=c&&c.selectedIndex&&c[c.selectedIndex]){var l=c[c.selectedIndex].value;this.$json.setValue(n,a.name,l)}s.updateAddressWarning(!0)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/analytics/AnalyticsUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.analytics.AnalyticsUtils",$dependencies:["plnextv2.utils.GlobalLists","plnextv2.utils.CustomAriaUtils","plnextv2.utils.storage.SessionStorageManager","plnextv2.utils.storage.LocalStorageManager","aria.utils.Array","plnextv2.analytics.schemes.DigitalDataScheme","plnextv2.utils.widgets.plnextLib.navigationManager.PlnextNavigationManager","plnextv2.utils.DateUtils","aria.utils.Type"],$singleton:!0,$statics:{EVENT:{CLICK_NEXT_STEP:1e3,CLICK_WEEK:1001,CLICK_SELECT_DAY:1002,CLICK_COMPARISON:1003,CLICK_FARE_FAMILY_DESCRIP:1004,CLICK_SHOW_FLIGHT_DETAILS:1005,CLICK_FARE:1006,SORT_TYPE:1007,CLICK_FILTER:1008,CLICK_MODE_DETAILS_FARE_FAMILY:1009,CLICK_TEASER_UPGRADE:1010,SHOW_MORE_FLIGHTS:1011,CLICK_MERGED_FLOW:1012,CLICK_SHOW_RBD:1015,CLICK_TOGGLE_PREVIOUS_SEGMENT:1016,SELECT_CALENDAR_AUTOCOMPLETE:1017,SELECT_SPLIT_TRAVELLER:1018,CLICK_SELECT_FLIGHT:1019,CLICK_CHANGE_FLIGHT:1020,CLICK_CONFIRM_CHANGE_FARE:1021,CLICK_CANCEL_CHANGE_FARE:1022,SHOW_TEASER_UPGRADE:1023,CLICK_SEARCHBAR_MODIFY:2001,CLICK_SEARCHBAR_HIDE:2002,CLICK_SEARCHBAR_SEARCH:2003,CLICK_FARE_FAMILY_DESC_TRIP_SUMM:3001,CLICK_FARE_REVIEW:3002,CLICK_FARE_CONDITIONS:3003,CLICK_PURCHASE_CONDITIONS:3004,CLICK_BAGGAGE_POLICY:3005,CLICK_TRIP_NOTES:3006,CLICK_FARE_BASIS_INFORMATION:3007,CLICK_BOOKING_DETAILS:3008,SHOW_FARE_CONDITIONS_PANEL:3009,CLOSE_FARE_CONDITIONS_PANEL:3010,CLICK_FARE_FAMILY_DESC_DIALOG:4001,CLICK_FARE_TAX_DETAILS:4002,ADDITIONAL_INFORMATION_CLICK:5e3,REMEMBER_MY_DETAILS_CLICK:5001,ADDITIONAL_SERVICES_CLICK:5002,GO_TO_APIS_CLICK:5003,COPY_ADDRESS_CLICK:5004,ADD_PERSONAL_INFORMATION_CLICK:5005,ADD_REDRESS_NUMBER_CLICK:5006,ADD_ID_DOCUMENT_CLICK:5007,ADD_VISA_CLICK:5008,ADD_DESTINATION_ADDRESS_CLICK:5009,SMS_CHECKBOX_CLICK:5010,FREQUENT_FLYER_CLICK:5011,ADD_FREQUENT_FLYER_CLICK:5012,REMOVE_FREQUENT_FLYER_CLICK:5013,EMAIL_CHECKBOX_CLICK:5014,ADD_RESIDENCE_ADDRESS_CLICK:5015,KNOWN_TRAVELLER_NUMBER_CLICK:5016,MODIFY_PASSENGER:5050,VALIDATE_BUTTON:5051,MODIFY_PASSENGERS:5052,TRAVELLER_COPY_PROFILE:5053,TRAVELLERLIST_IDEN_TITLECODE:5001,TRAVELLERLIST_IDEN_FIRSTNAME:5002,TRAVELLERLIST_IDEN_LASTNAME:5003,TRAVELLERLIST_IDEN_MIDDLENAME:5004,TRAVELLERLIST_IDEN_NATIONALITY:5005,TRAVELLERLIST_DATEYEAR:5006,TRAVELLERLIST_DATEMONTH:5007,CLICK_OPEN_SERVICE:7001,CLICK_ADD_SERVICE:7002,CLICK_REMOVE_SERVICE:7003,VALIDATE_SERVICE_INPUT:7004,CLICK_VALIDATE_SERVICE:7005,CLICK_CANCEL_SERVICE:7006,CLICK_SELECT_INS:8001,CLICK_SELECT_MOP:8002,CLICK_SELECT_INSTALLMENT:8003,CLICK_SELECT_INSTALL:8004,CLICK_SELECT_DCC:8005,CLICK_PROMOTION_OK:8006,CLICK_PROMOTION_CANCEL:8007,SELECT_MILES_AND_CASH:8008,CLICK_REMOVE_INS:8009,CLICK_POPUP_INS:8010,CLICK_POPUP_CURRENCY_CONVERTER:8010,CURRENCY_CONVERTED_VALUE:8011,PAGE_LOAD:9e3,PAGE_VIEW:9001,BUDGET_FILTER:10001,FAVORITE_DAYS_DEP:10002,FAVORITE_DAYS_RET:10003,NEXT_DAYS:10004,PREVIOUS_DAYS:10005,RESET_FILTERS:10006,CLICK_DAY:10007,PREFERRED_CABIN:10008,PRICING_OPTION:10009,EVENT_CALENDAR_MATRIX_NEXT_DAYS:10100,EVENT_CALENDAR_MATRIX_PREVIOUS_DAYS:10200,EVENT_DISPLAY_AAAS_PACK:12004,DATA_ERROR:11001,GLOBAL_ERROR:11002,TIMEOUT_DISPLAYED:11005,TIMEOUT_CLOSED:11006,NAVIGATION:11009,PAGE_BLOCKED:11010,NAVIGATION_NOT_ALLOWED:11011,REDIRECT_EXTERNAL_PAYMENT:13001,PAYMENT_RESULT:13002,RESPONSE_TIME:17001,CLICK_ATC_INVOL_AVAIL:11001,CLICK_INVOL_VALIDATE_CHOICE:11002,CLICK_TOGGLE_OLD_FLIGHT:11003,CLICK_YES_KEEP_FLIGHT:11004,CLICK_NO_CHANGE_FLIGHT:11005,CLICK_DONT_FIND_ANY_FLIGHT:11006,CLICK_PROPOSED_FLIGHT:11007,CLICK_PREVIOUS_NEXT_DAYS:11008,DISRUPTION_ACKNOWLEDGE:16001,DISRUPTION_SEARCH_ALTERNATIVES:16002,DISRUPTION_VALIDATE:16003,DISRUPTION_CONTACT:16004,DYNAMIC_WAIVER_SEARCH_ALTERNATIVES:16005,ACKNOWLEDGEMENT_ACKNOWLEDGE:16006,CHECK_UPGRADE_OFFERS:16007,MODIFY_FLIGHTS_UPGD_TEASER:16008,SELECT_SEGMENT_UPGRADE:16009,CONFIRM_SEGMENT_UPGRADE:16010,SELECT_MILES_AND_CASH_UPGD:16011,UPDATE_UPGD_FROM_PURC:16012,FLIGHTS_UPGD_TEASER_SHOWN:16013,DISRUPTION_CONTACT_DIALOG:16014,CLICK_REBOOKING:14001,CLICK_REFUND:15001,LEAVING:19e3,IGNORE_CHANGES:18100,UPGRADE_FF_FROM_RESTR_MODAL:20001,ACCEPT_RESTR_FROM_RESTR_MODAL:20002,DISPLAY_DISCLAIMER:20003,CLICK_ADDITIONAL_PROTECTION:20004},ACTIVATED_EVENT_LIST:[],EVENT_COMPONENT:{TRIP_SUMMARY:"TripSummary",SEARCH_BAR:"SearchBar",SEARCH_BAR_ADVANCED:"SearchBarAdvanced",PAGE:"Page",CALENDAR_TAB:"calendarTab",AVAILABILITY_SCHEDULE:"availabilitySchedule",CALENDAR_AUTO_COMPLETE:"calendarAutoComplete",SPLIT_TRAVELLER_SELECTION:"splitTravellerSelection",COMPLEX_ITINERARY:"complexItinerary",ITINERARY:"availability",SB_TEASER:"sbTeaser",COMMON_RESERVATION_DETAILS:"CommonReservationDetails"},EVENT_NAME:{CONTINUE:"Continue",NEW_SEARCH:"NewSearch",COMPARE_FARE_FAMILY:"CompareFareFamily",BOOKING_DETAILS:"BookingDetails",SELECT_FLIGHT:"SelectFlight",SORT_RECOMMENDATION:"SortRecommendation",FILTER_RECOMMENDATION:"FilterRecommendation",FARE_FAMILY_DETAILS:"FareFamilyDetails",FLIGHT_UPSELL:"FlightUpsell",AAAS_CATALOG:"AAASCatalog",AAAS_POPUP:"AAASPopUp",ADD_PRODUCT:"AddProduct",REMOVE_PRODUCT:"RemoveProduct",INSURANCE_POPUP:"InsurancePopup",INPUT_VALIDATION:"InputValidation",ABANDON:"Abandon",SHOW_MORE_FLIGHTS:"ShowMoreFlights",PAYMENT:"Payment",PROMOTION:"Promotion",ERROR:"Error",EXTERNAL_PAYMENT:"ExternalPayment",PAYMENT_RESULT:"PaymentResult",RESPONSE_TIME:"ResponseTime",MODIFY_FLIGHT:"ModifyFlight",PRICING_OPTION:"PricingOption",PREFERRED_CABIN:"PreferredCabin",ESPECIAL_OFFER:"SpecialOffer",DYNAMIC_WAIVER:"DynamicWaiver",DISRUPTION:"Disruption",ACKNOWLEDGEMENT:"Acknowledgement",REBOOKING:"Rebooking",REFUND:"Refund",MILES_AND_CASH:"MilesAndCash",PAGE_LOAD:"PageLoad",TIMEOUT:"Timeout",TRAVELLER_DETAILS:"TravellerDetails",MODIFY_PASSENGERS:"ModifyPassengers",IGNORE_CHANGES:"IgnoreChanges",SHOW_RBD:"ShowRBD",TOGGLE_PREVIOUS_SEGMENT:"TogglePreviousSegment",SELECT_CALENDAR_AUTOCOMPLETE:"SelectCalendarAutocomplete",CURRENCY_CONVERTER:"currencyConverter",PAGE_VIEW:"PageView",SELECT_SPLIT_TRAVELLER:"SelectSplitTraveller",EXTERNAL_LOGIN:"ExternalLogin",CLICK_CELL:"ClickCell",NAVIGATION:"Navigation",FF_RESTR_MODAL_UPGD:"UpgradeFareFamilyFromRestrictionsModal",FF_RESTR_MODAL_ACCEPT:"AcceptFareFamilyRestrFromRestrictionsModal",CHECK_UPGRADE_OFFERS:"CheckUpgradeOffers",MODIFY_FLIGHTS_UPGD_TEASER:"ModifyFlightsUpgradeTeaser",SELECT_SEGMENT_UPGRADE:"SelectSegmentUpgrade",CONFIRM_SEGMENT_UPGRADE:"ConfirmSegmentUpgrade",SELECT_MILES_AND_CASH_UPGD:"SelectMilesAndCashForUpgrade",UPDATE_UPGD_FROM_PURC:"UpdateUpgradesFromPURC",FLIGHTS_UPGD_TEASER_SHOWN:"FlightUpgradeTeaserShown",SEARCH_BAR:"SearchBar",COLLAPSABLE_FLIGHTS_PANEL:"CollapsableFlightsPanel",FLIGHT_VIEWERS:"FlightViewers",BOUND_VIEWERS:"BoundViewers",CAR_TEASER_DISCLAIMER:"CarTeaserDisclaimer"},EVENT_LABEL:{CLICK_WEEK:"+/-x days",CLICK_DAY:"Departure/Return,PreviousDay,PreviousPrice,NewDay,NewPrice,isWaived",FARE_FAMILY_CODE:"FareFamilyCode,FareFamilySelected,PriceSelected,DepartureDate",FARE_FAMILY_CODE_TRIP:"FareFamilyCode",CLICK_CELL:"SelectedFareFamily,SelectedPrice,CheapestFareFamily,CheapestPrice,DepartureDate,isWaived",SORT_CRITERIA:"SortCriteria",FILTER_TYPE:"FilterType",UPGRADE:"InitialFF,InitialPrice,UpgradeFF,UpgradePrice",SERVICE_CATEGORY:"ServiceCategory",SERVICE_VALUE:"ServiceCode,ServiceValue",SERVICE_CODE:"ServiceCode",AAAS_INPUT_VALIDATION:"ServiceCode,ValidationResult",LEAVING:"LEAVING",INSURANCE_PRODUCT_CODE:"InsuranceProductCode",INSURANCE_PURCHASE:"PurchaseInsurance",INSURANCE_POPUP:"PopupDisplayed",MOP_CODE:"MOPCode",INSTALLMENT_OPTION_ID:"InstallmentOptionID",PROMOTION_CODE:"PromotionCode",BUDGET_FILTER:"ValueInBudgetFilter",FAVORITE_DAYS:"Days of the week",CALENDAR_CLICK_DAY:"DepartureDate,ReturnDate,BestPrice",MODIFY_FLIGHT:"boundId",DEPARTURE_DATE:"DepartureDate",RETURN_DATE:"ReturnDate",PACK_CODE:"PackCode",MILES_AND_CASH:"CashAmountToPay,MilesAmountToPay,CashAmountPaidInMiles,MinMiles,MaxMiles",PAGE_ID:"PageID",GLOBAL_ERROR:"PreviousPageID,errorCode,warningCode",ACTION_CHOOSED:"ActionChoosed",TRAVELLER_DETAILS:"TravellerDetails",COPY_ADDRESS:"From,To",SHOW_RBD:"ShowRBD",FLIGHT_DETAILS:"DepartureDate, FareFamily, Price",FLIGHT_DETAILS_SDAI:"DepartureDate, FareFamily",PREFERRED_CABIN:"selectedCabin",PRICING_OPTION:"selectedPricingOption R/U",CLICK_LOGIN:"ExtLogin",WAIVED:"isWaived",WAITLISTED:"isWaitlisted",ORIGIN_PAGE_ID:"OriginPageID",SEARCH_INFO:"TripType, Departure, Arrival, Date, Passengers, FareFamily",SELECT_FLIGHT:"SelectedFareFamily,DepartureLocation,ArrivalLocation,DepartureDate",CHANGE_FLIGHT:"DepartureLocation,ArrivalLocation,DepartureDate",CONFIRM_CHANGE_FARE:"SelectedFareFamily",CANCEL_CHANGE_FARE:"SelectedFareFamily",FLIGHT_VIEWERS:"People viewing this flight",BOUND_VIEWERS:"People viewing this bound",SELECTION:"Selection",ATC_INVOLUNTARY_VALIDATION:"DepartureLocation-ArrivalLocation:Confirm/Keep/Another",TEASER_DISPLAYED:"InitialFF,UpgradeFF"},EVENT_ACTION:{CONTINUE:"ClickNextStep",CLICK_WEEK:"ClickWeek",CLICK_DAY:"ClickDay",CLICK_COMPARISON:"ClickComparison",SHOW_FLIGHT_DETAILS:"ClickShowFlightDetails",SHOW_MORE_FLIGHTS:"ShowMoreFlights",CLICK_CELL:"SelectFlight",SORT_TYPE:"SortType",CLICK_FILTER:"ClickFilter",UPGRADE:"Upgrade",FARE_FAMILY_DESCRIPTION:"ClickFareFamilyDescrip",CLICK_ANCILLARY_SERVICE:"ClickAncillaryService",ADD_ANCILLARY_SERVICE:"AddAncillaryService",REMOVE_ANCILLARY_SERVICE:"RemoveAncillaryService",AAAS_INPUT_VALIDATION:"AAASInputValidation",ADD_ANCILLARY_SERVICE_OK:"AddAncillaryServiceOK",ADD_ANCILLARY_SERVICE_CANCEL:"AddAncillaryServiceCancel",FARE_REVIEW:"ClickFareReview",FARE_CONDITIONS:"ClickFareConditions",PURCHASE_CONDITIONS:"ClickPurchaseConditions",BAGGAGE_POLICY:"ClickBaggagePolicy",FARE_NOTES:"ClickFareNotes",REMOVE_INSURANCE:"RemoveInsurance",BUDGET_FILTER:"PriceLessThan",DEPARTUTRE_DAYS:"FavoriteDaysDep",RETURN_DAYS:"FavoriteDaysRet",RESET_FILTERS:"ResetFilters",NEXT_DAYS:"NextDays",PREVIOUS_DAYS:"PreviousDays",TAXES_AND_FEES:"ClickTaxesAndFeesLink",ERROR_RAISED:"ErrorRaised",REDIRECT_EXTERNAL_PAYMENT:"RedirectToPSP",PAYMENT_RESULT:"PaymentResult",RESPONSE_TIME:"ResponseTime",EXTERNAL_LOGIN:"ExternalLogin",MODIFY_FLIGHT:"ModifyFlight",ABANDON:"Abandon",PRICING_OPTION:"SelectPricingOption",PREFERRED_CABIN:"SelectPreferredCabin",SHOW_RBD:"ClickShowRBD",CLICK_PROMOTION_OK:"AddPromotionCode",CLICK_PROMOTION_CANCEL:"CancelPromotionCode",CLICK_INSURANCE:"ClickInsurance",CLICK_NO_INSURANCE:"NoInsurance",CLICK_YES_INSURANCE:"YesInsurance",CLICK_MOP:"ClickMethodPayment",CLICK_INSTALLMENT:"Installment",CLICK_INSTALL:"ClickInstalment",DISPLAY_AAAS_PACK:"DisplayAAASPack",SELECT_MILES_AND_CASH:"SelectMilesAndCash",SEARCH_ALTERNATIVES:"SearchAlternatives",REQUEST_REFUND:"RequestRefund",PAGE_LOAD:"PageLoad",GLOBAL_ERROR:"GlobalError",TIMEOUT_WINDOW_DISPLAYED:"TimeoutWindowDisplayed",TIMEOUT_WINDOW_CLOSED:"TimeoutWindowClosed",ACKNOWLEDGE:"Acknowledge",VALIDATE:"Validate",DISRUPTION_CONTACT:"OpenContactMeDialog",DISRUPTION_CONTACT_DIALOG:"ContactMeDialog",ADD_ADITIONAL_INFORMATION:"addAdditionalInformation",REMEMBER_MY_DETAILS:"rememberMyDetails",ADDITIONAL_SERVICES:"additionalServices",GO_TO_APIS:"goToAPIS",COPY_ADDRESS:"copyAddress",ADD_PERSONAL_DETAILS:"addPersonalDetails",ADD_REDRESS:"addRedress",ADD_ID_DOCUMENT:"addIDDocument",ADD_VISA:"addVisa",ADD_DESTINATION_ADDRESS:"addDestinationAddress",ADD_RESIDENCE_ADDRESS:"addResidenceAddress",EMAIL_CHECKBOX:"emailCheckbox",SMS_CHECKBOX:"smsCheckbox",VALIDATE_BUTTON:"validateButton",FREQUENT_FLYER_NUMBER:"frequentFlyerNumber",ADD_FREQUENT_FLYER_NUMBER:"addFrequentFlyerNumber",REMOVE_FREQUENT_FLYER_NUMBER:"removeFrequentFlyerNumber",ADD_SOS_CONTACT_INFORMATION:"sosContactInformation",KNOWN_TRAVELLER_NUMBER:"addKnownTravellerNumber",MODIFY_PASSENGER:"modifyPassenger",MODIFY_PASSENGERS:"modifyPassengers",CLICK_HEADER:"clickHeader",SELECT_DATE:"selectedDate",IS_WAIVABLE:"isWaivable",IS_DISRUPTED:"isDisrupted",COPY_PROFILE:"copyProfile",IS_WAITLISTED:"isWaitlisted",REBOOK_SEARCH_SELECT_CALENDAR:"rebookSearchSelectCalendar",CURRENCY_CONVERTER:"currencyConverterPopup",CONVERTED_CURRENCY:"convertedToCurrency",PAGE_VIEW:"PageView",SPLIT_SELECT:"splitSelect",SELECTED_TRAVELLER_IDS:"splitSelected",UNSELECTED_TRAVELLER_IDS:"splitUnselected",NAVIGATION:"Navigation",PAGE_BLOCKED:"PageBlocked",NAVIGATION_NOT_ALLOWED:"NavigationNotAllowed",UPGRADE_FF_FROM_RESTR_MODAL:"UpgradeFFFromRestrictionsModal",ACCEPT_RESTR_FROM_RESTR_MODAL:"AcceptRestrictionsFromRestrictionsModal",CHECK_UPGRADE_OFFERS:"CheckUpgradeOffers",MODIFY_FLIGHTS_UPGD_TEASER:"ModifyFlightsUpgradeTeaser",SELECT_SEGMENT_UPGRADE:"SelectSegmentUpgrade",CONFIRM_SEGMENT_UPGRADE:"ConfirmSegmentUpgrade",SELECT_MILES_AND_CASH_UPGD:"SelectMilesAndCashForUpgrade",UPDATE_UPGD_FROM_PURC:"UpdateUpgradesFromPURC",FLIGHTS_UPGD_TEASER_SHOWN:"FlightUpgradeTeaserShown",EXPAND_SEARCH_BAR:"ExpandSearchBar",COLLAPSE_SEARCH_BAR:"CollapseSearchBar",NEW_SEARCH:"NewSearch",SELECT_FLIGHT:"SelectFlight",CHANGE_FLIGHT:"OpenFlightsPanel",CONFIRM_CHANGE_FARE:"ConfirmChangeFare",CANCEL_CHANGE_FARE:"CancelChangeFare",CAR_TEASER_DISCLAIMER_SHOW:"CarTeaserDisclamerShow",CLICK_ADDITIONAL_PROTECTION:"ClickAdditionalProtection",TEASER_DISPLAYED:"TeaserDisplayed",SHOW_FARE_CONDITIONS_PANEL:"OpenFareConditionsPanel",CLOSE_FARE_CONDITIONS_PANEL:"CloseFareConditionsPanel"},EVENT_VALUES:{COMPLETED:"completed",FAILED:"failed",ABANDON:"Abandon",SHOW_MORE_FLIGHTS:"ShowMoreFlights",GO_AVAILABILITY:"goAvailability",GO_HOME_PAGE:"goHomePage",ADD_MORE_TIME:"addMoreTime",YES_BUTTON:"yes",NO_BUTTON:"no",FREQUENT_FLAYER:"frequentFlyer",VALIDATE_BUTTON:"Validate",ALL:"ALL",NOT_AVAILABLE:"Not available",PREFILL_CANCELLED:"prefill Cancelled",SEPARATOR_LEVEL_1:",",SEPARATOR_LEVEL_2:"~"},EVENT_TYPE:{DISPLAY:"Display",ERROR:"Error",RESPONSE:"Response",TIMEOUT:"Timeout",USER_EVENT:"UserEvent",WARNING:"Warning",WIDGET_ERROR:"WidgetError",VIEW:"PageView"},FILTER_EVENT:{DEPARTURE_TIME:"DEPARTURE_TIME",ARRIVAL_TIME:"ARRIVAL_TIME",DURATION:"DURATION",DIRECT_FLIGHT:"DIRECT_FLIGHT",DEPARTURE_TIME_LOWCASE:"Departure Time",ARRIVAL_TIME_LOWCASE:"Arrival Time",DURATION_LOWCASE:"Duration",DIRECT_FLIGHT_LOWCASE:"Direct flight only"},BOUND_EVENT:{INBOUND:"inbound:",OUTBOUND:"outbound:",BOUND_0:"0"},TIMEOUT_TYPE:{DIALOG:"TimeoutDialog",ALERT:"Alert"},SCHEMA_ROOT:"ROOT",SCHEMA_DIGITALDATA:"digitalData",ATTRIBUTES_VALUE_DEFAULT:"value",FORMATS:{DATE:"yyyy-MM-dd"},EVENTS_ENABLE_ALL:"ALL",EVENTS_ENABLE_SELECTED:"SELECTED",EVENTS_ENABLE_DESELECTED:"DESELECTED",PROPERTY_OBJECT:"propertyObject"},$constructor:function(){this._buildEventList(),this.sessionStorageManager=plnextv2.utils.storage.SessionStorageManager,this.localStorageManager=plnextv2.utils.storage.LocalStorageManager,this.navigationManager=plnextv2.utils.widgets.plnextLib.navigationManager.PlnextNavigationManager,this.digitalDataScheme=plnextv2.analytics.schemes.DigitalDataScheme,this.digitalSchema={},this.digitalSchemaObj={},this.digitalSchemaPlain={},this.digitalSchemaROOT=this.SCHEMA_ROOT,this._dateUtils=plnextv2.utils.DateUtils,this._typeUtils=aria.utils.Type},$prototype:{_isEventActivated:function(e){return"undefined"!=typeof e&&this.ACTIVATED_EVENT_LIST[e]?!0:!1},_buildEventList:function(){for(var e=plnextv2.utils.GlobalLists.getList("SITE_ANALYTICS_EVENTS"),t=e.length,n=0;t>n;n++)this.ACTIVATED_EVENT_LIST[e[n][0]]=!0},_getNumEventsPerPage:function(){var e=aria.utils.Array.filter(digitalData.event,function(e){return e&&e.eventInfo&&digitalData.pageInstanceID&&e.eventInfo.pageID===digitalData.pageInstanceID});return e.length},_isMaxEvents:function(){var e=plnextv2.utils.context.AppContext.getAppData().config.analytics.SITE_DATA_MAX_EVENTS;return e&&aria.utils.Type.isNumber(parseInt(e))&&this._getNumEventsPerPage()>=e},_isPushEvent:function(e){var t=!1;if(e&&e.eventAction){var n=plnextv2.utils.context.AppContext.getAppData().config.analytics.SITE_DATA_EVENTS_ENABLE||this.EVENTS_ENABLE_SELECTED;n===this.EVENTS_ENABLE_ALL?t=this._isPushAllEvents(e):n===this.EVENTS_ENABLE_SELECTED?t=this._isPushSelectedEvent(e):n===this.EVENTS_ENABLE_DESELECTED&&(t=this._isPushDeselecteEvent(e))}return t},_isPushAllEvents:function(e){return e&&digitalData&&!this._isMaxEvents()},_isPushSelectedEvent:function(e){return e&&this._isEventActivated(e.eventId)&&this._isEventEnabled(e.activationParameter)&&digitalData&&!this._isMaxEvents()},_isPushDeselecteEvent:function(e){return e&&!this._isEventActivated(e.eventId)&&this._isEventEnabled(e.activationParameter)&&digitalData&&!this._isMaxEvents()},_isEventEnabled:function(e){return void 0===e?!0:e},launchAnalyticsEvent:function(e){if(this.__isEnabledAnalytics()&&this._isPushEvent(e)){var t=this._getEventInfo(e);digitalData&&digitalData.event&&(digitalData.event.push(t),(e.forceSaveData||this.navigationManager.isRouterAvailable())&&this.saveDigitalData(),this._logEvent(e))}},_getEventInfo:function(e){return 0===digitalData.version.indexOf("1.")?this._getEventInfo_v_1(e):0===digitalData.version.indexOf("--disabled---")?this._getEventInfo_v_2(e,!0):this._getEventInfo_v_2(e)},_getEventInfo_v_1:function(e){var t={eventInfo:{key:e.eventAction,eventName:e.eventName,pageID:e.pageID,componentID:e.componentID?e.componentID:"",eventType:e.eventType||this.EVENT_TYPE.USER_EVENT},category:{primaryCategory:e.eventCategory},timestamp:(new Date).toISOString()};return"undefined"!=typeof e.eventValue&&null!==e.eventValue&&(t.eventInfo.value=e.eventValue),t},_getEventInfo_v_2:function(e,t){var n=!0,a="eventName",s="key";t&&(a="context",s="name");var o={eventInfo:{key:e.eventAction,eventName:e.eventName,pageID:e.pageID,componentID:e.componentID?e.componentID:"",timestamp:(new Date).toISOString()},category:{primaryCategory:e.eventType||this.EVENT_TYPE.USER_EVENT}},c=e.attributes;return c||(c=this.getAttributesFromString(e.eventLabel,e.eventValue)),c.length>0&&(o.attributes=n?this.getModelAttributes(c):c),o},getModelAttributes:function(e){for(var t=[],n=0;n<e.length;n++){for(var a={},s=0;s<e[n].value.length;s++){var o=this.ATTRIBUTES_VALUE_DEFAULT;e[n].value.length>1&&(o+=(s+1).toString()),a[o]=e[n].value[s]}e[n].value.length||(a=e[n].value),t.push({key:e[n].key,value:a})}return t},getAttributesFromString:function(e,t){var n=[];if(e&&t&&null!=t&&"undefined"!==t)for(var a=e.split(this.EVENT_VALUES.SEPARATOR_LEVEL_1),s=t.split(this.EVENT_VALUES.SEPARATOR_LEVEL_1),o=Math.min(a.length,s.length),c=0;o>c;c++)n.push({key:a[c].trim(),value:s[c].split(this.EVENT_VALUES.SEPARATOR_LEVEL_2)});return n},__isEnabledAnalytics:function(){var e=plnextv2.utils.context.AppContext.getAppData(),t=e&&e.config&&e.config.analytics;return t?t.SITE_ENABLE_ANALYTICS:!1},_logEvent:function(e){var t=plnextv2.utils.context.AppContext.getAppData();t.config.analytics.SITE_DEBUG_EVENTS&&this.$logInfo(0===digitalData.version.indexOf("1.")?e.pageID+" "+e.eventCategory+" "+e.eventName+" "+(e.eventType||this.EVENT_TYPE.USER_EVENT)+" "+e.eventAction+" "+(e.eventLabel||"")+" "+(e.eventValue||""):e.pageID+" "+(e.eventCategory||this.EVENT_TYPE.USER_EVENT)+" "+e.eventName+" "+e.eventAction+" "+this.buildAttributesAsString(e))},buildAttributesAsString:function(e){var t=e.attributes||this.getAttributesFromString(e.eventLabel,e.eventValue);return this.getAttributesAsString(t)},getAttributesAsString:function(e){for(var t="",n=0;n<e.length;n++)t+=" "+e[n].key,e[n].value&&(t+=" : [",t+=JSON.stringify(e[n].value),t+="]");return t},saveDigitalData:function(){this.sessionStorageManager.set("digitalData",digitalData,"Analytics"),this.localStorageManager.set("digitalData",digitalData,"Analytics")},getDigitalDataParameters:function(e){e||(e=plnextv2.utils.context.AppContext.getAppData());var t={DEBUG_EVENTS:!1,DATA_PRICE_DETAILS:!0,DATA_LOCALIZATION:!0,DATA_CONTEXT:!1,DATA_UPSELL:!0,DATA_PAYMENT:!0,DATA_PRODUCT_DETAILS:!0,DATA_PII:!1,DATA_ERROR:!0,ANALYTICS_DOMAIN_LVL:1};return e.config&&e.config.analytics&&(t=this.__overrideDefaultValues(t,e.config.analytics)),t},__overrideDefaultValues:function(e,t){for(var n in e)"undefined"!=typeof t["SITE_"+n]&&(e[n]=t["SITE_"+n]);return e},getLocalizedLabel:function(e,t){var n=plnextv2.utils.context.AppContext.getAppData(),a=n.config.analytics[e],s=a&&t&&a[t];return s||""},getAppliedFiltersList:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&e[n].isDisplayed&&e[n].isApplied&&t.push(this._getItemFilterApplied(e[n]));return t},_getItemFilterApplied:function(e){var t;switch(e.idOfFilter){case this.FILTER_EVENT.DEPARTURE_TIME:t=this.FILTER_EVENT.DEPARTURE_TIME_LOWCASE;break;case this.FILTER_EVENT.ARRIVAL_TIME:t=this.FILTER_EVENT.ARRIVAL_TIME_LOWCASE;break;case this.FILTER_EVENT.DURATION:t=this.FILTER_EVENT.DURATION_LOWCASE;break;case this.FILTER_EVENT.DIRECT_FLIGHT:t=this.FILTER_EVENT.DIRECT_FLIGHT_LOWCASE;break;default:t=""}return t},getIPAddress:function(){var e="",t=plnextv2.utils.context.AppContext.getAppData();return t.config.links&&t.config.links.restartFlow&&t.config.links.restartFlow.dmIn&&(e=t.config.links.restartFlow.dmIn.REQUEST_INFO&&t.config.links.restartFlow.dmIn.REQUEST_INFO.IP_ADDRESSES&&t.config.links.restartFlow.dmIn.REQUEST_INFO.IP_ADDRESSES[0]||""),e},getUserID:function(){var e="",t=plnextv2.utils.context.AppContext.getAppData();return t.config.links&&t.config.links.restartFlow&&t.config.links.restartFlow.dmIn&&t.config.links.restartFlow.dmIn.USER_ID&&(e=t.config.links.restartFlow.dmIn.USER_ID),e},getPreviousPageLoaded:function(){var e="NONE";if(this.__isEnabledAnalytics()&&digitalData&&digitalData.event){var t=aria.utils.Array.filter(digitalData.event,function(e){return e.eventInfo.eventName===this.EVENT_NAME.PAGE_LOAD},this),n=t.length-2;n>=0&&(e=t[n].eventInfo.value)}return e},getDigitalDifference:function(e,t,n){var a={};if(this._typeUtils.isArray(t)){a=[];var s=this.getArrayDifference(e,t,n);s&&s.length>0&&(a=s)}else a=this.getObjectDifference(e,t,n);return a},getObjectDifference:function(e,t,n){var a,s={};for(var o in e)"object"==typeof t[o]&&"object"==typeof e[o]?(a=this.getDigitalDifference(e[o],t[o],this.checkAlwaysPushed(n,o)),this.isEmptyObject(a)===!1&&(s[o]=a)):"undefined"!=typeof t[o]&&t[o]!==e[o]&&(s[o]=t[o]);for(var c in t)e&&void 0===e[c]&&(s[c]=t[c]);return this._addAlwaysPushedProperties(e,t,n,s),s},_addAlwaysPushedProperties:function(e,t,n,a){for(var s in n)e&&t[s]===n[s]&&(a[s]=n[s])},checkAlwaysPushed:function(e,t){return e?e[t]:""},getArrayDifference:function(e,t,n){for(var a=[],s=0;s<t.length;s++)if(void 0!==e[s]){var o=this.getDigitalDifference(e[s],t[s],this.checkAlwaysPushed(n,s));(this._typeUtils.isArray(o)||Object.keys(o).length>0)&&a.push(o)}else t[s]&&a.push(t[s]);return a},isEmptyObject:function(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0},getAlwaysPushedDigitalData:function(e){var t={};return this.digitalSchema=this.digitalDataScheme.getSchema(digitalData.version),this.digitalSchemaROOT=this.digitalSchema.definitions.ROOT?this.SCHEMA_ROOT:this.SCHEMA_DIGITALDATA,this.digitalSchema&&Object.keys(this.digitalSchema).length>0&&(this.filteredObj=this.getFilteredDigitalProp(this.digitalSchema,"filter:alwaysPushed=true"),this.filteredObj&&(t=this.__removeNonSpecificUI(e,this.digitalSchemaROOT)),t&&(t=this.cleanObject(t))),t},getUISpecificDigitalData:function(e){var t={};return this.digitalSchema=this.digitalDataScheme.getSchema(digitalData.version),this.digitalSchemaROOT=this.digitalSchema.definitions.ROOT?this.SCHEMA_ROOT:this.SCHEMA_DIGITALDATA,this.digitalSchema&&Object.keys(this.digitalSchema).length>0&&(this.filteredObj=this.getFilteredDigitalProp(this.digitalSchema,"filter:UISpecific=true,alwaysPushed=true"),this.filteredObj&&(t=this.__removeNonSpecificUI(e,this.digitalSchemaROOT)),t&&(t=this.cleanObject(t))),t},cleanObject:function(e){for(var t in e)e.hasOwnProperty(t)&&["string","number","boolean"].indexOf(typeof e[t])<0&&(this.__checkItemStatusType(e,t,"object")?e=this.__cleanItemByType(e,t,"object"):this.__checkItemStatusType(e,t,"array")&&(e=this.__cleanItemByType(e,t,"array")));return e},__checkItemStatusType:function(e,t,n){return void 0!==e[t]&&typeof e===n?!0:!1},__cleanItemByType:function(e,t,n){return"object"===n?0===Object.keys(e[t]).length?delete e[t]:(e[t]=this.cleanObject(e[t]),0===Object.keys(e[t]).length&&delete e[t]):"array"===n&&(0===e[t].length?delete e[t]:(e[t]=this.cleanObject(e[t]),0===e[t].length&&delete e[t])),e},__removeNonSpecificUI:function(e,t){for(var n=Object.keys(e),a=0;a<n.length;a++){var s=n[a],o=t+"_"+s;if(e[s]instanceof Array)this._removeNonSpecificUIArray(e,s,o);else if(e[s]instanceof Object)this.__removeNonSpecificUI(e[s],o);else{var c=this.buildNoUISpecificPath(o);this.filteredObj[c]||delete e[s]}}return e},_removeNonSpecificUIArray:function(e,t,n){n+="[]";for(var a=0;a<e[t].length;a++)e[t][a]instanceof Object?this.__removeNonSpecificUI(e[t][a],n):delete e[t][a]},getFilteredDigitalProp:function(e,t){this.digitalSchemaPlain={};var n=this.getSchemaObject(e);return this.deepForProperties(n,this.digitalSchemaROOT),this.filterSchema(this.digitalSchemaPlain,t)},getPropertyFromObject:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var a=t[n];if("$ref"===a&&this.digitalSchema.definitions){var s=e.$ref.split("/"),o=s[s.length-1],c=this.digitalSchema.definitions[o];0===o.indexOf("array_")&&(o=o.split("_")[1]),"object"===c.type||"array"===c.type?e=c:e[o]=c,delete e.$ref}else(e[a]instanceof Array||e[a]instanceof Object)&&(e[a]=this.buildSchemaRefs(e[a]))}return e},buildSchemaRefs:function(e){if(e instanceof Array)for(var t=0;t<e.length;t++)e[t]=this.buildSchemaRefs(e[t]);else e instanceof Object&&(e=this.getPropertyFromObject(e));return e},getSchemaObject:function(e){return e.$ref&&e.definitions&&(e[this.digitalSchemaROOT]=e.definitions[this.digitalSchemaROOT],delete e.$ref),this.buildSchemaRefs(e)[this.digitalSchemaROOT]},deepForProperties:function(e,t){if(e.properties)for(var n=Object.keys(e.properties),a=0;a<n.length;a++){var s=n[a];this.deepForProperties(e.properties[s],t+"_"+s)}else e.items&&e.items.properties?this.deepForProperties(e.items,t+"[]"):this.digitalSchemaPlain[t]=e},filterSchema:function(e,t){var n={},a=t&&t.split(":").length>1&&t.split(":")[1].split("=").length>1;if(a&&"filter"===t.split(":")[0])for(var s=t.split(":"),o=Object.keys(e),c=0;c<o.length;c++){var l=o[c],i=e[l];this.isFilteredUISpecificAndAlwaysPushed(i,s[1])&&(n[l]=i)}return n},isFilteredUISpecificAndAlwaysPushed:function(e,t){var n=!1,a=t.split(",");if(a[0])var s=a[0].split("=")[0],o="true"===a[0].split("=")[1];if(a[1])var c=a[1].split("=")[0],l="true"===a[1].split("=")[1];return e&&e[s]&&e[s]===o?n=!0:e&&!e[s]&&e[c]&&e[c]===l&&(n=!0),n},buildNoUISpecificPath:function(e){for(var t=e.split("_"),n="",a=0;a<t.length;a++)aria.utils.Type.isNumber(parseInt(t[a]))?n+="[]":(a>0&&(n+="_"),n+=t[a]);return n},formatDate:function(e,t){return this._dateUtils.formatTimeOfDay(e,this.FORMATS.DATE,t)},formatBool:function(e){return e?"true":"false"},valueAvailable:function(e,t,n){if(t)return e;for(var a=""+e,s=n||this.EVENT_VALUES.SEPARATOR_LEVEL_2,o=a.split(s).length,c=[],l=0;o>l;l++)c.push(this.EVENT_VALUES.NOT_AVAILABLE);return c.join(s)},_getDomain:function(){var e=window.location.hostname.replace("www.",""),t="",n=this.getDigitalDataParameters().ANALYTICS_DOMAIN_LVL,a=new RegExp(/(?:.com\.[^]{0,3})|(?:.co\.[^]{0,3})(\.*$)|(\..[^\\.]{0,2})(\.*$)|(\..[^\\.]{0,3})(\.*$)/),s=e.replace(a,"").split(".").length;if((n>s||1>n)&&(n=1),s>=n&&n>0){a.exec(e)&&(t=a.exec(e)[0]);var o=e.replace(a,"").split("."),c=o.slice(s-n,o.length);return c.join(".")+t}},_getCookie:function(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){for(var a=t[n];" "===a.charAt(0);)a=a.substring(1);if(0===a.indexOf(e))return a.substring(e.length,a.length).split("=")[1]}return""}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/analytics/MilesAndCashSliderAnalyticsUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.analytics.MilesAndCashSliderAnalyticsUtils",$singleton:!0,$prototype:{getMilesAndCashSliderData:function(e,t){var n=0,a=0,s=0,o=0,c=0;return e&&(n=e.totalAmount.amount,e.milesAndCash&&(a=e.milesAndCash.milesCost,s=e.milesAndCash.milesAmount.amount)),t&&(o=t.listRanks[0].milesAmount,c=t.listRanks[t.listRanks.length-1].milesAmount),{totalPrice:Math.round(100*n)/100,totalMiles:a,cashPaidInMiles:s,minMiles:o,maxMiles:c}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/analytics/PerformancesAnalysis.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.analytics.PerformancesAnalysis",$singleton:!0,$prototype:{measureNavigationTime:function(){var e=performance.timing;return{result:{navigation:{connection:Math.round(e.connectEnd-e.navigationStart),request:Math.round(e.responseStart-e.connectEnd),response:Math.round(e.responseEnd-e.responseStart),DOM:Math.round(e.loadEventEnd-e.responseEnd),total:Math.round(e.loadEventEnd-e.navigationStart)}},errors:[]}},measureAriaRenderingTime:function(e){var t=performance.getEntriesByName("onPageReady","mark"),n=performance.getEntriesByName("disabledSpinner","mark"),a=null,s=[];if(t.length&&n.length){var o=t[0].startTime-e,c=n[0].startTime-e;a=Math.max(o,c)}else s.push({message:"One of the mark is missing"});return{result:{postNavigation:{startAt:Math.round(e),pageReady:Math.round(o),spinnerEnd:Math.round(c),total:Math.round(a)}},errors:s}},serverResponseSize:function(){var e=[],t=performance.getEntriesByType("navigation"),n=null;if(t.length>0){var a=t[0];"transferSize"in a?n=a.transferSize:e.push({message:"PerformanceResourceTimining.transferSize is not supported"})}else e.push({message:'performance.getEntriesByType("navigation") is not supported'});return{result:{sizeResponse:n},errors:e}},resourcesAnalysis:function(){for(var e=performance.getEntriesByType("resource"),t=0,n=[],a=!1,s=0,o=0,c=0;c<e.length;c++){var l=e[c];if("transferSize"in l){var i=l.transferSize;0===i?s+=1:(o+=1,t+=i)}else a=!0}return a&&n.push({message:"PerformanceResourceTimining.transferSize is not supported"}),{result:{resources:{count:e.length,sizeDownload:t,nbCache:s,nbDownload:o}},errors:n}},buildPerformancesMetrics:function(){var e={},t=[];if(window.performance&&performance.timing&&"function"==typeof performance.getEntriesByName&&"function"==typeof performance.getEntriesByType){var n=this.measureNavigationTime(),a=this.measureAriaRenderingTime(n.result.navigation.total),s=this.resourcesAnalysis(),o=this.serverResponseSize();e=jQuery.extend(n.result,a.result,s.result,o.result),t=t.concat(n.errors).concat(a.errors).concat(s.errors).concat(o.errors),e.total=e.navigation.total+e.postNavigation.total,performance.clearMarks("onPageReady"),performance.clearMarks("disabledSpinner")}else t.push({message:"Performance API are not supported by the browser"});return e.error=t,{timing:e}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/animations/ripple/Ripple.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.animations.ripple.Ripple",$singleton:!0,$statics:{CLASSES:".btn"},$constructor:function(){var e=this.ripple;"function"==typeof jQuery.fn.on&&jQuery(document).on("click",this.CLASSES,function(t){e($(this),t)})},$prototype:{ripple:function(e,t){t&&t.stopPropagation();var n=e.first();jQuery(".uxd-ink").remove();var a="uxd-ink ",s=jQuery("<em class='"+a+"'></em>").appendTo(n);if(s.removeClass("uxd-animate"),!s.height()&&!s.width()){var o=Math.max(n.outerWidth(),n.outerHeight());s.css({height:o,width:o})}var c,l;t?(c=t.pageX-n.offset().left-s.width()/2,l=t.pageY-n.offset().top-s.height()/2):(c=n.width()/2,l=n.height()/2),s.css({top:l+"px",left:c+"px"}).addClass("uxd-animate")}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/animations/ripple/style/Ripple.cml
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.animations.ripple.style.Ripple",$extends:require("ariatemplates/templates/CSSTemplate.js"),$constructor:function(){this.$CSSTemplate.constructor.call(this)},$destructor:function(){this.$CSSTemplate.$destructor.call(this)},$prototype:{macro_load:function(){try{with(this)this.__$write("\n\n.btn {\noverflow: hidden;\nposition: relative;\n}\n\n.uxd-ink {\ndisplay: block;\nposition: absolute;\nbackground: rgba(0,0,0,.3);\nborder-radius: 100%;\ntransform: scale(0);\nmargin: 0!important;\npadding: 0!important\n}\n\n.btn-primary .uxd-ink {\nbackground: rgba(255,255,255,.5);\n}\n\n.uxd-ink.uxd-animate {\n-webkit-animation: uxd-ripple-animation .45s linear;\n-o-animation: uxd-ripple-animation .45s linear;\nanimation: uxd-ripple-animation .45s linear\n}\n\n.uxd-ripple-animation 100% {\nopacity: 0;\ntransform: scale(2.5)\n}\n\n@-webkit-keyframes uxd-ripple-animation {\n100% {\nopacity: 0;\ntransform: scale(2.5)\n}\n}\n\n@keyframes uxd-ripple-animation {\n100% {\nopacity: 0;\ntransform: scale(2.5)\n}\n}\n",29)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["load",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$csslibs={},e.__$prefix=!0},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/cemInformationRetriever/CEMInformationRetriever.js
//*******************
var Aria=require("ariatemplates/Aria"),localStorageMgr=require("plnextv2/utils/storage/LocalStorageManager");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.cemInformationRetriever.CEMInformationRetriever",$singleton:!0,$statics:{COMMON_KEY:"COMMON",CEM_INFORMATION_KEY:"CEM_INFORMATION"},$prototype:{getCEMDataFromLocalStorage:function(){var e=localStorageMgr.get(this.CEM_INFORMATION_KEY,this.COMMON_KEY);return null!==e?e:{}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/context/AppContext.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.context.AppContext",$dependencies:["plnextv2.utils.context.PageContext"],$singleton:!0,$constructor:function(){this._siteConfig=null,this._pageContexts={},this._currentPageId=null,this._previousPageId=null},$prototype:{update:function(e){if(e.pageId){var t=e.pageId;if(this._currentPageId&&(this._previousPageId=this._currentPageId),this._currentPageId=t,e.pageDefinition){var n=e.pageDefinition,a=this._pageContexts[t];a&&a._pageController?(a.clear(),a.init(n)):this._pageContexts[t]=new plnextv2.utils.context.PageContext(t,n)}}},addPageCtrl:function(e){this._pageContexts[this._currentPageId].addPageCtrl(e)},addComponentCtrl:function(e){this._pageContexts[this._currentPageId].addComponentCtrl(e)},getAppData:function(){return this._siteConfig?this._siteConfig.appData:null},getPageData:function(){return this._pageContexts[this._currentPageId].getPageData()},getSiteConfig:function(){return this._siteConfig},setSiteConfig:function(e){this._siteConfig=e},getPageDefinition:function(){return this._pageContexts[this._currentPageId].getPageDefinition()},getComponentControllers:function(e){return this._pageContexts[this._currentPageId].getComponentControllers(e)},getEventBus:function(){return this._pageContexts[this._currentPageId]&&"function"==typeof this._pageContexts[this._currentPageId].getEventBus?this._pageContexts[this._currentPageId].getEventBus():null},getPageId:function(){return this._currentPageId},getPreviousPageId:function(){return this._previousPageId},getPageContexts:function(){return this._pageContexts}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/context/PageContext.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.context.PageContext",$dependencies:["plnextv2.utils.EventBus"],$constructor:function(e,t){this._pageId=e,this._pageDefinition=t,this._pageController=null,this._componentControllers=[],this._eventBus=new plnextv2.utils.EventBus},$prototype:{init:function(e){this._pageDefinition=e,this._pageController.doInit();for(comp in this._componentControllers){var t=this._componentControllers[comp];this._pageDefinition.components[t._UID]&&t.doInit()}},clear:function(){this._pageController.doClear();for(comp in this._componentControllers)this._componentControllers[comp].doClear();this._eventBus.doClear(),this._pageDefinition=null},getPageDefinition:function(){return this._pageDefinition},getPageData:function(){return this._pageDefinition.pageComposition.pageData},addPageCtrl:function(e){this._pageController=e},addComponentCtrl:function(e){this._componentControllers[e._UID]=e},getComponentControllers:function(e){if(e)return this._componentControllers;var t=[];for(ctrl in this._componentControllers){var n=this._componentControllers[ctrl];n.isActive()&&(t[n._UID]=n)}return t},getEventBus:function(){return this._eventBus}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/context/PageId.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.context.PageId",$dependencies:["plnextv2.utils.context.PageId"],$singleton:!0,$statics:{ADVS:"ADVS",FDCS:"FDCS",FDCT:"FDCT",FPOW:"FPOW",FPC:"FPC",FDFF:"FDFF",SDAI:"SDAI",FDCSCPX:"FDCSCPX",FDFFCPX:"FDFFCPX",FPRM:"FPRM",FARE:"FARE",ALPI:"ALPI",APIS:"APIS",APIM:"APIM",DFSR:"DFSR",PURC:"PURC",VERI:"VERI",CONF:"CONF",FLIFO:"FLIFO",TLIST:"TLIST",TIMR:"TIMR",RTPL:"RTPL",UPGD:"UPGD",MALPI:"MALPI",MAPIS:"MAPIS",MAPIM:"MAPIM",MDFSR:"MDFSR",MPURC:"MPURC",MINS:"MINS",MVERI:"MVERI",MCONF:"MCONF",FDFFAW:"FDFFAW",RADVS:"RADVS",RFDCS:"RFDCS",RFDCT:"RFDCT",RFPOW:"RFPOW",RFPC:"RFPC",RFDFF:"RFDFF",RSDAI:"RSDAI",RFARE:"RFARE",RAPIS:"RAPIS",RPURC:"RPURC",RVERI:"RVERI",RCONF:"RCONF",CPNR:"CPNR",ATCR:"ATCR",ATCRC:"ATCRC",GERR:"GERR",CARM:"CARM"},$prototype:{}});
//*******************
//LOGICAL-PATH:plnextv2/utils/currency/CurrencyConversor.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.currency.CurrencyConversor",$singleton:!0,$constructor:function(){this.reqMgr=plnextv2.utils.requestManager.PlnextRequestManager,this._eventBus=null},$prototype:{setEventBus:function(e){this._eventBus=e},callAjaxExchangeRates:function(e){var t=e.currencyFrom,n=e.currencyTo,a={EXTERNAL_ID:"BOOKING",TRANSACTION_ID:"CurrencyConversion",CURRENCY_FROM:t,CURRENCY_TO:n},s={url:"CurrencyConversion",uid:"CURRENCY",action:"ajax",data:a,callback:{fn:this.onExchangeRateResponse,scope:this}};this.reqMgr.sendAjax(s)},onExchangeRateResponse:function(e){var t={},n=e.response.data.business.CURRENCY;null!=n&&(t={currencyFrom:n.currencyFrom,currencyTo:n.currencyTo,exchangeRate:n.exchangeRate}),null!=this._eventBus&&this._eventBus.publish("currency:exchangerate:response",this,t)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/errorComponent/ErrorMacro.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/macroLibs/priceDetails/desktop/views/DPriceDetailsView.tml"),require("plnextv2/utils/errorComponent/ErrorMacroScript.js"),require("plnextv2/utils/widgets/plnextLib/message/core/Message.js"),require("plnextv2/utils/widgets/plnextLib/modalDialog/core/ModalDialog.js"),require("plnextv2/utils/widgets/plnextLib/button/core/Button.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.errorComponent.ErrorMacro",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$ErrorMacroScript.constructor.call(this)},$destructor:function(){this.$ErrorMacroScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_displayGlobalErrors:function(errorList,scope,isScrollTop,title,args){try{with(this)this.shouldDisplayPriceChangedPopup(scope)&&this.macro_displayPriceChangedPopup(scope),this.__$insertSection(31,{id:"error-panel",type:"div",attributes:getDisplayGlobalErrorsAttributes(args),bindRefreshTo:[{to:"globalErrors",inside:errorList}],macro:{name:"refreshGlobalErrors",args:[errorList,scope,isScrollTop,title],scope:this}}),this.__$write(this.$modifier("eat",[addFocusErrorListener(errorList,scope)]),46)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayGlobalErrors",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayGlobalErrorsWithoutFocus:function(errorList,scope,isScrollTop,title,args){try{with(this)this.shouldDisplayPriceChangedPopup(scope)&&this.macro_displayPriceChangedPopup(scope),this.__$insertSection(61,{id:"error-panel",type:"div",attributes:getDisplayGlobalErrorsAttributes(args),bindRefreshTo:[{to:"globalErrors",inside:errorList}],macro:{name:"refreshGlobalErrors",args:[errorList,scope,isScrollTop,title],scope:this}})}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayGlobalErrorsWithoutFocus",__filename,this["aria:currentLineNumber"]],_ex)}},macro_refreshGlobalErrors:function(errorList,scope,isScrollTop,title){try{with(this)if(errorList.globalErrors&&(errorList.globalErrors.E&&errorList.globalErrors.E.length>0||errorList.globalErrors.W&&errorList.globalErrors.W.length>0||errorList.globalErrors.F&&errorList.globalErrors.F.length>0)){if(this.__$write(this._errorUtils.raiseAnalyticsErrorEvents(errorList.globalErrors),83),isScrollTop&&this.__$write(this.scrollTop(),86),errorList.globalErrors.F&&errorList.globalErrors.F.length>0&&this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","Message",{type:"error",id:"global-error-message",containerBsGrid:"none",title:errorList.globalErrors.F.length+" "+plnextv2.utils.I18n.getLabel("tx_pltg_text_FatalsNumber"),titleLvl:title?title.titleLvl:"",cssClass:"global-error"},91)){this.__$write('\n\n<ul class="error">\n',99);var __v_1=errorList.globalErrors.F;void 0==errorList.globalErrors.F&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,101]);var error_ct=0;for(var error_index in __v_1)if(__v_1.hasOwnProperty(error_index)&&!this.$json.isMetadata(error_index)){var error=__v_1[error_index];error_ct++,this.__$write("\n<li>\n",102),error.linkToTarget?(this.__$write('\n<span class="error-message-with-link" data-error-code="',104),this.__$write(error.code,104),this.__$write('" ',104),this.__$statementOnEvent("click",this.$normCallback({fn:focusOnElement,scope:this,args:error.linkToTarget}),104),this.__$write(">",104),this.__$write(error.message,104),this.__$write("</span>\n",104)):(this.__$write('\n<span class="" data-error-code="',106),this.__$write(error.code,106),this.__$write('">',106),this.__$write(error.message,106),this.__$write("</span>\n",106)),error.linkMessage&&error.linkTargetId&&(this.__$write('\n<a href="javascript:;" ',109),this.__$statementOnEvent("click",this.$normCallback({fn:focusOnElement,scope:this,args:error.linkTargetId}),109),this.__$write(">",109),this.__$write(error.linkMessage,109),this.__$write("</a>\n",109)),this.__$write("\n</li>\n",111)}this.__$write("\n</ul>\n",113),this.__$endContainerWidget()}if(errorList.globalErrors.E&&errorList.globalErrors.E.length>0&&this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","Message",{type:"error",id:"global-error-message",title:errorList.globalErrors.E.length+" "+errorTitleString(errorList.globalErrors.E.length),titleLvl:title?title.titleLvl:"",cssClass:"global-error"},120)){this.__$write('\n<ul class="error">\n',127);var __v_2=errorList.globalErrors.E;void 0==errorList.globalErrors.E&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,128]);var error_ct=0;for(var error_index in __v_2)if(__v_2.hasOwnProperty(error_index)&&!this.$json.isMetadata(error_index)){var error=__v_2[error_index];error_ct++,this.__$write("\n<li>\n",129),error.listErrorFields&&getElementDoc([error.listErrorFields,error.code])?(this.__$write('\n<a href="javascript:;" ',131),this.__$statementOnEvent("click",this.$normCallback({fn:focusOnElementError,scope:this,args:[error.listErrorFields,error.code]}),131),this.__$write(' class="" data-error-code="',131),this.__$write(error.code,131),this.__$write('">',131),this.__$write(error.message,131),this.__$write("</a>\n",131)):error.linkToTarget?(this.__$write('\n<span class="error-message-with-link" data-error-code="',133),this.__$write(error.code,133),this.__$write('" ',133),this.__$statementOnEvent("click",this.$normCallback({fn:focusOnElement,scope:this,args:[error.linkToTarget,error.headerId]}),133),this.__$write(">",133),this.__$write(error.message,133),this.__$write("</span>\n",133)):(this.__$write('\n<span class="" data-error-code="',135),this.__$write(error.code,135),this.__$write('">',135),this.__$write(error.message,135),this.__$write("</span>\n",135)),error.linkMessage&&error.linkTargetId&&(this.__$write('\n<a href="javascript:;" ',138),this.__$statementOnEvent("click",this.$normCallback({fn:focusOnElement,scope:this,args:error.linkTargetId}),138),this.__$write(">",138),this.__$write(error.linkMessage,138),this.__$write("</a>\n",138)),this.__$write("\n</li>\n",140)}this.__$write("\n</ul>\n",142),this.__$endContainerWidget()}if(errorList.globalErrors.W&&errorList.globalErrors.W.length>0&&this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","Message",{type:"warning",id:"global-warning-message",containerBsGrid:"none",title:errorList.globalErrors.W.length+" "+warningTitleString(errorList.globalErrors.W.length),titleLvl:title?title.titleLvl:"",cssClass:"global-error"},150)){this.__$write('\n\n<ul class="warning">\n',158);var __v_3=errorList.globalErrors.W;void 0==errorList.globalErrors.W&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,160]);var error_ct=0;for(var error_index in __v_3)if(__v_3.hasOwnProperty(error_index)&&!this.$json.isMetadata(error_index)){var error=__v_3[error_index];error_ct++,this.__$write('\n<li>\n<span class="" data-warning-code="',161),this.__$write(error.code,162),this.__$write('">',162),this.__$write(error.message,162),this.__$write("</span>\n",162),error.linkMessage&&error.linkTargetId&&(this.__$write('\n<a href="javascript:;" ',164),this.__$statementOnEvent("click",this.$normCallback({fn:focusOnElement,scope:this,args:error.linkTargetId}),164),this.__$write(">",164),this.__$write(error.linkMessage,164),this.__$write("</a>\n",164)),this.__$write("\n</li>\n",166)}this.__$write("\n</ul>\n",168),this.__$endContainerWidget()}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["refreshGlobalErrors",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayPriceChangedPopup:function(scope){try{with(this){var priceChangedPopupData=scope.data.business.priceChangedPopupData;this.__$write(initPriceChangePopupDialogVisibility(priceChangedPopupData),178),this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","ModalDialog",{id:"price-changed-dialog",bind:{visible:{inside:priceChangedPopupData,to:"priceChangedDialogOpen"}},closeOnMouseClick:!0,closeOnEscape:!0},179)&&(this.macro_displayPriceChangedPopupContent(scope,priceChangedPopupData.oldFarePrice,priceChangedPopupData.newFarePrice),this.__$endContainerWidget())}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPriceChangedPopup",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayPriceChangedPopupContent:function(scope,oldFarePrice,newFarePrice){try{with(this)this.__$write('\n<section class="price-changed-section">\n<div class = "row">\n<div class="price-changed-disclaimer col-xs-24">\n<h2 class="price-changed-disclaimer-heading">\n',193),this.__$write(this._i18n.getLabel("tx_pltg_text_PriceChangedPopupTitle"),197),this.__$write('\n</h2>\n<p class="price-changed-disclaimer-text">\n',198),this.__$write(this._i18n.getLabel("tx_pltg_text_PriceChangedPopupDescription"),200),this.__$write('\n</p>\n</div>\n</div>\n<div class = "row">\n<div class="price-changed-price-container col-xs-24">\n<div class="price-changed-new-price">\n<h3 class="price-changed-new-price-heading">\n',201),this.__$write(this._i18n.getLabel("tx_pltg_text_PriceChangedPopupNewPriceTitle"),208),this.__$write("\n</h3>\n",209),this.macro_displayFarePriceBreakdown(newFarePrice,"price-changed-new-price-breakdown"),this.macro_displayTotalFarePrice(newFarePrice,"price-changed-new-price-total","tx_pltg_text_PriceChangedPopupNewPriceTotal"),this.__$write('\n</div>\n<div class="price-changed-old-price">\n<h3 class="price-changed-new-price-heading">\n',213),this.__$write(this._i18n.getLabel("tx_pltg_text_PriceChangedPopupOldPriceTitle"),216),this.__$write("\n</h3>\n",217),this.macro_displayFarePriceBreakdown(oldFarePrice,"price-changed-old-price-breakdown"),this.macro_displayTotalFarePrice(oldFarePrice,"price-changed-old-price-total","tx_pltg_text_PriceChangedPopupOldPriceTotal"),this.__$write('\n</div>\n</div>\n</div>\n\n<div class="row">\n<div class = "col-xs-24">\n',221),this.__$processWidgetMarkup("plnextv2.utils.widgets.PlnextLib","Button",{text:this._i18n.getLabel("tx_pltg_text_PriceChangedPopupCloseButton"),type:"primary",classList:{button:["price-changed-popup-close-button","primary"],text:["price-changed-popup-close-button-text"]},onClick:{fn:closePriceChangedPopup,scope:scope},noIcons:!1},227),this.__$write("\n</div>\n</div>\n</section>\n",240)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPriceChangedPopupContent",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayAutoUpsellInfoMessage:function(currentOutboundFFName){try{with(this){var originalFFName=this._upsellUtils.getAutoUpsellOriginalFF();if(originalFFName){var messageString=this._upsellUtils.isAutoUpsellUpgrade()?"tx_pltg_pattern_MovedToFareFamilyMessage":"tx_pltg_pattern_MovedToLowerFareFamilyMessage",autoupsellPanelTitle=plnextv2.utils.I18n.getStringFromPattern("tx_pltg_pattern_MovedToFareFamilyTitle",[currentOutboundFFName]);this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","Message",{type:"info",id:"auto-upsell-panel",title:autoupsellPanelTitle},256)&&(this.__$write("\n<p>\n",261),this.__$write(plnextv2.utils.I18n.getStringFromPatternAll(messageString,[originalFFName,currentOutboundFFName]),262),this.__$write("\n</p>\n",263),this.__$endContainerWidget()),this.__$write(this._upsellUtils.deleteAutoUpsellSessionInfo(),265)}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayAutoUpsellInfoMessage",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayFarePriceBreakdown:function(farePrice,prefixClass){try{with(this){for(var index in farePrice.travellerTypes){var currentTravellerType=farePrice.travellerTypes[index];this.priceDetails.macro_displayPriceRowWithMultiplicity(prefixClass,prefixClass+"-total-text",prefixClass+"-total-amount",this._stringResources.getNumberedLabelFromTravType(currentTravellerType.travellerType,currentTravellerType.numberOfTravellers),currentTravellerType.totalAmount.amount,currentTravellerType.totalAmount.currency,prefixClass+"-total-currency",prefixClass+"-total-value",currentTravellerType.numberOfTravellers,prefixClass+"-multiplicity-number")}farePrice.travellerTypes.length>0&&(this.__$write('\n<div class="',286),this.__$write(prefixClass,286),this.__$write('-separator-container">\n<hr class="',286),this.__$write(prefixClass,287),this.__$write('-separator">\n</div>\n',287))}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayFarePriceBreakdown",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayTotalFarePrice:function(farePrice,prefixClass,totalLabel){try{with(this)this.priceDetails.macro_displayPriceRow(prefixClass,prefixClass+"-text",prefixClass+"-amount",this._i18n.getLabel(totalLabel),farePrice.totalAmount.amount,farePrice.totalAmount.currency,prefixClass+"-currency",prefixClass+"-value",!1,!1)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTotalFarePrice",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={priceDetails:"plnextv2.utils.macroLibs.priceDetails.desktop.views.DPriceDetailsView"},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.errorComponent.ErrorMacroScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/errorComponent/ErrorMacroScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.errorComponent.ErrorMacroScript",$dependencies:["aria.utils.Array","aria.utils.Dom","aria.utils.Event","aria.utils.Json","plnextv2.utils.ErrorUtils","plnextv2.utils.HtmlUtils","plnextv2.utils.DeviceUtils","plnextv2.utils.context.AppContext","aria.utils.Path","plnextv2.utils.StringResources","plnextv2.utils.UpsellUtils"],$statics:{LANGUAGE_STRINGS:{OLD_ERROR_TITLE:"tx_pltg_text_ErrorsNumber",ERROR_TITLE_SINGLE:"tx_pltg_text_ErrorMessageTitle",ERROR_TITLE_MULTI:"tx_pltg_text_MultipleErrorsMessageTitle",OLD_WARNING_TITLE:"tx_pltg_text_WarningsNumber",WARNING_TITLE_SINGLE:"tx_pltg_text_WarningMessageTitle",WARNING_TITLE_MULTI:"tx_pltg_text_MultipleWarningsMessageTitle"},MACRO_NEW_STYLE_PARAM:"messagesNewStyle"},$constructor:function(){this.oldErrorSectionHeight=0,this._i18n=plnextv2.utils.I18n,this._errorUtils=plnextv2.utils.ErrorUtils,this._htmlUtils=plnextv2.utils.HtmlUtils,this.__appData=plnextv2.utils.context.AppContext,this._stringResources=plnextv2.utils.StringResources,this._upsellUtils=plnextv2.utils.UpsellUtils,this._jsonUtils=aria.utils.Json,this._listener},$destructor:function(){this._listener&&this._jsonUtils.removeListener(this._listener.container,this._listener.property,this._listener.callback,this._listener.recursive)},$prototype:{scrollTop:function(){this._htmlUtils.scrollTop()},IEScrollFix:function(e,t){var n=t.$getId("error-panel"),a=document.getElementById(n);switch(e.change){case this.$json.SPLICE:var s=document.documentElement.scrollTop-this.oldErrorSectionHeight;setTimeout(function(){window.scrollTo(0,s)},30);break;case this.$json.KEY_ADDED:default:setTimeout(function(){this.oldErrorSectionHeight=a.offsetHeight}.bind(this),30)}},focusOnErrorPanel:function(e,t){var n=t.$getElementById("error-panel");n&&this._hasNewErrors(e)&&t.$focus("error-panel"),aria.core.Browser.isIE&&this.IEScrollFix(e,t)},_hasNewErrors:function(e){switch(e.change){case this.$json.KEY_REMOVED:return!1;case this.$json.SPLICE:return e.added&&0!==e.added.length;case this.$json.KEY_ADDED:default:return!0}},addFocusErrorListener:function(e,t){var n={container:e,property:"globalErrors",callback:{fn:this.focusOnErrorPanel,scope:this,args:t},recursive:!0};this._jsonUtils.addListener(n.container,n.property,n.callback,!1,n.recursive),this._listener=n},focusOnElement:function(e,t){e.preventDefault?e.preventDefault():e.returnValue=!1;var n,a=t[0],s=t[1];if(s&&(n=document.getElementById(s).offsetHeight),"error-message-with-link"!==e.target.classList.getClassName()){var o=document.getElementById(a);o&&o.focus();var i=0;n&&(i=-1*n),this._htmlUtils.scrollTop({target:"#"+a,offsetPadding:i,speed:1})}},focusOnElementError:function(e,t){if(elementDoc=this.getElementDoc(t)){var n=elementDoc.getElementsByClassName("form-control");if(n&&n.length>0){var a=n[0];a&&(a.errorCode=t[1],a.focus())}}},getElementDoc:function(e){var t=e[0][0];"E"===t&&(e[0].shift(),t=e[0][0]);var n=document.querySelector(["[data-traveller-form='"+t+"']"]);if(!n&&t&&-1!==t.indexOf("PSPT")&&t.match(/IDENTITY_DOCUMENT_(.*)_PSPT/)&&(t=t.match(/IDENTITY_DOCUMENT_(.*)_PSPT/)[1],n=document.querySelector(["[data-traveller-form='"+t+"']"])),n){var a=n.getElementsByClassName("form-control")[0];a&&(a.errorCode=e[1],a.focus()),n=document.querySelector(["[data-traveller-form='"+t+"']"])}return n},getDisplayGlobalErrorsAttributes:function(e){return{tabindex:-1,aria:e&&e.aria}},isIOS:function(){return plnextv2.utils.DeviceUtils.isIOS()},errorTitleString:function(e){var t=this.LANGUAGE_STRINGS.OLD_ERROR_TITLE;return this.$json.getValue(this.__appData.getPageData().appData.config,this.MACRO_NEW_STYLE_PARAM,!1)&&(t=e>1?this.LANGUAGE_STRINGS.ERROR_TITLE_MULTI:this.LANGUAGE_STRINGS.ERROR_TITLE_SINGLE),this._i18n.getLabel(t)},warningTitleString:function(e){var t=this.LANGUAGE_STRINGS.OLD_WARNING_TITLE;return this.$json.getValue(this.__appData.getPageData().appData.config,this.MACRO_NEW_STYLE_PARAM,!1)&&(t=e>1?this.LANGUAGE_STRINGS.WARNING_TITLE_MULTI:this.LANGUAGE_STRINGS.WARNING_TITLE_SINGLE),this._i18n.getLabel(t)},shouldDisplayPriceChangedPopup:function(e){if(e&&aria.utils.Path.describe(e,"data.config")&&e.getPageId){var t=e.data.config[e.getPageId()];return t&&t.enablePriceChangedPopup&&aria.utils.Path.describe(e,"data.business.priceChangedPopupData")}return!1},initPriceChangePopupDialogVisibility:function(e){aria.utils.Json.setValue(e,"priceChangedDialogOpen",!1)},closePriceChangedPopup:function(){aria.utils.Json.setValue(this.data.business.priceChangedPopupData,"priceChangedDialogOpen",!1)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/errorComponent/styles/ErrorMacroStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.errorComponent.styles.ErrorMacroStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n.price-changed-old-price, .price-changed-new-price-heading, .price-changed-old-price-heading {\ndisplay: none;\n}\n.price-changed-price-container {\nmargin-top: 10px;\nmargin-bottom: 30px;\nfont-size: 16px;\n}\n.price-changed-disclaimer-heading {\nmargin: 10px 0 20px 0;\n}\n.price-changed-new-price-total-text , .price-changed-old-price-total-text {\nfont-weight: 900;\n}\n.price-changed-new-price-total-amount {\ncolor: ",7),this.__$write(this.$blue,22),this.__$write(";\nfont-size: 18px;\nfont-weight: ",22),this.__$write(this.$bold,24),this.__$write(";\n}\n.price-changed-new-price-breakdown-total-amount, .price-changed-new-price-total-amount {\ntext-align: right;\n}\n.price-changed-old-price-breakdown-separator, .price-changed-new-price-breakdown-separator {\nborder-top: 2px solid ",24),this.__$write(this.$gray,30),this.__$write(";\nmargin-bottom: 10px;\nmargin-top: 0;\n}\n.price-changed-new-price-breakdown-total-value, .price-changed-old-price-breakdown-total-value,\n.price-changed-new-price-total-value, .price-changed-old-price-total-value {\npadding-left: 5px;\n}\n.price-changed-new-price-breakdown, .price-changed-old-price-breakdown {\nmargin-bottom: 10px;\n}\n.price-changed-new-price-breakdown-multiplicity-number {\nfont-size: 12px;\npadding-top: 4px;\n}\n\n.price-changed-new-price-breakdown-total-text, .price-changed-new-price-breakdown-total-amount,\n.price-changed-new-price-breakdown-multiplicity-number, .price-changed-new-price-breakdown-separator-container,\n.price-changed-new-price-total-text, .price-changed-new-price-total-amount{\nfloat: left;\nposition: relative;\nmin-height: 1px;\npadding-left: 7.5px;\npadding-right: 7.5px;\n}\n\nbutton.btn.plnext-widget-btn > span.price-changed-popup-close-button-text {\ndisplay: inline-block;\nline-height: 22px;\ntext-align: center;\n}\n\n@media (max-width: ",30),this.__$write(this.breakpoints.XXXS_MAX,62),this.__$write(") {\n.price-changed-new-price-breakdown-multiplicity-number  {\npadding-left: 2.5px;\n}\n\n.price-changed-new-price-breakdown-total-text, .price-changed-new-price-total-text {\nwidth: 41.7%;\n}\n\n.price-changed-new-price-total-amount, .price-changed-new-price-breakdown-total-amount {\nwidth: 45.8%;\n}\n\n.price-changed-new-price-breakdown-multiplicity-number {\nwidth: 12.5%;\n}\n\n.price-changed-new-price-breakdown-separator-container {\nwidth: 100%;\n}\n}\n@media (min-width: ",62),this.__$write(this.breakpoints.XXS_MIN,83),this.__$write(") {\n.price-changed-new-price-breakdown-multiplicity-number  {\npadding-left: 22.5px;\n}\n\n.price-changed-new-price-breakdown-total-text, .price-changed-new-price-total-text,\n.price-changed-new-price-breakdown-separator-container {\nmargin-left: 12.5%;\n}\n\n.price-changed-new-price-breakdown-total-text, .price-changed-new-price-total-text,\n.price-changed-new-price-breakdown-total-amount, .price-changed-new-price-total-amount{\nwidth: 33%;\n}\n\n.price-changed-new-price-breakdown-multiplicity-number {\nwidth: 20.8%;\n}\n\n.price-changed-new-price-breakdown-separator-container {\nwidth: 66.7%;\n}\n}\n",83)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/formComponent/ApimTravellerValidator.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.formComponent.ApimTravellerValidator",$singleton:!0,$dependencies:["plnextv2.utils.CustomAriaUtils","plnextv2.utils.formComponent.FormValidator","plnextv2.utils.EventBus","plnextv2.utils.context.AppContext","plnextv2.components.common.traveller.travellerList.TravellerListCtrlHelper"],$constructor:function(){this._json=aria.utils.Json,this._dom=aria.utils.Dom,this._config=plnextv2.utils.formComponent.Config,this._customAriaUtils=plnextv2.utils.CustomAriaUtils,this._formValidator=plnextv2.utils.formComponent.FormValidator,this._arrayUtils=aria.utils.Array,this._listenersAdded=[],this._isContinueButtonTriggered=!1,this._eventBus=plnextv2.utils.context.AppContext.getEventBus(),this._pageData=plnextv2.utils.context.AppContext.getPageData(),this._travellerListCtrlHelper=plnextv2.components.common.traveller.travellerList.TravellerListCtrlHelper},$statics:{DROPOFF:"DROPOFF",PICKUP:"PICKUP",BOOKER:"BOOKER"},$prototype:{validateApimCard:function(e){var t=0;if(e.widgets&&!e.skipValidation){var n=this.validateFormWidgets(e);n&&(t+=n),this._arrayUtils.contains(this._listenersAdded,e.name)||this.addErrorListeners(e)}if(e.embeddedForms)for(var a in e.embeddedForms)if(!this._customAriaUtils.isMetadata(a)){var s=e.embeddedForms[a];t+=this.handleEmbeddedForm(s,e)}return this.updateCardErrorCount(t,e),this._arrayUtils.contains(this._listenersAdded,e.name)||this._listenersAdded.push(e.name),t+=this.onMoreValidate(e)},updateCardErrorCount:function(e,t){var n={errorCount:e};this._json.inject(n,t)},apimCardErrorHandler:function(e,t){var n,a=this.validateApimCard(t.form),s=t.skipFocus||!1;n=this._dom.getElementById(t.macro?t.macro.$getId(t.panelId+"-link"):document.querySelector(t.panelId).querySelector("a").id),a?(this.cardInError(t.macro,t.panelId),t.skipFocus||n.focus()):n.classList.contains("collapsed")||this.collapseCard(t.macro,t.panelId,s)},handleEmbeddedForm:function(e,t){for(var n=0,a=this._pageData.config.APIM_TRAVELLERS&&this._pageData.config.APIM_TRAVELLERS.optFormsHidde,s=0;s<e.length;s++)if(a||this.handleEmbeddeFormWidgets(e,s),!e[s].skipValidation){var o=this.validateFormWidgets(e[s],t);o&&(n+=o),this._arrayUtils.contains(this._listenersAdded,e[s].formPath)||(this.addErrorListeners(e[s],t),this._listenersAdded.push(e[s].formPath))}return n},handleEmbeddeFormWidgets:function(e,t){for(var n in e[t].widgets)e[t].widgets[n].errorCode&&!e[t].widgets[n].skipValidation&&(e[t].skipValidation=!1)},validateFormWidgets:function(e,t){var n=0;if(e.widgets&&!e.skipValidation)for(var a in e.widgets)null!=e.widgets[a].skipValidation&&e.widgets[a].name&&(n+=this.validateWidget(e,a,t));return n},validateWidget:function(e,t,n){var a,s=0;return a=null!=t.parentWidget?e.widgets[t.parentWidget].widget:e.widgets[t],a.model&&!this._formValidator.validateWidget(a,!0)&&++s,a.widgets&&(s=this.handleEmbeddedWidgets(a,s,!1,n)),s},onMoreValidate:function(e){var t=0;return t+=this.checkLuhn(e)},checkLuhn:function(e){for(var t=0,n=this.getFrequentFlyerWidget(e),a=0,s=n.length;s>a;a++)!n[a]||n[a].skipValidation||this._travellerListCtrlHelper.checkFFLuhn(n[a])||t++;return t},getFrequentFlyerWidget:function(e){var t=[];return e&&(t=this._validFFInputs(e,t)),t},_validFFInputs:function(e,t){if(e=e||{},e.widgets)if(e.ffCardsDisplay)for(var n=0;n<e.ffCardsDisplay.total_cards;n++)t.push(e.widgets["FREQ_Number_"+n]);else t.push(e.widgets.FREQ_Number_0);return t},addErrorListeners:function(e,t){for(var n in e.widgets)e.widgets[n].skipValidation||this.insertErrorListener(e,e.widgets[n],t),e.widgets[n].widgets&&this.handleEmbeddedWidgets(e.widgets[n],!1,e,t)},insertErrorListener:function(e,t,n){t.name&&this._json.addListener(t,"errorCode",{fn:this.updateErrors,args:[e,t,n],scope:this})},updateErrors:function(e,t){var n=t[0],a=t[1],s=t[2],o=s?this._json.getValue(s,"errorCount",0):this._json.getValue(n,"errorCount",0),i=e.oldValue,r=e.newValue;!i&&r&&++o,a.parentWidget?!r&&i&&this._formValidator.validateWidget(n.widgets[a.parentWidget],!0)&&--o:!r&&i&&--o,this.updateFormOrParentForm(n,s,o)},updateFormOrParentForm:function(e,t,n){t?this.updateCardErrorCount(n,t):this.updateCardErrorCount(n,e)},handleEmbeddedWidgets:function(e,t,n,a){var s=t;for(var o in e.widgets)this._customAriaUtils.isMetadata(o)||(t===!1||this._formValidator.validateWidget(e.widgets[o],!0)||++s,n!==!1&&this.insertErrorListener(n,e.widgets[o],a));return s},getIdSelector:function(e,t){var n="";if(-1!==e.name.indexOf("INF"))n="INF-"+t;else if(-1!==e.name.indexOf("traveller")){var a=e.name.split("_"),s=a[1],o=a[3]?a[3]:a[2];n=o+"-"+s}else(-1!==e.name.indexOf(this.DROPOFF)||-1!==e.name.indexOf(this.PICKUP)||-1!==e.name.indexOf(this.BOOKER))&&(n=e.name);var i="[id$='"+n+"']";return i},cardInError:function(e,t){var n;n=this._dom.getElementById(e?e.$getId(t+"-link"):document.querySelector(t).querySelector("a").id),n.parentElement.classList.add("apimTraveller-header-error"),n.parentElement.classList.remove("apimTraveller-header-validated"),n.classList.contains("collapsed")&&(n.classList.add("expanded"),n.setAttribute("aria-expanded",!0),n.classList.remove("collapsed"),this.openCard(e,t))},collapseCard:function(e,t,n){var a,s,o,i;e?(a=this._dom.getElementById(e.$getId(t+"-link")),s=document.querySelector("#"+e.$getId()+t+" .panel-body"),o=this._dom.getElementById(e.$getId(t)+"-validate"),i=this._dom.getElementById(e.$getId(t)+"-recap")):(a=this._dom.getElementById(document.querySelector(t).querySelector("a").id),s=document.querySelector(t+" .panel-body"),o=this._dom.getElementById(document.querySelector(t).querySelector("[id$='validate']").id),i=this._dom.getElementById(document.querySelector(t).querySelector("[id$='recap']").id)),a.setAttribute("aria-expanded",!1),a.classList.add("collapsed"),a.classList.remove("expanded"),a.parentElement.classList.add("apimTraveller-header-validated"),a.parentElement.classList.remove("apimTraveller-header-error"),jQuery(s).slideUp(),this.doRecap(t,o,i,n),this._eventBus.publish("apimTraveller:recap:ok",this)},openCard:function(e,t){var n,a,s;e?(n=document.querySelector("#"+e.$getId()+t+" .panel-body"),a=this._dom.getElementById(e.$getId(t)+"-validate"),s=this._dom.getElementById(e.$getId(t)+"-recap")):(n=document.querySelector(t+" .panel-body"),a=this._dom.getElementById(document.querySelector(t).querySelector("[id$='validate']").id),s=this._dom.getElementById(document.querySelector(t).querySelector("[id$='recap']").id)),s.classList.add("hidden"),a.classList.remove("hidden"),jQuery(n).slideDown()},doRecap:function(e,t,n,a){t.classList.add("hidden"),n.classList.remove("hidden"),-1!==e.indexOf("id$")&&(e=e.split("'")[1]),a||n.querySelector("button").focus();var s=document.querySelector("section [id$='"+e+"']"),o=s.nextSibling;this.openNextCard(o);var i=s.offsetTop||0;if(s.offsetParent)for(s=s.offsetParent;s;)i+=s.offsetTop,s=s.offsetParent;i>0&&(window.scroll(0,i),$(window).scroll())},openNextCard:function(e){for(;e&&1!==e.nodeType;)e=e.nextSibling;e&&e.querySelector("a")&&(nextCardLink=this._dom.getElementById(e.querySelector("a").id),nextCardLink&&"false"===nextCardLink.getAttribute("aria-expanded")&&!nextCardLink.parentElement.classList.contains("apimTraveller-header-validated")&&(nextCardLink.classList.add("expanded"),nextCardLink.setAttribute("aria-expanded",!0),nextCardLink.classList.remove("collapsed"),this.openCard(!1,"[id$='"+e.id+"']")))},constructErrorId:function(e,t,n){return this.apimTravellersFormErrorContainer||(this.apimTravellersFormErrorContainer=n.$getId(e+"-"+t)),this.apimTravellersFormErrorContainer}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/formComponent/CarFormMacro.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/CustomAriaUtils.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/formComponent/Config.js"),require("plnextv2/utils/formComponent/FormValidator.js"),require("plnextv2/utils/formComponent/CarFormMacroScript.js"),require("ariatemplates/html/Select.js"),require("plnextv2/utils/widgets/plnextLib/autocompleteBox/AutocompleteBox.js"),require("plnextv2/utils/widgets/light/datepicker/DatePicker.js"),require("ariatemplates/html/TextInput.js"),require("ariatemplates/html/CheckBox.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.formComponent.CarFormMacro",$extends:require("plnextv2/utils/formComponent/FormMacro.tml"),$constructor:function(){this.$FormMacro.constructor.call(this),this.$CarFormMacroScript.constructor.call(this)},$destructor:function(){this.$CarFormMacroScript.$destructor.call(this),this.$FormMacro.$destructor.call(this)},$prototype:{macro_formWidget:function(widget,parentModel,template,options){try{with(this)this.__$write(setModel(widget,parentModel,template,options),24),widget.type===this._config.widgets.type.SELECT?this.__$processWidgetMarkup("aria.html.HtmlLibrary","Select",buildSelectConfig(widget,options),27):widget.type===this._config.widgets.type.CHECKBOX?this.$FormMacro.macro_buildCheckbox.apply(this,[widget,template,options]):widget.type===this._config.widgets.type.AUTOCOMPLETEBOX?this.__$processWidgetMarkup("plnextv2.utils.widgets.PlnextLib","AutocompleteBox",buildAutocompleteBoxFieldConfig(widget,options),32):widget.type===this._config.widgets.type.DATEPICKER?this.__$processWidgetMarkup("plnextv2.utils.widgets.light.LightWidgetLib","DatePicker",buildDatePickerFieldConfig(widget,options),34):widget.type===this._config.widgets.type.TEXTFIELD&&this.__$processWidgetMarkup("aria.html.HtmlLibrary","TextInput",buildTextFieldConfig(widget,options),37)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["formWidget",__filename,this["aria:currentLineNumber"]],_ex)}},macro_formCustomTextWidget:function(widget,parentModel,template,options){try{with(this)this.__$write(setModel(widget,parentModel,template,options),44),widget.type===this._config.widgets.type.TEXTFIELD&&this.__$processWidgetMarkup("aria.html.HtmlLibrary","TextInput",buildTextAvancedFieldConfig(widget,options),47)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["formCustomTextWidget",__filename,this["aria:currentLineNumber"]],_ex)}},macro_formCustomSelecAdvancedtWidget:function(widget,parentModel,template,options){try{with(this)this.__$write(setModel(widget,parentModel,template,options),53),widget.type===this._config.widgets.type.SELECT&&this.__$processWidgetMarkup("aria.html.HtmlLibrary","Select",buildSelectAdvancedConfig(widget,options),57)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["formCustomSelecAdvancedtWidget",__filename,this["aria:currentLineNumber"]],_ex)}},macro_formLabel:function(widget,template,options){try{with(this)widget.labelI18nKey&&this.$FormMacro.macro_formLabel.apply(this,[widget,template,options])}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["formLabel",__filename,this["aria:currentLineNumber"]],_ex)}},macro_buildCheckboxWithLabel:function(widget,parentModel,template,options,label){try{with(this)widget&&(this.macro_formGroupStart(widget),this.__$write(setModel(widget,parentModel,template,options),72),this.__$write('\n<div class="form-group">\n<div class = "checkbox">\n',73),this.__$processWidgetMarkup("aria.html.HtmlLibrary","CheckBox",buildCheckboxConfig(widget,options),75),this.__$write('\n<label for="',76),this.__$write(template.$getId(getWidgetInputId(widget)),76),this.__$write('" ',76),this.exists(options,"attributes.classList")&&(this.__$write(' class="',76),this.__$write(options.attributes.classList.join(" "),76),this.__$write('" ',76)),this.__$write(">\n",76),widget.hideLabel||(this.__$write('\n<p class="text_justify">',78),this.__$write(label,78),this.__$write("</p>\n",78)),this.__$write("\n</label>\n</div>\n</div>\n",80),this.macro_formError(widget,template),this.macro_formGroupEnd(widget))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["buildCheckboxWithLabel",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderCheckbox:function(id,label,model,template){try{with(this)this.__$write('\n<div class="form-group">\n<div class="checkbox">\n',93),this.__$processWidgetMarkup("aria.html.HtmlLibrary","CheckBox",buildCheckboxConfig(id,model),95),this.__$write('\n<label for="',96),this.__$write(template.$getId(id),96),this.__$write('">',96),this.__$write(label,96),this.__$write("</label>\n</div>\n</div>\n",96)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderCheckbox",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderErrorMacro:function(widget){try{with(this)widget.errorCode&&(widget.hasOwnProperty("errorPattern")&&widget.errorPattern.hasOwnProperty(widget.errorCode)?this.__$write(this._i18n.getErrorFromPattern(widget.errorCode,widget.errorPattern[widget.errorCode]),110):this.__$write(this.$modifier("default",[this._i18n.getErrorMessage(widget.errorCode),"&nbsp;"]),112))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderErrorMacro",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.formComponent.CarFormMacroScript,e)},__$initTemplate:function(){return this.$FormMacro.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/formComponent/CarFormMacroScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.formComponent.CarFormMacroScript",$dependencies:["aria.utils.validators.Email","aria.utils.validators.Phone","aria.utils.validators.Alpha","aria.utils.validators.RegExp","aria.utils.validators.AlphaNum","aria.utils.validators.Mandatory","aria.utils.validators.Number","aria.utils.validators.String","aria.utils.validators.MinMaxLength","aria.utils.validators.MultipleValidator","aria.utils.validators.AlphaInternational","plnextv2.utils.validators.MinMaxNumber","plnextv2.utils.CustomAriaUtils"],$constructor:function(){this._config=plnextv2.utils.formComponent.Config,this._i18n=plnextv2.utils.I18n,this._formValidator=plnextv2.utils.formComponent.FormValidator,this.customAriaUtils=plnextv2.utils.CustomAriaUtils},$prototype:{buildWidgetConfig:function(e,t){var n={id:this.getWidgetInputId(e),attributes:{name:e.name}};return n.on={},(e.validateOnBlur||t&&this.exists(t,"onBlur"))&&(n.on.blur={fn:"onWidgetEvent",args:["onBlur",e,t],scope:this}),t&&this.exists(t,"onClick")&&(n.on.click={fn:"onWidgetEvent",args:["onClick",e,t],scope:this}),t&&this.exists(t,"disabled")&&t.disabled&&(n.attributes.disabled=String(t.disabled)),this.addListenerInCfg(e,t,n.on,"onFocus"),this.addListenerInCfg(e,t,n.on,"onKeyDown",!0),this.addListenerInCfg(e,t,n.on,"onKeyUp",!0),this.addListenerInCfg(e,t,n.on,"onChange"),this.addListenerInCfg(e,t,n.on,"onKeyPress"),n},buildSelectConfig:function(e,t){for(var n=this.buildWidgetConfig(e,t),a=[],s=0;s<e.options.length;s++)a[s]={value:e.options[s].value,label:e.options[s].value};var o={options:a,attributes:{placeholder:this._i18n.getLabel(e.placeHolderI18nKey)}};if(aria.utils.Json.inject(o,n,!0),this.exists(t,"widgetConfig")&&aria.utils.Json.inject(t.widgetConfig,n,!0),!this.exists(n,"bind")){var i={bind:{value:{inside:e.model,to:e.dataName}}};aria.utils.Json.inject(i,n,!1)}if(this.exists(n.attributes,"classList"))n.attributes.classList.push(this._config.css.bootstrap.input);else{var r={attributes:{classList:[this._config.css.bootstrap.input]}};aria.utils.Json.inject(r,n,!0)}return n},buildSelectAdvancedConfig:function(e,t){for(var n=this.buildWidgetConfig(e,t),a=[],s=0;s<e.options.length;s++)a[s]={value:e.options[s].value.shortName,label:e.options[s].value.label};var o={options:a,attributes:{placeholder:this._i18n.getLabel(e.placeHolderI18nKey)}};if(aria.utils.Json.inject(o,n,!0),this.exists(t,"widgetConfig")&&aria.utils.Json.inject(t.widgetConfig,n,!0),!this.exists(n,"bind")){var i={bind:{value:{inside:e.model,to:e.dataName}}};aria.utils.Json.inject(i,n,!1)}if(this.exists(n.attributes,"classList"))n.attributes.classList.push(this._config.css.bootstrap.input);else{var r={attributes:{classList:[this._config.css.bootstrap.input]}};aria.utils.Json.inject(r,n,!0)}return n},buildTextAvancedFieldConfig:function(e,t){var n=this.buildWidgetConfig(e,t),a={attributes:{placeholder:e.placeHolderI18nKey,type:e.inputType}};if(aria.utils.Json.inject(a,n,!0),this.exists(t,"widgetConfig")&&aria.utils.Json.inject(t.widgetConfig,n,!0),!this.exists(n,"bind")){var s={bind:{value:{inside:e.model,to:e.dataName}}};aria.utils.Json.inject(s,n,!1)}if(this.exists(n.attributes,"classList"))n.attributes.classList.push(this._config.css.bootstrap.input);else{var o={attributes:{classList:[this._config.css.bootstrap.input]}};aria.utils.Json.inject(o,n,!0)}return n},addListenerInCfg:function(e,t,n,a,s){(s||t&&this.exists(t,a))&&(n[a.replace(/^on/,"").toLowerCase()]={fn:"onWidgetEvent",args:[a,e,t],scope:this})}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/formComponent/Config.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.formComponent.Config",$singleton:!0,$statics:{css:{bootstrap:{input:"form-control",inputGroup:"input-group",checkbox:"checkbox",formInline:"form-inline",formHorizontal:"form-horizontal",label:"control-label",hideLabel:"sr-only",hasError:"has-error",hasSuccess:"has-success",hasFeedback:"has-feedback",hasHelp:"has-help",helpBlock:"help-block",alertLink:"alert-link",row:"row",formGroup:"form-group",formControlFeedback:"form-control-feedback",button:"btn btn-primary"},form:{widgetGlobalError:"globalError"}},id:{form:{globalErrorContainer:"form-global-errors",widgetGroupContainer:"widget-group",widgetErrorContainer:"error-message",widgetHelpContainer:"widget-help",widgetGlobalErrorContainer:"global-error-message",widgetInput:"widget-input"}},validators:{type:{ALPHA:"ALPHA",ALPHA_INTERNATIONAL:"ALPHA_INTERNATIONAL",ALPHA_NUM:"ALPHA_NUM",EMAIL:"EMAIL",MANDATORY:"MANDATORY",NUMBER:"NUMBER",PHONE:"PHONE",STRING:"STRING",REGEXP:"REGEXP",MINMAX_LENGTH:"MINMAX_LENGTH",MINMAX_NUMBER:"MINMAX_NUMBER",NOT_PAST_DATE:"NOT_PAST_DATE",NOT_FUTURE_DATE:"NOT_FUTURE_DATE",DATE_SELECT:"DATE_SELECT",DATE_IN_RANGES:"DATE_IN_RANGES",VALUE_IN_LIST:"VALUE_IN_LIST",VALUE_IN_LIST_COUNTRY_CODE:"VALUE_IN_LIST_COUNTRY_CODE"}},widgets:{type:{TEXTFIELD:"TEXTFIELD",TEXTLABEL:"TEXTLABEL",TEXTAREA:"TEXTAREA",CHECKBOX:"CHECKBOX",SELECT:"SELECT",RADIOBUTTON:"RADIOBUTTON",HIDDEN:"HIDDEN",GAUGE:"GAUGE",DATEFIELD:"DATEFIELD",DATEPICKER:"DATEPICKER",AUTOCOMPLETEBOX:"AUTOCOMPLETEBOX",MULTIPLESELECT:"MULTIPLESELECT",CONTAINER:"CONTAINER",DATESELECT:"DATESELECT"}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/formComponent/FormMacro.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/CustomAriaUtils.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/formComponent/Config.js"),require("plnextv2/utils/formComponent/FormValidator.js"),require("ariatemplates/utils/Device.js"),require("plnextv2/utils/formComponent/FormMacroScript.js"),require("ariatemplates/html/TextInput.js"),require("plnextv2/utils/widgets/plnextLib/selectBox/SelectBox.js"),require("plnextv2/utils/widgets/plnextLib/multipleSelect/MultipleSelect.js"),require("plnextv2/utils/widgets/plnextLib/autocompleteBox/AutocompleteBox.js"),require("plnextv2/utils/widgets/plnextLib/tooltip/core/CustomTooltip.js"),require("plnextv2/utils/widgets/plnextLib/message/core/Message.js"),require("plnextv2/utils/widgets/light/datepicker/DatePicker.js"),require("ariatemplates/html/CheckBox.js"),require("ariatemplates/html/RadioButton.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.formComponent.FormMacro",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$FormMacroScript.constructor.call(this)},$destructor:function(){this.$FormMacroScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_formStart:function(form,options){try{with(this){this.__$write(this.$modifier("eat",[initWidgets(form)]),37);var cfg={action:form.action,method:"POST"};options&&this.__$write(this.$modifier("eat",[aria.utils.Json.inject(options,cfg)]),47),this.__$write('\n\n<form action="',49),this.__$write(this.$modifier("eat",[cfg.action]),50),this.__$write('" method="',50),this.__$write(cfg.method,50),this.__$write('" ',50),cfg.onSubmit&&(this.__$write('onSubmit="',50),this.__$write(cfg.onSubmit,50),this.__$write('"',50)),this.__$write(">\n\n",50)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["formStart",__filename,this["aria:currentLineNumber"]],_ex)}},macro_formEnd:function(form,options){try{with(this)this.__$write("\n\n</form>\n",62)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["formEnd",__filename,this["aria:currentLineNumber"]],_ex)}},macro_formGroupStart:function(widget,options){try{with(this){var cfg=buildFormGroupStartConfig(widget,options);this.__$write('\n\n<div class="',76),this.__$write(cfg.formGroupConfig.attributes.classList.join(" "),77),this.__$write('" id="',77),this.__$write(getWidgetGroupId(widget),77),this.__$write('" ',77),widget.errorField&&(this.__$write('data-traveller-form="',77),this.__$write(widget.errorField,77)),this.__$write('">\n\n',77)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["formGroupStart",__filename,this["aria:currentLineNumber"]],_ex)}},macro_formGroupEnd:function(widget,options){try{with(this)this.__$write("\n\n</div>\n",89)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["formGroupEnd",__filename,this["aria:currentLineNumber"]],_ex)}},macro_formWidget:function(widget,parentModel,template,options){try{with(this)this.__$write(this.$modifier("eat",[setModel(widget,parentModel,template,options)]),107),widget.type===this._config.widgets.type.TEXTFIELD?this.__$processWidgetMarkup("aria.html.HtmlLibrary","TextInput",buildTextFieldConfig(widget,options),115):widget.type===this._config.widgets.type.TEXTLABEL?this.macro_buildTextLabelWidget(widget,options):widget.type===this._config.widgets.type.SELECT?this.__$processWidgetMarkup("plnextv2.utils.widgets.PlnextLib","SelectBox",buildSelectBoxConfig(widget,options),127):widget.type===this._config.widgets.type.DATEPICKER?this.macro_buildDatePicker(widget,template,options):widget.type===this._config.widgets.type.MULTIPLESELECT?this.__$processWidgetMarkup("plnextv2.utils.widgets.PlnextLib","MultipleSelect",buildMultipleSelectFieldConfig(widget,options),139):widget.type===this._config.widgets.type.CONTAINER?this.macro_buildContainerWidget(widget,parentModel,template,options):widget.type===this._config.widgets.type.AUTOCOMPLETEBOX?this.__$processWidgetMarkup("plnextv2.utils.widgets.PlnextLib","AutocompleteBox",buildAutocompleteBoxFieldConfig(widget,options),151):widget.type===this._config.widgets.type.CHECKBOX?this.macro_buildCheckbox(widget,template,options):widget.type===this._config.widgets.type.RADIOBUTTON?this.macro_buildRadio(widget,template,options):widget.type===this._config.widgets.type.DATESELECT&&this.macro_buildDateSelectWidget(widget,parentModel,template,options),this.__$write(this.$modifier("eat",[addValidators(widget)]),172)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["formWidget",__filename,this["aria:currentLineNumber"]],_ex)}},macro_formLabel:function(widget,template,options){try{with(this){var cfg=buildFormLabelConfig(widget,options),id=cfg.labelConfig.id?'id = "'+cfg.labelConfig.id+'"':"",ariaLabelHtml=getAriaLabelHtml(widget,options),ariaLabel=getAriaLabel(options);this.__$write("\n\n<label ",191),this.__$write(id,192),this.__$write(" ",192),this.__$write(ariaLabelHtml,192),this.__$write(' for="',192),this.__$write(template.$getId(getWidgetInputId(widget)),192),this.__$write('" class="',192),this.__$write(cfg.labelConfig.attributes.classList.join(" "),192),this.__$write('">\n\n',192),ariaLabel&&(this.__$write('<span style="display:none">',194),this.__$write(ariaLabel,194),this.__$write(" </span>",194)),this.__$write(getI18n(widget,"label"),196),widget.isMandatory&&(this.__$write(" ",196),this.__$write(this._i18n.getLabel("tx_pltg_text_MandatoryFieldIndicator"),196)),this.__$write("\n</label>\n",197)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["formLabel",__filename,this["aria:currentLineNumber"]],_ex)}},macro_formHelp:function(widget,template){try{with(this)this.__$insertSection(210,buildFormHelpConfig(widget,this))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["formHelp",__filename,this["aria:currentLineNumber"]],_ex)}},macro_formHelpTooltip:function(widget){try{with(this)this.__$processWidgetMarkup("plnextv2.utils.widgets.PlnextLib","Tooltip",{id:getWidgetErrorId(widget)+"-tooltip",contentMacro:{name:"renderHelpMacro",args:[widget],scope:this},associatedElem:getWidgetErrorId(widget)+"-tooltip-icon",closeButton:!1,arrow:!0,openOnMouseClick:!1,openOnMouseOver:!0,openOnMouseMove:!0,closeOnMouseOut:!0,displaySide:"right",isBodyReferencePosition:!0,showDelay:0},221)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["formHelpTooltip",__filename,this["aria:currentLineNumber"]],_ex)}},macro_formError:function(widget,template,options){try{with(this)"TEXTFIELD"==widget.type&&(this.__$write("\n<span ",253),this.__$writeId(getWidgetErrorId(widget)+"-tooltip-icon",253),this.__$write(" >\n<span ",253),this.__$writeId(getWidgetErrorId(widget)+"-icon",254),this.__$write(' style="display: none;" class="',254),this.__$write(buildFormErrorIconClassList(widget,options).join(" "),254),this.__$write('" aria-hidden="true"></span>\n</span>\n',254)),this.__$insertSection(259,buildFormErrorConfig(widget,this,options)),this.__$write(this.$modifier("eat",[aria.utils.Json.addListener(widget,"errorCode",{fn:refreshFormError,args:[widget,template],scope:this})]),262)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["formError",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderErrorMacro:function(widget){try{with(this)isValidErrorCode(widget.errorCode)&&(widget.hasOwnProperty("errorPattern")&&widget.errorPattern.hasOwnProperty(widget.errorCode)?this.__$write(this._i18n.getErrorFromPattern(widget.errorCode,widget.errorPattern[widget.errorCode]),275):this.__$write(this.$modifier("default",[this._i18n.getErrorMessage(widget.errorCode),"&nbsp;"]),277))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderErrorMacro",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderHelpMacro:function(widget){try{with(this)this.__$write(getI18n(widget,"help"),288)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderHelpMacro",__filename,this["aria:currentLineNumber"]],_ex)}},macro_formGlobalErrors:function(form,template,options){try{with(this)options=options||{},form.globalError={},form.globalErrorCount=countErrors(form),form.globalErrorTitle=form.globalErrorCount+" "+errorTitleString(form.globalErrorCount),style=form.globalErrorCount>0?"display:block;":"display:none;",this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","Message",{type:"error",id:getFormGlobalErrorsId(form),style:style,titleLvl:options.titleLvl?options.titleLvl:"h2",cssClass:"form-global-error",bind:{title:{inside:form,to:"globalErrorTitle"}}},306)&&(this.__$write("\n<p>",316),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_MissingInformationText"),316),this.__$write('</p>\n\n\n<ul class="error">\n',316),this.macro_renderFormError(form,template,form,options),this.__$write("\n</ul>\n\n",321),this.__$endContainerWidget())}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["formGlobalErrors",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderFormError:function(form,template,mainForm,options){try{with(this){for(var prop in form.widgets)if(!plnextv2.utils.CustomAriaUtils.isMetadata(prop)){var widget=form.widgets[prop];if(widget.displayGlobalErrors&&(this.__$insertSection(343,buildFormGlobalErrorConfig(widget,this,template,options)),this.__$write(this.$modifier("eat",[aria.utils.Json.addListener(widget,"errorCode",{fn:refreshFormGlobalError,args:[mainForm,widget,template],scope:this})]),346)),widget.widgets)for(var embeddedWidgetProp in widget.widgets)if(!plnextv2.utils.CustomAriaUtils.isMetadata(embeddedWidgetProp)){var embeddedWidget=widget.widgets[embeddedWidgetProp];embeddedWidget.displayGlobalErrors&&(this.__$insertSection(356,buildFormGlobalErrorConfig(embeddedWidget,this,template,options,widget.name)),this.__$write(this.$modifier("eat",[aria.utils.Json.addListener(embeddedWidget,"errorCode",{fn:refreshFormGlobalError,args:[mainForm,embeddedWidget,template],scope:this})]),358))}}{form.name}for(var embeddedFormProp in form.embeddedForms)if(!plnextv2.utils.CustomAriaUtils.isMetadata(embeddedFormProp))for(var embeddedForm=form.embeddedForms[embeddedFormProp],i=0;i<embeddedForm.length;i++)this.macro_renderFormError(embeddedForm[i],template,mainForm,options)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderFormError",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderGlobalErrorMacro:function(template,widget){try{with(this)this.__$write('\n<a href="javascript:;">\n',385),this.macro_renderErrorMacro(widget),this.__$write("\n</a>\n",387)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderGlobalErrorMacro",__filename,this["aria:currentLineNumber"]],_ex)}},macro_formSubmit:function(form,options){try{with(this){var submitLabel=getI18n(form,"submit"),cfg={submitConfig:{attributes:{classList:[this._config.css.bootstrap.button]}}};options&&(this.__$write(this.$modifier("eat",[aria.utils.Json.inject(options,cfg)]),415),this.__$write(this.$modifier("eat",[cfg.submitConfig.attributes.classList.push(this._config.css.bootstrap.button)]),418)),this.__$write('\n<button type="submit" class="',421),this.__$write(cfg.submitConfig.attributes.classList.join(" "),421),this.__$write('" ',421),this.__$statementOnEvent("click",this.$normCallback({fn:this.processForm,scope:this,args:[form,options]}),421),this.__$write(">\n",421),cfg.submitConfig.attributes.iconClass?(this.__$write('\n<i class="',423),this.__$write(cfg.submitConfig.attributes.iconClass,423),this.__$write('" aria-hidden="true"></i>\n',423),submitLabel&&(this.__$write("\n<span>",425),this.__$write(submitLabel,425),this.__$write("</span>\n",425))):cfg.submitConfig.attributes.image?(this.__$write('\n<span class="',428),this.__$write(cfg.submitConfig.attributes.image.className,428),this.__$write('">\n<img src="',428),this.__$write(cfg.submitConfig.attributes.image.path,429),this.__$write('"/>\n</span>\n',429),this.__$write(this.$modifier("default",[getI18n(form,"submit"),"Submit"]),431)):this.__$write(this.$modifier("default",[getI18n(form,"submit"),"Submit"]),433),this.__$write("\n</button>\n\n",435)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["formSubmit",__filename,this["aria:currentLineNumber"]],_ex)}},macro_buildDatePicker:function(widget,template,options){try{with(this)this.isNativeEnabled(widget)&&this.isNativeCalendarSupported()?this.macro_buildGregorianDatepicker(widget,template,options):this.__$processWidgetMarkup("plnextv2.utils.widgets.light.LightWidgetLib","DatePicker",buildDatePickerFieldConfig(widget,options),452)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["buildDatePicker",__filename,this["aria:currentLineNumber"]],_ex)}},macro_buildGregorianDatepicker:function(widget,template,options){try{with(this)aria.utils.Device.isMobile()||aria.utils.Device.isTablet()?(this.__$write('\n<div style="position: relative;">\n',471),this.__$processWidgetMarkup("aria.html.HtmlLibrary","TextInput",buildNativeDatePickerConfig(widget,_obj.assign({},options,{fakeField:!0}),template),472),this.__$processWidgetMarkup("aria.html.HtmlLibrary","TextInput",buildNativeDatePickerConfig(widget,_obj.assign({},options,{fakeSource:!0}),template),473),this.__$write("\n</div>\n",474)):this.__$processWidgetMarkup("aria.html.HtmlLibrary","TextInput",buildNativeDatePickerConfig(widget,options),476)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["buildGregorianDatepicker",__filename,this["aria:currentLineNumber"]],_ex)}},macro_buildCheckbox:function(widget,template,options){try{with(this)this.__$write('\n\n<div class = "checkbox">\n',489),this.__$processWidgetMarkup("aria.html.HtmlLibrary","CheckBox",buildCheckboxConfig(widget,options),491),this.__$write('\n<label for="',492),this.__$write(template.$getId(getWidgetInputId(widget)),492),this.__$write('" ',492),this.exists(options,"attributes.classList")&&(this.__$write(' class="',492),this.__$write(options.attributes.classList.join(" "),492),this.__$write('" ',492)),this.__$write(">\n",492),widget.hideLabel||this.__$write(getI18n(widget,"label"),494),this.__$write("\n</label>\n</div>\n",496)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["buildCheckbox",__filename,this["aria:currentLineNumber"]],_ex)}},macro_buildRadio:function(widget,template,options){try{with(this){this.__$write('\n\n\n<fieldset id="',509),this.__$write(template.$getId(getWidgetInputId(widget)),511),this.__$write('">\n<legend class="legend">',511),this.__$write(getI18n(widget,"label"),512),this.__$write("</legend>\n",512);var sortedOptions=getSortedOptionsArray(widget.options),__v_1=sortedOptions;void 0==sortedOptions&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,514]);for(var optionId_ct=0,__v_2=__v_1.length,optionId_index=0;__v_2>optionId_index;optionId_index++){var optionId=__v_1[optionId_index];optionId_ct++,this.__$write('\n<div class = "radio">\n',515);var radioOption=widget.options[optionId];this.__$processWidgetMarkup("aria.html.HtmlLibrary","RadioButton",buildRadioConfig(widget,optionId,radioOption,options),517);var cfg=buildFormLabelConfig(radioOption,options);this.__$write('\n\n\n<label for="',520),this.__$write(template.$getId(getWidgetOptionId(widget,optionId)),522),this.__$write('">\n',522),radioOption.iconPath?(this.__$write('\n\n<span class="plnext-sr-only">',524),this.__$write(getI18n(radioOption,"label"),525),this.__$write('</span>\n<img src="',525),this.__$write(radioOption.iconPath,526),this.__$write('" alt="',526),this.__$write(getI18n(radioOption,"label"),526),this.__$write('"/>\n',526)):(this.__$write('\n<span class="',528),this.__$write(cfg.labelConfig.attributes.classList.join(" "),528),this.__$write('">',528),this.__$write(getI18n(radioOption,"label"),528),this.__$write("</span>\n",528)),this.__$write("\n</label>\n</div>\n",530)}this.__$write("\n</fieldset>\n",533)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["buildRadio",__filename,this["aria:currentLineNumber"]],_ex)}},macro_buildContainerWidget:function(widget,parentModel,macro,options){try{with(this){var hideLabel=this._config.css.bootstrap.hideLabel;this.__$write('\n\n<fieldset id="',547),this.__$write(widget.htmlId,548),this.__$write('" class="row containerwidget" ',548),this.__$statementOnEvent("blur",this.$normCallback({fn:this.onWidgetBlur,scope:this,args:[widget,options]}),548),this.__$write('>\n<legend class="',548),this.__$write(hideLabel,549),this.__$write('"> ',549),this.__$write(getI18n(widget,"label"),549),this.__$write("</legend>\n",549);var model=createModelAndSetListeners(widget,parentModel,options),__v_3=widget.widgets;void 0==widget.widgets&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,551]);var embeddedWidget_ct=0;for(var embeddedWidget_index in __v_3)if(__v_3.hasOwnProperty(embeddedWidget_index)&&!this.$json.isMetadata(embeddedWidget_index)){var embeddedWidget=__v_3[embeddedWidget_index];embeddedWidget_ct++,this.__$write('\n<div class="col-xs-',552),this.__$write(calculateColSize(widget.widgets),552),this.__$write(" ",552),this.__$write(calculateAdditionalSubwidgetClasses(embeddedWidget_ct,options),552),this.__$write('">\n',552),this.macro_formGroupStart(embeddedWidget),this.macro_formWidget(embeddedWidget,model,macro,options),this.macro_formLabel(embeddedWidget,macro,{labelConfig:{attributes:{classList:[hideLabel]}}}),this.macro_formError(embeddedWidget,macro,{attributes:{classList:["feedback-no-label"]}}),this.macro_formHelp(embeddedWidget),this.macro_formGroupEnd(embeddedWidget),this.__$write("\n</div>\n",559)}this.__$write("\n</fieldset>\n",561)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["buildContainerWidget",__filename,this["aria:currentLineNumber"]],_ex)}},macro_buildDateSelectWidget:function(widget,parentModel,macro,options){try{with(this){this.__$write(this.$modifier("eat",[prepareDateSelectValidation(widget)]),574);var config=buildDateSelectConfig(widget,options);this.macro_buildContainerWidget(widget,parentModel,macro,config)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["buildDateSelectWidget",__filename,this["aria:currentLineNumber"]],_ex)}},macro_buildTextLabelWidget:function(widget,options){try{with(this)this.__$write('\n<span id="',588),this.__$write(widget.htmlId,588),this.__$write('">',588),this.__$write(getI18n(widget,"label"),588),this.__$write("</span>\n",588)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["buildTextLabelWidget",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderStandardWidget:function(widget,parentModel,template,showLabel,showHelp,options){try{with(this)widget&&(this.macro_formGroupStart(widget),showLabel&&this.macro_formLabel(widget,template),this.macro_formWidget(widget,parentModel,template,options),this.macro_formError(widget,template),this.macro_formGroupEnd(widget),showHelp&&this.macro_formHelp(widget,template))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderStandardWidget",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.formComponent.FormMacroScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/formComponent/FormMacroScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.formComponent.FormMacroScript",$dependencies:["aria.utils.Object","aria.utils.validators.Email","aria.utils.validators.Phone","aria.utils.validators.Alpha","aria.utils.validators.RegExp","aria.utils.validators.AlphaNum","aria.utils.validators.Mandatory","aria.utils.validators.Number","aria.utils.validators.String","aria.utils.validators.MinMaxLength","aria.utils.validators.MultipleValidator","aria.utils.validators.AlphaInternational","plnextv2.utils.validators.MinMaxNumber","plnextv2.utils.validators.NotFutureDate","plnextv2.utils.validators.NotPastDate","plnextv2.utils.CustomAriaUtils","aria.utils.Type","plnextv2.utils.validators.DateSelectValidator","plnextv2.utils.validators.DateInRanges","plnextv2.utils.validators.ValueInListCountryCode","plnextv2.utils.validators.ValueInList","plnextv2.utils.DeviceUtils","plnextv2.utils.ErrorUtils","plnextv2.utils.HtmlUtils","plnextv2.utils.context.AppContext"],$statics:{LANGUAGE_STRINGS:{OLD_ERROR_TITLE:"tx_pltg_text_ErrorsNumber",ERROR_TITLE_SINGLE:"tx_pltg_text_ErrorMessageTitle",ERROR_TITLE_MULTI:"tx_pltg_text_MultipleErrorsMessageTitle"},MACRO_NEW_STYLE_PARAM:"messagesNewStyle",AUTOCOMPLETE:{ON:"ON",OFF:"OFF",NONE:"NONE",DISABLED:"disabled"}},$constructor:function(){this._config=plnextv2.utils.formComponent.Config,this._i18n=plnextv2.utils.I18n,this._formValidator=plnextv2.utils.formComponent.FormValidator,this.customAriaUtils=plnextv2.utils.CustomAriaUtils,this._errorUtils=plnextv2.utils.ErrorUtils,this._obj=aria.utils.Object,this.__appData=plnextv2.utils.context.AppContext,this._typeUtils=aria.utils.Type},$prototype:{initWidgets:function(e,t){var n=e.name;t&&(n=t.formPath+"-"+e.name),aria.utils.Json.setValue(e,"formPath",n);for(var a in e.widgets)if(!this.customAriaUtils.isMetadata(a)){var i=e.widgets[a];if(aria.utils.Json.setValue(i,"parentsForms",n),i.widgets)for(var s in i.widgets)if(!this.customAriaUtils.isMetadata(s)){var r=i.widgets[s];aria.utils.Json.setValue(r,"parentsForms",n),aria.utils.Json.setValue(r,"parentWidget",i.name)}}for(var o in e.embeddedForms)if(!this.customAriaUtils.isMetadata(o))for(var l=e.embeddedForms[o],c=0;c<l.length;c++)this.initWidgets(l[c],e)},buildFormGroupStartConfig:function(e,t){var n={formGroupConfig:{attributes:{classList:[]}}},a=this._config.css.bootstrap;t&&this.$json.inject(t,n);var i=n.formGroupConfig.attributes.classList;return i.push(a.formGroup),"TEXTFIELD"==e.type&&i.push(a.hasFeedback),e.errorCode&&i.push(a.hasError),e.helpI18nKey&&i.push(a.hasHelp),e.errorField&&i.push(a.hasError),n},buildFormLabelConfig:function(e,t){var n={labelConfig:{attributes:{classList:[]}}},a=this._config.css.bootstrap;t&&t.attributes&&t.attributes.classList&&this.$json.inject(t,n);var i=n.labelConfig.attributes.classList;return i.push(a.label),e.hideLabel&&i.push(a.hideLabel),e.isMandatory&&i.push("mandatory-label"),n},buildFormHelpConfig:function(e,t){var n=this.getWidgetHelpId(e),a={id:n,attributes:{classList:["help-block"]},type:"span",bindRefreshTo:[{to:"helpI18nKey",inside:e,recursive:!1}],macro:{name:"renderHelpMacro",scope:t,args:[e]}};return a},buildFormErrorIconClassList:function(e,t){var n=[];return t&&this.exists(t,"attributes.classList")&&(n=this.$json.copy(t.attributes.classList)),n.push(this._config.css.bootstrap.formControlFeedback),e.hideLabel&&n.push("withoutLabel"),n.push(e.errorCode?"icon-exclamation-sign":"icon-ok-sign"),n},buildFormErrorConfig:function(e,t,n){var a=this.getWidgetErrorId(e),i=e.errorCode?"":"display:none",s={id:a,attributes:{classList:[""],style:i},type:"span",bindRefreshTo:[{to:"errorCode",inside:e,recursive:!1}],macro:{name:"renderErrorMacro",scope:t,args:[e]}};return n&&aria.utils.Json.inject(n,s,!0),s.attributes.classList.push(this._config.css.bootstrap.helpBlock),e.errorCode&&s.attributes.classList.push(this._config.css.bootstrap.hasError),s},refreshFormError:function(e,t){var n=t[0],a=t[1],i=this.getWidgetErrorId(n),s=a.$getElementById(i),r=a.$getElementById(i+"-icon"),o=aria.utils.Dom.getElementById(this.getWidgetGroupId(n)),l=aria.utils.Dom.getElementById(n.htmlId);if(s&&(n.errorCode||0===n.errorCode)){if(s.setStyle(""),r&&(r.setStyle("display:block"),r.classList.add("icon-exclamation-sign"),r.classList.remove("icon-ok-sign")),o){var c=new aria.utils.ClassList(o);c.add(this._config.css.bootstrap.hasError)}l.setAttribute("aria-invalid","true")}else if(s){if(s.setStyle("display:none"),r&&(void 0===n.errorCode?r.setStyle("display:none"):(r.setStyle("display:block"),r.classList.add("icon-ok-sign"),r.classList.remove("icon-exclamation-sign"))),o){var c=new aria.utils.ClassList(o);c.remove(this._config.css.bootstrap.hasError)}l.removeAttribute("aria-invalid")}},buildFormGlobalErrorConfig:function(e,t,n,a){var i=this.getWidgetGlobalErrorId(e),s=e.displayGlobalErrors&&e.errorCode?"":"display:none",r=e;if(e.widgets)for(var o in e.widgets)if(!this.customAriaUtils.isMetadata(o)){r=e.widgets[o];break}var l={id:i,attributes:{classList:[this._config.css.form.widgetGlobalError],style:s},type:"li",bindRefreshTo:[{to:"errorCode",inside:e,recursive:!1}],on:{click:{fn:this.focusWidget,args:[r]}},macro:{name:"renderGlobalErrorMacro",scope:t,args:[n,e,i]}};return a&&aria.utils.Json.inject(a,l,!0),l},processForm:function(e,t){e.preventDefault(),this._formValidator.processForm(t[0],t[1])},refreshFormGlobalError:function(e,t){var n=t[0],a=t[1],i=t[2],s=i.$getElementById(this.getWidgetGlobalErrorId(a)),r=a.errorCode?!0:!1,o=r?"":"display:none";s&&s.setStyle(o),r?(n.globalError[a.htmlId]=a.errorCode,this._errorUtils.raiseAnalyticsEventError(a.errorCode,"WidgetError")):delete n.globalError[a.htmlId];var l=aria.utils.Json.removeMetadata(n.globalError);aria.utils.Json.setValue(n,"globalErrorCount",aria.utils.Object.keys(l).length),aria.utils.Json.setValue(n,"globalErrorTitle",n.globalErrorCount+" "+this.errorTitleString(n.globalErrorCount));var c=aria.utils.Dom.getElementById(this.getFormGlobalErrorsId(n));0===n.globalErrorCount&&c&&(c.style.display="none")},buildWidgetConfig:function(e,t){t&&this.exists(t,"onMoreValidation")&&(e.hooks=e.hooks||{},e.hooks.onMoreValidation=e.hooks.onMoreValidation||[],e.hooks.onMoreValidation=e.hooks.onMoreValidation.concat(t.onMoreValidation));var n={id:this.getWidgetInputId(e),attributes:{name:e.name,aria:{describedby:e.describedByIds}}};return n.on={},(e.validateOnBlur||t&&this.exists(t,"onBlur"))&&(n.on.blur={fn:"onWidgetBlur",args:[e,t],scope:this}),e.errorField&&e.validateOnBlur&&(n.on.blur={fn:"onWidgetBlurBackendError",args:[e],scope:this}),this.addListenerInCfg(e,t,n.on,"onPaste"),this.addListenerInCfg(e,t,n.on,"onFocus"),this.addListenerInCfg(e,t,n.on,"onKeyDown",!0),this.addListenerInCfg(e,t,n.on,"onKeyUp",!0),this.addListenerInCfg(e,t,n.on,"onChange",!0),this.addListenerInCfg(e,t,n.on,"onKeyPress"),n},addAutocompleteConfiguration:function(e,t){var n=this.AUTOCOMPLETE.ON;aria.core.Browser.isChrome&&e.autoComplete===this.AUTOCOMPLETE.OFF?n=this.AUTOCOMPLETE.DISABLED:(e.autoComplete===this.AUTOCOMPLETE.NONE||e.autoComplete===this.AUTOCOMPLETE.OFF)&&(n=e.autoComplete),n!==this.AUTOCOMPLETE.NONE&&(t.attributes.autocomplete=n)},buildTextFieldConfig:function(e,t){var n=this.buildWidgetConfig(e,t),a={attributes:{placeholder:this.getI18n(e,"placeHolder"),type:e.inputType}};if(aria.utils.Json.inject(a,n,!0),this.addAutocompleteConfiguration(e,n),this.exists(t,"widgetConfig")&&aria.utils.Json.inject(t.widgetConfig,n,!0),this.injectCustomBind(e,n,"value"),this.exists(n.attributes,"classList"))n.attributes.classList.push(this._config.css.bootstrap.input);else{var i={attributes:{classList:[this._config.css.bootstrap.input]}};aria.utils.Json.inject(i,n,!0)}return n},prepareDateSelectValidation:function(e){e.model.hasOwnProperty(e.dataName)||(e.model[e.dataName]=null)},calculateAdditionalSubwidgetClasses:function(e,t){return t&&t.getWidgetClasses?t.getWidgetClasses(e):""},buildDateSelectConfig:function(e,t){return t=t||{},t.transform={fromWidget:function(e){if(e){var t=new Date(e);if(this._isValidDateObject(t))return{DateDay:""+t.getDate(),DateMonth:""+(t.getMonth()+1),DateYear:""+t.getFullYear()}}return{DateDay:"",DateMonth:"",DateYear:""}},toWidget:function(e){if(!this._isValidSubwidgetModel(e))return""!==e.DateYear||""!==e.DateMonth||""!==e.DateDay?"invalid":null;var t=new Date(e.DateYear,e.DateMonth-1,e.DateDay);return t.getMonth()!==e.DateMonth-1?"invalid":t},_isValidSubwidgetModel:function(e){return this._isNumber(e.DateYear)&&this._isNumber(e.DateDay)&&this._isNumber(e.DateMonth)},_isValidDateObject:function(e){return e&&aria.utils.Type.isDate(e)?!isNaN(e.getTime()):!1},_isNumber:function(e){return aria.utils.Type.isNumber(parseInt(e))}},t.getWidgetClasses=function(e){switch(e){case 1:return"dateWidgetOverridePaddingRight";case 2:return"dateWidgetOverridePaddingLeft dateWidgetOverridePaddingRight";case 3:return"dateWidgetOverridePaddingLeft";default:return""}},t},createModelAndSetListeners:function(e,t,n){if(!n||!n.transform)return t[e.name];var a={embeddedModel:n.transform.fromWidget(e.model[e.dataName])},i={},s={};return i.fn=function(t,i){var s=n.transform.fromWidget(e.model[e.dataName]);for(var r in s)s.hasOwnProperty(r)&&aria.utils.Json.setValue(a.embeddedModel,r,s[r],i.listenerToExclude)},i.args={listenerToExclude:s},s.fn=function(t,i){aria.utils.Json.setValue(e.model,e.dataName,n.transform.toWidget(a.embeddedModel),i.listenerToExclude)},s.args={listenerToExclude:i},aria.utils.Json.addListener(a,"embeddedModel",s,!1,!0),aria.utils.Json.addListener(e.model,e.dataName,i,!1,!0),a.embeddedModel},buildDatePickerFieldConfig:function(e,t){var n=this.buildWidgetConfig(e,t),a={dateField:{attributes:{classList:[this._config.css.bootstrap.input]}}};return aria.utils.Json.inject(a,n,!0),this.exists(t,"widgetConfig")&&aria.utils.Json.inject(t.widgetConfig,n,!0),this.injectCustomBind(e,n,"value"),n},buildAutocompleteBoxFieldConfig:function(e,t){var n=this.buildWidgetConfig(e,t),a={textField:{formControlClass:this._config.css.bootstrap.input}};if(aria.utils.Json.inject(a,n,!0),this.exists(t,"widgetConfig")&&aria.utils.Json.inject(t.widgetConfig,n,!0),!this.exists(n,"bind")){var i={bind:{value:{inside:e.model,to:e.dataName}}};aria.utils.Json.inject(i,n,!1)}return n},buildMultipleSelectFieldConfig:function(e,t){var n=this.buildWidgetConfig(e,t),a={textField:{formControlClass:this._config.css.bootstrap.input}};if(aria.utils.Json.inject(a,n,!0),this.exists(t,"widgetConfig")&&aria.utils.Json.inject(t.widgetConfig,n,!0),this.getI18n(e,"placeHolder")&&(n.placeholder=this.getI18n(e,"placeHolder")),this.exists(e,"selectElements")){for(var i=0;i<e.selectElements.length;i++){for(var s=e.selectElements[i],r=[],o=0;o<s.options.length;o++)r[o]={value:s.options[o].value,label:this.getI18n(s.options[o],"label")};{var l;n.selectConfig}"undefined"==typeof s.localizable||s.localizable?(l=this.getI18n(s,"label"),multiLabel=this.getI18n(s,"multiLabel")):(l=s.labelI18nKey,multiLabel=s.multiLabelI18nKey);var c={options:r,label:l,subLabel:this.getI18n(s,"subLabel"),multiLabel:multiLabel,classList:["select",this._config.css.bootstrap.input]};aria.utils.Json.inject(c,s,!0)}aria.utils.Json.setValue(n,"selectElements",e.selectElements)}return n},buildSelectBoxConfig:function(e,t){for(var n=this.buildWidgetConfig(e,t),a=[],i=0;i<e.options.length;i++)a[i]={value:e.options[i].value,label:this.getI18n(e.options[i],"label")};var s={options:a,attributes:{placeholder:this.getI18n(e,"placeHolder")}};if(aria.utils.Json.inject(s,n,!0),this.exists(t,"widgetConfig")&&aria.utils.Json.inject(t.widgetConfig,n,!0),this.injectCustomBind(e,n,"value",t),n.bind.value.transform={fromWidget:function(e){return"-1"===e?"":e},toWidget:function(e){return""===e?"-1":e}},this.exists(n.attributes,"classList"))n.attributes.classList.push(this._config.css.bootstrap.input);else{var r={attributes:{classList:[this._config.css.bootstrap.input]}};aria.utils.Json.inject(r,n,!0)}return n},buildCheckboxConfig:function(e,t){var n=this.buildWidgetConfig(e,t);return this.exists(t,"widgetConfig")&&aria.utils.Json.inject(t.widgetConfig,n,!0),this.injectCustomBind(e,n,"checked"),n},buildRadioConfig:function(e,t,n,a){var i=this.buildWidgetConfig(e,a),s={keyValue:t,id:this.getWidgetOptionId(e,t),value:n.value.toString(),attributes:{name:e.name},bloc:!0,label:"totoLabel"};return aria.utils.Json.inject(s,i,!0),this.exists(a,"widgetConfig")&&aria.utils.Json.inject(a.widgetConfig,i,!0),this.injectCustomBind(e,i,"selectedValue"),i},buildNativeDatePickerConfig:function(e,t,n){var a,i=this.buildWidgetConfig(e,t),s=e.model[e.dataName],r={autoselect:!1,attributes:{classList:[this._config.css.bootstrap.input],placeholder:"",type:t.fakeField?"text":"date",value:this.rfc3339DateFormat(s)}};if(this.exists(t,"widgetConfig")&&aria.utils.Json.inject(t.widgetConfig,i,!0),this.addAutocompleteConfiguration(e,i),t.fakeField&&(a=i.id,i.on={focus:{fn:function(){var e=n.$getElementById(a);return e&&e.focus(),!1},args:[]}},i.id+="-fake"),t.fakeSource&&(r.attributes.style="opacity:0 !important; position: absolute !important; top: 0;"),aria.utils.Json.inject(r,i,!0),this.injectCustomBind(e,i,"value"),t.fakeSource)i.bind.value.transform={fromWidget:function(e){return""!==e?new Date(e.replace(/-/g,"/")):""},toWidget:aria.utils.Function.bind(this.rfc3339DateFormat,this)},i.on={change:function(e){if(e.target){var t=e.target.getValue(),n=""!==t?new Date(t.replace(/-/g,"/")):"";aria.utils.Json.setValue(i.bind.value.inside,i.bind.value.to,n)}}};else if(t.fakeField){var o=t.widgetConfig.pattern||plnextv2.utils.DateUtils.FORMATS.SHORT_DATE_FORMAT_5,l=plnextv2.utils.DateUtils.retrieveDateTimePattern(o);i.bind.value.transform={toWidget:function(e){return plnextv2.utils.DateUtils.formatDate(e,l)}}}return i},isNativeCalendarSupported:function(){var e=document.createElement("input"),t="not-a-date";return e.setAttribute("type","date"),e.setAttribute("value",t),e.value!==t},isValidDate:function(e){return"[object Date]"===Object.prototype.toString.call(e)},rfc3339DateFormat:function(e){function t(e){var t=Math.floor(Math.abs(e));return(10>t?"0":"")+t}return this.isValidDate(e)?e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate()):""},isNativeEnabled:function(e){var t=e.nativeDeviceTypes,n=plnextv2.utils.DeviceUtils.getDeviceType();return t&&""!==t?t[n]:!1},addValidators:function(e){if(e.validators){var t=new aria.utils.validators.MultipleValidator;for(var n in e.validators)if(!this.customAriaUtils.isMetadata(n)){var a=e.validators[n],i=this.getValidator(a);null!==i&&t.add(i)}aria.utils.Data.setValidator(e.model,e.dataName,t)}},getValidator:function(e){switch(e.type){case this._config.validators.type.ALPHA:return new aria.utils.validators.Alpha(e.errorCode);case this._config.validators.type.ALPHA_INTERNATIONAL:return new aria.utils.validators.AlphaInternational(e.errorCode);case this._config.validators.type.ALPHA_NUM:return new aria.utils.validators.AlphaNum(e.errorCode);case this._config.validators.type.EMAIL:return new aria.utils.validators.Email(e.errorCode);case this._config.validators.type.MANDATORY:return new aria.utils.validators.Mandatory(e.errorCode);case this._config.validators.type.NUMBER:return new aria.utils.validators.Number(e.errorCode);case this._config.validators.type.PHONE:return new aria.utils.validators.Phone(e.errorCode);case this._config.validators.type.STRING:return new aria.utils.validators.String(e.errorCode);case this._config.validators.type.REGEXP:return new aria.utils.validators.RegExp(new RegExp(e.regExp),e.errorCode);case this._config.validators.type.MINMAX_LENGTH:return new aria.utils.validators.MinMaxLength(e.minLength,e.maxLength,e.errorCode);case this._config.validators.type.MINMAX_NUMBER:return new plnextv2.utils.validators.MinMaxNumber(e.minValue,e.maxValue,e.errorCode);case this._config.validators.type.NOT_FUTURE_DATE:return new plnextv2.utils.validators.NotFutureDate(e.errorCode);case this._config.validators.type.NOT_PAST_DATE:return new plnextv2.utils.validators.NotPastDate(e.errorCode);case this._config.validators.type.DATE_IN_RANGES:return new plnextv2.utils.validators.DateInRanges(e.referenceDate,e.options,e.errorCode);case this._config.validators.type.DATE_SELECT:return new plnextv2.utils.validators.DateSelectValidator(e.errorCode);case this._config.validators.type.VALUE_IN_LIST:return new plnextv2.utils.validators.ValueInList(e.codeList,e.errorCode);case this._config.validators.type.VALUE_IN_LIST_COUNTRY_CODE:return new plnextv2.utils.validators.ValueInListCountryCode(e.codeList,e.errorCode);default:return null}},onWidgetBlur:function(e,t){var n=t[0],a=t[1];n.validateOnBlur&&this._formValidator.validateWidget(n),a&&this.exists(a,"onBlur")&&this.onWidgetEvent(e,["onBlur",n,a])},onWidgetBlurBackendError:function(e,t){var n=t[0];if("DateDay"!==n.name&&"DateMonth"!==n.name){var a=this.__getErrorCodeToProcess(n),i=n.errorField,s=plnextv2.utils.context.AppContext.getPageData().errorList.globalErrors.E,r=!0,o=0,l=!1;this.__errorInList(a,s,i)||(a=this.__getErrorCodeForField(s,i));for(var c=0;c<s.length;c++){var d=s[c].listErrorFields.toString();s[c].code===a&&d&&-1!==d.indexOf(i)&&(l=!0,r=this._fieldsErrorIteration(i,s,r,c,o),o=c)}this.__checkWidgetStatus(a,n,i),this.__checkRemoveError(s,o,r,l)}},__getErrorCodeToProcess:function(e){var t=document.getElementById(e.htmlId),n=t.errorCode;return n||(n=e.errorBECode),n},__checkWidgetStatus:function(e,t,n){var a=this._getFieldElement(n);a&&""===e&&a.classList.remove("has-error"),t.errorField&&a&&!a.classList.contains("has-error")&&(t.errorField="")},__checkRemoveError:function(e,t,n,a){n&&a&&aria.utils.Json.splice(e,t,1)},__errorInList:function(e,t,n){for(var a=0;a<t.length;a++)if(t[a].code===e&&-1!==t[a].listErrorFields.toString().indexOf(n))return!0;return!1},__getErrorCodeForField:function(e,t){for(var n=0;n<e.length;n++)if(-1!==e[n].listErrorFields.toString().indexOf(t))return e[n].code;return""},_fieldsErrorIteration:function(e,t,n,a){"E"===t[a].listErrorFields[0]&&t[a].listErrorFields.shift();var i=this._getFieldElement(e),s=this.__getFieldIndex(e,t[a].listErrorFields);t[a].listErrorFields.splice(s,1),s>=t[a].listErrorFields.length&&(s=0),this._removeErrorWhenFinished(i,e,t);for(var r=t[a].listErrorFields[s];!this.focusOnNextField(r,t[a].code)&&t[a].listErrorFields.length>0;)t[a].listErrorFields.splice(s,1),s>=t[a].listErrorFields.length&&(s=0),r=t[a].listErrorFields[s];return t[a].listErrorFields.length>0&&(n=!1),n},__getFieldIndex:function(e,t){for(var n=0;n<t.length;n++)if(-1!==t[n].indexOf(e))return n;return-1},_getFieldElement:function(e){var t;if(e){var n=e;t=document.querySelector(["[data-traveller-form='"+n+"']"]),t||-1===n.indexOf("PSPT")||(n=n.match(/IDENTITY_DOCUMENT_(.*)_PSPT/)[1],t=document.querySelector(["[data-traveller-form='"+n+"']"]))}return t},_removeErrorWhenFinished:function(e,t,n){for(var a=0;a<n.length;a++)if(-1!==n[a].listErrorFields.toString().indexOf(t))return;e.classList.remove("has-error");for(var i=e.querySelectorAll(".has-error"),s=0;s<i.length;s++)i[s].classList.remove("has-error")},focusOnNextField:function(e,t){var n=this._getFieldElement(e);if(n){var a=n.getElementsByClassName("form-control")[0];return a.errorCode=t,a.focus(),!0}return!1},onWidgetEvent:function(e,t){var n=t[0],a=t[1],s=t[2];if(("onKeyDown"!=n&&"onKeyUp"!=n||e.isSpecialKey||e.shiftKey||16===e.keyCode)&&"onChange"!=n||(a.isTouched=!0),s)for(i in s[n]){var r=s[n][i],o=new aria.utils.Callback(r);o.apply(e,r.args)}},focusWidget:function(e,t){var n=t[0];plnextv2.utils.HtmlUtils.focus(n.htmlId)},getFormGlobalErrorsId:function(e){return this._config.id.form.globalErrorContainer+"-"+e.name},getIdSuffix:function(e){return(e.parentsForms?"-"+e.parentsForms:"")+(e.parentWidget?"-"+e.parentWidget:"")+"-"+e.name},getWidgetGroupId:function(e){return this._config.id.form.widgetGroupContainer+this.getIdSuffix(e)},getWidgetInputId:function(e){return this._config.id.form.widgetInput+this.getIdSuffix(e)},getWidgetOptionId:function(e,t){return this.getWidgetInputId(e)+"-"+t},getWidgetHelpId:function(e){return this._config.id.form.widgetHelpContainer+this.getIdSuffix(e)},getWidgetErrorId:function(e){return this._config.id.form.widgetErrorContainer+this.getIdSuffix(e)},getWidgetGlobalErrorId:function(e){return this._config.id.form.widgetGlobalErrorContainer+"-"+(e.parentWidget?"-"+e.parentWidget:"")+(e.parentsForms?"-"+e.parentsForms:"")+"-"+e.name},exists:function(e,t){for(var n=t.split("."),a=0,i=n.length;i>a;a++){var s=n[a];if(!(null!==e&&"object"==typeof e&&s in e))return!1;e=e[s]}return!0},countErrors:function(e){var t=0;for(var n in e.widgets)if(!this.customAriaUtils.isMetadata(n)){var a=e.widgets[n];if(a.displayGlobalErrors&&a.errorCode&&t++,a.widgets)for(var i in a.widgets)if(!this.customAriaUtils.isMetadata(i)){var s=a.widgets[i];s.displayGlobalErrors&&s.errorCode&&t++}}for(var r in e.embeddedForms)if(!this.customAriaUtils.isMetadata(r))for(var o=e.embeddedForms[r],l=0;l<o.length;l++)t+=this.countErrors(o[l]);return t},setModel:function(e,t,n,a){var i=t,s=e.name,r=e.helpI18nKey?n.$getId(this.getWidgetErrorId(e))+" "+n.$getId(this.getWidgetHelpId(e)):n.$getId(this.getWidgetErrorId(e)),o=e.disabled;if(a&&this.exists(a,"widgetConfig.bind")){var l=a.widgetConfig.bind;l.value?(i=l.value.inside,s=l.value.to):l.selectedValue?(i=l.selectedValue.inside,s=l.selectedValue.to):l.checked&&(i=l.checked.inside,s=l.checked.to),l.disabled&&(o=l.disabled.inside[l.disabled.to])}var c=n.$getId(this.getWidgetInputId(e));a&&this.exists(a,"widgetConfig.extendHtmlId")&&(c+="-"+a.widgetConfig.extendHtmlId),aria.utils.Json.setValue(e,"model",i),aria.utils.Json.setValue(e,"dataName",s),aria.utils.Json.setValue(e,"disabled",o),aria.utils.Json.setValue(e,"htmlId",c),aria.utils.Json.setValue(e,"describedByIds",r)},calculateColSize:function(e){var t=this;Object.size=function(e){var n,a=0;for(n in e)!t.customAriaUtils.isMetadata(n)&&e.hasOwnProperty(n)&&a++;return a};var n=Object.size(e);return 24/n},cleanAllFormErrors:function(e){for(var t in e.widgets)if(!this.customAriaUtils.isMetadata(t)){var n=e.widgets[t];if(aria.utils.Json.setValue(n,"errorCode",void 0),n.widgets)for(var a in n.widgets)if(!this.customAriaUtils.isMetadata(a)){var i=n.widgets[a];aria.utils.Json.setValue(i,"errorCode",void 0)}}for(var s in e.embeddedForms)if(!this.customAriaUtils.isMetadata(s))for(var r=e.embeddedForms[s],o=0;o<r.length;o++)this.cleanAllFormErrors(r[o])},closeSection:function(e,t){var n=aria.utils.Dom.getElementById(t[0]);n&&n.classList.add("hidden")},getI18n:function(e,t){return e[t+"I18nValue"]||(e[t+"I18nKey"]?this._i18n.getLabel(e[t+"I18nKey"]):"")},injectCustomBind:function(e,t,n,a){t.bind=t.bind||{},t.bind[n]||(t.bind[n]={inside:e.model,to:e.dataName}),a&&!t.bind.options&&(t.bind.options={inside:a,to:"boundOptionsList"}),t.bind.disabled||(t.bind.disabled={inside:e,to:"disabled"})},addListenerInCfg:function(e,t,n,a,i){(i||t&&this.exists(t,a))&&(n[a.replace(/^on/,"").toLowerCase()]={fn:"onWidgetEvent",args:[a,e,t],scope:this})},getSortedOptionsArray:function(e){var t=[];for(var n in e)plnextv2.utils.CustomAriaUtils.isMetadata(n)||t.push(n);return t.sort(),t},cleanErrorListeners:function(e){this.cleanFormErrorListeners(e);for(var t in e.embeddedForms)if(!this.customAriaUtils.isMetadata(t))for(var n=e.embeddedForms[t],a=0;a<n.length;a++)this.cleanFormErrorListeners(n[a])},cleanFormErrorListeners:function(e){for(widgetProp in e.widgets)if(!this.customAriaUtils.isMetadata(widgetProp)){var t=e.widgets[widgetProp];if(this.cleanWidgetErrorListeners(t),t.widgets)for(var n in t.widgets)if(!this.customAriaUtils.isMetadata(n)){var a=t.widgets[n];this.cleanWidgetErrorListeners(a)}}},cleanWidgetErrorListeners:function(e){if(e["aria:listener_errorCode"])for(var t in e["aria:listener_errorCode"]){var n=e["aria:listener_errorCode"][t];n.fn&&"#refreshFormError"==n.fn.displayName&&aria.utils.Json.removeAt(e["aria:listener_errorCode"],parseInt(t,10))}},getAriaLabelHtml:function(e,t){var n="",a=this.getAriaLabel(t);if(a){var i=this.getI18n(e,"label"),s="<div>"+i+"</div>";s=$(s).text(),n='aria-label ="'+t.labelConfig.ariaLabel+" "+s+'"'}return n},getAriaLabel:function(e){var t="";return e&&e.labelConfig.ariaLabel&&(t=e.labelConfig.ariaLabel),t},errorTitleString:function(e){var t=this.LANGUAGE_STRINGS.OLD_ERROR_TITLE;return this.$json.getValue(this.__appData.getPageData().appData.config,this.MACRO_NEW_STYLE_PARAM,!1)&&(t=e>1?this.LANGUAGE_STRINGS.ERROR_TITLE_MULTI:this.LANGUAGE_STRINGS.ERROR_TITLE_SINGLE),this._i18n.getLabel(t)},isValidErrorCode:function(e){return isNaN(e)?!!e&&e.length>0:parseFloat(e,10)>0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/formComponent/FormValidator.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.formComponent.FormValidator",$singleton:!0,$statics:{},$dependencies:["plnextv2.utils.formComponent.Config","plnextv2.utils.analytics.AnalyticsUtils","plnextv2.utils.CustomAriaUtils","aria.utils.Json"],$constructor:function(){this.customAriaUtils=plnextv2.utils.CustomAriaUtils,this._config=plnextv2.utils.formComponent.Config,this.analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils},$prototype:{processForm:function(e,t){var n,a=this.validateForm(e);if(t&&this.exists(t,"onMoreValidation"))for(var i in t.onMoreValidation)if(!aria.utils.Json.isMetadata(i)){var s=t.onMoreValidation[i];n=new aria.utils.Callback(s),a&=n.call(s.args)}"function"==typeof customFormValidation&&e&&(a&=customFormValidation(e)),a?t&&this.exists(t,"onValidationSuccess")&&(n=new aria.utils.Callback(t.onValidationSuccess),n.apply(e)):window.scrollTo(0,0);var r=plnextv2.utils.formComponent.Config.id.form.globalErrorContainer+"-"+e.name,o=aria.utils.Dom.getElementById(r);return o&&(!a&&e.globalErrorCount>0?(o.style.display="block",jQuery(o).focus()):o.style.display="none"),a},validateForm:function(e){var t,n=!0;if(!e.skipValidation){if(e.widgets)for(c in e.widgets)if(!this.customAriaUtils.isMetadata(c)){var a=e.widgets[c],i=this.validateWidget(a,!0);if(n=n&&i,i&&a.widgets)for(var s in a.widgets)if(!this.customAriaUtils.isMetadata(s)){var r=a.widgets[s];n&=this.validateWidget(r,!0)}}if(e.embeddedForms)for(var o in e.embeddedForms)if(!this.customAriaUtils.isMetadata(o))for(var l=e.embeddedForms[o],c=0;c<l.length;c++)n&=this.validateForm(l[c]);if(e.hooks&&this.exists(e.hooks,"onMoreValidation"))for(c in e.hooks.onMoreValidation)if(!aria.utils.Json.isMetadata(c)){var d=e.hooks.onMoreValidation[c];t=new aria.utils.Callback(d),n&=t.call(d.args)}n&&e.hooks&&this.exists(e.hooks,"onValidationSuccess")&&(t=new aria.utils.Callback(e.hooks.onValidationSuccess),t.apply(e))}return n},validateWidget:function(e,t){if(e instanceof Array)return!0;var n=!0,a=!e.skipValidation&&(t||""!==e.model[e.dataName]||e.isTouched);if(a){if(aria.utils.Dom.getElementById(e.htmlId)&&e.type===this._config.widgets.type.RADIOBUTTON){for(var i=null,s=document.getElementsByName(e.name),r=0;r<s.length;r++)if(s[r].checked){i=e.model[e.dataName];break}aria.utils.Json.setValue(e.model,e.dataName,i)}else e.type===this._config.widgets.type.TEXTFIELD&&aria.utils.Dom.getElementById(e.htmlId)&&!e.model[e.dataName]&&aria.utils.Json.setValue(e.model,e.dataName,aria.utils.Dom.getElementById(e.htmlId).value);var o=!0,l=!1;if(e.widgets)for(var c in e.widgets)if(!this.customAriaUtils.isMetadata(c)){var d=e.widgets[c];this.isEmptyUntouchedWidget(d)&&(l=!0);var f=this.validateWidget(d,t);o=o&&f}if(o&&(t||l===!1)&&null!=e.dataName){var p=aria.utils.Data.validateValue(e.model,e.dataName,{});if(p&&e.widgets)for(var c in e.widgets)if(!this.customAriaUtils.isMetadata(c)){var d=e.widgets[c];aria.utils.Json.setValue(d,"errorCode",0)}}if(!p&&e.hooks&&this.exists(e.hooks,"onMoreValidation"))for(var r in e.hooks.onMoreValidation)if(!aria.utils.Json.isMetadata(r)){var b=e.hooks.onMoreValidation[r],m=new aria.utils.Callback(b);p=m.call(b.args)}null!=p&&void 0!==typeof p?(aria.utils.Json.setValue(e,"errorCode",p[0].errorMessage),n=!1):(null!=e.errorCode&&aria.utils.Json.setValue(e,"errorCode",null),n=!0)}return n},isEmptyUntouchedWidget:function(e){return!(e.model&&e.dataName&&""!==e.model[e.dataName]||e.isTouched)},exists:function(e,t){for(var n=t.split("."),a=0,i=n.length;i>a;a++){var s=n[a];if(!(null!==e&&"object"==typeof e&&s in e))return!1;e=e[s]}return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/formComponent/desktop/styles/DFormMacroStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.formComponent.desktop.styles.DFormMacroStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n.containerwidget .dateWidgetOverridePaddingRight {\npadding-right:1.5px;\n}\n\n.containerwidget .dateWidgetOverridePaddingLeft {\npadding-left:1.5px;\n}\n\n",13)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/DisplayOBFees.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/macroLibs/DisplayOBFeesScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.DisplayOBFees",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$DisplayOBFeesScript.constructor.call(this)},$destructor:function(){this.$DisplayOBFeesScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_printOBFees:function(tripSummary,priceDetails){try{with(this)isMinAndMaxOBFeeAvailable(tripSummary)&&(this.__$write('\n<span class="tripsummary-price-traveller-taxes tripsummary-small-text row ">\n<span>',21),this.__$write(getOBFeesMessage(tripSummary,priceDetails),22),this.__$write("</span>\n</span>\n",22))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printOBFees",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.DisplayOBFeesScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/DisplayOBFeesScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.DisplayOBFeesScript",$dependencies:["plnextv2.utils.PriceUtils"],$constructor:function(){this._i18n=plnextv2.utils.I18n},$prototype:{getOBFeesMessage:function(e,t){if(!this.isMinAndMaxOBFeeAvailable(e)||null==t)return null;var n=null,a=this.getFormattedPriceWithHTML(e.maxOBFee,t.currency),i=this.getFormattedPriceWithHTML(e.minOBFee,t.currency);return 0===e.minOBFee?n=this._i18n.getStringFromPattern("tx_pltg_text_OBFeesCCFeesMinEqualZero",[a]):e.minOBFee<e.maxOBFee?n=this._i18n.getStringFromPattern("tx_pltg_text_OBFeesCCFeesMinAndMax",[i,a]):e.minOBFee===e.maxOBFee&&(n=this._i18n.getStringFromPattern("tx_pltg_text_OBFeesCCFeesMinAndMaxEqual",[a])),n},isMinAndMaxOBFeeAvailable:function(e){return null!=e&&e.maxOBFee>0&&e.minOBFee>=0},getFormattedPriceWithHTML:function(e,t){return null!=e&&null!=t?'<strong class="obfee-amount">'+plnextv2.utils.PriceUtils.formatCurrency(e,t)+"</strong>":void 0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/accessibility/Accessibility.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/macroLibs/accessibility/AccessibilityScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.accessibility.Accessibility",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$AccessibilityScript.constructor.call(this)},$destructor:function(){this.$AccessibilityScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_removeSkipTo:function(cfg){try{with(this)this.__$write(this.removeSkipToLink(cfg),7)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["removeSkipTo",__filename,this["aria:currentLineNumber"]],_ex)}},macro_skipTo:function(cfg,container){try{with(this){var config=this.getConfigSkipTo(cfg);container?this.__$write(this.$modifier("eat",[this.appendTo(config,container)]),14):this.__$write(this.$modifier("eat",[this.append(config)]),16)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["skipTo",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayIcon:function(iconClass){try{with(this)this.__$write('\n<i class="icon ',28),this.__$write(iconClass,28),this.__$write('" aria-hidden="true"></i>\n',28)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayIcon",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.accessibility.AccessibilityScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/accessibility/AccessibilityScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.accessibility.AccessibilityScript",$dependencies:["plnextv2.utils.AccessibilityUtils"],$constructor:function(){this._AXUtils=plnextv2.utils.AccessibilityUtils},$prototype:{getConfigSkipTo:function(e){return this._AXUtils.getConfigSkipTo(e)},append:function(e){this._AXUtils.append(e)},appendTo:function(e,t){this._AXUtils.append(e,t)},removeSkipToLink:function(e){this._AXUtils.removeSkipToLink(e)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/accessibility/styles/AccessibilityStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.accessibility.styles.AccessibilityStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_mainMacro:function(){try{with(this)this.__$write("\n\n.plnext-sr-only.plnext-sr-only-page {\nposition: fixed;\ntop: -200px;\nleft: 40px;\nz-index: 2000;\n-webkit-transition: all 0.4s ;\n-moz-transition:    all 0.4s ;\n-o-transition:      all 0.4s;\ntransition:         all 0.4s;\n}\n\n.plnext-sr-only.plnext-sr-only-page:focus {\n\ntop: 60px;\n}\n\n",9)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["mainMacro",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/airlineRecLoc/AirlineRecordLocatorView.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/StringUtils.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/macroLibs/airlineRecLoc/AirlineRecordLocatorViewScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.airlineRecLoc.AirlineRecordLocatorView",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$AirlineRecordLocatorViewScript.constructor.call(this)},$destructor:function(){this.$AirlineRecordLocatorViewScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_displayAirlineRecLocs:function(listAirlineRecords,highlight){try{with(this){var __v_1=listAirlineRecords;void 0==listAirlineRecords&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,28]);for(var airlineGroup_ct=0,__v_2=__v_1.length,airlineGroup_index=0;__v_2>airlineGroup_index;airlineGroup_index++){var airlineGroup=__v_1[airlineGroup_index];airlineGroup_ct++;var displayInfo=getAirlineRecLocDisplayInfo(airlineGroup,highlight);this.__$write('\n\n<li class="airline-record-locator">\n<span class="airline-record-name">\n',31),this.__$write(_stringUtils.capitaliseFirstLetter(_i18n.getStringFromPattern(displayInfo.pattern,displayInfo.recLocData)),34),this.__$write("\n</span>\n</li>\n",35)}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayAirlineRecLocs",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.airlineRecLoc.AirlineRecordLocatorViewScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/airlineRecLoc/AirlineRecordLocatorViewScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.airlineRecLoc.AirlineRecordLocatorViewScript",$constructor:function(){this._i18n=plnextv2.utils.I18n,this._stringUtils=plnextv2.utils.StringUtils},$prototype:{getAirlineRecLocDisplayInfo:function(e,t){var n={pattern:"tx_pltg_pattern_AirlineReservationNumber",recLocData:[]},a="",i="</span>",s="record-locator",r=e.listRecordLocator.length;t===!0&&(s+=" record-locator-highlight"),e.airlineName&&(a+=e.airlineName),r>1&&(n.pattern="tx_pltg_pattern_AirlineReservationNumbers");for(var o=0;r>o;o++)i+="<span class='"+s+"'>"+e.listRecordLocator[o],r-1>o&&(i+="</span>");return n.recLocData.push(a),n.recLocData.push(i),n}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/availability/desktop/styles/AvailabilityStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.availability.desktop.styles.AvailabilityStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n\n\n\n#dialog-content-ffRestrictionPopup .restr-popup-container h2 {\nmargin-top: 0px;\nmargin-bottom: 0px;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .ff-dtls-lt{\ndisplay: block;\nvertical-align: top;\npadding-top: 0.625em;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .ff-dtls-rt{\ndisplay: block;\n}\n\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .disclaimer {\nfont-size: 85%;\ncolor: ",10),this.__$write(this.$grayDark,32),this.__$write(";\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .pt-10.btn-align-top {\nvertical-align: top;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .origin-ff-accept-btn {\nwidth:100%;\nfont-size: 130%;\nfont-weight: bold;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .dest-ff-move-btn {\nwidth:100%;\nfont-size: 130%;\nfont-weight: bold;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .currency {\nfont-weight: bold;\nfont-size: 160%;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .mr-10 {\nmargin-right: 0.625em;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .mr-20 {\nmargin-right: 1.25em;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .px-10 {\npadding : 0.625em;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .pb-30 {\npadding-bottom : 1.875em;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .pb-20 {\npadding-bottom : 1.875em;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .pt-10 {\npadding-top : 0.625em;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .pt-none {\npadding-top : 0px;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .w82 {\nwidth : 82%;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .w18 {\nwidth : 18%;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .w89 {\nwidth : 89%;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .w11 {\nwidth : 11%;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container button.btn.plnext-widget-btn.btn-primary > span {\ntext-transform : none;\n}\n\n.hideScroll-X{\noverflow-x: hidden;\n}\n\n\n\n@media (min-width: ",32),this.__$write(this.breakpoints.SM_MIN,110),this.__$write("){\n\n\n#dialog-content-ffRestrictionPopup.dialog-content{\nmax-width: 90%;\nmax-height: 95%;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container table {\nborder-spacing: 0.625em 0em;\nborder-collapse: separate;\nfont-size: 100%;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .legend-cell {\nwidth:20%;\nborder-bottom : 1px solid ",110),this.__$write(this.$grayLightServices,126),this.__$write(";\npadding-top : 0.625em;\npadding-bottom : 0.625em;\npadding-right : 1.25em;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .legend-cell i{\ncolor : #767676;\n}\n\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .origin-ff-cell {\nwidth:40%;\npadding: 0em 0.06em 0.625em;\nborder-left: 0.25em solid;\nborder-right: 0.25em solid;\nborder-bottom : 1px solid ",126),this.__$write(this.$grayLightServices,142),this.__$write(";\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .origin-first-cell {\nborder-top-width : 0.25em;\nborder-top-style: solid;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .origin-last-cell {\nborder-bottom-width : 0.25em;\nborder-bottom-style: solid;\n}\n\n\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .dest-ff-cell {\nwidth:40%;\npadding: 0em 0.06em 0.625em;\nborder-left-width: 1px;\nborder-right-width: 1px;\nborder-left-style: solid;\nborder-right-style: solid;\nborder-bottom : 1px solid ",142),this.__$write(this.$grayLightServices,164),this.__$write(";\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .dest-first-cell {\nborder-top-width : 1px;\nborder-top-style: solid;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .dest-last-cell {\nborder-bottom-width : 1px;\nborder-bottom-style: solid;\n}\n\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .btm-dvdr-none {\nborder-bottom : none;\n}\n\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .dest-ff-move-btn {\nmargin-bottom: 0.625em;\n}\n\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .origin-ff-accept-btn {\nmargin-bottom: 0.625em;\n}\n\n}\n\n\n\n@media (min-width: ",164),this.__$write(this.breakpoints.SM_MIN,196),this.__$write(") and (-webkit-min-device-pixel-ratio:0) {\n#dialog-content-ffRestrictionPopup .restr-popup-container .dest-ff-move-btn {\nmargin-bottom: 0;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .origin-ff-accept-btn {\nmargin-bottom: 0;\n}\n}\n\n\n@media (min-width: ",196),this.__$write(this.breakpoints.MD_MIN,207),this.__$write("){\n\n#dialog-content-ffRestrictionPopup.dialog-content{\nmax-width: 60%;\n}\n}\n\n\n\n@media (max-width: ",207),this.__$write(this.breakpoints.XS_MAX,216),this.__$write("){\n#dialog-content-ffRestrictionPopup .restr-popup-container .origin-grid {\nborder-width : 0.25em;\nborder-style: solid;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .dest-grid {\nborder-width : 1px;\nborder-style: solid;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .cell-divider {\nborder-bottom : 1px solid ",216),this.__$write(this.$grayLightServices,228),this.__$write(";\noverflow: hidden;\n}\n\n#dialog-content-ffRestrictionPopup button.btn.plnext-widget-btn > span {\ntext-align: center;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container table {\nwidth: 100%;\n}\n\n#dialog-content-ffRestrictionPopup .restr-popup-container .origin-ff-accept-btn {\nmargin-bottom: 0.625em;\n}\n\n\n#dialog-ffRestrictionPopup {\noverflow-y: scroll;\n}\n\n#dialog-ffRestrictionPopup.plnext-modal-dialog {\nleft: 0.313em;\nright: 0.313em;\nwidth: 95%;\nmargin: auto;\n}\n\n#dialog-ffRestrictionPopup #dialog-content-ffRestrictionPopup {\ntop: 0;\nbottom: 0;\ntransform: none;\nmargin-bottom: 0.625em;\nmargin-top: 0.625em;\nmax-width: 100%;\n}\n\n}\n\n\n\n",228)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/availability/desktop/views/Availability.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/BootstrapUtils.js"),require("plnextv2/utils/macroLibs/uiWidgets/UIWidgets.tml"),require("plnextv2/utils/macroLibs/availability/desktop/views/AvailabilityScript.js"),require("plnextv2/utils/widgets/plnextLib/modalDialog/core/ModalDialog.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.availability.desktop.views.Availability",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$AvailabilityScript.constructor.call(this)},$destructor:function(){this.$AvailabilityScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_displayFFRestrictionPopup:function(options){try{with(this)this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","ModalDialog",{id:"ffRestrictionPopup",bind:{visible:{inside:options.data,to:"displayFFRestrictionPopup"}},closeOnMouseClick:!1,closeButton:!0,closeOnEscape:!1},15)&&(this.macro_printFFRestrictionPopup(options),this.__$endContainerWidget())}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayFFRestrictionPopup",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printFFRestrictionPopup:function(options){try{with(this)this.__$write('\n\n<button type="button" class="dialog-close-button dialog-close">\n<i title="',32),this.__$write(this._i18n.getLabel("tx_pltg_text_Close"),34),this.__$write('" aria-hidden="true" class="icon-remove">\n</i><span class="plnext-sr-only">',34),this.__$write(this._i18n.getLabel("tx_pltg_text_Close"),35),this.__$write("</span>\n</button>\n",35),this.__$insertSection(37,{bindRefreshTo:[{to:"displayFFRestrictionPopup",inside:options.data},{to:"smContent",inside:options.data.content}],macro:{name:"displayFFRestrictionPopupContent",args:[options.data],scope:this}})}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printFFRestrictionPopup",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayFFRestrictionPopupContent:function(ffRestrictionPoupOptions){try{with(this)this.__$write(customizeMainContainer(ffRestrictionPoupOptions),59),this.__$write('\n\n<div class="restr-popup-container container hidden-xs">\n',60),this.__$write(ffRestrictionPoupOptions.content.smContent,62),this.__$write('\n</div>\n\n\n<div class="restr-popup-container container visible-xs">\n',63),this.__$write(ffRestrictionPoupOptions.content.xsContent,67),this.__$write("\n</div>\n",68)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayFFRestrictionPopupContent",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={uiWidgetsLib:"plnextv2.utils.macroLibs.uiWidgets.UIWidgets"},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.availability.desktop.views.AvailabilityScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/availability/desktop/views/AvailabilityScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.availability.desktop.views.AvailabilityScript",$dependencies:["aria.utils.Dom","plnextv2.utils.I18n"],$constructor:function(){},$prototype:{customizeMainContainer:function(e){var t=document.getElementById("main-container");null!=e&&e.displayFFRestrictionPopup?t.classList.add("hideScroll-X"):t.classList.remove("hideScroll-X"),this._initFFRestrictionPopupCloseButton()},_initFFRestrictionPopupCloseButton:function(){var e="dialog-ffRestrictionPopup",t="dialog-header-ffRestrictionPopup",n="dialog-content-ffRestrictionPopup",i="dialog-close-button",a="id",s="atdelegate";if(null!=document.getElementById(e)){var r,o=document.getElementById(t);if(null!=o){r=o.getElementsByClassName(i)[0];var l,c=r.getAttribute(a),d=r.getAttribute(s),f=document.getElementById(n);null!=f&&(l=f.getElementsByClassName(i)[0],l.setAttribute(a,c),l.setAttribute(s,d)),o.style.display="none"}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/availability/mobile/views/MobileAvailability.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/macroLibs/mobileFlightInfo/MobileFlightInfo.tml"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.availability.mobile.views.MobileAvailability",$extends:require("plnextv2/utils/macroLibs/availability/tablet/views/TabletAvailability.tml"),$constructor:function(){this.$TabletAvailability.constructor.call(this)},$destructor:function(){this.$TabletAvailability.$destructor.call(this)},$prototype:{$init:function(e){var t={};Aria.copyObject(e.__$macrolibs,t),Aria.copyObject({flightLib:"plnextv2.utils.macroLibs.mobileFlightInfo.MobileFlightInfo"},t),e.__$macrolibs=t},__$initTemplate:function(){return this.$TabletAvailability.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/availability/tablet/style/TFareComparisonDialogStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.availability.tablet.style.TFareComparisonDialogStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n.fare-comparison-container{\ndisplay: block;\nmax-width: 768px;\nmargin: auto;\n}\n\n.fare-comparison-container .plnext-accordion-body {\npadding-top: 0px;\n}\n\n.plnext-accordion-element,\n.service-container{\nbackground-color: ",7),this.__$write(this.$white,20),this.__$write(";\n-webkit-box-shadow: 0 1px 3px 0 rgba(0,0,0,.25);\nbox-shadow: 0 1px 3px 0 rgba(0,0,0,.25);\nwidth:100%;\nmargin: 10px 0;\npadding: 5px 10px 1px;\n}\n\n.plnext-accordion-element ul,\n.service-container ul{\npadding-left: 0;\nmargin: 10px;\n}\n\n.fare-container>li:last-child{\nborder: none;\n}\n\n.fare-comparison-content{\npadding: 0;\n}\n\n.plnext-accordion-element ul li,\n.service-container ul li{\nborder-bottom: 1px solid ",20),this.__$write(this.$gray,44),this.__$write(";\npadding: 10px 0;\n}\n\n.plnext-accordion-element ul li .fare-name,\n.service-container ul li .fare-name{\nfont-weight: bold;\n}\n\n.fare-comparison-content .plnext-accordion-header {\nbackground-color: ",44),this.__$write(this.$white,54),this.__$write(";\ncolor: ",54),this.__$write(this.$grayDarken,55),this.__$write(";\n}\n\n.fare-comparison-content .plnext-accordion-header i:first-child:not(.icon-caret) {\nfloat: left;\n}\n\n.fare-comparison-content .plnext-accordion-header i{\ncolor: ",55),this.__$write(this.$grayBorder,63),this.__$write(";\nmargin-right: 10px;\n}\n\n.fare-comparison-content .plnext-accordion-body.collapsed,\n.fare-comparison-content .plnext-accordion-sub-header.collapsed {\noverflow: unset;\ndisplay: none;\n}\n\n",63)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/availability/tablet/views/TFareComparisonDialog.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/macroLibs/serviceFlex/desktop/views/DServiceFlex.tml"),require("plnextv2/utils/macroLibs/boundDetails/desktop/views/DBoundDetailsView.tml"),require("plnextv2/utils/formComponent/FormMacro.tml"),require("plnextv2/utils/errorComponent/ErrorMacro.tml"),require("plnextv2/utils/macroLibs/availability/tablet/views/TFareComparisonDialogScript.js"),require("plnextv2/utils/widgets/plnextLib/accordion/core/Accordion.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.availability.tablet.views.TFareComparisonDialog",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$TFareComparisonDialogScript.constructor.call(this)},$destructor:function(){this.$TFareComparisonDialogScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_fareFamilyComparisonTable:function(options){try{with(this)this.__$write('\n<div class="fare-comparison-content">\n',26),this.__$processWidgetMarkup("plnextv2.utils.widgets.PlnextLib","Accordion",this.buildAccordionConfig(options),27),this.__$write("\n</div>\n",28)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["fareFamilyComparisonTable",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayContentFF:function(options,characteristic){try{with(this){this.__$write('\n<ul class="fare-container">\n',32);var __v_1=options.fareFamilyList;void 0==options.fareFamilyList&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,33]);for(var fareFamily_ct=0,__v_2=__v_1.length,fareFamily_index=0;__v_2>fareFamily_index;fareFamily_index++){var fareFamily=__v_1[fareFamily_index];fareFamily_ct++,this.__$write('\n<li class="row fare-name-and-details">\n<div class="fare-name ',34),this.__$write(getBsGridClass(options.bsGrid,"fareName"),35),this.__$write('" style="color:',35),this.__$write(fareFamily.ffColor,35),this.__$write('">\n',35),this.__$write(fareFamily.ffName,36),this.__$write('\n</div>\n<div class="fare-details ',37),this.__$write(getBsGridClass(options.bsGrid,"fareDetails"),38),this.__$write('">\n',38);var ffCode=options.ffComparisonTable[characteristic.code][fareFamily.ffCode];ffCode&&(ffCode.fromPrice?this.__$write(displayFromPrice(ffCode.fromPrice,currency),43):this.__$write(ffCode.label,45)),this.__$write("\n</div>\n</li>\n",48)}this.__$write("\n</ul>\n",51)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayContentFF",__filename,this["aria:currentLineNumber"]],_ex)}},macro_header:function(){try{with(this)this.__$write('\n<div class="fare-comparison-header">\n<div class="pull-right">\n<button class="btn" type="button" ',55),this.__$statementOnEvent("click",this.$normCallback({fn:"onClose",scope:this}),57),this.__$write('>\n<i class="icon icon-remove" aria-hidden="true"></i>\n</button>\n</div>\n<h2 class="fare-comparison-title">\n',57),this.__$write(this._i18n.getLabel("tx_pltg_text_FaresComparison"),62),this.__$write("\n</h2>\n</div>\n",63)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["header",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={errorLib:"plnextv2.utils.errorComponent.ErrorMacro",formLib:"plnextv2.utils.formComponent.FormMacro",boundDetails:"plnextv2.utils.macroLibs.boundDetails.desktop.views.DBoundDetailsView",serviceFlex:"plnextv2.utils.macroLibs.serviceFlex.desktop.views.DServiceFlex"},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.availability.tablet.views.TFareComparisonDialogScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/availability/tablet/views/TFareComparisonDialogScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.availability.tablet.views.TFareComparisonDialogScript",$dependencies:["plnextv2.utils.BootstrapUtils","plnextv2.utils.PriceUtils","plnextv2.utils.UrlUtils"],$statics:{},$constructor:function(){this._i18n=plnextv2.utils.I18n},$prototype:{getBsGridClass:function(e,t){return plnextv2.utils.BootstrapUtils.getBsGridClass(e,t)},$displayReady:function(){},$viewReady:function(){},onClose:function(){aria.utils.Json.setValue(this.data.config,"showFareComparison",!1)},displayFromPrice:function(e,t){var n=plnextv2.utils.PriceUtils.formatCurrency(e,t);return this._i18n.getStringFromPattern("tx_pltg_text_AncillaryServicesFareFamilyFromPrice",[n])},buildAccordionConfig:function(e){for(var t=[],n=0;n<e.fareFamilyComparisonLabels.length;n++){var i=e.fareFamilyComparisonLabels[n];e.ffComparisonTable[i.code]&&t.push({heading:i.label,contentMacro:{name:"displayContentFF",args:[e,i],scope:this},iconCaretDown:"icon-chevron-down",iconCaretUp:"icon-chevron-up"})}return{accordionElements:t,headingLevel:"h3",multiSelectable:!0,isFirstElementOpenedOnInit:!1,areHeadersSticky:!0}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/availability/tablet/views/TabletAvailability.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("ariatemplates/utils/Dom.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/BootstrapUtils.js"),require("plnextv2/utils/DateUtils.js"),require("plnextv2/utils/macroLibs/uiWidgets/UIWidgets.tml"),require("plnextv2/utils/macroLibs/tabletFlightInfo/TabletFlightInfo.tml"),require("plnextv2/utils/macroLibs/boundDetails/desktop/views/DBoundDetailsView.tml"),require("plnextv2/utils/macroLibs/availability/tablet/views/TabletAvailabilityScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.availability.tablet.views.TabletAvailability",$extends:require("plnextv2/utils/macroLibs/availability/desktop/views/Availability.tml"),$constructor:function(){this.$Availability.constructor.call(this),this.$TabletAvailabilityScript.constructor.call(this)},$destructor:function(){this.$TabletAvailabilityScript.$destructor.call(this),this.$Availability.$destructor.call(this)},$prototype:{macro_flightPriceContainer:function(options){try{with(this)this.__$write('\n<div class="flight-price-container">\n<div class="fare-family" style="color: ',22),this.__$write(options.borderColor,23),this.__$write(';">\n<span class="fare-family-name">\n',23),this.__$write(options.fareFamilyName,25),this.__$write('\n</span>\n<span class="short-description">\n',26),this.__$write(options.shortDescription,28),this.__$write('\n</span>\n<i class="icon-ok-sign" aria-hidden="true"></i>\n</div>\n',29),options.displayRoundTripFare||(this.__$write('\n<div class="total-price">\n',33),this.macro_printPriceShortInformationWithInitialPrice(options),this.__$write('\n</div>\n<span class="',35),this.__$write(options.prefix,36),this.__$write('-description">\n',36),this.__$write(this.flightLib.getPriceInformationString(options.scope),37),this.__$write("\n</span>\n",38)),this.__$write('\n<div class="button-modify">\n<button class="btn" ',40),this.__$statementOnEvent("click",this.$normCallback({fn:options.modifyCollapsedBoundClickedFn,scope:options.scope,args:{boundIndex:options.boundIndex}}),41),this.__$write('>\n<span class="icon-edit"></span>',47),this.__$write(this._i18n.getLabel("tx_pltg_text_ModifyFlight"),48),this.__$write("\n</button>\n</div>\n</div>\n",49)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["flightPriceContainer",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printPriceShortInformationWithInitialPrice:function(options){try{with(this)showInitialAndDiscountedPrice(options)&&options.bestDiscountPriceFormatted?(this.__$write('\n<span class="row-button-with-price-and-discount">\n',57),this.__$write(options.bestDiscountPriceFormatted,58),this.__$write('\n</span>\n<span class="',59),this.__$write(options.prefix,60),this.__$write('-from-price row-info-bestprice-integer">\n',60),this.__$write(options.price,61),this.__$write("\n</span>\n",62)):(this.__$write('\n<span class="',64),this.__$write(options.prefix,64),this.__$write('-from-price">\n',64),this.__$write(options.price,65),this.__$write("\n</span>\n",66))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printPriceShortInformationWithInitialPrice",__filename,this["aria:currentLineNumber"]],_ex)}},macro_flightRowButton:function(options){try{with(this)this.__$write('\n<button\naria-expanded="',79),this.__$write(options.rowInfo.selected,80),this.__$write('"\nstyle="',80),this.__$write(options.borderStyle,81),this.__$write('"\n',81),this.__$writeId(options.fightLineElements.flightLineDetailsDomElemID,82),this.__$write('\nclass="bound-table-flightline-details"\n',83),-1===options.rowInfo.fareFamilyIndex&&this.__$write("disabled",84),this.__$statementOnEvent("click",this.$normCallback({fn:"onToggleAvailabilityRow",scope:options.scope,args:{getInfoRow:options.getInfoRowFn,fareFamilyIndex:options.rowInfo.fareFamilyIndex,rowId:options.rowIndex,boundIndex:options.boundIndex,flightIndex:options.flight.proposedBoundId,isAutoCollapseEnabled:options.scope.moduleCtrl.isAutocollapseViewEnabled()}}),85),this.__$write('>\n<div id="table-bound',96),this.__$write(options.boundIndex,97),this.__$write("-row",97),this.__$write(options.rowIndex,97),this.__$write('" class="bound-table-flightline-header">\n\n\n',97),this.flightLib.macro_printFlightDetails({scope:options.scope,flight:options.flight,boundIndex:options.boundIndex,rowIndex:options.rowIndex,getInfoRow:options.getInfoRowFn,arrowGridCols:options.arrowGridCols,locationGridCols:options.locationGridCols,lineGridCols:options.lineGridCols,timelineGridCols:options.timelineGridCols,ancillaryServicesGridCols:options.ancillaryServicesGridCols,nbStops:options.nbStops,airportIsChanged:options.airportIsChanged,classPrefix:"availability",hideTimelineLink:!0,showMinPrice:!0}),this.__$write("\n</div>\n</button>\n",117)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["flightRowButton",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayButtons:function(options){try{with(this)this.macro_displayFlightDetailsButton(options),this.macro_displayFareButton(options)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayButtons",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayFlightDetailsButton:function(options){try{with(this)this.__$write('\n<div class="flight-details-btn-container">\n',132),this.uiWidgetsLib.macro_button({bind:null,text:this._i18n.getLabel("txt_pltg_text_showItineraryDetails"),type:"secondary",noLeftIcon:!0,noRightIcon:!0,noIcons:!0,onClick:{fn:this.onShowItineraryButtonClick,scope:options.scope,args:{boundIndex:options.boundIndex,data:options.data,moduleCtrl:options.scope.moduleCtrl}},classList:{button:["show-itinerary-details-btn"]},attributes:{type:"button"}}),this.__$write("\n</div>\n",150)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayFlightDetailsButton",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayFareButton:function(options){try{with(this)this.__$write('\n<div class="show-fare-comparison-container">\n',154),this.uiWidgetsLib.macro_button({bind:null,text:this.getFFButtonTextFromBound(),type:"secondary",noLeftIcon:!0,noRightIcon:!0,noIcons:!0,onClick:{fn:this.onShowFareComparisonDialog,scope:options.scope,args:{config:options.data.config,boundIndex:options.boundIndex,moduleCtrl:options.scope.moduleCtrl}},attributes:{type:"button"}}),this.__$write("\n</div>\n",171)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayFareButton",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){var t={};Aria.copyObject(e.__$macrolibs,t),Aria.copyObject({boundDetails:"plnextv2.utils.macroLibs.boundDetails.desktop.views.DBoundDetailsView",flightLib:"plnextv2.utils.macroLibs.tabletFlightInfo.TabletFlightInfo",uiWidgetsLib:"plnextv2.utils.macroLibs.uiWidgets.UIWidgets"},t),e.__$macrolibs=t,aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.availability.tablet.views.TabletAvailabilityScript,e)},__$initTemplate:function(){return this.$Availability.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/availability/tablet/views/TabletAvailabilityScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.availability.tablet.views.TabletAvailabilityScript",$extends:"plnextv2.utils.macroLibs.availability.desktop.views.AvailabilityScript",$dependencies:["aria.utils.Dom","plnextv2.utils.FeeUtils"],$statics:{LABELS:{PLEASE_SELECT_A_FF:"tx_pltg_text_PleaseSelectAFF"},ICON:{PLANE_H_RIGHT:"icon-plane-right",PLANE_H_LEFT:"icon-plane-left"}},$constructor:function(){this._i18n=plnextv2.utils.I18n,this._feeUtils=plnextv2.utils.FeeUtils},$prototype:{setBsGrid:function(e){e.availabilityHeaderColFare={cols:{xs:24}},e.fareName={cols:{md:11,sm:11,xs:11}},e.fareDetails={cols:{md:13,sm:13,xs:13}}},setLineStyle:function(e){var t=this._resetSelectedLine(e);t||(e.flightLineElements.flightLineDomElem.classList.add("selected"),this.setRowBorderState(e.color,e.flightLineElements,!0,e.scope))},_resetSelectedLine:function(e){if(e.selectedItinerary){var t=e.selectedItinerary.proposedBoundId;if(e.flightLineElements.flightLineContainerDomElem&&(this.setRowBorderState(e.color,e.flightLineElements,!1,e.scope),e.flightIndex===t&&e.fareFamilyIndex===e.selectedFareFamilyIndex))return!0}return!1},setRowBorderState:function(e,t,n,i){var a=n?e:!1;if(t.flightLineContainerDomElem){var s=aria.utils.Dom.getElementById(i.$getId(t.flightLineContainerDomElemID)),r=aria.utils.Dom.getElementById(i.$getId(t.flightLineDetailsDomElemID));a?(s.style["border-color"]=a,r.style["border-color"]=a):(s.style["border-color"]="",r.style["border-color"]=""),t.flightLineDetailsDomElem.setAttribute("aria-expanded",n)}},getIconPlaneBoundClass:function(){return this.ICON.PLANE_H_RIGHT},scrollToBoundHeader:function(e){var t=jQuery("body, html"),n=jQuery("#tripsummary-mini-container"),i=jQuery("#availability-bound-"+e),a=i.offset().top;t.animate({scrollTop:a-n.height()},500)},getBorderStyle:function(e,t,n){return e>-1&&t.selected?"border-color:"+n:""},buildShowFareComparisonPopoverConfig:function(e){e.faresComparisonPopUpHeader=this._i18n.getLabel("tx_pltg_text_FaresComparison");var t={contentMacro:"displayFareComparison",binding:{show:{inside:e.config,to:"showFareComparison"},heading:{inside:e,to:"faresComparisonPopUpHeader"}},onClose:{fn:"closeFareCompPopover",args:[],scope:this}};return t},buildItineraryPopoverConfig:function(e){e.flightDetailsPopUpHeader=this._i18n.getLabel("tx_pltg_text_FlightDetailsPopUpHeader");var t={contentMacro:"displayItineraryDetails",binding:{show:{inside:e,to:"showItineraryDetails"},heading:{inside:e,to:"flightDetailsPopUpHeader"}},onClose:{fn:"closeItineraryPopover",args:[],scope:this}};return t},closeItineraryPopover:function(){var e=document.querySelector(".bound-table-flightline.selected .flight-details-btn-container>button");e&&e.focus()},closeFareCompPopover:function(){var e=document.querySelector(".bound-table-flightline.selected .show-fare-comparison-container>button");e&&e.focus()},onShowFareComparisonDialog:function(e,t){var n=this._i18n.getLabel("tx_pltg_text_FullFaresComparisonUrl");t.moduleCtrl.publishAnalyticsEvent("clickffcomparison",t),t.config.showFFComparisonNewWindow&&n.length>0?(e&&(e.preventDefault(),e.stopPropagation()),window.open(n,"_blank","menubar=no,resizable=yes ,status=no, scrollbars=yes, menubar=no, width=auto, height=auto")):(aria.utils.Json.setValue(t.config,"showFareComparisonBoundIndex",t.boundIndex),aria.utils.Json.setValue(t.config,"showFareComparison",!0))},onShowItineraryButtonClick:function(e,t){aria.utils.Json.setValue(t.data,"showItineraryDetailsBoundIndex",t.boundIndex),aria.utils.Json.setValue(t.data,"showItineraryDetails",!0),t.moduleCtrl&&t.data.listItinerary[0]&&t.data.listItinerary[0].row&&(t.rowId=t.data.listItinerary[0].row,t.moduleCtrl.publishAnalyticsEvent("clickflightdetails",t))},showInitialAndDiscountedPrice:function(e){return e.scope.data.config.displayDynamicDisc===this._feeUtils.DISPLAY_DYNAMIC_DISCOUNT_ALL||e.scope.data.config.displayDynamicDisc===this._feeUtils.DISPLAY_DYNAMIC_DISCOUNT_AVAIL},getFFButtonTextFromBound:function(e){return e&&e.ffCompDisplay&&e.ffCompDisplay.link?e.ffCompDisplay.link:this._i18n.getLabel("tx_pltg_text_ShowComparison")}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/boundDetails/desktop/styles/DBoundDetailsStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.boundDetails.desktop.styles.DBoundDetailsStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n\n.bounddetails .segment-alreadyFlown {\ndisplay: inline-block;\nfloat: right;\nbackground: ",23),this.__$write(this.$grayLighter,28),this.__$write(";\ncolor: ",28),this.__$write(this.$grayDarker,29),this.__$write(";\nfont-weight: 400;\nmargin-right:20px;\npadding: 5px 30px 5px 20px;\n}\n\n\n.bounddetails .bounds-list{\nborder-top: 1px solid ",29),this.__$write(this.$grayLight,37),this.__$write(";\npadding-top: 10px;\npadding-bottom: 15px;\npadding-left: 15px;\npadding-right: 15px;\nposition: relative;\n}\n\n.atc-acknowledged-responsibe-bound .bounddetails .bounds-list {\npadding: 0;\n}\n\n.atc-acknowledged-responsibe-bound .bounddetails .bounds-list .bound-row-title {\ndisplay: none;\n}\n\n.atc-acknowledged-bound i.icon-info-sign {\ndisplay: none;\n}\n\n.bounddetails .bound-waitlist {\ncolor: ",37),this.__$write(this.$warning,58),this.__$write(";\nmargin-bottom: 10px;\nfont-size: 14px;\n}\n\n.bounddetails .bound-waitlist.not-impacted {\ncolor: ",58),this.__$write(this.$grayDarken,64),this.__$write(";\n}\n\n.bounddetails .bound-waitlist__title {\nfont-family: ",64),this.__$write(this.$boldFont,68),this.__$write(';\n}\n\n.bounddetails .ff-name{\nfloat: left;\nmargin-right: 10px;\n}\n\n\n.bounddetails .bound-fare-text .bounddetails .ff-name{\nfloat: none;\nfont-family: "Roboto Black";\nfont-weight:',68),this.__$write(this.$bold,80),this.__$write(';\n}\n\n.bounddetails .ff-short-desc{\nfloat: left;\n}\n\n.bounddetails .bound-fare-text .bounddetails .ff-short-desc{\nfont-family: "Roboto Black";\nfont-weight:',80),this.__$write(this.$bold,89),this.__$write(";\n}\n\n.bounddetails .ff-short-desc i{\npadding: 0px 4px;\n}\n\n.bound-row-info > .itinerary-details {\nposition: static;\n\n\n\npointer-events: none;\n}\n\n\n\n\n.bound-row-info .itinerary-details > div {\nfloat: right;\nmargin: 0;\n}\n\n.bound-row-info > .itinerary-details > * {\npointer-events: all;\n}\n\n.bound-details-spacing {\npadding: 1rem;\n}\n\n.bounddetails .segment-details-right,\n.bounddetails .itinerary-details-right{\nborder-left: 1px solid ",89),this.__$write(this.$grayLight,122),this.__$write(';\npadding-left: 15px;\n}\n\n.bounddetails .segment-details-city{\nfont-family: "Roboto Black";\n}\n\n.bounddetails .icon-caret{\npadding-right: 5px;\n}\n\n.bounddetails .icon-caret-down,.bounddetails .icon-caret-right{\nfloat:left;\npadding-top:5px;\n}\n\n.bounddetails .time{\nfont-family: "Roboto Black";\nfont-size: 16px;\n}\n\n.bounddetails .days{\nfont-size: 70%;\n}\n\n.bounddetails .flight-details-city{\nfont-family: "Roboto Black";\n}\n\n.bounddetails .flight-details-airport-change{\ncolor: ',122),this.__$write(this.$red,153),this.__$write(";\n}\n\n.bounddetails .terminal-change,\n.bounddetails .segment-details-terminal-change{\ncolor: ",153),this.__$write(this.$red,158),this.__$write(';\n}\n\n.bounddetails .flight-details-stop-icon{\ntext-align: left;\npadding-left: 20px;\nmargin-right: 0px;\n}\n\n.bounddetails .flight-details-airport-icon{\ntext-align: left;\npadding-left: 20px;\n}\n\n.bounddetails .total-duration-value{\nfont-family: "Roboto Black";\n}\n\n.bounddetails .stop-number{\nfont-family: "Roboto Black";\n}\n\n.bounddetails .different-airport {\ncolor: ',158),this.__$write(this.$red,181),this.__$write(";\nfont-size: 85%;\n}\n\n.bounddetails .flight-info-left {\ntext-transform: capitalize;\nfont-variant: small-caps;\n}\n\n.bounddetails .flight-info-right--waitlist {\ncolor: ",181),this.__$write(this.$warning,191),this.__$write(";\nfont-weight: ",191),this.__$write(this.$bold,192),this.__$write(";\n}\n\n.bounddetails .total-duration-text {\ntext-transform: capitalize;\nfont-variant: small-caps;\n}\n\n.bounddetails .segment-details-stop-row, .flightinfo .segment-details-stop-row  {\nposition: relative;\npadding: 1em 0;\nmargin: 1em 0;\nborder-left: 1px solid ",192),this.__$write(this.$grayBorder,204),this.__$write(";\nborder-top: 1px solid ",204),this.__$write(this.$grayLight,205),this.__$write(";\nborder-bottom: 1px solid ",205),this.__$write(this.$grayLight,206),this.__$write(";\nbackground-color: ",206),this.__$write(this.$grayLighten,207),this.__$write(";\n}\n\n#upgradeSolutions .bounddetails .segment-details-stop{\nmargin-bottom: 10px;\nmargin-top: 20px;\n}\n\n#upgradeSolutions .segment-details-departure,\n#upgradeSolutions .segment-details-arrival {\ndisplay: inline-block;\n}\n\n#upgradeSolutions .segment-details-upgradeinformation {\nfloat: right;\ndisplay: inline-block;\npadding-right: 10px;\nposition: relative;\n}\n\n#upgradeSolutions .segment-details-upgradeinformation img {\nwidth: 100%;\n}\n\n#upgradeSolutions .upgrades-upgrade-details-description {\ndisplay: inline-block;\nwidth: 75%;\nposition: absolute;\nbottom: 5px;\nright: 10px;\ntext-align: right;\nword-wrap: break-word;\nbackground: rgba(0,0,0,0.65);\npadding: 10px;\nfont-size: 90%;\nline-height: 1.5em;\ncolor: ",207),this.__$write(this.$white,243),this.__$write(";\n}\n\n.cabin-upgrade-price-separator {\nwidth: 100%;\ndisplay: table;\nmargin: 10px 0;\n}\n\n.cabin-upgrade-price-separator-line-container {\ndisplay: table-cell;\n}\n\n.cabin-upgrade-price-separator-line {\nmargin: 0;\nheight: 5px;\n}\n\n.cabin-upgrade-price-separator-text {\ndisplay: table-cell;\nfont-weight: ",243),this.__$write(this.$bold,263),this.__$write(";\ntext-align: center;\nwidth: 5px;\npadding: 0 5px;\nwhite-space: pre;\n}\n\n.timeline-segment-stop-start-mark {\n",263),this.macro_timelineSegmentStopMarkStyle(),this.__$write("\ntop: -1px;\n}\n\n.timeline-segment-stop-end-mark {\n",272),this.macro_timelineSegmentStopMarkStyle(),this.__$write('\nbottom: -1px;\n}\n\ntime.date {\nfont-family: "Roboto Regular";\nfont-size: 16px;\n}\n\n.bounddetails .segment-details-stop-duration-text {\ntext-transform: capitalize;\nfont-variant: small-caps;\n}\n\n.bounddetails .bound-row-info{\nmargin-top: 14px;\nmargin-bottom: 0px;\n}\n\n.bounddetails .bound-row-info > .flight-timeline {\nmargin-top:20px;\n}\n\n.bounddetails .bound-label {\ndisplay: none;\n}\n\n.bounddetails .container{\nmargin-left:20px;\n}\n\n.bounddetails .itinerary .icon-icon-plane {\nfont-size: 18px;\n}\n\n.bounddetails .itinerary {\npadding-left: 0px;\nfont-family: "Roboto Black";\nfont-size: 16px;\n}\n\n.bounddetails .bound-number{\npadding: 2px 3px 2px 5px;\nmargin-right: 4px;\nfont-family: "Roboto Black";\nfont-size: 85%;\ncolor: ',277),this.__$write(this.$white,322),this.__$write(";\nwhite-space: nowrap;\ntext-align: center;\nbackground-color: ",322),this.__$write(this.$grayDarken,325),this.__$write(';\n}\n\n.bounddetails .segment-details-days{\nvertical-align: super;\nfont-family: "Roboto Black";\nfont-size: 80%\n}\n\n.bounddetails h3 {\nmargin: 0;\n}\n\n.bounddetails .bound-details{\npadding-bottom: 15px;\n}\n\n.bounddetails .horizontal-title{\nmargin-top: 5px;\nmargin-bottom: 5px;\ntext-transform: capitalize;\nfont-family: "Roboto Black";\nfont-size: 130%;\ndisplay: inline-block;\n}\n\n.bounddetails .horizontal-title-upgrades-totalduration {\nfloat: right;\nmargin: 5px 0px;\n}\n\n.bounddetails .horizontal-title .icon{\nmargin-right: 10px;\n}\n\n.bounddetails .panel-heading{\nbackground: ',325),this.__$write(this.$grayLight,361),this.__$write(";\n}\n\n.bounddetails .panel-body{\npadding: 0px;\n}\n\n.bounddetails .segment-details-airport-change{\ncolor: ",361),this.__$write(this.$red,369),this.__$write(";\n}\n\n.bounddetails .new-bound {\ncolor: ",369),this.__$write(this.$red,373),this.__$write(";\nfloat: right;\n}\n\n.segment-details.row {\nmargin-left: 1px;\ndisplay: -webkit-box;\ndisplay: -webkit-flex;\ndisplay: -ms-flexbox;\ndisplay: flex;\n}\n\n.segment-details.row .segment-details-left{\nline-height: 20px;\n\ndisplay: flex;\ndisplay: -webkit-box;\ndisplay: -webkit-flex;\ndisplay: -ms-flexbox;\n\n-webkit-align-items: center;\n-ms-flex-align: center;\nalign-items: center;\n\n-webkit-justify-content: center;\n-ms-flex-pack: center;\njustify-content: center;\n\n-webkit-box-orient: vertical;\n-webkit-box-direction: normal;\n-webkit-flex-direction: column;\n-ms-flex-direction: column;\nflex-direction: column;\n\nborder-left: 1px solid ",373),this.__$write(this.$grayBorder,407),this.__$write(";\npadding-top: 10px;\npadding-bottom: 10px;\n}\n\n.segment-details.row .segment-details-left.alert-cancel{\nborder-color: ",407),this.__$write(this.$red,413),this.__$write(";\n}\n\ndiv.segment-details-departure, div.segment-details-arrival, div.segment-details-cancel {\nwidth:100%;\n}\n\ndiv.segment-details-departure {\nmargin-top: 5px;\nmargin-bottom: 10px;\n}\n\ndiv.segment-details-arrival {\nmargin-top: 10px;\nmargin-bottom: 5px;\n}\n\n.segment-details.row .segment-details-right{\nborder-left: 1px solid ",413),this.__$write(this.$grayLight,431),this.__$write(";\n}\n\n.segment-details-left .timeline-segment-start-mark,\n.segment-details-left .timeline-segment-end-mark,\n.segment-details-right .timeline-segment-start-mark,\n.segment-details-right .timeline-segment-end-mark {\nposition: absolute;\nleft: -0.4em;\nbackground-color: ",431),this.__$write(this.$white,440),this.__$write(";\nborder-radius: 50%;\nwidth: 0.7em;\nheight: 0.7em;\nborder: 1px solid ",440),this.__$write(this.$grayBorder,444),this.__$write(";\nz-index: 1;\n}\n\n.alert-cancel .timeline-segment-start-mark,\n.alert-cancel .timeline-segment-end-mark {\nborder-color: ",444),this.__$write(this.$red,450),this.__$write(";\n}\nspan.timeline-segment-start-mark {\ntop: 0px;\n}\n\nspan.timeline-segment-end-mark {\nbottom: 0px;\n}\n\n.timeline-segment-line-normal {\nposition: absolute;\nheight: 100%;\nwidth: 0.7em;\nborder-left: 1px solid ",450),this.__$write(this.$grayBorder,464),this.__$write(";\ntop: 0;\nleft: -0.1em;\n}\n\n.timeline-segment-line-technical-stop {\nposition: absolute;\nheight: 100%;\nwidth: 0.7em;\nborder-left: 1px dashed white;\ntop: 0;\nleft: -0.6em;\n}\n\n.segment-details-technical-stops-simple {\nwidth: 100%;\n}\n\n.segment-details-terminal {\ntext-transform: capitalize;\n}\n\n.segment-details-terminal.terminal-change,.segment-details-terminal-change {\ncolor: ",464),this.__$write(this.$red,487),this.__$write(";\n}\n\n.bound-flown {\nfloat: left;\npadding: 10px;\nmargin-bottom: 10px;\nbackground-color: ",487),this.__$write(this.$grayLight,494),this.__$write(";\n}\n\n.bound-ff-uri {\nwidth: 100%;\nfloat: left;\n}\n\n.bounddetails .ff-name.ff-label-exist {\nfloat: none;\n}\n\n.ff-short-desc-unvisible {\nvisibility:hidden;\n}\n\n.segment-details.segment-details-technical-stop-row.row {\nmargin-left: 1px;\nborder-left: 1px dashed ",494),this.__$write(this.$grayBorder,512),this.__$write(";\npadding-top: 10px;\npadding-bottom: 10px;\npadding-left: 7.5px;\nborder-top: 1px solid ",512),this.__$write(this.$grayLight,516),this.__$write(";\nborder-bottom: 1px solid ",516),this.__$write(this.$grayLight,517),this.__$write(";\nbackground-color: ",517),this.__$write(this.$grayLighten,518),this.__$write(";\n}\n\n.segment-details.segment-details-technical-stop-row.row.alert-cancel {\nborder-color: ",518),this.__$write(this.$red,522),this.__$write(";\n}\n\n.segment-details-technical-stop-text{\ntext-transform: capitalize;\nfont-variant: small-caps;\n}\n\n.flight-info-fare-type-warning {\ncolor: ",522),this.__$write(this.$warning,531),this.__$write(";\n}\n\n.flight-info-fare-type-warning-bold {\ncolor: ",531),this.__$write(this.$warning,535),this.__$write(";\nfont-family: ",535),this.__$write(this.$boldFont,536),this.__$write(";\n}\n\n.flight-info-cabin-type-warning {\ncolor: ",536),this.__$write(this.$warning,540),this.__$write(";\nfont-family: ",540),this.__$write(this.$boldFont,541),this.__$write(";\n}\n\n.different-fare-families-warning {\ncolor: ",541),this.__$write(this.$warning,545),this.__$write(";\nfont-size: 14px;\nmargin-bottom: 0.5em;\nfont-family: ",545),this.__$write(this.$boldFont,548),this.__$write(";\n}\n\n.different-cabins-warning {\nfont-size: 14px;\ncolor: ",548),this.__$write(this.$warning,553),this.__$write(";\nmargin-bottom: 10px;\nfont-family: ",553),this.__$write(this.$boldFont,555),this.__$write(";\n}\n\n.different-cabins-warning-text {\ncolor: ",555),this.__$write(this.$warning,559),this.__$write(";\nmargin-bottom: 0.5em;\n}\n\n.bounddetails .itinerary-header {\nfont-size: 18px;\nmargin-bottom: 20px;\n}\n\n.bounddetails .itinerary-header .locations {\nfont-weight: ",559),this.__$write(this.$bold,569),this.__$write(";\n}\n\n\n.bounddetails .panel-heading {\noverflow: hidden;\n}\n\n.bounddetails .bounds-list {\nclear: both;\n}\n\n@media (max-width: ",569),this.__$write(this.breakpoints.XXS_MAX,581),this.__$write(") {\n.bounddetails .panel-heading h2.horizontal-title {\nmargin-bottom: 0em;\n}\n}\n\n\n\n#fare-review-bounds .bounddetails .panel-footer {\npadding-top: 0em;\npadding-bottom: 0em;\n}\n\n#fare-review-bounds .bounddetails .panel-footer .footer {\ndisplay: inline;\n}\n\n#fare-review-bounds .bounddetails .panel-footer .footer button{\nmargin: 0.625em 0.625em 0.625em 0em;\n}\n\n\n#fare-review-bounds .bounddetails .panel-footer .footer button.upgrade-flight > * {\ndisplay: inline-block;\n}\n\n\n#fare-review-bounds .bounddetails .panel-footer footer {\ndisplay: inline-block;\nborder-top: none;\npadding: 0;\n}\n\n@media (max-width: ",581),this.__$write(this.breakpoints.XXS_MAX,614),this.__$write(") {\n#fare-review-bounds .bounddetails .panel-footer footer {\nwidth: 100%;\n}\n}\n\n@media (max-width: ",614),this.__$write(this.breakpoints.XXS_MAX,620),this.__$write(") and (min-width: ",620),this.__$write(this.breakpoints.XXS_MIN,620),this.__$write(") {\n.bounds-panel-footer button.btn.plnext-widget-btn.btn-primary > span,\n.bounds-panel-footer button.btn.plnext-widget-btn.btn-primary {\nwidth: auto;\n}\n}\n\n\n.bounds-panel-body.waivable-itin-recap section.segment-details {\nbackground-color: ",620),this.__$write(this.$white,629),this.__$write(';\nmargin-top: 1.429em;\nmargin-bottom: 1.429em;\n}\n\n.bounds-panel-body.waivable-itin-recap section.segment-details:after {\ncontent: "";\nborder-bottom: 1px solid ',629),this.__$write(this.$grayLight,636),this.__$write(";\nposition: absolute;\nmargin-top: 3em;\nwidth: 100%;\ndisplay: block;\nmargin-left: -1.5em;\n}\n\n.bounds-panel-body.waivable-itin-recap section.segment-details:first-child {\nmargin-top: 0;\n}\n\n.bounds-panel-body.waivable-itin-recap section.segment-details:last-child:after {\ncontent: none;\n}\n\n.bounds-panel-body.waivable-itin-recap section.segment-details.is-disrupted {\nborder: 1px solid ",636),this.__$write(this.$red,653),this.__$write(";\npadding: 1.429em;\n}\n\n.bounds-panel-body.waivable-itin-recap section.segment-details.is-confirmed {\npadding: 0;\nmargin-bottom: 1.5em;\n}\n\n.bounds-panel-body.waivable-itin-recap section.segment-details.is-confirmed:after {\nmargin-left: 0;\nmargin-top: 1.5em;\n}\n\n.bounds-panel-body .disrupted-info {\nmargin-bottom: 0.714em;\ncolor: ",653),this.__$write(this.$red,669),this.__$write(";\n}\n\n.bounds-panel-body .disrupted-info p {\nmargin-bottom: 0;\n}\n\n.bounds-panel .bounds-panel-body .segment-details.is-disrupted .disrupted-info strong {\nfont-family: ",669),this.__$write(this.$boldFont,677),this.__$write(";\n}\n\nsection.is-disrupted .segment-disrupted,\nsection.is-disrupted .stop-segment-disrupted,\nsection.is-disrupted .technical-stop-segment-disrupted {\ncolor: ",677),this.__$write(this.$red,683),this.__$write(";\n}\n\nsection.is-disrupted .segment-details-stop-icon.icon-stopwatch,\nsection.is-disrupted .segment-details-stop-duration-text {\nfont-family: ",683),this.__$write(this.$boldFont,688),this.__$write(";\n}\n\n.flight-not-impacted {\nmargin-bottom: 0.714em;\n}\n\n.disrupted-info .title {\nfont-family: ",688),this.__$write(this.$boldFont,696),this.__$write(";\nmargin: 0;\n}\n\n.disrupted-info .info {\nline-height: 1.25em;\nmargin: 0;\n}\n\n@media (max-width: ",696),this.__$write(this.breakpoints.XXS_MAX,705),this.__$write(") {\n.bounddetails .itinerary-header .locations,\n.bounddetails .itinerary-header .date {\ndisplay: block;\n}\n}\n\n@media (min-width: ",705),this.__$write(this.breakpoints.XS_MIN,712),this.__$write(') {\n.bounddetails .itinerary-header .locations,\n.bounddetails .itinerary-header .date {\ndisplay: inline;\n}\n\n.bounddetails .itinerary-header .date:before {\ncontent: " - ";\n}\n}\n\n@media (max-width: ',712),this.__$write(this.breakpoints.XS_MAX,723),this.__$write(") {\n.segment-details.row {\ndisplay: block;\n}\n\n.bound-row-info > .itinerary-details {\nbottom: 15px;\n}\n\n.bounddetails .segment-details-right,\n.bounddetails .itinerary-details-right{\nborder-left: 1px solid ",723),this.__$write(this.$grayLight,734),this.__$write(";\npadding-left: 7.5px;\npadding-bottom: 15px;\n}\n}\n",734)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},macro_timelineSegmentStopMarkStyle:function(){try{with(this)this.__$write("\nposition: absolute;\nleft: -0.4em;\nbackground-color: ",742),this.__$write(this.$white,744),this.__$write(";\nwidth: 0.7em;\nheight: 1px;\nborder-top: 1px solid ",744),this.__$write(this.$grayBorder,747),this.__$write(";\n",747)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["timelineSegmentStopMarkStyle",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/boundDetails/desktop/views/DBoundDetailsView.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/UpgradeUtils.js"),require("plnextv2/utils/FareUtils.js"),require("plnextv2/utils/DateUtils.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/macroLibs/nightDeparture/desktop/views/DNightDepartureWarningView.tml"),require("plnextv2/utils/macroLibs/displayButtons/desktop/views/DReservationButtonsView.tml"),require("plnextv2/utils/macroLibs/boundDetails/desktop/views/DBoundDetailsViewScript.js"),require("ariatemplates/html/Template.js"),require("plnextv2/utils/widgets/plnextLib/OnOneLine.js"),require("plnextv2/utils/widgets/plnextLib/Text.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.boundDetails.desktop.views.DBoundDetailsView",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$DBoundDetailsViewScript.constructor.call(this)},$destructor:function(){this.$DBoundDetailsViewScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_displayBounds:function(listItinerary,search,fareFamilyConditions,config,displayDetails,bsGrid,moduleControl,upgradeData){try{with(this)this.macro_displayBoundsPanel({listItinerary:listItinerary,search:search,fareFamilyConditions:fareFamilyConditions,config:config,displayDetails:displayDetails,bsGrid:bsGrid,moduleControl:moduleControl,upgradeData:upgradeData})}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayBounds",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayUpgradeFlights:function(config,listItinerary,moduleControl,upgradeData){try{with(this){var requireParamsForUpgradeFlights={fn:"upgradeFlights",scope:moduleControl,isFooterRequired:!0};this.buttonDisplay.macro_displayUpgradeFlights(config,requireParamsForUpgradeFlights,upgradeData)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayUpgradeFlights",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayModifyFlights:function(config,listItinerary,moduleControl){try{with(this){var options=getModifyFlightsOptions(listItinerary);if(options&&options.length>0){var requireParamsForStandardFlow={options:options,scope:moduleControl,isFooterRequired:!0};this.buttonDisplay.macro_displayModifyFlights(config,requireParamsForStandardFlow)}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayModifyFlights",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayModifyATCFlights:function(config,moduleControl,buttonConfig){try{with(this){var requireParamsForATCFlow={fn:"modifyFlightsATC",scope:moduleControl,isFooterRequired:!0,args:{componentID:this.$class}};this.buttonDisplay.macro_displayModifyFlightsATC(config,requireParamsForATCFlow,buttonConfig)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayModifyATCFlights",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayCurrentBounds:function(listItinerary,listItineraryPrevious,search,fareFamilyConditions,config,displayDetails,bsGrid,moduleControl){try{with(this)this.macro_displayBoundsPanel({listItinerary:listItinerary,listItineraryPrevious:listItineraryPrevious,search:search,fareFamilyConditions:fareFamilyConditions,config:config,displayDetails:displayDetails,bsGrid:bsGrid,moduleControl:moduleControl})}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayCurrentBounds",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayBoundsPanelHeader:function(hLevel){try{with(this){var hLevel=hLevel||2;this.__$write('\n<header class="bounds-panel-heading panel-heading">\n<h',156),this.__$write(hLevel,157),this.__$write(' class="horizontal-title">\n<i class="icon icon-plane" aria-hidden="true"></i>\n',157),this.__$write(this._i18n.getLabel("tx_pltg_text_Itinerary"),159),this.__$write("\n</h",160),this.__$write(hLevel,160),this.__$write(">\n</header>\n",160)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayBoundsPanelHeader",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayBoundsPanelContent:function(boundDetails){try{with(this){this.__$write('\n<section class="bounds-panel-body panel-body">\n\n',192);var __v_1=boundDetails.listItinerary;void 0==boundDetails.listItinerary&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,194]);for(var bound_ct=0,__v_2=__v_1.length,bound_index=0;__v_2>bound_index;bound_index++){{__v_1[bound_index]}bound_ct++;var isNew=boundDetails.listItineraryPrevious&&isFlightChanged(boundDetails.config.listOfChangedBounds,bound_index);this.macro_printBoundsList(boundDetails.listItinerary,bound_index,boundDetails.search,boundDetails.fareFamilyConditions,boundDetails.config,boundDetails.displayDetails,boundDetails.bsGrid,isNew,boundDetails.moduleControl,boundDetails.upgradeData,boundDetails.displayUpgradeRecos,boundDetails.hideBoundTitle)}this.__$write("\n</section>\n",212)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayBoundsPanelContent",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayBoundsPanelContentRTPL:function(boundDetails){try{with(this){this.__$write('\n<section class="bounds-panel-body bounds-list waivable-itin-recap clearfix">\n\n',243);var __v_3=boundDetails.listItinerary;void 0==boundDetails.listItinerary&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,245]);for(var bound_ct=0,__v_4=__v_3.length,bound_index=0;__v_4>bound_index;bound_index++){{__v_3[bound_index]}bound_ct++;var isNew=boundDetails.listItineraryPrevious&&isFlightChanged(boundDetails.config.listOfChangedBounds,bound_index);boundDetails.bound_index=bound_index,this.macro_printBoundsWaivableList(boundDetails,isNew)}this.__$write("\n</section>\n",250)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayBoundsPanelContentRTPL",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printBoundsWaivableList:function(boundDetails,isNew){try{with(this)if(boundDetails.listItinerary[boundDetails.bound_index]&&boundDetails.listItinerary[boundDetails.bound_index].listSegment){var bound=buildBoundObject(boundDetails.listItinerary[boundDetails.bound_index]);this.__$write('\n<section class="segment-details col-xs-24 ',264),this.__$write(getCssClassStatusBound(bound,boundDetails.dynamicWaiver),264),this.__$write('">\n\n',264),boundDetails.isUpgradeFlow&&boundDetails.displayUpgradeRecos||boundDetails.hideBoundTitle||this.macro_displayBoundTitle(isNew,boundDetails.listItinerary,boundDetails.bound_index,boundDetails.bsGrid,bound,boundDetails.search,boundDetails.isPreviousItinerary,boundDetails.boundLabel,boundDetails.config),boundDetails.dynamicWaiver&&boundDetails.dynamicWaiver.waiverItemsPerSegmentId&&isBoundDisrupted(bound,boundDetails.dynamicWaiver.waiverItemsPerSegmentId)?this.macro_disruptedInfo(bound.listSegment,boundDetails.dynamicWaiver.waiverItemsPerSegmentId):(this.__$write('\n<div class="flight-not-impacted">\n<strong>',284),this.__$write(_i18n.getLabel(STRINGS.I18N.NOT_IMPACTED_FLIGHT),285),this.__$write("</strong>\n</div>\n",285)),this.macro_showSegments(bound,boundDetails),1==boundDetails.bound_index&&this.macro_displayDifferentAirportsNotice(boundDetails.listItinerary,bound,boundDetails.bsGrid),this.__$write("\n</section>\n",294)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printBoundsWaivableList",__filename,this["aria:currentLineNumber"]],_ex)}},macro_disruptedInfo:function(listSegment,waiverItemsPerSegmentId){try{with(this)this.__$write('\n<div class="disrupted-info">\n<p class="title">\n',305),this.__$write(this._i18n.getLabel(STRINGS.I18N.FLIGHT_CHANGED),307),this.__$write('\n</p>\n<p class="info">\n',308),this.__$write(this._dynamicWaiverUtils.getDynamicWaiverMightBeDisruptedText(listSegment,waiverItemsPerSegmentId),310),this.__$write("\n</p>\n</div>\n",311)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["disruptedInfo",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayBoundsPanel:function(boundDetails){try{with(this)this.__$write('\n<div class="bounddetails bounds-panel panel">\n\n\n',343),this.macro_displayBoundsPanelHeader(),this.macro_displayBoundsPanelContent(boundDetails),0==boundDetails.config.DISPLAY_TIMELINE&&this.macro_displayBoundDuration(boundDetails.listItinerary[0],boundDetails.config,boundDetails.bsGrid),this.__$write('\n\n<div class="bounds bounds-panel-footer panel-footer">\n\n\n',357),(!boundDetails.config.hasOwnProperty("shouldDisplayModifyATCFlights")||boundDetails.config.shouldDisplayModifyATCFlights)&&this.macro_displayModifyATCFlights(boundDetails.config,boundDetails.moduleControl),this.macro_displayModifyFlights(boundDetails.config,boundDetails.listItinerary,boundDetails.moduleControl),this.macro_displayUpgradeFlights(boundDetails.config,boundDetails.listItinerary,boundDetails.moduleControl,boundDetails.upgradeData),this.__$write("\n</div>\n</div>\n",372)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayBoundsPanel",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayBoundsPanelRTPL:function(boundDetails){try{with(this)this.__$write('\n\n<div class="bounddetails bounds-panel panel">\n\n\n',382),this.macro_displayBoundsPanelHeader(),this.macro_displayBoundsPanelContentRTPL(boundDetails),this.macro_displayModifyATCFlights(boundDetails.config,boundDetails.moduleControl,{text:"tx_pltg_text_find_new_flights_button",type:"primary",icon:"icon-caret-right",iconPosition:"right"}),this.__$write("\n</div>\n",396)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayBoundsPanelRTPL",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printBoundsList:function(listItinerary,bound_index,search,fareFamilyConditions,config,displayDetails,bsGrid,isNew,moduleControl,upgradeData,displayUpgradeRecos,hideBoundTitle){try{with(this){var itinerary=listItinerary[bound_index],initialBoundUpgrade=moduleControl.isUpgradeFlow()&&itinerary.isUpgradeInitial;if(initialBoundUpgrade)var hide="hidden";else var hide="";this.macro_printBoundsListWithClassList({listItinerary:listItinerary,bound_index:bound_index,search:search,fareFamilyConditions:fareFamilyConditions,config:config,displayDetails:displayDetails,bsGrid:bsGrid,isNew:isNew,isPreviousItinerary:!1,isUpgradeFlow:moduleControl.isUpgradeFlow(),moduleControl:moduleControl,classList:["bounds-list",hide],upgradeData:upgradeData,displayUpgradeRecos:displayUpgradeRecos,hideBoundTitle:hideBoundTitle})}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printBoundsList",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printBoundsListWithClassList:function(flightOptions){try{with(this){var searchObject={search:flightOptions.search};this.__$insertSection(497,{type:"div",attributes:{classList:flightOptions.classList},bindRefreshTo:[{to:flightOptions.bound_index,inside:flightOptions.listItinerary},{to:"search",inside:searchObject}],macro:{scope:this,name:"displayBoundsSection",args:[flightOptions.listItinerary,flightOptions.bound_index,flightOptions.search,flightOptions.fareFamilyConditions,flightOptions.config,flightOptions.displayDetails,flightOptions.bsGrid,flightOptions.isNew,flightOptions.moduleControl,flightOptions.isPreviousItinerary,flightOptions.hideBoundTitle,flightOptions.upgradeData,flightOptions.displayUpgradeRecos,flightOptions.isUpgradeFlow,flightOptions.boundLabel]}})}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printBoundsListWithClassList",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayBoundsSection:function(listItinerary,bound_index,search,fareFamilyConditions,config,displayDetails,bsGrid,isNew,moduleControl,isPreviousItinerary,hideBoundTitle,upgradeData,displayUpgradeRecos,isUpgradeFlow,boundLabel){try{with(this)if(listItinerary[bound_index]&&listItinerary[bound_index].listSegment){var bound=buildBoundObject(listItinerary[bound_index]);isUpgradeFlow&&displayUpgradeRecos||hideBoundTitle||this.macro_displayBoundTitle(isNew,listItinerary,bound_index,bsGrid,bound,search,isPreviousItinerary,boundLabel,config),this.macro_displayBoundWarning(listItinerary,bound_index,config),displayDetails?(this.macro_showSegments(bound,{bound_index:bound_index,upgradeData:upgradeData,bsGrid:bsGrid,fareFamilyConditions:fareFamilyConditions,config:config,moduleControl:moduleControl,displayUpgradeRecos:displayUpgradeRecos,isPreviousItinerary:isPreviousItinerary,isUpgradeFlow:isUpgradeFlow,ffIsDynamic:listItinerary[bound_index].ffIsDynamic,dynamicWaiver:null}),1==bound_index&&this.macro_displayDifferentAirportsNotice(listItinerary,bound,bsGrid)):(this.__$write('\n\n<div class="bound-details row">\n\n',607),this.macro_displayBoundItinerary(bound,bsGrid),this.macro_displayBoundInfo(bound,fareFamilyConditions,config,!1,bsGrid),this.__$write("\n</div>\n",613))}else!listItinerary[bound_index]&&search&&this.macro_displaySearchDates(search,isNew,bound_index)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayBoundsSection",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayBoundWarning:function(listItinerary,boundIndex,config){try{with(this){if(warningClass="",this._arrayUtils.contains([this.RFARE,this.RSDAI],this._appContext.getPageId())&&this._hasModifiedBounds(config)){var responsiveLabel=this._getResponsiveLabel(listItinerary,boundIndex,config);warningTitle=responsiveLabel.title,warningMessage=responsiveLabel.message,warningClass=responsiveLabel.class}else if(config.isATCResponsive)if(this.isCancelledFlight(listItinerary[boundIndex],config))var warningTitle=this._i18n.getLabel("tx_pltg_text_RespFlightCancelled");else{var warningTitle=this._i18n.getLabel("tx_pltg_text_responsive_flight_not_impacted");warningClass="not-impacted"}else if(showWaitlist(listItinerary,boundIndex))var warningTitle=this._i18n.getLabel("tx_pltg_text_waitlistForThisFlight"),warningMessage=this._i18n.getLabel("tx_pltg_text_waitlistForThisFlightAuxiliary");this.__$write('\n\n<div class="bound-waitlist ',644),this.__$write(warningClass,645),this.__$write('">\n<div class="bound-waitlist__title">',645),this.__$write(warningTitle,646),this.__$write('</div>\n<div class="bound-waitlist__message">',646),this.__$write(warningMessage,647),this.__$write("</div>\n</div>\n",647)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayBoundWarning",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySearchDates:function(search,isNew,bound_index){try{with(this){if(this.__$write('\n\n<div class="bound-row bound-row-segment row">\n',663),isNew&&this.macro_printCurrentFlightLabel(),this.__$write('\n<div class="',668),this.__$write(getBsGridClass(bsGrid,"boundDetails"),668),this.__$write('">\n<h3 class="title">\n<span class="itinerary">\n',668),search.length<=2?0==bound_index?this.__$write('\n<i class="icon-plane-departure icon-plane" aria-hidden="true"></i>\n',673):this.__$write('\n<i class="icon-plane-return icon-plane-return" aria-hidden="true"></i>\n',675):(this.__$write('\n<span class="bound-number">\n<span class="plnext-sr-only">',678),this.__$write(this._i18n.getLabel("tx_pltg_text_calendar_flight"),679),this.__$write("</span>\n",679),this.__$write(parseInt(bound_index)+1,680),this.__$write("\n</span>\n",681)),search[bound_index].beginLocation.cityName&&search[bound_index].endLocation.cityName&&(this.__$write(search[bound_index].beginLocation.cityName,684),this.__$write(" - ",684),this.__$write(search[bound_index].endLocation.cityName,684),this.__$write(",\n",684)),this.__$write("\n</span>\n\n\n\n",686),null!==search[bound_index].beginDate){this.__$write('\n<time class="date">\n',691);var beginDate=new Date(search[bound_index].beginDate);this.__$write(this._dateUtils.formatDateTime(beginDate,plnextv2.utils.DateUtils.FORMATS.FULL_DATE_FORMAT),693),this.__$write("\n</time>\n",694)}this.__$write("\n</h3>\n</div>\n</div>\n",696)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySearchDates",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayDifferentAirportsNotice:function(listItinerary,bound,bsGrid){try{with(this){var noticeDepOutboundDiffers=this.getDifferentDepOutboundArrInboundInNotice(listItinerary,bound);null!==noticeDepOutboundDiffers&&(this.__$write('\n<div class="itinerary-details">\n<div class="different-airport different-airport-departure-arrival ',714),this.__$write(getBsGridClass(bsGrid,"boundDetails"),715),this.__$write('">\n',715),this.__$write(noticeDepOutboundDiffers,716),this.__$write("\n</div>\n</div>\n",717));var noticeArrOutboundDiffers=this.getDifferentArrOutboundDepInboundInNotice(listItinerary,bound);null!==noticeArrOutboundDiffers&&(this.__$write('\n<div class="itinerary-details">\n<div class="different-airport different-airport-arrival-departure ',724),this.__$write(getBsGridClass(bsGrid,"boundDetails"),725),this.__$write('">\n',725),this.__$write(noticeArrOutboundDiffers,726),this.__$write("\n</div>\n</div>\n",727))}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayDifferentAirportsNotice",__filename,this["aria:currentLineNumber"]],_ex)}},macro_showSegments:function(bound,boundDetails){try{with(this){var __v_5=bound.listSegment;void 0==bound.listSegment&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,764]);for(var segment_ct=0,__v_6=__v_5.length,segment_index=0;__v_6>segment_index;segment_index++){var segment=__v_5[segment_index];segment_ct++,this.__$write(this.$modifier("eat",[this.setUpgradeDataOnSegment(segment,boundDetails.upgradeData)]),766),this.macro_showSegment({segment:segment,segmentIndex:segment_index,bound:bound,bsGrid:boundDetails.bsGrid,fareFamilyConditions:boundDetails.fareFamilyConditions,config:boundDetails.config,moduleControl:boundDetails.moduleControl,displayUpgradeRecos:boundDetails.displayUpgradeRecos,isUpgradeFlow:boundDetails.isUpgradeFlow,boundHasMultipleFareFamilies:this._boundUtils.boundHasMultipleFareFamilies(bound),boundHasMultipleCabins:this._boundUtils.boundHasMultipleCabins(bound),boundDetails:boundDetails})}boundDetails.config.isATCResponsive&&boundDetails.config.DISPLAY_TIMELINE?(this.__$write('\n<div class="bound-row bound-row-info row bound-details-spacing">\n\n',786),this.macro_displayBoundInfo(bound,boundDetails.fareFamilyConditions,boundDetails.config,!0,boundDetails.bsGrid,boundDetails.ffIsDynamic),this.__$write("\n</div>\n",796)):boundDetails.isPreviousItinerary||!boundDetails.config.DISPLAY_TIMELINE||boundDetails.moduleControl.isUpgradeFlow()&&boundDetails.displayUpgradeRecos||boundDetails.dynamicWaiver||this.macro_displayTimeline(bound,boundDetails.bound_index,boundDetails.config,boundDetails.bsGrid,boundDetails.moduleControl,boundDetails.fareFamilyConditions,boundDetails.ffIsDynamic)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["showSegments",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayTimeline:function(bound,bound_index,config,bsGrid,moduleControl,fareFamilyConditions,ffIsDynamic){try{with(this)this.__$write('\n<div class="bound-row bound-row-info row bound-details-spacing">\n',838),this.macro_displayTimelineLink(bound_index,config,bsGrid,moduleControl,bound),bound.fareFamily&&(this.__$write('\n\n<div  class="plnext-sr-only ',842),this.__$write(getBsGridClass(bsGrid,"boundDetailsRight"),843),this.__$write('">\n<div class="row">\n<span class="ff-short-desc ff-short-desc-unvisible">',843),this.__$write(plnextv2.utils.FareUtils.getShortDescription(fareFamilyConditions,bound.fareFamily.ffCode,config),845),this.__$write("</span>\n</div>\n</div>\n",845)),this.macro_displayTimelinePanel(bound,bound_index,config,bsGrid),this.macro_displayBoundInfo(bound,fareFamilyConditions,config,!0,bsGrid,ffIsDynamic),this.__$write("\n</div>\n",853)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTimeline",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayTimelineLink:function(bound_index,config,bsGrid,moduleControl,bound){try{with(this)this.__$write('\n\n<a href="javascript:;" id="bounddetails-bound-timeline-link-',869),this.__$write(bound_index,870),this.__$write('"\nclass="bound-timeline-link ',870),this.__$write(getBsGridClass(bsGrid,"boundDetailsLeft"),871),this.__$write(' hidden-xs"\naria-expanded="false"\n',871),this.__$statementOnEvent("click",this.$normCallback({fn:"showTimeline",args:{bound_index:bound_index,moduleControl:moduleControl,bound:bound}}),873),this.__$write(" ",873),this.__$statementOnEvent("keypress",this.$normCallback({fn:"detailsLinkKeydown",args:{bound_index:bound_index,moduleControl:moduleControl}}),873),this.__$write(' >\n<i id="bounddetails-bound-timeline-icon-',873),this.__$write(bound_index,874),this.__$write('" class="icon icon-caret-right icon-caret" aria-hidden="true"></i>\n<span id="bounddetails-bound-timeline-text-',874),this.__$write(bound_index,875),this.__$write('">\n',875),this.__$write(this._i18n.getLabel("tx_pltg_text_ShowFlightDetails"),876),this.__$write("\n</span>\n</a>\n",877)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTimelineLink",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayTimelinePanel:function(bound,bound_index,config,bsGrid){try{with(this){var idFlightTimeline="bounddetails-bound-timeline-"+bound_index;this.__$write('\n<div id="',896),this.__$write(idFlightTimeline,896),this.__$write('" tabindex="-1" class="hidden hidden-xs flight-timeline ',896),this.__$write(getBsGridClass(bsGrid,"boundDetailsTimeline"),896),this.__$write('">\n',896),this.__$processWidgetMarkup("aria.html.HtmlLibrary","Template",{id:"fligtht"+bound_index,classpath:"plnextv2.components.common.flightTimeline.desktop.views.DFlightTimelineView",data:{config:config,segments:bound.listSegment,bound_index:bound_index}},897),this.__$write("\n</div>\n",906)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTimelinePanel",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayBoundInfo:function(bound,fareFamilyConditions,config,displayDetails,bsGrid,ffIsDynamic){try{with(this)displayDetails&&bound.lastSegment.flightTime?this.macro_displayFlightTimeAndFare(bound,fareFamilyConditions,config,bsGrid,ffIsDynamic):!displayDetails&&bound.lastSegment.flightTime?this.macro_displayFlightTimeAndNumbers(bound,fareFamilyConditions,config,bsGrid):displayDetails&&!bound.lastSegment.flightTime?this.displayFareFamilyPerSegment(config,bound)||this.macro_displayFare(bound,fareFamilyConditions,config,"","",ffIsDynamic):displayDetails||bound.lastSegment.flightTime||this.macro_displayFlightNumbers(bound,fareFamilyConditions,config,bsGrid)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayBoundInfo",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayFlightTimeAndFare:function(bound,fareFamilyConditions,config,bsGrid,ffIsDynamic){try{with(this)this.__$write('\n\n<div class="itinerary-details row">\n<div class="col-xs-24 col-sm-12 col-sm-offset-12">\n',965),this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","OnOneLine",void 0,968)&&(this.__$write('\n<div class="total-duration">\n\n<div class="total-duration-col">\n<span class="total-duration-text">',969),this.__$write(this._i18n.getLabel("tx_pltg_text_TotalDuration"),972),this.__$write('</span>\n<span class="total-duration-value"> ',972),this.__$write(this._dateUtils.formatDateTime(bound.lastSegment.flightTime,plnextv2.utils.DateUtils.FORMATS.DURATION_FORMAT),973),this.__$write("</span>\n",973),this.macro_displayNumberOfStops(bound),this.__$write("\n</div>\n</div>\n",975),this.__$endContainerWidget()),this.displayFareFamilyPerSegment(config,bound)||this.macro_displayFare(bound,fareFamilyConditions,config,"","",ffIsDynamic),this.__$write("\n</div>\n</div>\n",982)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayFlightTimeAndFare",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayFlightDuration:function(bound){try{with(this)this.__$write('\n<span class="total-duration">\n<span class="total-duration-text">',992),this.__$write(this._i18n.getLabel("tx_pltg_text_TotalDuration"),993),this.__$write('</span>\n<span class="total-duration-value"> ',993),this.__$write(this._dateUtils.formatDateTime(bound.lastSegment.flightTime,plnextv2.utils.DateUtils.FORMATS.DURATION_FORMAT),994),this.__$write("</span>\n",994),this.macro_displayNumberOfStops(bound),this.__$write("\n</span>\n",996)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayFlightDuration",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayFlightTimeAndNumbers:function(bound,fareFamilyConditions,config,bsGrid){try{with(this)this.__$write('\n\n<div class="itinerary-details-right ',1012),this.__$write(getBsGridClass(bsGrid,"boundDetailsRight"),1013),this.__$write('">\n',1013),this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","OnOneLine",void 0,1014)&&(this.__$write('\n<div class="flight-info total-duration row">\n\n<div class="flight-info-left ',1015),this.__$write(getBsGridClass(bsGrid,"boundDetailsFlightInfoLeft"),1017),this.__$write('">\n',1017),this.__$write(this._i18n.getLabel("tx_pltg_text_Duration"),1018),this.__$write('\n</div>\n<div class="flight-info-right ',1019),this.__$write(getBsGridClass(bsGrid,"boundDetailsFlightInfoRight"),1020),this.__$write('">\n<span class="total-duration-value"> ',1020),this.__$write(this._dateUtils.formatDateTime(bound.lastSegment.flightTime,plnextv2.utils.DateUtils.FORMATS.DURATION_FORMAT),1021),this.__$write("</span>\n",1021),this.macro_displayNumberOfStops(bound),this.__$write("\n</div>\n</div>\n",1023),this.__$endContainerWidget()),this.macro_displayFlightNumbers(bound,fareFamilyConditions,config,bsGrid),this.__$write("\n</div>\n",1030)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayFlightTimeAndNumbers",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayFlightNumbers:function(bound,fareFamilyConditions,config,bsGrid){try{with(this){this.__$write('\n\n<div class="flight-info flight-info-airline row">\n<div class="flight-info-left ',1046),this.__$write(getBsGridClass(bsGrid,"boundDetailsFlightInfoLeft"),1048),this.__$write('">\n',1048),this.__$write(this._i18n.getLabel("tx_pltg_text_Airline"),1049),this.__$write('\n</div>\n<div class="flight-info-right ',1050),this.__$write(getBsGridClass(bsGrid,"boundDetailsFlightInfoRight"),1051),this.__$write('">\n',1051);var __v_7=bound.listSegment;void 0==bound.listSegment&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,1052]);for(var segment_ct=0,__v_8=__v_7.length,segment_index=0;__v_8>segment_index;segment_index++){var segment=__v_7[segment_index];segment_ct++,this.__$write('\n<div class="bound-flight-info">\n<span class="flight-info-airline-name">',1053),this.__$write(segment.airline.name,1054),this.__$write('</span>\n<span class="flight-info-airline-flight">\n<bdo dir="ltr">\n',1054),this.__$write(this._i18n.getLabel("tx_pltg_text_flightNumberLeftParenthesis"),1057),this.__$write(segment.airline.code,1058),this.__$write(" ",1058),this.__$write(segment.flightNumber,1058),this.__$write(this._i18n.getLabel("tx_pltg_text_flightNumberRightParenthesis"),1059),this.__$write("\n</bdo>\n</span>\n",1060),segment.opFlag&&(this.__$write('\n<div class="flight-info-opName">\n',1063),this.__$write(this._i18n.getLabel("tx_pltg_text_OperatedByLabel"),1064),this.__$write(" ",1064),this.__$write(segment.opAirline.name,1064),this.__$write("\n</div>\n",1065)),this.__$write("\n</div>\n",1067)}this.__$write("\n</div>\n</div>\n",1069),this.macro_displayFare(bound,fareFamilyConditions,config)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayFlightNumbers",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayNumberOfStops:function(bound){try{with(this)this.__$write('\n<span class ="stop-number">\n, <span class ="stop-number-text">',1081),this.__$write(this._flightUtils.displayNumberOfStops(bound.listSegment),1082),this.__$write("</span>\n</span>\n",1082)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayNumberOfStops",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayBoundItinerary:function(bound,bsGrid){try{with(this)this.__$write('\n<div class="bound-details-left ',1095),this.__$write(getBsGridClass(bsGrid,"boundDetailsLeft"),1095),this.__$write('">\n<div class="bound-details-departure">\n',1095),this.macro_displaySegmentLocation({segment:bound.firstSegment,segmentIndex:0,bound:bound,isDeparture:!0,displayDetails:!1}),this.__$write('\n</div>\n<div class="bound-details-arrival">\n',1104),this.macro_displaySegmentLocation({segment:bound.lastSegment,segmentIndex:bound.lastIndex,bound:bound,isDeparture:!1,displayDetails:!1}),this.__$write("\n</div>\n</div>\n",1113)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayBoundItinerary",__filename,this["aria:currentLineNumber"]],_ex)}},macro_showSegment:function(params){try{with(this)this.willDisplayLegsOfSegment(params.config,params.segment)?this.macro_displayLegsOfSegment(params.bound.listSegment,params.segmentIndex,params.config,params.bsGrid,params.moduleControl,params.fareFamilyConditions,params.boundDetails,params.boundHasMultipleFareFamilies,params.boundHasMultipleCabins):(this.__$write('\n<div class="segment-details segment-details-row row">\n',1158),this.macro_displaySegmentDetails(params.segment,params.segmentIndex,params.bound,params.bsGrid,params.fareFamilyConditions,params.config,params.moduleControl,params.displayUpgradeRecos,params.isUpgradeFlow,params.boundHasMultipleFareFamilies,params.boundHasMultipleCabins,params.boundDetails),this.__$write("\n</div>\n",1173)),!params.segment.cancel&&params.config.displayOpEventsTable&&this.macro_displayOperationalInfoPanel(params.segment,params.segmentIndex,params.bsGrid,params.config),this.macro_displayStop(params.bound,params.segment,params.segmentIndex,params.boundDetails)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["showSegment",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySegmentLocation:function(params){try{with(this){var time=this.extractSegmentTime(params.isDeparture,params.segment),location=this.extractSegmentLocation(params.isDeparture,params.segment),dayDifferenceString=this.calculateDayDifference(params.displayDetails,params.isDeparture,params.segment,params.segmentIndex,params.bound),terminalInformation=this.extractTerminalInformation(params.displayDetails,params.isDeparture,params.segment,params.segmentIndex,params.bound);this.macro_displayLocationDetails(time,dayDifferenceString,location,terminalInformation.terminal,terminalInformation.terminalChange,params.isDeparture,params.config)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySegmentLocation",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayLocationDetails:function(date,dayDifferenceString,location,terminal,isTerminalChange,isDeparture,config){try{with(this)this.__$write('\n\n<div class="row">\n\n<div class="col-xs-24">\n<time class="segment-details-time time ',1230),this.shouldShowDepartureWarning(date,isDeparture,config)&&this.__$write("night-departure-warning-container",1234),this.__$write('">\n',1234),this.__$write(this._dateUtils.formatDateTime(date,plnextv2.utils.DateUtils.FORMATS.TIME_FORMAT),1235),this.shouldShowDepartureWarning(date,isDeparture,config)&&this.nightDeparture.macro_displayNightDepartureWarning(),this.__$write("\n</time>\n\n\n",1239),dayDifferenceString&&(this.__$write('\n<span class="segment-details-days segment-details-days-top">',1243),this.__$write(dayDifferenceString,1243),this.__$write("</span>\n",1243)),this.__$write('\n\n<span class="segment-details-city">\n',1245),this.__$write(location.cityName,1247),this.__$write('\n</span>\n</div>\n\n<div class="col-xs-24">\n<span class="segment-details-location">\n',1248),this.__$write(location.locationName,1253),this.__$write("\n</span>\n\n",1254),this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","OnOneLine",void 0,1256)&&(this.__$write('\n<span class="segment-details-location-code">\n',1257),this.__$write(this._i18n.getLabel("tx_pltg_text_airportCodeLeftParenthesis"),1258),this.__$write('\n<abbr title="',1259),this.__$write(location.locationName,1259),this.__$write('">\n',1259),this.__$write(location.locationCode,1260),this.__$write("\n</abbr>\n",1261),this.__$write(this._i18n.getLabel("tx_pltg_text_airportCodeRightParenthesis"),1262),this.__$write("\n</span>\n",1263),this.__$endContainerWidget()),this.__$write('\n</div>\n\n<div class="col-xs-24">\n',1265),this.macro_displayLocationDetailsTerminal(terminal,isTerminalChange),this.__$write("\n</div>\n\n</div>\n",1269)
}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayLocationDetails",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayLocationDetailsTerminal:function(terminal,isTerminalChange){try{with(this)if(terminal){var terminalChangeCssClass="";isTerminalChange&&(terminalChangeCssClass="terminal-change"),this.__$write('\n\n<span class="segment-details-terminal ',1292),this.__$write(terminalChangeCssClass,1293),this.__$write('"> ',1293),this.__$write(this._i18n.getLabel("tx_pltg_text_TerminalLabel"),1293),this.__$write(" ",1293),this.__$write(terminal,1293),this.__$write("\n</span>\n\n",1294)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayLocationDetailsTerminal",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySegmentDetails:function(segment,segmentIndex,bound,bsGrid,fareFamilyConditions,config,moduleControl,displayUpgradeRecos,isUpgradeFlow,boundHasMultipleFareFamilies,boundHasMultipleCabins,boundDetails){try{with(this){var displayUpgradeDetails=isUpgradeFlow&&displayUpgradeRecos,isAlreadyUpgraded=plnextv2.utils.UpgradeUtils.isAlreadyUpgraded(segment);this.macro_displaySegmentDetailsLeft(displayUpgradeDetails,isAlreadyUpgraded,segment,segmentIndex,bsGrid,bound,config,moduleControl,boundDetails),displayUpgradeDetails&&isAlreadyUpgraded&&this.macro_displaySegmentDetailsAlreadyUpgraded(segment,bsGrid),displayUpgradeDetails||this.macro_displaySegmentDetailsRight(segment,segment.segmentTime,segment.equipment,fareFamilyConditions,config,bsGrid,moduleControl,boundHasMultipleFareFamilies,boundHasMultipleCabins)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySegmentDetails",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySegmentDetailsAlreadyUpgraded:function(segment,bsGrid){try{with(this){var currentCabin=segment.upgradeData.currentCabinCode;this.__$write('\n<div class="segment-details-upgradeinformation ',1369),this.__$write(getBsGridClass(bsGrid,"boundDetailsUpgradeRight"),1369),this.__$write(' ">\n',1369),segment.cabinsImage&&segment.cabinsImage[currentCabin]&&(this.__$write('\n<img aria-hidden="true" src= ',1371),this.__$write(segment.cabinsImage[currentCabin],1371),this.__$write(" />\n",1371)),segment.cabinsDescription&&segment.cabinsDescription[currentCabin]&&(this.__$write('\n<div class="upgrades-upgrade-details-description">\n',1374),this.__$write(segment.cabinsDescription[currentCabin],1375),this.__$write("\n</div>\n",1376)),this.__$write("\n</div>\n",1378)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySegmentDetailsAlreadyUpgraded",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySegmentDetailsLeft:function(displayUpgradeDetails,isAlreadyUpgraded,segment,segmentIndex,bsGrid,bound,config,moduleControl,boundDetails){try{with(this){var elementTypeBoundDetails=getElementTypeForBoundDetails(displayUpgradeDetails,isAlreadyUpgraded);this.__$write('\n<div class="segment-details-left ',1406),this.__$write(isCancel(segment),1406),this.__$write(" ",1406),this.__$write(getBsGridClass(bsGrid,elementTypeBoundDetails),1406),this.__$write('">\n\n',1406),displayUpgradeDetails&&plnextv2.utils.UpgradeUtils.isSegmentFlown(segment)&&(this.__$write('\n<div class="segment-alreadyFlown">\n<i class="icon icon-info-sign" aria-hidden="true"></i>\n',1409),this.__$write(this._i18n.getLabel("tx_pltg_text_flight_flown"),1411),this.__$write("\n</div>\n",1412)),this.__$write('\n\n<span class="timeline-segment-start-mark"></span>\n',1414);var waiverItems=getWaiverItems(boundDetails,getSegmentPosition(boundDetails,segmentIndex)),departureDisrupted=_dynamicWaiverUtils.isLocationDisrupted(waiverItems,extractSegmentLocation(!0,segment),!0),arrivalDisrupted=_dynamicWaiverUtils.isLocationDisrupted(waiverItems,extractSegmentLocation(!1,segment),!1);this.__$write('\n\n\n<div class="segment-details-departure ',1419),this.__$write(departureDisrupted?CSS_CLASS.SEGMENT_DISRUPTED:"",1421),this.__$write('">\n',1421),this.macro_displaySegmentLocation({segment:segment,segmentIndex:segmentIndex,bound:bound,isDeparture:!0,displayDetails:!0,config:config}),this.__$write("\n</div>\n\n\n",1430),this.segmentHasTechnicalStop(segment)&&this.macro_displayTechnicalStops(config,segment),this.__$write('\n\n\n<div class="segment-details-arrival ',1436),this.__$write(arrivalDisrupted?CSS_CLASS.SEGMENT_DISRUPTED:"",1438),this.__$write('">\n',1438),this.macro_displaySegmentLocation({segment:segment,segmentIndex:segmentIndex,bound:bound,isDeparture:!1,displayDetails:!0,config:config}),this.__$write("\n</div>\n\n\n",1447),this.macro_displayFlightHistory(segment),segment.cancel&&this.macro_displayCancelWarning(),displayUpgradeDetails&&this.macro_displayUpgrade(bsGrid,bound,segment,segmentIndex,moduleControl,config),this.__$write('\n\n<div class="clear"></div>\n\n\n\n<span class="timeline-segment-end-mark"></span>\n</div>\n',1459)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySegmentDetailsLeft",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySegmentDetailsRight:function(segment,duration,equipment,fareFamilyConditions,config,bsGrid,moduleControl,boundHasMultipleFareFamilies,boundHasMultipleCabins){try{with(this)this.__$write('\n\n\n<div class="segment-details-right ',1492),this.__$write(getBsGridClass(bsGrid,"boundDetailsRight"),1494),this.__$write('">\n\n',1494),this.macro_displaySegmentDetailsDuration(duration,bsGrid),this.macro_displaySegmentDetailsFlightNumber(segment,bsGrid),this.macro_displaySegmentDetailsAircraft(equipment,bsGrid),this.macro_displaySegmentDetailsCabin(segment,bsGrid,config,boundHasMultipleCabins),this.macro_displaySegmentDetailsFareFamily(segment,bsGrid,config,boundHasMultipleFareFamilies,fareFamilyConditions),this.macro_displaySegmentDetailsCurrentFlightStatus(segment,bsGrid,config,moduleControl,fareFamilyConditions),this.macro_displaySegmentWaitlistStatus(segment,bsGrid),this.macro_displaySecuredFlight(segment),this.__$write('\n\n\n\n<span class="timeline-segment-end-mark visible-xs"></span>\n</div>\n',1511)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySegmentDetailsRight",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySegmentDetailsDuration:function(duration,bsGrid){try{with(this)duration&&(this.__$write('\n<div class="flight-info flight-info-duration row">\n<div class="flight-info-left ',1529),this.__$write(getBsGridClass(bsGrid,"boundDetailsFlightInfoLeft"),1530),this.__$write('">\n',1530),this.__$write(this._i18n.getLabel("tx_pltg_text_Duration"),1531),this.__$write('\n</div>\n<div class="flight-info-right ',1532),this.__$write(getBsGridClass(bsGrid,"boundDetailsFlightInfoRight"),1533),this.__$write('">\n',1533),this.__$write(this._dateUtils.formatDateTime(duration,plnextv2.utils.DateUtils.FORMATS.DURATION_FORMAT),1534),this.__$write("\n</div>\n</div>\n",1535))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySegmentDetailsDuration",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySegmentDetailsFlightNumber:function(segment,bsGrid){try{with(this)this.__$write('\n\n<div class="flight-info flight-info-airline row">\n<div class="flight-info-left ',1549),this.__$write(getBsGridClass(bsGrid,"boundDetailsFlightInfoLeft"),1551),this.__$write('">\n',1551),this.__$write(this._i18n.getLabel("tx_pltg_text_Airline"),1552),this.__$write('\n</div>\n<div class="flight-info-right ',1553),this.__$write(getBsGridClass(bsGrid,"boundDetailsFlightInfoRight"),1554),this.__$write('">\n<span class="flight-info-airline-name">',1554),this.__$write(segment.airline.name,1555),this.__$write('</span>\n<span class="flight-info-airline-flight">\n<bdo dir="ltr">\n',1555),this.__$write(this._i18n.getLabel("tx_pltg_text_flightNumberLeftParenthesis"),1558),this.__$write(segment.airline.code,1559),this.__$write(" ",1559),this.__$write(segment.flightNumber,1559),this.__$write(this._i18n.getLabel("tx_pltg_text_flightNumberRightParenthesis"),1560),this.__$write("\n</bdo>\n</span>\n\n",1561),segment.opFlag&&(this.__$write('\n<div class="flight-info-opName">\n',1565),this.__$write(this._i18n.getLabel("tx_pltg_text_OperatedByLabel"),1566),this.__$write(" ",1566),this.__$write(segment.opAirline.name,1566),this.__$write("\n</div>\n",1567)),this.__$write("\n</div>\n</div>\n",1569)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySegmentDetailsFlightNumber",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySegmentDetailsAircraft:function(equipment,bsGrid){try{with(this)equipment&&equipment.name&&(this.__$write('\n<div class="flight-info flight-info-aircraft row">\n<div class="flight-info-left ',1584),this.__$write(getBsGridClass(bsGrid,"boundDetailsFlightInfoLeft"),1585),this.__$write('">\n',1585),this.__$write(this._i18n.getLabel("tx_pltg_text_Aircraft"),1586),this.__$write('\n</div>\n<div class="flight-info-right ',1587),this.__$write(getBsGridClass(bsGrid,"boundDetailsFlightInfoRight"),1588),this.__$write('">\n',1588),this.__$write(equipment.name,1589),this.__$write("\n</div>\n</div>\n",1590))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySegmentDetailsAircraft",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySegmentDetailsCabin:function(segment,bsGrid,config,boundHasMultipleCabins){try{with(this){var cabin=plnextv2.utils.FareUtils.getCabinFromSegment(segment);if(cabin){this.__$write('\n<div class="flight-info flight-info-cabin row">\n<div class="flight-info-left ',1611),this.__$write(getBsGridClass(bsGrid,"boundDetailsFlightInfoLeft"),1612),this.__$write('">\n',1612),this.__$write(this._i18n.getLabel("tx_pltg_text_Cabin"),1613),this.__$write('\n</div>\n<div class="flight-info-right ',1614),this.__$write(getBsGridClass(bsGrid,"boundDetailsFlightInfoRight"),1615),this.__$write(" ",1615),config&&config.displayMixedCabinWarning&&boundHasMultipleCabins&&this.__$write("flight-info-cabin-type-warning",1615),this.__$write('">\n',1615),this.__$write(cabin.name,1616),this.__$write("\n</div>\n</div>\n\n\n",1617);var rbdClasses=plnextv2.utils.FareUtils.getRbdFromSegment(segment);if(config.isRbdDisplayed&&rbdClasses.length>0){var leftCssClass="flight-info-left "+getBsGridClass(bsGrid,"boundDetailsFlightInfoLeft"),rightCssClass="flight-info-right "+getBsGridClass(bsGrid,"boundDetailsFlightInfoRight");this.__$write('\n<div class="flight-info flight-info-class row">\n',1625),this.macro_displayRbdClassesByTwoDivs(rbdClasses,config,leftCssClass,rightCssClass),this.__$write("\n</div>\n",1627)}}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySegmentDetailsCabin",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySegmentDetailsFareFamily:function(segment,bsGrid,config,boundHasMultipleFareFamilies,fareFamilyConditions){try{with(this)this.displayFareFamily(config,segment)&&(this.__$write('\n<div class="flight-info row flight-info-fare-type">\n<div class="flight-info-left ',1649),this.__$write(getBsGridClass(bsGrid,"boundDetailsFlightInfoLeft"),1650),this.__$write('">\n',1650),this.__$write(this._i18n.getLabel("tx_pltg_text_FareTypeLabel"),1651),this.__$write('\n</div>\n<div class="flight-info-right ',1652),this.__$write(getBsGridClass(bsGrid,"boundDetailsFlightInfoRight"),1653),this.__$write(" ",1653),boundHasMultipleFareFamilies&&this.__$write("flight-info-fare-type-warning",1653),this.__$write('">\n',1653),this.macro_displayFare(segment,fareFamilyConditions,config),this.__$write("\n</div>\n</div>\n",1655))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySegmentDetailsFareFamily",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySegmentDetailsCurrentFlightStatus:function(segment,bsGrid,config,moduleControl){try{with(this)config.allowFliFoOnlineStatus&&config.RTPLPageMode&&(this.__$write('\n<div class="display-FLIFO-link">\n<a href="javascript:;" class="FLIFOTextForURL" ',1678),this.__$statementOnEvent("click",this.$normCallback({fn:"sendFLIFOCodeAjax",scope:moduleControl,args:{segment:segment}}),1679),this.__$write(">\n",1679),this.__$write(this._i18n.getLabel("tx_pltg_text_FLIFOCurrentFightStatus"),1680),this.__$write("\n</a>\n</div>\n",1681))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySegmentDetailsCurrentFlightStatus",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySegmentWaitlistStatus:function(segment,bsGrid){try{with(this)showWaitlistBySegment(segment)&&(this.__$write('\n<div class="flight-info row flight-info-fare-type flight-info-waitlist">\n<div class="flight-info-left ',1696),this.__$write(getBsGridClass(bsGrid,"boundDetailsFlightInfoLeft"),1697),this.__$write('">\n',1697),this.__$write(this._i18n.getLabel("tx_pltg_text_boundDetailsSegmentStatus"),1698),this.__$write('\n</div>\n<div class="flight-info-right flight-info-right--waitlist ',1699),this.__$write(getBsGridClass(bsGrid,"boundDetailsFlightInfoRight"),1700),this.__$write('">\n',1700),this.__$write(this._i18n.getLabel("tx_pltg_text_WaitlistedStatusShort"),1701),this.__$write("\n</div>\n</div>\n",1702))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySegmentWaitlistStatus",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayLegsOfSegment:function(segments,segmentIndex,config,bsGrid,moduleControl,fareFamilyConditions,boundDetails,boundHasMultipleFareFamilies,boundHasMultipleCabins){try{with(this)for(var segment=segments[segmentIndex],legIndex=0;legIndex<segment.listLegs.length;legIndex++){this.__$write('\n\n<div class="segment-details segment-details-row row">\n\n',1730);var currentLeg=segment.listLegs[legIndex],previousLeg=this._flightUtils.getPreviousLeg(segment,legIndex),nextLeg=this._flightUtils.getNextLeg(segment,legIndex);if(this.__$write('\n\n<div class="segment-details-left ',1736),this.__$write(getBsGridClass(bsGrid,"boundDetailsLeft"),1737),this.__$write(" ",1737),this.__$write(isCancel(segment),1737),this.__$write('">\n\n<span class="timeline-segment-start-mark"></span>\n\n',1737),this.macro_displayLegsArrivalAndDeparture(currentLeg,previousLeg,nextLeg,segment,segments,segmentIndex,boundDetails),config.upgrade&&this.macro_displayUpgrade(bsGrid,bound,segment,null,moduleControl,config),this.macro_displayFlightHistory(segment),this.__$write('\n\n\n\n<span class="timeline-segment-end-mark hidden-xs"></span>\n\n',1748),segment.cancel&&this.macro_displayCancelWarning(),this.__$write("\n</div>\n\n\n",1756),config.upgrade||this.macro_displaySegmentDetailsRight(segment,currentLeg.duration,currentLeg.equipment,fareFamilyConditions,config,bsGrid,moduleControl,boundHasMultipleFareFamilies,boundHasMultipleCabins),this.__$write("\n\n</div>\n\n\n",1763),currentLeg&&nextLeg&&legIndex!=segment.listLegs.length-1){var customClass=getCssClassTechnicalStopDisruption(currentLeg,nextLeg,getWaiverItems(boundDetails,segmentIndex));this.__$write('\n<div class="segment-details segment-details-technical-stop-row row ',1770),this.__$write(isCancel(segment),1770),this.__$write(" ",1770),this.__$write(customClass,1770),this.__$write('">\n',1770),this.macro_displayTechnicalStopDetailed(config,currentLeg,nextLeg),this.__$write("\n</div>\n",1772)}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayLegsOfSegment",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayLegsArrivalAndDeparture:function(currentLeg,previousLeg,nextLeg,segment,segments,segmentIndex,boundDetails){try{with(this){var waiverItems=getWaiverItems(boundDetails,segmentIndex),departureDisrupted=_dynamicWaiverUtils.isLocationDisrupted(waiverItems,currentLeg.boardPoint,!0),arrivalDisrupted=_dynamicWaiverUtils.isLocationDisrupted(waiverItems,currentLeg.offPoint,!1);this.__$write('\n\n\n<div class="segment-details-departure ',1799),this.__$write(departureDisrupted?"segment-details-terminal-change":"",1801),this.__$write('">\n',1801),this.macro_displayLocationDetails(new Date(currentLeg.departureDate),previousLeg?this._getDayDifferenceString(previousLeg.arrivalDate,currentLeg.departureDate):"",currentLeg.boardPoint,currentLeg.boardPoint.terminal,hasDepartureTerminalChange(previousLeg,currentLeg,segment,segments,segmentIndex)),this.__$write('\n</div>\n\n\n<div class="segment-details-arrival ',1809),this.__$write(arrivalDisrupted?"segment-details-terminal-change":"",1812),this.__$write('">\n',1812),this.macro_displayLocationDetails(new Date(currentLeg.arrivalDate),this._getDayDifferenceString(currentLeg.departureDate,currentLeg.arrivalDate),currentLeg.offPoint,currentLeg.offPoint.terminal,hasArrivalTerminalChange(nextLeg,currentLeg,segment,segments,segmentIndex)),this.__$write("\n</div>\n",1820)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayLegsArrivalAndDeparture",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayTechnicalStops:function(config,segment){try{with(this){if(this.__$write('\n<div class="segment-details-technical-stops-simple">\n',1833),this.segmentHasLegs(segment)){var __v_9=this.getTechnicalStopsForSegment(segment);void 0==this.getTechnicalStopsForSegment(segment)&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,1836]);for(var stop_ct=0,__v_10=__v_9.length,stop_index=0;__v_10>stop_index;stop_index++){var stop=__v_9[stop_index];stop_ct++,this.macro_displayTechnicalStopSimple(config,stop.firstLeg,stop.secondLeg)}}else for(var index=0;index<segment.nbrOfStops;index++)this.macro_displayTechnicalStopSimple(config,null,null);this.__$write("\n</div>\n",1845)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTechnicalStops",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayTechnicalStopDetailed:function(config,startLeg,endLeg){try{with(this)this.__$write('\n\n<div class="segment-details-technical-stop col-xs-24">\n<div class="segment-details-stop-duration col-xs-6 col-sm-4 col-md-3">\n<div class="row text-center">\n<div class="col-xs-24">\n<i class="segment-details-technical-stop-icon icon-fuel" aria-hidden="true"></i>\n</div>\n<div class="col-xs-24">\n<span class="segment-details-technical-stop-text">\n',1859),this.__$write(this._i18n.getLabel("tx_pltg_text_TechnicalStop_noColon"),1868),this.__$write("\n</span>\n</div>\n</div>\n</div>\n\n",1869),startLeg&&endLeg&&(this.__$write('\n<div class="col-xs-18 col-sm-20 col-md-21">\n<div class="segment-details-stop-duration row">\n<div class="col-xs-24">\n<time class="segment-details-technical-stop-duration">\n',1875),this.__$write(this._dateUtils.formatDateTime(this._flightUtils.getTechnicalStopDuration(startLeg,endLeg),plnextv2.utils.DateUtils.FORMATS.DURATION_FORMAT),1879),this.__$write('\n</time>\n</div>\n<div class="col-xs-24">\n<span class="segment-details-technical-stop-location-name">\n',1880),this.__$write(startLeg.offPoint.locationName,1884),this.__$write("\n</span>\n<span class=\"segment-details-technical-stop-location-code\">\n<bdo dir='ltr'>(",1885),this.__$write(startLeg.offPoint.locationCode,1887),this.__$write(')</bdo>\n</span>\n</div>\n<div class="col-xs-24">\n',1887),this._flightUtils.isDifferentLegAirport(startLeg,endLeg)?this.macro_displayAirportChangeInfo(endLeg.boardPoint.locationName,endLeg.boardPoint.locationCode):this._flightUtils.isDifferentLegTerminal(startLeg,endLeg)&&this.macro_displayTerminalChangeInfo(),this.__$write("\n</div>\n</div>\n</div>\n",1896)),this.__$write("\n\n</div>\n\n",1900)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTechnicalStopDetailed",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayTechnicalStopSimple:function(config,startLeg,endLeg){try{with(this)this.__$write('\n<div class="segment-details-technical-stop">\n<i class="segment-details-technical-stop-icon icon-fuel" aria-hidden="true"></i>\n<span class="segment-details-technical-stop-text">\n',1916),this.__$write(this._i18n.getLabel("tx_pltg_text_TechnicalStop_noColon"),1919),this.__$write("\n</span>\n\n",1920),startLeg&&endLeg&&(this.__$write('\n<span class="segment-details-technical-stop-location-name">\n',1923),this.__$write(startLeg.offPoint.locationName,1924),this.__$write("\n</span>\n<span class=\"segment-details-technical-stop-location-code\">\n<bdo dir='ltr'>(",1925),this.__$write(startLeg.offPoint.locationCode,1927),this.__$write(")</bdo>\n</span>\n",1927)),this.__$write("\n</div>\n",1930)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTechnicalStopSimple",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayCancelWarning:function(){try{with(this)this.__$write('\n<div class="segment-details-cancel alert-warning">\n<i aria-hidden="true" class="icon icon-warning-sign"></i>\n<span>',1937),this.__$write(this._i18n.getLabel("tx_pltg_text_Canceled"),1939),this.__$write("</span>\n</div>\n",1939)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayCancelWarning",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayStars:function(fullStars,emptyStars){try{with(this){this.__$write('\n<div class="cabin-upgrade-stars">\n',1952);for(var i=0;fullStars>i;i++)this.__$write('\n<i class="icon icon-star" aria-hidden="true"></i>\n',1954);this.__$write("\n</div>\n",1956)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayStars",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayUpgradeContent:function(cabin,amount,currency,priceText,segment,cabin_index,isCurrentCabin,config,moduleControl){try{with(this){this.__$write('\n<h3 class="cabin-upgrade-name"> ',1982),this.__$write(cabin.cabinName,1982),this.__$write("</h3>\n",1982),this.macro_displayStars(cabin.cabinRank,cabin.totalCabinRank-cabin.cabinRank),this.__$write('\n\n<div class="cabin-upgrade-image">\n',1984),segment.cabinsImage&&segment.cabinsImage[cabin_index]&&(this.__$write('\n<img aria-hidden="true" src= ',1987),this.__$write(segment.cabinsImage[cabin_index],1987),this.__$write(" />\n",1987)),this.__$write('\n</div>\n\n<div class="cabin-upgrade-price">\n',1989),config.upgradeMilesOnly||this.__$write(this._priceUtils.formatCurrency(amount,currency,"cabin-upgrade-price-currency","cabin-upgrade-price-value"),1993);var maxAward=this._upgradeUtils.getFareInfo(cabin,this.MAX_AWARD);this.shouldDisplayMilesPriceForCabinUpgrade(isCurrentCabin,maxAward)&&(this.__$write('\n<div class="cabin-upgrade-price-separator">\n',2002),config.upgradeMilesOnly||(this.__$write('\n<span class="cabin-upgrade-price-separator-line-container"><hr class="cabin-upgrade-price-separator-line"></span>\n<span class="cabin-upgrade-price-separator-text">',2004),this.__$write(this._i18n.getLabel("tx_pltg_text_upgradePriceMilesSeparator"),2005),this.__$write('</span>\n<span class="cabin-upgrade-price-separator-line-container"><hr class="cabin-upgrade-price-separator-line"></span>\n',2005)),this.__$write("\n</div>\n",2008),this.__$write(this._priceUtils.formatMilesWithHTML(maxAward,"cabin-upgrade-price-miles-text","cabin-upgrade-price-miles-amount"),2009)),this.__$write('\n<span class="cabin-upgrade-price-text"> ',2015),this.__$write(priceText,2015),this.__$write('</span>\n</div>\n<span class="cabin-upgrade-text">\n',2015),segment.cabinsDescription&&segment.cabinsDescription[cabin_index]&&this.__$write(segment.cabinsDescription[cabin_index],2019),this.__$write("\n</span>\n\n",2021);var upgradeData={config:config,normalizedUpgradeBean:moduleControl.getNormalizedUpgradeBean(),cabin:cabin,segment:segment,cabinIndex:cabin_index};this.isNotEnoughMilesForUpgradeOnLoad(upgradeData)&&(this.__$write('\n<span class="cabin-upg-nomilesavail-text">\n',2031),this.__$write(this._i18n.getLabel("tx_pltg_text_upgradeNotEnoughMiles"),2032),this.__$write("\n</span>\n",2033));var milesRequiredForUpgrade=this.isMoreMilesRequiredForOtherUpgrades(upgradeData);0!=milesRequiredForUpgrade&&(this.__$write('\n<span class="cabin-upg-missing-miles-text">\n',2038),this.__$write(this._priceUtils.formatMissingMilesForUpgrade(milesRequiredForUpgrade),2039),this.__$write("\n</span>\n",2040)),this.__$write('\n\n<div class="cabin-upgrade-footer ',2042),this.isCabinUpgradeDisabledForMilesOnlyUpgrade(upgradeData)&&this.__$write(" hidden ",2043),this.__$write('">\n',2043);var buttonText=this._i18n.getLabel("tx_pltg_text_upgradeTo");if(isCurrentCabin)var buttonText=this._i18n.getLabel("tx_pltg_text_upgradeBackTo");this.__$write(buttonText,2048),this.__$write(" ",2048),this.__$write(cabin.cabinName,2048),this.__$write("\n</div>\n",2049)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayUpgradeContent",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayCabinUpgradeAvailable:function(bsGrid,isCurrentCabin,isSelectedCabin,cabin_index,segmentId,cabin,amount,currency,priceText,moduleControl,segment,config){try{with(this){if(this.__$write('\n<div class="cabin-upgrade ',2081),this.__$write(getBsGridClass(bsGrid,"cabinUpgrade"),2081),this.__$write('">\n',2081),isCurrentCabin)this.__$write('\n<input type="radio" name="upgrade-choice-',2083),this.__$write(segmentId,2083),this.__$write('" class="cabin-upgrade-input" value="-1" id="',2083),this.__$write(segmentId,2083),this.__$write("-",2083),this.__$write(cabin_index,2083),this.__$write('" ',2083),this.__$write(isSelectedCabin?"checked":"",2083),this.__$statementOnEvent("click",this.$normCallback({fn:"onClickUpgrade",args:{segment:segmentId,value:-1,segmentData:segment},scope:moduleControl}),2084),this.__$write(' />\n<label class="cabin-upgrade-label cabin-currentcabin" for="',2084),this.__$write(segmentId,2085),this.__$write("-",2085),this.__$write(cabin_index,2085),this.__$write('">\n',2085),this.macro_displayUpgradeContent(cabin,amount,currency,priceText,segment,cabin_index,isCurrentCabin,config,moduleControl),this.__$write("\n</label>\n",2087);else{var upgradeData={config:config,normalizedUpgradeBean:moduleControl.getNormalizedUpgradeBean(),cabin:cabin,segment:segment,cabinIndex:cabin_index};this.__$write('\n<input type="radio" name="upgrade-choice-',2096),this.__$write(segmentId,2096),this.__$write('" class="cabin-upgrade-input" value="',2096),this.__$write(cabin.solutionId,2096),this.__$write('" id="',2096),this.__$write(segmentId,2096),this.__$write("-",2096),this.__$write(cabin_index,2096),this.__$write('" ',2096),this.__$write(isSelectedCabin?"checked":"",2096),this.__$statementOnEvent("click",this.$normCallback({fn:"onClickUpgrade",args:{segment:segmentId,value:cabin.solutionId,segmentData:segment},scope:moduleControl}),2097),this.isCabinUpgradeDisabledForMilesOnlyUpgrade(upgradeData)&&this.__$write('disabled="disabled"',2098),this.__$write(' />\n<label class="cabin-upgrade-label" for="',2098),this.__$write(segmentId,2099),this.__$write("-",2099),this.__$write(cabin_index,2099),this.__$write('">\n',2099),this.macro_displayUpgradeContent(cabin,amount,currency,priceText,segment,cabin_index,isCurrentCabin,config,moduleControl),this.__$write("\n</label>\n",2101)}this.__$write("\n</div>\n",2103)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayCabinUpgradeAvailable",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayCabinUpgradeNotAvailable:function(bsGrid,cabin,amount,currency,priceText,segment,cabin_index,isCashUpgradeBlockedByChargeableServices,config,moduleControl){try{with(this)this.__$write('\n<div class="cabin-upgrade ',2131),this.__$write(getBsGridClass(bsGrid,"cabinUpgrade"),2131),this.__$write('">\n<label class="cabin-upgrade-label-not-eligible">\n',2131),isCashUpgradeBlockedByChargeableServices?this.macro_displayUpgradeContent(cabin,amount,currency,priceText,segment,cabin_index,config,moduleControl):(this.__$write('\n<h3 class="cabin-upgrade-name"> ',2136),this.__$write(cabin.cabinName,2136),this.__$write("</h3>\n",2136),this.macro_displayStars(cabin.cabinRank,cabin.totalCabinRank-cabin.cabinRank),this.__$write('\n<div class="cabin-upgrade-image">\n',2138),segment&&segment.cabinsImage&&segment.cabinsImage[cabin_index]&&(this.__$write('\n<img aria-hidden="true" src= ',2140),this.__$write(segment.cabinsImage[cabin_index],2140),this.__$write(" />\n",2140)),this.__$write('\n</div>\n<div class="cabin-upgrade-price">\n<span class="cabin-upgrade-price-value">',2142),this.__$write(amount,2144),this.__$write('</span>\n<span class="cabin-upgrade-price-text"> ',2144),this.__$write(priceText,2145),this.__$write('</span>\n</div>\n<span class="cabin-upgrade-text">\n',2145),segment.cabinsDescription&&segment.cabinsDescription[cabin_index]&&this.__$write(segment.cabinsDescription[cabin_index],2149),this.__$write('\n</span>\n<div class="cabin-upgrade-footer">\n',2151),this.__$write(this._i18n.getLabel("tx_pltg_text_upgradeTo"),2153),this.__$write(" ",2153),this.__$write(cabin.cabinName,2153),this.__$write("\n</div>\n",2154)),this.__$write("\n</label>\n</div>\n",2156)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayCabinUpgradeNotAvailable",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayUpgrade:function(bsGrid,bound,segment,segmentIndex,moduleControl,config){try{with(this)if(plnextv2.utils.UpgradeUtils.isAlreadyUpgraded(segment)||!plnextv2.utils.UpgradeUtils.isSegmentEligible(segment)||plnextv2.utils.UpgradeUtils.isSegmentFlown(segment))this.macro_displayUpgradeErrorCases(segment);else{this.__$write('\n\n<div class="upgrade-row upgrade-row-eligible">\n',2178),this.__$write(this._i18n.getLabel("tx_pltg_text_UPGDPageWarning"),2180),this.__$write("\n<form>\n",2181);var sortedCabins=sortCabins(segment.upgradeData.upgradesByCabin),__v_11=sortedCabins;void 0==sortedCabins&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,2183]);for(var c_ct=0,__v_12=__v_11.length,c_index=0;__v_12>c_index;c_index++){var c=__v_11[c_index];c_ct++;var cabin=segment.upgradeData.upgradesByCabin[c[0]],isSelected=segment.upgradeData.selectedCabinCode==c[0];if(segment.upgradeData.currentCabinCode==c[0])config.isCashUpgradeBlockedByChargeableServices?this.macro_displayCabinUpgradeNotAvailable(bsGrid,cabin,this._i18n.getLabel("tx_pltg_text_Free"),"",this._i18n.getLabel("tx_pltg_text_currentcabin"),segment,c[0],moduleControl):this.macro_displayCabinUpgradeAvailable(bsGrid,!0,isSelected,c[0],segment.id,cabin,this._i18n.getLabel("tx_pltg_text_Free"),"",this._i18n.getLabel("tx_pltg_text_currentcabin"),moduleControl,segment,config);else if(cabin.price&&!config.isCashUpgradeBlockedByChargeableServices)this.macro_displayCabinUpgradeAvailable(bsGrid,!1,isSelected,c[0],segment.id,cabin,cabin.price.amount,cabin.price.currency,this._i18n.getLabel("tx_pltg_text_forall"),moduleControl,segment,config);else if(!cabin.hide){var amount="",currency="",priceText=this._i18n.getLabel("tx_pltg_text_notonthisflight");config.isCashUpgradeBlockedByChargeableServices&&cabin.price&&(amount=cabin.price.amount,currency=cabin.price.currency,priceText=this._i18n.getLabel("tx_pltg_text_forall")),this.macro_displayCabinUpgradeNotAvailable(bsGrid,cabin,amount,currency,priceText,segment,c[0],config.isCashUpgradeBlockedByChargeableServices,moduleControl)}}this.__$write('\n<div class="clear"></div>\n</form>\n</div>\n',2208)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayUpgrade",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayUpgradeErrorCases:function(segment){try{with(this){if(this.__$write('\n\n<div class="upgrade-row upgrade-row-not-upgradable">\n',2225),plnextv2.utils.UpgradeUtils.isAlreadyUpgraded(segment)){var cabinClass=segment.listCabin[0].name;this.__$write('\n<div class="upgrade-row-noupgrade-alreadyupgraded">\n<i aria-hidden="true" class="icon-ok-sign panel-icon"></i>\n',2229),this.__$write(_i18n.getStringFromPattern("tx_pltg_text_noupgradeAlreadyUpgraded",[cabinClass]),2231),this.__$write("\n</div>\n",2232),plnextv2.utils.UpgradeUtils.isSegmentEligible(segment)&&(this.__$write('\n<div class="upgrade-row-noupgrade-callcenter">\n',2234),this.__$write(this._i18n.getLabel("tx_pltg_text_noupgradeCallCenter"),2235),this.__$write("\n</div>\n",2236))}else plnextv2.utils.UpgradeUtils.isSegmentEligible(segment)||this.__$write(this._i18n.getLabel("tx_pltg_text_noeligible"),2239);this.__$write("\n</div>\n",2241)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayUpgradeErrorCases",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayOperationalInfoPanel:function(segment,segmentIndex,bsGrid,config){try{with(this)this.__$write('\n<section class="segment-row-operationalInfo row" id="FLIFO-Information-Container-',2258),this.__$write(segmentIndex,2258),this.__$write('">\n',2258),segment.operationalEvents?(this.macro_displayOperationalInfoLink(segment,segmentIndex,bsGrid,config),this.macro_displayOperationalInfoTable(segment,segmentIndex,bsGrid)):this.macro_printMessageForMissingOperationInfo(),this.__$write("\n</section>\n",2265)
}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayOperationalInfoPanel",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayOperationalInfoLink:function(segment,segmentIndex,bsGrid,config){try{with(this)this.__$write('\n<div class="operationalinfo-link ',2281),this.__$write(getBsGridClass(bsGrid,"segmentOperationalInfo"),2281),this.__$write('">\n<a href="javascript:;" id="flifo-operationalinfo-link-',2281),this.__$write(segmentIndex,2282),this.__$write('"\naria-expanded="true"\ndata-target="flifo-operationalinfotable-',2282),this.__$write(segmentIndex,2284),this.__$write('"\ndata-icon="flifo-operationalinfo-icon-',2284),this.__$write(segmentIndex,2285),this.__$write('"\n',2285),this.__$statementOnEvent("click",this.$normCallback({fn:"showOperationalInfo",args:[config.display]}),2286),this.__$write(' >\n<span class="operationalinfo-link-content">\n<i id="flifo-operationalinfo-icon-',2286),this.__$write(segmentIndex,2288),this.__$write('" class="icon icon-caret-down icon-caret" aria-hidden="true"></i>\n',2288),textId="flifo-operationalinfo-text-"+segmentIndex,this.__$processWidgetMarkup("plnextv2.utils.widgets.PlnextLib","Text",{bind:{text:{inside:config.display,to:"operationalLink"}},id:textId},2290),this.__$write("\n</span>\n</a>\n</div>\n",2299)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayOperationalInfoLink",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayOperationalInfoTable:function(segment,segmentIndex,bsGrid){try{with(this){this.__$write('\n<div id="flifo-operationalinfotable-',2315),this.__$write(segmentIndex,2315),this.__$write('" class="operationalinfo-panel ',2315),this.__$write(getBsGridClass(bsGrid,"segmentOperationalTable"),2315),this.__$write('">\n<table class="dialog-Table operationalInfo-table table-striped">\n<caption class="plnext-sr-only" visibility="hidden">\n',2315),this.__$write(this._i18n.getStringFromPattern("tx_pltg_text_FLIFOTableTitle",[segment.airline.code+segment.flightNumber]),2318),this.__$write("\n</caption>\n<thead>\n<tr>\n<th>",2319),this.__$write(this._i18n.getLabel("tx_pltg_text_FLIFOHour"),2322),this.__$write(" </th>\n<th>",2322),this.__$write(this._i18n.getLabel("tx_pltg_text_FLIFOFlightInformation"),2323),this.__$write(" </th>\n<th>",2323),this.__$write(this._i18n.getLabel("tx_pltg_text_FLIFOAirport"),2324),this.__$write(" </th>\n</tr>\n</thead>\n<tbody>\n",2324);var __v_13=segment.operationalEvents;void 0==segment.operationalEvents&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,2328]);for(var operationalInfoData_ct=0,__v_14=__v_13.length,operationalInfoData_index=0;__v_14>operationalInfoData_index;operationalInfoData_index++){var operationalInfoData=__v_13[operationalInfoData_index];operationalInfoData_ct++,this.__$write("\n<tr>\n<th>\n",2329),this.__$write(getFormattedTime(operationalInfoData),2331),this.__$write('\n</th>\n<td class="FLIFOInfoAirline">',2332),this.__$write(plnextv2.utils.StringUtils.toProperCase(operationalInfoData.info),2333),this.__$write("</td>\n<td>",2333),this.__$write(operationalInfoData.location.cityName,2334),this.__$write(", ",2334),this.__$write(operationalInfoData.location.countryName,2334),this.__$write(" - ",2334),this.__$write(operationalInfoData.location.locationName,2334),this.__$write("</td>\n</tr>\n",2334)}this.__$write("\n</tbody>\n</table>\n</div>\n",2337)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayOperationalInfoTable",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printMessageForMissingOperationInfo:function(){try{with(this)this.__$write('\n<p class="paragraph-content no-operational-info">\n<i aria-hidden="true" class="icon-info-sign"></i>\n',2346),this.__$write(this._i18n.getLabel("tx_pltg_text_FLIFOInformationNotAvailable"),2348),this.__$write("\n</p>\n",2349)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printMessageForMissingOperationInfo",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayBoundDuration:function(bound,config,bsGrid){try{with(this)this.__$write('\n<footer class="bounds-panel-footer panel-footer">\n<div class="row">\n<div class="empty-space ',2363),this.__$write(getBsGridClass(bsGrid,"boundDetailsLeft"),2365),this.__$write('">\n</div>\n<div class="itinerary-details row">\n<div class="col-xs-24 col-sm-12 col-sm-offset-12">\n<div class="total-duration">\n<div class="total-duration-col">\n',2365),this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","OnOneLine",void 0,2371)&&(this.__$write('\n<span class="total-duration-text">',2372),this.__$write(this._i18n.getLabel("tx_pltg_text_TotalDuration"),2372),this.__$write('</span>\n<span class="total-duration-value"> ',2372),this.__$write(this._dateUtils.formatDateTime(bound.listSegment[bound.listSegment.length-1].flightTime,plnextv2.utils.DateUtils.FORMATS.DURATION_FORMAT),2373),this.__$write("</span>\n",2373),this.macro_displayNumberOfStops(bound),this.__$endContainerWidget()),this.__$write("\n</div>\n</div>\n</div>\n</div>\n</div>\n</footer>\n",2376)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayBoundDuration",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayStop:function(bound,segment,segmentIndex,boundDetails){try{with(this)if(segmentIndex<bound.lastIndex){var nextSegment=bound.listSegment[parseInt(segmentIndex)+1],waiverItems=getWaiverItems(boundDetails,getSegmentPosition(boundDetails,segmentIndex)),nextDepartureDisrupted=_dynamicWaiverUtils.isLocationDisrupted(waiverItems,extractSegmentLocation(!0,nextSegment),!0),isArrivalDisrupted=_dynamicWaiverUtils.isLocationDisrupted(waiverItems,extractSegmentLocation(!1,segment),!1);this.__$write('\n<div class="',2404),this.__$write(getCssClassDisruptedStop(isArrivalDisrupted,nextDepartureDisrupted),2404),this.__$write(' segment-details segment-details-stop-row row">\n<span class="timeline-segment-stop-start-mark"></span>\n<span class="timeline-segment-stop-end-mark"></span>\n<div class="segment-details-stop-duration col-xs-6 col-sm-3 col-lg-2">\n<div class="row text-center">\n<div class="col-xs-24">\n<i class="segment-details-stop-icon icon-stopwatch" aria-hidden="true"></i>\n</div>\n<div class="col-xs-24">\n<span class="segment-details-stop-duration-text">\n',2404),this.__$write(this._i18n.getLabel("tx_pltg_text_Stop"),2414),this.__$write('\n</span>\n</div>\n</div>\n</div>\n<div class="col-xs-18 col-sm-21 col-lg-22">\n<div class="segment-details-stop-duration row">\n<div class="col-xs-24">\n<time class="segment-details-stop-duration-value">\n',2415),this.__$write(this._dateUtils.formatDateTime(this._flightUtils.getStopDuration(segment,nextSegment),plnextv2.utils.DateUtils.FORMATS.DURATION_FORMAT),2423),this.__$write('\n</time>\n</div>\n<div class="col-xs-24">\n<span class="segment-details-stop-location-name">\n',2424),this.__$write(segment.endLocation.locationName,2428),this.__$write("\n</span>\n<span class=\"segment-details-stop-location-code\">\n<bdo dir='ltr'>(",2429),this.__$write(segment.endLocation.locationCode,2431),this.__$write(')</bdo>\n</span>\n</div>\n<div class="col-xs-24">\n',2431),this._flightUtils.isDifferentAirport(segment,nextSegment)?this.macro_displayAirportChangeInfo(nextSegment.beginLocation.locationName,nextSegment.beginLocation.locationCode):this._flightUtils.isDifferentTerminal(segment,nextSegment)&&this.macro_displayTerminalChangeInfo(),this.__$write("\n</div>\n</div>\n</div>\n</div>\n",2440)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayStop",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayAirportChangeInfo:function(locationName,locationCode){try{with(this)this.__$write('\n<span class="segment-details-airport-change">\n',2456),this.__$write(this._i18n.getLabel("tx_pltg_text_AirportChangeTo"),2457),this.__$write(" ",2457),this.__$write(locationName,2457),this.__$write(" <bdo dir='ltr'>(",2457),this.__$write(locationCode,2457),this.__$write(")</bdo>\n</span>\n",2457)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayAirportChangeInfo",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayTerminalChangeInfo:function(){try{with(this)this.__$write('\n<span class="segment-details-terminal-change">\n',2465),this.__$write(this._i18n.getLabel("tx_pltg_text_terminalChange"),2466),this.__$write("\n</span>\n",2467)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTerminalChangeInfo",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printCurrentFlightLabel:function(){try{with(this)this.__$write('\n<div class="new-bound">\n<span>',2474),this.__$write(this._i18n.getLabel("tx_pltg_text_NewItinerary"),2475),this.__$write("</span>\n</div>\n",2475)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printCurrentFlightLabel",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayRbdClassesByTwoDivs:function(rbdClasses,config,firstCssClass,secondCssClass){try{with(this)this.__$write('\n<div class="',2493),this.__$write(firstCssClass,2493),this.__$write('">\n',2493),this.__$write(this._i18n.getLabel("tx_pltg_text_Class"),2494),this.__$write('\n</div>\n<div class="',2495),this.__$write(secondCssClass,2496),this.__$write('">\n',2496),config.rbdUrl&&config.rbdUrl.length>0?this.macro_displayRbdLink(this.getRbdText(rbdClasses),config.rbdUrl):(this.__$write('\n<div class="rbd-details">\n',2500),this.macro_printRbdClasses(rbdClasses),this.__$write("\n</div>\n",2502)),this.__$write("\n</div>\n",2504)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayRbdClassesByTwoDivs",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayRbdClasses:function(rbdClasses,config,showClassLabel){try{with(this)if(config.rbdUrl&&config.rbdUrl.length>0){var linkText=this.getRbdText(rbdClasses);showClassLabel&&(linkText=this._i18n.getLabel("tx_pltg_text_Class")+" "+linkText),this.macro_displayRbdLink(linkText,config.rbdUrl)}else this.__$write('\n<span class="rbd-details">\n',2530),showClassLabel&&(this.__$write('\n\n<span class="rbd-label">',2532),this.__$write(this._i18n.getLabel("tx_pltg_text_Class"),2533),this.__$write("</span>\n",2533)),this.macro_printRbdClasses(rbdClasses),this.__$write("\n</span>\n",2536)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayRbdClasses",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayRbdLink:function(linkText,linkUrl){try{with(this)this.__$write('\n<a href="',2549),this.__$write(linkUrl,2549),this.__$write('" target="_blank" class="rbd-classes-link"\n',2549),this.__$statementOnEvent("click",this.$normCallback({fn:"clickOnRBD",args:{ClassRBD:linkText,linkUrl:linkUrl},scope:this}),2550),this.__$write(">\n<span>\n",2550),this.__$write(linkText,2552),this.__$write('\n<i class="icon icon-external-link" aria-hidden="true" title="',2553),this.__$write(this._i18n.getLabel("tx_pltg_text_OpenNewWindow"),2553),this.__$write('"></i>\n</span>\n<span class="plnext-sr-only">',2553),this.__$write(this._i18n.getLabel("tx_pltg_text_OpenNewWindow"),2555),this.__$write("</span>\n</a>\n",2555)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayRbdLink",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printRbdClasses:function(rbdClasses){try{with(this)this.__$write('\n<span class="rbd-classes">',2566),this.__$write(this.getRbdText(rbdClasses),2566),this.__$write("</span>\n",2566)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printRbdClasses",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayFare:function(boundOrSegment,fareFamilyConditions,config,cssClassPrefix,extraCssClass,ffIsDynamic){try{with(this){cssClassPrefix=cssClassPrefix||"",extraCssClass=extraCssClass||"";var boundHasMultipleFareFamilies=this._boundUtils.boundHasMultipleFareFamilies(boundOrSegment);if(config&&config.displayFFPerSegment&&boundHasMultipleFareFamilies){this.macro_displayMultipleFareFamiliesWarning(cssClassPrefix);var __v_15=this.getListOfSegementsWithDifferentFareFamilies(boundOrSegment.listSegment);void 0==this.getListOfSegementsWithDifferentFareFamilies(boundOrSegment.listSegment)&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,2589]);for(var segment_ct=0,__v_16=__v_15.length,segment_index=0;__v_16>segment_index;segment_index++){var segment=__v_15[segment_index];segment_ct++,this.macro_displayFareFamily(segment,fareFamilyConditions,config,cssClassPrefix,extraCssClass,ffIsDynamic)}}else if(config&&!config.displayFFPerSegment&&boundHasMultipleFareFamilies){"tripsummary-"===cssClassPrefix&&this.macro_displayMultipleFareFamiliesWarning(cssClassPrefix);var __v_17=this.getListOfSegementsWithDifferentFareFamilies(boundOrSegment.listSegment);void 0==this.getListOfSegementsWithDifferentFareFamilies(boundOrSegment.listSegment)&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,2596]);for(var segment_ct=0,__v_18=__v_17.length,segment_index=0;__v_18>segment_index;segment_index++){var segment=__v_17[segment_index];segment_ct++,this.macro_displayFareFamily(segment,fareFamilyConditions,config,cssClassPrefix,extraCssClass,ffIsDynamic,boundHasMultipleFareFamilies)}}else this.macro_displayFareFamily(boundOrSegment,fareFamilyConditions,config,cssClassPrefix,extraCssClass,ffIsDynamic)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayFare",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayFareFamily:function(bound,fareFamilyConditions,config,cssClassPrefix,extraCssClass,ffIsDynamic,boundHasMultipleFareFamilies){try{with(this){var fareUtils=plnextv2.utils.FareUtils;if(bound.fareFamily){var ffURI=fareUtils.getFareURI(fareFamilyConditions,bound.fareFamily.ffCode);ffURI?this.macro_displayFareFamilyLink(bound,fareFamilyConditions,config,cssClassPrefix,extraCssClass,ffURI):this.macro_displayFareFamilyShortDescription(bound,fareFamilyConditions,config,cssClassPrefix,extraCssClass,boundHasMultipleFareFamilies),this.macro_displayDynamicFareFamilyValueDealLabel(bound.fareFamily,ffIsDynamic)}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayFareFamily",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayMultipleFareFamiliesWarning:function(cssClassPrefix,spanFullColumnWidth){try{with(this)this.__$write('\n<div class="',2647),this.__$write(cssClassPrefix,2647),this.__$write("different-fare-families-warning ",2647),spanFullColumnWidth&&this.__$write("col-xs-24",2647),this.__$write('">\n<span class="',2647),this.__$write(cssClassPrefix,2648),this.__$write('different-fare-families-warning-text">\n',2648),this.__$write(this._i18n.getLabel("tx_pltg_text_differentFareFamilies"),2649),this.__$write("\n</span>\n</div>\n",2650)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayMultipleFareFamiliesWarning",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayMultipleCabinsWarningItPanel:function(){try{with(this)this.__$write('\n<div class="different-cabins-warning col-xs-24">\n',2658),this.__$write(this._i18n.getLabel("tx_pltg_text_differentCabins"),2659),this.__$write("\n</div>\n",2660)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayMultipleCabinsWarningItPanel",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayFareFamilyLink:function(bound,fareFamilyConditions,config,cssClassPrefix,extraCssClass,ffURI){try{with(this){var fareUtils=plnextv2.utils.FareUtils;this.__$write('\n<a href="',2681),this.__$write(ffURI,2681),this.__$write('" target="_blank" class="',2681),this.__$write(cssClassPrefix,2681),this.__$write("bound-fare bound-ff-uri ",2681),this.__$write(cssClassPrefix,2681),this.__$write("ff clearfix ",2681),this.__$write(extraCssClass,2681),this.__$write('"\n',2681),this.__$statementOnEvent("click",this.$normCallback({fn:"clickFareFamily",scope:config.externalLinkScope,args:{ffCode:bound.fareFamily.ffCode}}),2682),this.__$write('>\n<span class="',2682),this.__$write(cssClassPrefix,2683),this.__$write('ff-name">\n',2683),this.__$write(bound.fareFamily.ffName,2684),this.__$write('&nbsp;<i class="icon icon-external-link" aria-hidden="true" title="',2684),this.__$write(this._i18n.getLabel("tx_pltg_text_OpenNewWindow"),2684),this.__$write('"></i>\n</span>\n<span class="',2684),this.__$write(cssClassPrefix,2686),this.__$write('ff-short-desc">\n',2686),this.__$write(fareUtils.getShortDescription(fareFamilyConditions,bound.fareFamily.ffCode,config),2687),this.__$write('\n</span>\n<span class="plnext-sr-only">\n',2688),this.__$write(this._i18n.getLabel("tx_pltg_text_OpenNewWindow"),2690),this.__$write("\n</span>\n</a>\n",2691)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayFareFamilyLink",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayFareFamilyShortDescription:function(bound,fareFamilyConditions,config,cssClassPrefix,extraCssClass,boundHasMultipleFareFamilies){try{with(this){var fareUtils=plnextv2.utils.FareUtils,isTripSummary="tripsummary-"===cssClassPrefix;bound.fareFamily.ffName&&(this.__$write('\n<span class="',2715),this.__$write(cssClassPrefix,2715),this.__$write("ff ",2715),this.__$write(cssClassPrefix,2715),this.__$write("bound-fare-text clearfix ",2715),this.__$write(extraCssClass,2715),this.__$write(" ",2715),!isTripSummary&&boundHasMultipleFareFamilies&&this.__$write("flight-info-fare-type-warning-bold",2715),this.__$write('">\n\n',2715),(isTripSummary||!config.displayFFPerSegment)&&(this.__$write('\n<span class="',2718),this.__$write(cssClassPrefix,2718),this.__$write('ff-label">\n',2718),this.__$write(this._i18n.getLabel("tx_pltg_text_FareTypeLabel"),2719),this.__$write("\n</span>\n",2720)),this.__$write('\n<span class="',2722),this.__$write(cssClassPrefix,2722),this.__$write('ff-name ff-label-exist">\n',2722),this.__$write(bound.fareFamily.ffName,2723),this.__$write('\n</span>\n<span class="',2724),this.__$write(cssClassPrefix,2725),this.__$write('ff-short-desc">\n',2725),this.__$write(fareUtils.getShortDescription(fareFamilyConditions,bound.fareFamily.ffCode,config),2726),this.__$write("\n</span>\n</span>\n",2727))}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayFareFamilyShortDescription",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayDynamicFareFamilyValueDealLabel:function(fareFamily,ffIsDynamic){try{with(this)ffIsDynamic&&(this.__$write('\n<span class="dff-value-deal-label" style="',2740),this.__$write(getDFFDealStyle(fareFamily.ffColor),2740),this.__$write('">\n',2740),this.__$write(this._i18n.getLabel("tx_pltg_text_DFFValueDealLabel"),2741),this.__$write("\n</span>\n",2742))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayDynamicFareFamilyValueDealLabel",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayBoundTitleForUpgrade:function(listItinerary,bound_index,bsGrid,bound,search){try{with(this){if(this.__$write('\n<header class="bounds-panel-heading panel-heading">\n<h2 class="horizontal-title">\n\n\n\n',2762),listItinerary.length<=2?0==bound_index?this.__$write('\n<i class="icon-plane-departure icon-plane icon-icon-plane" aria-hidden="true"></i>\n',2769):this.__$write('\n<i class="icon-plane-return icon-icon-plane" aria-hidden="true"></i>\n',2771):(this.__$write('\n<span class="bound-number">\n<span class="plnext-sr-only">',2774),this.__$write(this._i18n.getLabel("tx_pltg_text_calendar_flight"),2775),this.__$write("</span>\n",2775),this.__$write(parseInt(bound_index)+1,2776),this.__$write("\n</span>\n",2777)),this.__$write(bound.beginLocation.cityName,2779),this.__$write(" - ",2779),this.__$write(bound.endLocation.cityName,2779),this.__$write(',\n<time class="date">\n\n',2779),search)var beginDate=new Date(search[bound_index].beginDate);else var beginDate=new Date(bound.firstSegment.beginDate);this.__$write(this._dateUtils.formatDateTime(beginDate,plnextv2.utils.DateUtils.FORMATS.FULL_DATE_FORMAT),2787),this.__$write('\n</time>\n</h2>\n<div class="horizontal-title-upgrades-totalduration">\n<span class="total-duration-text">',2788),this.__$write(this._i18n.getLabel("tx_pltg_text_TotalDuration"),2791),this.__$write('</span>\n<span class="total-duration-value"> ',2791),this.__$write(this._dateUtils.formatDateTime(bound.lastSegment.flightTime,plnextv2.utils.DateUtils.FORMATS.DURATION_FORMAT),2792),this.__$write("</span>\n</div>\n\n</header>\n",2792)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayBoundTitleForUpgrade",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayBoundTitle:function(isNew,listItinerary,bound_index,bsGrid,bound,search,isPreviousItinerary,boundLabel,config){try{with(this){bound||(bound=buildBoundObject(listItinerary[bound_index])),this.__$write('\n<div class="bound-row bound-row-title row">\n',2824),isNew&&this.macro_printCurrentFlightLabel(),this.__$write('\n<div class="',2828),this.__$write(getBsGridClass(bsGrid,"boundDetails"),2828),this.__$write('">\n',2828);var hLevel=3;this.__$write("\n<h",2830),this.__$write(hLevel,2830),this.__$write(' class="title">\n',2830),this.macro_printItineraryHeader(listItinerary,bound_index,bound,search,boundLabel,config),this.__$write("\n</h",2832),this.__$write(hLevel,2832),this.__$write(">\n</div>\n",2832),isPreviousItinerary||listItinerary[bound_index].flown&&(this.__$write('\n<div class="bound-flown-row ',2837),this.__$write(getBsGridClass(bsGrid,"boundDetailsFlag"),2837),this.__$write('">\n<div class="bound-flown">\n<i class="icon icon-info-sign" aria-hidden="true"></i>\n<span>',2837),this.__$write(this._i18n.getLabel("tx_pltg_text_flight_flown"),2840),this.__$write("</span>\n</div>\n</div>\n",2840));var isRadvs="RADVS"===plnextv2.utils.context.AppContext.getPageId();!isRadvs&&this._boundUtils.boundHasMultipleFareFamilies(bound)&&this.macro_displayMultipleFareFamiliesWarning("",!0),!isRadvs&&config&&config.displayMixedCabinWarning&&this._boundUtils.boundHasMultipleCabins(bound)&&this.macro_displayMultipleCabinsWarningItPanel(),this.__$write("\n</div>\n",2852)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayBoundTitle",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printItineraryHeader:function(listItinerary,bound_index,bound,search,boundLabel,config){try{with(this){if(config=config||{},this.__$write('\n<span class="itinerary">\n\n\n\n',2871),listItinerary.length<=2?0==bound_index?this.__$write('\n<i class="icon-plane-departure icon-plane icon-icon-plane" aria-hidden="true"></i>\n',2877):this.__$write('\n<i class="icon-plane-return icon-icon-plane" aria-hidden="true"></i>\n',2879):(this.__$write('\n<span class="bound-number">\n<span class="plnext-sr-only">',2882),this.__$write(this._i18n.getLabel("tx_pltg_text_calendar_flight"),2883),this.__$write("</span>\n",2883),this.__$write(parseInt(bound_index)+1,2884),this.__$write("\n</span>\n",2885)),this.__$write(bound.beginLocation.cityName,2887),this.__$write(" - ",2887),this.__$write(bound.endLocation.cityName,2887),config.dateCommaSeparated&&this.__$write(",",2888),this.__$write("\n</span>\n",2889),config.dateInLine||this.__$write("\n<br/>\n",2891),this.__$write('\n<time class="date">\n\n',2893),bound&&bound.firstSegment&&null!=bound.firstSegment.beginDate)var beginDate=new Date(bound.firstSegment.beginDate);else if(search)var beginDate=new Date(search[bound_index].beginDate);this.__$write(this._dateUtils.formatDateTime(beginDate,plnextv2.utils.DateUtils.FORMATS.FULL_DATE_FORMAT),2901),this.__$write("\n</time>\n\n",2902),boundLabel&&(this.__$write('\n\n<span class="bound-label" aria-hidden="true">\n<i class="icon-info-sign"></i>\n',2905),this.__$write(boundLabel,2908),this.__$write('\n</span>\n<span class="sr-only">\n',2909),this.__$write(boundLabel,2911),this.__$write("\n</span>\n",2912)),config.showDuration&&(this.__$write('\n<span class="duration">\n',2916),this.macro_displayFlightDuration(bound),this.__$write("\n</span>\n",2918))}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printItineraryHeader",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printScheduleItineraryHeader:function(bound){try{with(this){this.__$write('\n<header class="itinerary-header">\n<span class="locations">\n',2923),this.__$write(bound.beginLocation.cityName,2925),this.__$write(" - ",2925),this.__$write(bound.endLocation.cityName,2925),this.__$write('\n</span>\n\n<time class="date">\n',2926);var beginDate=new Date(bound.beginDate);this.__$write(this._dateUtils.formatDateTime(beginDate,plnextv2.utils.DateUtils.FORMATS.FULL_DATE_FORMAT),2930),this.__$write("\n</time>\n</header>\n",2931)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printScheduleItineraryHeader",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayFlightHistory:function(segment){try{with(this)segment.perfIndicator&&(this.__$write('\n<div class="history-panel">\n<div class="history-header">\n',2943),this.__$write(this._i18n.getLabel("tx_pltg_text_MainTitlePerfInd"),2945),this.__$write('\n</div>\n<div class="history-content">\n<div class="history-message">\n',2946),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_LastMonthStatistics"),2949),this.__$write('\n</div>\n<span class="history-ontime history-breakup">',2950),this.__$write(segment.perfIndicator.onTimeArrival,2951),this.__$write(" ",2951),this.__$write(this._i18n.getLabel("tx_pltg_text_percentage"),2951),this.__$write(" ",2951),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_OnTime"),2951),this.__$write(' </span>\n<span class="history-delayed history-breakup">',2951),this.__$write(segment.perfIndicator.lateArrival,2952),this.__$write(" ",2952),this.__$write(this._i18n.getLabel("tx_pltg_text_percentage"),2952),this.__$write(" ",2952),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_Delayed"),2952),this.__$write(' </span>\n<span class="history-cancelled history-breakup">',2952),this.__$write(segment.perfIndicator.cancellation,2953),this.__$write(" ",2953),this.__$write(this._i18n.getLabel("tx_pltg_text_percentage"),2953),this.__$write(" ",2953),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_Canceled"),2953),this.__$write(" </span>\n</div>\n</div>\n",2953))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayFlightHistory",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySecuredFlight:function(segment){try{with(this)if(1==segment.securedFlight){this.__$write('\n<div class="secured">\n<i class="icon-ok" aria-hidden="true"></i>\n<span class="history-header">',2967),this.__$write(this._i18n.getLabel("tx_pltg_text_SecuredFlight"),2969),this.__$write("</span>\n",2969);var securedLabel=plnextv2.utils.I18n.getLabel("tx_pltg_text_itinSecured");this.__$write('\n<span class="secured-itinerary">',2971),this.__$write(securedLabel,2971),this.__$write("</span>\n</div>\n",2971)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySecuredFlight",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={buttonDisplay:"plnextv2.utils.macroLibs.displayButtons.desktop.views.DReservationButtonsView",nightDeparture:"plnextv2.utils.macroLibs.nightDeparture.desktop.views.DNightDepartureWarningView"},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.boundDetails.desktop.views.DBoundDetailsViewScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/boundDetails/desktop/views/DBoundDetailsViewScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.boundDetails.desktop.views.DBoundDetailsViewScript",$dependencies:["plnextv2.utils.StringResources","plnextv2.utils.I18n","plnextv2.utils.DateUtils","plnextv2.utils.FlightsUtils","plnextv2.utils.PriceUtils","plnextv2.utils.BootstrapUtils","plnextv2.utils.GlobalLists","aria.core.IO","aria.utils.Type","aria.utils.Array","aria.utils.Date","aria.utils.Dom","plnextv2.utils.BoundUtils","plnextv2.utils.UpgradeUtils","plnextv2.utils.WaitlistUtils","plnextv2.utils.DynamicWaiverUtils","plnextv2.utils.context.AppContext"],$constructor:function(){this._stringResources=plnextv2.utils.StringResources,this._i18n=plnextv2.utils.I18n,this._dateUtils=plnextv2.utils.DateUtils,this._flightUtils=plnextv2.utils.FlightsUtils,this._json=aria.utils.Json,this._priceUtils=plnextv2.utils.PriceUtils,this._boundUtils=plnextv2.utils.BoundUtils,this._upgradeUtils=plnextv2.utils.UpgradeUtils,this._waitlistUtils=plnextv2.utils.WaitlistUtils,this._dynamicWaiverUtils=plnextv2.utils.DynamicWaiverUtils,this._arrayUtils=aria.utils.Array,this._appContext=plnextv2.utils.context.AppContext},$statics:{TECHNICAL_STOPS:{DISPLAY_MODE:{DETAILED:"DETAILED"}},STRINGS:{I18N:{DIFF_AIRPORT_ARR_DEP:"tx_pltg_pattern_DifferentAirportArrivalDeparture",DIFF_AIRPORT_DEP_ARR:"tx_pltg_pattern_DifferentAirportDepartureArrival",FLIGHT_CHANGED:"tx_pltg_text_PreviousFlightSuggestedToChange",NOT_IMPACTED_FLIGHT:"tx_pltg_text_flightNotImpacted"}},MAX_AWARD:"MAX_AWARD",CSS_CLASS:{DISRUPTED_STOP:"stop-segment-disrupted",SEGMENT_DISRUPTED:"segment-disrupted"},RSDAI:"RSDAI",RFARE:"RFARE"},$prototype:{getBsGridClass:function(e,t){return plnextv2.utils.BootstrapUtils.getBsGridClass(e,t)},buildBoundObject:function(e){var t={},i=e.listSegment[0],n=e.listSegment.length-1,a=e.listSegment[n];return this.$json.setValue(t,"listSegment",e.listSegment),this.$json.setValue(t,"firstSegment",i),this.$json.setValue(t,"lastIndex",n),this.$json.setValue(t,"lastSegment",a),this.$json.setValue(t,"beginLocation",i.beginLocation),this.$json.setValue(t,"endLocation",a.endLocation),this.$json.setValue(t,"fareFamily",e.fareFamily),t},getModifyFlightsOptions:function(e){var t,i,n,a,s,r=[];if(e)for(var o=0;o<e.length;o++)e[o]&&(s=this.buildBoundObject(e[o]),i=s.beginLocation,n=s.endLocation,a=i.cityName+" ("+i.locationCode+") - ",a+=n.cityName+" ("+n.locationCode+")",t={label:a,iconClass:"",action:{fn:"modifyFlights",scope:this.moduleCtrl,args:{itemId:s.itemId}}},r.push(t));return r},calculateSegmentDiff:function(e,t){var i;return e&&t?i=t-e:t&&(i=t),i},_setGlobalLists:function(){this._json.setValue(this.data,"cityDescriptionList",plnextv2.utils.GlobalLists.getList("cityDescriptionList"))},showTimeline:function(e,t){var i=jQuery("#bounddetails-bound-timeline-link-"+t.bound_index),n=jQuery("#bounddetails-bound-timeline-"+t.bound_index),a=jQuery("#bounddetails-bound-timeline-text-"+t.bound_index),s=jQuery("#bounddetails-bound-timeline-icon-"+t.bound_index);"true"===i.attr("aria-expanded")?(n.addClass("hidden"),i.attr("aria-expanded",!1),n.attr("aria-hidden",!0),s.attr("class","icon icon-caret-right farereview-icon-caret"),a.html(this._i18n.getLabel("tx_pltg_text_ShowFlightDetails"))):(n.removeClass("hidden"),i.attr("aria-expanded",!0),n.attr("aria-hidden",!1),s.attr("class","icon icon-caret-down farereview-icon-caret"),a.html(this._i18n.getLabel("tx_pltg_text_HideFlightDetails")),t.prefix="TripSummary",plnextv2.utils.context.AppContext.getEventBus().publish("analytics:event:clickflightdetails",this,t)),t.moduleControl&&"function"==typeof t.moduleControl.notifyRefresh&&t.moduleControl.notifyRefresh(),plnextv2.utils.context.AppContext.getEventBus().publish("page:contentRefresh:notify",this,{})},detailsLinkKeydown:function(e,t){e.keyCode===e.KC_SPACE&&(e.preventDefault(),this.showTimeline(e,t))},isFlightChanged:function(e,t){return aria.utils.Array.contains(e,t)},isCancelledFlight:function(e,t){return t.flightStatusCancelled&&this._checkBoundStatus(e,t,t.flightStatusCancelled)},isChangedFlight:function(e,t){return t.flightStatusChange&&this._checkBoundStatus(e,t,t.flightStatusChange)},_checkBoundStatus:function(e,t,i){for(var n=!1,a=e.listSegment,s=0;s<a.length;s++){var r=a[s],o=r.statusCode;if(r.disruptionAssociationIds&&r.disruptionAssociationIds.length>0&&aria.utils.Array.indexOf(i,o)>=0){n=!0;break}}return n},displayFareFamilyPerSegment:function(e,t){return e.displayFFPerSegment?!!t.listSegment[0].fareFamily:!1},displayFareFamily:function(e,t){return e.displayFFPerSegment?!!t.fareFamily:!1},sortCabins:function(e){var t=[];for(var i in e)aria.utils.Json.isMetadata(i)||t.push([i,e[i]]);return t.sort(function(e,t){return e[1].cabinRank-t[1].cabinRank}),t=this.cleanCabins(t)},cleanCabins:function(e){for(var t=e.length-1;t>=0&&!e[t][1].price;t--)e[t][1].hide=!0;return e},willDisplayLegsOfSegment:function(e,t){return this.displayTechnicalStopDetailsEnabled(e)&&this.segmentHasLegs(t)},segmentHasTechnicalStop:function(e){return e.nbrOfStops>0||this.segmentHasLegs(e)},segmentHasLegs:function(e){return aria.utils.Type.isArray(e.listLegs)&&e.listLegs.length>0},displayTechnicalStopDetailsEnabled:function(e){return e.DISPLAY_STOP_DETAILS===this.TECHNICAL_STOPS.DISPLAY_MODE.DETAILED},getTechnicalStopsForSegment:function(e){var t=[];if(aria.utils.Type.isArray(e.listLegs))for(var i=0;i<e.listLegs.length;i++){var n=e.listLegs[i],a=i<e.listLegs.length-1?e.listLegs[i+1]:null;null!==a&&t.push({firstLeg:n,secondLeg:a})}return t},getFormattedTime:function(e){var t="";return e&&e.time&&(t=this._dateUtils.formatDateTime(new Date(e.time),this._dateUtils.FORMATS.TIME_FORMAT)),t},showOperationalInfo:function(e,t){var i=t[0],n=e.target.getParentWithName("a")||e.target,a=aria.utils.Dom.getElementById(n.getAttribute("data-target")),s=aria.utils.Dom.getElementById(n.getAttribute("data-icon")),r="true"===n.getAttribute("aria-expanded");r?(a.classList.add("hidden"),s.classList.remove("icon-caret-down"),s.classList.add("icon-caret-right"),this._json.setValue(i,"operationalLink",this._i18n.getLabel("tx_pltg_text_ShowOperationalInfo"))):(a.classList.remove("hidden"),s.classList.remove("icon-caret-right"),s.classList.add("icon-caret-down"),this._json.setValue(i,"operationalLink",this._i18n.getLabel("tx_pltg_text_HideOperationalInfo"))),n.setAttribute("aria-expanded",!r),a.setAttribute("aria-hidden",r)},_getDayDifferenceString:function(e,t){return e&&t?this._stringResources.displayDayDifference(aria.utils.Date.dayDifference(new Date(e),new Date(t))):""},isCancel:function(e){return e.cancel?"alert-cancel":""},getRbdText:function(e){var t=e.join("/");return t},getListOfSegementsWithDifferentFareFamilies:function(e){var t=[],i={};if(null!=e&&e.length>1)for(var n=0;n<e.length;n++){var a=e[n].fareFamily.ffCode;null==i[a]&&(i[a]=a,t.push(e[n]))}return t},getElementTypeForBoundDetails:function(e,t){var i="boundDetailsLeft";return e&&(i=t?"boundDetailsAlreadyUpgradedLeft":"boundDetailsUpgradeLeft"),i},setUpgradeDataOnSegment:function(e,t){return t&&t.upgradesBySegment&&(e.upgradeData=t.upgradesBySegment[e.id],e.cabinsDescription=t.cabinsDescription,e.cabinsImage=t.cabinsImage),e},getDifferentDepOutboundArrInboundInNotice:function(e,t){var i=null;if(2===e.length&&null!=e[0]){var n=e[0].listSegment[0];n.beginLocation.locationCode!=t.endLocation.locationCode&&(i=this._i18n.getStringFromPattern(this.STRINGS.I18N.DIFF_AIRPORT_DEP_ARR,[t.endLocation.locationName,n.beginLocation.locationName]))}return i},getDifferentArrOutboundDepInboundInNotice:function(e,t){var i=null;if(2===e.length&&null!=e[0]){var n=e[0].listSegment[e[0].listSegment.length-1];n.endLocation.locationCode!=t.beginLocation.locationCode&&(i=this._i18n.getStringFromPattern(this.STRINGS.I18N.DIFF_AIRPORT_ARR_DEP,[t.beginLocation.locationName,n.endLocation.locationName]))}return i},extractSegmentLocation:function(e,t){var i=null;return i=e?t.beginLocation:t.endLocation},extractSegmentTime:function(e,t){var i=null;return i=new Date(e?t.beginDate:t.endDate)},calculateDayDifference:function(e,t,i,n,a){var s=null;return e&&t&&n>0?s=this._stringResources.displayDayDifference(this.calculateSegmentDiff(a.listSegment[n-1].endDayIndicator,i.beginDayIndicator)):e&&!t?s=this._stringResources.displayDayDifference(this.calculateSegmentDiff(i.beginDayIndicator,i.endDayIndicator)):e||t||(s=this._stringResources.displayDayDifference(a.lastSegment.endDayIndicator)),s},extractTerminalInformation:function(e,t,i,n,a){var s={terminal:null,terminalChange:null};if(t&&i.beginTerminal){var r=this._flightUtils.getPreviousSegment(a.listSegment,n);s.terminal=i.beginTerminal,s.terminalChange=this._flightUtils.isDifferentTerminal(r,i)&&e}else if(!t&&i.endTerminal){var o=this._flightUtils.getNextSegment(a.listSegment,n);s.terminal=i.endTerminal,s.terminalChange=this._flightUtils.isDifferentTerminal(i,o)&&e}return s},hasDepartureTerminalChange:function(e,t,i,n,a){var s=!1;if(e)s=this._flightUtils.isDifferentLegTerminal(e,t);else{var r=this._flightUtils.getPreviousSegment(n,a);s=this._flightUtils.isDifferentTerminal(r,i)}return s},hasArrivalTerminalChange:function(e,t,i,n,a){var s=!1;if(e)s=this._flightUtils.isDifferentLegTerminal(t,e);else{var r=this._flightUtils.getNextSegment(n,a);s=this._flightUtils.isDifferentTerminal(i,r)}return s},clickOnRBD:function(e,t){t.prefix="TripSummary",plnextv2.utils.context.AppContext.getEventBus().publish("analytics:event:clickshowrbd",e,t,this)},shouldShowDepartureWarning:function(e,t,i){return i&&i.ruiNightDepartWrn&&this._dateUtils.isNightDeparture(e)&&t},getDFFDealStyle:function(e){return"background:"+e+";"},shouldDisplayMilesPriceForCabinUpgrade:function(e,t){return!e&&t>0},showWaitlist:function(e,t){var i=e[t];return this._waitlistUtils.isWaitlistAvailableForBound(i)},showWaitlistBySegment:function(e){return this._waitlistUtils.isWaitlistAvailableForSegment(e)},getCssClassStatusBound:function(e,t){var i="is-confirmed";return t&&t.waiverItemsPerSegmentId&&this.isBoundDisrupted(e,t.waiverItemsPerSegmentId)&&(i="is-disrupted"),i},isBoundDisrupted:function(e,t){return this._dynamicWaiverUtils.getDisruptedDatesForBound(e,t).length>0},getWaiverItems:function(e,t){return e&&e.dynamicWaiver&&e.dynamicWaiver.waiverItemsPerSegmentId[[t]]?e.dynamicWaiver.waiverItemsPerSegmentId[t].waiverItems:[]},getCssClassDisruptedStop:function(e,t){return e||t?this.CSS_CLASS.DISRUPTED_STOP:""},getCssClassTechnicalStopDisruption:function(e,t,i){var n=this._dynamicWaiverUtils.isLocationDisrupted(i,e.boardPoint,!0),a=this._dynamicWaiverUtils.isLocationDisrupted(i,e.offPoint,!1);return a||n?"technical-stop-segment-disrupted":""},getSegmentPosition:function(e,t){var i=t;return e&&(i+=e.bound_index>0?this.__countPreviousSegments(e,e.bound_index):0),i},__countPreviousSegments:function(e,t){var i=0;if(e&&e.listItinerary)for(var n=0;n<e.listItinerary.length;n++)t>n&&(i+=this.__countSegments(e.listItinerary[n].listSegment));return i},__countSegments:function(e){var t=0;if(e)for(var i=0;i<e.length;i++)t++;return t},_hasModifiedBounds:function(e){return e.modifiedBounds&&e.modifiedBounds.length>0},_isModifiedBound:function(e,t){if(t.modifiedBounds&&t.modifiedBounds.length>0)for(var i=0;i<t.modifiedBounds.length;i++)if(t.modifiedBounds[i]===e.toString())return!0;return!1},_getResponsiveLabel:function(e,t,i){var n={title:this._i18n.getLabel("tx_pltg_text_ATCInvolFlightChangeInProgress"),message:"","class":""};return this.isCancelledFlight(e[t],i)&&(n.message=this._i18n.getLabel("tx_pltg_text_RespFlightCancelled")),this._isModifiedBound(t,i)||(this.isChangedFlight(e[t],i)?n.title=this._i18n.getLabel("tx_pltg_text_ATCInvolFlightConfirmedWhenIsDone"):(n.title=this._i18n.getLabel("tx_pltg_text_responsive_flight_not_impacted"),n.class="not-impacted")),n},isUpgradeFlow:function(e){return e.moduleControl&&e.moduleControl.isUpgradeFlow()},isCabinUpgradeDisabledForMilesOnlyUpgrade:function(e){return e.config.isEligibleToCashUpgrade&&e.config.upgradeMilesOnly&&(0!==this.isMoreMilesRequiredForOtherUpgrades(e)||this.isNotEnoughMilesForUpgradeOnLoad(e))},isMoreMilesRequiredForOtherUpgrades:function(e){var t,i=this._upgradeUtils.getFareInfo(e.cabin,this.MAX_AWARD),n=e.normalizedUpgradeBean.userMilesBalance;if(e.normalizedUpgradeBean&&e.normalizedUpgradeBean.upgradesBySegment&&(t=this._upgradeUtils.getTotalFareInfo(e.normalizedUpgradeBean,this.MAX_AWARD)),e.config.upgradeMilesOnly&&n>=i&&t&&e.segment.upgradeData.selectedCabinCode!==e.cabinIndex&&0!==i){var a=n-t;if(i>a)return i-a}return 0},isNotEnoughMilesForUpgradeOnLoad:function(e){var t,i=this._upgradeUtils.getFareInfo(e.cabin,this.MAX_AWARD);return e.normalizedUpgradeBean&&(t=e.normalizedUpgradeBean.userMilesBalance),e.config.upgradeMilesOnly&&i>t}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/callCenter/desktop/styles/DCallCenterStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.callCenter.desktop.styles.DCallCenterStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n#call-center-alert {\nmargin-top:0;\n}\n\n.call-center-title {\nmargin-top:0;\nfont-weight:",24),this.__$write(this.$bold,30),this.__$write(";\nfont-size: 130%;\n}\n",30)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/callCenter/desktop/views/DCallCenterMacro.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/macroLibs/callCenter/desktop/views/DCallCenterMacroScript.js"),require("plnextv2/utils/widgets/plnextLib/message/core/Message.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.callCenter.desktop.views.DCallCenterMacro",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$DCallCenterMacroScript.constructor.call(this)},$destructor:function(){this.$DCallCenterMacroScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_printAgencyContactInformation:function(agencyContactInfo){try{with(this)(agencyContactInfo||plnextv2.utils.I18n.hasLabel(this.LABELS.AGENCY_CONTACT_INSTRUCTION))&&(this._newMessagesStyle?this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","Message",{type:"info",id:"call-center-alert",title:plnextv2.utils.I18n.getLabel(this.LABELS.CALL_CENTER)},32)&&(this.macro_contactInfoContent(agencyContactInfo),this.__$endContainerWidget()):this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","Message",{type:"info",id:"call-center-alert"},40)&&(this.__$write('\n\n<div class="call-center-header">\n<h2 class="call-center-title">\n',44),this.__$write(plnextv2.utils.I18n.getLabel(this.LABELS.CALL_CENTER),47),this.__$write("\n</h2>\n</div>\n",48),this.macro_contactInfoContent(agencyContactInfo),this.__$endContainerWidget()))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printAgencyContactInformation",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printAgencyInformationItem:function(infoLabel,infoData,classSuffix){try{with(this)infoData&&(this.__$write('\n<p>\n<span class="agency-information-title">',61),this.__$write(plnextv2.utils.I18n.getLabel(infoLabel),62),this.__$write(' </span>\n<span class="agency-information-value agency-information-',62),this.__$write(classSuffix,63),this.__$write('"><strong>',63),this.__$write(infoData,63),this.__$write("</strong></span>\n</p>\n",63))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printAgencyInformationItem",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printAgencyAddress:function(agencyContactInfo){try{with(this)agencyContactInfo.address1&&(this.__$write('\n<p class="agency-information-address">\n<div class="agency-information-title">',73),this.__$write(plnextv2.utils.I18n.getLabel(this.LABELS.AGENCY_ADDRESS),74),this.__$write(' </div>\n<div class="agency-information-address1">',74),this.__$write(agencyContactInfo.address1,75),this.__$write('</div>\n<div class="agency-information-address2">',75),this.__$write(agencyContactInfo.address2,76),this.__$write('</div>\n<span class="agency-information-zipcode">',76),this.__$write(agencyContactInfo.zipCode,77),this.__$write('</span><span class="agency-information-cityname">',77),this.__$write(agencyContactInfo.cityName,77),this.__$write("</span>\n</p>\n",77))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printAgencyAddress",__filename,this["aria:currentLineNumber"]],_ex)}},macro_contactInfoContent:function(agencyContactInfo){try{with(this)this.__$write("\n<p>",86),this.__$write(plnextv2.utils.I18n.getLabel(this.LABELS.AGENCY_CONTACT_INSTRUCTION),86),this.__$write("</p>\n\n",86),agencyContactInfo&&(this.macro_printAgencyInformationItem(this.LABELS.AGENCY_PHONE,agencyContactInfo.phone,"phone"),this.macro_printAgencyInformationItem(this.LABELS.AGENCY_MAIL,agencyContactInfo.emailAdr,"mail"),this.macro_printAgencyInformationItem(this.LABELS.AGENCY_COUNTRY,agencyContactInfo.countryName,"country"),this.macro_printAgencyAddress(agencyContactInfo))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["contactInfoContent",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.callCenter.desktop.views.DCallCenterMacroScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/callCenter/desktop/views/DCallCenterMacroScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.callCenter.desktop.views.DCallCenterMacroScript",$dependencies:["plnextv2.utils.context.AppContext"],$statics:{LABELS:{CALL_CENTER:"tx_pltg_text_CallCenter",AGENCY_ADDRESS:"tx_pltg_text_AgencyAddress",AGENCY_COUNTRY:"tx_pltg_text_AgencyCountry",AGENCY_PHONE:"tx_pltg_text_AgencyPhone",AGENCY_MAIL:"tx_pltg_text_AgencyEmail",AGENCY_CONTACT_INSTRUCTION:"tx_pltg_text_AgencyContactInstruction"}},$constructor:function(){var e=plnextv2.utils.context.AppContext.getPageData().appData;this._newMessagesStyle=e.config.messagesNewStyle},$prototype:{}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/carCommon/CarCommon.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/macroLibs/carCommon/CarCommonScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.carCommon.CarCommon",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$CarCommonScript.constructor.call(this)},$destructor:function(){this.$CarCommonScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_printConditionDescription:function(carData){try{with(this){var carMultimedia=carData.business&&carData.business.CarMultimedia?carData.business.CarMultimedia:carData.carMultimedia,onConfPage=carMultimedia&&carMultimedia.OnConfPage,i18nObj=plnextv2.utils.I18n,carReservation=carData.business&&carData.business.CarReservation?carData.business.CarReservation:carData.carReservation;this.__$write('\n\n<div id = "carConditionContent" class="description-content">\n<div id="carContidionInfoTable" class = "carInfoTable">\n',12);var listSE=carData.carTermsOut.ListSpecialEquipment;if(onConfPage&&carReservation&&carReservation.ListSpecialEquipment&&(listSE=carReservation.ListSpecialEquipment),(carData.carTermsOut.CarCategory||carData.car&&carData.car.ClassName)&&(this.__$write('\n<div class="carInfoItem">\n<dt><p class="text-primary text-primary-multimedia">',20),this.__$write(i18nObj.getLabel("CARP.search.label.acrissclass"),21),this.__$write("</p></dt>\n<dd><p>",21),carData.car&&carData.car.ClassName?this.__$write(carData.car.ClassName,22):this.__$write(carData.carTermsOut.CarCategory,22),this.__$write("</p></dd>\n</div>\n",22)),carData.carTermsOut.FreeMiles&&(this.__$write('\n<div class="carInfoItem">\n<dt><p class="text-primary text-primary-multimedia">',26),this.__$write(i18nObj.getLabel("CARP.stationDetails.label.mileage"),27),this.__$write("</p></dt>\n<dd>\n",27),0=="-1".indexOf(carData.carTermsOut.FreeMiles)?(this.__$write("\n<p>",30),this.__$write(i18nObj.getLabel("tx_pltg_text_UnlimitedMiles"),30),this.__$write("</p>\n",30)):0=="K".indexOf(carData.carSearchData.DisplayType)?(this.__$write("\n<p>",33),this.__$write(i18nObj.getStringFromPattern("CARP.avail.pattern.limitedKilometers",[carData.carTermsOut.FreeMiles]),33),this.__$write("</p>\n",33)):(this.__$write("\n<p>",35),this.__$write(i18nObj.getStringFromPattern("CARP.avail.pattern.limitedMiles",[carData.carTermsOut.FreeMiles]),35),this.__$write("</p>\n",35)),this.__$write("\n</dd></div>\n",38)),carData.carTermsOut.ListCoverage&&carData.carTermsOut.ListCoverage.length>0){this.__$write('\n<div class="carInfoItem">\n<dt><p class="text-primary text-primary-multimedia list-coverage">',41),this.__$write(i18nObj.getLabel("CARP.stationDetails.label.coverage"),42),this.__$write("</p></dt>\n<dd>\n<p>\n",42);var __v_1=carData.carTermsOut.ListCoverage;void 0==carData.carTermsOut.ListCoverage&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,45]);for(var coverage_ct=0,__v_2=__v_1.length,coverage_index=0;__v_2>coverage_index;coverage_index++){var coverage=__v_1[coverage_index];coverage_ct++,this.__$write(coverage.Name,46),this.__$write("</br>\n",46)}this.__$write("\n</p>\n</dd></div>\n",48)}if(carData.carTermsOut.ListSurcharge&&carData.carTermsOut.ListSurcharge.length>0){this.__$write('\n<div class="carInfoItem">\n<dt><p class="text-primary text-primary-multimedia list-surcharge">',52),this.__$write(i18nObj.getLabel("CARP.stationDetails.label.surcharge"),53),this.__$write("</p></dt>\n<dd>\n<p>\n",53);var __v_3=carData.carTermsOut.ListSurcharge;void 0==carData.carTermsOut.ListSurcharge&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,56]);for(var surcharge_ct=0,__v_4=__v_3.length,surcharge_index=0;__v_4>surcharge_index;surcharge_index++){var surcharge=__v_3[surcharge_index];surcharge_ct++,this.__$write(surcharge.Name,57),this.__$write("</br>\n",57)}this.__$write("\n</p>\n</dd></div>\n",59)}if(carData.carTermsOut.FuelPolicy&&(this.__$write('\n<div class="carInfoItem">\n<dt><p class="text-primary text-primary-multimedia list-fuel-policy">',63),this.__$write(i18nObj.getLabel("CARP.stationDetails.label.fuelPolicy"),64),this.__$write("</p></dt>\n<dd>\n<p>\n",64),this.__$write(carData.carTermsOut.FuelPolicy.Name,67),this.__$write("\n</p>\n</dd></div>\n",68)),listSE&&listSE.length>0){this.__$write('\n<div class="carInfoItem">\n<dt><p class="text-primary text-primary-multimedia list-special-equipment">',72),this.__$write(i18nObj.getLabel("CARP.insuranceExtra.label.extraTitle"),73),this.__$write("</p></dt>\n<dd>\n<p>",73);var __v_5=listSE;void 0==listSE&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,75]);for(var se_ct=0,__v_6=__v_5.length,se_index=0;__v_6>se_index;se_index++){var se=__v_5[se_index];se_ct++,se.Booked>1&&(this.__$write(se.Booked,76),this.__$write(" * ",76)),this.__$write(se.Name,77),this.__$write("</br>\n",77)}this.__$write("</p>\n</dd></div>\n",78)}this.__$write("\n</div>\n",81),onConfPage&&carData.carMultimedia||(this.__$write('\n<div id ="locationInfo">\n',83),carData.carTermsOut.PickUpAddress&&(this.__$write("\n<h2>",85),this.__$write(i18nObj.getLabel("CARP.stationDetails.label.locationInformation"),85),this.__$write('</h2>\n<div id = "pickUpStation" class = "entireRow locationDetail">\n<h3>',85),this.__$write(i18nObj.getLabel("tx_pltg_text_PickupStation"),87),this.__$write('</h3>\n<div id ="pickUpLocationInfo" class = "carInfoTable">\n',87),carData.carTermsOut.PickUpAddress&&(this.__$write('\n<div class="carInfoItem">\n<dt class="text-primary text-primary-multimedia"><b>',90),this.__$write(i18nObj.getLabel("CARP.stationDetails.label.address"),91),this.__$write("</b></dt>\n<dd><p>",91),this.__$write(carData.carTermsOut.PickUpAddress,92),this.__$write("</p></dd></div>\n",92)),carData.carTermsOut.PickUpOpeningHours&&(this.__$write('\n<div class="carInfoItem">\n<dt class="text-primary text-primary-multimedia"><b>',96),this.__$write(i18nObj.getLabel("CARP.stationDetails.label.openingHours"),97),this.__$write("</b></dt>\n<dd><p>",97),this.__$write(carData.carTermsOut.PickUpOpeningHours.OpeningHour,98),this.__$write(" - ",98),this.__$write(carData.carTermsOut.PickUpOpeningHours.ClosingHour,98),this.__$write("</p></dd></div>\n",98)),carData.carTermsOut.PickUpPhone&&(this.__$write('\n<div class="carInfoItem">\n<dt class="text-primary text-primary-multimedia"><b>',102),this.__$write(i18nObj.getLabel("CARP.stationDetails.label.phone"),103),this.__$write("</b></dt>\n<dd><p>",103),this.__$write(carData.carTermsOut.PickUpPhone,104),this.__$write("</p></dd></div>\n",104)),carData.carTermsOut.PickUpFax&&(this.__$write('\n<div class="carInfoItem">\n<dt class="text-primary text-primary-multimedia"><b>',108),this.__$write(i18nObj.getLabel("CARP.stationDetails.label.fax"),109),this.__$write("</b></dt>\n<dd><p>",109),this.__$write(carData.carTermsOut.PickUpFax,110),this.__$write("</p></dd></div>\n",110)),this.__$write("\n</div>\n</div>\n\n",112),carData.carTermsOut.DropOffAddress&&carData.carTermsOut.DropOffAddress.length>0&&(this.__$write('\n<div class="clear"></div>\n<div id = "dropOffStation" class = "entireRow locationDetail">\n<div class="text-primary text-primary-multimedia"><h3>',116),this.__$write(i18nObj.getLabel("tx_pltg_text_calendar_drop_off"),118),this.__$write('</h3></div>\n<div id ="dropOffLocationInfo" class = "carInfoTable">\n',118),carData.carTermsOut.DropOffAddress&&(this.__$write('\n<div class="carInfoItem">\n<dt class="text-primary text-primary-multimedia"><b>',121),this.__$write(i18nObj.getLabel("CARP.stationDetails.label.address"),122),this.__$write("</b></dt>\n<dd><p>",122),this.__$write(carData.carTermsOut.DropOffAddress,123),this.__$write("</p></dd></div>\n",123)),carData.carTermsOut.DropOffOpeningHours&&(this.__$write('\n<div class="carInfoItem">\n<dt class="text-primary text-primary-multimedia"><b>',127),this.__$write(i18nObj.getLabel("CARP.stationDetails.label.openingHours"),128),this.__$write("</b></dt>\n<dd><p>",128),this.__$write(carData.carTermsOut.DropOffOpeningHours.OpeningHour,129),this.__$write(" - ",129),this.__$write(carData.carTermsOut.DropOffOpeningHours.ClosingHour,129),this.__$write("</p></dd></div>\n",129)),carData.carTermsOut.DropOffPhone&&(this.__$write('\n<div class="carInfoItem">\n<dt class="text-primary text-primary-multimedia"><b>',133),this.__$write(i18nObj.getLabel("CARP.stationDetails.label.phone"),134),this.__$write("</b></dt>\n<dd><p>",134),this.__$write(carData.carTermsOut.DropOffPhone,135),this.__$write("</p></dd></div>\n",135)),carData.carTermsOut.DropOffFax&&(this.__$write('\n<div class="carInfoItem">\n<dt class="text-primary text-primary-multimedia"><b>',139),this.__$write(i18nObj.getLabel("CARP.stationDetails.label.fax"),140),this.__$write("</b></dt>\n<dd><p>",140),this.__$write(carData.carTermsOut.DropOffFax,141),this.__$write("</p></dd></div>\n",141)),this.__$write("\n</div>\n</div>\n",143))),this.__$write("\n</div>\n",147)),this.__$write("\n</div>\n",149)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printConditionDescription",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.carCommon.CarCommonScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/carCommon/CarCommonScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.carCommon.CarCommonScript",$prototype:{}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/ccFourByFour/CreditCardFourByFour.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/formComponent/FormMacro.tml"),require("plnextv2/utils/macroLibs/ccFourByFour/CreditCardFourByFourScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.ccFourByFour.CreditCardFourByFour",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$CreditCardFourByFourScript.constructor.call(this)},$destructor:function(){this.$CreditCardFourByFourScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_displayCreditCardfourByFour:function(widgetText,parentTemplate,parentData,split1,split2,split3,split4,widgetCardsplit1,widgetCardsplit2,widgetCardsplit3,widgetCardsplit4){try{with(this)this.macro_CheckCreditCardNumberAvailable(widgetText,parentTemplate,parentData,split1,split2,split3,split4),this.formLib.macro_formGroupStart(widgetText,{formGroupConfig:{attributes:{classList:[]}}}),this.formLib.macro_formLabel(widgetText,this,{labelConfig:{attributes:{classList:["fontWeightBold"]}}}),this.__$write(this.$modifier("eat",[formLib.setModel(widgetText,parentData,parentTemplate,{})]),42),parentData.accountConcealed?this.__$write(this.$modifier("eat",[aria.utils.Data.unsetValidator(widgetText.model,widgetText.name)]),44):this.__$write(this.$modifier("eat",[formLib.addValidators(widgetText)]),46),this.__$write(this.$modifier("eat",[aria.utils.Json.setValue(widgetText,"htmlId",parentTemplate.$getId("widget-input-"+widgetText.parentsForms+"-"+widgetCardsplit1.name))]),50),this.__$write('\n\n<div class="cardNumberSplitWrapper form-control" ',51),this.__$writeId("cardNumberSplitWrapper",52),this.__$write(' dir="ltr">\n\n',52),this.formLib.macro_formWidget(widgetCardsplit1,parentData,parentTemplate,{onFocus:[{fn:"onSplitNumberFocus",scope:this,args:{form:widgetCardsplit1,scopeof:parentTemplate,data:parentData,textWidget:widgetText}}],onKeyUp:[{fn:"onSplitNumberkey",scope:this,args:{form:widgetCardsplit1,scopeof:parentTemplate,data:parentData,textWidget:widgetText}}],onBlur:[{fn:"onCardSplitNumberChanged",scope:this,args:{form:widgetCardsplit1,scopeof:parentTemplate,split1:split1,split2:split2,split3:split3,split4:split4,data:parentData,textWidget:widgetText,widgetsArray:[widgetCardsplit1,widgetCardsplit2,widgetCardsplit3,widgetCardsplit4]}}],widgetConfig:{attributes:{autocomplete:"off",maxlength:"4",classList:["cardNumberSplit","split_1"],aria:{label:plnextv2.utils.I18n.getLabel("tx_pltg_text_CreditCardNumberPartAlt")+"1"}},bind:{disabled:{inside:parentData,to:"disablecardNumberSplit"}}}}),this.formLib.macro_formWidget(widgetCardsplit2,parentData,parentTemplate,{onFocus:[{fn:"onSplitNumberFocus",scope:this,args:{form:widgetCardsplit2,scopeof:parentTemplate,data:parentData,textWidget:widgetText}}],onKeyUp:[{fn:"onSplitNumberkey",scope:this,args:{form:widgetCardsplit2,scopeof:parentTemplate,data:parentData,textWidget:widgetText}}],onBlur:[{fn:"onCardSplitNumberChanged",scope:this,args:{form:widgetCardsplit2,scopeof:parentTemplate,data:parentData,split1:split1,split2:split2,split3:split3,split4:split4,textWidget:widgetText,widgetsArray:[widgetCardsplit1,widgetCardsplit2,widgetCardsplit3,widgetCardsplit4]}}],widgetConfig:{attributes:{autocomplete:"off",maxlength:"4",classList:["cardNumberSplit","split_2"],aria:{label:plnextv2.utils.I18n.getLabel("tx_pltg_text_CreditCardNumberPartAlt")+"2"}},bind:{disabled:{inside:parentData,to:"disablecardNumberSplit"}}}}),this.formLib.macro_formWidget(widgetCardsplit3,parentData,parentTemplate,{onFocus:[{fn:"onSplitNumberFocus",scope:this,args:{form:widgetCardsplit3,scopeof:parentTemplate,data:parentData,textWidget:widgetText}}],onKeyUp:[{fn:"onSplitNumberkey",scope:this,args:{form:widgetCardsplit3,scopeof:parentTemplate,data:parentData,textWidget:widgetText}}],onBlur:[{fn:"onCardSplitNumberChanged",scope:this,args:{form:widgetCardsplit3,scopeof:parentTemplate,data:parentData,split1:split1,split2:split2,split3:split3,split4:split4,textWidget:widgetText,widgetsArray:[widgetCardsplit1,widgetCardsplit2,widgetCardsplit3,widgetCardsplit4]}}],widgetConfig:{attributes:{autocomplete:"off",maxlength:"4",classList:["cardNumberSplit","split_3"],aria:{label:plnextv2.utils.I18n.getLabel("tx_pltg_text_CreditCardNumberPartAlt")+"3"}},bind:{disabled:{inside:parentData,to:"disablecardNumberSplit"}}}}),this.formLib.macro_formWidget(widgetCardsplit4,parentData,parentTemplate,{onFocus:[{fn:"onSplitNumberFocus",scope:this,args:{form:widgetCardsplit4,scopeof:parentTemplate,data:parentData,textWidget:widgetText}}],onKeyUp:[{fn:"onSplitNumberkey",scope:this,args:{form:widgetCardsplit4,scopeof:parentTemplate,data:parentData,textWidget:widgetText}}],onBlur:[{fn:"onCardSplitNumberChanged",scope:this,args:{form:widgetCardsplit4,scopeof:parentTemplate,data:parentData,split1:split1,split2:split2,split3:split3,split4:split4,textWidget:widgetText,widgetsArray:[widgetCardsplit1,widgetCardsplit2,widgetCardsplit3,widgetCardsplit4]}}],widgetConfig:{attributes:{autocomplete:"off",maxlength:"4",classList:["cardNumberSplit","split_4"],aria:{label:plnextv2.utils.I18n.getLabel("tx_pltg_text_CreditCardNumberPartAlt")+"4"}},bind:{disabled:{inside:parentData,to:"disablecardNumberSplit"}}}}),this.__$write('\n\n<div class="separator separator_1" aria-hidden="true">|</div>\n<div class="separator separator_2" aria-hidden="true">|</div>\n<div class="separator separator_3" aria-hidden="true">|</div>\n</div>\n\n',186),parentData.disablecardNumberSplit||this.formLib.macro_formError(widgetText,parentTemplate,{attributes:{classList:["credit-card-number-feedback-icon"]}}),this.formLib.macro_formGroupEnd()}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayCreditCardfourByFour",__filename,this["aria:currentLineNumber"]],_ex)}},macro_CheckCreditCardNumberAvailable:function(creditCardNumberWidget,parentTemplate,fourbyFourData,split1,split2,split3,split4){try{with(this)this.__$write(this.$modifier("eat",[onCardNumberChanged(creditCardNumberWidget,parentTemplate,fourbyFourData,split1,split2,split3,split4)]),204)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["CheckCreditCardNumberAvailable",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={formLib:"plnextv2.utils.formComponent.FormMacro"},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.ccFourByFour.CreditCardFourByFourScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/ccFourByFour/CreditCardFourByFourScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.ccFourByFour.CreditCardFourByFourScript",$constructor:function(){this.$json=aria.utils.Json,this._i18n=plnextv2.utils.I18n},$destructor:function(){},$prototype:{onSplitNumberFocus:function(e,t,i){var n=t.scopeof.$getElementById("cardNumberSplitWrapper"),a=t.textWidget.errorCode?"cardNumberSplitWrapper-focus-error":"cardNumberSplitWrapper-focus-ok";i?n.classList.remove(a):n.classList.add(a)},onSplitNumberkey:function(e,t){var i=t.form;if(i){widgetLength=i.name.length-1;var n=parseInt(i.name.substr(widgetLength,1)),a=t.scopeof.$getElementById("widget-input-"+i.parentsForms+"-"+i.name).getValue();if(a.length>=4&&!e.isSpecialKey&&16!=e.keyCode){var s=i.name.substr(0,widgetLength)+(n+1);if(t.scopeof.$getElementById("widget-input-"+i.parentsForms+"-"+s))return this.skipSplitterValidation=!0,void t.scopeof.$focus("widget-input-"+i.parentsForms+"-"+s)}else if(0==a.length&&8==e.keyCode){var r=i.name.substr(0,widgetLength)+(n-1);if(t.scopeof.$getElementById("widget-input-"+i.parentsForms+"-"+r))return this.skipSplitterValidation=!0,void t.scopeof.$focus("widget-input-"+i.parentsForms+"-"+r)}t.scopeof.$focus("widget-input-"+i.parentsForms+"-"+i.name)}},onCardSplitNumberChanged:function(e,t){var i=t.data[t.split1]+t.data[t.split2]+t.data[t.split3]+t.data[t.split4];if(t.scopeof.data.concealNumber&&(t.scopeof.data.concealNumber=!1),t.data.accountConcealed&&(this.$json.setValue(t.data,"accountConcealed",!1),this.formLib.addValidators(t.textWidget)),this.$json.setValue(t.data,t.textWidget.name,i),!this.skipSplitterValidation)if(this.onSplitNumberFocus(e,t,!0),""==i)this.$json.setValue(t.textWidget,"errorCode","1208"),this.setAttrOnSplittedInputs(t,!0);else{var n=new RegExp("^(\\d{16})$");i.match(n)?(this.$json.setValue(t.textWidget,"errorCode",null),this.setAttrOnSplittedInputs(t,!1)):(this.$json.setValue(t.textWidget,"errorCode","1227"),this.setAttrOnSplittedInputs(t,!0))}this.skipSplitterValidation=!1},setAttrOnSplittedInputs:function(e,t){for(var i,n=0;n<e.widgetsArray.length;n++)i=aria.utils.Dom.getElementById(e.widgetsArray[n].htmlId),t?(i.setAttribute("aria-invalid","true"),i.setAttribute("aria-describedby",e.textWidget.describedByIds)):i.removeAttribute("aria-invalid")},onCardNumberChanged:function(e,t,i,n,a,s,r){var o=e.name;if(i[o]){var l=[i[n],i[a],i[s],i[r]].join("")!==i[o];i[o].length>0&&(i[n]=i[o].substring(0,4),i[a]=i[o].substring(4,8),i[s]=i[o].substring(8,12),i[r]=i[o].substring(12,16)),l&&"function"==typeof t.moduleCtrl.notifyCreditCardUpdate&&t.moduleCtrl.notifyCreditCardUpdate()}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/commonReservationDetails/styles/CommonReservationDetailsStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.commonReservationDetails.styles.CommonReservationDetailsStyle",$extends:require("plnextv2/styles/Common.tpl.css"),$constructor:function(){this.$Common.constructor.call(this)},$destructor:function(){this.$Common.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\np.traveller-identification-document span.bold{\ndisplay: inline-block;\nword-break: break-word;\n}\n.ticket-container .ticket-detail{\nmargin-top : 5px;\npadding: 10px;\nbackground-color: ",8),this.__$write(this.$grayLight,15),this.__$write(";\n}\n\n.ticket-container .ticket-detail .eticket-data{\nmargin : 5px;\n}\n\n.timetothink-reference {\nmargin-top: 20px\n}\n\n.timetothink-reference p.heading.bold {\nmargin-left: -3px;\nmargin-bottom: -5px;\n}\n\n.timetothink-reference p.message {\nmargin-bottom: 10px;\n}\n\n.time-to-think-confirmation span.date-range {\ncolor: ",15),this.__$write($magentaDark,36),this.__$write(';\nfont-weight: bold;\n}\n\n.bold {\nfont-family: "Roboto Bold";\n}\n\n.reservation-amount span.no-wrap-text {\npadding: 0;\n}\n\n.reservation-info .ticket-link {\ntext-decoration: underline;\n}\n\n.reservation-info .card-name{\ntext-transform: uppercase;\n}\n\nspan.payment-name {\nfont-weight: 900;\n}\n\n.waitlist-paid h3 {\nmargin-top: 0;\n}\n\n',36)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$Common.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/commonReservationDetails/views/CommonReservationDetailsView.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/macroLibs/displayButtons/desktop/views/DReservationButtonsView.tml"),require("plnextv2/utils/macroLibs/airlineRecLoc/AirlineRecordLocatorView.tml"),require("plnextv2/utils/macroLibs/externalLink/desktop/view/DExternalLinkView.tml"),require("plnextv2/utils/macroLibs/boundDetails/desktop/views/DBoundDetailsView.tml"),require("plnextv2/utils/macroLibs/commonReservationDetails/views/CommonReservationDetailsViewScript.js"),require("plnextv2/utils/widgets/plnextLib/popover/Popover.js"),require("plnextv2/utils/widgets/plnextLib/modalPopover/core/ModalPopover.js"),require("plnextv2/utils/widgets/plnextLib/dialog/core/Dialog.js"),require("ariatemplates/html/Template.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.commonReservationDetails.views.CommonReservationDetailsView",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$CommonReservationDetailsViewScript.constructor.call(this)},$destructor:function(){this.$CommonReservationDetailsViewScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_printTravellerDocument:function(paymentInformation,travellerId){try{with(this){var identificationInfo=paymentInformation.travellersIdentification?paymentInformation.travellersIdentification[travellerId]:null;identificationInfo&&identificationInfo.documentNumber&&(this.__$write('\n<p class="traveller-identification-document">\n<span>\n<i class="icon-file" aria-hidden="true"></i>\n',22),this.__$write(_i18n.getLabel("tx_pltg_text_foid_Identificationdocument"),25),this.__$write(':\n</span>\n<span class="bold">\n<span class="id-infos">',25),this.__$write(identificationInfo.documentType,28),this.__$write("</span>\n",28),identificationInfo.documentCode&&(this.__$write('\n<span class="id-infos">',30),this.__$write(identificationInfo.documentCode,30),this.__$write("</span>\n",30)),this.__$write('\n<span class="id-infos">',32),this.__$write(identificationInfo.documentNumber,32),this.__$write("</span>\n</span>\n</p>\n",32))}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printTravellerDocument",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printInfantIdentity:function(listAirTicket,traveller,travellerIndex,displayAssociatedSegments,scope){try{with(this)if(listAirTicket)for(var k=0,l=listAirTicket.length;l>k;k++){var ticket=listAirTicket[k];aria.utils.Array.indexOf(ticket.liTravellerId,traveller.travellerId.toString())>=0&&"INF"==ticket.passengerType&&this.macro_ticketInformation(ticket,travellerIndex+"-"+k,displayAssociatedSegments,scope)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printInfantIdentity",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printEticketInformtaion:function(listAirTicket,traveller,travellerIndex,isINF,displayAssociatedSegments,scope){try{with(this)if(listAirTicket)for(var k=0,l=listAirTicket.length;l>k;k++){var ticket=listAirTicket[k];aria.utils.Array.indexOf(ticket.liTravellerId.toString(),traveller.travellerId.toString())>=0&&comparePaxTypes(ticket.passengerType,isINF)&&this.macro_ticketInformation(ticket,travellerIndex+"-"+k,displayAssociatedSegments,scope)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printEticketInformtaion",__filename,this["aria:currentLineNumber"]],_ex)}},macro_ticketInformation:function(ticket,elementId,displayAssociatedSegments,scope){try{with(this){var faFh=ticket.faFh,originalTicket=ticket.originalTicket;this.__$write('\n\n<div class="ticket-container">\n',76),shouldDisplayETicketAsToggleLink(faFh,originalTicket)?(this.__$write("\n\n<a ",79),this.__$writeId("ticketLink"+elementId,80),this.__$write(' aria-expanded="false" class="ticket-link"  href="javascript:;" ',80),this.__$statementOnEvent("click",this.$normCallback({fn:toggleTicketInfo,scope:scope,args:elementId}),80),this.__$write(" ",80),this.__$statementOnEvent("keypress",this.$normCallback({fn:eTicketKeydown,scope:scope,args:elementId}),80),this.__$write(">\n<i ",80),this.__$writeId("iIconRight"+elementId,81),this.__$write(' class="icon icon-caret-right" aria-hidden="true"></i>\n<i ',81),this.__$writeId("iIconDown"+elementId,82),this.__$write(' class="icon icon-caret-down hidden" aria-hidden="true"></i>\n',82),this.__$write(_i18n.getLabel("tx_pltg_text_ReservationEtktNumber"),83),this.__$write(' <span class="bold">',83),this.__$write(faFh.documentNumber,83),this.__$write("</span>\n</a>\n",83)):(this.__$write(_i18n.getLabel("tx_pltg_text_ReservationEtktNumber"),86),this.__$write(' <span class="bold">',86),this.__$write(faFh.documentNumber,86),this.__$write("</span>\n",86)),this.__$write("\n</div>\n\n",88),displayAssociatedSegments&&scope&&scope.data&&(this.__$write('\n<span class="associated-segments">\n',91),this.__$write(getFormatteAssociatedSegments(ticket,scope.data.listItinerary),92),this.__$write("\n</span>\n",93)),shouldDisplayETicketAsToggleLink(faFh,originalTicket)&&(this.__$write("\n\n<div ",96),this.__$writeId("divTktInfo"+elementId,97),this.__$write(' class="hidden ticket-detail">\n',97),faFh.confirmationNumber&&(this.__$write('\n<div class="eticket-data">',99),this.__$write(_i18n.getLabel("tx_pltg_text_ReservationEtktConfirmation"),99),this.__$write(' <span class="bold">\n',99),this.__$write(faFh.confirmationNumber,100),this.__$write("</span></div>\n",100)),faFh.issueDate&&(this.__$write('\n<div class="eticket-data">',103),this.__$write(_i18n.getLabel("tx_pltg_text_ReservationEtktIssueDate"),103),this.__$write(' <span class="bold">\n',103),this.__$write(faFh.issueDate,104),this.__$write("</span></div>\n",104)),faFh.airlineName&&(this.__$write('\n<div class="eticket-data">',107),this.__$write(_i18n.getLabel("tx_pltg_text_ReservationEtktIssuingAirline"),107),this.__$write(' <span class="bold">\n',107),this.__$write(faFh.airlineName,108),this.__$write("</span></div>\n",108)),originalTicket&&originalTicket.tourCode&&(this.__$write('\n<div class="eticket-data">',111),this.__$write(_i18n.getLabel("tx_pltg_text_ReservationEtktTourCode"),111),this.__$write(' <span class="bold">\n',111),this.__$write(originalTicket.tourCode,112),this.__$write("</span></div>\n",112)),faFh.vatNumber&&(this.__$write('\n<div class="eticket-data">',115),this.__$write(_i18n.getLabel("tx_pltg_text_ReservationEtktVAT"),115),this.__$write(' <span class="bold">\n',115),this.__$write(faFh.vatNumber,116),this.__$write("</span></div>\n",116)),this.__$write("\n</div>\n",118))}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["ticketInformation",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayRecordLocator:function(reservationInfo,config){try{with(this)reservationInfo.listAirlineRecords&&reservationInfo.listAirlineRecords.length>0?("SHOW"===config.gdsRec&&(this.__$write("\n<li>\n<span>\n",130),this.__$write(_i18n.getStringFromPattern("tx_pltg_text_ReservationRefGds",["<span class='locator recloc'>"+reservationInfo.locator+"</span>"]),132),this.__$write("\n</span>\n</li>\n",134)),this.airlineRecLocLib.macro_displayAirlineRecLocs(reservationInfo.listAirlineRecords,"SHOW"!==config.gdsRec&&1===reservationInfo.listAirlineRecords.length)):"SHOW"===config.gdsRec&&(this.__$write("\n<li>\n<span>",140),this.__$write(_i18n.getLabel("tx_pltg_text_ReservationRef"),141),this.__$write('</span>\n<span class="locator recloc">',141),this.__$write(reservationInfo.locator,142),this.__$write("</span>\n</li>\n",142))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayRecordLocator",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printReservationName:function(reservationName){try{with(this)this.__$write('\n\n<li class="reservation-name">\n<span>',152),this.__$write(_i18n.getLabel("tx_pltg_text_ReservationLeadName"),154),this.__$write('</span>\n<span class="bold">',154),this.__$write(reservationName,155),this.__$write("</span>\n</li>\n",155)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printReservationName",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printReservationIssueOrPurchaseDate:function(reservationCreationDate){try{with(this){this.__$write('\n<li class="reservation-date">\n<span>',160),this.__$write(_i18n.getLabel("tx_pltg_text_ReservationIssueDate"),161),this.__$write('</span>\n<span aria-hidden="true" class="bold">\n',161);var creationDate=new Date(reservationCreationDate);this.__$write(_dateUtils.formatDateTime(creationDate,_dateUtils.FORMATS.SHORT_DATE_FORMAT),164),this.__$write('\n</span>\n<span class="plnext-sr-only">\n',165),this.__$write(_dateUtils.formatDateTimeScreenReader(creationDate,_dateUtils.SCREEN_READER_FORMATS.NUMBER_MONTH_YEAR),167),this.__$write("\n</span>\n</li>\n",168)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printReservationIssueOrPurchaseDate",__filename,this["aria:currentLineNumber"]],_ex)}},macro_methodOfDelivery:function(selectedMOD){try{with(this)if(selectedMOD)if(selectedMOD.displayAirportPickup)this.__$write("\n<li>\n<span>",176),this.__$write(_stringUtils.capitaliseFirstLetter(_i18n.getLabel("tx_pltg_text_method_of_delivery")),177),this.__$write('</span>\n<span class="bold">',177),this.__$write(_stringUtils.capitaliseFirstLetter(getStringFromPattern("tx_pltg_pattern_pick_up_paper_at",[data.reservationInfo.selectedMOD.arptBeginLocation])),178),this.__$write("</span>\n</li>\n\n",178);else if(selectedMOD.displayETicket)this.__$write("\n<li>\n<span>",182),this.__$write(_stringUtils.capitaliseFirstLetter(_i18n.getLabel("tx_pltg_text_method_of_delivery")),183),this.__$write('</span>\n<span class="bold">',183),this.__$write(_stringUtils.capitaliseFirstLetter(_i18n.getLabel("tx_pltg_text_Eticket")),184),this.__$write("</span>\n</li>\n\n",184);else if(selectedMOD.displayPickUpAtCityOffice){var pickupAtCity=_i18n.getLabel("tx_pltg_text_pick_city_office");this.__$write("\n<li>\n<span>",189),this.__$write(_i18n.getStringFromPattern("tx_pltg_text_method_of_delivery_for_PickupAtCity",[pickupAtCity]),190),this.__$write("</span>\n</li>\n\n",190)}else if(selectedMOD.displayPickUpAtOtherOffice){var pickupAtOtherOffice=_i18n.getLabel("tx_pltg_text_pick_other_office");this.__$write("\n<li>\n<div>",195),this.__$write(_i18n.getStringFromPattern("tx_pltg_text_method_of_delivery_for_PickupAtOtherOffice",[pickupAtOtherOffice]),196),this.__$write("</div>\n</li>\n\n",196)}else if(selectedMOD.displayDisplayDelivertoMailAddress){this.__$write("\n<li>\n",200);var deliverToMailAddress=_i18n.getLabel("tx_pltg_text_mod_maildelivery");this.__$write("\n<div>",202),this.__$write(_i18n.getStringFromPattern("tx_pltg_text_method_of_delivery_for_MailDelivery",[deliverToMailAddress]),202),this.__$write("</div>\n</li>\n",202)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["methodOfDelivery",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayCityOfficeDetails:function(cityLocation){try{with(this)this.__$write('\n<div class="cityoffice-mod-info">\n<div>',213),this.__$write(_i18n.getLabel("tx_pltg_text_cityoffice_confirmation_desc"),214),this.__$write("</div>\n<p>",214),this.__$write(cityLocation,215),this.__$write("</p>\n</div>\n",215)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayCityOfficeDetails",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayOtherOfficeDetails:function(selectedMODBean){try{with(this)this.__$write('\n<div class="otheroffice-mod-info">\n<div>',224),this.__$write(_i18n.getLabel("tx_pltg_text_otheroffice_confirmation_desc"),225),this.__$write("</div>\n",225),null!=selectedMODBean.otherOfficeAddress&&(null!=selectedMODBean.otherOfficeDescription?(this.__$write("\n<p>",228),this.__$write(selectedMODBean.otherOfficeAddress,228),this.__$write("</p>\n<p>",228),this.__$write(selectedMODBean.otherOfficeDescription,229),this.__$write("</p>\n",229)):(this.__$write("\n<p>",231),this.__$write(selectedMODBean.otherOfficeAddress,231),this.__$write("</p>\n",231))),this.__$write("\n</div>\n",234)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayOtherOfficeDetails",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayMailDeliveryDetails:function(selectedMODBean){try{with(this){if(this.__$write('\n<div class="mailDelivery-mod-info">\n<div>',243),this.__$write(_i18n.getLabel("tx_pltg_text_mail_delivery_confirmation_desc"),244),this.__$write("</div>\n",244),null!=selectedMODBean.addressInformationBean){var addressInformationBean=selectedMODBean.addressInformationBean;null!=addressInformationBean&&(this.__$write("\n<div>",248),this.__$write(addressInformationBean.name,248),this.__$write("</div>\n<div>",248),this.__$write(addressInformationBean.firstAddressLine,249),this.__$write(" ",249),this.__$write(addressInformationBean.secondAddressLine,249),this.__$write("</div>\n<div>",249),this.__$write(addressInformationBean.city,250),this.__$write("</div>\n<div>",250),this.__$write(addressInformationBean.zipCode,251),this.__$write("</div>\n<div>",251),this.__$write(addressInformationBean.country,252),this.__$write("</div>\n",252))}this.__$write("\n</div>\n",255)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayMailDeliveryDetails",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printPaymentInformation:function(config,reservationInfo,price,constants,globalLists,scope,listItinerary){try{with(this){var isTimeToThinkEnabled=plnextv2.utils.CommonReservationDetailsUtils.isTimeToThinkEmdAvailable(0,reservationInfo.timeToThink);if(isTimeToThinkEnabled&&config.pendingPNR&&config.isResponsiveReservationPanel&&(this.__$write('\n<div class="responsive-timetothink-amount">\n',268),this.macro_printTTTDetails("div",reservationInfo),this.macro_printTotalAmountOfBooking(config,constants,reservationInfo,price,"div"),this.__$write("\n</div>\n",271)),config.pendingPNR?this.macro_printPaymentForPendingPNR(reservationInfo.paymentInformation,price,config,reservationInfo.timeToThink,scope,listItinerary):config.hideFarePrice||(this.__$write("\n<p>\n\n",278),reservationInfo.paymentInformation.targetCurrencyCode?this.macro_APCCheckMessage(reservationInfo,config,price):this.macro_printPaymentInfo(reservationInfo.paymentInformation,price,config,constants,globalLists,reservationInfo.travellerFrequentFlyerBean,listItinerary),this.__$write("\n</p>\n",285)),isTimeToThinkEnabled&&config.pendingPNR&&(this.__$write('\n<div class="timetothink-reference">\n<p class="heading bold">',293),this.__$write(_i18n.getLabel("tx_pltg_ttt_reference_header"),294),this.__$write('</p>\n<p class="message">',294),this.__$write(_i18n.getLabel("tx_pltg_ttt_reference_message"),295),this.__$write("</p>\n</div>\n",295),config.isResponsiveReservationPanel)){this.__$write('\n<div class="responsive-timetothink-emd">\n',298);for(var i=0,j=reservationInfo.liTravellerInfo.length;j>i;i++)this.macro_travellerName(reservationInfo.liTravellerInfo[i].identity),this.macro_printTTTEmd(reservationInfo,i);this.__$write("\n</div>\n",303)}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printPaymentInformation",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printPaymentForPendingPNR:function(paymentInformation,price,config,timeToThink,scope,listItinerary){try{with(this)expiryDate=new Date(paymentInformation.expiryDate),config.RTPLPageMode&&"AMOP"!==paymentInformation.paymentTypeCode&&"ASN"!==paymentInformation.paymentTypeCode&&(isWaitlisted(listItinerary)?this.macro_printWaitlistMessage():null!=expiryDate&&this.macro_printOnHoldPNRMessage(expiryDate)),amopInformation=paymentInformation.AMOPConfirmation,asnInformation=paymentInformation.asnConfirmation,"AMOP"===paymentInformation.paymentTypeCode&&"APPROVED"!==amopInformation.validationStatus&&this.macro_printOnHoldMessageForAmop(amopInformation,scope,config,paymentInformation),"ASN"===paymentInformation.paymentTypeCode&&this.macro_printOnHoldMessageForAsn(asnInformation,scope,config,paymentInformation),"DFRR"==paymentInformation.paymentTypeCode&&(this.__$write('\n<p class="deferred-payment-confirmation">',338),this.__$write(_i18n.getStringFromPattern("tx_pltg_pattern_DeferredPaymentConfirmationNote",[paymentInformation.deferredPaymentLocation,_dateUtils.formatDateTime(expiryDate,_dateUtils.FORMATS.FULL_DATE_TIME_FORMAT)]),338),this.__$write("</p>\n",338)),"PLCC"!=paymentInformation.paymentTypeCode||isTimeToThinkSelected(timeToThink)||(this.__$write('\n<p class="plcc-confirmation">',343),this.__$write(_i18n.getStringFromPattern("tx_pltg_pattern_PLCC_ConfirmationNote",[_dateUtils.formatDateTime(expiryDate,_dateUtils.FORMATS.FULL_DATE_TIME_FORMAT,!0)]),343),this.__$write("</p>\n",343)),isTimeToThinkSelected(timeToThink)&&(this.__$write('\n<p class="time-to-think-confirmation">',348),this.__$write(this.getConfirmTTTMessage(expiryDate),348),this.__$write("</p>\n",348))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printPaymentForPendingPNR",__filename,this["aria:currentLineNumber"]],_ex)}},macro_APCCheckMessage:function(reservationInfo,config,price){try{with(this){var apcAmount=getApcAmount(price,reservationInfo.paymentInformation);if(apcAmount>0){if(reservationInfo.creationDate)var APCDate=new Date(reservationInfo.creationDate),APCConvertedDate=_dateUtils.formatDateTime(APCDate,_dateUtils.FORMATS.SHORT_DATE_FORMAT_1);var APCCode=reservationInfo.paymentInformation.targetCurrencyCode,APCFareCurrency=price.currency.code;if("CC"==reservationInfo.paymentInformation.paymentTypeCode&&null!=reservationInfo.paymentInformation.creditCardInformation&&reservationInfo.paymentInformation.creditCardInformation[0].accountNumber)var APCCreditCardName=config.listCreditCard[reservationInfo.paymentInformation.creditCardInformation[0].companyCode].name,APCCreditCardNumber=reservationInfo.paymentInformation.creditCardInformation[0].accountNumber.slice(-8),APCCreditCardNumberFirst=APCCreditCardNumber.slice(0,4),APCCreditCardNumberSecond=APCCreditCardNumber.slice(4,8);else var APCCreditCardName=reservationInfo.paymentInformation.paymentName;this.__$write("\n\n<span>\n\n",381),this.__$write(_i18n.getLabel("tx_pltg_pattern_AutomaticPaymentCurrencyNoteBookingConfirmed"),384),"CC"==reservationInfo.paymentInformation.paymentTypeCode?(this.__$write("\n<span>\n",386),this.__$write(this.$modifier("capitalize",[APCCreditCardName]),387),this.__$write(" ",387),this.__$write(APCCreditCardNumberFirst,387),this.__$write(" ",387),this.__$write(APCCreditCardNumberSecond,387),this.__$write("\n</span>\n",388)):(this.__$write("\n<span>",390),this.__$write(APCCreditCardName,390),this.__$write("</span>\n",390)),this.__$write(_i18n.getLabel("tx_pltg_pattern_AutomaticPaymentCurrencyNoteOn"),392),this.__$write('\n<span class="bold">',393),this.__$write(APCConvertedDate,393),this.__$write("</span>\n",393),this.__$write(_i18n.getLabel("tx_pltg_pattern_AutomaticPaymentCurrencyNoteForAnAmount"),394),this.getApcTotalAmount&&(this.__$write('\n<span class="bold">',396),this.__$write(_priceUtils.formatCurrency(apcAmount),396),this.__$write("</span> ",396),this.__$write(APCCode,396),this.__$write(" <bdo dir='ltr'>(",396),this.__$write(_priceUtils.formatCurrency(getApcTotalAmount(price)),396),this.__$write(" ",396),this.__$write(APCFareCurrency,396),this.__$write(")</bdo>\n",396)),this.__$write("\n</span>\n",398)}else config.isInvoluntaryOnRConf&&this.__$write(_i18n.getLabel("tx_pltg_text_ReservationConfirmedFreeOfCharge"),400)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["APCCheckMessage",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printPaymentInfo:function(paymentInformation,price,config,constants,globalLists,travellerFrequentFlyerBean,listItinerary){try{with(this)plnextv2.utils.CommonReservationDetailsUtils.isRebookFlow(config,constants)?this.macro_printPaymentInfoRebooking(paymentInformation,price,config,constants):isServicingFlow(config,constants)?this.macro_printPaymentInfoServicing(paymentInformation,price,config):this.macro_printPrimeBookingPayment(paymentInformation,price,config,globalLists,travellerFrequentFlyerBean,constants,listItinerary)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printPaymentInfo",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printPaymentInfoRebooking:function(paymentInformation,price,config,constants){try{with(this)price.totalCollectBalance&&price.totalCollectBalance.amount>0?(this.__$write("\n<p>\n",425),this.macro_printPaymentPrefix(paymentInformation,config),this.__$write('\n<span class="payment-amount-text">',427),this.__$write(" "+_i18n.getLabel("tx_pltg_text_ReservationForAmount"),427),this.__$write("</span>\n\n",427),this.macro_printAmount(price.totalCollectBalance.amount,price.currency),this.__$write("\n</p>\n",431)):config.isInvoluntaryOnRConf&&(this.__$write('\n\n<p><span class="payment-amount-text">',433),this.__$write(_i18n.getLabel("tx_pltg_text_ReservationConfirmedFreeOfCharge"),434),this.__$write("</span></p>\n",434)),this.macro_printInstallmentInfo(paymentInformation,price,config,constants),price.totalRefund&&price.totalRefund.amount>0&&(this.__$write("\n<p>",441),this.__$write(_i18n.getLabel("tx_pltg_text_ReservationRefund")+" ",441),this.macro_printAmount(price.totalRefund.amount,price.currency),this.__$write("\n</p>\n",445))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printPaymentInfoRebooking",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printPaymentInfoServicing:function(paymentInformation,price,config){try{with(this)price.totalServices&&price.totalServices.balancedAmount&&price.totalServices.balancedAmount.amount>0&&(this.__$write('\n\n<p class="payment-servicing-container">\n',457),this.macro_printPaymentPrefix(paymentInformation,config),this.__$write(" "+_i18n.getLabel("tx_pltg_text_ReservationForAmount"),461),this.macro_printAmount(price.totalServices.balancedAmount.amount,price.currency),this.__$write("\n</p>\n\n",465))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printPaymentInfoServicing",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printPrimeBookingPayment:function(paymentInformation,price,config,globalLists,travellerFrequentFlyerBean,constants,listItinerary){try{with(this){if(price.dccMcp){currencyCode=price.dccMcp.currency.code;var currencyDesc=plnextv2.utils.CurrencyUtils.getCurrencyDescription(currencyCode);this.__$write("\n<p>",479),this.__$write(_i18n.getStringFromPattern("tx_pltg_text_dccmcp_chosenCurrency",[currencyDesc+" ("+currencyCode+")","1 "+price.currency.code+" = "+price.dccMcp.exchangeRate+" "+price.dccMcp.currency.code]),479),this.__$write("</p>\n",479)}if(!this.isPnrAlreadyPaid(paymentInformation)||config.RTPLPageMode||isWaitlistedPaid(listItinerary,config)||this._bookingConfirmationUtils.isShoppingBasketFlowAndPayWithMiles(price,config)||price.totalAmount&&price.totalAmount.amount<=0&&price.eBankData||this.macro_printPaymentStandardInfo(paymentInformation,config,price,globalLists,travellerFrequentFlyerBean,constants),"DFRR"==paymentInformation.paymentTypeCode){var expiryDate=new Date(paymentInformation.expiryDate);this.__$write('\n<p class="deferred-payment-expiry">',495),this.__$write(_i18n.getStringFromPattern("tx_pltg_pattern_DeferredPaymentConfirmationNote",[paymentInformation.deferredPaymentLocation,_dateUtils.formatDateTime(expiryDate,_dateUtils.FORMATS.FULL_DATE_TIME_FORMAT)]),495),this.__$write("</p>\n",495)}paymentInformation.isSiteUseCcAsDocument&&(this.__$write('\n<p class="cc-as-foid">',500),this.__$write(_i18n.getLabel("tx_pltg_text_foid_Identificationdocument"),500),this.__$write(": <span>  ",500),this.__$write(_i18n.getLabel("tx_pltg_text_foid_force_cc_as_document_conf_page"),500),this.__$write("</span> </p>\n",500))}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printPrimeBookingPayment",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printPaymentStandardInfo:function(paymentInformation,config,price,globalLists,travellerFrequentFlyerBean,constants){try{with(this)if(totalAmount=0,price.totalAmount&&(totalAmount=price.totalAmount.amount),price.eBankData&&(totalAmount-=price.eBankData.amountApplied.value),totalAmount>0){if(this.__$write('\n<p class="reservation-payment-info-standard">\n',517),this.macro_printPaymentPrefix(paymentInformation,config),!config.isPNRreissued)if(this.__$write('\n<span class="payment-amount-text">',520),this.__$write(" "+_i18n.getLabel("tx_pltg_text_ReservationForAmount"),520),this.__$write("</span>\n\n",520),price.dccMcp)this.macro_printDccMcpPrice(paymentInformation,price,globalLists,config);else{if(price.carTotalPrice&&price.carTotalPrice.totalPrice>0){var totalPriceWithoutCar=price.isCarInTotalPrice?totalAmount-price.carTotalPrice.totalPrice:totalAmount;this.macro_printAmount(totalPriceWithoutCar,price.currency)}else this.macro_printAmount(totalAmount,price.currency);paymentInformation.finalPaymentReference&&("CC"==paymentInformation.paymentTypeCode&&"HTML"==config.ccPspType||"CC"!=paymentInformation.paymentTypeCode)&&this.__$write(_i18n.getStringFromPattern("tx_pltg_pattern_ProviderConfirmation",[paymentInformation.finalPaymentReference]),533),price.milesAndCash&&price.milesAndCash.milesCost&&this.macro_printMilesAndCashInfo(price,travellerFrequentFlyerBean,config)}this.macro_printInstallmentInfo(paymentInformation,price,config,constants),this.__$write("\n</p>\n",543)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printPaymentStandardInfo",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printDccMcpPrice:function(paymentInformation,price,globalLists,config){try{with(this){this.__$write('\n<span class="payment-amount-price">\n<span class="bold">',551),this.__$write(_priceUtils.formatCurrency(price.dccMcp.amount,price.dccMcp.currency),552),this.__$write('\n</span>\n<span class="no-wrap-text">(',555),this.__$write(_priceUtils.formatCurrency(price.totalAmount.amount,price.currency),556),this.__$write(")\n</span>\n</span>\n",558);var airlineName=config.airlineName;this.__$write("\n<p>\n",562),this.__$write(_i18n.getStringFromPattern("tx_pltg_text_dccmcp_currencyConversionProvidedBy",[airlineName]),563),this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","Popover",{macro:{name:"moreInfoDCCMCP",scope:this},width:300},564)&&(this.__$write('\n<a href="javascript:void(0);">',571),this.__$write(_i18n.getLabel("tx_pltg_text_dccmcp_moreInfo"),571),this.__$write("</a>\n",571),this.__$endContainerWidget()),this.__$write("\n</p>\n",573)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printDccMcpPrice",__filename,this["aria:currentLineNumber"]],_ex)}},macro_moreInfoDCCMCP:function(){try{with(this)this.__$write(_i18n.getLabel("tx_pltg_text_dccmcp_moreInfoContent"),580)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["moreInfoDCCMCP",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printMilesAndCashInfo:function(price,travellerFrequentFlyerBean,config){try{with(this){var milesAndCashPaymentInfo="<span class='uppercase bold'>"+this._priceUtils.getFormattedMiles(price.milesAndCash.milesCost)+" "+this._i18n.getLabel("tx_pltg_text_Miles")+" </span>";if(price.totalAmount.amount>0&&(milesAndCashPaymentInfo=this._i18n.getStringFromPattern("tx_pltg_text_andWith",[milesAndCashPaymentInfo])+" "),isFrequentFlyerNumberAvailable(travellerFrequentFlyerBean)&&(milesAndCashPaymentInfo+=this._i18n.getStringFromPattern("tx_pltg_pattern_onTheFrequentFlyerNumber",[travellerFrequentFlyerBean.FREQ_Number])+" "),config.isDisplaySavingDetails){var milesAmount=price.milesAndCash.milesAmount;milesAndCashPaymentInfo+=this._i18n.getStringFromPattern("tx_pltg_text_amountSaved",[this._priceUtils.formatCurrency(milesAmount.amount,milesAmount.currency)])}this.__$write(milesAndCashPaymentInfo,603)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printMilesAndCashInfo",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printOnHoldPNRMessage:function(expiryDate){try{with(this)this.__$write('\n<p class="on-hold-confirmation">\n',610),this.__$write(_i18n.getLabel("tx_pltg_text_OnHoldMessage"),611),this.__$write(" ",611),this.__$write(_i18n.getLabel("tx_pltg_pattern_LastDayToTicket"),611),this.__$write(' <span class="bold">',611),this.__$write(_dateUtils.formatDateTime(expiryDate,_dateUtils.FORMATS.FULL_DATE_TIME_FORMAT,!0),611),this.__$write("</span>\n</p>\n",611)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printOnHoldPNRMessage",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printOnHoldMessageForAmop:function(amopInformation,scope,config,paymentInformation){try{with(this)this.__$write('\n<p class="amop-payment-information">\n',619),this.__$write(_i18n.getStringFromPattern("tx_pltg_pattern_AMOP_payment_warning",[amopInformation.name,_dateUtils.formatDateTime(expiryDate,_dateUtils.FORMATS.FULL_DATE_TIME_FORMAT)]),620),this.__$write("\n</p>\n",622),config.isResponsiveReservationPanel&&this.macro_printAMOPInformation(paymentInformation,"li"),amopInformation.asyncReference&&amopInformation.asyncReference.url&&(this.__$write('\n<p class="amop-payment-link">\n',627),this.macro_displayAmopPaymentLink(amopInformation.asyncReference.url,scope),this.__$write("\n</p>\n",629))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printOnHoldMessageForAmop",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printOnHoldMessageForAsn:function(asnInformation,scope,config,paymentInformation){try{with(this)this.__$write('\n<p class="on-hold-confirmation">\n\n\n',637),this.__$write(_i18n.getStringFromPattern("tx_pltg_pattern_AMOP_payment_warning",[asnInformation.bankCode,_dateUtils.formatDateTime(expiryDate,_dateUtils.FORMATS.FULL_DATE_TIME_FORMAT,!0)]),640),this.__$write("\n\n</p>\n",641),config.isResponsiveReservationPanel&&this.macro_printASNInformation(paymentInformation,"li")}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printOnHoldMessageForAsn",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayAmopPaymentLink:function(urlData,scope){try{with(this){var linkMessagePattern=_i18n.getLabel("tx_pltg_pattern_AMOP_payment_link"),__v_1=_i18n.getPatternTokens(linkMessagePattern);void 0==_i18n.getPatternTokens(linkMessagePattern)&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,654]);for(var messageToken_ct=0,__v_2=__v_1.length,messageToken_index=0;__v_2>messageToken_index;messageToken_index++){var messageToken=__v_1[messageToken_index];messageToken_ct++,"{0}"===aria.utils.String.trim(messageToken)?(this.__$write('\n<a class="ticket-link" href="javascript:;" ',656),this.__$statementOnEvent("click",this.$normCallback({fn:"payForAmop",args:urlData,scope:scope.moduleCtrl}),656),this.__$write(">\n",656),this.__$write(_i18n.getLabel("tx_pltg_pattern_AMOP_payment_link_label"),657),this.__$write('\n<i class="icon icon-external-link" aria-hidden="true" title="',658),this.__$write(_i18n.getLabel("tx_pltg_text_OpenNewWindow"),658),this.__$write('"></i>\n<span class="plnext-sr-only">&nbsp;',658),this.__$write(_i18n.getLabel("tx_pltg_text_OpenNewWindow"),659),this.__$write("</span>\n</a>\n",659)):this.__$write(messageToken,662)}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayAmopPaymentLink",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printPaymentPrefix:function(paymentInformation,config){try{with(this)hasPaymentProviderName(paymentInformation)?(config.isPNRreissued?this.__$write(_i18n.getLabel("tx_pltg_text_ReservationLastPaymentWith")+" ",675):this.__$write(_i18n.getLabel("tx_pltg_text_ReservationPaymentWith")+" ",673),"CC"==paymentInformation.paymentTypeCode&&null!=paymentInformation.creditCardInformation&&null!=config.listCreditCard?(this.__$write('\n\n<span class="card-name">\n',682),this.__$write(config.listCreditCard[getCCCompanyCode(paymentInformation)].name+" ",684),this.__$write("\n</span>\n",685),this.__$write(this.getCCAccountNumber(paymentInformation),686)):(this.__$write('\n<span class="payment-name">',690),this.__$write(paymentInformation.paymentName,690),this.__$write("</span>\n",690))):this.__$write(_i18n.getLabel("tx_pltg_text_PaymentHasBeenMade"),695)
}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printPaymentPrefix",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printAmount:function(amount,currency){try{with(this)this.__$write('\n<span class="payment-amount-price bold no-wrap-text">\n',703),this.__$write(_priceUtils.formatCurrency(amount,currency),704),this.__$write("\n</span>\n",705)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printAmount",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printInstallmentInfo:function(paymentInformation,price,config,constants){try{with(this)if(paymentInformation.installmentInfo){var installmentPlan=paymentInformation.installmentInfo.installmentPlanSummary[0];this.__$write('\n<p>\n<span class="',711),this.__$write(this.getBsGridClass("installmentText"),712),this.__$write(' bold installment-text-padding"> ',712),this.__$write(_i18n.getStringFromPattern("tx_pltg_text_inst_recapTitle",[paymentInformation.installmentInfo.numberOfInstallments]),712),this.__$write('</span>\n<span class="',712),this.__$write(this.getBsGridClass("installmentText"),713),this.__$write(' installment-text-padding">\n',713);var firstAmount=this.getAmount("ISF",installmentPlan.monetaryDetails);this.__$write(_i18n.getLabel("tx_pltg_text_inst_firstMonth"),715),this.__$write(' <span class="bold">',715),this.__$write(_priceUtils.formatCurrency(firstAmount.value,firstAmount.currency),715),this.__$write("</span>\n",715),paymentInformation.installmentInfo.startDate&&(this.__$write(_i18n.getLabel("tx_pltg_text_inst_start"),717),this.__$write(" ",717),this.__$write(paymentInformation.installmentInfo.startDate,717)),this.__$write('\n</span>\n<span class="',719),this.__$write(this.getBsGridClass("installmentText"),720),this.__$write(' installment-text-padding">\n',720),this.__$write(_i18n.getStringFromPattern("tx_pltg_text_inst_otherMonth",[paymentInformation.installmentInfo.numberOfInstallments-1]),721);var nextAmount=this.getAmount("ISN",installmentPlan.monetaryDetails);this.__$write('\n<span class="bold"> ',723),this.__$write(_priceUtils.formatCurrency(nextAmount.value,nextAmount.currency),723),this.__$write('</span>\n</span>\n<span class="',723),this.__$write(this.getBsGridClass("installmentText"),725),this.__$write(' installment-text-padding">\n<span class="bold">',725),this.__$write(_i18n.getLabel("tx_pltg_text_Total"),726),this.__$write("&nbsp;\n",726),plnextv2.utils.CommonReservationDetailsUtils.isRebookFlow(config,constants)?this.__$write(_priceUtils.formatCurrency(price.totalCollectBalance.amount,price.currency),728):this.__$write(_priceUtils.formatCurrency(price.totalAmount.amount,price.currency),730),this.__$write("\n</span>\n",732);var interestAmount=this.getAmount("ISI",installmentPlan.monetaryDetails);interestAmount.value>0&&this.__$write(_i18n.getStringFromPattern("tx_pltg_text_inst_includingInterest",[_priceUtils.formatCurrency(interestAmount.value,interestAmount.currency)]),735),this.__$write("\n</span>\n</p>\n",737)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printInstallmentInfo",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printReservationActions:function(config,controller,price,template){try{with(this){if(price.totalAmount){var gridClass=config.isResponsiveReservationPanel?"":"col-xs-24",reservationAction=config.isResponsiveReservationPanel?"":"reservation-actions";this.__$write('\n<div class="',750),this.__$write(gridClass,750),this.__$write(" ",750),this.__$write(reservationAction,750),this.__$write(' hidden-print">\n',750),!config.isResponsiveReservationPanel&&template&&"function"==typeof template.macro_printReservationMenu&&this.__$write(template.macro_printReservationMenu(),753),this.__$write('\n<div class="action-links-container">\n',755),this.macro_printConditionLinks(config,controller),this.__$write("\n</div>\n",757),this.macro_displayCancelATCBooking(config,controller),this.__$write("\n</div>\n",759)}this.macro_includePCDialog(config),this.macro_includeMiniRulesDialog(config)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printReservationActions",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printConditionLinks:function(config,moduleController){try{with(this){var purcCond=config.purchaseConditionsEnabled,miniRules=config.miniRulesEnabled;purcCond&&(this.__$write("\n<span>",772),this.__$write(_i18n.getLabel("tx_pltg_text_ReviewPurchaseConditionsMiniRules"),772),this.__$write('</span>\n<a href="javascript:;" ',772),this.__$statementOnEvent("click",this.$normCallback({fn:"openPurchaseCondition",scope:moduleController}),773),this.__$write(" >\n",773),this.externalLink.macro_insertExternalLinkIcon(_i18n.getLabel("tx_pltg_text_TermsConditionsPurchase")),this.__$write("\n</a>\n",775)),miniRules&&(purcCond?this.__$write("\n<span>/</span>\n",780):(this.__$write("\n<span>",782),this.__$write(_i18n.getLabel("tx_pltg_text_ReviewPurchaseConditionsMiniRules"),782),this.__$write("</span>\n",782)),this.__$write('\n<a href="javascript:;" ',784),this.__$statementOnEvent("click",this.$normCallback({fn:"tripSummaryMiniRulesClick",scope:moduleController}),784),this.__$write('\nclass="fare-conditions-link" >\n',785),this.__$write(_i18n.getLabel("tx_pltg_text_TermsConditionsFare"),786),this.__$write("\n</a>\n",787))}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printConditionLinks",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayCancelATCBooking:function(config,scope){try{with(this){this.__$write('\n\n<div class="action-buttons-container">\n\n',799);var requireParamsForCancelATCButton={fn:"cancelAtcBooking",scope:scope,isFooterRequired:!1};this.buttonDisplay.macro_displayCancelATCBooking(config,requireParamsForCancelATCButton),this.__$write("\n\n</div>\n\n",804)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayCancelATCBooking",__filename,this["aria:currentLineNumber"]],_ex)}},macro_includePCDialog:function(config){try{with(this)isTabletOrMobileAndPnrd()?(config.purchaseConditionTitle=_i18n.getLabel(config.purchaseConditionTitle),this.__$processWidgetMarkup("plnextv2.utils.widgets.PlnextLib","ModalPopover",{modalId:"dialog-content-purchaseConditionsDialog",contentMacro:"showPurchaseConditionsModalPopover",binding:{show:{inside:config,to:"purchaseConditionsDialogOpen"},heading:{inside:config,to:"purchaseConditionTitle"}},closeButtonCssClass:" plnext-widget-btn btn-big ",showCloseButtonAfterContent:!0},815)):this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","Dialog",{id:"purchaseConditionsDialog",bind:{visible:{inside:config,to:"purchaseConditionsDialogOpen"}},closeOnMouseClick:!0,closeButton:!0,width:1200,height:700},826)&&(this.macro_showPurchaseConditionsModalPopover(),this.__$endContainerWidget())}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["includePCDialog",__filename,this["aria:currentLineNumber"]],_ex)}},macro_showPurchaseConditionsModalPopover:function(){try{with(this)this.__$processWidgetMarkup("aria.html.HtmlLibrary","Template",{classpath:this.getPConditionPath(),type:"div"},846)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["showPurchaseConditionsModalPopover",__filename,this["aria:currentLineNumber"]],_ex)}},macro_includeMiniRulesDialog:function(config){try{with(this)isTabletOrMobileAndPnrd()?(config.fareConditionTitle=_i18n.getLabel("tx_pltg_text_FareConditions"),this.__$processWidgetMarkup("plnextv2.utils.widgets.PlnextLib","ModalPopover",{modalId:"dialog-content-miniRulesDialog",contentMacro:"showFareConditionsModalPopover",binding:{show:{inside:config,to:"miniRulesDialogOpen"},heading:{inside:config,to:"fareConditionTitle"}},closeButtonCssClass:" plnext-widget-btn btn-big ",onClose:this.onCloseFareComparison,showCloseButtonAfterContent:!0},859)):this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","Dialog",{id:"miniRulesDialog",bind:{visible:{inside:config,to:"miniRulesDialogOpen"}},closeOnMouseClick:!0,closeButton:!0,width:1200,height:700},871)&&(this.macro_showFareConditionsModalPopover(),this.__$endContainerWidget())}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["includeMiniRulesDialog",__filename,this["aria:currentLineNumber"]],_ex)}},macro_showFareConditionsModalPopover:function(){try{with(this)this.__$processWidgetMarkup("aria.html.HtmlLibrary","Template",{classpath:this.getFareConditionsTemplate(),type:"div"},888)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["showFareConditionsModalPopover",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printAMOPInformation:function(paymentInformation,containerElement){try{with(this)paymentInformation&&"AMOP"===paymentInformation.paymentTypeCode&&paymentInformation.AMOPConfirmation&&(amopInformation=paymentInformation.AMOPConfirmation,this.__$write("\n<",904),this.__$write(containerElement,904),this.__$write(' class="amop-biller-code">\n<span>',904),this.__$write(_i18n.getLabel("tx_pltg_pattern_AMOP_biller_code"),905),this.__$write('</span>\n<span class="bold">',905),this.__$write(amopInformation.name,906),this.__$write("</span>\n</",906),this.__$write(containerElement,907),this.__$write(">\n\n",907),amopInformation.asyncReference&&(this.__$write("\n<",910),this.__$write(containerElement,910),this.__$write(' class="amop-transaction-number">\n<span>',910),this.__$write(_i18n.getStringFromPattern("tx_pltg_pattern_AMOP_transaction_number",[amopInformation.name]),911),this.__$write('</span>\n<span class="bold">',911),this.__$write(amopInformation.asyncReference.id,912),this.__$write("</span>\n</",912),this.__$write(containerElement,913),this.__$write(">\n",913)),amopInformation.customParams&&(this.__$write("\n<",917),this.__$write(containerElement,917),this.__$write(' class="amop-custom-params">\n<span class="amop-custom-params-label">',917),this.__$write(getAMOPCustomParamsLabel(amopInformation.code),918),this.__$write('</span>\n<span class="amop-custom-params-value bold">',918),this.__$write(amopInformation.customParams,919),this.__$write("</span>\n</",919),this.__$write(containerElement,920),this.__$write(">\n",920)),amopInformation.orderId&&(this.__$write("\n<",924),this.__$write(containerElement,924),this.__$write(' class="amop-order-id">\n<span class="amop-order-id-label">',924),this.__$write(_i18n.getLabel("tx_pltg_text_AMOP_order_id"),925),this.__$write('</span>\n<span class="amop-order-id-value bold">',925),this.__$write(amopInformation.orderId,926),this.__$write("</span>\n</",926),this.__$write(containerElement,927),this.__$write(">\n",927)))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printAMOPInformation",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printASNInformation:function(paymentInformation,containerElement){try{with(this)paymentInformation&&"ASN"===paymentInformation.paymentTypeCode&&paymentInformation.asnConfirmation&&(asnInformation=paymentInformation.asnConfirmation,this.__$write("\n<",943),this.__$write(containerElement,943),this.__$write(' class="amop-biller-code">\n<span>',943),this.__$write(_i18n.getLabel("tx_pltg_pattern_AMOP_biller_code"),944),this.__$write('</span>\n<span class="bold highlight">',944),this.__$write(asnInformation.bankCode,945),this.__$write("</span>\n</",945),this.__$write(containerElement,946),this.__$write(">\n\n",946),asnInformation.paymentReference&&(this.__$write("\n<",949),this.__$write(containerElement,949),this.__$write(' class="amop-transaction-number">\n<span>',949),this.__$write(_i18n.getStringFromPattern("tx_pltg_pattern_AMOP_transaction_number",[asnInformation.bankCode]),950),this.__$write('</span>\n<span class="bold highlight">',950),this.__$write(asnInformation.paymentReference,951),this.__$write("</span>\n</",951),this.__$write(containerElement,952),this.__$write(">\n",952)))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printASNInformation",__filename,this["aria:currentLineNumber"]],_ex)}},macro_payNowButton:function(config,scope,thisScope,noIcon){try{with(this)isPayNow(config)&&(this.__$write('\n<button type="button" class="plnext-widget-btn btn btn-primary btn btn-primary pay-now-btn" ',960),this.__$statementOnEvent("click",this.$normCallback({fn:"submitPayNow",scope:scope}),960),this.__$write(">\n",961),noIcon||this.__$write('\n<i class="icon icon-left icon-plane col-xs-4 padding-right" aria-hidden="true"></i>\n',963),this.__$write("\n<span>",965),this.__$write(_stringUtils.toProperCase(_i18n.getLabel("tx_pltg_text_PayNowButton")),965),this.__$write('</span>\n<i class="icon icon-right icon-caret-right icon" aria-hidden="true"></i>\n</button>\n',965))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["payNowButton",__filename,this["aria:currentLineNumber"]],_ex)}},macro_travellerName:function(identityInformation){try{with(this)this.__$write('\n\n<div class="traveller-name"><span class="bold">\n',975),null!=identityInformation.titleName&&this.__$write(aria.utils.String.capitalize(identityInformation.titleName.toLowerCase())+" ",978),null!=identityInformation.firstName&&this.__$write(aria.utils.String.capitalize(identityInformation.firstName.toLowerCase())+" ",981),null!=identityInformation.lastName&&this.__$write(aria.utils.String.capitalize(identityInformation.lastName.toLowerCase()),984),this.__$write("\n</span></div>\n\n",986)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["travellerName",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printTTTEmd:function(reservationInfo,travellerIndex){try{with(this){this.__$write('\n<div class="timetothink-emd">\n<span class="emd-ticket-number">\n',994);for(var t=0;t<reservationInfo.timeToThink.tickets[travellerIndex].tickets.length;t++)this.__$write(reservationInfo.timeToThink.tickets[travellerIndex].tickets[t],997),t<reservationInfo.timeToThink.tickets[travellerIndex].tickets.length-1&&this.__$write(", ",998);this.__$write("\n</span>\n</div>\n",1e3)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printTTTEmd",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printTTTDetails:function(containerElement,reservationInfo){try{with(this){this.__$write("\n<",1009),this.__$write(containerElement,1009),this.__$write(">\n<span>",1009),this.__$write(_i18n.getLabel("tx_pltg_text_ReservationBookingStatus"),1010),this.__$write('</span>\n<span class="bold no-wrap-text timetothink-status">',1010),this.__$write(_i18n.getLabel("tx_pltg_conf_ttt_status"),1011),this.__$write("</span>\n</",1011),this.__$write(containerElement,1012),this.__$write(">\n<",1012),this.__$write(containerElement,1013),this.__$write(">\n",1013);var tttAmount=_commonReservationDetailsUtils.getTTTAmount(reservationInfo);this.__$write("\n<span>",1015),this.__$write(_i18n.getLabel("tx_pltg_text_ReservationTotalPaid"),1015),this.__$write('</span>\n<span class="bold no-wrap-text timetothink-amount">',1015),this.__$write(_priceUtils.formatCurrency(tttAmount.amount,tttAmount.currency),1016),this.__$write("</span>\n</",1016),this.__$write(containerElement,1017),this.__$write(">\n",1017)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printTTTDetails",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printTotalAmountOfBooking:function(config,constants,reservationInfo,price,containerElement){try{with(this){var totalRemainingAmount=getTotalAmoutRemaining(config,constants,reservationInfo,price);!price.totalAmount||config.hideFarePrice||config.hidePrices||(this.__$write("\n<",1027),this.__$write(containerElement,1027),this.__$write(' class="reservation-amount">\n\n',1027),isTimeToThinkSelected(reservationInfo.timeToThink)&&config.pendingPNR?(this.__$write("\n<span>",1030),this.__$write(_i18n.getLabel("tx_pltg_text_ReservationTotalRemaining"),1030),this.__$write("</span>\n",1030)):_commonReservationDetailsUtils.isRebookFlow(config,constants)?(this.__$write("\n<span>",1032),this.__$write(_i18n.getLabel("tx_pltg_text_ReservationTotalFlightChange"),1032),this.__$write("</span>\n",1032)):(this.__$write("\n<span>",1034),this.__$write(_i18n.getLabel("tx_pltg_text_ReservationTotalAmount"),1034),this.__$write("</span>\n",1034)),this.__$write("\n<span>\n",1036),price.dccMcp&&price.dccMcp.amount>0&&config.flowType===constants.FLOW_TYPE_STANDARD?(this.__$write('\n<span class="bold no-wrap-text reservation-amount-value">\n',1038),this.__$write(price.dccMcp.currency.code,1039),this.__$write(" ",1039),this.__$write(price.dccMcp.amount,1039),this.__$write("\n</span>\n<span class=\"no-wrap-text reservation-amount-value\">\n<bdo dir='ltr'>(",1040),this.__$write(price.currency.code,1042),this.__$write(" ",1042),this.__$write(totalRemainingAmount,1042),this.__$write(")</bdo>\n</span>\n",1042)):totalRemainingAmount>=0&&(this.__$write('\n<span class="bold no-wrap-text reservation-amount-value">\n',1045),this.__$write(_priceUtils.formatCurrency(totalRemainingAmount,price.currency),1046),this.__$write("\n</span>\n",1047)),price.milesAndCash&&price.milesAndCash.milesCost>0&&!price.milesAndCash.isAirMilesInfoUnavailable&&(this.__$write('\n<span class="uppercase bold no-wrap-text reservation-amount-value miles-amount-value">\n',1050),totalRemainingAmount>0?this.__$write(_priceUtils.formatTotalMiles(price.milesAndCash.milesCost),1052):this.__$write(_priceUtils.formatMilesWithHTML(price.milesAndCash.milesCost),1054),this.__$write("\n</span>\n",1056)),this.__$write("\n</span>\n</",1058),this.__$write(containerElement,1059),this.__$write(">\n",1059)),price.totalAmount&&price.totalAmount.convertedAmount>0&&this.macro_displayConvertedAmount(price,containerElement)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printTotalAmountOfBooking",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayConvertedAmount:function(price,containerElement){try{with(this)this.__$write("\n<",1070),this.__$write(containerElement,1070),this.__$write(' class="reservation-converted-amount">\n<span>',1070),this.__$write(_i18n.getLabel("tx_pltg_text_converted_ReservationTotalAmount"),1071),this.__$write('</span>\n<span class="bold no-wrap-text">',1071),this.__$write(_priceUtils.formatCurrency(price.totalAmount.convertedAmount,price.totalAmount.convertedCurrency),1072),this.__$write("</span>\n</",1072),this.__$write(containerElement,1073),this.__$write(">\n",1073)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayConvertedAmount",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printTotalPaidOrRefunded:function(config,constants,price){try{with(this)if(_commonReservationDetailsUtils.isRebookFlow(config,constants)&&!config.hideFarePrice&&!config.hidePrices){var balance=calculateBalance(price);this.__$write('\n<li class="atc-reservation-amount">\n',1083),0>balance?(this.__$write("\n<span>",1085),this.__$write(_i18n.getLabel("tx_pltg_text_ReservationTotalToBeRefunded"),1085),this.__$write('</span>\n<span class="bold no-wrap-text reservation-amount-value">',1085),this.__$write(_priceUtils.formatCurrency(-balance,price.currency),1086),this.__$write("</span>\n",1086)):(this.__$write("\n<span>",1088),this.__$write(_i18n.getLabel("tx_pltg_text_ReservationTotalPaid"),1088),this.__$write('</span>\n<span class="bold no-wrap-text reservation-amount-value">',1088),this.__$write(_priceUtils.formatCurrency(balance,price.currency),1089),this.__$write("</span>\n",1089)),this.__$write("\n</li>\n",1091)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printTotalPaidOrRefunded",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printWaitlistMessage:function(){try{with(this)this.__$write('\n<p class="waitlist">',1096),this.__$write(_i18n.getLabel("tx_pltg_text_waitlist_on_hold"),1096),this.__$write("</p>\n",1096)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printWaitlistMessage",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printRail:function(traveller,scope){try{with(this){var travellerPickupNumberList=getTravellerPickupNumberList(scope.data.reservationInfo.listRailPickupNumber,traveller.travellerId);if(travellerPickupNumberList.length>0){this.__$write('\n<div class="rail-pickup-number-list-panel">\n<i class="icon-train" aria-hidden="true"></i>\n<span class="rail-pickup-number-list-label">',1102),this.__$write(_i18n.getLabel("tx_pltg_text_RailPickupNumbers"),1104),this.__$write(":</span>\n",1104);for(var k=0,l=travellerPickupNumberList.length;l>k;k++)this.macro_railPickupNumber(travellerPickupNumberList[k]);this.__$write("\n</div>\n",1108)}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printRail",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printWaitlistAlreadyPaidMessage:function(listItinerary,reservationInfo,config){try{with(this)isWaitlistedPaid(listItinerary,config)&&(this.__$write('\n<div class="waitlist-paid">\n<h3 class="bold">',1117),this.__$write(_i18n.getLabel("tx_pltg_text_waitlist_booking_title"),1118),this.__$write("</h3>\n<p>",1118),this.__$write(this.getWaitlistPaymentDetailsMessage(reservationInfo,config),1119),this.__$write('</p>\n<div class="bold">',1119),this.__$write(_i18n.getLabel("tx_pltg_text_waitlist_refund_instruction_title"),1120),this.__$write("</div>\n<p>",1120),this.__$write(_i18n.getLabel("tx_pltg_text_waitlist_refund_instruction_text"),1121),this.__$write("</p>\n</div>\n",1121))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printWaitlistAlreadyPaidMessage",__filename,this["aria:currentLineNumber"]],_ex)}},macro_railPickupNumber:function(pickupNumberInfo){try{with(this){this.__$write('\n<div class="rail-pickup-number-panel">\n',1130);var departureDate=new Date(pickupNumberInfo.departureDate);this.__$write('\n<span class="rail-pickup-number">',1132),this.__$write(pickupNumberInfo.pickupNumber,1132),this.__$write("</span>, ",1132),this.__$write(_dateUtils.formatDateTime(departureDate,_dateUtils.FORMATS.FULL_DATE_FORMAT_2),1132),this.__$write("\n</div>\n",1133)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["railPickupNumber",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={boundDetails:"plnextv2.utils.macroLibs.boundDetails.desktop.views.DBoundDetailsView",externalLink:"plnextv2.utils.macroLibs.externalLink.desktop.view.DExternalLinkView",airlineRecLocLib:"plnextv2.utils.macroLibs.airlineRecLoc.AirlineRecordLocatorView",buttonDisplay:"plnextv2.utils.macroLibs.displayButtons.desktop.views.DReservationButtonsView"},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.commonReservationDetails.views.CommonReservationDetailsViewScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/commonReservationDetails/views/CommonReservationDetailsViewScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.commonReservationDetails.views.CommonReservationDetailsViewScript",$dependencies:["plnextv2.utils.BootstrapUtils","plnextv2.utils.PriceUtils","plnextv2.utils.CurrencyUtils","plnextv2.utils.StringUtils","plnextv2.utils.FocusUtils","plnextv2.utils.CommonReservationDetailsUtils","plnextv2.utils.context.AppContext","plnextv2.utils.GlobalLists","plnextv2.utils.FlightsUtils","plnextv2.utils.BookingConfirmationUtils","plnextv2.utils.DeviceUtils"],$statics:{CITIES_SEPARATOR:"-",SEGMENTS_SEPARATOR:", ",ASSOCIATED_SEGMENTS_START_DELIMITER:"(",ASSOCIATED_SEGMENTS_END_DELIMITER:")",INFANT_PAX_CODE:"INF",PConditionsClassPathDesktop:"plnextv2.components.purchaseConditions.desktop.views.DPurchaseConditionsPopupView",PConditionsClassPathTablet:"plnextv2.components.purchaseConditions.tablet.views.TPurchaseConditionsPopupView",PConditionsClassPathMobile:"plnextv2.components.purchaseConditions.mobile.views.MPurchaseConditionsPopupView",MiniRulesClassPathDesktop:"plnextv2.components.miniRules.desktop.views.DMiniRulesView",MiniRulesClassPathTablet:"plnextv2.components.miniRules.tablet.views.TMiniRulesView",MiniRulesClassPathMobile:"plnextv2.components.miniRules.mobile.views.MMiniRulesView",bsGridClass:{installmentText:{cols:{xs:24}},reservationMenu:{cols:{xs:24,sm:6}}},AMOP_CUSTOM_PARAMS_LABEL_PREFIX:"tx_pltg_text_AMOP_custom_params.",PNRD_PAGES:["CONF","MCONF","RCONF","RTPL"]},$constructor:function(){this._globalLists=plnextv2.utils.GlobalLists,this._i18n=plnextv2.utils.I18n,this._dateUtils=plnextv2.utils.DateUtils,this._stringUtils=plnextv2.utils.StringUtils,this._commonReservationDetailsUtils=plnextv2.utils.CommonReservationDetailsUtils,this._priceUtils=plnextv2.utils.PriceUtils,this._flightsUtils=plnextv2.utils.FlightsUtils,this._bookingConfirmationUtils=plnextv2.utils.BookingConfirmationUtils,this._deviceUtils=plnextv2.utils.DeviceUtils},$prototype:{getFormatteAssociatedSegments:function(e,t){var i=this.getAssociatedSegmentLabels(e,t);return this.ASSOCIATED_SEGMENTS_START_DELIMITER+i.join(this.SEGMENTS_SEPARATOR)+this.ASSOCIATED_SEGMENTS_END_DELIMITER},getAssociatedSegmentLabels:function(e,t){for(var i,n=[],a=this.getAssociatedSegments(e,t),s=0;s<a.length;s++)i=a[s],n.push(i.beginLocation.cityName+this.CITIES_SEPARATOR+i.endLocation.cityName);return n},getAssociatedSegments:function(e,t){for(var i,n,a=[],s=0;s<e.listSegmentId.length;s++)n=e.listSegmentId[s],i=this.getSegmentById(n,t),a.push(i);return a.sort(function(e,t){return e.lineNumber-t.lineNumber})},getSegmentById:function(e,t){for(var i,n=0;n<t.length;n++){i=t[n].listSegment,aria.utils.Json.removeMetadata(i);for(var a=0;a<i.length;a++)if(i[a]&&e===i[a].id.toString())return i[a]}},eTicketKeydown:function(e,t){e.keyCode===e.KC_SPACE&&(e.preventDefault(),this.toggleTicketInfo(e,t))},toggleTicketInfo:function(e,t){var i=this.$getElementById("iIconRight"+t),n=this.$getElementById("iIconDown"+t),a=this.$getElementById("divTktInfo"+t),s=this.$getElementById("ticketLink"+t);n.classList.contains("hidden")?(n.classList.remove("hidden"),i.classList.add("hidden"),a.classList.remove("hidden"),s.setAttribute("aria-expanded",!0)):(n.classList.add("hidden"),i.classList.remove("hidden"),a.classList.add("hidden"),s.setAttribute("aria-expanded",!1))},comparePaxTypes:function(e,t){return t?this.INFANT_PAX_CODE===e:this.INFANT_PAX_CODE!==e},isServicingFlow:function(e,t){return e.flowType===t.FLOW_TYPE_SERVICING},hasPaymentProviderName:function(e){return"CC"===e.paymentTypeCode&&null!=this.getCCCompanyCode(e)||null!=e.paymentName},getCCCompanyCode:function(e){if(e.lastCCUsedForPayment&&e.lastCCUsedForPayment.companyCode)return e.lastCCUsedForPayment.companyCode;var t=e.creditCardInformation;if(t&&t[0])for(var i=0;i<t.length;i++){var n=t[i];if(n.creditCardId&&n.companyCode)return n.companyCode}return null},getBsGridClass:function(e){return plnextv2.utils.BootstrapUtils.getBsGridClass(this.bsGridClass,e)},isPnrAlreadyPaid:function(e){return e&&e.paymentTypeCode&&"MS"!==e.paymentTypeCode},isFrequentFlyerNumberAvailable:function(e){return this._bookingConfirmationUtils.isFrequentFlyerNumberAvailable(e)},isTimeToThinkSelected:function(e){return e&&e.isSelected},isTimeToThinkEmdAvailable:function(e,t){return t&&t.isSelected&&t.tickets[e]&&t.tickets[e].tickets.length>0},getApcAmount:function(e,t){var i=null,n=this.getTotalCollectBalance(e),a=t?t:{};return i=null!=n?this.getTotalCollectBalanceInTargetedCurrency(n,a):e&&e.totalAmount&&e.totalAmount.convertedAmount>0?e.totalAmount.convertedAmount:a.TargetCurrencyAmount},getTotalCollectBalance:function(e){var t=null;return e&&e.totalCollectBalance&&(t=e.totalCollectBalance.amount),t},getTotalCollectBalanceInTargetedCurrency:function(e,t){return null!=e?e*this.getTargetExchangeRate(t):0},getTargetExchangeRate:function(e){return e&&e.targetExchangeRate?e.targetExchangeRate:1},calculateBalance:function(e){if(null==e)return 0;var t=0;return e.totalCollectBalance&&(t+=e.totalCollectBalance.amount),e.totalRefund&&(t-=e.totalRefund.amount),t},getTotalAmoutRemaining:function(e,t,i,n){var a=n.totalAmount.amount;this._commonReservationDetailsUtils.isRebookFlow(e,t)&&(a=n.rebookingTotal.amount);var s=n.milesAndCash;return s&&s.isAirMilesInfoUnavailable&&(s.milesAmount&&s.milesAmount.amount&&(a+=s.milesAmount.amount),s.nonConvertedAmount&&s.nonConvertedAmount.amount&&(a+=s.nonConvertedAmount.amount)),a},isWaitlisted:function(e){return this._flightsUtils.hasWaitlistSegment(e)},isWaitlistedPaid:function(e,t){return this.isWaitlisted(e)&&t.waitlistGetPaymentDetails},getAmount:function(e,t){var i;for(var n in t)if(t.hasOwnProperty(n)&&t[n].type===e)return i=t[n].amount;return i},isPayNow:function(e){return this._bookingConfirmationUtils.isPayNow(e)},getTravellerPickupNumberList:function(e,t){for(var i=[],n=0,a=e.length;a>n;n++){var s=e[n];s.travellerId.toString()===t.toString()&&i.push(s)}return i},getApcTotalAmount:function(e){var t=this.getTotalCollectBalance(e);return null==t&&(t=this.getTotalAmount(e)),t},getTotalAmount:function(e){var t=null;return e&&e.totalAmount&&(t=e.totalAmount.amount),t},getConfirmTTTMessage:function(e){var t=this._dateUtils.formatDateTime(e,this._dateUtils.FORMATS.FULL_DATE_TIME_FORMAT,!0);return this._i18n.getStringFromPattern("tx_pltg_conf_ttt_message",[t])},getCCAccountNumber:function(e){if(e.lastCCUsedForPayment&&e.lastCCUsedForPayment.accountNumber)return e.lastCCUsedForPayment.accountNumber;for(var t=e.creditCardInformation,i=t.length-1;i>=0;i--)if("GUAR_CAR_1"!==t[i].creditCardId&&t[i].accountNumber)return t[i].accountNumber},getAMOPCustomParamsLabel:function(e){return e?this._i18n.getLabel(this.AMOP_CUSTOM_PARAMS_LABEL_PREFIX+e):""},getPConditionPath:function(){var e=this.PConditionsClassPathDesktop;return this._deviceUtils.isPageDeviceTypeTablet()?e=this.PConditionsClassPathTablet:this._deviceUtils.isPageDeviceTypeMobile()&&(e=this.PConditionsClassPathMobile),e},getFareConditionsTemplate:function(){var e=this.MiniRulesClassPathDesktop;return this._deviceUtils.isPageDeviceTypeTablet()?e=this.MiniRulesClassPathTablet:this._deviceUtils.isPageDeviceTypeMobile()&&(e=this.MiniRulesClassPathMobile),e},isTabletOrMobileAndPnrd:function(){for(var e=plnextv2.utils.context.AppContext.getPageData(),t=!1,i=0;i<this.PNRD_PAGES.length;i++)if(e.config[this.PNRD_PAGES[i]]){t=!0;break}return(this._deviceUtils.isPageDeviceTypeMobile()||this._deviceUtils.isPageDeviceTypeTablet())&&t},getWaitlistPaymentDetailsMessage:function(e,t){var i=this._dateUtils.formatDateTime(new Date(e.creationDate),this._dateUtils.FORMATS.SHORT_DATE_FORMAT,!0),n="";return e.paymentInformation&&(n=t.listCreditCard[this.getCCCompanyCode(e.paymentInformation)].name+" "+this.getCCAccountNumber(e.paymentInformation.creditCardInformation)),this._i18n.getStringFromPattern("tx_pltg_pattern_waitlist_payment_info",[n,i])},onCloseFareComparison:function(){plnextv2.utils.context.AppContext.getEventBus().publish("analytics:event:closeFareConditionsModal",this),plnextv2.utils.context.AppContext.getEventBus().publish("PAGE:minirules:close",this)},isShoppingBasketFlowAndPayWithMiles:function(e,t){return this._bookingConfirmationUtils.isShoppingBasketFlowAndPayWithMiles(e,t)},shouldDisplayETicketAsToggleLink:function(e,t){return e.confirmationNumber||e.issueDate||e.airlineCode||e.vatNumber||t&&t.tourCode}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/creditCard/CreditCardViewLib.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/formComponent/FormMacro.tml"),require("plnextv2/utils/macroLibs/creditCard/CreditCardViewLibScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.creditCard.CreditCardViewLib",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$CreditCardViewLibScript.constructor.call(this)},$destructor:function(){this.$CreditCardViewLibScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_printPayByCashDisclaimer:function(cssClasses){try{with(this)this.__$write('\n<div class="area">\n<div class="row">\n<span class="',24),this.__$write(cssClasses,26),this.__$write('" /}>\n',26),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_TimeToThink_PayByCash"),27),this.__$write("\n</span>\n</div>\n</div>\n",28)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printPayByCashDisclaimer",__filename,this["aria:currentLineNumber"]],_ex)}},macro_whatIsThisTooltip:function(){try{with(this)this.__$write('\n<span style="color: #056ccf; cursor: default;" class="no-wrap-text">\n<a href="javascript:;">\n<span style="font-size: 0.9em;">\n',37),this.__$write(plnextv2.utils.StringUtils.capitaliseFirstLetter(plnextv2.utils.I18n.getLabel("tx_pltg_text_WhatIsThis")),40),this.__$write('\n</span>\n<span class="icon-info-sign" style="text-decoration:none;" aria-hidden="true"></span>\n</a>\n</span>\n',41)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["whatIsThisTooltip",__filename,this["aria:currentLineNumber"]],_ex)}},macro_whatIsThis:function(){try{with(this)this.__$write('\n<span style="color: #056ccf;" class="no-wrap-text">\n<a href="javascript:;">\n<span style="font-size: 0.9em;">\n',51),this.__$write(plnextv2.utils.StringUtils.capitaliseFirstLetter(plnextv2.utils.I18n.getLabel("tx_pltg_text_WhatIsThis")),54),this.__$write('\n</span>\n<span class="icon-info-sign" style="text-decoration:none;" aria-hidden="true"></span>\n</a>\n</span>\n\n',55)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["whatIsThis",__filename,this["aria:currentLineNumber"]],_ex)}},macro_whatIsThisCCNickname:function(){try{with(this){var message=plnextv2.utils.I18n.getLabel("tx_pltg_text_CreditCardWhatYouCallYourCard");this.__$write(plnextv2.utils.StringUtils.capitaliseFirstLetter(message),67)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["whatIsThisCCNickname",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printDateDescription:function(descriptionLabelKey,descriptionContainerId,fieldPlaceHolderKey,isMandatory){try{with(this)this.__$write('\n<span id="',75),this.__$write(descriptionContainerId,75),this.__$write('" class="sr-only">\n',75),this.__$write(plnextv2.utils.I18n.getLabel(descriptionLabelKey),76),isMandatory&&this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_MandatoryFieldIndicator"),78),this.__$write('\n</span>\n<span class="help-block" aria-hidden="true">',80),this.__$write(plnextv2.utils.I18n.getLabel(fieldPlaceHolderKey),81),this.__$write("</span>\n",81)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printDateDescription",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={formLib:"plnextv2.utils.formComponent.FormMacro"},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.creditCard.CreditCardViewLibScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/creditCard/CreditCardViewLibScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.creditCard.CreditCardViewLibScript",$constructor:function(){},$destructor:function(){},$prototype:{getCardNumberFormClass:function(e){return e?"credit-card-number-form-4x4":""},cleanErrorListeners:function(e){var t=aria.utils.Json.removeMetadata(e.widgets);for(i in t)if(t.hasOwnProperty(i)&&e.widgets[i].hasOwnProperty(i)){var n=e.widgets[i];if(n["aria:listener_errorCode"])for(j in n["aria:listener_errorCode"])if(n["aria:listener_errorCode"].hasOwnProperty(j)){var a=n["aria:listener_errorCode"][j];"#refreshFormError"===a.fn.displayName&&aria.utils.Json.removeAt(n["aria:listener_errorCode"],parseInt(j,10))}}},getHolderNameConfig:function(e){var t={widgetConfig:{attributes:{classList:["cardNumber"]}}};return e.checkHolderNameSize&&(t.widgetConfig.attributes.maxlength="29"),t},getSecurityCodeFeedbackClass:function(e){return e?"security-code-feedback-illegible":"security-code-feedback"},getSecurityCodeInputClass:function(e,t){var i="security-code-input";return e?i="securityCodeInputIllegible":aria.core.Browser.isIE&&t&&(i+=" security-code-ie"),i},setCCIconPaths:function(e,t,i){if(e){var n=e.options;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a].value,r=t.data.config.listCreditCardNames[s]?t.data.config.listCreditCardNames[s].logoUrl:"";n[a].iconPath=r||t.ccCommonLib.getCCIconPath(s,i)}}},getSecurityCCImage:function(e){switch(e){case"VI":case"CA":case"AX":case"JC":case"DC":return"SecurityImage-"+e;default:return""}},getCCIconPath:function(e,t){var i={VI:"card-visa.png",CA:"card-ms.png",AX:"card-amex.png",DC:"dinersClub.png",CASH:"card-cash.png",JC:"card-jcb.png"};return e&&i[e]?t+i[e]:void 0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/discountDetails/desktop/styles/DDiscountDetailsStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.discountDetails.desktop.styles.DDiscountDetailsStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write('\n\n.price-subtitle-initial,\n.price-subtitle-discounted {\ntext-transform: uppercase;\nfont-family: "Roboto Black";\nmargin: 0px;\nfont-size: 100%;\nwidth: 100%;\ndisplay: table;\n}\n\n.price-text-initial,\n.price-text-discounted {\ndisplay: table-cell;\nfloat: none;\n}\n\n.price-amount-initial,\n.price-amount-discounted {\ntext-align: right;\npadding-left: 5px;\ndisplay: table-cell;\nfloat: none;\n}\n\n.price-value-initial,\n.price-value-discounted {\nfont-size: 130%;\npadding-left: 5px;\nfloat: none;\n}\n\n.discount-reason-air-discount,\n#pricereview-container .discount-reason-air-discount,\n#pricereviewpopup-container .discount-reason-air-discount {\ncolor: ',23),this.__$write(this.$warning,58),this.__$write(";\nfont-family: ",58),this.__$write(this.$boldFont,59),this.__$write(";\nfont-size: 100%;\ntext-align: right;\nmargin-left: 0;\nmargin-right: 0;\ntext-transform: initial;\n}\n\n.discount-reason-air-discount .icon {\npadding-right: 5px;\n}\n\n.price-value-initial.line-through,\n.price-currency-initial.line-through {\nposition: relative;\ntext-decoration: line-through;\n}\n\n.air-discount-initial {\nfont-size: 100%;\nfont-family: ",59),this.__$write(this.$normalFont,79),this.__$write(";\n}\n\n.air-discount-initial.line-through {\ntext-decoration-color:  ",79),this.__$write(this.$warning,83),this.__$write(";\n}\n\n.air-discount-initial .icon {\ncolor: ",83),this.__$write(this.$warning,87),this.__$write(";\n}\n\n",87)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/discountDetails/desktop/views/DDiscountDetailsView.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/PriceBeanUtils.js"),require("plnextv2/utils/BootstrapUtils.js"),require("plnextv2/utils/PriceUtils.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/macroLibs/discountDetails/desktop/views/DDiscountDetailsViewScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.discountDetails.desktop.views.DDiscountDetailsView",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$DDiscountDetailsViewScript.constructor.call(this)},$destructor:function(){this.$DDiscountDetailsViewScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_displayDiscountedPrice:function(priceBeanUtils,isDisplayPerPassenger,currency,moduleName,cssClass){try{with(this)if(priceBeanUtils.isDiscountEnabled()){var initialPrice=calculateInitialPrice(priceBeanUtils,isDisplayPerPassenger),discountedPrice=priceBeanUtils.getTotalAmount(isDisplayPerPassenger).amount,ariaHiddenProperty=!1;this.macro_displayPriceRow(moduleName,"initial line-through","tx_pltg_text_InitialPrice",initialPrice,currency,cssClass,ariaHiddenProperty),this.macro_displayPriceRow(moduleName,"discounted","tx_pltg_text_DiscountedPrice",discountedPrice,currency,cssClass,ariaHiddenProperty)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayDiscountedPrice",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayPriceRow:function(moduleName,priceType,label,amount,currency,cssClass,ariaHiddenProperty,showDiscountIcon){try{with(this)this.__$write('\n<h3 class="',47),this.__$write(moduleName,47),this.__$write("-subtitle price-subtitle-",47),this.__$write(priceType,47),this.__$write(" ",47),this.__$write(cssClass,47),this.__$write('" aria-hidden="',47),this.__$write(ariaHiddenProperty,47),this.__$write('">\n',47),label&&(this.__$write('\n<span class="',49),this.__$write(moduleName,49),this.__$write("-price-text price-text-",49),this.__$write(priceType,49),this.__$write('">\n',49),this.__$write(plnextv2.utils.I18n.getLabel(label),50),this.__$write("\n</span>\n",51)),this.__$write('\n<div class="',53),this.__$write(moduleName,53),this.__$write("-price-amount price-amount-",53),this.__$write(priceType,53),this.__$write('">\n',53),showDiscountIcon&&this.macro_showDiscountIcon(),this.__$write(plnextv2.utils.PriceUtils.formatCurrency(amount,currency,moduleName+"-price-currency price-currency-"+priceType,moduleName+"-price-amount price-value-"+priceType),57),this.__$write("\n</div>\n</h3>\n",63)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPriceRow",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayAirDiscountPrice:function(priceBeanUtils,isDisplayPerPassenger,currency,moduleName,cssClass,showReason,useCurrencyConversion){try{with(this){var discountedPrice=useCurrencyConversion?priceBeanUtils._priceBean.dccMcp:{amount:priceBeanUtils.getTotalAmount(isDisplayPerPassenger).amount,currency:currency},initialPrice=this.calculateInitialPriceForAirDiscount(priceBeanUtils,currency,isDisplayPerPassenger,useCurrencyConversion),discountReasons=showReason?this._discountUtils.getAirDiscountReason(priceBeanUtils.getPriceBean(),priceBeanUtils.getDiscountsForAllPax()):null,ariaHiddenProperty=!0;cssClass+=useCurrencyConversion?" price-converted":"",this.macro_displayDiscountReasons(discountReasons,cssClass),this.macro_displayPriceRow(moduleName,"initial line-through air-discount-initial","",initialPrice.amount,initialPrice.currency,cssClass,ariaHiddenProperty,!showReason),this.macro_displayPriceRow(moduleName,"discounted",getTotalLabelKey(moduleName,useCurrencyConversion),discountedPrice.amount,discountedPrice.currency,cssClass,ariaHiddenProperty),ariaHiddenProperty&&this.macro_airDiscountPriceScreenreader(initialPrice.amount,discountedPrice.amount,discountedPrice.currency)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayAirDiscountPrice",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayDiscountReasons:function(discountReasons,cssClass){try{with(this)discountReasons&&(this.__$write('\n<h3 class="discount-reason-air-discount ',105),this.__$write(cssClass,105),this.__$write('">\n',105),this.macro_showDiscountIcon(),this.__$write(discountReasons,106),this.__$write("\n</h3>\n",107))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayDiscountReasons",__filename,this["aria:currentLineNumber"]],_ex)}},macro_showDiscountIcon:function(){try{with(this)this.__$write('\n<i class="icon icon-discount" aria-hidden="true"></i>\n',112)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["showDiscountIcon",__filename,this["aria:currentLineNumber"]],_ex)}},macro_airDiscountPriceScreenreader:function(initialPrice,discountedPrice,currency){try{with(this)this.__$write('\n<span class="sr-only not-focusable-by-sr">',116),this.__$write(getAriaLabelForAirDiscountPrice(initialPrice,discountedPrice,currency),116),this.__$write("</span>\n",116)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["airDiscountPriceScreenreader",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.discountDetails.desktop.views.DDiscountDetailsViewScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/discountDetails/desktop/views/DDiscountDetailsViewScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.discountDetails.desktop.views.DDiscountDetailsViewScript",$dependencies:["plnextv2.utils.PriceBeanUtils","plnextv2.utils.I18n","plnextv2.utils.PriceUtils","plnextv2.utils.DiscountUtils","plnextv2.utils.storage.SessionStorageManager"],$constructor:function(){this._i18n=plnextv2.utils.I18n,this._discountUtils=plnextv2.utils.DiscountUtils,this._priceUtils=plnextv2.utils.PriceUtils,this._storageManager=plnextv2.utils.storage.SessionStorageManager},$prototype:{calculateInitialPrice:function(e,t){var i=e.getTotalAmount(t).amount;if(e.isDiscountEnabled()){t||(i+=e.getTotalDiscount().amount);var n=e.getDiscount(t);n&&n.includedInBaseFare&&(i+=n.discountAmount.amount)}return i},calculateInitialPriceForAirDiscount:function(e,t,i,n){var a={amount:e.getTotalAmount(i).amount,currency:t};if(e.isDiscountReasonEnabled()&&(a.amount=e.getTotalAmountWithoutDiscountApplied(i)),n){var s=this._storageManager.get(this._priceUtils.MCP_DATA,this._priceUtils.MCP_CONTEXT);s&&(a.amount=(a.amount*s.amount).toFixed(s.conversionDecimals),a.currency=s.currency)}return a},containsPercentageDiscount:function(e,t){return t?e&&aria.utils.Type.isArray(e.recommendations)&&!aria.utils.Array.isEmpty(e.recommendations)&&e.recommendations[0].recoAmount&&e.recommendations[0].recoAmount.alreadyIncludedDiscount&&1===e.recommendations[0].recoAmount.alreadyIncludedDiscount.code&&e.recommendations[0].recoAmount.alreadyIncludedDiscount.value>0:e&&aria.utils.Type.isArray(e.recommendations)&&!aria.utils.Array.isEmpty(e.recommendations)&&aria.utils.Type.isArray(e.recommendations[0].recoAmountList)&&!aria.utils.Array.isEmpty(e.recommendations[0].recoAmountList)&&aria.utils.Type.isArray(e.recommendations[0].recoAmountList[0].recoAmounts)&&!aria.utils.Array.isEmpty(e.recommendations[0].recoAmountList[0].recoAmounts)&&e.recommendations[0].recoAmountList[0].recoAmounts[0].recoAmount&&e.recommendations[0].recoAmountList[0].recoAmounts[0].recoAmount.alreadyIncludedDiscount&&1===e.recommendations[0].recoAmountList[0].recoAmounts[0].recoAmount.alreadyIncludedDiscount.code&&e.recommendations[0].recoAmountList[0].recoAmounts[0].recoAmount.alreadyIncludedDiscount.value>0},retrieveDiscountReasons:function(e,t){if(null==e)return"";var i="",n=e.getDiscountReasons(t);return n&&(i=n.discountReasons),i},getAriaLabelForAirDiscountPrice:function(e,t,i){var n="";if(e&&t&&i){var a=this._priceUtils.formatCurrency(e,i),s=this._priceUtils.formatCurrency(t,i);n+=this._i18n.getStringFromPattern("tx_pltg_pattern_AriaLabelAirDiscountPrice",[a,s])}return aria.utils.String.escapeForHTML(n)},getTotalLabelKey:function(e,t){var i="tx_pltg_text_Total";return t&&(i="tx_pltg_text_Total_Topay","horizontal-tripsummary"===e&&(i="tx_pltg_text_dccmcp_convertedTotal")),i}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/displayButtons/desktop/views/DReservationButtonsView.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/macroLibs/uiWidgets/UIWidgets.tml"),require("plnextv2/utils/macroLibs/displayButtons/desktop/views/DReservationButtonsViewScript.js"),require("plnextv2/utils/widgets/plnextLib/dropdown/core/Dropdown.js"),require("plnextv2/utils/widgets/plnextLib/dialog/core/Dialog.js"),require("ariatemplates/html/Template.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.displayButtons.desktop.views.DReservationButtonsView",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$DReservationButtonsViewScript.constructor.call(this)},$destructor:function(){this.$DReservationButtonsViewScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_displayModifyPassengerButton:function(config,requiredParams){try{with(this)allowModifyPassengerButton(config)&&(requiredParams.isFooterRequired?(this.__$write('\n<footer class="travellers-panel-footer panel-footer">\n\n',39),this.macro_renderButton("footer hidden-print","btn btn-default btn-secondary",requiredParams,"icon icon-adult",null,"tx_pltg_text_modifyPassengers",!1,null),this.__$write("\n</footer>\n",50)):this.macro_renderButton("footer hidden-print","btn btn-default btn-secondary",requiredParams,"icon icon-adult",null,"tx_pltg_text_modifyPassengers",!1,null))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayModifyPassengerButton",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayUpgradeFlights:function(config,requiredParams,upgradeData){try{with(this)allowUpgradeFlightsButton(config,upgradeData)&&(requiredParams.isFooterRequired?(this.__$write('\n<footer class="bounds bounds-panel-footer panel-footer">\n\n',82),this.macro_renderUpgradeFlightsButton("footer hidden-print","plnext-widget-btn btn btn-default btn-secondary upgrade-flight",requiredParams,"icon icon-upload",""),this.__$write("\n</footer>\n",85)):this.macro_renderUpgradeFlightsButton("footer hidden-print","plnext-widget-btn btn btn-default btn-secondary upgrade-flight",requiredParams,"icon icon-upload",""))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayUpgradeFlights",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayModifyFlights:function(config,requiredParams){try{with(this)allowModifyFlightsButton(config)&&(requiredParams.isFooterRequired?(this.__$write('\n<footer class="bounds bounds-panel-footer panel-footer">\n\n',108),this.macro_renderModifyFlightsButton("footer hidden-print","btn btn-default btn-secondary",requiredParams,"dropdown-body","icon-plane"),this.__$write("\n</footer>\n",111)):this.macro_renderModifyFlightsButton("footer hidden-print","btn btn-default btn-secondary",requiredParams,"dropdown-body","icon-plane"))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayModifyFlights",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderUpgradeFlightsButton:function(divClassName,buttonClassName,callbackFunctionName,leftIconClassName,spanClassName,buttonText,rightIconClassName){try{with(this)buttonText||(buttonText=this._i18n.getLabel("tx_pltg_text_CashUpgrade")),this.__$write('\n<div class="',134),this.__$write(divClassName,134),this.__$write('">\n<button type="button" class="',134),this.__$write(buttonClassName,135),this.__$write('" ',135),this.__$statementOnEvent("click",this.$normCallback({fn:callbackFunctionName.fn,scope:callbackFunctionName.scope}),135),this.__$write(' >\n<i aria-hidden="true" class="',135),this.__$write(leftIconClassName,136),this.__$write(' upgrade-left-icon-button" title="',136),this.__$write(buttonText,136),this.__$write('" ></i>\n<span class="',136),this.__$write(spanClassName,137),this.__$write('">',137),this.__$write(buttonText,137),this.__$write("</span>\n",137),rightIconClassName&&(this.__$write('\n<i aria-hidden="true" class="',139),this.__$write(rightIconClassName,139),this.__$write(' upgrade-right-icon-button" title="',139),this.__$write(buttonText,139),this.__$write('" ></i>\n',139)),this.__$write("\n</button>\n</div>\n",141)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderUpgradeFlightsButton",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderModifyFlightsButton:function(divClassName,buttonClassName,callbackFunctionName,dropDownClassName,iconClassName){try{with(this)this.__$write('\n<div class="',155),this.__$write(divClassName,155),this.__$write('">\n',155),this.__$processWidgetMarkup("plnextv2.utils.widgets.PlnextLib","Dropdown",{id:"modify-flights-dropdown",label:_i18n.getLabel("tx_pltg_text_modifyFlights"),iconClass:iconClassName,buttonClass:buttonClassName,dropDownClass:dropDownClassName,options:callbackFunctionName.options},156),this.__$write("\n</div>\n",164)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderModifyFlightsButton",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayModifyFlightsATC:function(config,requiredParams,buttonConfig){try{with(this)allowModifyFlightsATCButton(config)&&(requiredParams.isFooterRequired&&this.__$write('\n<footer class="bounds bounds-panel-footer panel-footer">\n',188),this.macro_renderButton("footer hidden-print","",requiredParams,getButtonIcon(buttonConfig,"icon icon-plane"),getButtonIconPosition(buttonConfig,"left"),getButtonText(buttonConfig,"tx_pltg_text_modifyFlights"),!1,null,getButtonType(buttonConfig,"secondary")),requiredParams.isFooterRequired&&this.__$write("\n</footer>\n",203))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayModifyFlightsATC",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayCancelFlightsButton:function(config,requiredParams){try{with(this)if(allowCancelFlightButton(config)){var requiredLabelsForCancelFlights={titleText:"tx_pltg_text_CancelFlightsConfirm_Title",msgText:"tx_pltg_text_CancelFlightsConfirm_Text",btnTextOk:"tx_pltg_text_CancelFlightsConfirm_button_continue",btnTextCancel:"tx_pltg_text_CancelFlightsConfirm_button_stop"};if(requiredParams.isFooterRequired){var footerClass=config.isResponsiveReservationPanel?"panel-footer-responsive":"panel-footer";this.__$write('\n<footer class="',227),this.__$write(footerClass,227),this.__$write(' price-panel-footer">\n\n',227),this.macro_renderButton("footer hidden-print","",requiredParams,"icon icon-trash",null,"tx_pltg_text_removeFlights",!0,requiredLabelsForCancelFlights),this.__$write("\n</footer>\n",238)}else this.macro_renderButton("footer hidden-print","",requiredParams,"icon icon-trash",null,"tx_pltg_text_removeFlights",!0,requiredLabelsForCancelFlights)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayCancelFlightsButton",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayCancelBookingButton:function(config,requiredParams){try{with(this)if(allowCancelBookingButton(config)){var requiredLabelsForCancelBooking={titleText:"tx_pltg_text_CancelBookingConfirm_Title",msgText:"tx_pltg_text_CancelBookingConfirm_Text",btnTextOk:"tx_pltg_text_CancelBookingConfirm_button_continue",btnTextCancel:"tx_pltg_text_CancelBookingConfirm_button_stop"};if(requiredParams.isFooterRequired){var footerClass=config.isResponsiveReservationPanel?"panel-footer-responsive":"panel-footer";this.__$write('\n<footer class="',272),this.__$write(footerClass,272),this.__$write(' price-panel-footer">\n\n',272),this.macro_renderButton("footer hidden-print","",requiredParams,"icon icon-trash",null,"tx_pltg_text_removeFlights",!0,requiredLabelsForCancelBooking),this.__$write("\n</footer>\n",283)}else this.macro_renderButton("footer hidden-print","",requiredParams,"icon icon-trash",null,"tx_pltg_text_removeFlights",!0,requiredLabelsForCancelBooking)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayCancelBookingButton",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayCancelATCBooking:function(config,requiredParams){try{with(this)allowCancelBookingATCButton(config)&&(requiredParams.isFooterRequired?(this.__$write('\n<footer class="panel-footer price-panel-footer">\n\n<div class="atc-refund-description">',313),this.__$write(plnextv2.utils.I18n.getLabel(this.LABELS.CANCEL_BOOKING_DESC),315),this.__$write("</div>\n",315),this.macro_renderButton("footer hidden-print","atc-refund-button",requiredParams,"icon icon-trash",null,getATCCancelBookingLabel(config),!1,null),this.__$write("\n</footer>\n",325)):(this.__$write('\n\n<div class="atc-refund-description">',327),this.__$write(plnextv2.utils.I18n.getLabel(this.LABELS.CANCEL_BOOKING_DESC),328),this.__$write("</div>\n",328),this.macro_renderButton("footer hidden-print","atc-refund-button",requiredParams,"icon icon-trash",null,getATCCancelBookingLabel(config),!1,null)))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayCancelATCBooking",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderButton:function(divClassName,buttonClassName,callbackFunctionName,iconClass,iconPosition,labelName,isAllowCancelFlightOrBooking,requiredLabels,buttonType){try{with(this)this.__$write('\n<div class="',357),this.__$write(divClassName,357),this.__$write('">\n',357),this.uiWidget.macro_button({bind:null,text:plnextv2.utils.I18n.getLabel(labelName),type:buttonType||"secondary",noLeftIcon:"left"!=iconPosition,noRightIcon:"right"!=iconPosition,noIcons:!iconClass,onClick:{fn:callbackFunctionName.fn,scope:callbackFunctionName.scope,args:callbackFunctionName.args||{}},classList:{button:[buttonClassName],leftIcon:["left"===iconPosition?iconClass:""],rightIcon:["right"===iconPosition?iconClass:""]},attributes:{type:"button"}}),isAllowCancelFlightOrBooking&&this.macro_openConfirmDialog(requiredLabels.titleText,requiredLabels.msgText,requiredLabels.btnTextOk,requiredLabels.btnTextCancel,callbackFunctionName.thisScope,callbackFunctionName.confirmationDialogState),this.__$write("\n</div>\n",380)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderButton",__filename,this["aria:currentLineNumber"]],_ex)}},macro_openConfirmDialog:function(titleText,messageTxt,buttonTextOk,buttonTextCancel,scope,confirmationDialogState){try{with(this)this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","Dialog",{id:"fr-cancel-confirm-dialog",bind:{visible:{inside:confirmationDialogState,to:"cancelDialogOpen"}},closeOnMouseClick:!1,closeButton:!1,closeOnEscape:!1,bsGridClass:"col-xs-10"},390)&&(this.__$processWidgetMarkup("aria.html.HtmlLibrary","Template",{id:"fr-dialog",classpath:"plnextv2.components.common.confirmDialog.desktop.views.DConfirmationDialog",data:{parentData:data,dialogTitle:plnextv2.utils.I18n.getLabel(titleText),dialogMessage:plnextv2.utils.I18n.getLabel(messageTxt),continueButtonText:plnextv2.utils.I18n.getLabel(buttonTextOk),cancelButtonText:plnextv2.utils.I18n.getLabel(buttonTextCancel),callbackContinue:{fn:"confirmAction",scope:scope},callbackCancel:{fn:"cancelAction",scope:scope}}},402),this.__$endContainerWidget())}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["openConfirmDialog",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={uiWidget:"plnextv2.utils.macroLibs.uiWidgets.UIWidgets"},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.displayButtons.desktop.views.DReservationButtonsViewScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/displayButtons/desktop/views/DReservationButtonsViewScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.displayButtons.desktop.views.DReservationButtonsViewScript",$dependencies:["plnextv2.utils.StringResources","plnextv2.utils.I18n","plnextv2.utils.BootstrapUtils","plnextv2.utils.BookingConfirmationUtils","aria.core.IO"],$statics:{LABELS:{CANCEL_AND_REFUND:"tx_pltg_text_CancelAndRefund",CANCEL_BOOKING:"tx_pltg_text_cancelBooking",CANCEL_BOOKING_DESC:"tx_pltg_text_CancelBookingRefundDesc"}},$constructor:function(){this._stringResources=plnextv2.utils.StringResources,this._bookingConfirmationUtils=plnextv2.utils.BookingConfirmationUtils,this._i18n=plnextv2.utils.I18n,this._json=aria.utils.Json},$prototype:{allowCancelFlightButton:function(e){return this._bookingConfirmationUtils.allowCancelFlightButton(e)},allowCancelBookingButton:function(e){return this._bookingConfirmationUtils.allowCancelBookingButton(e)},allowModifyPassengerButton:function(e){return null!=e&&e.allowModifyPassengerButton?!0:!1},allowUpgradeFlightsButton:function(e,t){return e&&e.isEligibleToCashUpgrade?t&&t.isUpgradePossible:!1},allowModifyFlightsButton:function(e){return null!=e&&e.allowModifyFlightsButton?!0:!1},allowModifyFlightsATCButton:function(e){return null!=e&&e.allowModifyFlightsATCButton?!0:!1},allowCancelBookingATCButton:function(e){return null!=e&&e.allowCancelBookingATCButton?!0:!1},getATCCancelBookingLabel:function(e){var t=this.LABELS.CANCEL_BOOKING;return e.allowATCCancellationAndRefund?this.LABELS.CANCEL_AND_REFUND:t},getButtonIcon:function(e,t){return e?""===e.icon?null:e.icon||t:t},getButtonText:function(e,t){return e&&e.text||t},getButtonType:function(e,t){return e&&e.type||t},getButtonIconPosition:function(e,t){return e&&e.iconPosition||t}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/emailCollection/desktop/styles/DEmailCollectionStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.emailCollection.desktop.styles.DEmailCollectionStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n#email-collection {\nmargin-top:0;\n}\n\n.email-collection-title {\nmargin-top:0;\nfont-weight:",22),this.__$write(this.$bold,29),this.__$write(";\nfont-size: 130%;\n}\n\n.email-collection-input-panel {\nborder-left: thin solid ",29),this.__$write(this.$grayLight,34),this.__$write(";\n}\n\n.email-collection-desc-mandatory {\nmargin-top:10px;\n}\n\n\n@media(max-width: 767px) {\n\n.email-collection-input-panel {\nborder-top: thin solid ",34),this.__$write(this.$grayLight,45),this.__$write(";\nborder-left: 0;\npadding-top:10px;\nmargin-top:10px;\n}\n\n}\n\n",45)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/emailCollection/desktop/views/DEmailCollectionView.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/DateUtils.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/formComponent/FormMacro.tml"),require("plnextv2/utils/macroLibs/emailCollection/desktop/views/DEmailCollectionViewScript.js"),require("plnextv2/utils/widgets/plnextLib/message/core/Message.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.emailCollection.desktop.views.DEmailCollectionView",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$DEmailCollectionViewScript.constructor.call(this)},$destructor:function(){this.$DEmailCollectionViewScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_displayEmailCollection:function(options){try{with(this)if(options.config.displayCollectionPanel){var bsGrid=options.bsGrid,displayInputEmail=options.config.displayMailInput,panelTitle=this._i18n.getLabel(displayInputEmail?"tx_pltg_text_EmailMissing":"tx_pltg_text_EmailFormat"),widgets=options.form.widgets;this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","Message",{type:"info",id:"email-collection"},25)&&(this.__$write('\n\n<div class="row">\n<div class="email-collection-header col-xs-24">\n<h2 class="email-collection-title">\n',29),this.__$write(panelTitle,33),this.__$write('\n</h2>\n</div>\n</div>\n\n<div class="row">\n<div class="email-collection-panel-body col-xs-24">\n<div class="row">\n<div class="email-collection-legend-panel ',34),this.__$write(getBsGridClass(bsGrid,"emailCollectionLegend"),41),this.__$write('">\n<div class="email-collection-desc ',41),this.__$write(getBsGridClass(bsGrid,"emailCollectionDescription"),42),this.__$write('">\n',42),displayInputEmail?(this.__$write('\n<div class="email-collection-desc-text">\n',44),this.__$write(this._i18n.getLabel("tx_pltg_text_PleaseProvideEmail"),45),this.__$write('\n</div>\n<div class="email-collection-desc-mandatory">\n',46),this.__$write(this._i18n.getLabel("tx_pltg_text_MandatoryLegend"),48),this.__$write("\n</div>\n",49)):(this.__$write('\n\n<div class="email-collection-desc-text">\n',51),this.__$write(this._i18n.getStringFromPattern("tx_pltg_pattern_RefundEmail",[options.refundBean.refundConfEmail1]),53),this.__$write("\n</div>\n",54)),this.__$write('\n</div>\n</div>\n<div class="email-collection-input-panel ',56),this.__$write(getBsGridClass(bsGrid,"emailCollectionInput"),58),this.__$write('">\n',58),displayInputEmail&&this.macro_displayEmailAddressInput(options,widgets),options.config.displayMailPref&&this.macro_displayFormatSelect(options,widgets),this.__$write("\n</div>\n</div>\n</div>\n</div>\n\n",65),this.__$endContainerWidget())}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayEmailCollection",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayEmailAddressInput:function(options,widgets){try{with(this)this.formLib.macro_formGroupStart(widgets.email,{formGroupConfig:{attributes:{classList:["email-collection-form","email-input-group"]}}}),this.formLib.macro_formLabel(widgets.email,options.template,{labelConfig:{attributes:{classList:[""]}}}),this.formLib.macro_formWidget(widgets.email,options.refundBean,options.template,{widgetConfig:{bind:{value:{inside:options.refundBean,to:"refundConfEmail1"}},attributes:{classList:["email-input"]}}}),this.formLib.macro_formError(widgets.email,options.template),this.formLib.macro_formGroupEnd()}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayEmailAddressInput",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayFormatSelect:function(options,widgets){try{with(this)this.formLib.macro_formGroupStart(widgets.email_format,{formGroupConfig:{attributes:{classList:["email-collection-form","email-format-input-group"]}}}),this.formLib.macro_formLabel(widgets.email_format,options.template,{labelConfig:{attributes:{classList:[""]}}}),this.formLib.macro_formWidget(widgets.email_format,options.refundBean,options.template,{widgetConfig:{bind:{value:{inside:options.refundBean,to:"mailFormat"}},attributes:{classList:["email-format-input"]}}}),this.formLib.macro_formGroupEnd()}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayFormatSelect",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={formLib:"plnextv2.utils.formComponent.FormMacro"},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.emailCollection.desktop.views.DEmailCollectionViewScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/emailCollection/desktop/views/DEmailCollectionViewScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.emailCollection.desktop.views.DEmailCollectionViewScript",$dependencies:["plnextv2.utils.BootstrapUtils"],$constructor:function(){this._i18n=plnextv2.utils.I18n},$prototype:{getBsGridClass:function(e,t){return plnextv2.utils.BootstrapUtils.getBsGridClass(e,t)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/externalLink/desktop/view/DExternalLinkView.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/macroLibs/externalLink/desktop/view/DExternalLinkViewScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.externalLink.desktop.view.DExternalLinkView",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$DExternalLinkViewScript.constructor.call(this)},$destructor:function(){this.$DExternalLinkViewScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_printExternalLinkIcon:function(){try{with(this)this.__$write(externalLinkHTML(),12)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printExternalLinkIcon",__filename,this["aria:currentLineNumber"]],_ex)}},macro_insertExternalLinkIcon:function(originalString){try{with(this)this.__$write(insertExternalIcon(originalString),21)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["insertExternalLinkIcon",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printLink:function(dataLink){try{with(this)this.__$write('\n<i class="icon-caret ',28),this.__$write(dataLink.iconClass,28),this.__$write('" aria-hidden="true"></i>\n<span>',28),this.__$write(dataLink.link,29),this.__$write("</span>\n",29)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printLink",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printExternalLink:function(link,label){try{with(this)this.__$write('\n<a href="',38),this.__$write(link,38),this.__$write('" target="_blank">\n<span>',38),this.__$write(label,39),this.__$write("</span>\n",39),this.macro_printExternalLinkIcon(),this.__$write("\n</a>\n",41)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printExternalLink",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.externalLink.desktop.view.DExternalLinkViewScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/externalLink/desktop/view/DExternalLinkViewScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.externalLink.desktop.view.DExternalLinkViewScript",$constructor:function(){this._i18n=plnextv2.utils.I18n},$prototype:{externalLinkHTML:function(){var e=plnextv2.utils.I18n.getLabel("tx_pltg_text_OpenNewWindow"),t=["&nbsp;",'<i class="padding-left icon-external-link" aria-hidden="true" title="${label}"></i>','<span class="plnext-sr-only">${label}</span>'].join("").replace(/\$\{label\}/g,e);return t},insertExternalIcon:function(e){var t=new RegExp("target=[\"'](_blank|_new)[\"']","i"),i="</a>",n="",a=this.externalLinkHTML(),s=e.split(i);a+=i;for(var r=0;r<s.length;r++){var o=s[r];o&&null!==o.match(t)?(o+=i,n+=o.replace(/<\/a>/g,a)):n+=o+i}return n}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/fareFamilyComparison/desktop/styles/DFareFamilyComparisonTableStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.fareFamilyComparison.desktop.styles.DFareFamilyComparisonTableStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n.ff-comparison-table > tbody tr:hover, .ff-comparison-table > tfoot tr:hover, .ff-comparison-body-row:hover, .ff-comparison-footer-row:hover {\nopacity: 0.6;\n}\n\n.ff-comparison-table {\nwidth:100%;\ntable-layout:fixed;\n}\n\n.ff-comparison-table > tbody td, .ff-comparison-table > tfoot td, .ff-comparison-footer-row td, .ff-comparison-body-row td{\ncolor: white;\ntext-align: center;\ntext-shadow: 1px 1px 1px rgba(0,0,0,0.75);\n}\n\n.servicesFF-table-footer {\ncolor: ",7),this.__$write(this.$black,24),this.__$write(";\ntext-align: left;\ntext-shadow: none;\nborder: none;\nbackground-color: ",24),this.__$write(this.$grayLighter,28),this.__$write(";\nmargin-bottom: 5px;\npadding: 5px;\n}\n\n.servicesFF-table-footer p {\nmargin: 0;\n}\n\n.ff-comparison-table th,  .ff-comparison-header-row th, .ff-comparison-footer-row th, .ff-comparison-body-row th{\nfont-weight:normal;\n}\n\n.ff-comparison-header-row td, .ff-comparison-footer-row td, .ff-comparison-body-row td,.ff-comparison-table th, .ff-comparison-header-row th, .ff-comparison-footer-row th, .ff-comparison-body-row th , .ff-comparison-table td {\npadding:5px;\n}\n\n.ff-comparison-table > tbody th, .ff-comparison-table > tfoot th, .ff-comparison-body-row th, .ff-comparison-footer-row th {\ntext-align: right;\nfont-weight: normal;\nborder-bottom: solid thin white;\nborder-right: solid thin white;\npadding: 5px;\nfont-size: 85%;\n}\n\n.ff-comparison-header-row td:not(:last-child),.ff-comparison-header-row th:not(:last-child),\n.ff-comparison-body-row td:not(:last-child), .ff-comparison-footer-row td:not(:last-child), .ff-comparison-table > tbody td:not(:last-child), .ff-comparison-table > tfoot td:not(:last-child){\nborder-right: solid thin white;\n}\n\n.ff-comparison-table > tfoot td a, .ff-comparison-footer-row td a {\ncursor: pointer;\ntext-decoration: none;\ncolor: white;\n}\n\n.ffcomparison-panel {\noverflow:hidden;\nmargin-bottom:0;\n}\n\n.ffcomparison-panel-item-content {\nmargin-top:10px;\npadding:5px;\n}\n\n.ffcomparison-panel-item {\npadding-bottom:30px;\n}\n\n.ff-comparison-body-row > th > i {\nfloat: right;\npadding: 3px 0 0 3px;\n}\n\n.ff-comparison-body-row > th {\nposition: relative;\n}\n\n",28)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/fareFamilyComparison/desktop/views/DFareFamilyComparisonTable.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/PriceUtils.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/FareUtils.js"),require("plnextv2/utils/BootstrapUtils.js"),require("plnextv2/utils/macroLibs/uiWidgets/UIWidgets.tml"),require("plnextv2/utils/macroLibs/serviceFlex/desktop/views/DServiceFlex.tml"),require("plnextv2/utils/macroLibs/externalLink/desktop/view/DExternalLinkView.tml"),require("plnextv2/utils/macroLibs/fareFamilyComparison/desktop/views/DFareFamilyComparisonTableScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.fareFamilyComparison.desktop.views.DFareFamilyComparisonTable",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$DFareFamilyComparisonTableScript.constructor.call(this)},$destructor:function(){this.$DFareFamilyComparisonTableScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_fareFamilyComparisonTable:function(options){try{with(this){var headerSROnlyCSS=options.headerDisplayed?"":"plnext-sr-only";this.__$write('\n\n<table id="ffcomp-table-id" class="ff-comparison-table" data-n-of-cells="',32),this.__$write(options.fareFamilyList.length,33),this.__$write('">\n\n<caption class="plnext-sr-only">\n',33),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_FareFamilyComparisonDescription"),36),this.__$write("\n</caption>\n\n",37),this.macro_fareFamilyComparisonHeader(headerSROnlyCSS,options.fareFamilyList,options.ffcompDescFaresCols,options.fareCellClass,options.rowHeaderCellClass,options.fareFamilyConditions,options.config),this.__$write("\n\n<tbody>\n",40),this.macro_fareFamilyComparisonBody(options.ffComparisonTable,options.fareFamilyList,options.fareFamilyComparisonLabels,options.ffcompDescFaresCols,options.fareCellClass,options.rowHeaderCellClass,options.currency),this.__$write("\n</tbody>\n\n<tfoot>\n",43),options.showFareDetailsLink&&this.macro_fareFamilyComparisonFooter(options.fareFamilyList,options.fareFamilyConditions,options.scope,options.ffcompDescFaresCols,options.fareCellClass,options.rowHeaderCellClass,options.args.boundIndex),this.__$write("\n\n</tfoot>\n\n</table>\n",49),options.displayFareFamilyComparisonFooter&&this.macro_fareFamilyFlexFooter(options.fareFamilyList.length+1)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["fareFamilyComparisonTable",__filename,this["aria:currentLineNumber"]],_ex)}},macro_fareFamilyFlexFooter:function(length){try{with(this)this.__$write('\n<div class="servicesFF-table-footer">\n',60),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_ServicesFooter"),61),this.__$write("\n</div>\n",62)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["fareFamilyFlexFooter",__filename,this["aria:currentLineNumber"]],_ex)}},macro_fareFamilyComparisonHeader:function(headerSROnlyCSS,fareFamilyList,ffcompDescFaresCols,fareCellClass,rowHeaderCellClass,fareFamilyConditions,config){try{with(this){this.__$write('\n<thead class="',67),this.__$write(headerSROnlyCSS,67),this.__$write('">\n<tr class="ff-comparison-header-row">\n<th class="',67),this.__$write(ffcompDescFaresCols,69),this.__$write(" ",69),this.__$write(rowHeaderCellClass,69),this.__$write('"></th>\n',69);var __v_1=fareFamilyList;void 0==fareFamilyList&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,70]);for(var fareFamily_ct=0,__v_2=__v_1.length,fareFamily_index=0;__v_2>fareFamily_index;fareFamily_index++){var fareFamily=__v_1[fareFamily_index];fareFamily_ct++,this.__$write('\n<th scope="col" class="',71),this.__$write(fareCellClass,71),this.__$write(' ffcomp-col-xs-height1" id="ffcomp-col-',71),this.__$write(fareFamily.ffCode,71),this.__$write('-id" style="background-color:',71),this.__$write(fareFamilyList[fareFamily_index].ffColor,71),this.__$write(";color:",71),this.__$write(fareFamilyList[fareFamily_index].ffHighlightingColor,71),this.__$write(';" >',71),this.__$write(fareFamily.ffName,71),this.__$write("</th>\n",71)}this.__$write('\n</tr>\n<tr class="ff-comparison-header-row">\n<th class="',73),this.__$write(ffcompDescFaresCols,75),this.__$write(" ",75),this.__$write(rowHeaderCellClass,75),this.__$write('"></th>\n',75);var __v_3=fareFamilyList;void 0==fareFamilyList&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,76]);for(var fareFamily_ct=0,__v_4=__v_3.length,fareFamily_index=0;__v_4>fareFamily_index;fareFamily_index++){var fareFamily=__v_3[fareFamily_index];fareFamily_ct++,this.__$write('\n<td class="',77),this.__$write(fareCellClass,77),this.__$write(' ffcomp-col-xs-height1" id="ffcomp-col-',77),this.__$write(fareFamily.ffCode,77),this.__$write('-icons-id" style="background-color:',77),this.__$write(fareFamilyList[fareFamily_index].ffColor,77),this.__$write(";color:",77),this.__$write(fareFamilyList[fareFamily_index].ffHighlightingColor,77),this.__$write(';">',77),this.__$write(plnextv2.utils.FareUtils.getShortDescription(fareFamilyConditions,fareFamily.ffCode,config),77),this.__$write("</td>\n",77)}this.__$write("\n</tr>\n</thead>\n",79)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["fareFamilyComparisonHeader",__filename,this["aria:currentLineNumber"]],_ex)}},macro_fareFamilyComparisonBody:function(ffComparisonTable,fareFamilyList,fareFamilyComparisonLabels,ffcompDescFaresCols,fareCellClass,rowHeaderCellClass,currency){try{with(this){var __v_5=fareFamilyComparisonLabels;void 0==fareFamilyComparisonLabels&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,84]);for(var characteristic_ct=0,__v_6=__v_5.length,characteristic_index=0;__v_6>characteristic_index;characteristic_index++){var characteristic=__v_5[characteristic_index];if(characteristic_ct++,ffComparisonTable[characteristic.code]){this.__$write('\n<tr id="ffcomp-row-',87),this.__$write(characteristic.code,87),this.__$write('-id" class="ff-comparison-body-row">\n<th scope="row" class="',87),this.__$write(ffcompDescFaresCols,88),this.__$write(" ",88),this.__$write(rowHeaderCellClass,88),this.__$write('" id="ffcomp-th-',88),this.__$write(characteristic.code,88),this.__$write('-id">',88),this.serviceFlex.macro_displayServiceLabel(characteristic),this.__$write("</th>\n",88);var __v_7=fareFamilyList;void 0==fareFamilyList&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,89]);for(var fareFamily_ct=0,__v_8=__v_7.length,fareFamily_index=0;__v_8>fareFamily_index;fareFamily_index++){var fareFamily=__v_7[fareFamily_index];fareFamily_ct++,this.__$write('\n<td id="ffcomp-td-',90),this.__$write(fareFamily.ffCode,90),this.__$write("-",90),this.__$write(characteristic.code,90),this.__$write('-id" class="',90),this.__$write(fareCellClass,90),this.__$write('" style="',90),this.__$write(getStyle(fareFamilyList[fareFamily_index]),90),this.__$write('">\n',90),ffComparisonTable[characteristic.code][fareFamily.ffCode]&&(ffComparisonTable[characteristic.code][fareFamily.ffCode].fromPrice?this.__$write(displayFromPrice(ffComparisonTable[characteristic.code][fareFamily.ffCode].fromPrice,currency),93):this.__$write(ffComparisonTable[characteristic.code][fareFamily.ffCode].label,95)),this.__$write("\n</td>\n",98)}this.__$write("\n</tr>\n",100)}}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["fareFamilyComparisonBody",__filename,this["aria:currentLineNumber"]],_ex)}},macro_fareFamilyComparisonFooter:function(fareFamilyList,fareFamilyConditions,scope,ffcompDescFaresCols,fareCellClass,rowHeaderCellClass,boundIndex){try{with(this){this.__$write('\n<tr id="ffcomp-row-footer-id" class="ff-comparison-footer-row">\n<th class="',106),this.__$write(ffcompDescFaresCols,107),this.__$write(" ",107),this.__$write(rowHeaderCellClass,107),this.__$write('">\n',107),plnextv2.utils.I18n.getLabel("tx_pltg_text_FullFaresComparisonUrl")&&(this.__$write('\n<a href="javascript:;"\n',109),this.__$statementOnEvent("click",this.$normCallback({fn:"openNewWindow",scope:this,args:{ffCode:this.ALL,uri:plnextv2.utils.I18n.getLabel("tx_pltg_text_FullFaresComparisonUrl"),scope:scope,boundIndex:boundIndex}}),110),this.__$write("\n>\n<span>",115),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_ShowFullFaresComparison"),116),this.__$write('</span>\n<span class="plnext-sr-only">',116),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_OpenNewWindow"),117),this.__$write('</span>\n<i class="ffcomp-footer-th-icon icon-external-link" aria-hidden="true" title="',117),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_OpenNewWindow"),118),this.__$write('"></i>\n</a>\n',118)),this.__$write("\n</th>\n\n",121);var __v_9=fareFamilyList;void 0==fareFamilyList&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,123]);for(var fareFamily_ct=0,__v_10=__v_9.length,fareFamily_index=0;__v_10>fareFamily_index;fareFamily_index++){var fareFamily=__v_9[fareFamily_index];fareFamily_ct++;var ffURI=plnextv2.utils.FareUtils.getFareURI(fareFamilyConditions,fareFamily.ffCode);this.__$write('\n<td class="',125),this.__$write(fareCellClass,125),this.__$write(' ff-comp-test" style="',125),this.__$write(getStyle(fareFamily),125),this.__$write('">\n',125),ffURI&&(this.__$write('\n<a href="javascript:;"\n',127),this.__$statementOnEvent("click",this.$normCallback({fn:"openNewWindow",scope:this,args:{ffCode:fareFamily.ffCode,uri:ffURI,scope:scope,boundIndex:boundIndex}}),128),this.__$write("\n>\n<span>",133),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_MoreDetails"),134),this.__$write("</span>\n",134),this.externalLink.macro_printExternalLinkIcon(),this.__$write("\n</a>\n",136)),this.__$write("\n</td>\n",138)}this.__$write("\n\n</tr>\n\n",140)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["fareFamilyComparisonFooter",__filename,this["aria:currentLineNumber"]],_ex)}},macro_fareComparisonPanel:function(options){try{with(this)this.__$write("\n<div ",146),this.__$writeId("ffComparing",146),this.__$write(' class="',146),this.__$write(this.getPrefixedClass("panel",options.prefix),146),this.__$write(" ",146),this.__$write(this.getPrefixedClass("ffcomparison-panel",options.prefix),146),this.__$write(' row">\n<div class="',146),this.__$write(plnextv2.utils.BootstrapUtils.getBsGridClass(options.panelFaresComparisonCols),147),this.__$write(" ",147),this.__$write(this.getPrefixedClass("panel-body",options.prefix),147),this.__$write(" ",147),this.__$write(this.getPrefixedClass("ffcomparison-panel-body",options.prefix),147),this.__$write('">\n<div class="row">\n',147),this.macro_ffComparisonPanelItem(options),this.__$write('\n</div>\n</div>\n<footer class="',150),this.__$write(plnextv2.utils.BootstrapUtils.getBsGridClass(options.panelFaresComparisonCols),152),this.__$write(" ",152),this.__$write(this.getPrefixedClass("panel-footer",options.prefix),152),this.__$write(" ",152),this.__$write(this.getPrefixedClass("ffcomparison-panel-footer",options.prefix),152),this.__$write('">\n\n',152),this.uiWidgetsLib.macro_button({bind:null,text:plnextv2.utils.I18n.getLabel(this.LABELS.FF_COMPARISON_CLOSE_BTN),type:"default",noLeftIcon:!1,noRightIcon:!0,noIcons:!1,onClick:{fn:"displayPanel",scope:options.scope,args:{panelId:"ffComparing",boundIndex:options.args.boundIndex,close:!0}},classList:{button:["btn-apply"],leftIcon:["icon-remove"]}}),this.__$write("\n\n</footer>\n</div>\n",175)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["fareComparisonPanel",__filename,this["aria:currentLineNumber"]],_ex)}},macro_ffComparisonPanelItem:function(options){try{with(this)this.__$write('\n<section class="',181),this.__$write(this.getPrefixedClass("panel-item",options.prefix),181),this.__$write(" ",181),this.__$write(this.getPrefixedClass("ffcomparison-panel-item",options.prefix),181),this.__$write(" ",181),this.__$write(plnextv2.utils.BootstrapUtils.getBsGridClass(options.ffComparisonCols),181),this.__$write('">\n<header class="',181),this.__$write(this.getPrefixedClass("ffcomparison-panel-item-header",options.prefix),182),this.__$write(" ",182),this.__$write(this.getPrefixedClass("panel-item-header",options.prefix),182),this.__$write(' row">\n<div class="',182),this.__$write(plnextv2.utils.BootstrapUtils.getBsGridClass(options.panelItemHeaderCols),183),this.__$write('">',183),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_FaresComparison"),183),this.__$write('</div>\n</header>\n<div class="',183),this.__$write(this.getPrefixedClass("panel-item-content",options.prefix),185),this.__$write(" ",185),this.__$write(this.getPrefixedClass("ffcomparison-panel-item-content",options.prefix),185),this.__$write(' row">\n\n',185),this.macro_fareFamilyComparisonTable(options),this.__$write("\n</div>\n</section>\n",188)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["ffComparisonPanelItem",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={externalLink:"plnextv2.utils.macroLibs.externalLink.desktop.view.DExternalLinkView",serviceFlex:"plnextv2.utils.macroLibs.serviceFlex.desktop.views.DServiceFlex",uiWidgetsLib:"plnextv2.utils.macroLibs.uiWidgets.UIWidgets"},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.fareFamilyComparison.desktop.views.DFareFamilyComparisonTableScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/fareFamilyComparison/desktop/views/DFareFamilyComparisonTableScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.fareFamilyComparison.desktop.views.DFareFamilyComparisonTableScript",$statics:{ALL:"all",LABELS:{FF_COMPARISON_CLOSE_BTN:"tx_pltg_text_Close"}},$prototype:{openNewWindow:function(e,t){var i=t.scope.moduleCtrl||t.scope;window.open(t.uri,"_blank","menubar=no,resizable=yes ,status=no, scrollbars=yes, menubar=no, width=auto, height=auto"),i.publishAnalyticsEvent("clickffmoredetails",t)},getPrefixedClass:function(e,t){return t&&(e+=" "+t+"-"+e),e},getStyle:function(e){return e?"background-color:"+e.ffColor+"; color:"+e.ffHighlightingColor+";":void 0},displayFromPrice:function(e,t){var i=plnextv2.utils.PriceUtils.formatCurrency(e,t);return plnextv2.utils.I18n.getStringFromPattern("tx_pltg_text_AncillaryServicesFareFamilyFromPrice",[i])}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/flightInfo/FlightInfo.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/ATCMilesAndCashRebookingUtils.js"),require("plnextv2/utils/StringUtils.js"),require("plnextv2/utils/FlightsUtils.js"),require("plnextv2/utils/StringResources.js"),require("ariatemplates/utils/Json.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/BootstrapUtils.js"),require("plnextv2/utils/DateUtils.js"),require("plnextv2/utils/macroLibs/flightInfo/FlightInfoScript.js"),require("plnextv2/utils/widgets/plnextLib/tooltip/core/CustomTooltip.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.flightInfo.FlightInfo",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$FlightInfoScript.constructor.call(this)},$destructor:function(){this.$FlightInfoScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_printBoundHeader:function(options){try{with(this){var prefix=options.classPrefix;this.macro_showSRInstruction(options.showRecap,options.boundIndex,options.scope),this.__$write('\n<header class="',25),this.__$write(this.getPrefixedClass("bound-header",prefix),25),this.__$write('">\n<h2 class="',25),this.__$write(this.getPrefixedClass("header-info",prefix),26),this.__$write(' row">\n<div class="col-xs-19">\n',26),this.macro_printHeaderDestination(options,"begin",!0),options.hideArrival||(options.hideIconPlane=!0,this.macro_printHeaderDestination(options,"end",options.hideArrow)),this.__$write("\n</div>\n\n",34),options.dateBelowDestination||this.macro_printHeaderDate({bdate:this.getBoundDate(options.bound.beginDate),dateGridCols:options.dateGridCols,classPrefix:prefix,dateFormat:options.dateFormat,shortDayName:options.shortDayName}),this.__$write("\n</h2>\n\n",39),this.macro_displayPopularityMessage(options),options.dateBelowDestination||this.macro_printCalendarLink({linkCalendar:options.linkCalendar,fn:options.fn,scope:options.scope}),this.__$write("\n</header>\n",45)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printBoundHeader",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printHeaderDestination:function(options,prefixBound,hideArrow){try{with(this){var prefix=options.classPrefix;if(this.__$write('\n<div class="',64),this.__$write(this.getPrefixedClass("header-destination",prefix),64),this.__$write('">\n\n',64),options.hideIconPlane||(this.__$write('\n<i class="',67),this.__$write(options.iconPlane,67),this.__$write('" aria-hidden="true"></i>\n',67)),this.__$write('\n<div class="',69),this.__$write(this.getPrefixedClass("header-dest-date-container",prefix),69),this.__$write('">\n\n',69),!hideArrow){var arrowIcon=options.arrowIcon||"icon-arrow-right";this.__$write('\n<i class="',73),this.__$write(arrowIcon,73),this.__$write('" aria-hidden="true"></i>\n<span class="plnext-sr-only">',73),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_ToDestination"),74),this.__$write("</span>\n",74)}this.macro_printHeaderLocation({location:options.bound[prefixBound+"Location"],type:"from",classPrefix:prefix,hideLocationCode:options.hideLocationCode,headerLocationCols:options.headerLocationCols}),options.dateBelowDestination&&this.macro_printHeaderDate({bdate:new Date(options.bound[prefixBound+"Date"]),classPrefix:prefix,dateFormat:options.dateFormat,shortDayName:options.shortDayName,linkCalendar:options.linkCalendar,fn:options.fn,scope:options.scope}),this.__$write("\n</div>\n</div>\n",81)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printHeaderDestination",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printHeaderDate:function(options){try{with(this){var prefix=options.classPrefix;this.__$write('\n<div class="',87),this.__$write(this.getPrefixedClass("header-date",prefix),87),this.__$write(" ",87),this.__$write(plnextv2.utils.BootstrapUtils.getBsGridClass(options.dateGridCols),87),this.__$write('" aria-hidden="true">\n<i class="icon-calendar ',87),this.__$write(this.getPrefixedClass("header-icon-calendar",prefix),88),this.__$write('"></i>\n<div class="',88),this.__$write(this.getPrefixedClass("header-date-details",prefix),89),this.__$write('">\n\n\n',89),(options.shortDayName===!0||options.shortDayName===!1)&&(this.__$write('\n<div class="',93),this.__$write(this.getPrefixedClass("header-date-dayofweek",prefix),93),this.__$write('">',93),this.__$write(this._dateUtils.getDayName(options.bdate.getDay(),options.shortDayName),93),this.__$write("</div>\n",93)),this.__$write('\n<div class="',95),this.__$write(this.getPrefixedClass("header-date-daymonth",prefix),95),this.__$write('">',95),this.__$write(this._dateUtils.formatDateTime(options.bdate,options.dateFormat),95),this.__$write('</div>\n</div>\n</div>\n<div class="plnext-sr-only">\n',95),this.__$write(plnextv2.utils.DateUtils.formatDateTime(options.bdate,this._dateUtils.FORMATS.FULL_DATE_FORMAT),99),this.__$write("\n</div>\n",100)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printHeaderDate",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printCalendarLink:function(options){try{with(this)options.linkCalendar&&(this.__$write('\n<a class="',104),this.__$write(this.getPrefixedClass("header-date-calendarLink",options.classPrefix),104),this.__$write('" href="javascript:;" ',104),this.__$statementOnEvent("click",this.$normCallback({fn:options.fn,scope:options.scope}),104),this.__$write(">\n",107),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_GoToCalendarView"),108),this.__$write("\n</a>\n",109))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printCalendarLink",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printHeaderLocation:function(options){try{with(this){var prefix=options.classPrefix,locationType=options.type||"from";this.__$write('\n<div class="header-location ',115),this.__$write(this.getPrefixedClass("header-location"+locationType,prefix),115),this.__$write('" data-airport="',115),this.__$write(options.location.locationName,115),this.__$write('">\n<div class="',115),this.__$write(this.getPrefixedClass("page-title",prefix),116),this.__$write('">\n<div>',116),this.__$write(options.location.cityName,117),this.__$write('</div>\n<span class="',117),this.__$write(this.getPrefixedClass("subheader-location",prefix),118),this.__$write('">',118),this.__$write(options.location.locationName,118),this.__$write("\n</span>\n",119),options.hideLocationCode||(this.__$write('\n<span class="',121),this.__$write(this.getPrefixedClass("subheader-location",prefix),121),this.__$write(" ",121),this.__$write(this.getPrefixedClass("subheader-location-code",prefix),121),this.__$write("\"><bdo dir='ltr'>(",121),this.__$write(options.location.locationCode,121),this.__$write(")</bdo></span>\n",121)),this.__$write("\n</div>\n</div>\n",123)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printHeaderLocation",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printFlightDetails:function(options){try{with(this){var flightTime=this._dateUtils.formatDateTime(this._flightsUtils.getFlightDuration(options.flight.segments),this._dateUtils.FORMATS.DURATION_FORMAT),prefix=options.classPrefix,flightId=options.flight.proposedBoundId,flightDetails=this.getFlightDetails(options);this.__$write('\n\n<div class="',132),this.__$write(this.getFlightDetailsClass(prefix,options.showMinPrice),133),this.__$write('" data-flightId="',133),this.__$write(flightId,133),this.__$write('"\n',133),options.isRecapPanel&&(this.__$write('\nid="collapsed-recap-bound',135),this.__$write(options.boundIndex,135),this.__$write("-flight",135),this.__$write(flightId,135),this.__$write('"\n',135)),this.__$write("\n>\n",137),this.macro_printTimeLocationDetails(flightDetails),this.macro_displayPopularityMessage(options),this.__$write('\n<div class="flight-details-group ',141),this.__$write(plnextv2.utils.BootstrapUtils.getBsGridClass(options.lineGridCols),141),this.__$write('">\n',141),isFlexPremium()?(this.__$write('\n<div class="duration-stop">\n<i class="icon-stopwatch" aria-hidden="true"></i>\n<span class="duration">',143),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_TotalDuration"),145),this.__$write("\n<strong>",146),this.__$write(flightTime,146),this.__$write(',</strong>\n</span>\n<span class="nbStops">\n<strong>',146),this.__$write(plnextv2.utils.FlightsUtils.displayNumberOfStops(options.flight.segments),149),this.__$write("</strong>\n</span>\n",149)):(this.__$write('\n<div class="flight-duration-info">\n<span class="duration">',152),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_Duration"),153),this.__$write("\n<strong>",154),this.__$write(this.flightTimeParse(options),154),this.__$write("</strong>\n</span>\n",154)),options.airportIsChanged&&(this.__$write('\n<span class="',158),this.__$write(this.getPrefixedClass("airport-change",prefix),158),this.__$write('" data-plus="- ">',158),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_AirportChange"),158),this.__$write("</span>\n",158)),this.__$write("\n</div>\n",160),this.macro_printSegmentsDetails({fn:options.fn,scope:options.scope,flight:options.flight,segments:options.flight.segments,lineGridCols:options.lineGridCols,timelineGridCols:options.timelineGridCols,ancillaryServicesGridCols:options.ancillaryServicesGridCols,timelineDisplay:options.flight.timelineDisplay,ancillaryServicesDisplay:options.flight.ancillaryServicesDisplay,boundIndex:options.boundIndex,rowIndex:options.rowIndex,classPrefix:prefix,hideTimelineLink:options.hideTimelineLink,displayAncillaryServices:options.displayAncillaryServices}),this.__$write("\n</div>\n\n\n",162),isWaitlistByBound(options)&&options.isRecapPanel&&this.macro_printWaitlistInFlightDetails(),this.__$write("\n</div>\n",168),options.showMinPrice&&this.__$insertSection(170,{macro:{name:"printButtonWithPrice",args:[{scope:options.scope,data:{getInfoRow:options.getInfoRow,boundIndex:options.boundIndex,flight:options.flight}}],scope:this},type:"div",bindRefreshTo:[{inside:options.scope.data.availability,to:"updatedRow"}],attributes:{classList:[this.getPrefixedClass("flight-details-button",prefix)]}})}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printFlightDetails",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayPopularityMessage:function(options){try{with(this)this.macro_validateAndGetPopularityMessage(options)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPopularityMessage",__filename,this["aria:currentLineNumber"]],_ex)}},macro_validateAndGetPopularityMessage:function(options){try{with(this)this.isUrgencyToBookActivated(options)&&(this.__$write('\n<div class="urgency-to-book-panel">\n',205),this.__$write(this.getPopularityMessage(options),206),this.__$write("\n</div>\n",207))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["validateAndGetPopularityMessage",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printTimeLocationDetails:function(options){try{with(this){var prefix=options.classPrefix,boundType=(plnextv2.utils.I18n.getLabel(0==options.boundIndex?"tx_pltg_text_Departure":"tx_pltg_text_Return"),0==options.boundIndex?"departure":"return"),numberOfStopsLabel=_flightsUtils.displayNumberOfStops(options.segments,plnextv2.utils.I18n.getLabel("tx_pltg_text_Direct"));this.__$write('\n\n<h3 id="grid-bound',216),this.__$write(options.boundIndex,217),this.__$write("-rowheader",217),this.__$write(options.rowIndex,217),this.__$write('" class="flight-details-container-row title-header">\n<div class="',217),this.__$write(this.getPrefixedClass("flight-details-location",prefix),218),this.__$write(" bound-type ",218),this.__$write(boundType,218),this.__$write('">\n',218),options.isNew&&(this.__$write('\n<span class="',220),this.__$write(prefix,220),this.__$write('-new-bound">\n',220),this.__$write(this._i18n.getLabel("tx_pltg_text_NewItinerary"),221),this.__$write("\n</span>\n",222)),this.__$write('\n</div>\n<div class="',224),this.__$write(this.getPrefixedClass("flight-details-location",prefix),225),this.__$write('">\n<time class="time-from">',225),this.__$write(this._dateUtils.formatDateTime(options.takeoffDate,this._dateUtils.FORMATS.TIME_FORMAT),226),this.__$write('</time>\n<span class="airportname airportname-from">',226),this.__$write(options.bLocation.locationName,227),this.__$write('<abbr title="',227),this.__$write(options.bLocation.locationName,227),this.__$write('" class="citycode-from"> <bdo dir=\'ltr\'>(',227),this.__$write(options.bLocation.locationCode,227),this.__$write(")</bdo></abbr></span>\n</div>\n",227),isFlexPremium()||(this.__$write('\n<div class="stops" aria-hidden="true">\n<span class="',230),this.__$write(getStopClass(_flightsUtils.getNumberOfStops(options.segments)),231),this.__$write('">\n',231),this.__$write(numberOfStopsLabel,232),this.__$write("\n</span>\n</div>\n",233)),this.__$write('\n<div class="',236),this.__$write(this.getPrefixedClass("flight-details-location",prefix),236),this.__$write('">\n<time class="time-to">',236),this.__$write(this._dateUtils.formatDateTime(options.landingDate,this._dateUtils.FORMATS.TIME_FORMAT),237),this.__$write('</time>\n<span class="time-day-offset time-to-day-offset">',237),this.__$write(options.endDayIndicator,238),this.__$write('</span>\n<span class="airportname airportname-to">',238),this.__$write(options.eLocation.locationName,239),this.__$write(' <abbr title="',239),this.__$write(options.eLocation.locationName,239),this.__$write('" class="citycode-to"><bdo dir=\'ltr\'>(',239),this.__$write(options.eLocation.locationCode,239),this.__$write(")</bdo></abbr></span>\n</div>\n</h3>\n",239),isFlexPremium()||(this.__$write('\n<span class="plnext-sr-only">',243),this.__$write(getDirectOrStopLabel(options),243),this.__$write("</span>\n",243))}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printTimeLocationDetails",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printSegmentsDetails:function(options){try{with(this){var prefix=options.classPrefix,__v_1=options.segments;void 0==options.segments&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,250]);for(var segment_ct=0,__v_2=__v_1.length,segment_index=0;__v_2>segment_index;segment_index++){var segment=__v_1[segment_index];segment_ct++,this.__$write('\n<div class="',251),this.__$write(this.airCraftClass(),251),this.__$write(' col-xs-24">\n<span class="',251),this.__$write(this.airCraftNameClass(),252),this.__$write('">',252),this.__$write(segment.airline.name,252),this.__$write("</span>\n<span class=\"aircraftnumber\"><bdo dir='ltr'>(",252),this.__$write(segment.airline.code,253),this.__$write(segment.flightNumber,253),this.__$write(")</bdo></span>\n",253),segment.opFlag&&(this.__$write('\n<span class="opName">',255),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_OperatedByLabel"),255),this.__$write(" ",255),this.__$write(segment.opAirline.name,255),this.__$write("</span>\n",255)),this.__$write("\n</div>\n",257)}if(!options.hideTimelineLink){this.__$write('\n<div class="',261),this.__$write(this.getPrefixedClass("show-timeline",prefix),261),this.__$write('"\n',261),this.__$statementOnEvent("click",this.$normCallback({fn:options.fn,scope:options.scope,args:{boundIndex:options.boundIndex,flightIndex:options.flight.proposedBoundId,flight:options.flight,rowIndex:options.rowIndex}}),262),this.__$write(">\n",266);var idLinkTimeline="table-bound"+options.boundIndex+"-button-flightdetails"+options.rowIndex;this.__$insertSection(268,{id:idLinkTimeline,macro:{name:"printLink",args:[options.timelineDisplay],scope:this},type:'a href="javascript:void(0);"  aria-expanded="false"',bindRefreshTo:[{inside:options.timelineDisplay,to:"link"},{inside:options.timelineDisplay,to:"iconClass"}],attributes:{classList:[getPrefixedClass("show-timeline-link",prefix)]}}),this.__$write("\n</div>\n",290)}if(options.displayAncillaryServices){this.__$write('\n<div class="',294),this.__$write(this.getPrefixedClass("show-ancillary-services",prefix),294),this.__$write(" ",294),this.__$write(plnextv2.utils.BootstrapUtils.getBsGridClass(options.ancillaryServicesGridCols),294),this.__$write('"\n',294),this.__$statementOnEvent("click",this.$normCallback({fn:"ancillaryServices",scope:options.scope,args:{boundIndex:options.boundIndex,flightIndex:options.flight.proposedBoundId,flight:options.flight,rowIndex:options.rowIndex}}),295),this.__$write(">\n",299);var idAncillaryServices="table-bound"+options.boundIndex+"-button-ancillary-services"+options.rowIndex;this.__$insertSection(301,{id:idAncillaryServices,macro:{name:"printLink",args:[options.ancillaryServicesDisplay],scope:this},type:'a onclick="return false;" href="#"  aria-expanded="false"',bindRefreshTo:[{inside:options.ancillaryServicesDisplay,to:"link"},{inside:options.ancillaryServicesDisplay,to:"iconClass"}],attributes:{classList:[getPrefixedClass("show-ancillary-services-link",prefix)]}}),this.__$write("\n</div>\n",323)}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printSegmentsDetails",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printLink:function(dataLink){try{with(this)this.__$write("\n<span>",328),this.__$write(dataLink.link,328),this.__$write('</span><i class="icon-caret ',328),this.__$write(dataLink.iconClass,328),this.__$write('" aria-hidden="true"></i>\n',328)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printLink",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printCell:function(options,grouped,prefix){try{with(this){var id="table-bound"+options.boundIndex+"-cell"+grouped+options.fareFamilyIndex+options.rowIndex+"-available",id_content=id+"-content",recoIndex=options.infoCell.cell?options.infoCell.cell.currentBestRecommendationIndex:options.infoCell.recoIndex;options.infoCell.ffIsDynamic&&this.macro_printDynamicFareFamilyDeal(options.fareFamilyName,options.fareFamilyColor,id),this.__$write("\n\n<div ",343),this.__$writeId(id,344),this.__$write(' class="bound-table-cell-reco bound-table-cell-reco-available ',344),this.__$write(options.infoCell.customClass,344),this.__$write(" ",344),this.__$write(options.infoCell.selectedClass,344),this.__$write(" ",344),this.__$write(options.infoCell.teasedClass,344),this.__$write('"\nstyle="',344),this.__$write(options.style,345),this.__$write('" data-recoIndex="',345),this.__$write(recoIndex,345),this.__$write('"\n',345),options.events.onMouseout&&this.__$statementOnEvent("mouseout",this.$normCallback({fn:options.events.onMouseout.fn,scope:options.scope,args:options.events.onMouseout.args}),347),this.__$statementOnEvent("click",this.$normCallback({fn:options.events.onClick.fn,scope:options.scope,args:options.events.onClick.args}),353),this.__$statementOnEvent("touchend",this.$normCallback({fn:options.events.onTouchend.fn,scope:options.scope,args:options.events.onTouchend.args}),358),options.events.onMouseover&&this.__$statementOnEvent("mouseover",this.$normCallback({fn:options.events.onMouseover.fn,scope:options.scope,args:options.events.onMouseover.args}),364),this.__$statementOnEvent("keyup",this.$normCallback({fn:options.events.onClick.fn,scope:options.scope,args:options.events.onClick.args}),370),options.events.onFocus&&this.__$statementOnEvent("focus",this.$normCallback({fn:options.events.onFocus.fn,scope:options.scope,args:options.events.onFocus.args}),376),options.events.onBlur&&this.__$statementOnEvent("blur",this.$normCallback({fn:options.events.onBlur.fn,scope:options.scope,args:options.events.onBlur.args}),383),this.__$write('\n>\n<div aria-hidden="true" id="',389),this.__$write(id_content,390),this.__$write('">\n\n',390),this.macro_printHeaderCell(options,prefix);var discountDetailsClass=options.infoCell.bestDiscountPrice?"cell-reco-details-discount":"cell-reco-details";this.__$write('\n<div class="',395),this.__$write(discountDetailsClass,395),this.__$write(" ",395),this.__$write(options.infoCell.selectedClass,395),this.__$write('" >\n\n',395),this.macro_printFareFamilyName(options.fareFamilyName),options.displayRoundTripFare&&this.macro_printRoundTripLabel(),options.infoCell.isAutoUpsellable&&this.macro_printAutoUpsellIcon(options.infoCell.autoUpsellCell),this.macro_printPriceContent(options),this.macro_printMixedFareAndCabin(options.infoCell),this.macro_printSeatLeft(options),isWaitlist(options)&&this.macro_printWaitlist(),this.__$write("\n\n</div>\n\n</div>\n\n",416);var statusCheckbox=options.infoCell.selected?"checked":"";this.__$write("\n<input\n",422),this.__$writeId(id+"-button",423),this.__$write('\nclass="btn-invisible"\naria-label=\'',424),this.__$write(getCheckboxAriaLabel(options),425),this.__$write("'\n",425),options.areFaresGrouped&&(this.__$write("aria-expanded='",426),this.__$write(options.infoCell.selected,426),this.__$write("'",426)),options.isAutocollapseEnabled?this.__$write('\ntype="button"\n',428):(this.__$write('\ntype="checkbox"\n',430),this.__$write(statusCheckbox,431)),this.__$write("\n/>\n\n</div>\n\n",433),this.macro_cellTooltip(id,options)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printCell",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printMixedFareAndCabin:function(infoCell){try{with(this)infoCell.mixedFFInfoList&&infoCell.mixedFFInfoList.length>0&&(this.__$write('\n<span class="cell-reco-mixed-cabin-ff-text">\n',442),this.__$write(_i18n.getLabel("tx_pltg_text_MixedFareInfo"),443),this.__$write("\n</span>\n",444)),infoCell.mixedCabinInfoList&&infoCell.mixedCabinInfoList.length>0&&(this.__$write('\n<span class="cell-reco-mixed-cabin-ff-text">\n',447),this.__$write(_i18n.getLabel("tx_pltg_text_MixedCabinInfo"),448),this.__$write("\n</span>\n",449))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printMixedFareAndCabin",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printAutoUpsellIcon:function(args){try{with(this)this.__$write('\n<div class="auto-upsell-icon-container">\n<span aria-hidden="true" class="',454),this.__$write(args.autoUpsellIconClass,455),this.__$write(' icon-auto-upsell"></span>\n<span class="plnext-sr-only">',455),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_AutomaticUpgradesIconAltText"),456),this.__$write("</span>\n</div>\n",456)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printAutoUpsellIcon",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printDynamicFareFamilyDeal:function(fareFamilyName,fareFamilyColor,cellId){try{with(this){var dynamicFareFamilyDeal="dynamic-fare-family-deal",dynamicFareFamilyDealId=cellId+"-"+dynamicFareFamilyDeal;this.__$write("\n\n<div ",466),this.__$writeId(dynamicFareFamilyDealId,467),this.__$write(' class="',467),this.__$write(dynamicFareFamilyDeal,467),this.__$write('" style="',467),this.__$write(getDFFDealStyle(fareFamilyColor),467),this.__$write('">\n',467),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_DFFValueDealLabel"),468),this.__$write("</div>\n\n",468),this.__$processWidgetMarkup("plnextv2.utils.widgets.PlnextLib","Tooltip",{id:dynamicFareFamilyDealId+"-tooltip",contentMacro:{name:"printDynamicFareFamilyDealDescription",args:[fareFamilyName],scope:this},associatedElem:dynamicFareFamilyDealId,cssClass:dynamicFareFamilyDeal+"-tooltip",closeButton:!1,arrow:!0,openOnMouseClick:!1,openOnMouseOver:!0,openOnMouseMove:!1,closeOnMouseOut:!0,displaySide:"top",isBodyReferencePosition:!0,isWrapPosition:!0,showDelay:0},470)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printDynamicFareFamilyDeal",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printDynamicFareFamilyDealDescription:function(fareFamilyName){try{with(this)this.__$write(plnextv2.utils.I18n.getStringFromPattern("tx_pltg_text_DFFValueDealDescription",[fareFamilyName]),493)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printDynamicFareFamilyDealDescription",__filename,this["aria:currentLineNumber"]],_ex)}},macro_cellTooltip:function(id,options){try{with(this){var tooltipContent=getTooltipContent(options),tooltipContentCount=Object.keys(tooltipContent).length;tooltipContentCount>0&&this.__$processWidgetMarkup("plnextv2.utils.widgets.PlnextLib","Tooltip",{id:id+"-tooltip",contentMacro:{name:"printTooltipContent",args:[tooltipContent,tooltipContentCount],scope:this},associatedElem:id,cssClass:"cellTooltip",closeButton:!1,arrow:!0,openOnMouseClick:!1,openOnMouseOver:!0,openOnMouseMove:!1,closeOnMouseOut:!0,displaySide:"top",isBodyReferencePosition:!0,isWrapPosition:!0,showDelay:0},507)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["cellTooltip",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printTooltipContent:function(tooltipContent,tooltipContentCount){try{with(this)tooltipContent.isATCAndMilesAndCashRefund&&this.macro_atcMilesAndCashResidualValueTooltipContent(),tooltipContent.mixedFareOrCabinList&&tooltipContent.mixedFareOrCabinList.length>0&&this.macro_mixedFareOrCabinTooltipContent(tooltipContent.mixedFareOrCabinList),tooltipContent.bestDiscountReasons&&(this.__$write("\n<div>\n",544),this.macro_discountTooltipContent(tooltipContent.bestDiscountReasons,tooltipContentCount),this.__$write("\n</div>\n",546)),tooltipContent.isWaitlist&&this.macro_waitlistTooltipContent()}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printTooltipContent",__filename,this["aria:currentLineNumber"]],_ex)}},macro_mixedFareOrCabinTooltipContent:function(mixedFareOrCabinList){try{with(this){this.__$write('\n<div class="tooltipContentWithIconContainer">\n<div class="tooltipContentWithIcon">\n<i class="icon-info-sign" aria-hidden="true"></i>\n</div>\n<div class="tooltipContentWithIconText">\n',554);var __v_3=mixedFareOrCabinList;void 0==mixedFareOrCabinList&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,559]);for(var mixedFareOrCabin_ct=0,__v_4=__v_3.length,mixedFareOrCabin_index=0;__v_4>mixedFareOrCabin_index;mixedFareOrCabin_index++){var mixedFareOrCabin=__v_3[mixedFareOrCabin_index];mixedFareOrCabin_ct++,this.__$write("\n<span>",560),this.__$write(mixedFareOrCabin,560),this.__$write("</span>\n",560)}this.__$write("\n</div>\n</div>\n",562)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["mixedFareOrCabinTooltipContent",__filename,this["aria:currentLineNumber"]],_ex)}},macro_discountTooltipContent:function(bestDiscountReasons,tooltipContentCount){try{with(this){var __v_5=bestDiscountReasons;void 0==bestDiscountReasons&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,567]);for(var bestDiscountReason_ct=0,__v_6=__v_5.length,bestDiscountReason_index=0;__v_6>bestDiscountReason_index;bestDiscountReason_index++){var bestDiscountReason=__v_5[bestDiscountReason_index];bestDiscountReason_ct++,this.__$write("\n\n<div ",568),1===tooltipContentCount&&this.__$write('class="discountReasonInPopup"',569),this.__$write('>\n<span class="icon-discount" aria-hidden="true"></span>\n<span>',569),this.__$write(bestDiscountReason.reason,571),this.__$write("</span>\n</div>\n",571)}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["discountTooltipContent",__filename,this["aria:currentLineNumber"]],_ex)}},macro_waitlistTooltipContent:function(){try{with(this)this.__$write('\n<div class="tooltipContentWithIconContainer">\n<div class="tooltipContentWithIcon">\n<i class="icon-stopwatch" aria-hidden="true"></i>\n</div>\n<div class="tooltipContentWithIconText">\n',577),this.__$write(_i18n.getLabel("tx_pltg_text_waitlistTooltip"),582),this.__$write("\n</div>\n</div>\n",583)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["waitlistTooltipContent",__filename,this["aria:currentLineNumber"]],_ex)}},macro_atcMilesAndCashResidualValueTooltipContent:function(){try{with(this)this.__$write('\n<div class="tooltipContentWithIconContainer">\n<div class="tooltipContentWithIcon">\n<i class="icon-info-sign" aria-hidden="true"></i>\n</div>\n<div class="tooltipContentWithIconText">\n',588),this.__$write(_i18n.getLabel("tx_pltg_text_ATCRefundMilesAndCashContactToConfirm"),593),this.__$write("\n</div>\n</div>\n",594)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["atcMilesAndCashResidualValueTooltipContent",__filename,this["aria:currentLineNumber"]],_ex)}},macro_notCombinableTooltipContent:function(options){try{with(this)1==options.boundIndex?(this.__$write("\n<span>\n",606),this.__$write(_i18n.getLabel(this.LABELS.NO_COMBINABLE_FARE_TOOLTIP),607),this.__$write("\n</span>\n",608)):(this.__$write("\n<span>\n",610),this.__$write(_i18n.getLabel(this.LABELS.NO_COMBINABLE_FARE_RETURN_TOOLTIP),611),this.__$write("\n</span>\n",612))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["notCombinableTooltipContent",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printRecommendation:function(options){try{with(this){var prefix=options.classPrefix,jawsLabel=options.jawsLabel||" table-bound"+options.boundIndex+"-column"+options.fareFamilyIndex,grouped=options.areFaresGrouped?"-grouped-":"",cellStatus=this.getCellStatus(options.infoCell);if(cellStatus===this.CELL_STATUS.SELECTABLE||cellStatus===this.CELL_STATUS.AUTO_UPSELLABLE)this.macro_printCell(options,grouped,prefix);else if(cellStatus===this.CELL_STATUS.DISABLED)this.__$write('\n<div aria-label="',624),this.__$write(jawsLabel,624),this.__$write('" class="cell-reco-unavailable bound-table-cell-reco">\n<i class="icon-ban-circle" aria-hidden="true"></i>\n',624),aria.utils.Array.contains([MILES_AND_CASH,MILES],options.awardConverterMode)?this.macro_disabledAwardCellMergedFlow(options.scope.data.config,options.infoCell,options.fareFamilyName):this.macro_disabledAwardCell(options.infoCell,prefix),this.__$write("\n</div>\n",631);else if(cellStatus===this.CELL_STATUS.NOT_COMBINABLE){var id=getNotCombinableId(options,grouped);this.__$write("\n<div ",634),this.__$writeId(id,634),this.__$write(' aria-label="',634),this.__$write(jawsLabel,634),this.__$write('" class="bound-table-cell-reco bound-table-cell-not-combinable">\n',634),this.macro_printNotCombinableCell(id,options),this.__$write("\n</div>\n",636)}else cellStatus===this.CELL_STATUS.SOLDOUT?this.macro_printSoldOutCell(options):(this.__$write('\n<div aria-label="',640),this.__$write(jawsLabel,640),this.__$write('" class="cell-reco-unavailable bound-table-cell-reco">\n<i class="icon-ban-circle" aria-hidden="true"></i>\n',640),this.macro_printAXNotAvailableCell(options.fareFamilyName),this.__$write("\n</div>\n",643))}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printRecommendation",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printSoldOutCell:function(options){try{with(this){var priceAvailable=!!options.infoCell.bestPriceFormattedText;this.__$write('\n<div class="cell-reco-unavailable cell-reco-sold-out bound-table-cell-reco\n',653),priceAvailable||this.__$write(" cell-reco-sold-out-no-price",654),this.__$write('">\n<i class="icon-seat-soldout" aria-hidden="true"></i>\n<span class="plnext-sr-only">\n',654),this.__$write(getSoldOutAX(options),657),this.__$write('\n</span>\n<p aria-hidden="true">',658),this.__$write(_i18n.getLabel("tx_pltg_text_SoldOut"),659),this.__$write("</p>\n",659),priceAvailable&&(this.__$write('\n<p class="non-available-price" aria-hidden="true">\n',661),this.__$write(getBestPriceFormatted(options.areFaresGrouped,options.infoCell.bestPriceFormatted),662),this.__$write("\n</p>\n",663)),this.__$write("\n</div>\n",665)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printSoldOutCell",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printNotCombinableCell:function(id,options){try{with(this)this.__$write('\n<div class="cell-reco-details cell-reco-not-combinable">\n',675),this.macro_printPriceContent(options),this.__$write('\n<span tabindex="0" aria-label = "',677),this.__$write(options.fareFamilyName,677),this.__$write(" ",677),this.__$write(options.infoCell.bestPriceFormattedText,677),this.__$write(" ",677),this.__$write(_i18n.getLabel(0===options.boundIndex?this.LABELS.NO_COMBINABLE_FARE_RETURN_TOOLTIP:this.LABELS.NO_COMBINABLE_FARE_TOOLTIP),677),this.__$write('" class="cell-reco-not-combinable-text">\n<span aria-hidden="true">',677),this.__$write(plnextv2.utils.I18n.getLabel(this.LABELS.NOT_AVAILABLE),678),this.__$write(' <span class="icon-info-sign not-combinable-icon"></span></span>\n</span>\n</div>\n',678),this.__$processWidgetMarkup("plnextv2.utils.widgets.PlnextLib","Tooltip",{id:id+"-tooltip",contentMacro:{name:"notCombinableTooltipContent",args:[options],scope:this},associatedElem:id,cssClass:"cellTooltip",closeButton:!1,arrow:!0,openOnMouseClick:!1,openOnMouseOver:!0,openOnMouseMove:!1,closeOnMouseOut:!0,displaySide:"top",isBodyReferencePosition:!0,isWrapPosition:!0,showDelay:0},681)
}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printNotCombinableCell",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printEmptyRecommendation:function(options){try{with(this){var jawsLabel=options.jawsLabel||" table-bound"+options.boundIndex+"-column"+options.fareFamilyIndex;this.__$write('\n<div aria-label="',704),this.__$write(jawsLabel,704),this.__$write('" class="cell-reco-unavailable bound-table-cell-reco">\n<i class="icon-ban-circle"></i>\n',704),this.macro_printAXNotAvailableCell(options.fareFamilyName),this.__$write("\n</div>\n",707)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printEmptyRecommendation",__filename,this["aria:currentLineNumber"]],_ex)}},macro_disabledAwardCellMergedFlow:function(config,infoCell,fareFamilyName){try{with(this)if(infoCell.cell&&infoCell.cell.notEnoughMiles)this.__$write('\n<div>\n<span title="',712),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_NotEnoughMilesSwitch"),713),this.__$write('">\n<span class="plnext-sr-only">',713),this.__$write(fareFamilyName,714),this.__$write("</span>\n<p>",714),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_NotEnoughMilesLabel"),715),this.__$write("</p>\n<p>",715),this.__$write(infoCell.milesText,716),this.__$write("</p>\n</span>\n</div>\n",716);else if(infoCell.onlyAvailableInCash){var currency=infoCell.currency;this.__$write('\n<span title="',721),this.__$write(_i18n.getLabel("tx_pltg_text_onlyAvailableInCashTooltip"),721),this.__$write('">\n<span class="plnext-sr-only">',721),this.__$write(fareFamilyName,722),this.__$write("</span>\n",722),config.isMultipleCurrencyPricingEnabled&&config.activateMcpOnAvail?this.__$write(_i18n.getStringFromPattern("tx_pltg_text_notAvailableInMiles",[currency.name,plnextv2.utils.StringUtils.evaluateUnicodeString(currency.code)]),724):this.__$write(_i18n.getStringFromPattern("tx_pltg_text_onlyAvailableIn",[currency.name,plnextv2.utils.StringUtils.evaluateUnicodeString(currency.code)]),728),this.__$write("\n</span>\n",732)}else if(infoCell.isMarginal){var currency=infoCell.currency;this.__$write('\n<span title="',735),this.__$write(_i18n.getStringFromPattern("tx_pltg_text_onlyAvailableInMilesTooltip",[currency.name]),735),this.__$write('">\n<span class="plnext-sr-only">',735),this.__$write(fareFamilyName,736),this.__$write("</span>\n",736),this.__$write(_i18n.getLabel("tx_pltg_text_onlyAvailableInMiles"),737),this.__$write("\n</span>\n",738)}else this.macro_printAXNotAvailableCell(fareFamilyName)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["disabledAwardCellMergedFlow",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printAXNotAvailableCell:function(fareFamilyName){try{with(this)this.__$write('\n<div>\n<span title="',745),this.__$write(plnextv2.utils.I18n.getLabel(this.LABELS.NO_FARE_INFO),746),this.__$write('">\n<span class="plnext-sr-only">',746),this.__$write(fareFamilyName,747),this.__$write("</span>\n",747),this.__$write(plnextv2.utils.I18n.getLabel(this.LABELS.NO_FARE_INFO),748),this.__$write("\n</span>\n</div>\n",749)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printAXNotAvailableCell",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printButtonWithPrice:function(options){try{with(this)options=this.getInfoButtonConfiguration(options),-1===options.data.rowInfo.fareFamilyIndex?0===options.data.boundIndex?(this.__$write('\n<div class="row-button-with-price-not-available">\n<span>',759),this.__$write(plnextv2.utils.I18n.getLabel(this.LABELS.NO_AVAIL_FARE_WITH_RETURN_DATE),760),this.__$write("</span>\n</div>\n",760)):(this.__$write('\n<div class="row-button-with-price-not-available">\n<span>',763),this.__$write(plnextv2.utils.I18n.getLabel(this.LABELS.NO_AVAIL_FARE_WITH_DEPARTURE_DATE),764),this.__$write("</span>\n</div>\n",764)):(options.data.rowInfo.bestCombination&&(this.__$write('\n<div class="row-button-with-price-lowest-fare tablet-lowest-fare">\n<span>',770),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_LowestFare"),771),this.__$write('</span>\n<i aria-hidden="true" title="',771),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_LowestFare"),772),this.__$write('" class="icon-lowest"></i>\n</div>\n',772)),this.macro_printPriceShortInformation(options),options.data.rowInfo.bestCombination&&(this.__$write('\n<div class="row-button-with-price-lowest-fare mobile-lowest-fare">\n<div class="plnext-sr-only">',779),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_LowestFare"),780),this.__$write("</div>\n<span>",780),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_LowestFare"),781),this.__$write('</span>\n<i aria-hidden="true" title="',781),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_LowestFare"),782),this.__$write('" class="icon-lowest"></i>\n</div>\n',782)),this.__$write('\n\n<div class="row-button-with-price-icon row-button-with-price-icon-right" aria-hidden="true">\n<i class="icon-chevron-down"></i>\n<i class="icon-chevron-up"></i>\n</div>\n\n',785),this.hasDiscountPercentage(options)&&(this.__$write('\n<span class="',792),this.__$write(options.prefix,792),this.__$write('-discount mobile-discount-info">\n<i class="icon-discount" aria-hidden="true"></i>&nbsp;',792),this.__$write(this.getDiscountInformationString(options),793),this.__$write("\n</span>\n",794)))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printButtonWithPrice",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printPriceShortInformation:function(options){try{with(this){options=this.getInfoButtonConfiguration(options),this.__$write('\n\n<div class="',802),this.__$write(options.prefix,803),this.__$write('-content">\n',803),this.macro_printPriceShortInformationWithInitialPrice(options),this.__$write('\n<span class="',805),this.__$write(options.prefix,805),this.__$write('-description">\n',805),this.__$write(this.getPriceInformationString(options.scope),806),this.__$write("\n</span>\n\n",807);var urgencyToBookArgs={scope:options.scope,flight:options.data.flight,boundIndex:options.data.boundIndex};this.macro_displayPopularityMessageInPriceInfoPanel(urgencyToBookArgs),this.hasDiscountPercentage(options)&&(this.__$write('\n<span class="',813),this.__$write(options.prefix,813),this.__$write('-discount">\n<i class="icon-discount" aria-hidden="true"></i>&nbsp;',813),this.__$write(this.getDiscountInformationString(options),814),this.__$write("\n</span>\n",815)),this.__$write("\n</div>\n",817)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printPriceShortInformation",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printPriceShortInformationWithInitialPrice:function(options){try{with(this)showInitialAndDiscountedPrice(options)&&options.data.rowInfo.bestDiscountPriceFormatted?(this.__$write('\n<span class="',823),this.__$write(options.prefix,823),this.__$write('-from-price-discount">\n',823),this.__$write(plnextv2.utils.I18n.getStringFromPattern("tx_pltg_pattern_FromPrice",[options.data.rowInfo.bestDiscountPriceFormatted]),824),this.__$write('\n</span>\n<span class="',827),this.__$write(options.prefix,828),this.__$write('-from-price row-info-bestprice-integer">\n',828),this.__$write(options.data.rowInfo.bestPriceFormatted,829),this.__$write("\n</span>\n",830)):(this.__$write('\n<span class="',832),this.__$write(options.prefix,832),this.__$write('-from-price">\n',832),this.__$write(plnextv2.utils.I18n.getStringFromPattern("tx_pltg_pattern_FromPrice",[options.data.rowInfo.bestPriceFormatted]),833),this.__$write("\n</span>\n",836))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printPriceShortInformationWithInitialPrice",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printHeaderCell:function(options,prefix){try{with(this)this.__$write("\n<header>\n",844),options.infoCell.isEligibleForDynamicWaiver?(this.__$write('\n<i aria-hidden="true"class="',846),this.__$write(this.getPrefixedClass("icon-waiver",prefix),846),this.__$write(" ",846),this.__$write(this.getPrefixedClass("reco-icon-waiver",prefix),846),this.__$write('" title="',846),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_FaresWaiverDescription"),846),this.__$write('"></i>\n<span class="plnext-sr-only">',846),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_FaresWaiverDescription"),847),this.__$write("</span>\n",847)):options.infoCell.bestCombination&&(this.__$write('\n<i aria-hidden="true" title=\'',849),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_LowestFares"),849),this.__$write("' class=\"",849),this.__$write(this.getPrefixedClass("icon-lowest",prefix),849),this.__$write(" ",849),this.__$write(this.getPrefixedClass("reco-icon-lowest",prefix),849),this.__$write('"></i>\n<span class="plnext-sr-only">',849),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_LowestFares"),850),this.__$write("</span>\n",850)),this.__$write('\n<span aria-hidden="true" title=\'',852),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_SelectedFare"),852),this.__$write("' class=\"",852),this.__$write(this.getPrefixedClass("icon-ok-sign",prefix),852),this.__$write(" ",852),this.__$write(options.infoCell.selectedClass,852),this.__$write('"></span>\n</header>\n',852)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printHeaderCell",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printPriceContent:function(options){try{with(this)this.__$write('\n<div class="cell-reco-price">\n',857),options.infoCell.bestDiscountPriceFormatted?(options.infoCell.bestDiscountReasons&&(this.__$write('\n<span class="plnext-sr-only">',860),this.macro_discountTooltipContent(options.infoCell.bestDiscountReasons),this.__$write("</span>\n",860)),this.__$write('\n<span class="plnext-sr-only">',862),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_InitialPrice"),862),this.__$write("</span>\n",862),this.__$write(options.infoCell.bestDiscountPriceFormatted,863),this.__$write('\n<span class="plnext-sr-only">',864),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_DiscountedPrice"),864),this.__$write("</span>\n",864),this.__$write(options.infoCell.bestPriceFormatted,865)):this.__$write(getBestPriceFormatted(options.areFaresGrouped,options.infoCell.bestPriceFormatted),867),this.displayInfoIcon(options)&&this.__$write('\n<span class="infoIconRecoCell">\n<i class="icon-info-sign" aria-hidden="true"></i>\n</span>\n',871),this.__$write("\n</div>\n",875)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printPriceContent",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printSeatLeft:function(options){try{with(this)options.flowType&&options.flowType==options.flowTypeRebookValue?options.allowATCLSAindicator&&options.infoCell.displayLSAInfo===this.DISPLAY_LSA_INFO_CONST.TAG_YES&&options.infoCell.numberOfSeatsLeft<this.MAX_SEATS_LEFT&&(this.__$write('\n<span class="cell-reco-seats-text ',883),this.__$write(options.className,883),this.__$write('" style="',883),this.__$write(options.seatLeftStyle,883),this.__$write('">&nbsp',883),this.__$write(getSeatsLeftText(options.infoCell.numberOfSeatsLeft),883),this.__$write("</span>\n",883)):options.allowLSAindicator&&options.infoCell.displayLSAInfo===this.DISPLAY_LSA_INFO_CONST.TAG_YES&&options.infoCell.numberOfSeatsLeft<this.MAX_SEATS_LEFT&&(this.__$write('\n<span class="cell-reco-seats-text ',889),this.__$write(options.className,889),this.__$write('" style="',889),this.__$write(options.seatLeftStyle,889),this.__$write('">&nbsp',889),this.__$write(getSeatsLeftText(options.infoCell.numberOfSeatsLeft),889),this.__$write("</span>\n",889))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printSeatLeft",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printWaitlist:function(){try{with(this)this.__$write('\n<span class="cell-reco-waitlist-text">\n<i class="icon-stopwatch" aria-hidden="true"></i>\n',896),this.__$write(_i18n.getLabel("tx_pltg_text_WaitlistStatus"),898),this.__$write("\n</span>\n",899)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printWaitlist",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printWaitlistInFlightDetails:function(){try{with(this)this.__$write('\n<div class="flight-details-waitlist">\n<div class="flight-details-waitlist__title">\n<i class="icon-stopwatch icon-waitlist" aria-hidden="true"></i> ',903),this.__$write(_i18n.getLabel("tx_pltg_text_WaitlistStatus"),905),this.__$write("\n</div>\n<div>",906),this.__$write(_i18n.getLabel("tx_pltg_text_waitlistTooltip"),907),this.__$write("</div>\n</div>\n",907)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printWaitlistInFlightDetails",__filename,this["aria:currentLineNumber"]],_ex)}},macro_disabledAwardCell:function(infoCell,prefix,jawsLabel){try{with(this)this.__$write('\n<div class="disabled-cell">\n<header>\n',912),infoCell.bestCombination&&(this.__$write('\n<i aria-hidden="true" title="',915),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_LowestFares"),915),this.__$write('" class="icon-lowest ',915),this.__$write(this.getPrefixedClass("icon-lowest",prefix),915),this.__$write(" ",915),this.__$write(this.getPrefixedClass("reco-icon-lowest",prefix),915),this.__$write('"></i>\n<span class="plnext-sr-only">',915),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_LowestFares"),916),this.__$write("</span>\n",916)),this.__$write('\n<span aria-hidden="true" title="',918),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_SelectedFare"),918),this.__$write('" class="',918),this.__$write(this.getPrefixedClass("icon-ok-sign",prefix),918),this.__$write(" icon-ok-sign ",918),this.__$write(infoCell.selectedClass,918),this.__$write('"></span>\n</header>\n\n<div class="',918),this.__$write(infoCell.selectedClass,921),this.__$write('" >\n<p class="cell-reco-price">\n',921),this.__$write(getNeededMilesAmount(infoCell.bestPriceFormatted),923),this.__$write("\n</p>\n</div>\n</div>\n",924)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["disabledAwardCell",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printFareFamilyName:function(fareFamilyName){try{with(this)this.__$write('\n<span class="cell-reco-fareFamilyName">',930),this.__$write(fareFamilyName,930),this.__$write("</span>\n",930)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printFareFamilyName",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printRoundTripLabel:function(){try{with(this)this.__$write('\n<span class="cell-reco-roundtrip">',934),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_RoundTripFare"),934),this.__$write("</span>\n",934)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printRoundTripLabel",__filename,this["aria:currentLineNumber"]],_ex)}},macro_showSRInstruction:function(showRecap,boundIndex,scope){try{with(this)if(showRecap){var boundSRInstructionText=this.getSRInstructionText(boundIndex),boundSRInstructionLinkCallback=this.getSRInstructionLinkCallback(boundIndex),boundSRInstructionLinkText=this.getSRInstructionLinkText(boundIndex),srInstructionId="sr-instruction-"+boundIndex;this.__$write('\n<div class="plnext-sr-only">\n<span id="',946),this.__$write(srInstructionId,947),this.__$write('" tabindex="0">',947),this.__$write(boundSRInstructionText,947),this.__$write('</span>\n<a href="javascript:void(0);" ',947),this.__$statementOnEvent("click",this.$normCallback({fn:boundSRInstructionLinkCallback,scope:this,args:[scope]}),948),this.__$write(">\n",952),this.__$write(boundSRInstructionLinkText,953),this.__$write("\n</a>\n</div>\n",954)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["showSRInstruction",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.flightInfo.FlightInfoScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/flightInfo/FlightInfoCSSLib.cml
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.flightInfo.FlightInfoCSSLib",$extends:require("ariatemplates/templates/CSSTemplate.js"),$constructor:function(){this.$CSSTemplate.constructor.call(this)},$destructor:function(){this.$CSSTemplate.$destructor.call(this)},$prototype:{macro_flightHeaderGeneral:function(context,scope){try{with(this)this.__$write(scope,5),this.__$write(" .header-text {\ntext-transform: uppercase;\n}\n\n",5),this.__$write(scope,9),this.__$write(" h2 {\nfont-family: ",9),this.__$write(context.$blackFont,10),this.__$write(";\n\nfont-size: 171.4%;\n}\n\n",10),this.__$write(scope,15),this.__$write(" .city-name {\ncolor: ",15),this.__$write(context.$blue,16),this.__$write(";\nword-break: break-all;\nfont-weight: ",16),this.__$write(context.$bold,18),this.__$write(";\nfont-size: 165%;\n}\n\n",18),this.__$write(scope,22),this.__$write(" .spacer hr{\nborder: 1px solid ",22),this.__$write(context.$grayBorder,23),this.__$write(";\nwidth: 20px;\nmargin: 0 10px;\n}\n\n",23),this.__$write(scope,28),this.__$write(" .date {\nfont-size: 128.6%;\nline-height: 1;\ntext-transform: uppercase;\n}\n\n",28),this.__$write(scope,34),this.__$write(" .header-panel {\ndisplay: flex;\nalign-items: center;\njustify-content: center;\n}\n\n",34),this.__$write(scope,40),this.__$write(" .header-panel div {\npadding: 0;\n}\n\n",40),this.__$write(scope,44),this.__$write(" .location-panel {\ndisplay: inline-block;\n}\n\n",44),this.__$write(scope,48),this.__$write(" .container-icon {\nfont-size: 170%;\ncolor: ",48),this.__$write(context.$grayBorder,50),this.__$write(";\nmargin-top:2px;\ndisplay: inline-block;\n}\n\n",50),this.__$write(scope,55),this.__$write(" .bound-header-container {\nwidth: 100%;\nmargin: 0 auto 30px;\n}\n\n",55),this.__$write(scope,60),this.__$write(" .container-location {\nwidth:50%;\n}\n\n",60),this.__$write(scope,64),this.__$write(" .container-text {\ndisplay: none;\n}\n",64)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["flightHeaderGeneral",__filename,this["aria:currentLineNumber"]],_ex)}},macro_flightHeaderMobile:function(context,scope){try{with(this)this.__$write(scope,73),this.__$write(" .bound-header {\ntext-align: left;\n}\n\n",73),this.__$write(scope,77),this.__$write(" .bound-header-container .spacer,\n",77),this.__$write(scope,78),this.__$write(" .bound-header-container .container-icon,\n",78),this.__$write(scope,79),this.__$write(" .bound-header-container .header-location span {\ndisplay: none;\n}\n\n",79),this.__$write(scope,83),this.__$write(" .bound-header-container .container-location {\ndisplay: inline-block;\nwidth: auto;\ntext-align: left;\n}\n\n",83),this.__$write(scope,89),this.__$write(" .header-panel {\ndisplay: block;\n}\n\n",89),this.__$write(scope,93),this.__$write(" .container-text.container-text-to {\ndisplay: inline;\n\nline-height: 1;\nvertical-align: text-top;\ntext-transform: lowercase;\n}\n\n",93),this.__$write(scope,101),this.__$write(" .container-location-from,\n",101),this.__$write(scope,102),this.__$write(" .container-text-to { margin-right: 6px; }\n\n\n",102),this.__$write(scope,105),this.__$write(" .header-date-calendarLink,\n",105),this.__$write(scope,106),this.__$write(" .date {\ndisplay: inline-block\n}\n",106)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["flightHeaderMobile",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$csslibs={},e.__$prefix=!0},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/flightInfo/FlightInfoScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.flightInfo.FlightInfoScript",$dependencies:["aria.utils.String","aria.utils.Array","plnextv2.utils.I18n","plnextv2.utils.WaitlistUtils","plnextv2.utils.ATCMilesAndCashRebookingUtils","aria.core.Browser","plnextv2.utils.context.AppContext"],$statics:{FLIGHT_CLASS:{STOP:"stop",DIRECT:"direct",TIME_FORMAT:"HH:mm"},MAX_SEATS_LEFT:9,DISPLAY_LSA_INFO_CONST:{TAG_YES:"YES",TAG_NO_OVER_THRESHOLD:"NO_OVER_THRESHOLD",TAG_NO_FORCE_NO:"NO_FORCE_NO",TAG_NO_NO_RULE:"NO_NO_RULE"},LABELS:{FARE_INSTRUCTION_IN_GROUP:"tx_pltg_pattern_FaresInstructionInGroup",NO_FARE_INFO:"tx_pltg_text_NoFare",NO_AVAIL_FARE_WITH_DEPARTURE_DATE:"tx_pltg_text_NoFareDeparture",NO_AVAIL_FARE_WITH_RETURN_DATE:"tx_pltg_text_NoFareReturn",NO_COMBINABLE_FARE_TOOLTIP:"tx_pltg_text_NoCombinableFareTooltip",NO_COMBINABLE_FARE_RETURN_TOOLTIP:"tx_pltg_text_NoCombinableFareReturnTooltip",NOT_AVAILABLE:"tx_pltg_text_NotAvailableLabel"},ICON:{PLANE:"icon-plane",PLANE_RETURN:"icon-plane-return",PLANE_RIGHT:"icon-plane-right"},MILES_AND_CASH:"MILES_AND_CASH",MILES:"MILES",FLEX_PREMIUM:"FPRM",CELL_STATUS:{SOLDOUT:"SOLDOUT",NOT_AVAILABLE:"NOT_AVAILABLE",SELECTABLE:"SELECTABLE",DISABLED:"DISABLED",NOT_COMBINABLE:"NOT_COMBINABLE",AUTO_UPSELLABLE:"AUTO_UPSELLABLE"},SEGMENT_CLASS:{AIRCRAFT:"aircraft",AIRCRAFT_NAME:"aircraft",AIRLINE:"airlines",AIRLINE_NAME:"airline-name"}},$constructor:function(){this._dateUtils=plnextv2.utils.DateUtils,this._flightsUtils=plnextv2.utils.FlightsUtils,this._i18n=plnextv2.utils.I18n,this._waitlistUtils=plnextv2.utils.WaitlistUtils,this._feeUtils=plnextv2.utils.FeeUtils,this._atcMilesAndCashRebookingUtils=plnextv2.utils.ATCMilesAndCashRebookingUtils,this._browserUtils=aria.core.Browser,this._appContext=plnextv2.utils.context.AppContext},$prototype:{getCellStatus:function(e){var t=this.CELL_STATUS.NOT_AVAILABLE;return e&&(t=this.CELL_STATUS.SELECTABLE,e.disabled?t=this.CELL_STATUS.DISABLED:e.isAutoUpsellable?t=this.CELL_STATUS.AUTO_UPSELLABLE:e.isNotCombinable?t=this.CELL_STATUS.NOT_COMBINABLE:e.cell&&e.cell.flight&&e.cell.flight.status===this.CELL_STATUS.SOLDOUT&&(t=this.CELL_STATUS.SOLDOUT)),t},getFlightDetails:function(e){var t=e.flight.segments,i=t.length;return{eLocation:t[t.length-1].endLocation,bLocation:t[0].beginLocation,segments:t,type:"from",locationGridCols:e.locationGridCols,landingDate:new Date(t[i-1].endDate),takeoffDate:new Date(t[0].beginDate),classPrefix:e.classPrefix,endDayIndicator:plnextv2.utils.StringResources.displayDayDifference(t[i-1].endDayIndicator,"+"),boundIndex:e.boundIndex,rowIndex:e.rowIndex}},getNotCombinableId:function(e,t){return"table-bound"+e.boundIndex+"-cell"+t+e.fareFamilyIndex+e.rowIndex+"-available"},getPrefixedClass:function(e,t){return t&&(e+=" "+t+"-"+e),e},getFlightDetailsClass:function(e,t){var i=[this.getPrefixedClass("flight-details",e),this.getPrefixedClass("flight-details-"+(t?"with":"without")+"-button",e),"row"];return i.join(" ")},getInfoButtonConfiguration:function(e){var t={scope:this,classes:[],prefix:"row-button-with-price",data:{getInfoRow:Aria.empty,rowInfo:{}},events:{onClick:{fn:Aria.empty}}};return this.$json.inject(e,t,!0),t.data.rowInfo=t.data.getInfoRow(),t},getNeededMilesAmount:function(e){return this._i18n.getStringFromPattern("tx_pltg_pattern_NeededMiles",[e])},getCheckboxAriaLabel:function(e){var t="",i=" ",n=", ",s=function(e){var t=document.createElement("span");return t.innerHTML=e,t.textContent||t.innerText};if(e.fareFamilyName&&(t+=e.fareFamilyName),e.displayRoundTripFare&&(t+=i+this._i18n.getLabel("tx_pltg_text_RoundTripFare")),t+=this.getCheckboxAriaLabelPriceSection(e),e.infoCell.bestCombination&&(t+=i+this._i18n.getLabel("tx_pltg_text_LowestFares")),e.characteristicsList)for(var a=this.getFareFamilyCharacterstics(e.ffCode,e.characteristicsList),r=0,o=a.length;o>r;r++)t+=i+s(a[r].description);return t+=this._getCheckboxAriaLabelMixedFareOrCabin(e),(e.flowType&&e.flowType==e.flowTypeRebookValue&&e.allowATCLSAindicator||e.allowLSAindicator)&&e.infoCell.displayLSAInfo===this.DISPLAY_LSA_INFO_CONST.TAG_YES&&e.infoCell.numberOfSeatsLeft<this.MAX_SEATS_LEFT&&(t+=n+this.getSeatsLeftText(e.infoCell.numberOfSeatsLeft)),this.isWaitlist(e)&&(t+=n+this._i18n.getLabel("tx_pltg_text_WaitlistStatus")+n+this._i18n.getLabel("tx_pltg_text_waitlistTooltip")),this._atcMilesAndCashRebookingUtils.isATCAndMilesAndCashRefund(e)&&(t+=n+this._i18n.getLabel("tx_pltg_text_ATCRefundMilesAndCashContactToConfirm")),e.areFaresGrouped&&(t+=n+this._i18n.getStringFromPattern(this.LABELS.FARE_INSTRUCTION_IN_GROUP,[e.nbFaresInGroup,e.fareFamilyName])),e.infoCell.ffIsDynamic&&e.fareFamilyName&&(t+=n+plnextv2.utils.I18n.getLabel("tx_pltg_text_DFFValueDealLabel")+n+plnextv2.utils.I18n.getStringFromPattern("tx_pltg_text_DFFValueDealDescription",[e.fareFamilyName])),t+=this.getCheckboxAriaLabelAutocollapseSection(e),aria.utils.String.escapeForHTML(t)},getCheckboxAriaLabelPriceSection:function(e){var t="",i=" ";return e.infoCell.bestDiscountPriceFormatted?(e.infoCell.bestDiscountReasons&&this.displayInitialAndDiscountedPrice(e,e.infoCell.bestDiscountPriceFormatted)&&(t+=i+this._joinDiscountReasons(e.infoCell.bestDiscountReasons,i)),t+=i+this.getCheckboxAriaLabelDiscountPriceSection(e.infoCell.bestDiscountPriceFormattedText,e.infoCell.bestPriceFormattedText)):t+=e.areFaresGrouped?i+this.getBestPriceFormatted(!0,e.infoCell.bestPriceFormattedText):i+e.infoCell.bestPriceFormattedText,t},getCheckboxAriaLabelDiscountPriceSection:function(e,t){return this._i18n.getStringFromPattern("tx_pltg_pattern_AriaLabelAirDiscountPrice",[e,t])},getCheckboxAriaLabelAutocollapseSection:function(e){var t="",i=" ",n=", ";return e.isAutocollapseEnabled&&(t+=n+plnextv2.utils.I18n.getLabel("tx_pltg_text_ClickToSelectFare"),("O"===e.tripType||1===e.boundIndex&&"THREE_STEPS"!==e.collapsedViewConfig)&&(t+=i+plnextv2.utils.I18n.getLabel("tx_pltg_text_And")+i+plnextv2.utils.I18n.getLabel("tx_pltg_text_ContinueToNextStep"))),t},getSeatsLeftText:function(e){return 1===e?this._i18n.getLabel("tx_pltg_text_oneSeatLeft"):this._i18n.getStringFromPattern("tx_pltg_pattern_seatsLeft",[e])},getBestPriceFormatted:function(e,t){return e?this._i18n.getStringFromPattern("tx_pltg_pattern_FromPrice",[t]):t},getIconPlaneBoundClass:function(e){var t=e%2==0?this.ICON.PLANE:this.ICON.PLANE_RETURN;return t},getBoundHeaderText:function(e){var t=this._i18n.getLabel(e%2===0?"tx_pltg_text_tablet_OutboundHeader":"tx_pltg_text_tablet_InboundHeader");return t},getFareFamilyCharacterstics:function(e,t,i){var n=this.mergeFareFamilyCharacterstics(e,t);if(0===n.length||!i)return n;for(var s=[],a=Math.round(n.length/2),r=0;a>r;r++)s.push(n[r]),n[r+a]&&s.push(n[r+a]);return s},isValidFareFamilyCharacterstics:function(e,t){return t&&t[e]&&(t[e].FREE&&t[e].FREE.length>0||t[e].PAID&&t[e].PAID.length>0)},mergeFareFamilyCharacterstics:function(e,t){return this.isValidFareFamilyCharacterstics(e,t)?[].concat(t[e].PAID||[]).concat(t[e].FREE||[]):[]},_joinDiscountReasons:function(e,t){return aria.utils.Array.map(e,function(e){return e.reason}).join(t)},getSRInstructionText:function(e){var t=this._i18n.getLabel(0===e?"tx_pltg_text_DepartureSelected":"tx_pltg_text_ReturnSelected");return t},getSRInstructionLinkCallback:function(e){return 0===e?function(){aria.utils.Dom.getElementById("availability-bound-1").focus()}:function(){aria.utils.Dom.getElementsByClassName(aria.utils.Dom.getElementById("page-content"),"plnext-widget-btn")[0].focus()}},getSRInstructionLinkText:function(e){var t=this._i18n.getLabel(0===e?"tx_pltg_text_skipToInbound":"tx_pltg_text_skipToContinueButton");return t},getDFFDealStyle:function(e){return"border-color:"+e+" transparent transparent transparent;background:"+e+";"},showInitialAndDiscountedPrice:function(e){return e.scope.data.config.displayDynamicDisc===this._feeUtils.DISPLAY_DYNAMIC_DISCOUNT_ALL||e.scope.data.config.displayDynamicDisc===this._feeUtils.DISPLAY_DYNAMIC_DISCOUNT_AVAIL||this.isPromoCodeDiscountEnabled(e)},displayInitialAndDiscountedPrice:function(e,t){return!(!this.showInitialAndDiscountedPrice(e)||!t)},isPromoCodeDiscountEnabled:function(e){return!!e.scope.data.config.enableDiscountReasons},isWaitlist:function(e){return e&&e.infoCell&&this._waitlistUtils.isWaitlistStatus(e.infoCell.status)},isWaitlistByBound:function(e){if(e&&e.scope&&e.scope.data&&aria.utils.Type.isArray(e.scope.data.listItinerary)){var t=e.scope.data.listItinerary[e.boundIndex];return t&&this._waitlistUtils.isWaitlistAvailableForBound(t)}return!1},getTooltipContent:function(e){var t={},i=this.getMixedFareOrCabinList(e);return i.length>0&&(t.mixedFareOrCabinList=i),e&&e.infoCell&&e.infoCell.bestDiscountReasons&&this.displayInitialAndDiscountedPrice(e,e.infoCell.bestDiscountPriceFormatted)&&(t.bestDiscountReasons=e.infoCell.bestDiscountReasons),this.isWaitlist(e)&&(t.isWaitlist=!0),this._atcMilesAndCashRebookingUtils.isATCAndMilesAndCashRefund(e)&&(t.isATCAndMilesAndCashRefund=!0),t},getMixedFareOrCabinList:function(e){var t=[];return this._isMixedFareOrCabin(e)&&(e.infoCell.mixedFFInfoList&&e.infoCell.mixedFFInfoList.length>0&&aria.utils.Array.pushAll(t,e.infoCell.mixedFFInfoList),e.infoCell.mixedCabinInfoList&&e.infoCell.mixedCabinInfoList.length>0&&aria.utils.Array.pushAll(t,e.infoCell.mixedCabinInfoList)),t},_getCheckboxAriaLabelMixedFareOrCabin:function(e){var t="",i=this.getMixedFareOrCabinList(e);if(i.length>0)for(var n=0;n<i.length;n++){var s=i[n];t+=s,n!==i.length-1&&(t+=" ")}return t=t?", "+t:""},_isMixedFareOrCabin:function(e){return e.infoCell.mixedFFInfoList&&e.infoCell.mixedFFInfoList.length>0||e.infoCell.mixedCabinInfoList&&e.infoCell.mixedCabinInfoList.length>0},getPriceInformationString:function(e){var t="",i=e.data.numberOfTravellers,n=!!e.moduleCtrl.shouldDisplayRoundTripFare&&e.moduleCtrl.shouldDisplayRoundTripFare();return t=e.data.config.displayPerPassenger?this._i18n.getLabel("O"!==e.data.search.tripType?n?"tx_pltg_text_priceRoundTripPerOnePNR":"tx_pltg_text_priceOneWayPerOnePNR":"tx_pltg_text_pricePerOnePAX"):"I"===e.data.search.pricingType&&"O"!==e.data.search.tripType?1===i?this._i18n.getLabel("tx_pltg_text_priceRoundTripPerOnePAX"):this._i18n.getStringFromPattern("tx_pltg_pattern_priceRoundTripPerManyPAX",[i]):"O"===e.data.search.tripType?1===i?this._i18n.getLabel("tx_pltg_text_pricePerOnePAX"):this._i18n.getStringFromPattern("tx_pltg_pattern_pricePerManyPAX",[i]):1===i?this._i18n.getLabel(n?"tx_pltg_text_priceRoundTripPerOnePAX":"tx_pltg_text_priceOneWayPerOnePAX"):this._i18n.getStringFromPattern(n?"tx_pltg_pattern_priceRoundTripPerManyPAX":"tx_pltg_pattern_priceOneWayPerManyPAX",[i])},isUrgencyToBookActivated:function(e){return null!=e.scope.moduleCtrl&&null!=e.scope.moduleCtrl.isUrgencyToBookActivated?null!=e.flight&&null!=e.flight.proposedBoundId?e.scope.moduleCtrl.isUrgencyToBookActivated(e.flight.proposedBoundId,e.boundIndex):e.scope.moduleCtrl.isUrgencyToBookActivated(null,e.boundIndex):!1},getPopularityMessage:function(e){return null!=e.flight&&null!=e.flight.proposedBoundId?e.scope.moduleCtrl.getPopularityMessageForBooking(e.flight.proposedBoundId,e.boundIndex):e.scope.moduleCtrl.getPopularityMessageForBooking(null,e.boundIndex)},hasDiscountPercentage:function(e){var t=e.data.rowInfo.bestDiscountPercentage;return t>0},getDiscountInformationString:function(e){var t="",i=e.data.rowInfo.bestDiscountPercentage;if(i>0){var n=Math.round(100*i);t=this._i18n.getStringFromPattern("tx_pltg_pattern_bestDiscountInformation",[n])}return t},displayInfoIcon:function(e){return this._atcMilesAndCashRebookingUtils.isATCAndMilesAndCashRefund(e)||this._isMixedFareOrCabin(e)},getBoundDate:function(e){return this._browserUtils.isSafari||this._browserUtils.isSafariMobile?this._dateUtils.dateAtStartOfDay(e):new Date(e)},getSoldOutAX:function(e){var t=this._i18n.getStringFromPattern("tx_pltg_pattern_soldOutFareNoPriceAX",[e.fareFamilyName]);return e.infoCell.bestPriceFormattedText&&(t=this._i18n.getStringFromPattern("tx_pltg_pattern_soldOutFarePriceAX",[e.fareFamilyName,e.infoCell.bestPriceFormattedText])),t},getStopClass:function(e){return e>0?this.FLIGHT_CLASS.STOP:this.FLIGHT_CLASS.DIRECT},flightTimeParse:function(e){return this._dateUtils.formatDuration(this._flightsUtils.getFlightDuration(e.flight.segments),this.FLIGHT_CLASS.TIME_FORMAT)},isFlexPremium:function(){return this._appContext._currentPageId&&this._appContext._currentPageId===this.FLEX_PREMIUM},airCraftClass:function(){return this.isFlexPremium()?this.SEGMENT_CLASS.AIRCRAFT:this.SEGMENT_CLASS.AIRLINE},airCraftNameClass:function(){return this.isFlexPremium()?this.SEGMENT_CLASS.AIRCRAFT_NAME:this.SEGMENT_CLASS.AIRLINE_NAME},getDirectOrStopLabel:function(e){return this._flightsUtils.displayNumberOfStops(e.segments,plnextv2.utils.I18n.getLabel("tx_pltg_text_Direct"))}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/flightInfo/FlightInfoStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.flightInfo.FlightInfoStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n.discountReasonInPopup span {\ndisplay: table-cell;\nvertical-align: top;\n}\n\n.discountReasonInPopup {\ndisplay: table-row;\nfont-size: 14px;\n}\n\n.discountReasonInPopup .icon-discount {\nfont-size: 20px;\ncolor: ",8),this.__$write(this.$whiteDark,20),this.__$write(";\npadding: 2px;\n}\n\n.popover.cellTooltip {\ncolor: ",20),this.__$write(this.$white,25),this.__$write(";\nbackground-color: ",25),this.__$write(this.$grayDarker,26),this.__$write(";\nfont-size: 95%;\n}\n\n.popover.cellTooltip > .arrow:after {\nborder-top-color: ",26),this.__$write(this.$grayDarker,31),this.__$write(";\n}\n\n@media (max-width: ",31),this.__$write(this.breakpoints.SM_MAX,34),this.__$write(") {\n.popover.cellTooltip{\nwidth: 250px;\n}\n}\n\n.tooltipContentWithIconContainer {\ndisplay: table-row;\n}\n\n.tooltipContentWithIcon,\n.tooltipContentWithIconText {\ndisplay: table-cell;\nvertical-align: top;\n}\n\n.tooltipContentWithIcon {\npadding-right: 5px;\n}\n\n.infoIconRecoCell {\npadding-left: 2px;\n}\n\n.cell-reco-sold-out {\ntext-align: center;\nwidth: 100%;\npadding-top: 1.4em;\n}\n\n.cell-reco-sold-out-no-price {\npadding-top: 1.6em;\n}\n\n.tooltipContentWithIconText span {\ndisplay: inline-block;\npadding-bottom: 5px;\n}\n\n.cell-reco-unavailable .non-available-price {\ntext-decoration: line-through;\ncolor: ",34),this.__$write(this.$red,75),this.__$write(";\n}\n\n.cell-reco-unavailable .non-available-price * {\nfont-size: 100%;\ndisplay: inline;\nfont-family:",75),this.__$write(this.$normalFont,81),this.__$write(';\n}\n\n.cell-reco-unavailable .non-available-price .cell-reco-bestprice-integer:before {\ncontent: " ";\n}\n\n.flight-details-container-row {\nmargin: 0;\n}\n\n.flight-details-container-row .airportname,\n.flight-details-container-row .stops > span {\nfont-size: 77.7777%;\nfont-family: ',81),this.__$write(this.$normalFont,95),this.__$write(";\n}\n\n.flight-details-container-row .time-from,\n.flight-details-container-row .time-to {\nfont-size: 100%;\nfont-family: ",95),this.__$write(this.$blackFont,101),this.__$write(";\n}\n\n.flight-details-container-row .stops {\ndisplay: block;\nposition: relative;\nz-index: 1;\nline-height: 2rem;\nmargin-top: 0.1rem;\nmargin-bottom: 0.1rem;\npadding-top: 0rem;\npadding-bottom: 0.2rem;\nmargin-left: 3.25rem;\nfont-weight: ",101),this.__$write(this.$bold,114),this.__$write(";\n}\n\n.flight-details-group {\nmargin: 1rem 0 0 0;\n}\n\n.flight-details-group .flight-duration-info {\nmargin: 0 0 1rem 0;\nline-height: 100%;\n}\n\n.flight-details-group .airlines {\nfont-size: 85.714%;\npadding: 0;\n}\n\n.flight-details-container-row .stops .stop {\ncolor: ",114),this.__$write(this.$red,132),this.__$write(";\nfont-weight: ",132),this.__$write(this.$thin,133),this.__$write(';\nmargin-left: 0.2em;\nmargin-bottom: 0.2em;\n}\n\n.flight-details-container-row .stops .stop::before {\ncontent: "";\nheight: 100%;\nposition: absolute;\nz-index: 0;\ntop: 0;\nleft: -0.65em;\nborder-left: 1px solid ',133),this.__$write(this.$grayDarken,145),this.__$write(";\nborder-left-color: ",145),this.__$write(this.$grayDarken,146),this.__$write(';\nborder-left-style: dotted;\n}\n\n.flight-details-container-row .stops .stop::after {\ncontent: "";\nwidth: 0.6em;\nheight: 0.55em;\nposition: absolute;\nz-index: 0;\ntop: 55%;\nbottom: 0;\nmargin-top: -0.3em;\nleft: -1.28rem;\nmargin-left: 0;\nbackground-color: ',146),this.__$write(this.$red,161),this.__$write(";\nborder-radius: 100%;\n}\n\n.flight-details-container-row .stops .direct {\ncolor: ",161),this.__$write(this.$blue,166),this.__$write(';\nmargin-left: 0.2em;\n}\n\n.flight-details-container-row .stops .direct::before {\ncontent: "";\ndisplay: block;\nheight: 80%;\nposition: absolute;\nz-index: 0;\ntop: 0;\nleft: -0.9rem;\nborder-left: 1px solid ',166),this.__$write(this.$blue,178),this.__$write(';\n}\n\n.flight-details-container-row .stops .direct::after {\ncontent: "\\F0D7";\ndisplay: block;\nz-index: 0;\nposition: absolute;\ntop: 95%;\nleft: -1.25rem;\nmargin-top: -0.9em;\nfont-family: newUI-icons;\n}\n\n.bound-table-flightline-header h3.availability-flight-details {\nline-height: 110%;\nmargin-bottom: 0.4em;\n}\n\n@media (max-width:',178),this.__$write(this.breakpoints.SM_MAX,197),this.__$write(") {\n.cell-reco-sold-out {\npadding: 0.3em 0;\n}\n}\n",197)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/homeSearchBtn/styles/HomeSearchBtnStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.homeSearchBtn.styles.HomeSearchBtnStyle",$extends:require("plnextv2/components/reservationInfo/desktop/styles/DReservationInfoStyle.tpl.css"),$constructor:function(){this.$DReservationInfoStyle.constructor.call(this)},$destructor:function(){this.$DReservationInfoStyle.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n#bottom-buttons button {\nwidth: 100%;\nbackground-color: ",8),this.__$write(this.$gray,11),this.__$write(";\nborder-color: ",11),this.__$write(this.$gray,12),this.__$write(';\n}\n\n#bottom-buttons button [class *= "icon"] {\nmargin-right: 5px;\n}\n\n#bottom-buttons .row {\nfloat: right;\nwidth: 50%;\n}\n\n#bottom-buttons .row div:only-child {\nfloat: right;\n}\n\n@media all and (max-width: 600px) {\n#bottom-buttons .row {\nfloat: none;\nwidth: 100%;\nmargin-left: 0px;\n}\n}\n\n@media all and (max-width: 479px) {\n#bottom-buttons .col-xxs-24 {\nwidth: 100%;\n}\n\n#bottom-buttons .row div:nth-child(2) {\nmargin-top: 10px;\n}\n}\n\n',12)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$DReservationInfoStyle.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/homeSearchBtn/views/HomeSearchBtn.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/FareUtils.js"),require("plnextv2/utils/BootstrapUtils.js"),require("plnextv2/utils/macroLibs/uiWidgets/UIWidgets.tml"),require("plnextv2/utils/macroLibs/homeSearchBtn/views/HomeSearchBtnScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.homeSearchBtn.views.HomeSearchBtn",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$HomeSearchBtnScript.constructor.call(this)},$destructor:function(){this.$HomeSearchBtnScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_homeSearchMenu:function(options,controller){try{with(this)this.__$write('\n<div class="row">\n',15),options.includeHomepage&&(this.__$write('\n<div class="home-btn col-xxs-24 col-xs-12">\n',17),this.macro_printHomeButton(options),this.__$write("\n</div>\n",19)),options.hideStartOver||(this.__$write('\n<div class="start-new-search-btn col-xxs-24 col-xs-12">\n',23),this.macro_printNewSearchButton(options,controller),this.__$write("\n</div>\n",25)),this.__$write("\n</div>\n",27)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["homeSearchMenu",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printNewSearchButton:function(options,controller){try{with(this)this.uiWidget.macro_button({bind:null,text:plnextv2.utils.I18n.getLabel("tx_pltg_text_startNewSearch"),type:"secondary",noLeftIcon:!1,noRightIcon:!0,noIcons:!1,onClick:{fn:"startNewSearch",scope:this,args:{options:options,scope:controller}},classList:{button:["reservation-btn","new-search"],leftIcon:["reservation-icon","icon-search"]},attributes:{type:"button"}})}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printNewSearchButton",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printHomeButton:function(options){try{with(this)this.uiWidget.macro_button({bind:null,text:plnextv2.utils.I18n.getLabel("tx_pltg_text_goToHome"),type:"secondary",noLeftIcon:!1,noRightIcon:!0,noIcons:!1,onClick:{fn:"redirectToHomepage",scope:this,args:options},classList:{button:["reservation-btn","go-home"],leftIcon:["reservation-icon","icon-home"]},attributes:{type:"button"}})}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printHomeButton",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={uiWidget:"plnextv2.utils.macroLibs.uiWidgets.UIWidgets"},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.homeSearchBtn.views.HomeSearchBtnScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/homeSearchBtn/views/HomeSearchBtnScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.homeSearchBtn.views.HomeSearchBtnScript",$dependencies:["plnextv2.utils.NativeAppCommunicationWrapper","plnextv2.utils.DeviceUtils"],$constructor:function(){this.merciApp=plnextv2.utils.NativeAppCommunicationWrapper,this.deviceUtils=plnextv2.utils.DeviceUtils},$prototype:{getPrefixedClass:function(e,t){return t&&(e+=" "+t+"-"+e),e},startNewSearch:function(e,t){t.scope.startOver?t.scope.startOver():t.scope.startNewSearch()},redirectToHomepage:function(e,t){if(this.isMerciApp())this.merciApp.navigateTo({pageId:"HOME"});else{var i="";t.homepageProtocol&&(i+=t.homepageProtocol),t.homepageURL&&(i+=t.homepageURL,window.location.href=i)}},isMerciApp:function(){return this.deviceUtils.isEmbeddedInApp()&&this.merciApp.isEnabled()}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/insurance/desktop/views/DInsuranceFOIDView.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/StringResources.js"),require("plnextv2/utils/DateUtils.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/formComponent/FormMacro.tml"),require("plnextv2/utils/macroLibs/insurance/desktop/views/DInsuranceFOIDViewScript.js"),require("ariatemplates/html/Template.js"),require("plnextv2/utils/widgets/plnextLib/dialog/core/Dialog.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.insurance.desktop.views.DInsuranceFOIDView",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$DInsuranceFOIDViewScript.constructor.call(this)},$destructor:function(){this.$DInsuranceFOIDViewScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_displayInsuranceCardsResp:function(data,currScope){try{with(this){this.__$write('\n<div class="foid-form">\n<h3 class="foid-tittle">\n',23),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_InsuranceFOIDText"),25),this.__$write('\n</h3>\n<div class="foid-form-content">\n',26);var count=1,__v_1=paxRowIterator(currScope);void 0==paxRowIterator(currScope)&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,29]);var rowIterator_ct=0;for(var rowIterator_index in __v_1)if(__v_1.hasOwnProperty(rowIterator_index)&&!this.$json.isMetadata(rowIterator_index)){var rowIterator=__v_1[rowIterator_index];rowIterator_ct++;var __v_2=rowIterator;void 0==rowIterator&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,30]);var traveller_ct=0;for(var traveller_index in __v_2)if(__v_2.hasOwnProperty(traveller_index)&&!this.$json.isMetadata(traveller_index)){var traveller=__v_2[traveller_index];traveller_ct++;var mainDiv="mainDiv_"+traveller.Type.code+"_"+traveller.Id;this.__$write("\n<div id=",32),this.__$write(mainDiv,32),this.__$write(' class="foid-traveller">\n',32),this.macro_renderFOIDTravellerHeaderResp(traveller,currScope,count),isInfant(traveller)?this.macro_renderInsuranceInfantFOID(currScope,traveller):(this.__$write('\n<div class="">\n',37),this.macro_renderInsuranceFOIDWidgets(currScope,traveller,!0),this.__$write("\n</div>\n",39)),this.__$write("\n</div>\n",41);var count=count+1}}this.__$write("\n</div>\n</div>\n",46)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayInsuranceCardsResp",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayAddressCollectionForm:function(currScope,parentModel,type,widgets,formTitle){try{with(this)currScope.data.insurance.addressType&&this.__$processWidgetMarkup("aria.html.HtmlLibrary","Template",{classpath:"plnextv2.components.common.address.desktop.views.Address",type:"div",data:{templateName:"insuranceAddress",parentData:currScope.data,parentModel:parentModel,parentTemplate:this,formTitle:formTitle,addressInformation:currScope.data.insurance.addressInformation,widgets:{firstLine:widgets[type+"AddressFirstLine"],secondLine:widgets[type+"AddressSecondLine"],postalCode:widgets[type+"PostalCode"],city:widgets[type+"City"],state:widgets[type+"State"],country:widgets[type+"Country"]}},attributes:{classList:["insurance-address-form"]}},54)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayAddressCollectionForm",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderInsuranceFOIDTravellersHeader:function(traveller){try{with(this){var cardId="travellerCardPAXId"+traveller.Id;this.__$write('\n<header class="insurance-foid-heading" ',84),this.__$writeId(cardId,84),this.__$write('>\n<div class="avatar-heading">\n',84),"CHD"===traveller.Type.code||_paxUtils.isTravellerTypeUNN(traveller.Type.code)?(this.__$write('\n<i class="insurance-foid-avatar-icon icon-child" aria-hidden="true"></i>\n<span class="plnext-sr-only">',87),this.__$write(plnextv2.utils.StringResources.getTravellerLabelKey(traveller.Type,1),88),this.__$write("</span>\n",88)):"INF"===traveller.Type.code?(this.__$write('\n<i class="insurance-foid-avatar-icon icon-infant" aria-hidden="true"></i>\n<span class="plnext-sr-only">',90),this.__$write(plnextv2.utils.StringResources.getTravellerLabelKey(traveller.Type,1),91),this.__$write("</span>\n",91)):0!=traveller.Infants.length?(this.__$write('\n<i class="insurance-foid-avatar-icon icon-adult-infant" aria-hidden="true"></i>\n<span class="plnext-sr-only">',93),this.__$write(plnextv2.utils.StringResources.getTravellerLabelKey(traveller.Type,1),94),this.__$write(" ",94),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_TravelWithInfant"),94),this.__$write("</span>\n",94)):(this.__$write('\n<i class="insurance-foid-avatar-icon icon-',96),this.__$write(traveller.Type.code,96),this.__$write(' icon-adult" aria-hidden="true"></i>\n<span class="plnext-sr-only">',96),this.__$write(plnextv2.utils.StringResources.getTravellerLabelKey(traveller.Type,1),97),this.__$write("</span>\n",97)),this.__$write('\n</div>\n<div class="traveller-heading">\n<legend class="traveller-formating">\n<h3>\n',99),null!=traveller.IdentityInformation.IDEN_FirstName&&(this.__$write('\n<span class="insurance-foid-span traveller-firstname">',104),this.__$write(aria.utils.String.capitalize(traveller.IdentityInformation.IDEN_FirstName.toLowerCase())+" ",104),this.__$write("</span>\n",104)),this.__$write('\n<span class="insurance-foid-strong traveller-lastname">',106),this.__$write(aria.utils.String.capitalize(traveller.IdentityInformation.IDEN_LastName.toLowerCase()),106),this.__$write("</span>\n</h3>\n</legend>\n</div>\n</header>\n",106)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderInsuranceFOIDTravellersHeader",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderInsuranceFOIDWidgets:function(currScope,traveller,responsive){try{with(this){if(this.__$write("\n<div>\n<p>\n",114),0!=traveller.Infants.length&&!responsive){this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_InsuredWithInfant"),117);var infant=currScope.moduleCtrl.getInfant(traveller);null!=infant.IdentityInformation.IDEN_FirstName&&(this.__$write('\n<span class="insurance-foid-strong infant-firstname">',120),this.__$write(aria.utils.String.capitalize(infant.IdentityInformation.IDEN_FirstName.toLowerCase())+" ",120),this.__$write("</span>\n",120)),this.__$write('\n<span class="insurance-foid-strong infant-lastname">',122),this.__$write(aria.utils.String.capitalize(infant.IdentityInformation.IDEN_LastName.toLowerCase()),122),this.__$write("</span>\n",122)}if(this.__$write('\n</p>\n</div>\n<div>\n<div class="insurance-foid-dob">\n',124),currScope.data.config.isDOBRequired){var widgetName=currScope.moduleCtrl.getDOBWidgetName(traveller);this.formLib.macro_renderStandardWidget(currScope.widgets[widgetName],currScope.data.insuranceFOIDData,currScope,!0)}if(this.__$write('\n</div>\n<div class="insurance-foid-document">\n',132),this.formLib.macro_formGroupStart(currScope.widgets["insuranceFOIDId-"+traveller.Id],currScope),this.formLib.macro_formLabel(currScope.widgets["insuranceFOIDId-"+traveller.Id],currScope),this.formLib.macro_formWidget(currScope.widgets["insuranceFOIDId-"+traveller.Id],currScope.data.insuranceFOIDData,currScope,{onChange:[{fn:"onInsuranceFOIDIDDocumentChanged",scope:currScope,args:{selectedTraveller:traveller,onDropdownChange:!0}}]}),this.formLib.macro_formError(currScope.widgets["insuranceFOIDId-"+traveller.Id],currScope),this.formLib.macro_formGroupEnd(),this.__$write('\n</div>\n<span class=" help-block" style="display:none" id="" atdelegate="d51">&nbsp;</span>\n<div class="insurance-foid-number">\n',143),this.formLib.macro_formGroupStart(currScope.widgets["insuranceFOIDDocumentName-"+traveller.Id],currScope),this.formLib.macro_formLabel(currScope.widgets["insuranceFOIDDocumentName-"+traveller.Id],currScope),this.formLib.macro_formWidget(currScope.widgets["insuranceFOIDDocumentName-"+traveller.Id],currScope.data.insuranceFOIDData,currScope),this.formLib.macro_formError(currScope.widgets["insuranceFOIDDocumentName-"+traveller.Id],currScope),this.formLib.macro_formGroupEnd(),this.__$write("\n</div>\n",151),isDisplayTravellerSpecificAddressLink(currScope.data)){var selectedTravellerKey=getTravellerSpecificAddressKey(traveller.Id);this.__$insertSection(154,{id:"insuranceAddressForTraveller"+traveller.Id,type:"div",attributes:{classList:["insurance-address"]},macro:{name:"displayTravellerAddress",scope:this,args:[currScope,traveller]},bindRefreshTo:[{to:"anotherAddressPopup",inside:currScope.data},{to:selectedTravellerKey,inside:currScope.data.insuranceFOIDData}]})}this.__$write("\n</div>\n",167)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderInsuranceFOIDWidgets",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderInsuranceInfantFOID:function(currScope,infant){try{with(this){this.__$write('\n<div class="insurance-foid-panel">\n<div class="insurance-foid-dob">\n',178);var widgetName=currScope.moduleCtrl.getDOBWidgetName(infant,infant.Id);this.formLib.macro_renderStandardWidget(currScope.widgets[widgetName],currScope.data.insuranceFOIDData,currScope,!0),this.__$write("\n</div>\n</div>\n",182)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderInsuranceInfantFOID",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayAddressOverrideDialogForTraveller:function(currScope){try{with(this)this.__$write('\n\n<div class="traveller-specific-insurance-address">\n',187),this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","Dialog",{id:"anotherTravellerAddressDialog",bind:{visible:{inside:currScope.data,to:"anotherAddressPopup"},title:{inside:currScope.data,to:"insuranceAddressDialogTitle"}},onClose:{fn:"onCloseInsuranceAlternateAddressDialog",scope:this,args:{currScope:currScope}},height:600,bsGridClass:"col-md-12 col-sm-15 col-lg-12 col-xs-22",closeButton:!0,closeOnMouseClick:!1,closeOnEscape:!1},189)&&(this.__$insertSection(204,{macro:{name:"displayTravellerAddressForm",scope:this,args:[currScope]},attributes:{classList:["traveller-address-dialog-content"]},bindRefreshTo:[{inside:currScope.data,to:"anotherAddressPopup"}],type:"DIV"}),this.__$endContainerWidget()),this.__$write("\n</div>\n\n",220)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayAddressOverrideDialogForTraveller",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayTravellerAddressForm:function(currScope){try{with(this){var alternateAddressForm=aria.utils.Json.copy(currScope.data.insuranceForm.embeddedForms.insuranceAlternateAddressForm[0]);this.macro_displayErrors(alternateAddressForm,currScope),this.__$write('\n\n<span class="new-address-desctiptor">',227),this.__$write(plnextv2.utils.I18n.getStringFromPattern("tx_pltg_text_NewInsuAddressDescriptor",[currScope.data.insuranceFOIDData.alternateAddressData.travellerName]),228),this.__$write("</span>\n\n",228),this.macro_displayAddressCollectionForm(currScope,currScope.data.insuranceFOIDData.alternateAddressData,"alternateAddress",alternateAddressForm.widgets,""),this.__$write('\n\n<div class = "row insurance-address-dialog-buttons">\n<button class = "btn btn-secondary btn-cancel"',231),this.__$statementOnEvent("click",this.$normCallback({fn:onCloseInsuranceAlternateAddressDialog,scope:this,args:{currScope:currScope}}),233),this.__$write(" >",233),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_InsuranceAddressCancel"),233),this.__$write('</button>\n<button class = "btn btn-primary confirm-traveller-insurance-address" ',233),this.__$statementOnEvent("click",this.$normCallback({fn:confirmDifferntAddress,scope:this,args:{insuarnceAlternateAddressForm:alternateAddressForm,currScope:currScope}}),234),this.__$write(" >",237),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_InsuranceAddressConfirm"),237),this.__$write("</button>\n</div>\n",237)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTravellerAddressForm",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayTravellerAddress:function(currScope,traveller){try{with(this){var addressKey=getTravellerSpecificAddressKey(traveller.Id),useAnotherLinkId="use-another-address-link"+addressKey;currScope.data.insuranceFOIDData[addressKey]?(this.__$write('\n<div class="address-label">Address</div>\n<div class ="traveller-address-content" ',245),this.__$writeId(addressKey,246),this.__$write('>\n<div class ="address-data">',246),this.__$write(getTravellerAddressString(currScope.data,currScope.data.insuranceFOIDData[addressKey]),247),this.__$write("</div>\n<a ",247),this.__$writeId("remove-specific-address-link-"+traveller.Id,248),this.__$write('  href="javascript:;" ',248),this.__$statementOnEvent("click",this.$normCallback({fn:removeAlternateAddress,scope:this,args:{currScope:currScope,selectedTravellerFoidId:traveller.Id,focusOnClose:useAnotherLinkId}}),248),this.__$write('><i class="icon-trash" aria-hidden="true"></i>',248),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_RemoveInsuranceAddress"),248),this.__$write("</a>\n</div>\n\n",248)):(this.__$write("\n<a ",252),this.__$writeId(useAnotherLinkId,252),this.__$write('  href="javascript:;" class="use-another-address-link" ',252),this.__$statementOnEvent("click",this.$normCallback({fn:showanotherAddressPopup,scope:this,args:{currScope:currScope,traveller:traveller,focusOnClose:useAnotherLinkId}}),252),this.__$write('><i class="icon-edit" aria-hidden="true"></i>',252),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_UseAnotherInsuranceAddress"),252),this.__$write("</a>\n",252))}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTravellerAddress",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayErrors:function(alternateAddressForm,currScope){try{with(this)this.__$write("\n<div ",257),this.__$writeId("alternate-address-insuarnce-error-panel",257),this.__$write(' class="row form-error-panel">\n<section class="insurance-alternate-address-errors">\n',257),this.formLib.macro_formGlobalErrors(alternateAddressForm,currScope,{}),this.__$write("\n</section>\n</div>\n",260)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayErrors",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderFOIDTravellerHeaderResp:function(traveller,currScope,count){try{with(this)if(this.__$write('\n<h4 class="foid-traveller-name">\n<span>',267),this.__$write(count,268),this.__$write(". </span>\n",268),null!=traveller.IdentityInformation.IDEN_FirstName&&(this.__$write('\n<span class="traveller-firstname">',270),this.__$write(aria.utils.String.capitalize(traveller.IdentityInformation.IDEN_FirstName.toLowerCase())+" ",270),this.__$write("</span>\n",270)),this.__$write('\n<span class="traveller-lastname">',272),this.__$write(aria.utils.String.capitalize(traveller.IdentityInformation.IDEN_LastName.toLowerCase()),272),this.__$write("</span>\n</h4>\n",272),0!=traveller.Infants.length){this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_InsuredWithInfant"),275);var infant=currScope.moduleCtrl.getInfant(traveller);null!=infant.IdentityInformation.IDEN_FirstName&&(this.__$write('\n<span class="insurance-foid-strong infant-firstname">',278),this.__$write(aria.utils.String.capitalize(infant.IdentityInformation.IDEN_FirstName.toLowerCase())+" ",278),this.__$write("</span>\n",278)),this.__$write('\n<span class="insurance-foid-strong infant-lastname">',280),this.__$write(aria.utils.String.capitalize(infant.IdentityInformation.IDEN_LastName.toLowerCase()),280),this.__$write("</span>\n",280)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderFOIDTravellerHeaderResp",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={formLib:"plnextv2.utils.formComponent.FormMacro"},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.insurance.desktop.views.DInsuranceFOIDViewScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/insurance/desktop/views/DInsuranceFOIDViewScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.insurance.desktop.views.DInsuranceFOIDViewScript",$dependencies:["plnextv2.utils.I18n","plnextv2.utils.FocusUtils","plnextv2.utils.CountryUtils","plnextv2.utils.PaxUtils"],$statics:{MAX_PAX_PER_ROW:3},$constructor:function(){this._countryUtils=plnextv2.utils.CountryUtils,this._paxUtils=plnextv2.utils.PaxUtils},$prototype:{paxRowIterator:function(e){var t=e.data.config.isDOBRequired,i=[],n=[],s=aria.utils.Json.removeMetadata(this.__getTravellers(e));for(var a in s){var r=s[a];this.__addPaxToRow(i,n,r);var o=e.moduleCtrl.getInfant(r);t&&o&&(this.__updateInf(o,r),this.__addPaxToRow(i,n,o))}return 0!==n.length&&i.push(n),i},__addPaxToRow:function(e,t,i){t.push(i),t.length===this.MAX_PAX_PER_ROW&&(e.push(t.slice(0)),t.length=0)},__getTravellers:function(e){var t=[];if(e.data.config.isInsurancePerPax){for(var i=0;i<e.data.travellerIdArray.length;i++)if(e.data.travellerIdArray[i]){var n=e.data.insurance.travellerListBean.Travellers[i];t.push(n)}}else t=e.data.insurance.travellerListBean.Travellers;return t},__updateInf:function(e,t){e.Id=t.Id,e.isInfant=!0},isInfant:function(e){return e.isInfant},showanotherAddressPopup:function(e,t){var i=t.currScope,n=i.data,s="";n.insuranceFOIDData.alternateAddressData.focusOnClose=t.focusOnClose,t.traveller.IdentityInformation.IDEN_FirstName&&(s=t.traveller.IdentityInformation.IDEN_FirstName+" "),s+=t.traveller.IdentityInformation.IDEN_LastName,this.$json.setValue(n.insuranceFOIDData.alternateAddressData,"travellerName",s),this.$json.setValue(n.insuranceFOIDData.alternateAddressData,"selectedTravellerFoidId",t.traveller.Id),this.$json.setValue(n,"anotherAddressPopup",!0)},onCloseInsuranceAlternateAddressDialog:function(e,t){var i=t.currScope,n=i.data,s=i.data.insuranceForm.embeddedForms.insuranceAlternateAddressForm[0];s.skipWidgetValidation||plnextv2.utils.FocusUtils.setTemporaryFocus(t.currScope.$getElementById(n.insuranceFOIDData.alternateAddressData.focusOnClose)),i.moduleCtrl.skipWidgetValidation(s,!0),this.clearAddressAndErrorFields(n),this.$json.setValue(n,"anotherAddressPopup",!1)},__validateAlternateAddress:function(e,t){return t.skipWidgetValidation(e,!1),plnextv2.utils.formComponent.FormValidator.processForm(e,{})},confirmDifferntAddress:function(e,t){e.preventDefault();var i=t.currScope.data,n=t.currScope,s=t.insuarnceAlternateAddressForm,a=this.__validateAlternateAddress(s,n.moduleCtrl);if(a){var r=this.getTravellerSpecificAddressKey(i.insuranceFOIDData.alternateAddressData.selectedTravellerFoidId);i.insuranceFOIDData[r]=this.$json.copy(i.insuranceFOIDData.alternateAddressData),this.$json.setValue(i,"anotherAddressPopup",!1),plnextv2.utils.FocusUtils.setTemporaryFocus(t.currScope.$getElementById(r))}},getTravellerSpecificAddressKey:function(e){var t="InsuranceFOIDTravallerAddress-"+e;return t},removeAlternateAddress:function(e,t){var i=t.currScope,n=this.getTravellerSpecificAddressKey(t.selectedTravellerFoidId);this.$json.setValue(i.data.insuranceFOIDData,n,null),plnextv2.utils.FocusUtils.setTemporaryFocus(i.$getElementById(t.focusOnClose))},getTravellerAddressString:function(e,t){for(var i=["alternateAddressAddressSecondLine","alternateAddressPostalCode","alternateAddressCity","alternateAddressCountry","alternateAddressState"],n=t.alternateAddressAddressFirstLine,s=0,a=i.length;a>s;s++){var r=i[s];t[r]&&"-"!==t[r]&&("alternateAddressCountry"===r&&(t[r]=this._countryUtils.getCountryName(e,t[r])),n+=", "+t[r])}return n},clearAddressAndErrorFields:function(e){for(var t=["alternateAddressAddressFirstLine","alternateAddressAddressSecondLine","alternateAddressPostalCode","alternateAddressCity","alternateAddressCountry","alternateAddressState"],i=0,n=t.length;n>i;i++){var s=t[i];e.insuranceFOIDData.alternateAddressData[s]=""}},isDisplayTravellerSpecificAddressLink:function(e){return e.config.isInsurancePerPax&&e.insurance.addressType&&e.travellerCount>1},getTravellers:function(e){var t=aria.utils.Json.removeMetadata(this.__getTravellers(e));return t}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/insurance/styles/DInsuranceFOIDStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.insurance.styles.DInsuranceFOIDStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n.insurance-foid-heading {\nbackground-color: ",8),this.__$write(this.$grayLight,10),this.__$write(";\ndisplay:flex;\nborder-bottom:1px solid transparent;\nfont-family: 'Roboto Regular';\nbox-shadow: 1px 0px 0px #aaa;\nfloat: left;\nwidth: 100%;\nmargin-bottom: 10px;\n}\n\n.panel-danger > .insurance-foid-heading {\ncolor: ",10),this.__$write(this.$white,21),this.__$write(";\nbackground-color: ",21),this.__$write(this.$red,22),this.__$write(";\nborder-color:  ",22),this.__$write(this.$grayLightest,23),this.__$write(";\n}\n\n.avatar-heading {\nbackground-color: ",23),this.__$write(this.$white,27),this.__$write(";\ncolor: ",27),this.__$write(this.$grayDark,28),this.__$write(";\nfloat: left;\n}\n\n.insurance-foid-avatar-icon   {\ndisplay: block;\nfont-size: 225%;\nmargin:5px;\npadding:10px;\nbackground-color: ",28),this.__$write(this.$grayLight,37),this.__$write(';\n}\n\n.traveller-heading {\nmargin-left: 5px;\nwhite-space: normal;\nword-break: break-all;\nword-wrap: break-word;\nfloat: left;\n}\n\n.traveller-heading h3 {\nfont-family: Roboto, sans-serif;\nfont-size: 14px;\nfont-weight: 900;\nheight: 50px;\nmargin-bottom: 5px;\nmargin-left: 1rem;\nmargin-top: 0px;\npadding-bottom: 10px;\n}\n\nhtml[dir="rtl"] .traveller-heading h3 {\nmargin-left: 0;\nmargin-right: 1rem;\n}\n\n.traveller-heading h3 .insurance-foid-strong {\nfont-family: Roboto, sans-serif;\nfont-weight: 300;\n}\n\n.traveller-heading h3 .insurance-foid-span {\ndisplay: block;\n}\n\n.traveller-formating {\nheight: 51px;\nword-wrap: break-word;\npadding-top: 1rem;\n}\n\n.cards-separator {\nmargin-top: 10px;\nmin-width: 270px;\npadding-left: 2px;\npadding-right: 2px;\n}\n\n.text-margin {\nmargin : 0 10px;\n}\n\n.panel-default {\nposition: relative;\n}\n\n\n.panel-primary > .insurance-foid-heading {\nbackground-color: ',37),this.__$write(this.$grayDark,96),this.__$write(";;\ncolor: ",96),this.__$write(this.$grayDark,97),this.__$write(";\n}\n\n.insurance-address-all-pax {\nfloat :right;\n}\n\n.insurance-address .address-label{\nfont-weight: bold;\n}\n\n.insurance-address .traveller-address-content {\npadding: 0.5em;\nbackground-color: ",97),this.__$write(this.$grayLight,110),this.__$write(';;\n}\n\n.traveller-address-content .address-data{\nmargin-bottom : 0.2em;\n}\n\n.traveller-address-dialog-content{\npadding : 2em;\n}\n\n.traveller-address-dialog-content .insurance-address-dialog-buttons{\nfloat :right;\n}\n\n.insurance-address-dialog-buttons button{\nmargin : 1em 0 0 1em;\n}\n\n.insurance-foid-document a{\nwhite-space: nowrap;\n}\n\n.insurance-foid-form-content .row .panel-default {\ndisplay: inline-block;\nmin-width: 200px;\npadding-right: 5px;\n}\n\n.insurance-foid-form-content .cardrow {\ndiplay: -webkit-flex;\ndisplay: -moz-flex;\ndisplay: flex;\nflex-wrap: wrap;\npadding-left: 5px;\npadding-right: 5px;\n}\n\n.insurance .has-feedback .form-control {\npadding-right: 0px;\n}\n\n.insurance .dateWidgetOverridePaddingLeft {\npadding-left: 2px;\n}\n\n.insurance .dateWidgetOverridePaddingRight {\npadding-right: 2px;\n}\n\n.insurance .insurance-address-form{\nmax-width: 350px;\n}\n\n.insurance .foid-form-content {\nmax-width: 350px;\n}\n\n.insurance .foid-form .foid-tittle{\nfont-weight: 300;\nfont-size: 2rem;\nmargin-bottom: 0.7em;\nmargin-top: 0px;\npadding-top: 20px;\n}\n\n.insurance .foid-form .foid-traveller-name{\nfont-family: "Roboto Black";\nfont-size: 1.6rem;\ntext-transform: none;\nmargin-top: 20px;\n}\n\n.insurance .foid-form .foid-traveller{\nmargin-bottom: 15px;\n}\n\n.insurance .foid-form-content .foid-traveller:not(:first-child) {\nborder-top: 1px solid ',110),this.__$write(this.$gray,188),this.__$write(";\n}\n\n@media (max-width: ",188),this.__$write(this.breakpoints.XXXS_MAX,191),this.__$write("){\n.insurance-address-form .address-max-width-small{\nmax-width: none;\n}\n\n.insurance-address-form .address-max-width-medium{\nmax-width: none;\n}\n\n.insurance-address-form .address-max-width-large{\nmax-width: none;\n}\n\n.traveller-address-dialog-content .insurance-address-dialog-buttons{\nfloat: none;\nmargin: inherit;\n}\n\n.traveller-address-dialog-content .insurance-address-dialog-buttons .btn{\nmargin-left: 0px;\nwidth: 100%;\n}\n}\n\n@media (min-width: ",191),this.__$write(this.breakpoints.XXXS_MAX,215),this.__$write("){\n.insurance-address-form .col-md-8 {\nwidth: 40%;\n}\n\n.insurance-address-form .col-md-12 {\nwidth: 60%;\n}\n\n.insurance-address-form .col-md-10 {\nwidth: 100%;\nmax-width: none;\n}\n}\n\n\n",215)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/mobileFlightInfo/MobileFlightInfo.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/BootstrapUtils.js"),require("plnextv2/utils/DateUtils.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.mobileFlightInfo.MobileFlightInfo",$extends:require("plnextv2/utils/macroLibs/tabletFlightInfo/TabletFlightInfo.tml"),$constructor:function(){this.$TabletFlightInfo.constructor.call(this)},$destructor:function(){this.$TabletFlightInfo.$destructor.call(this)},$prototype:{__$initTemplate:function(){return this.$TabletFlightInfo.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/nightDeparture/desktop/styles/DNightDepartureWarningStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.nightDeparture.desktop.styles.DNightDepartureWarningStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n.night-departure-warning-container {\nbackground-color: ",19),this.__$write(this.$warning,20),this.__$write(";\ncolor: ",20),this.__$write(this.$white,21),this.__$write(";\npadding-left: 5px;\nmargin-right: 5px;\n}\n\n.night-departure-warning-append {\nfont-family: ",21),this.__$write(this.$normalFont,27),this.__$write(";\npadding-right: 5px;\n}\n",27)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/nightDeparture/desktop/views/DNightDepartureWarningView.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/DateUtils.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/macroLibs/nightDeparture/desktop/views/DNightDepartureWarningViewScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.nightDeparture.desktop.views.DNightDepartureWarningView",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$DNightDepartureWarningViewScript.constructor.call(this)},$destructor:function(){this.$DNightDepartureWarningViewScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_displayNightDepartureWarning:function(){try{with(this)this.__$write('\n- <i class="icon-warning-sign" aria-hidden="true"></i>\n<span class="night-departure-warning-append">',25),this.__$write(this._i18n.getLabel("tx_pltg_text_nightDepartureWarning"),26),this.__$write("</span>\n",26)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayNightDepartureWarning",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.nightDeparture.desktop.views.DNightDepartureWarningViewScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/nightDeparture/desktop/views/DNightDepartureWarningViewScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.nightDeparture.desktop.views.DNightDepartureWarningViewScript",$dependencies:["plnextv2.utils.I18n","plnextv2.utils.DateUtils"],$constructor:function(){this._i18n=plnextv2.utils.I18n}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/priceDetails/desktop/styles/DPriceDetailsStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.priceDetails.desktop.styles.DPriceDetailsStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n.responsive-price-panel-details {\nbackground-color: #f0f0f0;\npadding: 2rem;\n}\n\n.responsive-price-panel {\nmargin-bottom: 1em;\nborder: 0px solid transparent;\nbox-shadow: 1px 1px 1px #aaa;\nmargin-top: -15px;\n}\n\n.highlight {\ncolor: ",23),this.__$write($magentaDark,37),this.__$write(";\n}\n\n.reservation-actions{\nbackground-color:",37),this.__$write($grayLighten,41),this.__$write(";\nwidth: 100%;\n}\n\n.panel-footer-responsive{\nbackground-color: #f0f0f0;\npadding: 5px;\npadding-left: 0px;\n}\n\n.responsive-price-panel button.btn.plnext-widget-btn.btn-primary.pay-now-btn {\nfont-size: 14px;\npadding-right: 10px;\n}\n\n.responsive-price-panel button.btn.plnext-widget-btn.btn-primary.pay-now-btn span{\ntext-transform: none;\n}\n\n\n.pricedetails .container-xs-height {\ndisplay:table;\nwidth: 100%;\n}\n\n.pricedetails .row-xs-height {\ndisplay:table-row;\n}\n\n.pricedetails .col-xs-height {\ndisplay:table-cell;\nfloat: none;\nvertical-align: top;\n}\n\n.pricedetails .price-text {\nfloat : left;\n}\n\n.pricedetails .price-amount {\nfloat: right;\n}\n\n.pricedetails .price-value {\npadding-left: 5px;\n}\n\n.pricedetails .price-currency {\npadding-left:5px;\n}\n\n.pricedetails .small-text {\nfont-size:85%;\n}\n\n.pricedetails h3{\nmargin-top: 0px;\n}\n\n.pricedetails .price-atc-breakdown h4{\nfont: inherit;\nmargin: 0;\n}\n\n\n.pricedetails .breakdown-list .price-taxes h4,\n.pricedetails .breakdown-list .price-taxes h5{\nfont-size: inherit;\nfont-weight: inherit;\ntext-transform: inherit;\n}\n\n\n\n.pricedetails .price-mini-breakdown{\nmargin-top: 5px;\npadding-top: 10px;\npadding-left: 0px;\nborder-top: solid 1px ",41),this.__$write(this.$grayLight,119),this.__$write(";\n}\n\n.pricedetails .price-right{\npadding : 0px;\n}\n\n.pricedetails .price-right{\nborder-left: solid 1px ",119),this.__$write(this.$grayBorder,127),this.__$write(";\npadding-left: 20px;\n}\n\n.pricedetails .price-details{\ntext-transform: capitalize;\n}\n\n.pricedetails .price-taxes-text{\ntext-transform: capitalize;\n}\n\n.pricedetails .price-taxes-total{\nfont-family: ",127),this.__$write(this.$boldFont,140),this.__$write(";\n}\n\n.pricedetails .price-taxes-total:first-letter{\ntext-transform: capitalize;\n}\n\n.pricedetails .price-taxes-subtotal{\nfont-family: ",140),this.__$write(this.$boldFont,148),this.__$write(";\n}\n\n.pricedetails .price-taxes-total-traveller{\nfont-family: ",148),this.__$write(this.$boldFont,152),this.__$write(";\ntext-transform: lowercase;\n}\n\n.pricedetails .price-taxes-details{\nword-wrap: break-word;\nword-break: break-word;\nbackground-color: ",152),this.__$write(this.$grayLighten,159),this.__$write(";\n}\n\n.pricedetails .price-taxes-details-table{\nfont-size: 85%;\npadding-left:0;\n}\n\n.pricedetails .price-taxes-details-table:first-letter{\ntext-transform: capitalize;\n}\n\n.pricedetails .price-taxes-details-table li{\ndisplay: table;\nwidth: 100%;\npadding: 5px 0 5px 0;\n}\n\n.pricedetails .price-taxes-subtitle{\nfont-family: ",159),this.__$write(this.$boldFont,178),this.__$write(";\n}\n\n.pricedetails .price-taxes-details-row{\ndisplay: table-row;\nborder-bottom: 1px dotted ",178),this.__$write(this.$grayLighter,183),this.__$write(";\n}\n\n.pricedetails .price-taxes-details-text{\ndisplay: table-cell;\n}\n\n.pricedetails .price-taxes-details-amount{\ndisplay: table-cell;\ntext-align:right;\npadding-left: 5px;\nvertical-align: middle;\nfloat: none;\nwhite-space:nowrap;\ntext-transform: uppercase;\n}\n\n.pricedetails .price-total-amount-value,\n.pricedetails .other-currency-total-amount-value,\n.pricedetails .price-suffix{\nfont-size: 130%;\n}\n\n.pricedetails .price-total-miles-amount-value {\nfont-size: 130%;\nmargin-right: 1px;\n}\n\n.miles-amount {\ntext-align: right;\n}\n\n.pricedetails .pricedetails-balance {\nmargin-top:0.9em;\nfont-family: ",183),this.__$write(this.$blackFont,217),this.__$write(";\ntext-transform: none;\n}\n\n.pricedetails .price-miles{\nmargin : 0.5em 0;\n}\n\n.pricedetails .price-promoCode{\nmargin : 0.5em 0;\n}\n\n.pricedetails .payment-breakdown-div, .price-dccMcp-text{\nmargin-bottom : 0.5em;\n}\n\n.pricedetails .payment-breakdown-car-div {\nmargin-bottom: 1em;\n}\n\n.pricedetails .payment-breakdown-div .action-links-container {\nmargin-bottom: 1em;\n}\n\n.pricedetails .show-payment-details-block {\nmargin-bottom: 1em;\n}\n\n.pricedetails .show-payment-details-block p {\nmargin : 0;\n}\n\n.price-panel-new .price-panel-body .price-dccMcp-text{\ntext-transform: none;\ntext-align: right;\nmargin-bottom: 0;\n}\n\n.payment-item {\nmargin-left: 2rem;\nlist-style-type: disc;\n}\n\n.payment-item-no-bullet {\nmargin: 0;\n}\n\n.pricedetails .price-currency {\npadding-left:5px;\n}\n\n.pricedetails .small-text {\nfont-size:85%;\n}\n\n.pricedetails .small-text-discount{\ntext-align:right;\n}\n\n.pricedetails .price-details-traveller{\ntext-transform: capitalize;\n}\n\n.pricedetails .price-left{\npadding-left: 0px;\n}\n\n.pricedetails .horizontal-title{\nmargin-top: 5px;\nmargin-bottom: 5px;\ntext-transform: capitalize;\nfont-family: ",217),this.__$write(this.$blackFont,288),this.__$write(";\nfont-size: 130%;\n}\n\n.pricedetails .horizontal-title .icon{\nmargin-right: 10px;\n}\n\n.pricedetails .panel-heading{\nbackground: ",288),this.__$write(this.$grayLight,297),this.__$write(";\n}\n\n.pricedetails .panel-body{\nborder-top: 1px solid ",297),this.__$write(this.$grayLight,301),this.__$write(";\npadding-top: 20px;\n}\n\n.pricedetails .panel-footer{\nborder-top: 1px solid ",301),this.__$write(this.$grayLight,306),this.__$write(";\nbackground-color: ",306),this.__$write(this.$grayLighten,307),this.__$write(";\n}\n\n.pricedetails .price-traveller {\nclear: both;\n}\n\n.price-atc-penalties{\ntext-transform: none;\n}\n\n.price-atc-fare-difference  {\ntext-transform: none;\n}\n\n.taxes-row {\nclear:both;\n}\nul.breakdown-list, ul.payment-breakdown-list {\npadding-left: 0px;\nmargin-bottom: 0;\n}\n\n.pricedetails .farereview-OB-fees-panel {\nbackground-color : ",307),this.__$write(this.$grayLighten,331),this.__$write(";\npadding: 2rem;\nmargin-top: auto;\ncolor : ",331),this.__$write(this.$grayDarken,334),this.__$write(";\nborder-top: 1px solid ",334),this.__$write(this.$grayLight,335),this.__$write(";\nborder-radius : 0;\n}\n\nul.basefarebreakdown, ul.taxbreakdown{\npadding-left: 0px;\n}\n\n.price-right .price-atc-fare-difference,\n.price-right .price-atc-penalties,\n.price-right .asc-atc-services-extra-cost {\nfont-family: ",335),this.__$write(this.$blackFont,346),this.__$write(";\nfont-weight: ",346),this.__$write(this.$bold,347),this.__$write(";\n}\n\n.price-summary .price-atc-balance,\n.pricedetails.price-atc-balance,\n.pricedetails.price-asc-atc-balance,\n.pricedetails .price-right-atc-title {\nfont-family: ",347),this.__$write(this.$blackFont,354),this.__$write(";\nfont-weight: ",354),this.__$write(this.$bold,355),this.__$write(";\ntext-transform: uppercase;\n}\n\n.pricedetails.price-asc-atc-balance {\nmargin-top: 10px;\n}\n\n.price-right-atc-title {\nline-height: inherit;\nmargin-bottom: 0;\n}\n\n.bold{\nfont-family: ",355),this.__$write(this.$boldFont,369),this.__$write(";\npadding: 3px;\n}\n\n.bold-without-padding {\nfont-family: ",369),this.__$write(this.$boldFont,374),this.__$write(";\n}\n\n.price-atc-breakdown {\npadding-left:10px;\n}\n\n.price-summary .price-no-netting {\npadding-top: 10px;\n}\n\n.price-no-netting .pricedetails .price-no-netting-debit, .price-no-netting .pricedetails .price-no-netting-credit {\ntext-transform: initial;\nfont-family: ",374),this.__$write(this.$normalFont,387),this.__$write(";\nfont-weight: initial;\n}\n\n.price-currency-converter {\nmargin-top: -5px;\nmargin-bottom: 10px;\n\ntext-align: right;\n}\n\n.pricedetails .price-right-separator {\ndisplay: none;\n}\n\n@media (max-width: ",387),this.__$write(this.breakpoints.SM_MAX,402),this.__$write(") {\n.pricedetails .price-left {\npadding-right: 0;\n}\n\n.pricedetails .price-right {\nborder-left: 0;\npadding-top: 14px;\npadding-left: 0;\n}\n\n.pricedetails .price-right-separator {\ndisplay: block;\nborder-top: solid 1px ",402),this.__$write(this.$grayLight,415),this.__$write(";\npadding-top: 10px;\n}\n\n}\n\n.pricedetails-service-tax-new {\nmargin-left: 15px;\nmargin-right: 15px;\ntext-transform: uppercase;\nfont-weight: ",415),this.__$write(this.$strong,425),this.__$write(";\n}\n\n.price-panel-new .details.payment {\ndisplay: flex;\nborder-left: 1px solid ",425),this.__$write(this.$grayLight,430),this.__$write(";\n}\n\n@media (min-width: ",430),this.__$write(this.breakpoints.SM_MIN,433),this.__$write(") {\n.price-panel-new .details.shopping-basket-cart {\ndisplay: flex;\nborder-left: 1px solid ",433),this.__$write(this.$grayLight,436),this.__$write(";\n}\n\n.price-panel-new .details .icon-cart {\nfont-size: 8rem;\ndisplay: block;\ncolor: ",436),this.__$write(this.$grayLight,442),this.__$write(";\n}\n}\n\n.menu-item::before,\n.menu-item::after {\nclear: both;\ndisplay: table;\ncontent: '';\n}\n\n.price-panel-new .menu>li {\npadding-bottom: 1rem;\n}\n\n.price-panel-new .menu>li .menu-item {\ncursor: pointer;\npadding-bottom: 1rem;\ntext-transform: uppercase;\n}\n\n.price-panel-new .menu>li .menu-item .menu-item-text,\n.price-panel-new .menu>li .menu-item .menu-item-amount {\nfont-family: ",442),this.__$write(this.$blackFont,465),this.__$write(";\n}\n\n.price-panel-new .menu>li .menu-item .price-product-other-currency {\nmargin-right: 1.2em;\n}\n\n.price-panel-new .price-details-body {\ndisplay: flex;\n}\n\n.price-panel-new .price-details-body.row,\n.price-panel-new .price-details-body .menu {\nmargin: 0px;\n}\n\n.price-details-body.row {\ndisplay: block;\n}\n\n.price-panel-new .breakdown {\npadding: 2rem;\nbackground-color: ",465),this.__$write(this.$grayLighten,487),this.__$write(";\n}\n\n.price-panel-new.pricedetails .breakdown h4 {\nfont-size: 1.4rem;\nmargin-bottom: .5rem;\nfont-weight: ",487),this.__$write(this.$strong,493),this.__$write(";\n}\n\n.price-panel-new.pricedetails .panel-heading {\npadding: 20px;\n}\n\n.price-panel-new.pricedetails .breakdown ul {\nmargin-bottom: 1rem;\npadding: 0px;\n}\n\n.price-panel-new.pricedetails .breakdown li {\nclear: both;\n}\n\n.price-panel-new.pricedetails .breakdown .price-right {\nborder: none;\npadding-left: 0px;\n}\n\n.price-panel-new.pricedetails .menu li.total {\nmargin-bottom: 0;\npadding-top: 1rem;\nborder-top: 1px solid ",493),this.__$write(this.$grayLight,517),this.__$write(";\nmargin-top: 15px;\n}\n\n.price-panel-new .price-details-body .content {\npadding: 0px 20px 0px 0px;\n}\n\n.price-panel-new .price-details-body .menu {\npadding:0px;\n}\n\n.price-panel-new .total-price-message,\n.price-panel-new .price-french-price-mandate {\ntext-align: right;\nfont-size: 1.2rem;\ntext-transform: none;\nfont-weight: ",517),this.__$write(this.$normal,534),this.__$write(";\n}\n\n.price-panel-new .car-message, .price-panel-new .car-message-right {\ntext-transform: none;\nfont-weight: ",534),this.__$write(this.$normal,539),this.__$write(";\nfont-family: ",539),this.__$write(this.$normalFont,540),this.__$write(";\nfont-size: 1.2rem;\ncolor: ",540),this.__$write(this.$red,542),this.__$write(";\npadding-right: 18px;\n}\n\n@media (max-width: ",542),this.__$write(this.breakpoints.XXS_MIN,546),this.__$write(") {\n.pricedetails .panel-body{\npadding: 20px 10px 15px;\n}\n.responsive-price-panel-details {\npadding: 2rem 10px;\n}\n.responsive-price-panel button.btn.plnext-widget-btn.pay-now-btn > span {\ntext-align: center;\nwidth: 480px;\n}\n.responsive-price-panel-details {\npadding: 10px;\n}\n}\n\n.price-panel-new .car-message-right {\nfloat: right;\n}\n\n#price-details-car-collapsible .base-rate:before,\n#price-details-car-collapsible .price-taxes:before,\n#price-details-car-collapsible .base-rate:after,\n#price-details-car-collapsible .price-taxes:after {\nclear: both;\ndisplay: table;\ncontent: ' ';\n}\n\n.atc-miles-and-cash-warning-message {\ncolor: ",546),this.__$write(this.$warning,576),this.__$write(";\nmargin: 1rem 0 1rem 0;\nfont-family: ",576),this.__$write(this.$boldFont,578),this.__$write(";\n}\n\n.price-panel-miles-and-cash-message {\nmargin-top: 0;\n}\n\n.product-total-price .miles-amount {\npadding-right: 18px;\nfont-family: ",578),this.__$write(this.$blackFont,587),this.__$write(";\n}\n\n",587)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/priceDetails/desktop/views/DPriceDetailsView.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/PriceBeanUtils.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/macroLibs/taxes/views/CommonTax.tml"),require("plnextv2/utils/macroLibs/commonReservationDetails/views/CommonReservationDetailsView.tml"),require("plnextv2/utils/macroLibs/accessibility/Accessibility.tml"),require("plnextv2/utils/macroLibs/DisplayOBFees.tml"),require("plnextv2/utils/macroLibs/externalLink/desktop/view/DExternalLinkView.tml"),require("plnextv2/utils/macroLibs/displayButtons/desktop/views/DReservationButtonsView.tml"),require("plnextv2/utils/macroLibs/discountDetails/desktop/views/DDiscountDetailsView.tml"),require("plnextv2/utils/macroLibs/priceDetails/desktop/views/DPriceDetailsViewScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.priceDetails.desktop.views.DPriceDetailsView",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$DPriceDetailsViewScript.constructor.call(this)},$destructor:function(){this.$DPriceDetailsViewScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_displayPrice:function(price,config,bsGrid,constants,scope,confirmationDialogState,thisScope,tripSummary,componentIdPrefix,search,carCompanyName,reservationInfo,globalLists){try{with(this){var priceObject={price:price};this.__$insertSection(34,{type:"div",attributes:{classList:["container-xs-height"]},bindRefreshTo:[{to:"price",inside:priceObject}],macro:{scope:this,name:"displayPricePanel",args:[price,config,bsGrid,constants,scope,confirmationDialogState,thisScope,tripSummary,componentIdPrefix,search,carCompanyName,reservationInfo,globalLists]}})}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPrice",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayResponsivePriceDetails:function(price,config,bsGrid,constants,scope,confirmationDialogState,thisScope,tripSummary,componentIdPrefix,reservationInfo,globalLists,search,carCompanyName){try{with(this){var priceObject={price:price};this.__$insertSection(56,{type:"div",attributes:{classList:["container-xs-height"]},bindRefreshTo:[{to:"price",inside:priceObject}],macro:{scope:this,name:"showResponsivePricePanel",args:[price,config,bsGrid,constants,scope,confirmationDialogState,thisScope,tripSummary,componentIdPrefix,reservationInfo,globalLists,search,carCompanyName]}})}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayResponsivePriceDetails",__filename,this["aria:currentLineNumber"]],_ex)}},macro_showResponsivePricePanel:function(price,config,bsGrid,constants,scope,confirmationDialogState,thisScope,tripSummary,componentIdPrefix,reservationInfo,globalLists,search,carCompanyName){try{with(this)if(this.macro_displayPricePanel(price,config,bsGrid,constants,scope,confirmationDialogState,thisScope,tripSummary,componentIdPrefix,search,carCompanyName,reservationInfo,globalLists),isAdditionalPaymentDetailsToBeDisplayed(price,config)){if(this.__$write('\n<div class="responsive-price-panel">\n<div class="responsive-price-panel-details">\n',82),this.shouldDisplayPriceConversionMessage(price)){var currencies=this._priceUtils.getServicesConversionCurrencies(price);this.__$write('\n<div class="converted-amount-information">\n',86),this.__$write(this._i18n.getStringFromPattern("tx_pltg_pattern_convertedPrice",[currencies.from,currencies.to]),87),this.__$write("\n</div>\n",88)}this.isShoppingBasketFlowAndPayWithMiles(price,config)||this.macro_showPaymentDetails(config,reservationInfo,price,constants,globalLists,scope,tripSummary,"payment-breakdown-div",!1),config=addTTTConfig(config,thisScope.data),this.commonReservationDetails.macro_payNowButton(config,scope,this,!0,"small-primary"),this.macro_displayCancelFlightsButton(config,scope,thisScope,confirmationDialogState),this.macro_displayCancelBookingButton(config,scope,thisScope,confirmationDialogState),this.__$write("\n</div>\n</div>\n",101)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["showResponsivePricePanel",__filename,this["aria:currentLineNumber"]],_ex)}},macro_showPaymentDetails:function(config,reservationInfo,price,constants,globalLists,scope,tripSummary,paymentBreakdownDiv,isCarBreakdown){try{with(this){isCarBreakdown?this.__$write('\n<div class="show-payment-details-block col-sm-24 col-md-24">\n',108):this.__$write('\n<div class="show-payment-details-block">\n',110);var frequentFlyerNumber=this.getFrequentFlyerNumber(reservationInfo);this.commonReservationDetails.macro_printPaymentInformation(config,reservationInfo,price,constants,globalLists,scope,tripSummary.listItinerary),this.macro_displayPaymentBreakdown(config,price,frequentFlyerNumber,scope,paymentBreakdownDiv,isCarBreakdown),this.commonReservationDetails.macro_printReservationActions(config,scope,price),this.commonReservationDetails.macro_printWaitlistAlreadyPaidMessage(tripSummary.listItinerary,reservationInfo,config),this.__$write("\n</div>\n",117)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["showPaymentDetails",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayPaymentBreakdown:function(config,price,frequentFlyerNumber,scope,paymentBreakdownDiv,isCarBreakdown){try{with(this)price.consolidatedPayments&&config.displayPaymentBreakdown?(price.consolidatedPayments.displayCollapsibleLink?this.macro_displayPaymentBreakdownWithCollapsible(config,price,frequentFlyerNumber,scope,paymentBreakdownDiv):this.macro_displayPaymentBreakdownWithoutCollapsible(config,price,frequentFlyerNumber,scope,paymentBreakdownDiv),this.__$write("\n<br>\n",127)):isCarBreakdown&&this.__$write('\n<i class="icon-cart"></i>\n',129)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPaymentBreakdown",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayPricePanel:function(price,config,bsGrid,constants,scope,confirmationDialogState,thisScope,tripSummary,componentIdPrefix,search,carCompanyName,reservationInfo,globalLists){try{with(this)this.isCarAddedFlow(config,constants,price)?this.macro_showPriceWithCar(price,config,bsGrid,constants,scope,confirmationDialogState,thisScope,tripSummary,componentIdPrefix,search,carCompanyName,reservationInfo,globalLists):this.macro_showPrice(price,config,bsGrid,constants,scope,confirmationDialogState,thisScope,tripSummary,componentIdPrefix,search,reservationInfo,globalLists)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPricePanel",__filename,this["aria:currentLineNumber"]],_ex)}},macro_showPriceWithCar:function(price,config,bsGrid,constants,scope,confirmationDialogState,thisScope,tripSummary,componentIdPrefix,search,carCompanyName,reservationInfo,globalLists){try{with(this)this.__$write('\n<div class="price-panel-new pricedetails price-panel panel">\n<header class="panel-heading price-panel-heading">\n<h2 class="horizontal-title">\n<i class="icon icon-coin" aria-hidden="true"></i>\n<span class="title">',144),this.__$write(this._i18n.getLabel("tx_pltg_text_Price"),148),this.__$write('</span>\n</h2>\n</header>\n<section class="panel-body price-panel-body">\n<div class="price-details-body row">\n<div class="col-xs-24 col-sm-12 col-md-12 content">\n<ul class="menu">\n',148),this.macro_displayProductExpandableLink({price:price,config:config,bsGrid:bsGrid,constants:constants,scope:scope,componentIdPrefix:componentIdPrefix,reservationInfo:reservationInfo,globalLists:globalLists,tripSummary:tripSummary},this.PRODUCTS.FLIGHTS),this.macro_displayProductExpandableLink({price:price,config:config,bsGrid:bsGrid,constants:constants,scope:scope,componentIdPrefix:componentIdPrefix,carCompanyName:carCompanyName,reservationInfo:reservationInfo,globalLists:globalLists,tripSummary:tripSummary},this.PRODUCTS.CAR),this.macro_displayPriceTotalAmount(price,config,tripSummary,constants),this.__$write('\n</ul>\n</div>\n<div class="details filled col-sm-12 col-md-12">\n',181),this.isShoppingBasketFlowAndPayWithMiles(price,config)&&this.macro_showPaymentDetails(config,reservationInfo,price,constants,globalLists,scope,tripSummary,"payment-breakdown-car-div",!0),this.__$write("\n</div>\n</div>\n</section>\n</div>\n",187)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["showPriceWithCar",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayProductPrice:function(model,productName){try{with(this)if(productName==this.PRODUCTS.FLIGHTS){if(this.macro_displayPriceRow("price-product","menu-item-text","menu-item-amount","tx_pltg_text_flights",getFlightsPrice(model.price),model.price.currency,"menu-item-amount-currency","menu-item-amount-value",!1,!0,null,null,this.shouldDisplayPriceConversionMessage(model.price)?this._i18n.getLabel("tx_pltg_text_priceInfoSymbol"):null),this._priceUtils.hasServicesCurrencyDifferentFromBookingCurrency(model.price)){var totalServicesAmount=model.price.totalServices.totalAmount;this.macro_displayPriceRow("price-product-other-currency","menu-item-text","menu-item-amount","",totalServicesAmount.amount,totalServicesAmount.currency,"menu-item-amount-currency","menu-item-amount-value",!1,!1,null,this._i18n.getLabel("tx_pltg_text_priceOtherCurrencyAddSymbol"))}this.shouldDisplayMiles(model.price,model.config)&&this.macro_displayTotalMiles(model.price.milesAndCash)}else productName==this.PRODUCTS.CAR&&(this.macro_displayPriceRow("price-product","menu-item-text","menu-item-amount","tx_pltg_text_car",model.price.carTotalPrice.totalPrice,model.price.currency,"menu-item-amount-currency","menu-item-amount-value",!1,!0),this.__$write('\n<em class="car-message-right">',239),this.__$write(this._i18n.getStringFromPattern("tx_pltg_pattern_ToBePaidAtOffice",[model.carCompanyName]),239),this.__$write("</em>\n",239))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayProductPrice",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayProductExpandableLink:function(model,productName){try{with(this)this.__$write('\n<li class="collapsed" id="price-details-',244),this.__$write(productName,244),this.__$write("-",244),this.__$write(model.componentIdPrefix,244),this.__$write('">\n<div class="menu-item" ',244),this.__$statementOnEvent("click",this.$normCallback({fn:"showProductPriceDetails",args:{product:productName+"-"+model.componentIdPrefix,controllerScope:model.scope}}),245),this.__$write(' aria-expanded="false" tabindex="0" role="button">\n<h3 class="product-total-price">',250),this.macro_displayProductPrice(model,productName),this.__$write('</h3>\n</div>\n<div id="price-details-',251),this.__$write(productName,253),this.__$write("-",253),this.__$write(model.componentIdPrefix,253),this.__$write('-collapsible" tabindex="-1" class="hidden price-details-collapsible">\n<div class="breakdown">\n',253),this.macro_displayPriceCollapsibleSection(model,productName),this.__$write("\n</div>\n</div>\n</li>\n",256)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayProductExpandableLink",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayPriceCollapsibleSection:function(model,productName){try{with(this){var priceBeanUtils=new plnextv2.utils.PriceBeanUtils(model.price);if(productName==this.PRODUCTS.FLIGHTS){this.__$write("\n<h4>",264),this.__$write(this._i18n.getLabel("tx_pltg_text_flights_price_details"),264),this.__$write('</h4>\n<ul class="product-price-details">\n<li>\n',264),this.macro_displayPriceRow("price-details","price-mini-breakdown-text price-details-base-fares-text","price-mini-breakdown-amount price-details-base-fares-amount","tx_pltg_text_air_transportation_charges",priceBeanUtils.getTotalAirlineChargeAmount(),model.price.currency,"price-details-base-fares-currency","price-details-base-fares-amount",!1,!1),this.__$write("\n</li>\n<li>\n",277),this.macro_displayPriceRow("price-taxes","price-mini-breakdown-text price-taxes-text","price-mini-breakdown-amount price-airline-charges-amount","tx_pltg_text_header_other_fees_dx",model.price.totalOtherTaxes.amount,model.price.currency,"price-taxes-amount-currency-taxes","price-taxes-amount-value-taxes",!1,!1),this.__$write("\n</li>\n\n",288);var priceBeanUtils=new plnextv2.utils.PriceBeanUtils(model.price),airlineFees=priceBeanUtils.getFullAirlineFees();(model.price.totalUpgrades||model.price.totalServices||model.price.totalInsurance||model.price.installmentInterests||airlineFees>0)&&(this.__$write("\n<li>\n",295),this.macro_displayOtherPrices(model.config,model.price,"",!0,this.shouldDisplayConfirmedAsAmount(model.config,model.constants)),this.__$write("\n</li>\n",297)),this.__$write("\n</ul>\n",299),this.macro_showPriceRight(model.price,model.config,model.bsGrid,model.constants,model.scope,model.componentIdPrefix,!0,priceBeanUtils,model.reservationInfo,model.globalLists,model.tripSummary),priceBeanUtils=disposePriceBeanUtils(priceBeanUtils)}else productName==this.PRODUCTS.CAR&&model.price&&model.price.carTotalPrice&&model.price.carTotalPrice.priceDetails&&model.price.carTotalPrice.priceDetails.ListPrice&&(this.__$write("\n<h4>",307),this.__$write(this._i18n.getLabel("tx_pltg_text_car_price_details"),307),this.__$write("</h4>\n\n",307),currencyCar={code:model.price.carTotalPrice.priceDetails.ListPrice.CurrencyCode,name:model.price.carTotalPrice.priceDetails.ListPrice.CurrencyName},this.__$write('\n\n<ul class="product-price-details">\n<li>\n',314),this.macro_displayPriceRow("base-rate","price-mini-breakdown-text base-rate-text","price-mini-breakdown-amount base-rate-amount","tx_pltg_pattern_BaseRateNDays",model.price.carTotalPrice.priceDetails.ListPrice.BasePrice,currencyCar,"base-rate-amount-currency-taxes","base-rate-amount-value-taxes",!1,!1,[model.price.carTotalPrice.priceDetails.NumberOfDays]),this.__$write("\n</li>\n\n",326),this.macro_displayPriceDetails(model.price.carTotalPrice.priceDetails.ListSurcharge,currencyCar),this.macro_displayPriceDetails(model.price.carTotalPrice.priceDetails.ListTax,currencyCar),this.__$write('\n</ul>\n<em class="car-message">',331),this.__$write(this._i18n.getStringFromPattern("tx_pltg_pattern_CarBookingPaimenntInAgency",[model.carCompanyName]),332),this.__$write("</em>\n",332))}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPriceCollapsibleSection",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayPriceTotalAmount:function(price,config,tripSummary,constants){try{with(this){if(this.__$write('\n<li class="total">\n<div class="menu-item">\n',337),this.macro_displayTotalAmount(price,config),price.dccMcp&&config.flowType===constants.FLOW_TYPE_STANDARD){var priceBeanUtils=new plnextv2.utils.PriceBeanUtils(price);this.macro_displayDCCMCPPrice(priceBeanUtils,config),priceBeanUtils=disposePriceBeanUtils(priceBeanUtils)}this.__$write('\n<div class="total-price-message">\n',345),this.__$write(this.getTotalForAllPaxLabel(config.displayTripTypeDetailsInLabels,tripSummary.tripType,this.isServicingFlow(config),config.enableNewServicing),346),this.__$write(" (",346),this.__$write(this._i18n.getLabel("tx_pltg_text_includingTaxesAndFees"),346),this.__$write(")\n</div>\n",346),config.displayFrenchPriceMandateDisclaimer&&(this.__$write('\n<div class="price-french-price-mandate">\n',349),this.__$write(this._i18n.getLabel("tx_pltg_text_french_price_mandate"),350),this.__$write("\n</div>\n",351)),tripSummary&&tripSummary.refundableTaxes&&this.taxLib.macro_displayRefundableTaxesCarFlow(tripSummary.refundableTaxes),this.__$write("\n\n</div>\n</li>\n",357)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPriceTotalAmount",__filename,this["aria:currentLineNumber"]],_ex)}},macro_showPrice:function(price,config,bsGrid,constants,scope,confirmationDialogState,thisScope,tripSummary,componentIdPrefix,search,reservationInfo,globalLists){try{with(this){var priceBeanUtils=new plnextv2.utils.PriceBeanUtils(price);if(shouldDisplayAmountPanel(price,config,search)){if(this.__$write('\n\n<div class="pricedetails price-panel panel',366),config.isResponsiveReservationPanel&&this.__$write(" price-responsive-panel",367),this.__$write('">\n<header class="panel-heading price-panel-heading">\n<h2 class="horizontal-title">\n<i class="icon icon icon-coin" aria-hidden="true"></i>\n<span class="title">',367),this.__$write(this._i18n.getLabel("tx_pltg_text_Price"),371),this.__$write('</span>\n</h2>\n</header>\n<section class="panel-body price-panel-body">\n',371),isAirMilesInfoUnavailable(price)&&(this.__$write('\n<p><i class="icon-info-sign" aria-hidden="true"></i> ',376),this.__$write(this._i18n.getLabel("tx_pltg_text_ExtendedTripSummaryInfo_MilesAndCash"),376),this.__$write("</p>\n",376)),this.__$write('\n<div class="price row">\n',378),this.macro_displayATCMilesAndCashWarningMessage(priceBeanUtils.hasAirRefund(),"price-panel-miles-and-cash-message",config),this.__$write('\n<div class="price-left ',380),this.__$write(getBsGridClass(bsGrid,"priceDetailsLeft"),380),this.__$write('">\n<div class="price-summary">\n',380),config.flowType&&config.flowType===constants.FLOW_TYPE_REBOOK)this.macro_displayATCPrices(price,"",config,priceBeanUtils),this.macro_displayNoNettingDetails(price,config);else if(priceBeanUtils.isPromocodeOrDiscountAvailable(config.displayAirDiscountReason,config.displayAirDiscountWithoutReason)&&!this.shouldDisplayCurrencyConversion(price,config,constants))this.discountDisplay.macro_displayAirDiscountPrice(priceBeanUtils,!1,price.currency,"horizontal-tripsummary","row",!config.displayAirDiscountWithoutReason);else if(priceBeanUtils.isDiscountEnabled()&&priceBeanUtils.isDiscountAmount())this.discountDisplay.macro_displayDiscountedPrice(priceBeanUtils,!1,price.currency,"horizontal-tripsummary","row");else if(shouldDisplayServicingPrices(price,config))this.macro_displayServicingPrices(price,config,priceBeanUtils);else if(shouldDisplayTotalAmountForAwardFlow(price,config))if(isAirMilesInfoUnavailable(price)){var totalConvertedAmount=priceBeanUtils.getTotalAmountConvertedInCash(price);this.macro_displayTotalAmountConvertMilesToCash(price,config,totalConvertedAmount)}else this.macro_displayTotalAmountsForAwardFlow(price,config);else this.macro_displayTotalAmount(price,config);if(config.displayCurrencyConverter&&(this.__$write('\n<div class="pricedetails price price-currency-converter">\n<a href="javascript:;" style="text-decoration: underline;" ',409),this.__$statementOnEvent("click",this.$normCallback({fn:"currencyConverterClicked",scope:thisScope}),410),this.__$write(">\n",410),this.__$write(this._i18n.getLabel("tx_pltg_text_CurrencyConverter"),411),this.__$write("\n</a>\n</div>\n",412)),price.totalAmount&&price.totalAmount.convertedAmount>0&&this.macro_displayConvertedAmount(price),this.shouldDisplayCurrencyConversion(price,config,constants)&&this.macro_displayDCCMCPPrice(priceBeanUtils,config),price.promoCode&&price.promoCode.showPromotionValue&&price.promoCode.estimatedDiscountAmount>0&&price.promoCode.status!=this.VALID_BUT_USED_IN_BOOKING_STATUS){var promoStr=this._i18n.getLabel("tx_pltg_text_promotion_Discount");"P"==price.promoCode.promotionType&&(promoStr=promoStr+" (-"+price.promoCode.promotionValue+"%)"),this.macro_displayPriceRow("price-promoCode","text","price-promo-amount",promoStr,-price.promoCode.estimatedDiscountAmount,price.currency,"price-promo-amount-currency","price-promo-amount-value",!1,!1),price.promoCode.convertedDiscountAmount&&this.macro_displayPriceRow("price-promoCode","text","price-promo-amount price-promo-converted-amount","",-price.promoCode.convertedDiscountAmount,price.totalAmount.convertedCurrency,"price-promo-amount-currency","price-promo-amount-value",!1,!1)}priceBeanUtils.isDiscountEnabled()&&priceBeanUtils.isDiscountPercentage()&&(this.__$write('\n<span class="price-traveller small-text small-text-discount-percentage">',454),this.__$write(this._i18n.getStringFromPattern("tx_pltg_pattern_PercentageOfDiscountIncluded",[price.discount.discountAmount.amount,price.currency]),454),this.__$write("</span>\n",454)),this.__$write('\n\n<div class="price-traveller small-text">\n\n',456),price.promoCode?(this.__$write(this.getTotalForAllPaxLabel(config.displayTripTypeDetailsInLabels,tripSummary.tripType,this.isServicingFlow(config),config.enableNewServicing),460),this.__$write(" <bdo dir='ltr'>(",460),this.__$write(this._i18n.getLabel("tx_pltg_text_PromotionAndTaxesFees"),460),this.__$write(")</bdo>\n",460)):(this.__$write(this.getTotalForAllPaxLabel(config.displayTripTypeDetailsInLabels,tripSummary.tripType,this.isServicingFlow(config),config.enableNewServicing),462),this.__$write(" (",462),this.externalLink.macro_insertExternalLinkIcon(this._i18n.getLabel("tx_pltg_text_includingTaxesAndFees")),this.__$write(")\n",462)),tripSummary&&tripSummary.refundableTaxes&&this.taxLib.macro_displayRefundableTaxes(tripSummary.refundableTaxes,""),this.__$write("\n\n</div>\n\n",468),this.macro_displayAscInAtcReimbursementExplanation(priceBeanUtils,config,"asc-atc-reimbursement-explanation small-text"),this.macro_displayAscInAtcRefundExplanation(priceBeanUtils,config,"asc-atc-refund-explanation small-text"),config.displayFrenchPriceMandateDisclaimer&&(this.__$write('\n<div class="price-french-price-mandate small-text">\n',475),this.__$write(this._i18n.getLabel("tx_pltg_text_french_price_mandate"),476),this.__$write("\n</div>\n",477)),this.__$write("\n</div>\n\n",479),this.shouldDisplayPriceMiniBreakdown(config,constants,price)?this.macro_displayPriceMiniBreakdown(config,constants,price,thisScope.data):showPriceMiniBreakdownMilesAndCash(price,config)&&this.macro_displayPriceMiniBreakdownMilesAndCash(config,constants,price),this.__$write("\n\n</div>\n\n",487),this.shouldDisplayPriceRight(config,constants)&&this.macro_showPriceRight(price,config,bsGrid,constants,scope,componentIdPrefix,!1,priceBeanUtils,reservationInfo,globalLists,tripSummary),this.__$write("\n</section>\n\n",493),config.displayOBFeesFlexPricer&&tripSummary&&tripSummary.maxOBFee&&tripSummary.maxOBFee>0&&null!=tripSummary.minOBFee&&(this.__$write('\n<footer class="farereview-OB-fees-panel">\n<span>\n',497),this.displayOBFees.macro_printOBFees(tripSummary,price),this.__$write("\n<span>",500),this.__$write(this._i18n.getLabel("tx_pltg_text_OBFeesCCFeesMinAndMaxExternalLink"),500),this.__$write('</span>\n<span><a href="">',500),this.__$write(this._i18n.getLabel("tx_pltg_text_OBFeesCreditCardFees"),501),this.externalLink.macro_printExternalLinkIcon(),this.__$write("</a></span>\n</span>\n</footer>\n",501)),config.isResponsiveReservationPanel||(this.macro_displayCancelFlightsButton(config,scope,thisScope,confirmationDialogState),this.macro_displayCancelBookingButton(config,scope,thisScope,confirmationDialogState)),this.__$write("\n\n</div>\n",515)}priceBeanUtils=disposePriceBeanUtils(priceBeanUtils)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["showPrice",__filename,this["aria:currentLineNumber"]],_ex)}},macro_showPriceRight:function(price,config,bsGrid,constants,scope,componentIdPrefix,isNewPricePanel,priceBeanUtils,reservationInfo,globalLists,tripSummary){try{with(this)isNewPricePanel&&(this.__$write("\n<h4>",523),this.__$write(this._i18n.getLabel("tx_pltg_text_PricePerPassenger"),523),this.__$write("</h4>\n",523)),this.__$write('\n<div class="price-right ',525),isNewPricePanel||this.__$write(getBsGridClass(bsGrid,"priceDetailsRight"),525),this.__$write('">\n',525),isNewPricePanel||this.__$write('<div class="price-right-separator"></div>',526),this.isRebookingFlow(config,constants)&&!this.hideBreakdownInATC(config,constants)?(this.__$write('\n<div class="price-right-atc">\n<h3 class="price-right-atc-title">\n',528),this.__$write(this._i18n.getLabel("tx_pltg_text_DetailsOfFlightChange"),530),this.__$write('\n</h3>\n<div class="price-atc-breakdown">\n',531),this.macro_displayATCFareDifference(price,"",4),this.__$write('\n<div class="price-atc-breakdown">\n',534),this.macro_displayATCPreviousTotal(price,""),this.macro_displayNonRefundable(price,""),this.macro_displayATCNewTotal(price,""),this.shouldDisplayTaxBreakdown(config,constants)&&(this.__$write('\n<div class="price-atc-passenger-breakdown">\n',539),this.macro_displayBreakdown(config,price,scope,bsGrid,!0,5),this.__$write("\n</div>\n",541)),this.__$write("\n</div>\n",543),this.macro_displayATCPenalties(price,"",4),this.macro_displayAscInAtcServicesExtraCost(price,"",config,priceBeanUtils,4),this.__$write("\n</div>\n</div>\n",546)):(this.isShoppingBasketFlowAndPayWithMiles(price,config)&&this.macro_showPaymentDetails(config,reservationInfo,price,constants,globalLists,scope,tripSummary,"payment-breakdown-div",!1),!this.isAwardFlow(price,config)||config.isMixModeEnabled||this.isMergedFlowMilesMode(price,config)||this.macro_displayMilesBreakdownPerPaxType(price),this.shouldDisplayTaxBreakdown(config,constants)&&this.macro_displayTaxBreakdown(config,price,scope,bsGrid,constants,componentIdPrefix,isNewPricePanel)),this.__$write("\n</div>\n",562)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["showPriceRight",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayMilesBreakdownPerPaxType:function(price){try{with(this)if(price.listTravellerPrice){this.__$write('\n<div class="col-xs-24 miles-breakdown">\n<h3 class="row subtitle">\n<span class="price-text miles-breakdown-total-text">\n',567),this.__$write(this._i18n.getLabel("tx_pltg_text_Miles"),570),this.__$write('\n</span>\n<div class="price-amount">\n<span class="miles-breakdown-total-value">\n',571),this.__$write(this._priceUtils.getFormattedMiles(price.totalMiles.amount),574),this.__$write('\n</span>\n</div>\n</h3>\n<ul class="miles-breakdown-list">\n',575);var __v_1=price.listTravellerPrice;void 0==price.listTravellerPrice&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,579]);for(var paxType_ct=0,__v_2=__v_1.length,paxType_index=0;__v_2>paxType_index;paxType_index++){var paxType=__v_1[paxType_index];paxType_ct++,this.__$write('\n<li class="miles-breakdown">\n<div class="row">\n<span class="price-text miles-breakdown-text">\n',580),this.__$write(this.buildPricePerPaxTypeLabel(paxType.traveller,paxType.traveller.travellersNumber),583),this.__$write('\n</span>\n<div class="price-amount">\n<span class="miles-breakdown-value">\n',584),this.__$write(this._priceUtils.getFormattedMiles(paxType.travellerTypePrice[0].priceBean.recoAmount.milesCost),587),this.__$write("\n</span>\n</div>\n</div>\n</li>\n",588)}this.__$write("\n</ul>\n</div>\n",593)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayMilesBreakdownPerPaxType",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayTotalAmount:function(price,config){try{with(this){if(this.__$write('\n<h3 class="subtitle price-total">\n',599),this.macro_displayPriceRow("total","text","price-total-amount",this.getTotalPriceLabel(config),price.totalAmount.amount,price.currency,"price-total-amount-currency","price-total-amount-value",!1,!1,null,null,this.shouldDisplayPriceConversionMessage(price)?this._i18n.getLabel("tx_pltg_text_priceInfoSymbol"):null),this._priceUtils.hasServicesCurrencyDifferentFromBookingCurrency(price)){var totalServicesAmount=price.totalServices.totalAmount;this.macro_displayPriceRow("other-currency-total","text","other-currency-total-amount","",totalServicesAmount.amount,totalServicesAmount.currency,"other-currency-total-amount-currency","other-currency-total-amount-value",!1,!1,null,this._i18n.getLabel("tx_pltg_text_priceOtherCurrencyAddSymbol"))}this.shouldDisplayMiles(price,config)&&this.macro_displayTotalMiles(price.milesAndCash),this.__$write("\n</h3>\n",635)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTotalAmount",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayTotalAmountConvertMilesToCash:function(price,config,totalConvertedAmount){try{with(this)this.__$write('\n<h3 class="subtitle price-total">\n',639),this.macro_displayPriceRow("total","text","price-total-amount",this.getTotalPriceLabel(config),totalConvertedAmount,price.currency,"price-total-amount-currency","price-total-amount-value",!1,!1),this.__$write("\n</h3>\n",650)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTotalAmountConvertMilesToCash",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayTotalAmountsForAwardFlow:function(price,config){try{with(this){this.__$write('\n<h3 class="subtitle price-miles-award">\n',654);var totalMiles=price.totalMiles||{};this.isMergedFlowMilesMode(price,config)?(totalMiles.amount=price.milesAndCashMergedFlow.convertedCashMiles,price.milesAndCashMergedFlow.nonConvertedAmount&&price.milesAndCashMergedFlow.nonConvertedAmount.totalAmount>0?this.__isSliderAirAndPricingInMilesAndCash(price,config)?(this.macro_displayTotalAmount({currency:price.currency,totalAmount:{amount:price.milesAndCash.cashAmount.totalAmount}},config),price.milesAndCash.milesCost>0&&this.macro_displayTotalMiles({milesCost:price.milesAndCash.milesCost})):(this.macro_displayTotalAmount({currency:price.currency,totalAmount:{amount:price.milesAndCashMergedFlow.nonConvertedAmount.totalAmount}},config),this.macro_displayTotalMiles({milesCost:totalMiles.amount})):this.macro_displayTotalMilesForAwardFlow(totalMiles,config)):(this.macro_displayTotalMilesForAwardFlow(totalMiles,config),this.macro_displayTotalPriceForAwardFlow(price.currency,price.totalAmount.amount)),this.__$write("\n</h3>\n",686)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTotalAmountsForAwardFlow",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayTotalPriceForAwardFlow:function(currency,amount){try{with(this)this.macro_displayPriceRow("row total","price-text","price-amount","",amount,currency,"price-total-amount-currency","price-total-amount-value",!1,!1)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTotalPriceForAwardFlow",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayConvertedAmount:function(price){try{with(this)this.__$write('\n<h3 class="subtitle price-total-converted">\n',703),this.macro_displayPriceRow("total-converted","price-total-converted-text","price-total-converted-amount","tx_pltg_text_converted_Total",price.totalAmount.convertedAmount,price.totalAmount.convertedCurrency,"price-total-converted-amount-currency","price-total-converted-amount-value",!1,!1),this.__$write("\n</h3>\n",714)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayConvertedAmount",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayPriceMiniBreakdown:function(config,constants,price,thisScopeData){try{with(this){if(this.__$write('\n\n<ul class="price-mini-breakdown breakdown-list">\n\n\n',726),config.enableNewServicing&&this.isServicingFlow(config))this.__$write("\n<li>\n",731),this.macro_displayPriceRowWithTextForAmount("price-previous-booking","price-previous-booking-label","price-previous-booking-text","tx_pltg_text_PreviousBooking","tx_pltg_text_service_alreadyPaid"),this.__$write("\n</li>\n",734);else if(this.isAwardFlow(price,config)&&config.isMixModeEnabled&&!this.isMergedFlowMilesMode(price,config)&&this.macro_displayMilesMiniBreakdown(price),!config.groupAirCharges||this.isMergedFlowMilesMode(price,config))this.isAwardFlow(price,config)||this.isMergedFlowMilesMode(price,config)||this.isSliderModeEnabled(config,"AIR")?(this.__$write("\n<li>\n",746),this.macro_displayBaseFare(price,config),this.__$write("\n</li>\n",748)):this.macro_displayBaseFarePerPaxType(price),this.macro_displayTaxesAndFees(config,constants,price,thisScopeData);else{price.totalAirlineCharges&&price.totalOtherTaxes&&!this.isMergedFlowMilesMode(price,config)&&(this.__$write("\n<li>\n",757),this.macro_displayPriceRow("price-airline-charges","price-mini-breakdown-text price-airline-charges-text","price-mini-breakdown-amount price-airline-charges-amount","tx_pltg_text_header_airline_fees_dx",price.totalAirlineCharges.amount,price.currency,"price-airline-charges-amount-currency","price-airline-charges-amount-value",!1,!1),this.__$write("\n</li>\n\n<li>\n",766),this.macro_displayPriceRow("price-taxes","price-mini-breakdown-text price-taxes-text","price-mini-breakdown-amount price-airline-charges-amount","tx_pltg_text_header_other_fees_dx",price.totalOtherTaxes.amount,price.currency,"price-taxes-amount-currency-taxes","price-taxes-amount-value-taxes",!1,!1),this.__$write("\n</li>\n",777),price.markup&&(this.__$write("\n<li>\n",779),this.macro_displayPriceRow("price-details","price-mini-breakdown-text price-details-markup-text","price-mini-breakdown-amount price-details-markup-amount","tx_pltg_text_AdditionalCharges",price.markup.amount,price.currency,"price-taxes-details-amount-currency","price-taxes-details-amount-value",!1,!1),this.__$write("\n</li>\n",789)));
var priceBeanUtils=new plnextv2.utils.PriceBeanUtils(price),airlineFees=priceBeanUtils.getFullAirlineFees();if(price.totalUpgrades||price.totalServices||price.totalInsurance||price.installmentInterests||airlineFees>0){this.__$write('\n<div class="separator"></div>\n<li class="price">\n',798);var includeAirlineFees=this.shouldDisplayAirlineFees(config);this.macro_displayOtherPrices(config,price,"",includeAirlineFees,this.shouldDisplayConfirmedAsAmount(config,constants),config.displayServiceTaxReview,!1),this.__$write("\n</li>\n",802)}priceBeanUtils=disposePriceBeanUtils(priceBeanUtils)}this.__$write("\n</ul>\n",807)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPriceMiniBreakdown",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayPriceMiniBreakdownMilesAndCash:function(config,constants,price){try{with(this)showPriceMiniBreakdownMilesAndCash(price,config)&&(this.__$write('\n<ul class="price-mini-breakdown breakdown-list">\n<li>\n',818),this.macro_displayBaseFareTaxesAndFees(price),this.__$write("\n</li>\n<li>\n",821),this.macro_displayOtherPrices(config,price,"",!1,this.shouldDisplayConfirmedAsAmount(config,constants),!1),this.__$write("\n</li>\n</ul>\n",824))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPriceMiniBreakdownMilesAndCash",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayTaxesAndFees:function(config,constants,price,thisScopeData){try{with(this)this.isMergedFlowMilesMode(price,config)&&price.milesAndCashMergedFlow.nonConvertedAmount&&!this.isAirMilesInfoUnavailable(price)?(price.milesAndCashMergedFlow&&price.milesAndCashMergedFlow.taxesAndFees>0&&(this.__$write("\n<li>\n",841),this.macro_displayPriceRow("price-details","price-mini-breakdown-text price-details-fees-text","price-mini-breakdown-amount price-details-fees-amount","tx_pltg_text_TaxesAndFees",price.milesAndCashMergedFlow.nonConvertedAmount.amount,price.currency,"price-details-taxes-amount-currency","price-details-taxes-amount-value",!1,!1),this.__$write("\n</li>\n",850)),this.__$write("\n\n<li>\n",852),this.macro_displayOtherPrices(config,price,"",!1,this.shouldDisplayConfirmedAsAmount(config,constants),!1),this.__$write("\n</li>\n",855)):(price.totalTaxes||price.bookingFees||thisScopeData.servicesBreakdown&&thisScopeData.servicesBreakdown.totalPrice)&&(price.totalTaxes&&(this.__$write("\n<li>\n",860),this.macro_displayPriceRow("price-details","price-mini-breakdown-text price-details-taxes-text","price-mini-breakdown-amount price-details-taxes-amount","tx_pltg_text_TaxesAndFees",price.totalTaxes.amount,price.currency,"price-details-taxes-amount-currency","price-details-taxes-amount-value",!1,!1),this.__$write("\n</li>\n",869)),price.markup&&(this.__$write("\n<li>\n",873),this.macro_displayPriceRow("price-details","price-mini-breakdown-text price-details-markup-text","price-mini-breakdown-amount price-details-markup-amount","tx_pltg_text_AdditionalCharges",price.markup.amount,price.currency,"price-taxes-details-amount-currency","price-taxes-details-amount-value",!1,!1),this.__$write("\n</li>\n",883)),this.macro_displayOtherPrices(config,price,"",!0,this.shouldDisplayConfirmedAsAmount(config,constants),!1))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTaxesAndFees",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayBaseFare:function(price,config){try{with(this)this.isMergedFlowMilesMode(price,config)&&!this.isAirMilesInfoUnavailable(price)?price.milesAndCashMergedFlow&&price.milesAndCashMergedFlow.nonConvertedAmount.amount>0&&this.macro_displayPriceRow("price-details","price-mini-breakdown-text price-details-base-fares-text","price-mini-breakdown-amount price-details-base-fares-amount","tx_pltg_text_BaseFare",price.milesAndCashMergedFlow.nonConvertedAmount.amountWithoutTaxAndFee?price.milesAndCashMergedFlow.nonConvertedAmount.amountWithoutTaxAndFee:null,price.currency,"price-details-base-fares-currency","price-details-base-fares-amount",!1,!1):this.macro_displayBaseFareRow(price)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayBaseFare",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayBaseFareRow:function(price){try{with(this)this.macro_displayPriceRow("price-details","price-mini-breakdown-text price-details-base-fares-text","price-mini-breakdown-amount price-details-base-fares-amount","tx_pltg_text_BaseFare",price.baseFare?price.baseFare.amount:null,price.currency,"price-details-base-fares-currency","price-details-base-fares-amount",!1,!1)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayBaseFareRow",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayBaseFareTaxesAndFees:function(price){try{with(this){var milesAndCash=price.milesAndCashMergedFlow||price.milesAndCash;milesAndCash&&milesAndCash.nonConvertedAmount&&(price.milesAndCash.isAirMilesInfoUnavailable?this.macro_displayPriceRow("price-details","price-mini-breakdown-text price-details-base-fares-text","price-mini-breakdown-amount price-details-base-fares-amount","tx_pltg_text_BaseFareTaxesAndFees",price.totalAmount.amount,price.currency,"price-details-base-fares-currency","price-details-base-fares-amount",!1,!1):this.macro_displayPriceRow("price-details","price-mini-breakdown-text price-details-base-fares-text","price-mini-breakdown-amount price-details-base-fares-amount","tx_pltg_text_BaseFareTaxesAndFees",milesAndCash.nonConvertedAmount.amount?milesAndCash.nonConvertedAmount.amount:null,price.currency,"price-details-base-fares-currency","price-details-base-fares-amount",!1,!1))}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayBaseFareTaxesAndFees",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayMilesMiniBreakdown:function(price){try{with(this)if(price&&price.listTravellerPrice){var __v_3=price.listTravellerPrice;void 0==price.listTravellerPrice&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,956]);for(var paxType_ct=0,__v_4=__v_3.length,paxType_index=0;__v_4>paxType_index;paxType_index++){var paxType=__v_3[paxType_index];paxType_ct++,this.__$write('\n<li>\n<div class="price-details price-details-miles">\n<span class="price-mini-breakdown-text price-details-miles-text">\n',957),this.__$write(this.buildPricePerPaxTypeLabel(paxType.traveller,paxType.traveller.travellersNumber),960),this.__$write('\n</span>\n<div class="price-amount price-mini-breakdown-amount">\n<span class="price-currency price-details-miles-currency">\n',961),this.__$write(this._i18n.getLabel("tx_pltg_text_Miles"),964),this.__$write('\n</span>\n<span class="price-value price-details-miles-amount">\n',965),this.__$write(this._priceUtils.getFormattedMiles(paxType.travellerTypePrice[0].priceBean.recoAmount.milesCost),967),this.__$write("\n</span>\n</div>\n</div>\n</li>\n",968)}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayMilesMiniBreakdown",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayTaxBreakdown:function(config,price,scope,bsGrid,constants,componentIdPrefix,isNewPricePanel){try{with(this)if(config.taxBreakdownDisplay&&price.listTravellerPrice){if(shouldDisplayNoMilesInfoWarning(price,config)&&(this.__$write('\n<p><i class="icon-info-sign" aria-hidden="true"></i> ',991),this.__$write(this._i18n.getLabel("tx_pltg_text_ExtendedTripSummaryInfo_MilesAndCash"),991),this.__$write("</p>\n",991)),config.groupAirCharges){isNewPricePanel||(this.__$write('\n<h3 class="subtitle price-taxes">\n\n',995),price.totalOriginalAmount?this.macro_displayPriceRow("pricebreakdown pricebreakdown-total","pricebreakdown-total-text","pricebreakdown-total-amount","tx_pltg_text_PriceDetails",price.totalOriginalAmount.amount,price.currency,"pricebreakdown-total-currency","pricebreakdown-total-value",!1,!1):this.macro_displayPriceRow("pricebreakdown pricebreakdown-total","pricebreakdown-total-text","pricebreakdown-total-amount","tx_pltg_text_PriceDetails",price.totalAmount.amount,price.currency,"pricebreakdown-total-currency","pricebreakdown-total-value",!1,!1),this.__$write("\n</h3>\n",1016));var priceBeanUtils=new plnextv2.utils.PriceBeanUtils(price);(price.totalServices||price.totalInsurance||price.installmentInterests)&&(this.__$write('\n<div class="separator"></div>\n<div class="price">\n',1022),this.macro_displayOtherPrices(config,price,bsGrid,!1,this.shouldDisplayConfirmedAsAmount(config,constants),config.displayServiceTaxReview,!0,componentIdPrefix,scope,config.expandServiceTaxReview,config.flowType),this.__$write("\n</div>\n",1025)),priceBeanUtils=disposePriceBeanUtils(priceBeanUtils)}else config.flowType&&config.flowType===constants.FLOW_TYPE_REBOOK&&(config.displayPriceBreakdown||this.macro_displayOtherPricesHeader(price,""),this.macro_displayBaseFareBreakdown(price)),isNewPricePanel||(this.__$write('\n<h3 class="subtitle price-taxes">\n',1041),price.totalOriginalTaxes?this.macro_displayPriceRow("pricebreakdown taxesbreakdown-total","taxesbreakdown-total-text","taxesbreakdown-total-amount","tx_pltg_text_TaxesAndFees",price.totalOriginalTaxes.amount,price.currency,"taxesbreakdown-total-currency","taxesbreakdown-total-value",!1,!1):this.macro_displayPriceRow("pricebreakdown taxesbreakdown-total","taxesbreakdown-total-text","taxesbreakdown-total-amount","tx_pltg_text_TaxesAndFees",price.totalTaxes.amount,price.currency,"taxesbreakdown-total-currency","taxesbreakdown-total-value",!1,!1),this.__$write("\n</h3>\n",1062));this.macro_displayBreakdown(config,price,scope,bsGrid,!1,componentIdPrefix,4)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTaxBreakdown",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayBreakdown:function(config,price,scope,bsGrid,overrideGroupAirCharges,componentIdPrefix,hLevel){try{with(this){var groupAirCharges=overrideGroupAirCharges||config.groupAirCharges,hLevel=hLevel||5;this.__$write('\n<ul class="breakdown-list">\n\n\n',1083);var taxExpansionMode=config.taxExpansionMode,travellerToBeExpanded=isTravellerToBeExpanded(taxExpansionMode),__v_5=price.listTravellerPrice;void 0==price.listTravellerPrice&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,1089]);for(var travellerType_ct=0,__v_6=__v_5.length,travellerType_index=0;__v_6>travellerType_index;travellerType_index++){var travellerType=__v_5[travellerType_index];if(travellerType_ct++,travellerType.travellerTypePrice&&travellerType.travellerTypePrice[0]){var travellerTypeTraveller=travellerType.traveller;this.__$write('\n<li class="price-taxes">\n<div class="taxes-row row">\n<a href="javascript:;" id="',1092),this.__$write(getComponentId(componentIdPrefix,"pricedetails-traveller-taxes-link-"+travellerType_index),1094),this.__$write('" class="traveller-taxes-link ',1094),this.__$write(getBsGridClass(bsGrid,"fareReviewPriceTaxesDetails"),1094),this.__$write('" aria-expanded="',1094),this.__$write(travellerToBeExpanded,1094),this.__$write('" ',1094),this.__$statementOnEvent("click",this.$normCallback({fn:"showTaxesDetails",args:{travellerTypeIndex:travellerType_index,controllerScope:scope,prefix:componentIdPrefix}}),1094),this.__$write(' >\n<div  class="price-text price-taxes-text">\n\n',1094);var arrowOrientation="right",hiddenCollapsible="hidden ";travellerToBeExpanded===!0&&(arrowOrientation="down",hiddenCollapsible=""),this.__$write('\n<i id="',1103),this.__$write(getComponentId(componentIdPrefix,"pricedetails-traveller-taxes-icon-"+travellerType_index),1103),this.__$write('" class="icon icon-caret-',1103),this.__$write(arrowOrientation,1103),this.__$write(' icon-caret" aria-hidden="true"></i>\n<span id="',1103),this.__$write(getComponentId(componentIdPrefix,"pricedetails-traveller-taxes-text-"+travellerType_index),1104),this.__$write('">\n',1104),this.__$write(travellerTypeTraveller.travellersNumber,1105),this.__$write(" ",1105),this.__$write(this._stringResources.getTravellerNumberedLabelKey(travellerTypeTraveller,travellerTypeTraveller.travellersNumber),1105),this.__$write('\n</span>\n</div>\n<div class="price-amount price-taxes-amount">\n',1106);var travellerTypeRecoAmount=travellerType.travellerTypePrice[0].priceBean.recoAmount;if(groupAirCharges?this.__$write(this._priceUtils.formatCurrency(travellerTypeRecoAmount.totalAmount,travellerTypeRecoAmount.currency,"price-currency price-details-taxes-amount-currency","price-value price-details-taxes-amount-value"),1111):this.__$write(this._priceUtils.formatCurrency(travellerTypeRecoAmount.tax,travellerTypeRecoAmount.currency,"price-currency price-details-taxes-amount-currency","price-value price-details-taxes-amount-value"),1117),this.__$write('\n</div>\n</a>\n<div id="',1123),this.__$write(getComponentId(componentIdPrefix,"pricedetails-traveller-taxes-collapsible-"+travellerType_index),1125),this.__$write('" class="',1125),this.__$write(hiddenCollapsible,1125),this.__$write("price-taxes-details ",1125),this.__$write(getBsGridClass(bsGrid,"fareReviewPriceTaxesDetails"),1125),this.__$write('" aria-hidden="',1125),this.__$write(!travellerToBeExpanded,1125),this.__$write('">\n',1125),travellerType.travellerPrice[0].taxes){var __v_7=travellerType.travellerPrice[0].taxes;void 0==travellerType.travellerPrice[0].taxes&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,1127]);for(var listTaxes_ct=0,__v_8=__v_7.length,listTaxes_index=0;__v_8>listTaxes_index;listTaxes_index++){var listTaxes=__v_7[listTaxes_index];if(listTaxes_ct++,this.__$write('\n<ul class="price-taxes-details-table">\n\n',1128),config.displayHeader){var listTaxesIndex=parseInt(listTaxes_index);listTaxesIndex%3==0&&listTaxesIndex!=travellerType.travellerPrice[0].taxes.length-1?listTaxes[listTaxesIndex]&&(this.__$write("\n<li>\n<h",1135),this.__$write(hLevel,1136),this.__$write(' class="price-taxes-details-row price-taxes-subtitle">\n',1136),this.__$write(this._i18n.getLabel("tx_pltg_text_header_airline_fees_dx"),1137),this.__$write("\n</h",1138),this.__$write(hLevel,1138),this.__$write(">\n</li>\n",1138)):listTaxes[listTaxesIndex]&&(this.__$write("\n<li>\n<h",1144),this.__$write(hLevel,1145),this.__$write(' class="price-taxes-details-row price-taxes-subtitle">\n',1145),this.__$write(this._i18n.getLabel("tx_pltg_text_header_other_fees_dx"),1146),this.__$write("\n</h",1147),this.__$write(hLevel,1147),this.__$write(">\n</li>\n",1147))}var listTaxes=setTaxCode12Last(listTaxes),__v_9=listTaxes;void 0==listTaxes&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,1153]);for(var taxe_ct=0,__v_10=__v_9.length,taxe_index=0;__v_10>taxe_index;taxe_index++){var taxe=__v_9[taxe_index];taxe_ct++,taxe&&(this.__$write("\n<li>\n",1155),taxe.isSubTotal?this.macro_displayPriceRow("price-taxes-details-row price-taxes-subtotal","price-taxes-text price-taxes-details-text","price-taxes-amount price-taxes-details-amount",taxe.name,taxe.value,taxe.currency,"price-taxes-subtotal-currency","price-taxes-subtotal-value",!1,!1):taxe.code==this.OB_FEES?this._feeUtils.displayFeesNotice(listTaxes,taxe)&&(this.__$write('\n<div class="price-taxes-details-row">\n<span class="price-taxes-details-text price-traveller">\n',1169),this.__$write(this._i18n.getStringFromPattern(taxe.name,[this._priceUtils.formatCurrency(taxe.value,taxe.currency)]),1171),this.__$write("\n</span>\n</div>\n",1172)):taxe.code===this.FARE_BASIS&&groupAirCharges&&travellerType.surcharges&&travellerType.surcharges.Q?this.macro_displayFareBasisWithQSurcharge(taxe,travellerType.surcharges.Q):this.macro_displayPriceRow("price-taxes-details-row","price-taxes-details-text","price-taxes-details-amount",taxe.name,taxe.value,taxe.currency,"price-taxes-details-amount-currency","price-taxes-details-amount-value",!1,!1),this.__$write("\n</li>\n",1188))}this.__$write("\n</ul>\n",1191)}}travellerType.travellerPrice[0].priceBean.recoAmount.markup&&(this.__$write('\n<ul class="price-taxes-details-table">\n<li>\n',1195),this.macro_displayPriceRow("price-taxes-details-row price-taxes-subtotal","price-taxes-details-text price-details-markup-text","price-taxes-details-amount price-details-markup-amount","tx_pltg_text_AdditionalCharges",travellerType.travellerPrice[0].priceBean.recoAmount.markup.value,travellerType.travellerPrice[0].priceBean.recoAmount.currency,"price-taxes-details-amount-currency","price-taxes-details-amount-value",!1,!1),this.__$write("\n</li>\n</ul>\n",1206)),this.__$write('\n<ul class="price-taxes-details-table">\n\n',1209);var totalTravellerTypeRecoAmount=travellerType.travellerPrice[0].priceBean.recoAmount,totalTraveller=null;totalTraveller=groupAirCharges?totalTravellerTypeRecoAmount.totalAmount:totalTravellerTypeRecoAmount.tax;var stringTotalTraveller=this._i18n.getStringFromPattern("tx_pltg_pattern_TotalPerTravellerType",[this._stringResources.getTravellerLabelKey(travellerType.traveller,1)]);this.__$write("\n<li>\n",1220),this.macro_displayPriceRow("price-taxes-details-row price-taxes-total","price-taxes-details-text","price-taxes-amount price-taxes-details-amount",stringTotalTraveller,totalTraveller,totalTravellerTypeRecoAmount.currency,"price-taxes-total-currency","price-taxes-total-value",!1,!1),this.__$write("\n</li>\n\n",1229);var totalTravellerType=null;totalTravellerType=groupAirCharges?travellerTypeRecoAmount.totalAmount:travellerTypeRecoAmount.tax;var stringTotalTravellerType="x "+travellerType.traveller.travellersNumber+" "+this._stringResources.getTravellerNumberedLabelKey(travellerType.traveller,travellerType.traveller.travellersNumber);this.__$write("\n<li>\n",1239),this.macro_displayPriceRow("price-taxes-details-row price-taxes-total-traveller","price-taxes-details-text","price-taxes-amount price-taxes-details-amount",stringTotalTravellerType,totalTravellerType,travellerTypeRecoAmount.currency,"price-taxes-total-traveller-currency","price-taxes-total-traveller-value",!1,!1),this.__$write("\n</li>\n</ul>\n</div>\n</div>\n</li>\n\n",1248),travellerToBeExpanded=taxExpansionMode===this.EXPANSION_MODE.ALL}}this.__$write("\n</ul>\n",1257)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayBreakdown",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayCancelFlightsButton:function(config,scope,thisScope,confirmationDialogState){try{with(this){var requireParamsForCancelFlightButton={fn:"removeFlights",scope:scope,thisScope:thisScope,confirmationDialogState:confirmationDialogState,isFooterRequired:!0};this.buttonDisplay.macro_displayCancelFlightsButton(config,requireParamsForCancelFlightButton)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayCancelFlightsButton",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayCancelBookingButton:function(config,scope,thisScope,confirmationDialogState){try{with(this){var requireParamsForCancelBookingButton={fn:"cancelBooking",scope:scope,thisScope:thisScope,confirmationDialogState:confirmationDialogState,isFooterRequired:!0};this.buttonDisplay.macro_displayCancelBookingButton(config,requireParamsForCancelBookingButton)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayCancelBookingButton",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayDCCMCPPrice:function(priceBeanUtils,config){try{with(this){var price=priceBeanUtils._priceBean;if(priceBeanUtils.isPromocodeOrDiscountAvailable(config.displayAirDiscountReason,config.displayAirDiscountWithoutReason))this.discountDisplay.macro_displayAirDiscountPrice(priceBeanUtils,!1,price.currency,"horizontal-tripsummary","row",!config.displayAirDiscountWithoutReason,!0);else{var convertedPrice=getPriceConverted(price);this.__$write('\n<h3 class="subtitle price-total price-total-dcc">\n',1304),this.macro_displayPriceRow("total-dcc","text","price-total-amount-dcc","tx_pltg_text_dccmcp_convertedTotal",convertedPrice,price.dccMcp.currency,"price-total-dcc-amount-currency","price-total-dcc-amount-value",!1,!1),this.__$write("\n</h3>\n",1313)}this.__$write('\n\n<div class="price-dccMcp-text small-text">\n',1315),this.__$write(this._i18n.getLabel("tx_pltg_text_dccmcp_convertedAmountToPay"),1317),this.__$write("\n</div>\n",1318)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayDCCMCPPrice",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayPaymentBreakdownWithCollapsible:function(config,price,frequentFlyerNumber,scope,divClassName){try{with(this){this.__$write('\n<div id="',1330),this.__$write("payment-breakdown-area",1330),this.__$write('" class="',1330),this.__$write(divClassName,1330),this.__$write('">\n<i id="',1330),this.__$write("payment-breakdown-icon",1331),this.__$write('" class="icon-caret-right" aria-hidden="true"></i>\n<a href="javascript:;" id="',1331),this.__$write("payment-breakdown-link",1332),this.__$write('" aria-expanded="false"\n',1332),this.__$statementOnEvent("click",this.$normCallback({fn:"showPaymentBreakdownDetails",args:{controllerScope:scope}}),1333),this.__$write(" >\n<span>",1333),this.__$write(_i18n.getLabel("tx_pltg_text_payments_link_label"),1334),this.__$write('</span>\n</a>\n<div id="',1334),this.__$write("payment-breakdown-collapsible",1336),this.__$write('" class="hidden" aria-hidden="true">\n<ul class="payment-breakdown-list">\n',1336);var __v_11=price.consolidatedPayments;void 0==price.consolidatedPayments&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,1338]);for(var payment_ct=0,__v_12=__v_11.length,payment_index=0;__v_12>payment_index;payment_index++){var payment=__v_11[payment_index];payment_ct++,this.macro_displayPaymentGroup(config,payment,price,frequentFlyerNumber,!0)}this.__$write("\n</ul>\n</div>\n</div>\n",1341)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPaymentBreakdownWithCollapsible",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayPaymentBreakdownWithoutCollapsible:function(config,price,frequentFlyerNumber,scope,divClassName){try{with(this){this.__$write('\n<div id="',1355),this.__$write("payment-breakdown-area",1355),this.__$write('" class="',1355),this.__$write(divClassName,1355),this.__$write('">\n<div id="',1355),this.__$write("payment-breakdown-collapsible",1356),this.__$write('">\n<ul class="payment-breakdown-list">\n',1356);var __v_13=price.consolidatedPayments;void 0==price.consolidatedPayments&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,1358]);for(var payment_ct=0,__v_14=__v_13.length,payment_index=0;__v_14>payment_index;payment_index++){var payment=__v_13[payment_index];payment_ct++,this.macro_displayPaymentGroup(config,payment,price,frequentFlyerNumber,!1)}this.__$write("\n</ul>\n</div>\n</div>\n",1361)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPaymentBreakdownWithoutCollapsible",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayPaymentGroup:function(config,payment,price,frequentFlyerNumber,useBullet){try{with(this){payment.amopConfirmation&&config.CONFPageMode&&(this.__$write('\n<div class="payment-confirmation">\n',1376),this.__$write(this._i18n.getStringFromPattern("tx_pltg_pattern_AMOP_CC_payment_confirmation",[payment.paymentTypeDesc,this.formatCreditCardNumberDisplay(payment.amopConfirmation.creditCardNumber),payment.currency.code,payment.amount.toFixed(2)]),1377),this.__$write("\n</div>\n",1382));var cssClass=useBullet?"payment-item":"payment-item-no-bullet";this.__$write('\n<li class="',1385),this.__$write(cssClass,1385),this.__$write('">\n<span class="bold-without-padding">\n',1385),payment.dccInfo?this.__$write(this._i18n.getStringFromPattern("tx_pltg_pattern_new_payment_line_dcc_msg",[payment.currency.code,payment.amount.toFixed(2),payment.dccInfo.currency,payment.dccInfo.totalConvertedAmount.toFixed(2),payment.paymentTypeDesc]),1388):this.__$write(this._i18n.getStringFromPattern("tx_pltg_pattern_new_payment_line_no_dcc_msg",[payment.currency.code,payment.amount.toFixed(2),payment.paymentTypeDesc]),1395),this.__$write('\n</span>\n<ul class="payment-breakdown-list">\n',1400);var __v_15=payment.arrIndividualPayments;void 0==payment.arrIndividualPayments&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,1402]);for(var individualPayment_ct=0,__v_16=__v_15.length,individualPayment_index=0;__v_16>individualPayment_index;individualPayment_index++){var individualPayment=__v_15[individualPayment_index];individualPayment_ct++,config.displayExchangeRateInPaymentBreakdown&&individualPayment.dccInfo&&individualPayment.dccInfo.exchangeRate?this.macro_displayPaymentLineWithExchangeRate(individualPayment):this.macro_displayPaymentLineWithoutExchangeRate(individualPayment)}this.macro_displayMilesUsedForPaymentAndFFNumberAndSavingsWhenRequested(price,frequentFlyerNumber,config),this.__$write("\n</ul>\n</li>\n",1411)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPaymentGroup",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayMilesUsedForPaymentAndFFNumberAndSavingsWhenRequested:function(price,frequentFlyerNumber,config){try{with(this)if(hasMilesCost(price)){var milesUsedPattern=this._i18n.getLabel("tx_pltg_pattern_milesUsed"),milesCostText=this._priceUtils.getFormattedMiles(price.milesAndCash.milesCost),savingDetailsText="";if(config.isDisplaySavingDetails){var milesAmount=price.milesAndCash.milesAmount;savingDetailsText+=this._i18n.getStringFromPattern("tx_pltg_pattern_CashSaved",[this._priceUtils.formatCurrency(milesAmount.amount,milesAmount.currency)])}var freqNumber="";frequentFlyerNumber&&(freqNumber+=frequentFlyerNumber);var milesUsedText=this._i18n.getStringFromPattern(milesUsedPattern,[milesCostText,freqNumber,savingDetailsText]);this.__$write('\n<li class="payment-sub-item">\n<span class="bold-without-padding">',1441),this.__$write(milesUsedText,1442),this.__$write("</span>\n</li>\n",1442)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayMilesUsedForPaymentAndFFNumberAndSavingsWhenRequested",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayPaymentLineWithExchangeRate:function(payment){try{with(this)this.__$write('\n<li class="payment-sub-item">\n',1452),payment.creditCardInfo?(this.__$write(payment.creditCardInfo.companyName.toUpperCase(),1454),this.__$write(this._i18n.getLabel("tx_pltg_text_colon"),1454),this.__$write('\n<span class="bold">',1455),this.__$write(payment.creditCardInfo.accountNumber.slice(-8),1455),this.__$write("</span>\n<br> ",1455),this.__$write(this._i18n.getLabel("tx_pltg_text_new_payment_line_dcc_exRate"),1456),this.__$write('\n<span class="bold">',1457),this.__$write(payment.dccInfo.exchangeRate,1457),this.__$write("</span>\n",1457)):payment.eBankVoucher&&payment.eBankVoucher.voucherCode?(this.__$write(payment.eBankVoucher.voucherCode,1459),this.__$write(" (",1459),this.__$write(payment.currency.code,1459),this.__$write(" ",1459),this.__$write(payment.amount.toFixed(2),1459),this.__$write(")\n<br> ",1459),this.__$write(this._i18n.getLabel("tx_pltg_text_new_payment_line_dcc_exRate"),1460),this.__$write('\n<span class="bold">',1461),this.__$write(payment.dccInfo.exchangeRate,1461),this.__$write("</span>\n",1461)):payment.amopConfirmation&&(this.__$write('\n<div class="amop-biller-code">\n',1463),this.__$write(this._i18n.getLabel("tx_pltg_pattern_AMOP_biller_code"),1464),this.__$write(' <span class="bold">',1464),this.__$write(payment.amopConfirmation.name,1464),this.__$write("</span>\n</div>\n",1464),payment.amopConfirmation.asyncReference&&(this.__$write('\n<div class="amop-transaction-number">\n',1467),this.__$write(this._i18n.getStringFromPattern("tx_pltg_pattern_AMOP_transaction_number",[payment.amopConfirmation.name]),1468),this.__$write('\n<span class="bold">',1469),this.__$write(payment.amopConfirmation.asyncReference.id,1469),this.__$write("</span>\n</div>\n",1469)),this.__$write("\n<br> ",1472),this.__$write(this._i18n.getLabel("tx_pltg_text_new_payment_line_dcc_exRate"),1472),this.__$write('\n<span class="bold">',1473),this.__$write(payment.dccInfo.exchangeRate,1473),this.__$write("</span>\n",1473)),this.__$write("\n</li>\n",1475)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPaymentLineWithExchangeRate",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayPaymentLineWithoutExchangeRate:function(payment){try{with(this)this.__$write('\n<li class="payment-sub-item">\n',1483),payment.creditCardInfo?(this.__$write(payment.creditCardInfo.companyName.toUpperCase(),1485),this.__$write(this._i18n.getLabel("tx_pltg_text_colon"),1485),this.__$write('\n<span class="bold">',1486),this.__$write(payment.creditCardInfo.accountNumber.slice(-8),1486),this.__$write("</span>\n",1486)):payment.eBankVoucher&&payment.eBankVoucher.voucherCode?(this.__$write(payment.eBankVoucher.voucherCode,1488),this.__$write(" (",1488),this.__$write(payment.currency.code,1488),this.__$write(" ",1488),this.__$write(payment.amount.toFixed(2),1488),this.__$write(")\n",1488)):payment.amopConfirmation&&(this.__$write('\n<div class="amop-biller-code">\n',1490),this.__$write(this._i18n.getLabel("tx_pltg_pattern_AMOP_biller_code"),1491),this.__$write(' <span class="bold">',1491),this.__$write(payment.amopConfirmation.name,1491),this.__$write("</span>\n</div>\n",1491),payment.amopConfirmation.asyncReference&&(this.__$write('\n<div class="amop-transaction-number">\n',1494),this.__$write(this._i18n.getStringFromPattern("tx_pltg_pattern_AMOP_transaction_number",[payment.amopConfirmation.name]),1495),this.__$write('\n<span class="bold">',1496),this.__$write(payment.amopConfirmation.asyncReference.id,1496),this.__$write("</span>\n</div>\n",1496)),payment.amopConfirmation.customParams&&(this.__$write('\n<div class="amop-custom-params">\n',1500),this.__$write(commonReservationDetails.getAMOPCustomParamsLabel(payment.amopConfirmation.code),1501),this.__$write('\n<span class="bold">',1502),this.__$write(payment.amopConfirmation.customParams,1502),this.__$write("</span>\n</div>\n",1502)),payment.amopConfirmation.orderId&&(this.__$write('\n<div class="amop-order-id">\n',1506),this.__$write(_i18n.getLabel("tx_pltg_text_AMOP_order_id"),1507),this.__$write('\n<span class="amop-order-id-value bold">',1508),this.__$write(payment.amopConfirmation.orderId,1508),this.__$write("</span>\n</div>\n",1508))),this.__$write("\n</li>\n",1512)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPaymentLineWithoutExchangeRate",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayTotalMiles:function(milesPrice){try{with(this)this.__$write('\n<div class="miles-amount">\n',1520),this.__$write(this._priceUtils.formatTotalMiles(milesPrice.milesCost),1521),this.__$write("\n</div>\n",1522)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTotalMiles",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayMilesAmount:function(milesAmount){try{with(this)this.__$write('\n<div class="miles-amount">\n',1526),this.__$write(this._priceUtils.formatTotalMiles(milesAmount),1527),this.__$write("\n</div>\n",1528)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayMilesAmount",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayTotalMilesForAwardFlow:function(totalMiles,config,thisScope){try{with(this)this.__$write('\n<div class="row price-total-miles">\n<span class="price-text price-total-miles-text">\n',1532),config.isCalendarPage?this.__$write(this._i18n.getLabel("tx_pltg_text_MilesFrom"),1535):this.__$write(this._i18n.getLabel("tx_pltg_text_Total"),1537),this.__$write('\n</span>\n<div class="price-amount">\n<span class="price-total-miles-currency">\n',1539),this.__$write(this._i18n.getLabel("tx_pltg_text_Miles"),1542),this.__$write('\n</span>\n<span class="price-total-miles-amount-value">\n',1543),this.__$write(this._priceUtils.getFormattedMiles(totalMiles.amount),1545),this.__$write("\n</span>\n</div>\n</div>\n",1546)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTotalMilesForAwardFlow",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayOtherPrices:function(config,price,bsGridClass,includeAirlineFees,displayConfirmed,displayTaxInformation,displayBreakdownForServices,componentIdPrefix,scope,expansionModeActivated,flowType){try{with(this)if(price.totalUpgrades&&price.totalUpgrades.totalAmount&&this.macro_displayUpgradesPrice(price.totalUpgrades.totalAmount,"tx_pltg_text_UpgradesLabel",bsGridClass,displayConfirmed),price.totalServices&&price.totalServices.totalAmount&&this.macro_displayServicesPrice(price,"tx_pltg_text_ServicesLabel",bsGridClass,displayConfirmed,displayTaxInformation,displayBreakdownForServices,componentIdPrefix,scope,expansionModeActivated,flowType),price.totalInsurance&&price.totalInsurance.amount>0&&this.macro_displayInsurancePrice(price,bsGridClass,displayConfirmed),price.installmentInterests&&price.installmentInterests.amount>0&&this.macro_displayInstallmentInterests(price,bsGridClass),includeAirlineFees){var priceBeanUtils=new plnextv2.utils.PriceBeanUtils(price),airlineFees=priceBeanUtils.getFullAirlineFees(),bookingFees=priceBeanUtils.getBookingFeesOnly();
bookingFees>0?this.macro_displayBookingFees(price,bsGridClass):airlineFees>0&&!this.shouldDisplayAirlineFees(config)&&this.macro_displayObFees(price,bsGridClass),priceBeanUtils=disposePriceBeanUtils(priceBeanUtils)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayOtherPrices",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayOtherPricesHeader:function(price,bsGridClass){try{with(this){price.totalUpgrades&&price.totalUpgrades.totalAmount&&(this.__$write('\n<h3 class="subtitle price-upgrades">\n',1601),this.macro_displayUpgradesPrice(price.totalUpgrades.totalAmount,"tx_pltg_text_UpgradesLabel",bsGridClass,!0),this.__$write("\n</h3>\n",1603)),price.totalServices&&price.totalServices.totalAmount&&(this.__$write('\n<h3 class="subtitle price-services">\n',1608),this.macro_displayServicesPrice(price,"tx_pltg_text_ServicesLabel",bsGridClass,!0,!1),this.__$write("\n</h3>\n",1610)),price.totalInsurance&&price.totalInsurance.amount>0&&(this.__$write('\n<h3 class="subtitle price-insurance">\n',1615),this.macro_displayInsurancePrice(price,bsGridClass,!0),this.__$write("\n</h3>\n",1617)),price.installmentInterests&&price.installmentInterests.amount>0&&(this.__$write('\n<h3 class="subtitle price-installmentInterest">\n',1622),this.macro_displayInstallmentInterests(price,bsGridClass),this.__$write("\n</h3>\n",1624));var priceBeanUtils=new plnextv2.utils.PriceBeanUtils(price),airlineFees=priceBeanUtils.getFullAirlineFees(),bookingFees=priceBeanUtils.getBookingFeesOnly();bookingFees>0?(this.__$write('\n<h3 class="subtitle price-bookingFees">\n',1632),this.macro_displayBookingFees(price,bsGridClass),this.__$write("\n</h3>\n",1634)):airlineFees>0&&(this.__$write('\n\n<h3 class="subtitle price-obFees">\n',1636),this.macro_displayObFees(price,bsGridClass),this.__$write("\n</h3>\n",1639)),priceBeanUtils=disposePriceBeanUtils(priceBeanUtils)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayOtherPricesHeader",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayUpgradesPrice:function(upgradeAmount,label,bsGridClass,displayConfirmed){try{with(this)bsGridClass||(bsGridClass=""),displayConfirmed?this.macro_displayPriceRowWithTextForAmount("pricedetails price-details-upgrades "+bsGridClass,"price-details-upgrades-text","price-details-upgrades-amount",label,"tx_pltg_text_service_alreadyPaid",!1,!1):this.macro_displayPriceRow("pricedetails price-details-upgrades "+bsGridClass,"price-details-upgrades-text","price-details-upgrades-amount",label,upgradeAmount.amount,upgradeAmount.currency,"price-details-upgrades-amount-currency","price-details-upgrades-amount-value",!1,!1)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayUpgradesPrice",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayServicesPrice:function(price,label,bsGridClass,displayConfirmed,displayTaxInformation,displayBreakdownForServices,componentIdPrefix,scope,expansionModeActivated,flowType){try{with(this){var serviceAmount=price.totalServices.totalAmount,priceSuffix=this.shouldDisplayPriceConversionMessage(price)?this._i18n.getLabel("tx_pltg_text_priceInfoSymbol"):null;bsGridClass||(bsGridClass=""),displayConfirmed?this.macro_displayPriceRowWithTextForAmount("pricedetails price-details-services "+bsGridClass,"price-details-services-text","price-details-services-amount",label,"tx_pltg_text_service_alreadyPaid",priceSuffix):shouldDisplayTaxInformation(displayTaxInformation,price)?shouldDisplayBreakdownForServices(displayBreakdownForServices,price)?this.macro_displayServiceTaxBreakdown(price,bsGridClass,componentIdPrefix,scope,label,expansionModeActivated,flowType):this.macro_displayServiceTaxTotal(price,bsGridClass):this.macro_displayPriceRow("pricedetails price-details-services "+bsGridClass,"price-details-services-text","price-details-services-amount",label,serviceAmount.amount,serviceAmount.currency||price.currency,"price-details-services-amount-currency","price-details-services-amount-value",!1,!1,null,null,priceSuffix)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayServicesPrice",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayServiceTaxTotal:function(price,bsGridClass){try{with(this){var totalCharges=price.serviceTaxInformation.totalServiceCharges,totalTaxes=price.serviceTaxInformation.totalServiceTaxes,priceSuffix=this.shouldDisplayPriceConversionMessage(price)?this._i18n.getLabel("tx_pltg_text_priceInfoSymbol"):null;totalCharges.amount&&this.macro_displayPriceRow("pricedetails price-details-services "+bsGridClass,"price-details-services-text","price-details-services-amount",this._i18n.getLabel("tx_pltg_text_ServiceChargesTotalLabel"),totalCharges.amount,totalCharges.currency,"price-details-services-amount-currency","price-details-services-amount-value",!1,!1,null,null,priceSuffix),totalTaxes.amount&&this.macro_displayPriceRow("pricedetails price-details-services "+bsGridClass,"price-details-services-text","price-details-services-amount",this._i18n.getLabel("tx_pltg_text_ServiceTaxesTotalLabel"),totalTaxes.amount,totalTaxes.currency,"price-details-services-amount-currency","price-details-services-amount-value",!1,!1,null,null,priceSuffix)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayServiceTaxTotal",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayServiceTaxBreakdown:function(price,bsGridClass,componentIdPrefix,scope,label,expansionModeActivated,flowType){try{with(this){var totalServices=price.totalServices.totalAmount,totalCharges=price.serviceTaxInformation.totalServiceCharges,totalTaxes=price.serviceTaxInformation.totalServiceTaxes,chargesBreakdown=price.serviceTaxInformation.serviceChargesDetailsList,taxesBreakdown=price.serviceTaxInformation.serviceTaxesDetailsList,arrowOrientation="right",hiddenCollapsible="hidden ";expansionModeActivated===!0&&(arrowOrientation="down",hiddenCollapsible=""),this.__$write('\n<div class="taxes-row row">\n<a href="javascript:;" id="',1797),this.__$write(getComponentId(componentIdPrefix,"pricedetails-service-taxes-link"),1798),this.__$write('" class="traveller-taxes-link ',1798),this.__$write(getBsGridClass(bsGridClass,"fareReviewPriceTaxesDetails"),1798),this.__$write('" aria-expanded="',1798),this.__$write(expansionModeActivated,1798),this.__$write('" ',1798),this.__$statementOnEvent("click",this.$normCallback({fn:"showServiceTaxesDetails",args:{controllerScope:scope,prefix:componentIdPrefix}}),1798),this.__$write(' >\n<div class="price-text price-taxes-text">\n<i id="',1798),this.__$write(getComponentId(componentIdPrefix,"pricedetails-service-taxes-icon"),1800),this.__$write('" class="icon icon-caret-',1800),this.__$write(arrowOrientation,1800),this.__$write(' icon-caret" aria-hidden="true"></i>\n<span id="',1800),this.__$write(getComponentId(componentIdPrefix,"pricedetails-service-taxes-text"),1801),this.__$write('">\n',1801),this.__$write(this._i18n.getLabel(label),1802),this.__$write('\n</span>\n</div>\n<div class="price-amount price-taxes-amount">\n',1803),this.__$write(this._priceUtils.formatCurrency(totalServices.amount,totalServices.currency,"price-currency price-details-taxes-amount-currency","price-value price-details-taxes-amount-value"),1806),this.__$write('\n</div>\n</a>\n<div id="',1811),this.__$write(getComponentId(componentIdPrefix,"pricedetails-service-taxes-collapsible"),1813),this.__$write('" class="',1813),this.__$write(hiddenCollapsible,1813),this.__$write("price-taxes-details ",1813),this.__$write(getBsGridClass(bsGridClass,"fareReviewPriceTaxesDetails"),1813),this.__$write('" aria-hidden="true">\n',1813),this.macro_displayServiceTaxDetails("tx_pltg_text_ServiceChargesTotalLabel","tx_pltg_text_ServiceChargesSubtotalLabel","tx_pltg_text_ServiceChargesLabelWithServiceName",totalCharges,chargesBreakdown,flowType),this.macro_displayServiceTaxDetails("tx_pltg_text_ServiceTaxesTotalLabel","tx_pltg_text_ServiceTaxesSubtotalLabel","tx_pltg_text_ServiceTaxesLabelWithServiceName",totalTaxes,taxesBreakdown,flowType),this.__$write("\n</div>\n</div>\n",1816)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayServiceTaxBreakdown",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayServiceTaxDetails:function(title,totalLabel,breakdownLabel,totalPrice,serviceBreakdown,flowType){try{with(this)if(null!==totalPrice.amount&&void 0!==totalPrice.amount){this.__$write('\n<ul class="price-taxes-details-table">\n<li>\n<div class="price-taxes-details-row price-taxes-subtotal">\n<span class="price-taxes-details-text price-details-markup-text">\n',1822),this.__$write(this._i18n.getLabel(title),1826),this.__$write("\n</span>\n</div>\n</li>\n",1827);var __v_17=serviceBreakdown;void 0==serviceBreakdown&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,1830]);for(var service_ct=0,__v_18=__v_17.length,service_index=0;__v_18>service_index;service_index++){var service=__v_17[service_index];service_ct++,this.__$write("\n<li>\n",1831);var servicePrice=service.groupTotalPrice,subtotalLabel=_i18n.getStringFromPattern(this._i18n.getLabel(breakdownLabel),[service.serviceGroupName]),appendNewTag=shouldAppendNewTag(service.isNewService,flowType);this.macro_displayPriceRow("price-taxes-details-row","price-taxes-details-text","price-taxes-details-amount",subtotalLabel,servicePrice.amount,servicePrice.currency,"price-taxes-details-amount-currency","price-taxes-details-amount-value",appendNewTag,!1),this.__$write("\n</li>\n",1845)}this.__$write("\n<li>\n",1847),this.macro_displayPriceRow("price-taxes-details-row price-taxes-subtotal","price-taxes-details-text price-details-markup-text","price-taxes-details-amount price-details-markup-amount",totalLabel,totalPrice.amount,totalPrice.currency,"price-taxes-details-amount-currency","price-taxes-details-amount-value",!1,!1),this.__$write("\n</li>\n</ul>\n",1857)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayServiceTaxDetails",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayBookingFees:function(price,bsGridClass){try{with(this){bsGridClass||(bsGridClass="");var priceBeanUtils=new plnextv2.utils.PriceBeanUtils(price),bookingFees=priceBeanUtils.getBookingFeesOnly();bookingFees>0&&(this.__$write("\n<li>\n",1874),this.macro_displayPriceRow("price-details","tripsummary-price-breakdown tripsummary-price-fees","tripsummary-price-breakdown-text tripsummary-price-fees-text","tx_pltg_text_TravellerFee",bookingFees,price.currency,"price-details-fees-amount-currency","price-details-fees-amount-value"),this.__$write("\n</li>\n",1885)),priceBeanUtils=disposePriceBeanUtils(priceBeanUtils)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayBookingFees",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayInstallmentInterests:function(price,bsGridClass){try{with(this)bsGridClass||(bsGridClass=""),this.macro_displayPriceRow("price-details-instalment "+bsGridClass,"price-details-instalment-text","price-details-instalment-amount","tx_pltg_text_installment_interests",price.installmentInterests.amount,price.currency,"price-details-instalment-amount-currency","price-details-instalment-amount-value",!1,!1)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayInstallmentInterests",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayObFees:function(price,bsGridClass){try{with(this){bsGridClass||(bsGridClass="");var priceBeanUtils=new plnextv2.utils.PriceBeanUtils(price);this.macro_displayPriceRow("price-details-obfees "+bsGridClass,"price-details-obfees-text","price-details-obfees-amount",priceBeanUtils.getAirlineFeesLabel(),priceBeanUtils.getFullAirlineFees(),price.currency,"price-details-obfees-amount-currency","price-details-obfees-amount-value",!1,!1),priceBeanUtils.displayFeesNotice()&&(this.__$write('\n<li class="price-details">\n',1929),creditCardFeesText=this._priceUtils.formatCurrency(price.creditCardFees.amount,price.currency),this.__$write('\n<span class="price-traveller small-text">',1931),this.__$write(_i18n.getStringFromPattern("tx_pltg_text_obFees_included",[creditCardFeesText]),1931),this.__$write(" dfghdfghdf</span>\n</li>\n",1931)),priceBeanUtils=disposePriceBeanUtils(priceBeanUtils)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayObFees",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayInsurancePrice:function(price,bsGridClass,displayConfirmed){try{with(this)bsGridClass||(bsGridClass=""),displayConfirmed?this.macro_displayPriceRowWithTextForAmount("price-details-insurance "+bsGridClass,"price-details-insurance-text","price-details-insurance-amount","tx_pltg_text_InsuranceHeading","tx_pltg_text_service_alreadyPaid"):this.macro_displayPriceRow("price-details-insurance "+bsGridClass,"price-details-insurance-text","price-details-insurance-amount","tx_pltg_text_InsuranceHeading",price.totalInsurance.amount,price.currency,"price-details-insurance-amount-currency","price-details-insurance-amount-value",!1,!1)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayInsurancePrice",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayATCPrices:function(price,bsGridClass,config,priceBeanUtils){try{with(this)bsGridClass||(bsGridClass=""),this.macro_displayATCBalance(price,bsGridClass,config,priceBeanUtils),config.displayTripSummary&&this.macro_displayATCMilesAndCashWarningMessage(priceBeanUtils.hasAirRefund(),bsGridClass,config),this.macro_displayATCFareDifference(price,bsGridClass),this.macro_displayATCPenalties(price,bsGridClass),this.macro_displayAscInAtcServicesExtraCost(price,bsGridClass,config,priceBeanUtils)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayATCPrices",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayATCMilesAndCashWarningMessage:function(hasRefund,bsGridClass,config){try{with(this)this.isRebookingFlowAndPrevSelectionMilesAndCash(config)&&(this.__$write('\n<div class="',1995),this.__$write(bsGridClass,1995),this.__$write(' atc-miles-and-cash-warning-message">\n',1995),hasRefund&&config.displayTripSummary?this.__$write(this._i18n.getLabel("tx_pltg_text_ATCRefundMilesAndCashContactToConfirm"),1997):hasRefund&&config.displayFareReview?this.__$write(this._i18n.getLabel("tx_pltg_text_ATCRefundMilesAndCashContactToConfirmDetails"),1999):this.__$write(this._i18n.getLabel("tx_pltg_text_ATCMilesAndCashAmountDisplayedInCashEquivalent"),2001),this.__$write("\n</div>\n",2003))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayATCMilesAndCashWarningMessage",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayAscInAtcServicesExtraCost:function(price,bsGridClass,config,priceBeanUtils,hLevel){try{with(this)if(config.showServicesExtraCost){var servicesExtraCost=priceBeanUtils.getTotalServicesBalancedAmount();!hLevel&&priceBeanUtils.hasAirRefund(price)&&priceBeanUtils.hasServicesExtraCost(price)&&this.macro_displayToBePaidServicesExtraCost(servicesExtraCost,bsGridClass);var cssClassPrefix="asc-atc-services-extra-cost";hLevel&&(this.__$write("<h",2017),this.__$write(hLevel,2017),this.__$write(">",2017)),this.macro_displayPriceRow("pricedetails "+cssClassPrefix+" "+bsGridClass,cssClassPrefix+"-label",cssClassPrefix+"-amount","tx_pltg_text_asc_atc_services_extra_cost",servicesExtraCost.amount,servicesExtraCost.currency,cssClassPrefix+"-currency",cssClassPrefix+"-value"),hLevel&&(this.__$write("</h",2021),this.__$write(hLevel,2021),this.__$write(">",2021))}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayAscInAtcServicesExtraCost",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayToBePaidServicesExtraCost:function(price,bsGridClass){try{with(this){this.__$write("\n<h3>\n",2029);var cssClassPrefix="price-asc-atc-balance";this.macro_displayPriceRow("pricedetails "+cssClassPrefix+" "+bsGridClass,cssClassPrefix+"-text",cssClassPrefix+"-amount","tx_pltg_text_ToBePaid",price.amount,price.currency,cssClassPrefix+"-currency",cssClassPrefix+"-value",!1,!1),this.__$write("\n</h3>\n",2040)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayToBePaidServicesExtraCost",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayATCBalance:function(price,bsGridClass,config,priceBeanUtils){try{with(this)this.__$write("\n<h3>\n",2048),this.macro_displayPriceRow("pricedetails price-atc-balance "+bsGridClass,"price-atc-balance-text","price-atc-balance-amount",priceBeanUtils.hasAirRefund()?"tx_pltg_text_ToBeRefunded":getTotalPriceLabel(config),priceBeanUtils.getTotalRebookBalanceAmountWithServicesExtraCost(config.showServicesExtraCost),price.currency,"price-atc-balance-currency","price-atc-balance-value",!1,!1),this.__$write("\n</h3>\n",2058)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayATCBalance",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayATCFareDifference:function(price,bsGridClass,hLevel){try{with(this)hLevel&&(this.__$write("<h",2067),this.__$write(hLevel,2067),this.__$write(">",2067)),this.macro_displayPriceRow("pricedetails price-atc-fare-difference "+bsGridClass,"price-atc-fare-difference-text","price-atc-fare-difference-amount","tx_pltg_text_FareDifference",price.rebookBalance?price.rebookBalance.amount:null,price.currency,"price-atc-fare-difference-currency","price-atc-fare-difference-value",!1,!1),hLevel&&(this.__$write("</h",2077),this.__$write(hLevel,2077),this.__$write(">",2077))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayATCFareDifference",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayNonRefundable:function(price,bsGridClass){try{with(this)price.nonRefundable&&this.macro_displayPriceRow("pricedetails price-atc-non-refundable "+bsGridClass,"price-atc-non-refundable-text","price-atc-non-refundable-amount","tx_pltg_text_RebookingNonRefundable",price.nonRefundable.amount,price.nonRefundable.currency||price.currency,"price-atc-non-refundable-currency","price-atc-non-refundable-value",!1,!1)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayNonRefundable",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayATCPreviousTotal:function(price,bsGridClass){try{with(this)price.previousAirTotalPrice&&this.macro_displayPriceRow("pricedetails price-atc-previous-total "+bsGridClass,"price-atc-previous-total-text","price-atc-previous-total-amount","tx_pltg_text_RebookingOldTotal",price.previousAirTotalPrice.amount,price.previousAirTotalPrice.currency||price.currency,"price-atc-previous-total-currency","price-atc-previous-total-value",!1,!1)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayATCPreviousTotal",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayATCNewTotal:function(price,bsGridClass){try{with(this)price.airTotalPrice&&this.macro_displayPriceRow("pricedetails price-atc-new-total "+bsGridClass,"price-atc-new-total-text","price-atc-new-total-amount","tx_pltg_text_RebookingNewTotal",price.airTotalPrice.amount,price.currency,"price-atc-new-total-currency","price-atc-new-total-value",!1,!1)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayATCNewTotal",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayATCPenalties:function(price,bsGridClass,hLevel){try{with(this)price.rebookingFees&&(hLevel&&(this.__$write("<h",2141),this.__$write(hLevel,2141),this.__$write(">",2141)),this.macro_displayPriceRow("pricedetails price-atc-penalties "+bsGridClass,"price-atc-penalties-text","price-atc-penalties-amount","tx_pltg_text_Penalties",price.rebookingFees.amount,price.currency,"price-atc-penalties-currency","price-atc-penalties-value",!1,!1),this.__$write("</h4>\n",2150),hLevel&&(this.__$write("</h",2151),this.__$write(hLevel,2151),this.__$write(">",2151)))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayATCPenalties",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayServicingPrices:function(price,config,priceBeanUtils){try{with(this)if(config.enableNewServicing&&this.isServicingFlow(config)){var balancedAmount=priceBeanUtils.getTotalServicesBalancedAmount();this.__$write('\n\n<h3 class="subtitle price-total">\n',2162),this.macro_displayPriceRow("price price-balance","price-balance-text","price-balance-amount","tx_pltg_text_TotalNewServices",balancedAmount.amount,balancedAmount.currency,"price-amount-currency","price-amount-text",!1,!1);var balancedMilesAmount=price.totalServices&&price.totalServices.balancedMilesAmount?price.totalServices.balancedMilesAmount.amount:0;balancedMilesAmount>0&&!this.isMergedFlowMilesMode(price,config)&&this.macro_displayMilesAmount(balancedMilesAmount),this.__$write("\n</h3>\n",2176)}else{this.macro_displayPriceRow("price-previous-total","price-previous-total-text","price-previous-total-amount","tx_pltg_text_PreviousTotal",priceBeanUtils.getPreviousTotal(),price.currency,"price-amount-currency","price-amount-text-small",!1,!1),(isLightMilesAndCashUsed(price,config)||this.isMergedFlowMilesMode(price,config)&&!__isSliderAirAndPricingInMilesAndCash(price,config))&&this.macro_displayTotalMiles(price.milesAndCash),this.macro_displayPriceRow("price-new-total","price-new-total-text","price-new-total-amount","tx_pltg_text_NewTotal",priceBeanUtils.getNewTotalCash(),price.currency,"price-amount-currency","price-amount-text-small",!1,!1);var newMilesAmount=priceBeanUtils.getNewTotalMiles();if(newMilesAmount>0&&!this.isMergedFlowMilesMode(price,config)&&this.macro_displayMilesAmount(newMilesAmount),price.totalServices){this.__$write('\n<h3 class="subtitle price-total">\n',2208),this.macro_displayPriceRow("price price-balance","price-balance-text","price-balance-amount","tx_pltg_text_Balance",price.totalServices.balancedAmount.amount,price.totalServices.balancedAmount.currency,"price-amount-currency","price-amount-text",!1,!1);var balancedMilesAmount=price.totalServices.balancedMilesAmount?price.totalServices.balancedMilesAmount.amount:0;balancedMilesAmount>0&&!this.isMergedFlowMilesMode(price,config)&&this.macro_displayMilesAmount(balancedMilesAmount),this.__$write("\n</h3>\n",2222)}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayServicingPrices",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayNoNettingDetails:function(price,config,macroParams){try{with(this)this._priceUtils.isNonNetting(price,config.isNonNettingAirline)&&(this.__$write('\n<div class="price-no-netting ',2231),macroParams&&macroParams.wrapperCssClasses&&(this.__$write(" ",2231),this.__$write(macroParams.wrapperCssClasses,2231)),this.__$write('">\n\n',2231),null!=price.totalRefund&&(this.__$write("\n<p>",2234),this.__$write(this._i18n.getStringFromPattern("tx_pltg_text_refund_account",[this._priceUtils.formatCurrency(price.totalRefund.amount),price.currency.code]),2234),this.__$write("</p>\n",2234)),price.totalRefund&&this.macro_displayPriceRow("pricedetails price-no-netting-credit","text","price-total-amount","tx_pltg_text_RebookingRefund",price.totalRefund.amount,price.currency,"price-total-amount-currency","price-total-amount-value-atc",!1,!1),price.totalCollectBalance&&this.macro_displayPriceRow("pricedetails price-no-netting-debit","price-atc-balance-text","price-atc-balance-amount","tx_pltg_text_RebookingTotalBalance",price.totalCollectBalance.amount,price.currency,"price-atc-balance-currency","price-atc-balance-value",!1,!1),this.__$write("\n\n</div>\n",2257))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayNoNettingDetails",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayPriceRow:function(divClassName,textClassName,divAmountClassName,labelKey,amount,currency,currencyClassName,amountClassName,appendNewTag,includeChevronIcon,labelParametersList,prefix,suffix){try{with(this)this.__$write('\n<div class="',2280),this.__$write(divClassName,2280),this.__$write(' clearfix">\n<span class="',2280),this.__$write(textClassName,2281),this.__$write('">\n',2281),labelParametersList?this.__$write(this._i18n.getStringFromPattern(labelKey,labelParametersList),2283):this.__$write(this._i18n.getLabel(labelKey),2285),appendNewTag&&(this.__$write('\n<span class="pricedetails-service-tax-new">',2288),this.__$write(this._i18n.getLabel("tx_pltg_text_service_new"),2288),this.__$write("</span>\n",2288)),this.__$write('\n</span>\n<div class="price-amount ',2290),this.__$write(divAmountClassName,2291),this.__$write('">\n',2291),prefix&&(this.__$write('\n<span class="price-prefix">',2293),this.__$write(prefix,2293),this.__$write("</span>\n",2293)),this.__$write(this._priceUtils.formatCurrency(amount,currency,"price-currency "+currencyClassName,"price-value "+amountClassName),2295),suffix&&(this.__$write('\n<span class="price-suffix">',2301),this.__$write(suffix,2301),this.__$write("</span>\n",2301)),includeChevronIcon&&this.__$write('\n<i class="icon-chevron-down" style=""></i>\n',2304),this.__$write("\n</div>\n</div>\n",2306)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPriceRow",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayPriceRowCar:function(divClassName,textClassName,divAmountClassName,price,currency,currencyClassName,amountClassName){try{with(this)this.__$write('\n<div class="',2311),this.__$write(divClassName,2311),this.__$write('">\n<span class="',2311),this.__$write(textClassName,2312),this.__$write('">\n',2312),this.__$write(price.Name,2313),this.__$write('\n</span>\n<div class="price-amount ',2314),this.__$write(divAmountClassName,2315),this.__$write('">\n',2315),this.__$write(this._priceUtils.formatCurrency(price.Amount,currency,"price-currency "+currencyClassName,"price-value "+amountClassName),2316),this.__$write("\n</div>\n</div>\n",2321)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPriceRowCar",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayPriceDetails:function(prices,currency){try{with(this)if(prices){var __v_19=prices;void 0==prices&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,2331]);var price_ct=0;for(var price_index in __v_19)if(__v_19.hasOwnProperty(price_index)&&!this.$json.isMetadata(price_index)){var price=__v_19[price_index];price_ct++,0!=price.Amount&&this.macro_displayPriceRowCar("price-taxes","price-mini-breakdown-text price-detail-text","price-mini-breakdown-amount price-detail-amount",price,currency,"price-detail-amount-currency","price-detail-amount-value")}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPriceDetails",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayPriceRowWithTextForAmount:function(divClassName,textClassName,divAmountClassName,labelKey,textKey,suffix){try{with(this)this.__$write('\n<div class="',2356),this.__$write(divClassName,2356),this.__$write('">\n<span class="',2356),this.__$write(textClassName,2357),this.__$write('">\n',2357),this.__$write(this._i18n.getLabel(labelKey),2358),this.__$write('\n</span>\n<div class="price-amount ',2359),this.__$write(divAmountClassName,2360),this.__$write('">\n',2360),this.__$write(this._i18n.getLabel(textKey),2361),suffix&&(this.__$write('\n<span class="price-suffix">',2363),this.__$write(suffix,2363),this.__$write("</span>\n",2363)),this.__$write("\n</div>\n</div>\n",2365)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPriceRowWithTextForAmount",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayBaseFarePerPaxType:function(price){try{with(this)if(price.listTravellerPrice){var __v_20=price.listTravellerPrice;void 0==price.listTravellerPrice&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,2378]);for(var travellerPrice_ct=0,__v_21=__v_20.length,travellerPrice_index=0;__v_21>travellerPrice_index;travellerPrice_index++){var travellerPrice=__v_20[travellerPrice_index];if(travellerPrice_ct++,travellerPrice.travellerTypePrice&&travellerPrice.travellerTypePrice[0]){var travellerPriceTraveller=travellerPrice.traveller,travellerPriceRecoAmount=travellerPrice.travellerTypePrice[0].priceBean.recoAmount,stringTravellerType=travellerPriceTraveller.travellersNumber+" "+this._stringResources.getTravellerNumberedLabelKey(travellerPriceTraveller,travellerPriceTraveller.travellersNumber);this.__$write("\n<li>\n",2385),this.macro_displayPriceRow("price-details","price-mini-breakdown-text price-details-traveller","price-mini-breakdown-amount price-details-traveller",stringTravellerType,travellerPriceRecoAmount.amountWithoutTaxAndFee,travellerPriceRecoAmount.currency,"price-details-traveller-currency","price-details-traveller-value",!1,!1),this.__$write("\n</li>\n",2394)}}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayBaseFarePerPaxType",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayBaseFareBreakdown:function(price){try{with(this)this.__$write('\n\n<h3 class="subtitle price-basefare">\n',2406),this.macro_displayPriceRow("basefarebreakdown farebreakdown-total","basefarebreakdown-total-text","basefarebreakdown-total-amount","tx_pltg_text_BaseFare",price.baseFare.amount,price.currency,"basefarebreakdown-total-currency","basefarebreakdown-total-value",!1,!1),this.__$write('\n</h3>\n\n\n<ul class="basefarebreakdown">\n',2416),this.macro_displayBaseFarePerPaxType(price),this.__$write("\n</ul>\n",2421)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayBaseFareBreakdown",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayFareBasisWithQSurcharge:function(tax,qSurcharges){try{with(this)this.__$write('\n<div class="price-taxes-details-row">\n<span class="price-taxes-details-text">\n',2431),this.__$write(tax.name,2433),this.__$write('\n</span>\n<div class="price-amount price-taxes-details-amount">\n',2434),this.__$write(this._priceUtils.formatCurrency(tax.value,tax.currency,"price-currency price-taxes-details-amount-currency","price-value price-taxes-details-amount-value"),2436),this.__$write('\n</div>\n</div>\n\n<div class="price-taxes-details-row">\n<span class="price-taxes-details-text price-taxes-qsurcharges-text">\n',2442),this.accessibility.macro_displayIcon("icon-info-sign"),this.__$write(this._i18n.getStringFromPattern("tx_pltg_pattern_IncludingQSurcharge",[this._priceUtils.formatCurrency(qSurcharges.amount,qSurcharges.currency)]),2448),this.__$write("\n</span>\n</div>\n",2452)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayFareBasisWithQSurcharge",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayAscInAtcReimbursementExplanation:function(priceBeanUtils,config,cssClasses){try{with(this)this.shouldDisplayAscInAtcReimbursementExplanation(priceBeanUtils,config)&&(this.__$write('\n<div class="',2464),this.__$write(cssClasses,2464),this.__$write('">\n',2464),this.__$write(this._i18n.getLabel("tx_pltg_text_asc_atc_reimbursement_explanation"),2465),this.__$write("\n</div>\n",2466))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayAscInAtcReimbursementExplanation",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayAscInAtcRefundExplanation:function(priceBeanUtils,config,cssClasses){try{with(this)this.shouldDisplayAscInAtcRefundExplanation(priceBeanUtils,config)&&(this.__$write('\n<div class="',2478),this.__$write(cssClasses,2478),this.__$write('">\n',2478),this.__$write(this._i18n.getLabel("tx_pltg_text_asc_atc_refund_explanation"),2479),this.__$write("\n</div>\n",2480))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayAscInAtcRefundExplanation",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayPriceRowWithMultiplicity:function(divClassName,textClassName,divAmountClassName,label,amount,currency,currencyClassName,amountClassName,multiplicityNumber,multiplicityNumberClass){try{with(this)this.__$write('\n<div class="',2499),this.__$write(divClassName,2499),this.__$write(' clearfix">\n<span class="',2499),this.__$write(textClassName,2500),this.__$write('">\n',2500),this.__$write(label,2501),this.__$write('\n</span>\n<div class="price-amount ',2502),this.__$write(divAmountClassName,2503),this.__$write('">\n',2503),this.__$write(this._priceUtils.formatCurrency(amount,currency,"price-currency "+currencyClassName,"price-value "+amountClassName),2504),this.__$write('\n</div>\n<span class="',2509),this.__$write(multiplicityNumberClass,2510),this.__$write('">\nx ',2510),this.__$write(multiplicityNumber,2511),this.__$write("\n</span>\n</div>\n",2512)
}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPriceRowWithMultiplicity",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={discountDisplay:"plnextv2.utils.macroLibs.discountDetails.desktop.views.DDiscountDetailsView",buttonDisplay:"plnextv2.utils.macroLibs.displayButtons.desktop.views.DReservationButtonsView",externalLink:"plnextv2.utils.macroLibs.externalLink.desktop.view.DExternalLinkView",displayOBFees:"plnextv2.utils.macroLibs.DisplayOBFees",accessibility:"plnextv2.utils.macroLibs.accessibility.Accessibility",commonReservationDetails:"plnextv2.utils.macroLibs.commonReservationDetails.views.CommonReservationDetailsView",taxLib:"plnextv2.utils.macroLibs.taxes.views.CommonTax"},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.priceDetails.desktop.views.DPriceDetailsViewScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/priceDetails/desktop/views/DPriceDetailsViewScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.priceDetails.desktop.views.DPriceDetailsViewScript",$dependencies:["plnextv2.utils.StringResources","plnextv2.utils.I18n","plnextv2.utils.BootstrapUtils","plnextv2.utils.PriceUtils","plnextv2.utils.PriceBeanUtils","plnextv2.utils.FeeUtils","plnextv2.utils.ATCMilesAndCashRebookingUtils","plnextv2.utils.BookingConfirmationUtils","aria.core.IO"],$constructor:function(){this._stringResources=plnextv2.utils.StringResources,this._i18n=plnextv2.utils.I18n,this._json=aria.utils.Json,this._priceUtils=plnextv2.utils.PriceUtils,this._feeUtils=plnextv2.utils.FeeUtils,this._ariaUtilDom=aria.utils.Dom,this._atcMilesAndCashRebookingUtils=plnextv2.utils.ATCMilesAndCashRebookingUtils,this._bookingConfirmationUtils=plnextv2.utils.BookingConfirmationUtils},$statics:{EXPANSION_MODE:{ALL:"ALL",FIRST:"FIRST"},OB_FEES:"12",FLOW_TYPE_AWARD:"AWARD",FARE_BASIS:"FARE_BASIS",MILES_AND_CASH:"MILES_AND_CASH",MILES:"MILES",SLIDER_TYPE_AIR:"AIR",SLIDER_TYPE_AAAS:"AAAS",SERVICING:"SERVICING",REBOOK:"REBOOK",PRODUCTS:{FLIGHTS:"flights",CAR:"car"},VALID_BUT_USED_IN_BOOKING_STATUS:4,BS_GRID:{reservationMenu:{cols:{xs:24,sm:6}}}},$prototype:{$constructor:function(){},getBsGridClass:function(e,t){return plnextv2.utils.BootstrapUtils.getBsGridClass(e,t)},showTaxesDetails:function(e,t){var i=new aria.templates.DomElementWrapper(aria.utils.Dom.getElementById(this.getComponentId(t.prefix,"pricedetails-traveller-taxes-link-"+t.travellerTypeIndex))),n=new aria.templates.DomElementWrapper(aria.utils.Dom.getElementById(this.getComponentId(t.prefix,"pricedetails-traveller-taxes-collapsible-"+t.travellerTypeIndex))),r=new aria.templates.DomElementWrapper(aria.utils.Dom.getElementById(this.getComponentId(t.prefix,"pricedetails-traveller-taxes-icon-"+t.travellerTypeIndex)));n.classList.toggle("hidden"),n.classList.contains("hidden")?(i.setAttribute("aria-expanded",!1),n.setAttribute("aria-hidden",!0),r.classList.remove("icon-caret-down"),r.classList.add("icon-caret-right")):(i.setAttribute("aria-expanded",!0),n.setAttribute("aria-hidden",!1),r.classList.remove("icon-caret-right"),r.classList.add("icon-caret-down"),t.controllerScope.publishAnalyticsEvent("clickfaretaxdetails",t)),t.controllerScope.notifyRefresh()},getFlightsPrice:function(e){if(!e)return 0;var t=new plnextv2.utils.PriceBeanUtils(e);return t.getFlightsPrice()},showServiceTaxesDetails:function(e,t){var i=new aria.templates.DomElementWrapper(aria.utils.Dom.getElementById(this.getComponentId(t.prefix,"pricedetails-service-taxes-link"))),n=new aria.templates.DomElementWrapper(aria.utils.Dom.getElementById(this.getComponentId(t.prefix,"pricedetails-service-taxes-collapsible"))),r=new aria.templates.DomElementWrapper(aria.utils.Dom.getElementById(this.getComponentId(t.prefix,"pricedetails-service-taxes-icon")));n.classList.toggle("hidden"),n.classList.contains("hidden")?(i.setAttribute("aria-expanded",!1),n.setAttribute("aria-hidden",!0),r.classList.remove("icon-caret-down"),r.classList.add("icon-caret-right")):(i.setAttribute("aria-expanded",!0),n.setAttribute("aria-hidden",!1),r.classList.remove("icon-caret-right"),r.classList.add("icon-caret-down")),t.controllerScope.notifyRefresh()},showPaymentBreakdownDetails:function(e,t){var i=new aria.templates.DomElementWrapper(aria.utils.Dom.getElementById("payment-breakdown-link")),n=new aria.templates.DomElementWrapper(aria.utils.Dom.getElementById("payment-breakdown-collapsible")),r=new aria.templates.DomElementWrapper(aria.utils.Dom.getElementById("payment-breakdown-icon"));n.classList.toggle("hidden"),n.classList.contains("hidden")?(i.setAttribute("aria-expanded",!1),n.setAttribute("aria-hidden",!0),r.classList.remove("icon-caret-down"),r.classList.add("icon-caret-right")):(i.setAttribute("aria-expanded",!0),n.setAttribute("aria-hidden",!1),r.classList.remove("icon-caret-right"),r.classList.add("icon-caret-down")),t.controllerScope.notifyRefresh()},isTravellerToBeExpanded:function(e){var t=!1;return(e===this.EXPANSION_MODE.FIRST||e===this.EXPANSION_MODE.ALL)&&(t=!0),t},disposePriceBeanUtils:function(e){return e&&e.$dispose(),null},getTotalPriceLabel:function(e){var t=this._i18n.getLabel("tx_pltg_text_Total");return e.flowType===this.FLOW_TYPE_AWARD?t=this._i18n.getLabel(e.isCalendarPage?"tx_pltg_text_TotalTaxesFrom":"tx_pltg_text_TotalTaxes"):e.flowType!==this.REBOOK||e.CONFPageMode?e.isCalendarPage&&(t=this._i18n.getLabel("tx_pltg_text_FromPriceLabel")):t=this._i18n.getLabel("tx_pltg_text_ToBePaid"),t},hideBreakdownInATC:function(e,t){return this.isRebookingFlow(e,t)&&e.atcHideBreakdown},isAwardFlow:function(e,t){return!this.__isMergedFlow(t)&&e.totalMiles&&e.totalMiles.amount>0},isRebookingFlow:function(e,t){return e.flowType&&e.flowType===t.FLOW_TYPE_REBOOK},buildPricePerPaxTypeLabel:function(e,t){return[t,this._stringResources.getTravellerNumberedLabelKey(e,t)].join(" ")},isCarAddedFlow:function(e,t,i){return!this.isRebookingFlow(e,t)&&i.carTotalPrice&&!e.isModifyServices},setTaxCode12Last:function(e){var t=e.length;if(t>1&&"12"!==e[t-1].code)for(var i in e)if(e[i]&&"12"===e[i].code){var n=e.splice(i,1);e.push(n[0]);break}return e},hasMilesCost:function(e){return e.milesAndCash&&e.milesAndCash.milesCost>0},isLightMilesAndCashUsed:function(e,t){return this.hasMilesCost(e)&&!this.isMergedFlowMilesMode(e,t)},shouldDisplayAmountPanel:function(e,t,i){return this.hasNotEnoughMiles(e,i,t)||this.shouldHidePriceDetailsReview(t)?!1:t.displayPrice&&!e.isRecoAmountBean&&e.totalAmount&&(e.totalAmount.amount>0||this.isMergedFlowMilesMode(e,t)||e.eBankData&&e.eBankData.amountApplied.value>0)||this.isLightMilesAndCashUsed(e,t)},shouldHidePriceDetailsReview:function(e){return e.fareReviewPageMode&&e.isInvoluntary&&!e.hidePrices},showPriceMiniBreakdownMilesAndCash:function(e,t){return this.isMergedFlowMilesMode(e,t)&&t.RTPLPageMode||this.__isSliderAirMilesMode(e,t)||this.__isCashAndMilesUpgradeMode(e,t)},isMergedFlowMilesMode:function(e,t){return this.__isMergedFlow(t)&&e.milesAndCashMergedFlow&&e.isMilesMode||e.milesAndCashMergedFlow&&e.milesAndCashMergedFlow.convertedCashMiles>0&&t.awardConverterMode===this.MILES},hasNotEnoughMiles:function(e,t,i){var n=!1;return t&&this.isMergedFlowMilesMode(e,i)&&(n=e.milesAndCashMergedFlow.resultingMiles.amount>t.userMilesBalance),n},__isMergedFlow:function(e){return e.awardConverterMode===this.MILES_AND_CASH},__isSliderAirMilesMode:function(e,t){return t.sliderEnabled&&this.isSliderModeEnabled(t,this.SLIDER_TYPE_AIR)&&e.milesAndCash&&e.milesAndCash.convertedCashMiles>0},__isCashAndMilesUpgradeMode:function(e,t){return t.sliderEnabled&&this.isSliderModeEnabled(t,this.SLIDER_TYPE_AAAS)&&e.milesAndCash&&e.milesAndCash.convertedCashMiles>0&&e.totalUpgrades&&e.totalUpgrades.totalAmount&&e.totalUpgrades.totalAmount.amount>0},__isSliderAirAndPricingInMilesAndCash:function(e,t){return this.isSliderModeEnabled(t,this.SLIDER_TYPE_AIR)&&null!=e.milesAndCash},isSliderModeEnabled:function(e,t){return e.sliderEnabled&&e.sliderType&&e.sliderType===t},shouldDisplayPriceMiniBreakdown:function(e,t,i){return e.flowType!==t.FLOW_TYPE_REBOOK&&e.flowType!==t.FLOW_TYPE_UPGRADE&&!e.isFarelessFlow&&!this.showPriceMiniBreakdownMilesAndCash(i,e)},shouldDisplayPriceRight:function(e){return!(e.enableNewServicing&&this.isServicingFlow(e))},isServicingFlow:function(e){return e.flowType===this.SERVICING&&!e.RTPLPageMode&&!e.CONFPageMode},shouldDisplayTaxBreakdown:function(e,t){return!this.hideBreakdownInATC(e,t)&&!e.isFarelessFlow},shouldDisplayConfirmedAsAmount:function(e,t){return e.flowType&&e.flowType===t.FLOW_TYPE_REBOOK},getComponentId:function(e,t){return e?e+"-"+t:t},getTotalForAllPaxLabel:function(e,t,i,n){var r="tx_pltg_text_TotalForAllTravellers";if(e&&(!i||!n))switch(t){case"O":r="tx_pltg_text_OneWayPriceForAllPax";break;case"R":r="tx_pltg_text_RoundTripPriceForAllPax";break;case"C":case"M":r="tx_pltg_text_FullItineraryPriceForAllPax"}return this._i18n.getLabel(r)},shouldDisplayTaxInformation:function(e,t){return e&&t.serviceTaxInformation&&t.serviceTaxInformation.totalServiceCharges&&t.serviceTaxInformation.totalServiceTaxes&&(t.serviceTaxInformation.totalServiceCharges.amount||t.serviceTaxInformation.totalServiceTaxes.amount)},shouldDisplayBreakdownForServices:function(e,t){return e&&t.serviceTaxInformation&&t.serviceTaxInformation.totalServiceCharges&&t.serviceTaxInformation.totalServiceTaxes&&(t.serviceTaxInformation.totalServiceCharges.amount||t.serviceTaxInformation.totalServiceTaxes.amount)},shouldAppendNewTag:function(e,t){return e&&t===this.SERVICING},showProductPriceDetails:function(e,t){var i=this._ariaUtilDom.getElementById("price-details-"+t.product),n=this._ariaUtilDom.getElementsByClassName(i,"menu-item")[0],r=this._ariaUtilDom.getElementById("price-details-"+t.product+"-collapsible"),s=this._ariaUtilDom.getDomElementsChildByTagName(this._ariaUtilDom.getElementsByClassName(i,"menu-item")[0],"i")[0];"true"===n.getAttribute("aria-expanded")?(r&&(r.classList.add("hidden"),r.setAttribute("aria-hidden",!0)),n.setAttribute("aria-expanded",!1),s.setAttribute("class","icon-chevron-down")):(r&&(r.classList.remove("hidden"),r.setAttribute("aria-hidden",!1)),n.setAttribute("aria-expanded",!0),s.setAttribute("class","icon-chevron-up")),t.controllerScope.notifyRefresh()},shouldDisplayServicingPrices:function(e,t){if(!t||!e||!this.isServicingFlow(t))return!1;var i=e.totalServices,n=this._getServicesBalancedAmount(i),r=this._getServicesBalancedMilesAmount(i);return!t.disableServicingMode&&t.flowType===this.SERVICING&&(n>=0||r>=0)?!0:!1},_getServicesBalancedAmount:function(e){return e&&e.balancedAmount?e.balancedAmount.amount:0},_getServicesBalancedMilesAmount:function(e){return e&&e.balancedMilesAmount?e.balancedMilesAmount.amount:0},shouldDisplayAirlineFees:function(e){return e.groupAirCharges||!1},shouldDisplayNoMilesInfoWarning:function(e,t){var i=this.isMergedFlowMilesMode(e,t)||this.__isPositiveMilesAmountPresent(e)&&this.isSliderModeEnabled(t,"AIR");return i&&!this.isAirMilesInfoUnavailable(e)},__isPositiveMilesAmountPresent:function(e){return e.milesAndCash&&e.milesAndCash.milesAmount&&e.milesAndCash.milesAmount.amount>0},shouldDisplayTotalAmountForAwardFlow:function(e,t){return this.isAwardFlow(e,t)||this.isMergedFlowMilesMode(e,t)&&!this.__isSliderAirAndPricingInMilesAndCash(e,t)},isAirMilesInfoUnavailable:function(e){return e.milesAndCash&&e.milesAndCash.isAirMilesInfoUnavailable},shouldDisplayAscInAtcReimbursementExplanation:function(e,t){return t&&t.showServicesExtraCost?e.hasAirRefund()&&e.hasServicesExtraCost():!1},shouldDisplayAscInAtcRefundExplanation:function(e,t){return t&&t.showServicesExtraCost?e.hasAirRefund()&&e.hasResidualValue():!1},isRebookingFlowAndPrevSelectionMilesAndCash:function(e){return e.isRebookingFlowAndPrevSelectionMilesAndCash||this._atcMilesAndCashRebookingUtils.getStatusFromSession()},addTTTConfig:function(e,t){return e.hasTimeToThinkDisruptionIncompatibility=t.hasTimeToThinkDisruptionIncompatibility,e},getPriceConverted:function(e){var t=new plnextv2.utils.PriceBeanUtils(e);return t.getPriceConverted()},shouldDisplayCurrencyConversion:function(e,t,i){return e.dccMcp&&!e.consolidatedPayments&&(!t.flowType||t.flowType===i.FLOW_TYPE_STANDARD)},shouldDisplayMiles:function(e,t){return this.isLightMilesAndCashUsed(e,t)||this.isMergedFlowMilesMode(e,t)&&this.__isSliderAirAndPricingInMilesAndCash(e,t)},isShoppingBasketFlowAndPayWithMiles:function(e,t){return this._bookingConfirmationUtils.isShoppingBasketFlowAndPayWithMiles(e,t)},isAdditionalPaymentDetailsToBeDisplayed:function(e,t){return!this.isShoppingBasketFlowAndPayWithMiles(e,t)||this._bookingConfirmationUtils.isPayNow(t)||this._bookingConfirmationUtils.allowCancelFlightButton(t)||this._bookingConfirmationUtils.allowCancelBookingButton(t)||e.mixedCurrencyServices},getFrequentFlyerNumber:function(e){var t="";if(e){var i=e.travellerFrequentFlyerBean;this._bookingConfirmationUtils.isFrequentFlyerNumberAvailable(i)&&(t=i.FREQ_Number)}return t},getClassShoppingBasketPriceDetailsRightCol:function(e,t){return e.consolidatedPayments&&t.displayPaymentBreakdown?"details payment col-sm-12 col-md-12":"details shopping-basket-cart col-sm-12 col-md-12 hidden-xs"},shouldDisplayPriceConversionMessage:function(e){return this._priceUtils.hasServicesWithConvertedAmount(e)&&!this._priceUtils.hasServicesCurrencyDifferentFromBookingCurrency(e)},formatCreditCardNumberDisplay:function(e){var t="";if(e){var i=e.slice(-8);t=i.slice(0,4)+" "+i.slice(4,8)}return t}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/radioButton/RadioButton.cml
//*******************
var Aria=require("ariatemplates/Aria");require("plnextv2/utils/macroLibs/radioButton/RadioButtonScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.radioButton.RadioButton",$extends:require("ariatemplates/templates/CSSTemplate.js"),$constructor:function(){this.$CSSTemplate.constructor.call(this),this.$RadioButtonScript.constructor.call(this)},$destructor:function(){this.$RadioButtonScript.$destructor.call(this),this.$CSSTemplate.$destructor.call(this)},$prototype:{macro_backgroundImage:function(options){try{with(this)this.__$write("\nbackground-image: url('data:image/svg+xml;utf8, ",6),this.__$write(getRadioButtonSVG(options),6),this.__$write("');\n",6)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["backgroundImage",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$csslibs={},e.__$prefix=!0,aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.radioButton.RadioButtonScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/radioButton/RadioButtonScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.radioButton.RadioButtonScript",$dependencies:["aria.utils.Json"],$constructor:function(){},$prototype:{getRadioButtonSVG:function(e){e=e||{};var t=e.size||22,i=e.strokeWidth||1,n=this.getSVGElement({width:e.size+"px",height:e.size+"px",viewBox:"0 0 "+e.size+" "+e.size,"enable-background":"new 0 0 "+e.size+" "+e.size}),r=this.getSVGCircle({"class":"outer",fill:e.fillColor||"#FFFFFF",stroke:e.borderColor||"#000000",cx:t/2,cy:t/2,r:t/2-i/2});if(n.appendChild(r),e.dotColor){var s=this.getSVGCircle({"class":"inner",fill:e.dotColor||"#00000",cx:t/2,cy:t/2,r:e.dotSize||t/4});n.appendChild(s)}return this.toString(n,e)},getSVGHeader:function(){return['<?xml version="1.0" encoding="utf-8"?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'].join("")},getSVGElement:function(e){var t=document.createElement("svg"),i={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xml:space":"preserve",x:"0px",y:"0px",width:"22px",height:"22px",viewBox:"0 0 22 22","enable-background":"new 0 0 22 22"};return t=this.setSVGParameters(t,e,i)},getSVGCircle:function(e){var t=document.createElement("circle");return t=this.setSVGParameters(t,e)},setSVGParameters:function(e,t,i){var n=e.cloneNode(!0),r=aria.utils.Json.copy(t);i&&aria.utils.Json.inject(i,r);for(var s in r)r.hasOwnProperty(s)&&n.setAttribute(s,r[s]);return n},toString:function(e,t){var i="undefined"==typeof t.encode?!0:t.encode;return i?encodeURIComponent(e.outerHTML):e.outerHTML}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/radioGroupMenu/RadioGroupMenu.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/macroLibs/radioGroupMenu/RadioGroupMenuScript.js"),require("ariatemplates/html/Template.js"),require("cse/pageEngine/CustomPlaceholder.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.radioGroupMenu.RadioGroupMenu",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$RadioGroupMenuScript.constructor.call(this)},$destructor:function(){this.$RadioGroupMenuScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_displayPanel:function(optionsList,config,parent,bsGridClass){try{with(this)this.__$write(this.$modifier("eat",[setup(parent)]),28),this.__$write("\n\n<section>\n",29),optionsList.length>1?(this.__$write('\n<div class="mainDiv">\n',32),this.__$insertSection(33,{type:"div",attributes:{classList:["menu-items-wrapper",bsGridClass.modLeftSection]},macro:{name:"displayMenuOptions",scope:this,args:[optionsList,config]},bindRefreshTo:[{to:config.bindedProperty,inside:config.data}]}),this.__$insertSection(45,{type:"div",attributes:{classList:["relative","content-panel-wrapper",bsGridClass.modContentSection]},macro:{name:"displayContentPanel",scope:this,args:[config]},bindRefreshTo:[{to:config.bindedProperty,inside:config.data}]}),this.__$write("\n</div>\n",57)):(this.__$write('\n<div class="margin-left-zero">\n',59),this.__$insertSection(60,{type:"div",attributes:{classList:["relative","content-panel-wrapper",bsGridClass.modContentSectionWithSingleOption]},macro:{name:"displayContentPanel",scope:this,args:[config]},bindRefreshTo:[{to:config.bindedProperty,inside:config.data}]}),this.__$write("\n</div>\n",72)),this.__$write("\n</section>\n\n",74)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPanel",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayHeader:function(optionsList,config){try{with(this)this.__$write('\n\n\n<div class="heading row">\n<h2>\n<span class="',84),this.__$write(config.iconClass,88),this.__$write(' heading-icon" aria-hidden="true"></span>\n<span class="heading-text">',88),this.__$write(this._i18n.getLabel(config.panelTitleKey),89),this.__$write("</span>\n</h2>\n</div>\n\n",89)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayHeader",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayHeaderText:function(optionsList,config){try{with(this)optionsList.length>1&&(this.__$write('\n<div class="heading-banner">\n<fieldset class="radio-menu">\n<legend>',102),this.__$write(this._i18n.getLabel(config.promptMessageKey),104),this.__$write("</legend>\n</fieldset>\n</div>\n",104))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayHeaderText",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayMenuOptions:function(optionsList,config){try{with(this){if(this.__$write('\n\n<ul class="menu-items-list">\n',116),config.orderedOptions)for(var i=0;i<config.orderedOptions.length;i++){var currentOption=this.getOption(optionsList,config.orderedOptions[i]);currentOption&&(this.__$write("\n<li>\n",123),this.macro_printRadio(currentOption.value,this._i18n.getLabel(currentOption.labelKey),config),this.__$write("\n</li>\n",125))}else for(var i=0;i<optionsList.length;i++)this.__$write("\n<li>\n",130),this.macro_printRadio(optionsList[i].value,this._i18n.getLabel(optionsList[i].labelKey),config),this.__$write("\n</li>\n",132);this.__$write("\n</ul>\n",135)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayMenuOptions",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printRadio:function(value,name,config){try{with(this){this.__$write('\n<span class="btn btn-tertiary menu-item-btn ',145),config.isSelected(value)&&this.__$write(" selected-item ",145),this.__$write('" ',145),this.__$statementOnEvent("click",this.$normCallback({fn:config.toggleOption,args:{code:value},scope:config.scope}),145),this.__$write(">\n",145);var radioId="radio_"+value;this.__$write("\n<input ",147),this.__$writeId(radioId,147),this.__$write(' type="radio" name="radio_group" value="',147),this.__$write(value,147),this.__$write('" ',147),config.isSelected(value)&&this.__$write(' checked="checked" ',147),this.__$write('/>\n<label for="',147),this.__$write(parent.$getId()+radioId,148),this.__$write('">\n<span class="item-name">',148),this.__$write(name,149),this.__$write("</span>\n</label>\n</span>\n",149)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printRadio",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayContentPanel:function(config){try{with(this)if(config.data&&config.data[config.bindedProperty]){var selectedOption=config.data[config.bindedProperty];if(config.templateMap[selectedOption])if(aria.utils.Type.isArray(config.templateMap[selectedOption]))for(var i=0;i<config.templateMap[selectedOption].length;i++)this.macro_loadContent(config.templateMap[selectedOption][i],config.data);else this.macro_loadContent(config.templateMap[selectedOption],config.data)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayContentPanel",__filename,this["aria:currentLineNumber"]],_ex)}},macro_loadContent:function(contentOptions,ContentData){try{with(this)contentOptions.templatePath?this.__$processWidgetMarkup("aria.html.HtmlLibrary","Template",{classpath:contentOptions.templatePath,id:"optionTemplate",data:ContentData,type:"div",attributes:{classList:contentOptions.classList||["panel  contentDiv"]}},176):contentOptions.componentName&&(this.__$write('\n\n\n<div class="row ',186),this.__$write(contentOptions.customClass,188),this.__$write('">\n',188),this.__$processWidgetMarkup("cse.pageEngine.CseWidgets","Placeholder",{name:contentOptions.componentName},189),this.__$write("\n</div>\n",190))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["loadContent",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.radioGroupMenu.RadioGroupMenuScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/radioGroupMenu/RadioGroupMenuScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.radioGroupMenu.RadioGroupMenuScript",$constructor:function(){this._i18n=plnextv2.utils.I18n},$prototype:{setup:function(e){this.parent=e},getOption:function(e,t){for(var i=0;i<e.length;i++)if(t===e[i].value)return e[i]}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/radioGroupMenu/RadioGroupMenuStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.radioGroupMenu.RadioGroupMenuStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n\n\n.DPURCView .payment{\nmargin-top: 20px;\n}\n\nfieldset.radio-menu {\nwidth: 100%;\n}\n\nfieldset.radio-menu legend {\nmargin: 10px 0;\nfont-weight: bold;\n}\n.menu-items-wrapper {\npadding: 0;\nz-index: 1;\n}\n.content-panel-wrapper {\npadding: 0;\n}\n\n\n.content-panel-wrapper .panel{\npadding: 20px;\nmargin : 0px;\n}\n\n.menu-items-list {\npadding: 0;\nbackground-color:",19),this.__$write($grayLight,50),this.__$write(";\nmargin : 0px;\n}\n\n.menu-items-list .item-name {\nwhite-space: normal;\n}\n.menu-items-wrapper .menu-item-btn {\ndisplay: block;\ntext-align: left;\nborder: 0px;\ntext-decoration: none;\nmargin-bottom: 1px;\npadding-top: 1rem;\npadding-bottom: 1rem;\nbackground-color: ",50),this.__$write($grayLighter,65),this.__$write(";\nborder-left: 1px solid transparent;\n-webkit-transition: background-color 350ms ease-in-out;\ntransition: background-color 350ms ease-in-out;\n}\n.menu-items-wrapper .menu-item-btn.selected-item {\nbackground-color: ",65),this.__$write($white,71),this.__$write(";\nbox-shadow: none;\nborder-bottom: 1px solid ",71),this.__$write($grayLight,73),this.__$write(";\nborder-left: 1px solid ",73),this.__$write($grayLight,74),this.__$write(";\n}\n\n.heading-banner {\nbackground-color: #ececec;\npadding: 20px;\nbox-shadow: 1px 1px 1px #aaa;\n}\n\n.contentDiv {\nmargin-right : 2px;\n}\n\n.e-ticket-panel{\nmargin: 0px;\n}\n\n",74)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/rebookingServices/desktop/views/DRebookingServicesView.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/macroLibs/rebookingServices/desktop/views/DRebookingServicesViewScript.js"),require("plnextv2/utils/widgets/plnextLib/message/core/Message.js"),require("cse/pageEngine/CustomPlaceholder.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.rebookingServices.desktop.views.DRebookingServicesView",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$DRebookingServicesViewScript.constructor.call(this)},$destructor:function(){this.$DRebookingServicesViewScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_displayResidualValueInformation:function(price){try{with(this)this.hasResidualValue(price)&&this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","Message",{type:"info",id:"asc-atc-residual-value-message"},17)&&(this.__$write("\n<p>",21),this.__$write(this._i18n.getStringFromPattern("tx_pltg_text_asc_atc_residual_value_eligible",[this.getFormattedResidualValue(price)]),21),this.__$write("\n</p>\n",23),this.__$endContainerWidget())}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayResidualValueInformation",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayRebookingServicesWarnings:function(config,serviceComparison){try{with(this)config.displayRebookRepriceServicesWarnings&&this.__$insertSection(34,{id:"rebooking-services-warnings",macro:{name:"displayRebookingServicesWarningsSection",scope:this},attributes:{classList:["component-container","rebooking-services-warnings-container"]},bindRefreshTo:[{to:"warnings",inside:serviceComparison}]})}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayRebookingServicesWarnings",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayRebookingServicesWarningsSection:function(){try{with(this)this.__$processWidgetMarkup("cse.pageEngine.CseWidgets","Placeholder",{name:"rebookingServicesWarnings"},52)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayRebookingServicesWarningsSection",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.rebookingServices.desktop.views.DRebookingServicesViewScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/rebookingServices/desktop/views/DRebookingServicesViewScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.rebookingServices.desktop.views.DRebookingServicesViewScript",$dependencies:["plnextv2.utils.I18n","plnextv2.utils.PriceUtils"],$constructor:function(){this._i18n=plnextv2.utils.I18n,this._priceUtils=plnextv2.utils.PriceUtils},$prototype:{hasResidualValue:function(e){return!!(e&&e.totalResidualValue&&e.totalResidualValue.amount>0)},getFormattedResidualValue:function(e){if(!this.hasResidualValue(e))return"";var t=e.totalResidualValue.amount,i=e.totalResidualValue.currency;return this._priceUtils.formatCurrency(t,i)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/serviceFlex/desktop/styles/DServiceFlexStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.serviceFlex.desktop.styles.DServiceFlexStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n.popover.seat-characteristics-popover {\ncolor: ",7),this.__$write(this.$white,9),this.__$write(";\nbackground-color: ",9),this.__$write(this.$grayDarker,10),this.__$write(";\nfont-weight: normal;\nfont-size: 13px;\nword-wrap: break-word;\n}\n\n.popover.seat-characteristics-popover > .arrow:after {\nborder-top-color: ",10),this.__$write(this.$grayDarker,17),this.__$write(";\n}\n\n",17)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/serviceFlex/desktop/views/DServiceFlex.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/widgets/plnextLib/popover/Popover.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.serviceFlex.desktop.views.DServiceFlex",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this)},$destructor:function(){this.$Template.$destructor.call(this)},$prototype:{macro_displayServiceLabel:function(service){try{with(this)this.__$write(service.label,7),service.hasSeatCharacteristics&&(this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","Popover",{macro:{name:"seatCharacteristicsTooltipContent",scope:this},showOnMouseOver:!0,position:"top",width:250,cssClass:"seat-characteristics-popover",fadeIn:!1,fadeOut:!1},9)&&(this.macro_seatCharacteristicsTooltipIcon(),this.__$endContainerWidget()),this.__$write('\n<span class="plnext-sr-only">\n',23),this.macro_seatCharacteristicsTooltipContent(),this.__$write("\n</span>\n",25))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayServiceLabel",__filename,this["aria:currentLineNumber"]],_ex)}},macro_seatCharacteristicsTooltipContent:function(){try{with(this)this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_servicesFlexSeatCharacteristicsTooltip"),30)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["seatCharacteristicsTooltipContent",__filename,this["aria:currentLineNumber"]],_ex)}},macro_seatCharacteristicsTooltipIcon:function(){try{with(this)this.__$write('\n<span class="no-wrap-text seat-characteristics-icon">\n<a href="javascript:;">\n<i class="icon-info-sign" aria-hidden="true"></i>\n</a>\n</span>\n',34)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["seatCharacteristicsTooltipIcon",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={}},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/tabletFlightInfo/TabletFlightInfo.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/ATCMilesAndCashRebookingUtils.js"),require("ariatemplates/utils/Dom.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/BootstrapUtils.js"),require("plnextv2/utils/DateUtils.js"),require("plnextv2/utils/macroLibs/tabletFlightInfo/TabletFlightInfoScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.tabletFlightInfo.TabletFlightInfo",$extends:require("plnextv2/utils/macroLibs/flightInfo/FlightInfo.tml"),$constructor:function(){this.$FlightInfo.constructor.call(this),this.$TabletFlightInfoScript.constructor.call(this)},$destructor:function(){this.$TabletFlightInfoScript.$destructor.call(this),this.$FlightInfo.$destructor.call(this)},$prototype:{macro_printBoundHeader:function(options){try{with(this){{options.classPrefix}this.__$write('\n<div class="bound-header-container">\n',25),this.macro_showSRInstruction(options.showRecap,options.boundIndex,options.scope),this.__$write('\n<header class="bound-header text-center">\n',27),options.boundHeaderText&&(this.__$write('\n<h2 class="header-text">\n',29),this.__$write(options.boundHeaderText,30),this.__$write("\n</h2>\n",31)),options.hideDate||!options.showRecap&&options.isDualMode&&options.printCalendar||this.macro_printHeaderDate({bdate:new Date(options.bound.beginDate),dateFormat:options.dateFormat,shortDayName:options.shortDayName}),this.macro_printCalendarLink({linkCalendar:options.linkCalendar,fn:options.fn,scope:options.scope});var panelTag=options.headerPanelTag||"div";this.__$write("\n<",42),this.__$write(panelTag,42),this.__$write(' class="header-panel">\n',42),options.boundLabel&&(this.__$write('\n<div class="container-text container-text-bound-label">',44),this.__$write(options.boundLabel,44),this.__$write("</div>\n",44)),this.__$write('\n\n<div class="container-text container-text-from">',46),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_FromDestination"),47),this.__$write('</div>\n<div class="text-right container-location container-location-from">\n',47),this.macro_printHeaderDestination(options,"begin",!0),this.__$write('\n</div>\n<div class="spacer"><hr aria-hidden="true"/></div>\n<div class="container-icon">\n<i class="',50),this.__$write(options.iconPlane,53),this.__$write('" aria-hidden="true"></i>\n</div>\n<div class="container-text container-text-to">',53),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_ToDestination"),55),this.__$write('</div>\n<div class="spacer"><hr aria-hidden="true"/></div>\n<div class="text-left container-location container-location-to">\n',55),options.hideArrival||this.macro_printHeaderDestination(options,"end",options.hideArrow),this.__$write("\n</div>\n</",61),this.__$write(panelTag,62),this.__$write(">\n\n",62),this.macro_displayPopularityMessageInPriceInfoPanel(options),this.__$write("\n</header>\n</div>\n",65)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printBoundHeader",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printHeaderDestination:function(options,prefixBound,hideArrow){try{with(this)this.macro_printHeaderLocation({location:options.bound[prefixBound+"Location"],type:"from",hideLocationCode:options.hideLocationCode,headerLocationCols:options.headerLocationCols})}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printHeaderDestination",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printHeaderDate:function(options){try{with(this)this.__$write('\n<div class="date">\n<abbr title="',77),this.__$write(plnextv2.utils.DateUtils.formatDateTime(options.bdate,plnextv2.utils.DateUtils.FORMATS.FULL_DATE_FORMAT),78),this.__$write('">\n\n\n',78),(options.shortDayName===!0||options.shortDayName===!1)&&this.__$write(plnextv2.utils.DateUtils.getDayName(options.bdate.getDay(),options.shortDayName),82),this.__$write(plnextv2.utils.DateUtils.formatDateTime(options.bdate,options.dateFormat),84),this.__$write("\n</abbr>\n</div>\n",85)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printHeaderDate",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printHeaderLocation:function(options){try{with(this)this.__$write('\n<div class="header-location" data-airport="',91),this.__$write(options.location.locationName,91),this.__$write('">\n<div class="city-name">',91),this.__$write(options.location.cityName,92),this.__$write('</div>\n<span class="airport-name">',92),this.__$write(options.location.locationName,93),this.__$write("</span>\n",93),options.hideLocationCode||(this.__$write("\n<span class=\"airport-code\"><bdo dir='ltr'>(",95),this.__$write(options.location.locationCode,95),this.__$write(")</bdo></span>\n",95)),this.__$write("\n</div>\n",97)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printHeaderLocation",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayPopularityMessageInPriceInfoPanel:function(options){try{with(this)this.macro_validateAndGetPopularityMessage(options)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPopularityMessageInPriceInfoPanel",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayPopularityMessage:function(options){try{with(this);}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPopularityMessage",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printRecommendation:function(options){try{with(this){var prefix=options.classPrefix,cellStatus=this.getCellStatus(options.infoCell);cellStatus===this.CELL_STATUS.SELECTABLE||cellStatus===this.CELL_STATUS.AUTO_UPSELLABLE||cellStatus===this.CELL_STATUS.DISABLED?(this.__$write('\n\n<input\ntype="radio"\nname="',116),this.__$write(getGroupID(options),119),this.__$write('"\nclass="',119),this.__$write(prefix,120),this.__$write('-row-radio-button"\n',120),this.__$writeId(getRadioID(options),121),isCellSelected(options)&&this.__$write("checked",122),this.__$statementOnEvent("click",this.$normCallback({fn:this.callFareFamilySelection,scope:this,args:options}),123),disabledInMilesAndCash(options)&&this.__$write("disabled",128),this.__$write('\n>\n<div\nstyle="',129),this.__$write(options.style,131),this.__$write('"\nclass="',131),this.__$write(getRecomendationClass(options),132),this.__$write('"\n',132),this.__$statementOnEvent("click",this.$normCallback({fn:this.callFareFamilySelection,scope:this,args:options}),133),this.__$write(">\n",137),this.macro_printRecommendationSidebar(options),this.macro_printRecommendationContent(options),this.__$write("\n</div>\n",140)):cellStatus===this.CELL_STATUS.NOT_COMBINABLE?this.macro_printRecommendationNotCombinable(options):cellStatus===this.CELL_STATUS.SOLDOUT&&this.macro_printRecommendationSoldOut(options)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printRecommendation",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printRecommendationSoldOut:function(options){try{with(this)this.__$write('\n<div class="plnext-sr-only">\n',153),this.__$write(getSoldOutAX(options),154),this.__$write('\n</div>\n<div aria-hidden="true" style="',155),this.__$write(options.style,156),this.__$write('" class="',156),this.__$write(getRecomendationClass(options),156),this.__$write('">\n<div aria-hidden="true" class="col-xs-8 availability-recommendation-sidebar cell-reco-sold-out">\n<span class="cell-reco-soldout-text">',156),this.__$write(this._i18n.getLabel("tx_pltg_text_SoldOut"),158),this.__$write("</span>\n",158),options.infoCell.bestPriceFormattedText&&(this.__$write('\n<span class="cell-reco-soldout-price">',160),this.macro_printPrice(options),this.__$write("</span>\n",160)),this.__$write("\n</div>\n",162),this.macro_printRecommendationContent(options),this.__$write("\n</div>\n",164)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printRecommendationSoldOut",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printRecommendationNotCombinable:function(options){try{with(this)this.__$write('\n<span class="plnext-sr-only">',172),this.__$write(options.fareFamilyName,172),this.__$write(" - ",172),this.__$write(_i18n.getLabel("tx_pltg_text_noCombinableSidebar"),172),this.__$write('</span>\n<div aria-hidden="true" style="',172),this.__$write(options.style,173),this.__$write('" class="',173),this.__$write(getRecomendationClass(options),173),this.__$write('">\n<div aria-hidden="true" class="col-xs-8 availability-recommendation-sidebar cell-reco-not-combinable">\n<span class="cell-reco-not-combinable-text">',173),this.__$write(_i18n.getLabel("tx_pltg_text_noCombinableSidebar"),175),this.__$write("</span>\n</div>\n",175),this.macro_printRecommendationContent(options),this.__$write("\n</div>\n",178)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printRecommendationNotCombinable",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printRecommendationContent:function(options){try{with(this){var prefix=options.classPrefix;this.__$write('\n<div class="col-xs-16 ',187),this.__$write(prefix,187),this.__$write("-recommendation-content ",187),this.__$write(getNotAvailableClass(options),187),this.__$write('" aria-hidden="true">\n<div class="row ',187),this.__$write(prefix,188),this.__$write('-reco-content-row">\n<div class="col-xs-20">\n',188),options.infoCell.isMarginal&&(this.__$write('\n<div class="',191),this.__$write(prefix,191),this.__$write('-marginal-fare visible-xxxs">\n',191),this.__$write(_i18n.getLabel("tx_pltg_text_onlyAvailableInMiles"),192),this.__$write("\n</div>\n",193));var cellStatus=this.getCellStatus(options.infoCell);cellStatus===this.CELL_STATUS.NOT_COMBINABLE?(this.__$write('\n<div class="visible-xxxs">\n<span class="cell-reco-not-combinable-text">',197),this.__$write(_i18n.getLabel("tx_pltg_text_noCombinableSidebar"),198),this.__$write("</span>\n</div>\n",198)):cellStatus===this.CELL_STATUS.SOLDOUT?(this.__$write('\n<div class="visible-xxxs cell-reco-sold-out-content">\n<span class="cell-reco-soldout-text">',201),this.__$write(this._i18n.getLabel("tx_pltg_text_SoldOut"),202),this.__$write('</span>\n<span class="cell-reco-soldout-price">',202),this.macro_printPrice(options),this.__$write("</span>\n</div>\n",203)):(this.__$write('\n<div class="availability-recommendation-price" aria-hidden="true">\n',206),disabledInMilesAndCash(options)?this.macro_disabledAwardCellMergedFlow(prefix,options.infoCell,options.fareFamilyName):(this.__$write('\n<div class="visible-xxxs">\n',210),this.macro_printPrice(options),this.__$write("\n</div>\n",212)),this.__$write("\n</div>\n",214)),this.__$write('\n\n<div class="',216),this.__$write(prefix,217),this.__$write('-recommendation-title">',217),this.__$write(options.fareFamilyName,217),this.__$write("</div>\n",217),this.macro_printMixedFareAndCabin(options),options.infoCell.bestDiscountReasons&&this.displayInitialAndDiscountedPrice(options,options.infoCell.bestDiscountPriceFormatted)&&this.macro_printDiscountReasons(options.infoCell.bestDiscountReasons),this.__$write('\n<div class="row ',222),this.__$write(prefix,222),this.__$write("-recommendation-description\n",222),options.isAutocollapseEnabled||this.__$write(getRecommendationDescriptionClass(options),224),this.__$write('">\n',225),this.macro_printServicesColumn(options),this.__$write("\n</div>\n\n",227),plnextv2.utils.ATCMilesAndCashRebookingUtils.isATCAndMilesAndCashRefund(options)&&this.macro_printATCRebookingAndMACRefundMessage(options),isWaitlist(options)&&this.macro_printWaitlist(options),this.__$write('\n\n<div class="visible-xxxs">\n',236),this.macro_printSeatLeft(options),this.__$write('\n</div>\n\n</div>\n\n<div class="col-xs-4">\n',239),this.macro_printRecommendationSidebarRight(options),this.__$write("\n</div>\n</div>\n</div>\n",245)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printRecommendationContent",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printATCRebookingAndMACRefundMessage:function(options){try{with(this)options.infoCell.selected&&(this.__$write('\n<span class="atcMilesAndCashRefundInfoMessage">\n',252),this.__$write(_i18n.getLabel("tx_pltg_text_ATCRefundMilesAndCashContactToConfirm"),253),this.__$write("\n</span>\n",254))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printATCRebookingAndMACRefundMessage",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printMixedFareAndCabin:function(options){try{with(this)if(mixedFareOrCabinList=this.getMixedFareOrCabinList(options),mixedFareOrCabinList.length>0){this.__$write('\n<div class="mixedFareAndCabinContainer">\n<div class="mixedFareAndCabinIcon">\n<i class="icon-info-sign" aria-hidden="true"></i>\n</div>\n<div class="mixedFareAndCabinContent">\n',265);var __v_1=mixedFareOrCabinList;void 0==mixedFareOrCabinList&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,270]);for(var mixedFareOrCabin_ct=0,__v_2=__v_1.length,mixedFareOrCabin_index=0;__v_2>mixedFareOrCabin_index;mixedFareOrCabin_index++){var mixedFareOrCabin=__v_1[mixedFareOrCabin_index];mixedFareOrCabin_ct++,this.__$write("\n<span>",271),this.__$write(mixedFareOrCabin,271),this.__$write("</span>\n",271)}this.__$write("\n</div>\n</div>\n",273)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printMixedFareAndCabin",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printDiscountReasons:function(bestDiscountReasons){try{with(this){var __v_3=bestDiscountReasons;void 0==bestDiscountReasons&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,283]);for(var bestDiscountReason_ct=0,__v_4=__v_3.length,bestDiscountReason_index=0;__v_4>bestDiscountReason_index;bestDiscountReason_index++){var bestDiscountReason=__v_3[bestDiscountReason_index];bestDiscountReason_ct++,this.__$write('\n<div class="discountReasonText">',284),this.__$write(bestDiscountReason.reason,284),this.__$write("</div>\n",284)}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printDiscountReasons",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printRecommendationSidebar:function(options){try{with(this){var prefix=options.classPrefix;this.__$write('\n<div class="col-xs-8 ',294),this.__$write(prefix,294),this.__$write('-recommendation-sidebar">\n<div class="',294),this.__$write(prefix,295),this.__$write('-recommendation-sidebar-inner">\n',295);var isMarginal="";if(options.infoCell.isMarginal)var isMarginal="isMarginal";else this.__$write('\n<label class="',298),this.__$write(prefix,298),this.__$write('-recommendation-sidebar-radio" for="',298),this.__$write(options.scope.$getId(getRadioID(options)),298),this.__$write('">\n<span class="sr-only not-focusable-by-sr">',298),this.__$write(getCheckboxAriaLabel(options),299),this.__$write("</span>\n</label>\n",299);this.__$write('\n<div class="',304),this.__$write(prefix,304),this.__$write("-recommendation-sidebar-content hidden-xxxs ",304),this.__$write(isMarginal,304),this.__$write('">\n',304),this.macro_printPrice(options),this.__$write("\n<br/>\n",306),this.macro_printSeatLeft(options),this.__$write("\n</div>\n",308),this.macro_printHeaderCell(options,prefix),this.__$write("\n</div>\n</div>\n",310)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printRecommendationSidebar",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printPrice:function(options){try{with(this)options.infoCell.isMarginal?this.__$write(_i18n.getLabel("tx_pltg_text_onlyAvailableInMiles"),320):(this.displayInitialAndDiscountedPrice(options,options.infoCell.bestDiscountPriceFormatted)&&this.__$write(options.infoCell.bestDiscountPriceFormatted,323),this.__$write(options.infoCell.bestPriceFormatted,325),this.isPromoCodeDiscountEnabled(options)&&options.infoCell.bestDiscountPriceFormatted&&this.__$write('\n<span class="icon-discount-content">\n<i class="icon-discount" aria-hidden="true"></i>\n</span>\n',328))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printPrice",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printRecommendationSidebarRight:function(options){try{with(this){var prefix=options.classPrefix;disabledInMilesAndCash(options)&&!options.infoCell.isMarginal&&(this.__$write('\n<div class="',342),this.__$write(prefix,342),this.__$write('-recommendation-sidebar-right-disabled">\n<i class="icon-ban-circle" aria-hidden="true"></i>\n</div>\n',342))}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printRecommendationSidebarRight",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printServicesColumn:function(options){try{with(this){var prefix=options.classPrefix,characteristicsTwoCols=getFareFamilyCharacterstics(options.ffCode,options.characteristicsList,!0),characteristicsOneCol=getFareFamilyCharacterstics(options.ffCode,options.characteristicsList);this.__$write('\n<ul class="',356),this.__$write(prefix,356),this.__$write('-recommendation-list">\n\n',356);var __v_5=characteristicsTwoCols;void 0==characteristicsTwoCols&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,358]);var characteristic_ct=0;for(var characteristic_index in __v_5)if(__v_5.hasOwnProperty(characteristic_index)&&!this.$json.isMetadata(characteristic_index)){var characteristic=__v_5[characteristic_index];characteristic_ct++,this.__$write('\n<li class="col-md-12 hidden-sm hidden-xs">',359),this.__$write(characteristic.description,359),this.__$write("</li>\n",359)}var __v_6=characteristicsOneCol;void 0==characteristicsOneCol&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,362]);var characteristic_ct=0;for(var characteristic_index in __v_6)if(__v_6.hasOwnProperty(characteristic_index)&&!this.$json.isMetadata(characteristic_index)){var characteristic=__v_6[characteristic_index];characteristic_ct++,this.__$write('\n<li class="col-xs-24 visible-sm visible-xs">',363),this.__$write(characteristic.description,363),this.__$write("</li>\n",363)}this.__$write("\n</ul>\n",365),options.ffURI&&options.ffURI.length>0&&(this.__$write('\n<div class="more-details-link-container col-xs-24">\n<a href="',367),this.__$write(options.ffURI,368),this.__$write('" target="_blank"\n',368),this.__$statementOnEvent("click",this.$normCallback({fn:"clickFareFamilyDetails",scope:this,args:options}),369),this.__$write(">\n<span>",369),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_FFMoreDetails"),370),this.__$write('</span>\n<span class="plnext-sr-only">',370),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_OpenNewWindow"),371),this.__$write('</span>\n<i class="ffcomp-footer-th-icon icon-external-link" aria-hidden="true" title="',371),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_OpenNewWindow"),372),this.__$write('"></i>\n</a>\n</div>\n',372))}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printServicesColumn",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printHeaderCell:function(options,prefix){try{with(this)options.infoCell.bestCombination&&(this.__$write('\n<div class="',385),this.__$write(prefix,385),this.__$write('-recommendation-indicators hidden-xxxs" aria-hidden="true">\n<i aria-hidden="true" title=\'',385),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_LowestFares"),386),this.__$write("' class=\"",386),this.__$write(this.getPrefixedClass("icon-lowest",prefix),386),this.__$write(" ",386),this.__$write(this.getPrefixedClass("reco-icon-lowest",prefix),386),this.__$write('"></i>\n<span class="plnext-sr-only">',386),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_LowestFares"),387),this.__$write("</span>\n</div>\n",387))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printHeaderCell",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printSeatLeft:function(options){try{with(this)options.flowType&&options.flowType==options.flowTypeRebookValue?options.allowATCLSAindicator&&options.infoCell.displayLSAInfo===this.DISPLAY_LSA_INFO_CONST.TAG_YES&&options.infoCell.numberOfSeatsLeft<this.MAX_SEATS_LEFT&&(this.__$write('\n<span class="cell-reco-seats-text">',397),this.__$write(getSeatsLeftText(options.infoCell.numberOfSeatsLeft),397),this.__$write("</span>\n",397)):options.allowLSAindicator&&options.infoCell.displayLSAInfo===this.DISPLAY_LSA_INFO_CONST.TAG_YES&&options.infoCell.numberOfSeatsLeft<this.MAX_SEATS_LEFT&&(this.__$write('\n<span class="cell-reco-seats-text">',403),this.__$write(getSeatsLeftText(options.infoCell.numberOfSeatsLeft),403),this.__$write("</span>\n",403))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printSeatLeft",__filename,this["aria:currentLineNumber"]],_ex)}},macro_disabledAwardCellMergedFlow:function(prefix,infoCell,fareFamilyName){try{with(this){if(this.__$write('\n<div class="',413),this.__$write(prefix,413),this.__$write('-recommendation-title">\n',413),infoCell.cell&&infoCell.cell.notEnoughMiles)this.__$write('\n<span title="',415),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_NotEnoughMilesSwitch"),415),this.__$write('">\n<span class="plnext-sr-only">',415),this.__$write(fareFamilyName,416),this.__$write("</span>\n<p>",416),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_NotEnoughMilesLabel"),417),this.__$write('</p>\n<p class="visible-xxxs">',417),this.__$write(infoCell.milesText,418),this.__$write("</p>\n</span>\n",418);else if(infoCell.onlyAvailableInCash){var currency=infoCell.currency;this.__$write('\n<span title="',422),this.__$write(_i18n.getLabel("tx_pltg_text_onlyAvailableInCashTooltip"),422),this.__$write('">\n<span class="plnext-sr-only">',422),this.__$write(fareFamilyName,423),this.__$write("</span>\n",423),this.__$write(_i18n.getStringFromPattern("tx_pltg_text_onlyAvailableIn",[currency.name,plnextv2.utils.StringUtils.evaluateUnicodeString(currency.code)]),424)}else infoCell.isMarginal||this.macro_printAXNotAvailableCell(fareFamilyName);this.__$write("\n</div>\n",430)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["disabledAwardCellMergedFlow",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printWaitlist:function(options){try{with(this)this.$FlightInfo.macro_printWaitlist.apply(this,[options]),options.infoCell.selected&&(this.__$write("\n<br>\n<span>\n",436),this.__$write(_i18n.getLabel("tx_pltg_text_waitlistTooltip"),438),this.__$write("\n</span>\n",439))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printWaitlist",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.tabletFlightInfo.TabletFlightInfoScript,e)},__$initTemplate:function(){return this.$FlightInfo.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/tabletFlightInfo/TabletFlightInfoScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.tabletFlightInfo.TabletFlightInfoScript",$dependencies:["aria.utils.Dom","plnextv2.utils.FeeUtils","aria.utils.Array"],$statics:{ICON:{PLANE_H_RIGHT:"icon-plane-right",PLANE_H_LEFT:"icon-plane-left"}},$constructor:function(){this._appContext=plnextv2.utils.context.AppContext,this._eventBus=this._appContext.getEventBus()},$prototype:{clickFareFamilyDetails:function(e,t){this._eventBus.publish("analytics:event:clickffmoredetails",this,t)},getPrefixedClass:function(e,t){return t&&(e+=" "+t+"-"+e),e},getGroupID:function(e){return"recomentation-bound-"+e.boundIndex+"-cell-"+e.rowIndex+"-available"},getRadioID:function(e){var t=e.areFaresGrouped?"-grouped-":"";return["table-bound",e.boundIndex,"-cell",t,e.fareFamilyIndex,e.rowIndex,"-available-button"].join("")},getRecomendationClass:function(e){var t=[e.classPrefix+"-recommendation","table-row-display"];return e.infoCell&&(e.infoCell.customClass&&t.push(e.infoCell.customClass),e.infoCell.selectedClass&&t.push(e.infoCell.selectedClass),e.infoCell.teasedClass&&t.push(e.infoCell.teasedClass),e.infoCell.disabledClass&&t.push(e.infoCell.disabledClass)),t.join(" ")},hasSeatLeft:function(e){return(e.flowType&&e.flowType===e.flowTypeRebookValue&&e.allowATCLSAindicator||e.allowLSAindicator)&&e.infoCell.displayLSAInfo===this.DISPLAY_LSA_INFO_CONST.TAG_YES&&e.infoCell.numberOfSeatsLeft<this.MAX_SEATS_LEFT},getIconPlaneBoundClass:function(){return this.ICON.PLANE_H_RIGHT},getCheckboxAriaLabel:function(e){var t="",i=" ",n=", ",r=function(e){var t=document.createElement("span");return t.innerHTML=e,t.textContent||t.innerText};e.infoCell.bestDiscountPriceFormatted?(e.infoCell.bestDiscountReasons&&(t+=this._joinDiscountReasons(e.infoCell.bestDiscountReasons,i)),t+=i+this.getCheckboxAriaLabelDiscountPriceSection(e.infoCell.bestDiscountPriceFormattedText,e.infoCell.bestPriceFormattedText)):t+=e.areFaresGrouped?i+this.getBestPriceFormatted(!0,e.infoCell.bestPriceFormattedText):i+e.infoCell.bestPriceFormattedText,e.infoCell.bestCombination&&(t+=i+plnextv2.utils.I18n.getLabel("tx_pltg_text_LowestFares")),t+=this._getCheckboxAriaLabelMixedFareOrCabin(e),this.hasSeatLeft(e)&&(t+=n+this.getSeatsLeftText(e.infoCell.numberOfSeatsLeft)),this.isWaitlist(e)&&(t+=n+this._i18n.getLabel("tx_pltg_text_WaitlistStatus")+n+this._i18n.getLabel("tx_pltg_text_waitlistTooltip")),this._atcMilesAndCashRebookingUtils.isATCAndMilesAndCashRefund(e)&&(t+=n+this._i18n.getLabel("tx_pltg_text_ATCRefundMilesAndCashContactToConfirm")),e.fareFamilyName&&(t+=i+e.fareFamilyName);var s=this.getFareFamilyCharacterstics(e.ffCode,e.characteristicsList);if(s.length){t+=i+plnextv2.utils.I18n.getLabel("tx_pltg_text_IncludedServices");for(var a=0,o=s.length;o>a;a++)t+=i+r(s[a].description)}return aria.utils.String.escapeForHTML(t)},isCellSelected:function(e){return e&&e.infoCell&&e.infoCell.selected&&!this.disabledInMilesAndCash(e)},callFareFamilySelection:function(e,t){var i={fn:t.events.onClick.fn,scope:t.scope,args:[e,t.events.onClick.args],apply:!0,resIndex:-1};t.infoCell.selected||this.disabledInMilesAndCash(t)||this.$callback(i)},getRecommendationDescriptionClass:function(e){return this.isCellSelected(e)?"slideDownSlow":"hidden"},disabledInMilesAndCash:function(e){return e.infoCell.disabled&&aria.utils.Array.contains([this.MILES_AND_CASH,this.MILES],e.awardConverterMode)},getNotAvailableClass:function(e){var t="",i=this.getCellStatus(e.infoCell);return(i===this.CELL_STATUS.NOT_COMBINABLE||i===this.CELL_STATUS.SOLDOUT)&&(t="no-available-content"),t}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/tabletFlightInfo/TabletFlightInfoStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.tabletFlightInfo.TabletFlightInfoStyle",$extends:require("plnextv2/utils/macroLibs/flightInfo/FlightInfoStyle.tpl.css"),$constructor:function(){this.$FlightInfoStyle.constructor.call(this)},$destructor:function(){this.$FlightInfoStyle.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.$FlightInfoStyle.macro_main.apply(this,[]),this.__$write("\n\n.cell-reco-sold-out {\nwidth: auto;\n}\n\n.no-available-content {\nbackground-color: ",9),this.__$write(this.$grayLighten,15),this.__$write(";\n}\n\n.cell-reco-not-combinable, .cell-reco-sold-out {\ntext-align: center;\n}\n\n.cell-reco-not-combinable-text {\nfont-family: ",15),this.__$write(this.$boldFont,23),this.__$write(";\n}\n\n.cell-reco-sold-out .cell-reco-soldout-text {\nfont-family: ",23),this.__$write(this.$boldFont,27),this.__$write(";\nfont-size: 143%;\n}\n\n.cell-reco-sold-out .cell-reco-soldout-price,\n.cell-reco-sold-out-content .cell-reco-soldout-price {\ntext-decoration: line-through;\npadding-left: 0.3em;\n}\n\n.cell-reco-sold-out .cell-reco-soldout-price * {\nfont-family: ",27),this.__$write(this.$normalFont,38),this.__$write(";\nfont-size: 100%;\ndisplay: inline;\n}\n\n@media (max-width: ",38),this.__$write(this.breakpoints.XXS_MAX,43),this.__$write(") {\n.cell-reco-not-combinable,\n.cell-reco-sold-out {\npadding-left: 1.5em;\npadding-right: 1.5em;\nwidth: 0.1%;\nmin-width: 2.5em;\n}\n\n.cell-reco-not-combinable span,\n.cell-reco-sold-out span {\ndisplay: none;\n}\n\n.availability-reco-content-row .cell-reco-soldout-text {\nfont-family: ",43),this.__$write(this.$boldFont,58),this.__$write(';\n}\n\n.availability-reco-content-row .cell-reco-soldout-price .cell-reco-currency {\npadding-right: 0;\n}\n\n.availability-reco-content-row .cell-reco-soldout-price .cell-reco-bestprice-integer:before {\ncontent: " ";\n}\n\n.cell-reco-sold-out-content .cell-reco-soldout-price {\nfont-size: 85%;\n}\n\n.availability-reco-content-row .cell-reco-soldout-price * {\nfont-family: ',58),this.__$write(this.$normalFont,74),this.__$write(";\nfont-size: 90%;\ndisplay: inline;\n}\n\n}\n",74)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$FlightInfoStyle.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/taxes/styles/CommonTaxStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.taxes.styles.CommonTaxStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n.tripsummary-refund-taxes {\nmargin-bottom: 10px;\n}\n\n.tripsummary-refund-taxes .tax-note {\nmargin-top: 10px;\n}\n\n.tripsummary-refund-taxes .info-icon-box {\nwidth: 4%;\nfloat:left;\n}\n\n.tripsummary-refund-taxes .icon-info-sign {\ncolor: inherit;\nfont-size: inherit;\n}\n\n.tripsummary-refund-taxes .car-info-icon-box .icon-info-sign {\ncolor: inherit;\nfont-size: inherit;\n}\n\n.tripsummary-refund-taxes .tax-amount-box {\nwidth: 94%;\nfloat: right;\n}\n\n.tripsummary-refund-taxes .refundable-tax-amount-box {\npadding-left:5px;\n}\n\n.tripsummary-refund-taxes .clear {\nclear: both;\n}\n\n.tripsummary-refund-taxes .tax-refund-disclaimer{\npadding-left: 15px;\n}\n\n",7)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/taxes/views/CommonTax.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/PriceUtils.js"),require("plnextv2/utils/I18n.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.taxes.views.CommonTax",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this)},$destructor:function(){this.$Template.$destructor.call(this)},$prototype:{macro_displayRefundableTaxes:function(tax,cssClass){try{with(this)this.__$write('\n<div class="tripsummary-refund-taxes ',7),this.__$write(cssClass,7),this.__$write('">\n<div class="tax-note">\n<div class="info-icon-box" >\n<i class="icon-info-sign" ></i>\n</div>\n<div class="tax-amount-box" >\n<div>\n',7),this.__$write(plnextv2.utils.I18n.getStringFromPattern("tx_pltg_pattern_RefundableTaxes",[plnextv2.utils.PriceUtils.formatCurrency(tax.amount,tax.currency,"pricesummarybottom-price-amount-currency","pricesummarybottom-price-amount-value")]),14),this.__$write("\n</div>\n<div>\n",21),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_RefundableTaxesDisclaimer"),23),this.__$write('\n</div>\n</div>\n<div class="clear"></div>\n</div>\n</div>\n',24)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayRefundableTaxes",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayRefundableTaxesCarFlow:function(tax){try{with(this)this.__$write('\n<div class="tripsummary-refund-taxes total-price-message">\n<div class="tax-note">\n<div>\n<span class="car-info-icon-box">\n<i class="icon-info-sign"></i>\n</span>\n<span class="refundable-tax-amount-box">\n',32),this.__$write(plnextv2.utils.I18n.getStringFromPattern("tx_pltg_pattern_RefundableTaxes",[plnextv2.utils.PriceUtils.formatCurrency(tax.amount,tax.currency,"pricesummarybottom-price-amount-currency","pricesummarybottom-price-amount-value")]),39),this.__$write('\n</span>\n</div>\n<div class="tax-refund-disclaimer" >\n',46),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_RefundableTaxesDisclaimer"),49),this.__$write('\n</div>\n<div class="clear"></div>\n</div>\n</div>\n',50)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayRefundableTaxesCarFlow",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={}},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/ticketInformation/styles/TicketInformationStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.ticketInformation.styles.TicketInformationStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n.ticket-information .panel-heading {\nbackground: ",22),this.__$write(this.$grayLight,23),this.__$write(";\n}\n\n.ticket-information ul.ticket-info-table {\ndisplay: table;\npadding: 0;\nmargin: 0px;\n}\n\n.ticket-information ul.ticket-info-table li{\nmargin-bottom: 5px;\n}\n\n.ticket-information .panel-body {\nborder-top: 1px solid ",23),this.__$write(this.$grayLight,37),this.__$write(";\npadding: 10px;\n}\n\n.ticket-information .horizontal-title{\nmargin-top: 5px;\nmargin-bottom: 5px;\ntext-transform: capitalize;\nfont-family: ",37),this.__$write(this.$blackFont,45),this.__$write(';\nfont-size: 18px;\n}\n\n.ticket-information .horizontal-title .icon{\nmargin-right: 10px;\ndisplay : inline;\n}\n\n.ticket-information .recloc, .record-locator{\nfont-family: "Roboto Bold"\n}\n\n@media (min-width: ',45),this.__$write(this.breakpoints.SM_MIN,58),this.__$write(") {\n.ticket-information .panel-body{\npadding: 20px;\n}\n\n.ticket-information .ticket-information-right{\npadding : 0px 0px;\npadding-left: 20px;\nborder-left :  solid 1px ",58),this.__$write(this.$grayLight,66),this.__$write(";\n}\n}\n\n",66)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/ticketInformation/views/TicketInformationView.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/macroLibs/commonReservationDetails/views/CommonReservationDetailsView.tml"),require("plnextv2/utils/macroLibs/accessibility/Accessibility.tml"),require("plnextv2/utils/macroLibs/ticketInformation/views/TicketInformationViewScript.js"),require("plnextv2/utils/widgets/plnextLib/panel/core/Panel.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.ticketInformation.views.TicketInformationView",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$TicketInformationViewScript.constructor.call(this)},$destructor:function(){this.$TicketInformationViewScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_displayTicketInformation:function(reservationInfo,config,bsGrid){try{with(this)this.macro_displayTicketInformationPanel({reservationInfo:reservationInfo,config:config,bsGrid:bsGrid})}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTicketInformation",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayTicketInformationPanel:function(ticketInfo){try{with(this)this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","Panel",{title:_i18n.getLabel("tx_pltg_text_ticketInformation"),icon:"icon-ticket",classList:["panel-small-padding ticket-information ticket-information-panel"]},35)&&(this.macro_displayTicketDetails(ticketInfo.reservationInfo,ticketInfo.config,ticketInfo.bsGrid),this.__$endContainerWidget())}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTicketInformationPanel",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayTicketDetails:function(reservationInfo,config,bsGrid){try{with(this)this.__$write('\n<div class="row">\n<div class="ticket-information-left ',46),this.__$write(this.getBsGridClass(bsGrid,"ticketInformationLeft"),47),this.__$write('">\n<ul class="ticket-info-table">\n\n',47),this.commonReservationDetails.macro_printReservationName(reservationInfo.primeName),this.commonReservationDetails.macro_displayRecordLocator(reservationInfo,config),reservationInfo.creationDate&&this.commonReservationDetails.macro_printReservationIssueOrPurchaseDate(reservationInfo.creationDate),reservationInfo.selectedMOD&&this.commonReservationDetails.macro_methodOfDelivery(reservationInfo.selectedMOD),this.__$write('\n</ul>\n</div>\n<div class ="ticket-information-right ',60),this.__$write(this.getBsGridClass(bsGrid,"ticketInformationRight"),62),this.__$write('">\n',62),this.macro_displayMethodOfDeliveryDetails(reservationInfo.selectedMOD),this.__$write("\n</div>\n</div>\n",64)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTicketDetails",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayMethodOfDeliveryDetails:function(selectedMOD){try{with(this)selectedMOD&&(selectedMOD.displayPickUpAtCityOffice?this.commonReservationDetails.macro_displayCityOfficeDetails(selectedMOD.cityLocation):selectedMOD.displayPickUpAtOtherOffice?this.commonReservationDetails.macro_displayOtherOfficeDetails(selectedMOD):selectedMOD.displayDisplayDelivertoMailAddress&&this.commonReservationDetails.macro_displayMailDeliveryDetails(selectedMOD))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayMethodOfDeliveryDetails",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={accessibility:"plnextv2.utils.macroLibs.accessibility.Accessibility",commonReservationDetails:"plnextv2.utils.macroLibs.commonReservationDetails.views.CommonReservationDetailsView"},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.ticketInformation.views.TicketInformationViewScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/ticketInformation/views/TicketInformationViewScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.ticketInformation.views.TicketInformationViewScript",$dependencies:["plnextv2.utils.I18n"],$constructor:function(){this._json=aria.utils.Json,this._i18n=plnextv2.utils.I18n},$prototype:{getBsGridClass:function(e,t){return e&&t?plnextv2.utils.BootstrapUtils.getBsGridClass(e,t):""}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/travellerDetails/desktop/styles/DTravellerDetailsStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.travellerDetails.desktop.styles.DTravellerDetailsStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n.travellerdetails .travellers{\ndisplay:none;\n}\n\n.travellerdetails .traveller-icon{\ndisplay: none;\n}\n\n@media (min-width: ",22),this.__$write(this.breakpoints.XS_MIN,31),this.__$write(") {\n.travellerdetails .traveller-icon{\ndisplay: block;\nfont-size: 30px;\nmargin: 5px;\npadding: 10px;\nbackground-color: ",31),this.__$write(this.$grayLight,37),this.__$write(";\ncolor : ",37),this.__$write(this.$grayDark,38),this.__$write(";\n}\n\n.travellerdetails .travellers{\ntext-transform: lowercase;\ndisplay: inline;\n}\n\n.travellerdetails .traveller-icon-border{\ndisplay: inline-block;\nbackground-color: ",38),this.__$write(this.$white,48),this.__$write(";\nvertical-align: top;\ncolor: ",48),this.__$write(this.$grayDark,50),this.__$write(";\nborder: solid 1px ",50),this.__$write(this.$grayLight,51),this.__$write(';\nmargin-right : 10px;\n}\n}\n\n.travellerdetails .traveller-type{\nfont-family: "Roboto Black";\ntext-transform: uppercase;\n}\n\n.travellerdetails .traveller-details{\ndisplay: inline-block;\nvertical-align: middle;\n}\n\n.travellerdetails .traveller-list-group {\nmargin-top: 0px;\nmargin-bottom: 0px;\npadding: 0px;\n}\n\n.travellerdetails .traveller-list-item.bordered-item{\nborder-bottom : 1px solid ',51),this.__$write(this.$grayLight,73),this.__$write(';\n}\n.travellerdetails h3{\nmargin-top: 0px;\n}\n\n\n\n\n\n\n\n\n.travellerdetails .container-xs-height {\ndisplay:table;\nwidth:100%;\n}\n\n.travellerdetails .row-xs-height {\ndisplay:table-row;\n}\n\n.travellerdetails .col-xs-height {\ndisplay:table-cell;\nfloat: none;\nvertical-align: top;\n}\n\n.travellerdetails .horizontal-title{\nmargin-top: 5px;\nmargin-bottom: 5px;\ntext-transform: none;\nfont-family: "Roboto Black";\nfont-size: 130%;\ndisplay: inline-block;\n}\n\n.responsive-traveller-panel  .horizontal-title{\nfont-size:18px;\n}\n\n.travellerdetails .horizontal-title .icon{\nmargin-right: 10px;\n}\n\n.travellerdetails .panel-heading{\nbackground: ',73),this.__$write(this.$grayLight,119),this.__$write(";\n}\n\n.travellerdetails .panel-footer{\nborder-top: 1px solid ",119),this.__$write(this.$grayLight,123),this.__$write(";\n}\n\n@media (max-width: ",123),this.__$write(this.breakpoints.XS_MAX,126),this.__$write(") {\n.travellerdetails .panel-body{\npadding: 10px;\n}\n.travellerdetails .traveller-list-item{\npadding-bottom: 10px;\nmargin-bottom: 10px;\n}\n.travellerdetails .last-traveller{\npadding-bottom: 0px;\nmargin-bottom: 0px;\n}\n\n.travellerdetails .col-section-traveller{\nborder-left: 0;\nborder-top: solid 1px ",126),this.__$write(this.$grayLight,141),this.__$write(";\npadding-top: 10px;\nmargin-top : 10px;\n}\n}\n\n@media (min-width: ",141),this.__$write(this.breakpoints.SM_MIN,147),this.__$write(") {\n.travellerdetails .panel-body{\npadding: 20px;\n}\n\n.travellerdetails .traveller-list-item{\npadding-bottom: 20px;\nmargin-bottom: 20px;\n}\n\n.travellerdetails .last-traveller{\npadding-bottom: 0px;\nmargin-bottom: 0px;\n}\n}\n\n",147)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/travellerDetails/desktop/views/DTravellerDetailsView.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/PaxUtils.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/macroLibs/commonReservationDetails/views/CommonReservationDetailsView.tml"),require("plnextv2/utils/macroLibs/displayButtons/desktop/views/DReservationButtonsView.tml"),require("plnextv2/utils/macroLibs/travellerDetails/desktop/views/DTravellerDetailsViewScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.travellerDetails.desktop.views.DTravellerDetailsView",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$DTravellerDetailsViewScript.constructor.call(this)},$destructor:function(){this.$DTravellerDetailsViewScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_displayTravellers:function(accompanyingTraveller,travellerList,numberOfTravellers,contactInformation,bsGrid,config,moduleControl,reservationInfo,templateScope){try{with(this){this.__$write('\n\n<div class="travellerdetails travellers-panel panel ',31),config.isResponsiveReservationPanel&&this.__$write(" responsive-traveller-panel",32),this.__$write('">\n<header class="travellers-panel-heading panel-heading">\n<h2 class="horizontal-title">\n<i class="icon icon-adult" aria-hidden="true"></i>\n<span class="title">\n',32),numberOfTravellers>1?(this.__$write(numberOfTravellers,38),this.__$write(" ",38),this.__$write(this._i18n.getLabel("tx_pltg_text_TravellersLabel"),38)):(this.__$write(numberOfTravellers,40),this.__$write(" ",40),this.__$write(this._i18n.getLabel("tx_pltg_text_Traveller"),40)),this.__$write('\n</span>\n\n<span class="travellers">\n',42),this.__$write(this._i18n.getLabel("tx_pltg_text_travellerLeftParenthesis"),45);var __v_1=travellerList;void 0==travellerList&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,47]);for(var traveller_ct=0,__v_2=__v_1.length,traveller_index=0;__v_2>traveller_index;traveller_index++){{__v_1[traveller_index]}traveller_ct++,this.__$insertSection(49,{type:"span",attributes:{classList:["traveller"]},bindRefreshTo:[{to:traveller_index,inside:travellerList}],macro:{scope:this,name:"showTraveller",args:[travellerList,traveller_index]}})}this.__$write(this._i18n.getLabel("tx_pltg_text_travellerRightParenthesis"),64),this.__$write('\n</span>\n</h2>\n\n</header>\n<section class="traveller-panel-body panel-body container-xs-height">\n',65),this.macro_displayTravellerSection(accompanyingTraveller,travellerList,numberOfTravellers,contactInformation,bsGrid,config,reservationInfo,templateScope),this.__$write("\n</section>\n\n\n",72),this.macro_checkForDisplayModifyPassengerButton(config,moduleControl),this.__$write("\n\n</div>\n",76)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTravellers",__filename,this["aria:currentLineNumber"]],_ex)}},macro_checkForDisplayModifyPassengerButton:function(config,moduleControl){try{with(this){var requireParams={fn:"modifyPassengers",scope:moduleControl,isFooterRequired:!0};this.buttonDisplay.macro_displayModifyPassengerButton(config,requireParams)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["checkForDisplayModifyPassengerButton",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayTravellerSection:function(accompanyingTraveller,travellerList,numberOfTravellers,contactInformation,bsGrid,config,reservationInfo,templateScope){try{with(this){var isUNN=!1;this.__$write('\n<div class="traveller-section',101),config.isResponsiveReservationPanel&&this.__$write(" responsive-traveller-section",101),this.__$write('">\n',101),this.__$write(this.$modifier("eat",[resizeTravellerListSection(bsGrid,contactInformation)]),102),this.__$write('\n<div class="traveller-list ',103),this.__$write(getBsGridClass(bsGrid,"travellerSection"),103),this.__$write('">\n<div class="traveller-list-row">\n\n',103);var index=0,isLastTraveller=!1,__v_3=travellerList;void 0==travellerList&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,108]);for(var travellerType_ct=0,__v_4=__v_3.length,travellerType_index=0;__v_4>travellerType_index;travellerType_index++){var travellerType=__v_3[travellerType_index];travellerType_ct++;var __v_5=travellerType.listTravellerTypeRequested;void 0==travellerType.listTravellerTypeRequested&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,109]);for(var traveller_ct=0,__v_6=__v_5.length,traveller_index=0;__v_6>traveller_index;traveller_index++){{__v_5[traveller_index]}traveller_ct++,index+=1,isLastTraveller=isLastItem(traveller_index,travellerType_index,travellerList),this.__$insertSection(113,{type:"div",attributes:{classList:getTravellerItemClassList(travellerType.travellerCode,bsGrid,config,isLastTraveller)},bindRefreshTo:[{to:traveller_index,inside:travellerType.listTravellerTypeRequested}],macro:{scope:this,name:"showTravellerDetails",args:[travellerList,travellerType_index,traveller_index,config,reservationInfo,templateScope]}}),config.isResponsiveReservationPanel||index%2!=0||this.macro_displayInNewRow(),isUNN||(isUNN=_paxUtils.isTravellerTypeUNN(travellerType.travellerCode))}}if(this.__$write("\n</div>\n</div>\n\n",139),isObjectNotEmpty(contactInformation)){var contactInformationObject={contactInformation:contactInformation};this.__$insertSection(144,{type:"div",attributes:{classList:["col-section-traveller","",getBsGridClass(bsGrid,"contactSection")]},bindRefreshTo:[{to:"contactInformation",inside:contactInformationObject}],macro:{scope:this,name:"showContactInformation",args:[contactInformation,accompanyingTraveller,isUNN]}})}this.__$write("\n</div>\n",159)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayTravellerSection",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayInNewRow:function(){try{with(this)this.__$write('\n</div>\n<div class="traveller-list-row">\n',163)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayInNewRow",__filename,this["aria:currentLineNumber"]],_ex)}},macro_showTraveller:function(travellerList,travellerTypeIndex){try{with(this){var travellerType=travellerList[travellerTypeIndex];this.__$write(travellerType.travellersNumber,173),this.__$write(" ",173),this.__$write(this._stringResources.getTravellerNumberedLabelKey(travellerType,travellerType.travellersNumber),173),travellerTypeIndex<travellerList.length-1&&this.__$write(this._i18n.getLabel("tx_pltg_text_travellerSeparator"),175)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["showTraveller",__filename,this["aria:currentLineNumber"]],_ex)}},macro_showTravellerDetails:function(travellerList,travellerTypeIndex,travellerIndex,config,reservationInfo,templateScope){try{with(this){var travellerType=travellerList[travellerTypeIndex];this.__$write('\n<div class="traveller-icon-border" aria-hidden="true">\n',187),"CHD"===travellerType.travellerCode||this._paxUtils.isTravellerTypeUNN(travellerType.travellerCode)?this.__$write('\n<i class="traveller-icon icon-child icon-block"></i>\n',189):"INF"===travellerType.travellerCode?this.__$write('\n<i class="traveller-icon icon-infant icon-block"></i>\n',191):travellerType.listTravellerTypeRequested[travellerIndex].hasInfant?(this.__$write('\n<i class="traveller-icon icon-',193),this.__$write(travellerType.travellerCode,193),this.__$write(' icon-adult-infant icon-block"></i>\n',193)):(this.__$write('\n<i class="traveller-icon icon-',195),this.__$write(travellerType.travellerCode,195),this.__$write(' icon-adult icon-block"></i>\n',195)),this.__$write('\n</div>\n<div class="traveller-details small-text">\n\n<div class="traveller-details-text traveller-type">',197),this.__$write(this._stringResources.getTravellerLabelKey(travellerType,1),200),this.__$write("</div>\n",200);var traveller=travellerType.listTravellerTypeRequested[travellerIndex];if(this.__$write('\n<div class="traveller-details-text traveller-name">\n',202),this.__$write(traveller.firstName,203),this.__$write(" ",203),this.__$write(traveller.lastName,203),this.__$write("\n</div>\n",204),traveller.listFrequentFlyer&&traveller.listFrequentFlyer.length>0){var __v_7=traveller.listFrequentFlyer;void 0==traveller.listFrequentFlyer&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,206]);for(var frequentFlyer_ct=0,__v_8=__v_7.length,frequentFlyer_index=0;__v_8>frequentFlyer_index;frequentFlyer_index++){var frequentFlyer=__v_7[frequentFlyer_index];frequentFlyer_ct++,frequentFlyer.FREQ_Airline&&0!==frequentFlyer.FREQ_Airline&&frequentFlyer.FREQ_Number&&(this.__$write('\n<div class="traveller-details-text traveller-frequent-flyer">\n<span class="traveller-frequent-flyer-airline">',208),this.__$write(frequentFlyer.FREQ_Airline,209),this.__$write('</span>\n<span class="traveller-frequent-flyer-number bold">',209),this.__$write(frequentFlyer.FREQ_Number,210),this.__$write("</span>\n</div>\n",210))}}config.isResponsiveReservationPanel&&reservationInfo&&reservationInfo.paymentInformation&&(reservationInfo.paymentInformation.isSiteUseCcAsDocument||this.commonReservationDetails.macro_printTravellerDocument(reservationInfo.paymentInformation,traveller.travellerId),"INF"==travellerType.travellerCode?this.commonReservationDetails.macro_printEticketInformtaion(reservationInfo.listAirTicket,traveller,travellerIndex,!0,config.displayAssociatedSegments,templateScope):this.commonReservationDetails.macro_printEticketInformtaion(reservationInfo.listAirTicket,traveller,travellerIndex,!1,config.displayAssociatedSegments,templateScope),reservationInfo.listRailPickupNumber&&this.commonReservationDetails.macro_printRail(traveller,templateScope)),templateScope&&templateScope.data&&this.__$insertSection(233,{type:"div",bindRefreshTo:[{to:"listCarRecap",inside:templateScope.data}],macro:{name:"showTravellerCarDriver",scope:this,args:[traveller,templateScope]}}),this.__$write("\n</div>\n",246)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["showTravellerDetails",__filename,this["aria:currentLineNumber"]],_ex)}},macro_showTravellerCarDriver:function(traveller,templateScope){try{with(this)isDriverAssociated(traveller,templateScope)&&(this.__$write('\n<div class="traveller-car-driver">\n<i class="icon-car" aria-hidden="true"></i>\n<span> ',253),this.__$write(this._i18n.getLabel("tx_pltg_text_CarDriver"),255),this.__$write("</span>\n</div>\n",255))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["showTravellerCarDriver",__filename,this["aria:currentLineNumber"]],_ex)}},macro_showContactInformation:function(contactInfo,accompanyingTraveller,isUNN){try{with(this)this.__$write('\n<div class="traveller-contact">\n<h3>\n<div class="subtitle">\n',264),isUNN?this.__$write(this._i18n.getLabel("tx_pltg_text_ticketBuyer"),268):this.__$write(this._i18n.getLabel("tx_pltg_text_ContactInformation"),270),this.__$write("\n</div>\n</h3>\n\n",272),isUNN&&(this.__$write('\n<div class="booker-name">',276),this.__$write(getBookerName(contactInfo,accompanyingTraveller),276),this.__$write("</div>\n",276)),contactInfo.Email&&(this.__$write('\n<div class="traveller-contact-email">',279),this.__$write(contactInfo.Email,279),this.__$write("</div>\n",279)),contactInfo.Email2&&(this.__$write('\n<div class="traveller-contact-email2">',282),this.__$write(contactInfo.Email2,282),this.__$write("</div>\n",282)),contactInfo.Email3&&(this.__$write('\n<div class="traveller-contact-email3">',285),this.__$write(contactInfo.Email3,285),this.__$write("</div>\n",285)),contactInfo.EmailNotif&&"false"!=contactInfo.EmailNotif.toString()&&"true"!=contactInfo.EmailNotif.toString()&&(this.__$write('\n<div class="traveller-contact-email-notif">',288),this.__$write(contactInfo.EmailNotif,288),this.__$write("</div>\n",288)),contactInfo.PhoneHome&&(this.__$write('\n<div class="traveller-contact-phone-home">\n',291),0!=contactInfo.PhoneHomeCode&&(this.__$write('\n<span class="phone-code">',293),this.__$write(contactInfo.PhoneHomeCode,293),this.__$write("</span>\n",293)),this.__$write('\n<span class="phone-number">',295),this.__$write(contactInfo.PhoneHome,295),this.__$write("</span>\n</div>\n",295)),contactInfo.PhoneMobile&&(this.__$write('\n<div class="traveller-contact-phone-mobile">\n',299),0!=contactInfo.PhoneMobileCode&&(this.__$write('\n<span class="phone-code">',301),this.__$write(contactInfo.PhoneMobileCode,301),this.__$write("</span>\n",301)),this.__$write('\n<span class="phone-number">',303),this.__$write(contactInfo.PhoneMobile,303),this.__$write("</span>\n</div>\n",303)),contactInfo.PhoneBusiness&&(this.__$write('\n<div class="traveller-contact-phone-business">\n',307),0!=contactInfo.PhoneBusinessCode&&(this.__$write('\n<span class="phone-code">',309),this.__$write(contactInfo.PhoneBusinessCode,309),this.__$write("</span>\n",309)),this.__$write('\n<span class="phone-number">',311),this.__$write(contactInfo.PhoneBusiness,311),this.__$write("</span>\n</div>\n",311)),contactInfo.PhoneSmsNotif&&"false"!=contactInfo.PhoneSmsNotif.toString()&&"true"!=contactInfo.PhoneSmsNotif.toString()&&(!contactInfo.PhoneMobile||contactInfo.PhoneMobile&&!arePhoneNumbersEqual(contactInfo.PhoneSmsNotif,contactInfo.PhoneMobile,contactInfo.PhoneSmsNotifCode,contactInfo.PhoneMobileCode))&&(this.__$write('\n<div class="traveller-contact-phone-notif">\n',319),0!=contactInfo.PhoneSmsNotifCode&&(this.__$write('\n<span class="phone-code">',321),this.__$write(contactInfo.PhoneSmsNotifCode,321),this.__$write("</span>\n",321)),this.__$write('\n<span class="phone-number">',323),this.__$write(contactInfo.PhoneSmsNotif,323),this.__$write("</span>\n</div>\n",323)),contactInfo.PhoneOther&&(this.__$write('\n<div class="traveller-contact-phone-other">\n',328),0!=contactInfo.PhoneOtherCode&&(this.__$write('\n<span class="phone-code">',330),this.__$write(contactInfo.PhoneOtherCode,330),this.__$write("</span>\n",330)),this.__$write('\n<span class="phone-number">',332),this.__$write(contactInfo.PhoneOther,332),this.__$write("</span>\n</div>\n",332)),contactInfo.PhoneFax&&(this.__$write('\n<div class="traveller-contact-phone-fax">\n',336),0!=contactInfo.PhoneFaxCode&&(this.__$write('\n<span class="phone-code">',338),this.__$write(contactInfo.PhoneFaxCode,338),this.__$write("</span>\n",338)),this.__$write('\n<span class="phone-number">',340),this.__$write(contactInfo.PhoneFax,340),this.__$write("</span>\n</div>\n",340)),this.__$write("\n</div>\n",343)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["showContactInformation",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={buttonDisplay:"plnextv2.utils.macroLibs.displayButtons.desktop.views.DReservationButtonsView",commonReservationDetails:"plnextv2.utils.macroLibs.commonReservationDetails.views.CommonReservationDetailsView"},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.travellerDetails.desktop.views.DTravellerDetailsViewScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/travellerDetails/desktop/views/DTravellerDetailsViewScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.travellerDetails.desktop.views.DTravellerDetailsViewScript",$dependencies:["plnextv2.utils.StringResources","plnextv2.utils.I18n","plnextv2.utils.BootstrapUtils","aria.core.IO","plnextv2.utils.PaxUtils","plnextv2.utils.StringUtils","plnextv2.utils.storage.SessionStorageManager"],$constructor:function(){this._stringResources=plnextv2.utils.StringResources,this._i18n=plnextv2.utils.I18n,this._json=aria.utils.Json,this._paxUtils=plnextv2.utils.PaxUtils,this._stringUtils=plnextv2.utils.StringUtils,this.storageManager=plnextv2.utils.storage.SessionStorageManager},$prototype:{getBsGridClass:function(e,t){return plnextv2.utils.BootstrapUtils.getBsGridClass(e,t)},resizeTravellerListSection:function(e,t){t||delete e.travellerSection.cols.md},getBookerNameFromContactInfo:function(e){if(null==e)return"";var t=[];return e.TitleCode&&t.push(this._stringUtils.capitalize(e.TitleCode)),e.FirstName&&t.push(this._stringUtils.capitalize(e.FirstName)),e.MiddleName&&t.push(this._stringUtils.capitalize(e.MiddleName)),e.LastName&&t.push(this._stringUtils.capitalize(e.LastName)),t.join(" ")},getBookerName:function(e,t){var i=this.getBookerNameFromContactInfo(e);if((null==i||0===i.length)&&t){for(var n=[],r=["TitleCode","FirstName","MiddleName","LastName"],s=0;s<r.length;s++){var a=t[r[s]];a&&n.push(this._stringUtils.capitalize(a))}i=n.join(" ")}return i},arePhoneNumbersEqual:function(e,t,i,n){return e&&t&&e===t?i&&n&&i!==n?!1:!0:!1},getTravellerItemClassList:function(e,t,i,n){var r=["traveller-list-item","traveller-list-item-"+e,this.getBsGridClass(t,"travellerDetails")];return i.isResponsiveReservationPanel&&!n&&r.push("bordered-item"),n&&r.push("last-traveller"),r},isLastItem:function(e,t,i){return t+1===i.length&&i[t].listTravellerTypeRequested.length===e+1},isDriverAssociated:function(e,t){return!!e.isCarDriver&&!!t._carUtils&&t._carUtils.isListCarRecapPopulated(t.data)&&(this.storageManager.get("driverAssociated","car")||!t.moduleCtrl.isStandardFlow())},isObjectNotEmpty:function(e){return e&&aria.utils.Json.keys(e).length>0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/uiWidgets/UIWidgets.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/widgets/plnextLib/button/core/Button.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.uiWidgets.UIWidgets",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this)},$destructor:function(){this.$Template.$destructor.call(this)},$prototype:{macro_nextStepButton:function(options){try{with(this){options.classList=options.classList||[];var leftIcon=options.leftIcon||[],noLeftIcon=null==options.leftIcon;this.__$processWidgetMarkup("plnextv2.utils.widgets.PlnextLib","Button",{attributes:options.attributes||{},text:options.text,onClick:options.onClickCb,classList:{button:options.classList,leftIcon:leftIcon,rightIcon:["icon-caret-right"]},noLeftIcon:noLeftIcon,noIcons:!1,disableOnLoad:!0},14)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["nextStepButton",__filename,this["aria:currentLineNumber"]],_ex)}},macro_refreshButton:function(options){try{with(this)this.__$processWidgetMarkup("plnextv2.utils.widgets.PlnextLib","Button",{text:options.text,onClick:options.onClickCb,classList:{button:options.classList,leftIcon:["icon-repeat","icon-large"]},noIcons:!1},30)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["refreshButton",__filename,this["aria:currentLineNumber"]],_ex)}},macro_backButton:function(options){try{with(this)this.__$processWidgetMarkup("plnextv2.utils.widgets.PlnextLib","Button",{text:options.text,onClick:options.onClickCb,classList:{button:options.classList,leftIcon:["icon-caret-left","icon-large"]},noIcons:!1,noRightIcon:!0,type:"secondary"},43)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["backButton",__filename,this["aria:currentLineNumber"]],_ex)}},macro_ignoreButton:function(options){try{with(this)this.__$processWidgetMarkup("plnextv2.utils.widgets.PlnextLib","Button",{text:options.text,onClick:options.onClickCb,classList:{button:options.classList},noIcons:!0},58)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["ignoreButton",__filename,this["aria:currentLineNumber"]],_ex)}},macro_button:function(options){try{with(this)this.__$processWidgetMarkup("plnextv2.utils.widgets.PlnextLib","Button",{bind:options.bind,text:options.text,type:options.type,noLeftIcon:options.noLeftIcon,noRightIcon:options.noRightIcon,noIcons:options.noIcons,onClick:options.onClick,classList:options.classList,attributes:options.attributes},72)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["button",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={}},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/upgradesDetails/desktop/styles/DUpgradesDetailsStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.upgradesDetails.desktop.styles.DUpgradesDetailsStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n.farereview-traveller-icon-border,\n.farereview-traveller-details {\ndisplay: inline-block;\n}\n\n.upgradesdetails .upgrades-city {\ndisplay: inline-block;\n}\n\n.upgradesdetails .cabin {\ndisplay: inline-block;\nfont-weight: 700;\ntext-transform: uppercase;\n}\n\n.upgradesdetails .price-text {\ndisplay: inline-block;\n}\n\n.upgradesdetails .upgrades-upgrade-passenger {\nwidth: 30%;\ndisplay: inline-block;\n}\n\n.upgradesdetails .upgrades-upgrade-class {\nwidth: 40%;\nfloat: right;\npadding: 10px;\n}\n\n.upgradesdetails .upgrades-upgrade-class div {\ndisplay: inline-block;\n}\n\n.upgradesdetails .upgrades-upgrade-class .upgrades-upgrade-class-new-label {\nfloat:left;\nmargin-right: 10px;\npadding: .25rem .5rem;\nfont-size: 1.2rem;\nfont-weight: 800;\nbackground: ",21),this.__$write(this.$warning,61),this.__$write(";\ncolor: ",61),this.__$write(this.$white,62),this.__$write(";\n}\n\n.upgradesdetails .upgrades-upgrade-class .upgrades-upgrade-class-cabin-selected {\nfont-weight: ",62),this.__$write(this.$bold,66),this.__$write(";\n}\n\n.upgradesdetails .upgrades-upgrade-price {\nwidth: 30%;\ndisplay: inline-block;\ntext-align: right;\nfloat: right;\n}\n\n.upgradesdetails .upgrades-upgrade-price .upgrades-upgrade-price-new-upgrade {\ndisplay: inline-block;\nfont-size: 120%;\nfont-weight: ",66),this.__$write(this.$bold,79),this.__$write(";\n}\n.upgradesdetails .upgrades-upgrade-price .upgrades-upgrade-price-new-upgrade .upgrades-upgrade-new-price {\ndisplay: inline-block;\nvertical-align: middle;\n}\n\n.upgradesdetails .upgrades-upgrade-price .upgrades-upgrade-price-new-upgrade .upgrades-price-currency,\n.upgradesdetails .upgrades-upgrade-price .upgrades-upgrade-price-new-upgrade .upgrades-price-value {\nvertical-align: middle;\n}\n\n.upgrades-price-value,\n.upgrades-price-currency {\npadding-left: 5px;\n}\n\n.upgrades-upgrade-price .upgradesdetails-upgrade-delete-button {\nfloat: right;\ntext-align: right;\ntext-decoration: underline;\nfont-size: 130%;\nborder: none;\npadding: 1px;\nbox-shadow: none;\nbackground: none;\nmargin-left: 10px;\n}\n\n.upgrades-upgrade-price .upgradesdetails-upgrade-delete-button:hover {\ntext-decoration:none;\nbackground:none;\nborder:none;\nbox-shadow: none;\n}\n\n#upgrade-details-popup .upgrades-panel-noupgradeselected {\npadding: 15px;\n}\n\n.upgradesdetails .upgrades-noupgrade-margin {\ndisplay: inline-block;\nwidth: 30%;\n}\n.upgradesdetails .upgrades-noupgrade-message {\ndisplay: inline-block;\nwidth: 70%;\npadding: 10px;\nfloat: right;\nbackground: ",79),this.__$write(this.$grayLighten,128),this.__$write(";\n}\n\n.upgradesdetails .upgrades-noupgrade-button {\ndisplay: inline-block;\nfloat: right;\ntext-align: right;\n}\n\n.upgradesdetails .upgrades-upgrade-details-triangle{\nmargin-left: 30%;\nwidth: 0;\nheight: 0;\nborder-style: solid;\nborder-width: 0 10px 10px 10px;\nborder-color: transparent transparent ",128),this.__$write(this.$grayLight,143),this.__$write(" transparent;\nposition: relative;\nleft: 30px;\n}\n\n.upgradesdetails .upgrades-upgrade-details {\nwidth: 100%;\nbackground: ",143),this.__$write(this.$grayLight,150),this.__$write(";\npadding: 15px;\n}\n\n.upgradesdetails .upgrades-upgrade-class-detailspanel {\ndisplay: inline-block;\nwidth: 100%;\n}\n\n.upgradesdetails .upgrades-upgrade-details-title {\nmargin-bottom: 5px;\nfont-weight: ",150),this.__$write(this.$bold,161),this.__$write(";\n}\n\n.upgradesdetails .upgrades-upgrade-details-img {\ndisplay: inline-block;\nwidth: 66%;\nmin-height: 1px;\nfloat: left;\npadding-right: 10px;\nposition: relative;\n}\n\n.upgradesdetails .upgrades-upgrade-details-img img {\nwidth: 100%;\n}\n\n\n.upgrades-upgrade-details-img {\npadding-right: 10px;\n}\n\n.upgradesdetails .upgrades-upgrade-details-description {\ndisplay: inline-block;\nwidth: 75%;\nposition: absolute;\nbottom: 5px;\nright: 10px;\ntext-align: right;\nword-wrap: break-word;\nbackground: rgba(0,0,0,0.65);\npadding: 10px;\nfont-size: 90%;\nline-height: 1.5em;\ncolor: ",161),this.__$write(this.$white,194),this.__$write(";\n}\n\n.upgradesdetails .upgrades-upgrade-details-description-title {\nfont-weight: 700;\n}\n\n.upgradesdetails .upgrades-upgrade-details-emd {\ndisplay: inline-block;\nwidth: 33%;\nbackground: ",194),this.__$write(this.$white,204),this.__$write(";\npadding: 15px 20px 30px;\nfloat: right;\n-webkit-box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.25);\nbox-shadow: 1px 1px 2px rgba(0, 0, 0, 0.25);\n}\n\n.upgradesdetails .upgrades-upgrade-details-emd .upgrades-upgrade-details-emd-list {\npadding-left: 0px;\nfont-weight: ",204),this.__$write(this.$bold,213),this.__$write(';\n}\n\n.upgradesdetails .upgrades-upgrade-details:after{\nclear: both;\ncontent: " ";\ndisplay: block;\n}\n\n.upgradesdetails .upgrades-upgrade-seatinformation {\npadding-top: 10px;\nfont-style: italic;\n}\n\n.upgradesdetails footer {\ntext-align: right;\n}\n\n.upgradesdetails footer .footer-info{\nfloat: left;\ndisplay: inline-block;\n}\n\n.upgradesdetails footer .upgrades-footer-price {\ndisplay: inline-block;\ntext-transform: capitalize;\nfont-size: 110%;\n}\n\n.upgradesdetails .upgrades-footer-price .upgrades-footer-total-price {\nfont-weight: ',213),this.__$write(this.$bold,243),this.__$write(";\n}\n\n.upgradesdetails .upgrades-footer-price .upgrades-footer-balance-price{\ndisplay: inline-block;\nmargin-top: 3px;\npadding-top: 3px;\ntext-transform: capitalize;\nfont-size: 110%;\nborder-top: 1px solid ",243),this.__$write(this.$gray,252),this.__$write(";\nfont-weight: ",252),this.__$write(this.$bold,253),this.__$write(';\n}\n\n.upgradesdetails .upgrades-footer-price .price-text-label {\ntext-align: right;\nmargin-right: 2px;\nvertical-align: top;\n}\n\n.upgradesdetails .upgrades-footer-price .old-price span {\ntext-decoration: line-through;\nfont-size: 75%;\n}\n\n.upgradesdetails .upgrades-footer-price span.price-text-subamount.saved-amount {\nfont-size: 80%;\n}\n\n.upgradesdetails .upgrades-footer-price .price-text-amount {\ntext-align: right;\ndisplay: inline-block;\n}\n\n.upgradesdetails .upgrades-footer-price .price-text-amount .price-text-subamount {\ndisplay: block;\n}\n\n.upgradesdetails h3{\nmargin-top: 0px;\n}\n\n.upgradesdetails .container-xs-height {\ndisplay:table;\nwidth:100%;\n}\n\n.upgradesdetails .row-xs-height {\ndisplay:table-row;\n}\n\n.upgradesdetails .col-xs-height {\ndisplay:table-cell;\nfloat: none;\nvertical-align: top;\n}\n\n.upgradesdetails .horizontal-title{\nmargin-top: 5px;\nmargin-bottom: 5px;\ntext-transform: capitalize;\nfont-family: "Roboto Black";\nfont-size: 130%;\ndisplay: inline-block;\n}\n\n.upgradesdetails .horizontal-title .icon{\nmargin-right: 10px;\n}\n\n.upgradesdetails .panel-heading{\nbackground: ',253),this.__$write(this.$grayLight,313),this.__$write(";\n}\n\n.upgradesdetails .panel-body{\nborder-top: 1px solid ",313),this.__$write(this.$grayLight,317),this.__$write(";\npadding-top: 20px;\n}\n\n.upgradesdetails .panel-footer{\nborder-top: 1px solid ",317),this.__$write(this.$grayLight,322),this.__$write(";\nbackground-color: ",322),this.__$write(this.$grayLighten,323),this.__$write(";\n}\n\n.manage-upgrades-section {\nfloat: left;\nwidth: 100%;\n}\n\n.manage-upgrade-title-section {\nborder-right: 1px solid ",323),this.__$write(this.$grayLight,332),this.__$write(";\npadding: 1rem;\nfloat: left;\nwidth:40%;\n}\n\n.manage-upgrade-title {\nfont-size: 120%;\n}\n\n.manage-upgrade-panel {\nmargin: 0rem;\nfloat: left;\n}\n\n.manage-upgrade-description-button {\npadding: 1rem 2rem;\nfloat: left;\nwidth: 60%;\n}\n\n.manage-upgrade-btn-icon-upload {\npadding-right: 1em;\n}\n\n.manage-upgrade-btn-icon-caret {\npadding-left: 1em;\n}\n\n.page-actions-bar-upgrade button{\nmargin-top: 2.5rem;\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-photo {\nwidth: 50%;\ndisplay: inline-block;\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-photo-img {\nwidth: 100%;\nheight: 100%;\nbackground-position: center;\nbackground-repeat: no-repeat;\nbackground-size: cover;\nbackground-image: url(",332),this.__$write(this.$imageFolder,376),this.__$write("business.png);\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-text {\nwidth: 50%;\nfloat: right;\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-text .upgrade-teaser-block-title {\nfloat: right;\nmargin-bottom: 10px;\nline-height: 1;\nwidth: 87%;\n}\n\n#fare-review-upgrade-teaser i.icon-seat {\nfont-size: 220%;\ndisplay: inline-block;\npadding: 5px 7px 8px 4px;\ncolor:",376),this.__$write(this.$white,395),this.__$write(";\nbackground-color: ",395),this.__$write(this.$grayDarken,396),this.__$write(";\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-text .upgrade-teaser-title {\nfont-size: 120%;\nfont-weight: ",396),this.__$write(this.$strong,401),this.__$write(";\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-text .upgrade-teaser-subtitle {\nmargin-top: 10px;\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-text .upgrade-teaser-text-price {\nmargin-top: 5px;\ndisplay: inline-block;\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-text .upgrade-teaser-button {\nmargin-top: 10px;\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-text .upgrade-information-text {\nfont-size: 80%;\nmargin-top: 20px;\n}\n\n#fare-review-upgrade-teaser .upgrade-teaser-text-price .upgrades-price-value {\nfont-size: 120%;\nfont-weight: ",401),this.__$write(this.$bold,424),this.__$write(";\n}\n\n.upgrade-left-icon-button {\nmargin-right: 0.5em;\n}\n\n.upgrade-right-icon-button {\nmargin-left: 1em;\n}\n\np.upgrades-total-price-miles-saveUpTo {\nmargin: 0;\n}\n\n\n.upgrade-teaser-panel {\ndisplay: flex;\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-text {\nwidth: 60%;\nvertical-align: top;\nfloat: none;\ndisplay: inline-block;\npadding: 1.25em 0.625em 1.25em 0.625em;\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-text .title-panel {\ndisplay: flex;\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-text .upgrade-teaser-button button span {\ndisplay: inline-block;\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-text .upgrade-teaser-button button i {\ndisplay: inline-block;\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-text .upgrade-teaser-button {\nmargin-top: 1.25em;\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-text .upgrade-teaser-text-price {\nmargin-top: 1.25em;\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-text .upgrade-teaser-block-title {\npadding-left: 0.625em;\nmargin-bottom: 0em;\nwidth: 85%;\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-text .upgrade-teaser-subtitle {\nmargin-top: 1.25em;\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-text i.icon-seat {\nwidth: 1.4em;\nheight: 1.4em;\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-photo {\ndisplay: inline-block;\nfloat: none;\nwidth: 40%;\n}\n\n@media (max-width: ",424),this.__$write(this.breakpoints.XXS_MAX,493),this.__$write(") {\n.upgrade-teaser-panel {\ndisplay: inherit;\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-text {\nfloat:none;\nwidth: 100%;\npadding: 0.625em 0.625em 1.25em 0.625em;\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-photo:before {\nright: 0%;\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-photo {\nwidth: 100%;\nheight: 15em;\noverflow: hidden;\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-text .upgrade-teaser-button button {\ndisplay: inline-block;\npadding: 0.625em 1.25em;\nfont-weight: 900;\ntext-align: center;\nfont-size: 1em;\n}\n\n#fare-review-upgrade-teaser .block-upgrade-teaser-text .upgrade-teaser-button button i.icon-caret-right {\ntop: 0.938em;\nposition: absolute;\nright: 0.625em;\n}\n}\n\n@media (min-width: ",493),this.__$write(this.breakpoints.XS_MIN,529),this.__$write(") and (max-width: ",529),this.__$write(this.breakpoints.XS_MAX,529),this.__$write(") {\n#fare-review-upgrade-teaser .block-upgrade-teaser-text {\npadding: 0.625em 0.625em 1.25em 0.625em;\n}\n}\n\n\n\n@media (max-width: ",529),this.__$write(this.breakpoints.XXS_MAX,537),this.__$write(") {\n.upgradesdetails .upgrades-upgrade-class {\nwidth: 100%;\nfloat: none;\npadding-left: 0em;\n}\n\n.upgradesdetails .upgrades-upgrade-class .upgrades-upgrade-class-text {\npadding-right: 0.313em;\n}\n\n.upgradesdetails .upgrades-noupgrade-message {\nwidth: 100%;\n}\n\n.upgradesdetails .upgrades-upgrade-price {\nwidth: 40%;\n}\n\n.upgradesdetails .upgrades-upgrade-passenger {\nwidth: 60%;\n}\n}\n\n\n\n@media (max-width: ",537),this.__$write(this.breakpoints.XXS_MAX,563),this.__$write(") {\n.upgradesdetails .upgrades-upgrade-details-emd {\nwidth :100%;\n}\n\n.upgradesdetails .upgrades-upgrade-details-img {\nwidth: 100%:\n}\n}\n\n\n",563)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/upgradesDetails/desktop/views/DUpgradesDetailsView.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/UpgradeUtils.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/macroLibs/boundDetails/desktop/views/DBoundDetailsView.tml"),require("plnextv2/utils/macroLibs/uiWidgets/UIWidgets.tml"),require("plnextv2/utils/macroLibs/displayButtons/desktop/views/DReservationButtonsView.tml"),require("plnextv2/utils/macroLibs/upgradesDetails/desktop/views/DUpgradesDetailsViewScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.upgradesDetails.desktop.views.DUpgradesDetailsView",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$DUpgradesDetailsViewScript.constructor.call(this)},$destructor:function(){this.$DUpgradesDetailsViewScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_displayUpgradeSegmentSection:function(normalizedUpgrade,segment,previousUpgrades,moduleControl,config){try{with(this){var upgradesBySegment=normalizedUpgrade.upgradesBySegment,upgrade=upgradesBySegment[segment.id];previousUpgrades[segment.id]||upgrade.selectedCabinCode!=upgrade.currentCabinCode?(this.macro_displayUpgradeSectionDetails(normalizedUpgrade,segment,previousUpgrades,moduleControl,config),this.macro_displayUpgradeDetailsPanel(normalizedUpgrade,segment,previousUpgrades,config),previousUpgrades[segment.id]&&(this.__$write('\n<div class="upgrades-upgrade-seatinformation">\n<i aria-hidden="true" class="icon icon-warning-sign"></i>\n',38),this.__$write(this._i18n.getLabel("tx_pltg_text_rtpl_upgradewarning"),40),this.__$write("\n</div>\n",41))):this.macro_displayUpgradeSegmentSectionNoUpgrade(config,segment,upgradesBySegment,moduleControl)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayUpgradeSegmentSection",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayUpgradeSegmentSectionNoUpgrade:function(config,segment,upgradesBySegment,moduleControl){try{with(this){if(this.__$write('\n<div class="upgrades-noupgrade-message">\n<div class="upgrades-noupgrade-button">\n',50),!config.upgradeDetailsInTripSummaryMode&&this.isAvailableUpgrade(segment.id,upgradesBySegment))if(upgradesBySegment[segment.id].alreadyFlownStatus)this.__$write('\n\n<div class="bound-flown">\n<i class="icon icon-info-sign" aria-hidden="true"></i>\n<span>',54),this.__$write(this._i18n.getLabel("tx_pltg_text_flight_flown"),57),this.__$write("</span>\n</div>\n",57);else{var requiredParams={fn:"upgradeFlights",scope:moduleControl,isFooterRequired:!1};this.buttonDisplay.macro_renderUpgradeFlightsButton("footer hidden-print","btn btn-default btn-secondary",requiredParams,"icon icon-upload","")}this.__$write("\n</div>\n",66),this.__$write(this._i18n.getLabel("tx_pltg_text_rtpl_noupgrademessage"),67),this.__$write('<span class="cabin">',67),this.__$write(segment.listCabin[0].name,67),this.__$write("</span>",67),this.__$write(this._i18n.getLabel("tx_pltg_text_Class"),67),this.__$write("\n</div>\n",68)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayUpgradeSegmentSectionNoUpgrade",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayUpgradeSectionDetails:function(normalizedUpgrade,segment,previousUpgrades,moduleControl,config){try{with(this)this.__$write('\n<div class="clearfix">\n\n<div class="upgrades-upgrade-passenger">\n<div class="farereview-traveller-icon-border">\n<div class="farereview-traveller-icon icon-family" aria-hidden="true"></div>\n</div>\n<div class="farereview-traveller-details">\n',73),this.__$write(this._i18n.getLabel("tx_pltg_text_allPassengers"),80),this.__$write("\n</div>\n</div>\n\n\n",81),this.macro_displayUpgradeSectionDetailsPricePanel(normalizedUpgrade,segment,config,previousUpgrades),this.macro_displayUpgradeSectionDetailsWithCabinSelected(normalizedUpgrade,segment,moduleControl,config),this.__$write("\n</div>\n",89)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayUpgradeSectionDetails",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayUpgradeSectionDetailsPricePanel:function(normalizedUpgrade,segment,config,previousUpgrades){try{with(this){var upgrade=getUpgrade(normalizedUpgrade,segment);if(this.__$write('\n<div class="upgrades-upgrade-price">\n',95),hasUpgradeSelected(normalizedUpgrade,config,segment)){if(this.__$write('\n<div class="upgrades-upgrade-price-new-upgrade">\n',97),normalizedUpgrade.hasOneAlreadyUpgraded&&this.__$write('\n<div class="upgrades-upgrade-new-price">+</div>\n',99),config.upgradeMilesOnly){var maxAward=this._upgradeUtils.getFareInfo(upgrade.upgradesByCabin[upgrade.selectedCabinCode],this.MAX_AWARD);this.__$write(this._priceUtils.getPriceAmountInMiles(maxAward,"upgrades-price-value"),103)}else this.__$write(this._priceUtils.formatCurrency(upgrade.upgradesByCabin[upgrade.selectedCabinCode].price.amount,upgrade.upgradesByCabin[upgrade.selectedCabinCode].price.currency,"upgrades-price-currency","upgrades-price-value"),105);this.__$write("\n</div>\n",110),this.uiWidget.macro_button({type:"primary",noLeftIcon:!0,noRightIcon:!0,noIcons:!0,onClick:{fn:"deleteUpgrade",scope:this,args:{upgradeBean:upgrade}},classList:{button:["btn btn-secondary","icon-trash","upgradesdetails-upgrade-delete-button"]},attributes:{"aria-label":plnextv2.utils.I18n.getLabel("tx_pltg_text_upgd_label_delete_upgrades"),title:plnextv2.utils.I18n.getLabel("tx_pltg_text_upgd_label_delete_upgrades")}})}else{var price=this.computeTotalPrice(previousUpgrades[segment.id]),miles=this.computeTotalMiles(previousUpgrades[segment.id],normalizedUpgrade);if(price||config.upgradeMilesOnly){if(this.__$write('\n<div class="upgrades-upgrade-price-new-upgrade">\n',139),upgrade.segmentUpgradeStatus&&upgrade.segmentUpgradeStatus===plnextv2.utils.UpgradeUtils.UPGRADE_STATUS_G&&this.__$write('\n<div class="upgrades-upgrade-new-price">+</div>\n',142),config.upgradeMilesOnly&&0!=miles)this.__$write(this._priceUtils.getPriceAmountInMiles(miles,"upgrades-price-value"),145);else{var currency=previousUpgrades[segment.id][0].price.cash.currency;this.__$write(this._priceUtils.formatCurrency(price,currency,"upgrades-price-currency","upgrades-price-value"),148)}this.__$write("\n</div>\n",150)}}this.__$write("\n</div>\n",153)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayUpgradeSectionDetailsPricePanel",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayUpgradeSectionDetailsWithCabinSelected:function(normalizedUpgrade,segment,moduleControl,config){try{with(this){var upgrade=getUpgrade(normalizedUpgrade,segment);this.__$write('\n<div class="upgrades-upgrade-class">\n',159),hasUpgradeSelected(normalizedUpgrade,config,segment)||upgrade.segmentUpgradeStatus&&upgrade.segmentUpgradeStatus===plnextv2.utils.UpgradeUtils.UPGRADE_STATUS_G?((normalizedUpgrade.hasOneAlreadyUpgraded||upgrade.segmentUpgradeStatus&&upgrade.segmentUpgradeStatus===plnextv2.utils.UpgradeUtils.UPGRADE_STATUS_G)&&this.__$write('\n<div class="upgrades-upgrade-class-new-label">NEW</div>\n',164),this.__$write('\n<div class="upgrades-upgrade-class-text upgrades-upgrade-class-cabin-selected">\n',166),this.__$write(this._i18n.getLabel("tx_pltg_text_rtpl_upgradedto"),167),this.__$write('\n<div class="upgrades-upgrade-class-cabintext">',168),this.__$write(getCabinName(segment,normalizedUpgrade,config),168),this.__$write("</div>\n</div>\n",168)):(this.__$write('\n<div class="upgrades-upgrade-class-text">\n',171),this.__$write(this._i18n.getLabel("tx_pltg_text_rtpl_upgradedto"),172),this.__$write('\n<div class="upgrades-upgrade-class-cabintext">',173),this.__$write(getCabinName(segment,normalizedUpgrade,config),173),this.__$write("</div>\n</div>\n",173)),this.macro_displayUpgradeSectionDetailsToggleShowMore(segment,moduleControl),this.__$write("\n</div>\n",178)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayUpgradeSectionDetailsWithCabinSelected",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayUpgradeSectionDetailsToggleShowMore:function(segment,moduleControl){try{with(this)segment.showMore?(this.__$write('\n<a href="javascript:;" id="link-showmore-',184),this.__$write(segment.id,184),this.__$write('"\n',184),this.__$statementOnEvent("click",this.$normCallback({fn:"toggleDetails",scope:this,args:{segment:segment,moduleControl:moduleControl}}),185),this.__$write('\naria-expanded="true">\n<i id="icon-showmore-',186),this.__$write(segment.id,187),this.__$write('" class="icon icon-caret-down" aria-hidden="true" ></i>\n<span>',187),this.__$write(this._i18n.getLabel("tx_pltg_text_hideDetails"),188),this.__$write("</span>\n</a>\n",188)):(this.__$write('\n<a href="javascript:;" id="link-showmore-',191),this.__$write(segment.id,191),this.__$write('"\n',191),this.__$statementOnEvent("click",this.$normCallback({fn:"toggleDetails",scope:this,args:{segment:segment,moduleControl:moduleControl}}),192),this.__$write('\naria-expanded="false">\n<i id="icon-showmore-',193),this.__$write(segment.id,194),this.__$write('" class="icon icon-caret-right" aria-hidden="true" ></i>\n<span>',194),this.__$write(this._i18n.getLabel("tx_pltg_text_showDetails"),195),this.__$write("</span>\n</a>\n",195))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayUpgradeSectionDetailsToggleShowMore",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayUpgradeDetailsPanel:function(normalizedUpgrade,segment,previousUpgrades,config){try{with(this){var cabinCode=getCabinCode(normalizedUpgrade,segment,config);this.__$write('\n<div class="upgrades-upgrade-class-detailspanel ',203),segment.showMore||this.__$write(this.CLASS_HIDDEN,203),this.__$write('">\n<div class="upgrades-upgrade-details-triangle"></div>\n<div class="upgrades-upgrade-details">\n<div class="upgrades-upgrade-details-title">\n',203);var cabinName=getCabinName(segment,normalizedUpgrade,config);this.__$write(_i18n.getStringFromPattern("tx_pltg_text_upgd_details_title",[cabinName]),208),this.__$write('\n</div>\n<div class="upgrades-upgrade-details-img">\n',209),normalizedUpgrade.cabinsImage&&normalizedUpgrade.cabinsImage[cabinCode]&&(this.__$write('\n<img aria-hidden="true" src= ',212),this.__$write(normalizedUpgrade.cabinsImage[cabinCode],212),this.__$write(" />\n",212)),normalizedUpgrade.cabinsDescription&&normalizedUpgrade.cabinsDescription[cabinCode]&&(this.__$write('\n<div class="upgrades-upgrade-details-description" >\n',215),this.__$write(normalizedUpgrade.cabinsDescription[cabinCode],216),this.__$write("\n</div>\n",217)),this.__$write("\n</div>\n\n",219),previousUpgrades[segment.id]&&this.macro_displayUpgradeDetailsPanelPreviousUpgrades(previousUpgrades,segment),this.__$write("\n</div>\n</div>\n",224)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayUpgradeDetailsPanel",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayUpgradeDetailsPanelPreviousUpgrades:function(previousUpgrades,segment){try{with(this){var emd=previousUpgrades[segment.id];if(emd.length>0&&emd[0]&&emd[0].price&&emd[0].price.cash&&emd[0].price.cash.listTicketNumber&&emd[0].price.cash.listTicketNumber.length>0){this.__$write('\n<div class="upgrades-upgrade-details-emd">',233),this.__$write(this._i18n.getLabel("tx_pltg_text_documentNumber"),233),this.__$write('<br />\n<ul class="upgrades-upgrade-details-emd-list">\n',233);var __v_1=emd;void 0==emd&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,235]);var pax_ct=0;for(var pax_index in __v_1)if(__v_1.hasOwnProperty(pax_index)&&!this.$json.isMetadata(pax_index)){var pax=__v_1[pax_index];pax_ct++,pax.price&&pax.price.cash&&pax.price.cash.listTicketNumber&&pax.price.cash.listTicketNumber.length>0&&(this.__$write("\n<li>",238),this.__$write(pax.price.cash.listTicketNumber[0],238),this.__$write("</li>\n",238))}this.__$write("\n</ul>\n</div>\n",241)}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayUpgradeDetailsPanelPreviousUpgrades",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayUpgradeSegment:function(segment,upgrades,normalizedUpgrade,itineraryElem,moduleControl,config){try{with(this){{normalizedUpgrade.upgradesBySegment}this.__$write('\n<section class="upgrades-panel-body panel-body container-xs-height">\n<h3 class="title upgrades-segmentname">\n<i aria-hidden="true" class="icon icon-plane"></i>\n<div class="upgrades-city">',249),this.__$write(segment.beginLocation.cityName,252),this.__$write('</div> - <div class="upgrades-city">\n',252),this.__$write(segment.endLocation.cityName,253),this.__$write(',\n<time class="date">\n',253),this.__$write(this._dateUtils.formatDateTime(new Date(segment.beginDate),plnextv2.utils.DateUtils.FORMATS.FULL_DATE_FORMAT),255),this.__$write("\n</time>\n</div>\n</h3>\n",257),segment.showMore=!1,this.__$insertSection(262,{type:"div",bindRefreshTo:[{to:"showMore",inside:segment},{to:"upgradesBySegment",inside:normalizedUpgrade}],macro:{scope:this,name:"displayUpgradeSegmentSection",args:[normalizedUpgrade,segment,upgrades,moduleControl,config]}}),this.__$write("\n</section>\n",279)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayUpgradeSegment",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayUpgrades:function(upgradeBreakdown,normalizedUpgrade,itineraryElem,bsGrid,config,moduleControl,constants,price){try{with(this)this.__$write('\n<div class="upgradesdetails panel">\n<header class="panel-heading">\n<h2 class="horizontal-title">\n<i aria-hidden="true" class="icon icon-upload"></i>\n<span class="title">\n',285),this.__$write(this._i18n.getLabel("tx_pltg_text_rtpl_flightUpgrades"),290),this.__$write("\n</span>\n</h2>\n</header>\n\n",291),this.__$insertSection(295,{type:"div",bindRefreshTo:[{to:"upgradesBySegment",inside:normalizedUpgrade}],macro:{scope:this,name:"displayUpgradesPanel",args:[upgradeBreakdown,normalizedUpgrade,itineraryElem,bsGrid,config,moduleControl,constants,price]}}),this.__$write("\n</div>\n",305)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayUpgrades",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayUpgradesPanel:function(upgradeBreakdown,normalizedUpgrade,itineraryElem,bsGrid,config,moduleControl,constants,price){try{with(this){var hasOneNewUpgrade=this.hasNewUpgradeSelected(normalizedUpgrade);if(normalizedUpgrade.hasOneAlreadyUpgraded||hasOneNewUpgrade){var __v_2=itineraryElem;void 0==itineraryElem&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,315]);var itinerary_ct=0;for(var itinerary_index in __v_2)if(__v_2.hasOwnProperty(itinerary_index)&&!this.$json.isMetadata(itinerary_index)){var itinerary=__v_2[itinerary_index];itinerary_ct++;var __v_3=itinerary.listSegment;void 0==itinerary.listSegment&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,316]);for(var segment_ct=0,__v_4=__v_3.length,segment_index=0;__v_4>segment_index;segment_index++){var segment=__v_3[segment_index];segment_ct++,segment.upgradeStatus&&segment.upgradeStatus===plnextv2.utils.UpgradeUtils.UPGRADE_STATUS_I||this.macro_displayUpgradeSegment(segment,upgradeBreakdown.selectionItems,normalizedUpgrade,itineraryElem,moduleControl,config)}}this.__$insertSection(325,{type:"div",bindRefreshTo:[{to:"upgradesBySegment",inside:normalizedUpgrade}],macro:{scope:this,name:"displayUpgradesFooter",args:[upgradeBreakdown,normalizedUpgrade,itineraryElem,config,price]}})}else this.__$write('\n<div class="upgrades-panel-noupgradeselected">',336),this.__$write(this._i18n.getLabel("tx_pltg_text_slider_noupgradeselected"),336),this.__$write("</div>\n",336)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayUpgradesPanel",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayUpgradesFooter:function(upgradeBreakdown,normalizedUpgrade,itineraryElem,config,price){try{with(this){if(this.__$write('\n<footer class="panel-footer">\n<div class="footer-info">',342),this.__$write(this._i18n.getLabel("tx_pltg_text_rtpl_upgradenotmodifiable"),343),this.__$write('</div>\n<div class="upgrades-footer-price">\n',343),config.upgradeDetailsInTripSummaryMode){var balanceTotal=this.computeUpgradeAmount(normalizedUpgrade);if(config.useUpgradePendingPriceTripSummary&&(balanceTotal+=upgradeBreakdown.pendingPrice.cash.totalAmount),normalizedUpgrade.hasOneAlreadyUpgraded)normalizedUpgrade.upgradeMilesAmount>0?this.macro_displayUpgradesFooterPriceInMilesAndCash(upgradeBreakdown,normalizedUpgrade):this.macro_displayUpgradesFooterPrice(upgradeBreakdown,balanceTotal,config);else{if(this.__$write('\n<div class="upgrades-footer-total-price">\n<div class="price-text">',358),this.__$write(this._i18n.getLabel("tx_pltg_text_TotalPrice"),359),this.__$write("</div>\n",359),config.upgradeMilesOnly){var totalMaxAward=this._upgradeUtils.getTotalFareInfo(normalizedUpgrade,this.MAX_AWARD);this.__$write(this._priceUtils.getPriceAmountInMiles(totalMaxAward,"upgrades-price-value"),362)}else this.__$write(this._priceUtils.formatCurrency(balanceTotal,normalizedUpgrade.currency,"upgrades-price-currency","upgrades-price-value"),364);this.__$write("\n</div>\n",367)}var saveUpTo=this._upgradeUtils.getTotalFareInfo(normalizedUpgrade,this.SAVE_UP_TO);if(balanceTotal&&saveUpTo&&!config.upgradeMilesOnly){var totalMaxAward=this._upgradeUtils.getTotalFareInfo(normalizedUpgrade,this.MAX_AWARD);this.__$write('\n<div class="upgrades-save-up-to-footer tripsummary-small-text row">\n<p class="upgrades-total-price-miles-saveUpTo">\n',372),this.__$write(this._priceUtils.formatSaveUpToMilesFromUpgradeFooter(saveUpTo,totalMaxAward,normalizedUpgrade.currency),374),this.__$write('\n</p>\n<p class="upgrades-total-price-miles-information">\n',375),this.__$write(this._i18n.getLabel("tx_pltg_text_AASBreakdownInformationMiles"),377),this.__$write("\n</p>\n</div>\n",378)}}else if(upgradeBreakdown.totalPrice.cash.currency&&upgradeBreakdown.totalPrice.cash.totalAmount){var totalPriceBean=upgradeBreakdown.totalPrice,payWithMiles=totalPriceBean&&totalPriceBean.milesAndCash&&totalPriceBean.milesAndCash.otherCurrencyAmount.totalAmount>0;config.upgradeMilesOnly||(this.__$write("\n\n<div ",386),this.__$write(payWithMiles?'class="old-price" aria-hidden="true"':"",387),this.__$write(">\n",387),payWithMiles||(this.__$write('\n<span class="price-text-label">',389),this.__$write(this._i18n.getLabel("tx_pltg_text_TotalPrice"),389),this.__$write("</span>\n",389)),this.__$write('\n<span class="price-text-amount">\n',391),this.__$write(this._priceUtils.formatCurrency(upgradeBreakdown.totalPrice.cash.totalAmount,upgradeBreakdown.totalPrice.cash.currency,"upgrades-price-currency","upgrades-price-value"),392),this.__$write("\n</span>\n</div>\n",394)),payWithMiles&&(this.__$write('\n<div class="upgrades-footer-new-total">\n<span class="price-text-label">',399),this.__$write(this._i18n.getLabel("tx_pltg_text_TotalPrice"),400),this.__$write('</span>\n<span class="price-text-amount">\n<span class="price-text-subamount">\n',400),this.__$write(this._priceUtils.formatCurrency(totalPriceBean.cash.totalAmount-totalPriceBean.milesAndCash.savingsAmount.totalAmount,totalPriceBean.cash.currency,"upgrades-price-currency","upgrades-price-value"),403),this.__$write('\n</span>\n<span class="price-text-subamount">\n',405),this.__$write(this._priceUtils.formatTotalMiles(totalPriceBean.milesAndCash.otherCurrencyAmount.totalAmount),407),this.__$write("\n</span>\n",408),config.upgradeMilesOnly||(this.__$write('\n<span class="price-text-subamount saved-amount">\n',410),this.__$write(_i18n.getStringFromPattern("tx_pltg_text_service_savedPrice",[this._priceUtils.formatCurrency(totalPriceBean.milesAndCash.savingsAmount.totalAmount,totalPriceBean.milesAndCash.savingsAmount.currency)]),411),this.__$write("\n</span>\n",415)),this.__$write("\n</span>\n\n</div>\n",417))}else config.upgradeMilesOnly&&(this.__$write('\n<div class="upgrades-footer-total-price">\n<div class="price-text">',422),this.__$write(this._i18n.getLabel("tx_pltg_text_TotalPrice"),423),this.__$write("</div>\n",423),balanceTotal=getBalanceTotalMiles(upgradeBreakdown),this.__$write(this._priceUtils.getPriceAmountInMiles(balanceTotal,"upgrades-price-value"),425),this.__$write("\n</div>\n",426));this.__$write("\n</div>\n</footer>\n",428)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayUpgradesFooter",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayUpgradesFooterPrice:function(upgradeBreakdown,balanceTotal,config){try{with(this){var currency=upgradeBreakdown.totalPrice.cash.currency,initialTotal=upgradeBreakdown.totalPrice.cash.totalAmount,globalTotal=getNewTotalPrice(upgradeBreakdown,balanceTotal);this.__$write('\n\n<div class="upgrades-footer-previous-total">\n<span class="price-text-label">',437),this.__$write(this._i18n.getLabel("tx_pltg_text_upgdPreviousTotal"),439),this.__$write('</span>\n<span class="price-text-amount">\n',439),config.upgradeMilesOnly?(initialTotal=getInitialTotalMiles(upgradeBreakdown),this.__$write(this._priceUtils.getPriceAmountInMiles(upgradeBreakdown.totalPrice.cash.totalAmount,"upgrades-price-value"),443)):this.__$write(this._priceUtils.formatCurrency(initialTotal,currency,"upgrades-price-currency","upgrades-price-value"),445),this.__$write('\n</span>\n</div>\n<div class="upgrades-footer-new-total">\n<span class="price-text-label">',448),this.__$write(this._i18n.getLabel("tx_pltg_text_upgdNewTotal"),451),this.__$write('</span>\n<span class="price-text-amount">\n',451),config.upgradeMilesOnly?(balanceTotal=getBalanceTotalMiles(upgradeBreakdown),globalTotal=balanceTotal+initialTotal,this.__$write(this._priceUtils.getPriceAmountInMiles(globalTotal,"upgrades-price-value"),456)):this.__$write(this._priceUtils.formatCurrency(globalTotal,currency,"upgrades-price-currency","upgrades-price-value"),458),this.__$write('\n</span>\n</div>\n<div class="upgrades-footer-balance-price">\n<span class="price-text-label">',461),this.__$write(this._i18n.getLabel("tx_pltg_text_upgdBalanceTotal"),464),this.__$write('</span>\n<span class="price-text-amount">\n',464),config.upgradeMilesOnly?this.__$write(this._priceUtils.getPriceAmountInMiles(balanceTotal,"upgrades-price-value"),467):this.__$write(this._priceUtils.formatCurrency(balanceTotal,currency,"upgrades-price-currency","upgrades-price-value"),469),this.__$write("\n</span>\n</div>\n",472)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayUpgradesFooterPrice",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayUpgradesFooterPriceInMilesAndCash:function(upgradeBreakdown,normalizedUpgrade){try{with(this){var balanceTotalMiles=normalizedUpgrade.upgradeMilesAmount,balanceTotalCash=normalizedUpgrade.upgradeCashAmount,currency=upgradeBreakdown.totalPrice.cash.currency,initialTotal=upgradeBreakdown.totalPrice.cash.totalAmount,globalTotalCash=getNewTotalPriceCash(upgradeBreakdown,balanceTotalCash);this.__$write('\n\n<div class="upgrades-footer-previous-total">\n<span class="price-text-label">',483),this.__$write(this._i18n.getLabel("tx_pltg_text_upgdPreviousTotal"),485),this.__$write('</span>\n<span class="price-text-amount">\n',485),this.__$write(this._priceUtils.formatCurrency(initialTotal,currency,"upgrades-price-currency","upgrades-price-value"),487),this.__$write('\n</span>\n</div>\n<div class="upgrades-footer-new-total">\n<span class="price-text-label">',489),this.__$write(this._i18n.getLabel("tx_pltg_text_upgdNewTotal"),492),this.__$write('</span>\n<span class="price-text-amount">\n<span class="price-text-subamount">\n',492),this.__$write(this._priceUtils.formatCurrency(globalTotalCash,currency,"upgrades-price-currency","upgrades-price-value"),495),this.__$write('\n</span>\n<span class="price-text-subamount">\n',497),this.__$write(this._priceUtils.formatTotalMiles(balanceTotalMiles),499),this.__$write('\n</span>\n</span>\n</span>\n</div>\n<div class="upgrades-footer-balance-price">\n<span class="price-text-label">',500),this.__$write(this._i18n.getLabel("tx_pltg_text_upgdBalanceTotal"),505),this.__$write('</span>\n<span class="price-text-amount">\n<span class="price-text-subamount">\n',505),this.__$write(this._priceUtils.formatCurrency(balanceTotalCash,currency,"upgrades-price-currency","upgrades-price-value"),508),this.__$write('\n</span>\n<span class="price-text-subamount">\n',510),this.__$write(this._priceUtils.formatTotalMiles(balanceTotalMiles),512),this.__$write("\n</span>\n</span>\n</div>\n",513)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayUpgradesFooterPriceInMilesAndCash",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayUpgradeTeaser:function(normalizedUpgrade,moduleControl,config){try{with(this){if(this.__$write('\n<div class="panel upgrade-teaser-panel">\n<div class="block-upgrade-teaser-photo">\n<div class="block-upgrade-teaser-photo-img"></div>\n</div>\n\n<div class="block-upgrade-teaser-text panel-body">\n<div class="title-panel">\n<i aria-hidden="true" class="icon icon icon-seat"></i>\n<div class="upgrade-teaser-block-title">\n',520),config&&config.upgradeMilesOnly?(this.__$write('\n<div class="upgrade-teaser-title">',530),this.__$write(this._i18n.getLabel("tx_pltg_text_upgdTeaserMilesOnly_title"),530),this.__$write("</div>\n",530)):(this.__$write('\n<div class="upgrade-teaser-title">',532),this.__$write(this._i18n.getLabel("tx_pltg_text_upgdTeaser_title"),532),this.__$write("</div>\n",532)),this.__$write('\n<div class="upgrade-teaser-subtitle">',534),this.__$write(this._i18n.getLabel("tx_pltg_text_upgdTeaser_subtitle"),534),this.__$write("</div>\n</div>\n</div>\n\n",534),normalizedUpgrade.upgradeFromPrice&&normalizedUpgrade.currency){var formattedFromPrice=this._priceUtils.formatCurrency(normalizedUpgrade.upgradeFromPrice,normalizedUpgrade.currency,"upgrades-price-currency","upgrades-price-value");if(normalizedUpgrade.upgradeFromMiles){var formattedFromMiles=this._priceUtils.formatMilesWithHTML(normalizedUpgrade.upgradeFromMiles,"upgrades-price-currency","upgrades-price-value");this.__$write('\n<div class="upgrade-teaser-text-price">\n',544),config.upgradeMilesOnly?this.__$write(_i18n.getStringFromPattern("tx_pltg_text_upgdTeaser_upgradeFrom",[formattedFromMiles]),546):this.__$write(_i18n.getStringFromPattern("tx_pltg_text_upgdTeaser_upgradeFromMiles",[formattedFromPrice,formattedFromMiles]),548),this.__$write("\n</div>\n",550)}else this.__$write('\n<div class="upgrade-teaser-text-price">\n',552),this.__$write(_i18n.getStringFromPattern("tx_pltg_text_upgdTeaser_upgradeFrom",[formattedFromPrice]),553),this.__$write("\n</div>\n",554)}this.__$write('\n\n<div class="upgrade-teaser-button">\n',559);var requiredParams={fn:"upgradeFlights",scope:moduleControl,isFooterRequired:!1};this.buttonDisplay.macro_renderUpgradeFlightsButton("footer hidden-print","plnext-widget-btn btn btn-default btn-primary",requiredParams,"icon icon-upload","",this._i18n.getLabel("tx_pltg_text_upgdTeaser_checkOffers"),"icon icon-caret-right"),this.__$write("\n</div>\n",565),config&&config.upgradeTeaserDisplayATCInformation&&(this.__$write('\n<div class="upgrade-information-text">',567),this.__$write(this._i18n.getLabel("tx_pltg_text_upgdTeaser_information"),567),this.__$write("</div>\n",567)),this.__$write("\n</div>\n</div>\n",569)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayUpgradeTeaser",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayManageUpgradesTeaser:function(moduleControl){try{with(this){var displayManageUpgrades=moduleControl.isUpgradeFlow();displayManageUpgrades&&(this.__$write('\n<section id="manage-upgrades" class="manage-upgrades-section panel area">\n<div class="row manage-upgrade-panel">\n<div class="',577),this.__$write(getBsGridClass("manageUpgradeTeaserTitle"),579),this.__$write(' manage-upgrade-title-section">\n<div class="icon-upload-panel">\n<span aria-hidden="true" class="icon-upload main-icon"></span>\n</div>\n<p>\n<span class="bold manage-upgrade-title">\n',579),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_ManageUpgradesTitle"),585),this.__$write("\n</span> <br />\n",586),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_ManageUpgradesSubTitle"),587),this.__$write('\n</p>\n</div>\n\n<div class="',588),this.__$write(getBsGridClass("manageUpgradeTeaserDescription"),591),this.__$write(' manage-upgrade-description-button">\n<p>',591),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_ManageUpgradesDescription"),592),this.__$write('</p>\n\n<div class="page-actions-bar-upgrade">\n<div>\n',592),this.uiWidget.macro_button({bind:null,text:plnextv2.utils.I18n.getLabel("tx_pltg_text_ManageUpgrades"),type:"primary",noLeftIcon:!1,noRightIcon:!1,noIcons:!1,onClick:{fn:"openCashUpgrade",scope:moduleControl},classList:{button:["action-button"],rightIcon:["icon","icon-caret-right","manage-upgrade-btn-icon-caret"]},attributes:{type:"button"}}),this.__$write("\n</div>\n</div>\n</div>\n</div>\n</section>\n",615))}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayManageUpgradesTeaser",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={buttonDisplay:"plnextv2.utils.macroLibs.displayButtons.desktop.views.DReservationButtonsView",uiWidget:"plnextv2.utils.macroLibs.uiWidgets.UIWidgets",boundDetailsMacro:"plnextv2.utils.macroLibs.boundDetails.desktop.views.DBoundDetailsView"},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.upgradesDetails.desktop.views.DUpgradesDetailsViewScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/upgradesDetails/desktop/views/DUpgradesDetailsViewScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.upgradesDetails.desktop.views.DUpgradesDetailsViewScript",$dependencies:["plnextv2.utils.BootstrapUtils","plnextv2.utils.DateUtils","plnextv2.utils.PriceUtils","plnextv2.utils.UpgradeUtils"],$constructor:function(){this._i18n=plnextv2.utils.I18n,this._priceUtils=plnextv2.utils.PriceUtils,this._upgradeUtils=plnextv2.utils.UpgradeUtils,this._dateUtils=plnextv2.utils.DateUtils},$statics:{SAVE_UP_TO:"SAVE_UP_TO",MAX_AWARD:"MAX_AWARD",CLASS_HIDDEN:"hidden"},$prototype:{getBsGridClass:function(e,t){return plnextv2.utils.BootstrapUtils.getBsGridClass(e,t)},computeTotalPrice:function(e){if(e){for(var t=0,i=0;i<e.length;i++)e[i].price.cash.totalAmount&&(t+=e[i].price.cash.totalAmount);return t}},computeTotalMiles:function(e,t){var i=0;if(e)for(var n=0;n<e.length;n++){var r=aria.utils.Path.describe(e[n],"price.miles.otherCurrencyAmount.totalAmount");r&&(i+=r.value)}return 0===i&&t&&t.upgradeFromMiles&&(i=t.upgradeFromMiles),i},getDisplayUpgradeSection:function(e){for(var t in e)if(e[t][0].item)return!0;return!1},isAvailableUpgrade:function(e,t){return t[e]&&plnextv2.utils.UpgradeUtils.isUpgradeEligible(t[e])},toggleDetails:function(e,t){this.$json.setValue(t.segment,"showMore",!t.segment.showMore),t.moduleControl&&"function"==typeof t.moduleControl.notifyRefresh()&&t.moduleControl.notifyRefresh()},computeUpgradeAmount:function(e){var t=plnextv2.utils.PriceUtils.computeUpgradeAmount(e);return this.$json.setValue(e,"upgradeTotalAmount",t),t},hasNewUpgradeSelected:function(e){var t=e.upgradesBySegment;for(var i in t)if(!plnextv2.utils.CustomAriaUtils.isMetadata(i)){var n=t[i];if(n.selectedCabinCode!==n.currentCabinCode)return!0}return!1},deleteUpgrade:function(e,t){this.$json.setValue(t.upgradeBean,"selectedCabinCode",t.upgradeBean.currentCabinCode)},hasUpgradeSelected:function(e,t,i){var n=this.getUpgrade(e,i);return t.upgradeDetailsInTripSummaryMode&&plnextv2.utils.UpgradeUtils.isUpgradeEligible(n)&&n.selectedCabinCode!==n.currentCabinCode?!0:!1},getCabinCode:function(e,t,i){var n=t.listCabin[0].code,r=this.hasUpgradeSelected(e,i,t);if(r){var s=this.getUpgrade(e,t);n=s.selectedCabinCode}return n},getUpgrade:function(e,t){var i=e.upgradesBySegment,n=i[t.id];return n},getCabinName:function(e,t,i){var n=e.listCabin[0].name,r=this.hasUpgradeSelected(t,i,e);if(r){var s=this.getUpgrade(t,e);n=s.upgradesByCabin[s.selectedCabinCode].cabinName}return n},getNewTotalPrice:function(e,t){var i=e.totalPrice.cash.totalAmount,n=t+i;return n},getInitialTotalMiles:function(e){var t=aria.utils.Path.describe(e,"totalPrice.miles.otherCurrencyAmount.totalAmount");return t.value},getBalanceTotalMiles:function(e){var t=aria.utils.Path.describe(e,"totalPrice.miles.otherCurrencyAmount.balancedAmount");return t.value},getNewTotalPriceCash:function(e,t){var i=e.totalPrice.cash.totalAmount,n=parseFloat(t)+i;return n}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/waiverMessages/desktop/styles/DWaiverMessagesStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.waiverMessages.desktop.styles.DWaiverMessagesStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n.dynamic-waiver-wrapper {\ndisplay: table;\n}\n\n.dynamic-waiver-wrapper.message-panel-styled {\nwidth: 100%;\n}\n\n.dynamic-waiver-wrapper-left {\ndisplay: table-cell;\nwidth: 1px;\npadding-right: 10px;\nvertical-align: top;\n}\n\n.dynamic-waiver-wrapper-right {\ndisplay: table-cell;\nvertical-align: top;\n}\n\n.dynamic-waiver-wrapper h2 {\ndisplay: inline-block;\nvertical-align: middle;\n}\n\n.dynamic-waiver-messages {\nmargin-top: 20px;\n}\n\n.dynamic-waiver-messages li {\nlist-style-type: disc;\nmargin-bottom: 5px;\n}\n\n.dynamic-waiver-wrapper.message-panel-styled.plnext-message > .content .dynamic-waiver-messages ul.warning-messages li {\ndisplay: list-item;\n}\n\n.dynamic-waiver-wrapper .panel-body {\ndisplay: table-cell;\n}\n\n.dynamic-waiver-wrapper i.main-icon {\ndisplay: inline-block;\nvertical-align: middle;\nmargin: 0;\nfont-size: 3em;\ncolor: ",8),this.__$write($warning,55),this.__$write(";\n}\n\n.dynamic-waiver-wrapper h2,\n.dynamic-waiver-wrapper h2 small {\npadding-top: 0;\nmargin-top: 0;\npadding-bottom: 0;\nmargin-bottom: 0;\ntext-transform: uppercase;\ncolor: ",55),this.__$write($warning,65),this.__$write(";\n}\n\n.dynamic-waiver-wrapper h2 small {\ntext-transform: none;\n}\n\n.dynamic-waiver-wrapper .warning-messages {\nmargin-top: 10px;\n}\n\n.dynamic-waiver-wrapper .warning-messages li {\nlist-style-type: disc;\n}\n\n.dynamic-waiver-wrapper .warning-messages li:last-child {\nmargin-bottom: 0;\n}\n\n.dynamic-waiver-wrapper.message-panel-styled.plnext-message .content .dynamic-waiver-messages {\ncolor: ",65),this.__$write(this.$grayDarker,85),this.__$write(";\nmargin-left: 0.714em;\nmargin-top: 0;\n}\n",85)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/waiverMessages/desktop/views/DWaiverMessagesView.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/I18n.js"),require("plnextv2/utils/macroLibs/waiverMessages/desktop/views/DWaiverMessagesViewScript.js"),require("plnextv2/utils/widgets/plnextLib/message/core/Message.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.macroLibs.waiverMessages.desktop.views.DWaiverMessagesView",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$DWaiverMessagesViewScript.constructor.call(this)},$destructor:function(){this.$DWaiverMessagesViewScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_displayWaiverMessages:function(options){try{with(this)this._messagesNewStyle?this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","Message",{id:"dynamic-waiver-warning-messages",type:"warning",title:_i18n.getLabel("tx_pltg_text_BookingWaiverWarningHeading"),cssClass:"dynamic-waiver-wrapper"},16)&&(this.__$write('\n<div class="dynamic-waiver-messages">\n',22),this.__$write(getAllWarningMessages(options),23),this.__$write("\n</div>\n",24),this.__$endContainerWidget()):(this.__$write('\n<div class="dynamic-waiver-wrapper">\n<div class="dynamic-waiver-wrapper-left">\n<i aria-hidden="true" class="icon-warning-sign main-icon"></i>\n<span class="plnext-sr-only">',27),this.__$write(this._i18n.getLabel("tx_pltg_text_sr_warning"),30),this.__$write('</span>\n</div>\n<div class="dynamic-waiver-wrapper-right">\n<h2>\n',30),this.__$write(_i18n.getLabel("tx_pltg_text_BookingWaiverWarningHeading"),34),this.__$write('\n</h2>\n<div class="dynamic-waiver-messages">\n',35),this.__$write(getAllWarningMessages(options),37),this.__$write("\n</div>\n</div>\n</div>\n",38))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayWaiverMessages",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.macroLibs.waiverMessages.desktop.views.DWaiverMessagesViewScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/macroLibs/waiverMessages/desktop/views/DWaiverMessagesViewScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.macroLibs.waiverMessages.desktop.views.DWaiverMessagesViewScript",$dependencies:["plnextv2.utils.I18n","plnextv2.utils.DynamicWaiverUtils","plnextv2.utils.DateUtils"],$constructor:function(){this._i18n=plnextv2.utils.I18n,this._dynamicWaiverUtils=plnextv2.utils.DynamicWaiverUtils,this._dateUtils=plnextv2.utils.DateUtils,this._allowedLocations=[this._dynamicWaiverUtils.LOCATION_TYPE.COUNTRY,this._dynamicWaiverUtils.LOCATION_TYPE.CITY,this._dynamicWaiverUtils.LOCATION_TYPE.AIRPORT],this._appContext=plnextv2.utils.context.AppContext,this._messagesNewStyle=this._appContext.getPageData().appData.config.messagesNewStyle},$statics:{FLIGHT_DIRECTION:{FROM:"from",TO:"to"},ONEWAY_TRIPTYPE:"O",COMPLEX_TRIPTYPE:"M"},$prototype:{getAllWarningMessages:function(e){var t=[];if(e.scope.data.business.DynamicWaiver){var i=this.getChangeOfRoutingMessages(e),n=this.getChangeOfDatesMessages(e),r=this.concatArrayUnique([],i.concat(n)),s=this.getDisruptedAirports(e.scope.data.business.DynamicWaiver.waiverItemsPerSegmentId);if(s.length>0){var a=s.join(", ");t.push(this._i18n.getStringFromPattern("tx_pltg_text_BookingWaiverWrnMightBeDisrupted",[a])),t.push(" "),t.push(this._i18n.getLabel("tx_pltg_text_BookingWaiverWrnWeEncourageYou"))}if(r.length>0){t.push("<br>"),t.push(this._i18n.getLabel("tx_pltg_text_BookingWaiverWrnFollowTheInstructions")),t.push('<ul class="'+this.getWarningMessagesClass()+'">');for(var o=0;o<r.length;o++)t.push("<li>"),t.push(r[o]),t.push("</li>");t.push("</ul>")}}return t.join("")},getChangeOfRoutingMessages:function(e){for(var t=[],i=0;i<e.scope.data.business.DynamicWaiver.waiverItemsPerSegmentId.length;i++)for(var n=0;n<e.scope.data.business.DynamicWaiver.waiverItemsPerSegmentId[i].waiverItems.length;n++){for(var r=e.scope.data.business.DynamicWaiver.waiverItemsPerSegmentId[i].waiverItems[n],s=e.scope.data.business.DynamicWaiver.waiverItemsPerSegmentId[i],a=this.getFlightDirectionsForChangeOfRouting(r.currentTicket,e,s.segmentId),o=0;o<a.length;o++){var l=this.getChangeOfRoutingMessagesPerDirection(r,a[o],e);t=t.concat(l)}t=t.concat(l)}return t},shouldShowCallCenterText:function(e,t){var i=!1;if(!e.newTicket||!e.newTicket[t])return i;if(e.newTicket[t].listLocations)for(var n=0;n<e.newTicket[t].listLocations.length;n++){var r=e.newTicket[t].listLocations[n];if(-1===this._allowedLocations.indexOf(r.locationType)){i=!0;break}}if(e.newTicket[t].listExcludedLocations)for(var s=0;s<e.newTicket[t].listExcludedLocations.length;s++){var a=e.newTicket[t].listExcludedLocations[s];if(-1===this._allowedLocations.indexOf(a.locationType)){i=!0;break}}return i},isConnectionAirport:function(e,t,i){var n=this.getConnectionAirports(e);if(waiverFlight=i.currentTicket[t],!waiverFlight||!waiverFlight.listLocations||!n)return!1;for(var r=0;r<waiverFlight.listLocations.length;r++)for(var s=waiverFlight.listLocations[r],a=0;a<n.length;a++){var o=n[a];if(o.locationCode===s.locationCode&&o.locationName===s.locationLabel)return!0}return!1},getConnectionAirports:function(e){var t=[];if(!e||!e.listItinerary)return t;for(var i=0;i<e.listItinerary.length;i++)for(var n=null,r=0;r<e.listItinerary[i].listSegment.length;r++){var s=e.listItinerary[i].listSegment[r];n&&n.endLocation.cityCode===s.beginLocation.cityCode&&n.endLocation.locationCode===s.beginLocation.locationCode&&(t.push(s.beginLocation),t.push(s.endLocation)),n=s}return t},getChangeOfRoutingMessagesPerDirection:function(e,t,i){var n=[];if(e&&e.newTicket&&e.newTicket[t])for(var r=0;r<e.newTicket[t].listLocations.length;r++){var s=e.newTicket[t].listLocations[r],a=this.getChangeOfRoutingMessagePerDirection(s,e,t,i);n.push(a)}return n},getChangeOfRoutingMessagePerDirection:function(e,t,i,n){var r="";if(!(e&&t&&t.newTicket&&n))return r;var s=this.isConnectionAirport(n,i,t),a=i===this.FLIGHT_DIRECTION.FROM,o=i===this.FLIGHT_DIRECTION.TO,l=this.getChangeRouteTo(t,i,e),c=this.getChangeRouteExcludedLocations(t,i),d=this.shouldShowCallCenterText(t,i);return-1===this._allowedLocations.indexOf(e.locationType)?r:r=l?this.getChangeOfRoutingMessageForAallowedLocation(s,a,o,c,l):this.getChangeOfRoutingMessageForUnallowedLocations(s,a,o,d)},getChangeRouteExcludedLocations:function(e,t){var i="";if(e.newTicket&&e.newTicket[t]&&e.newTicket[t].listExcludedLocations){var n=this.getExcludedLocations(e,t);i=n.join(", ")}return i},getChangeRouteTo:function(e,t,i){var n=[],r=this.isExcludedLocationPartOfAllowedLocations(e,t);return(!e.newTicket[t].listExcludedLocations||e.newTicket[t].listExcludedLocations&&r)&&(n.push(i.locationLabel),i.locationType===this._dynamicWaiverUtils.LOCATION_TYPE.AIRPORT&&n.push("("+i.locationCode+")")),n.join(" ")},getChangeOfRoutingMessageForAallowedLocation:function(e,t,i,n,r){var s="";return e?s=n?this._i18n.getStringFromPattern("tx_pltg_text_BookingWaiverWrnChangeYourConnectionAirportToExcept",[r,n]):this._i18n.getStringFromPattern("tx_pltg_text_BookingWaiverWrnChangeYourConnectionAirportTo",[r]):t?s=n?this._i18n.getStringFromPattern("tx_pltg_text_BookingWaiverWrnChangeYourDepartureAirportToExcept",[r,n]):this._i18n.getStringFromPattern("tx_pltg_text_BookingWaiverWrnChangeYourDepartureAirportTo",[r]):i&&(s=n?this._i18n.getStringFromPattern("tx_pltg_text_BookingWaiverWrnChangeYourArrivalAirportToExcept",[r,n]):this._i18n.getStringFromPattern("tx_pltg_text_BookingWaiverWrnChangeYourArrivalAirportTo",[r])),s},getChangeOfRoutingMessageForUnallowedLocations:function(e,t,i,n){var r=[];return t?r.push(this._i18n.getLabel("tx_pltg_text_BookingWaiverWrnChangeYourDepartureAirport")):i?r.push(this._i18n.getLabel("tx_pltg_text_BookingWaiverWrnChangeYourArrivalAirport")):e&&r.push(this._i18n.getLabel("tx_pltg_text_BookingWaiverWrnChangeYourConnectionAirport")),n&&r.push(" "+this._i18n.getLabel("tx_pltg_text_BookingWaiverWrnContactCallCenter")),r.join("")},isExcludedLocationPartOfAllowedLocations:function(e,t){if(e.newTicket[t].listExcludedLocations)for(var i=0;i<e.newTicket[t].listExcludedLocations.length;i++){var n=e.newTicket[t].listExcludedLocations[i],r=n.locationType;if(this._allowedLocations.indexOf(r)>=0)return!0}return!1},getExcludedLocations:function(e,t){for(var i=[],n=0;n<e.newTicket[t].listExcludedLocations.length;n++){var r=e.newTicket[t].listExcludedLocations[n],s=r.locationType;if(this._allowedLocations.indexOf(s)>=0){var a=r.locationLabel,o=r.locationCode,l=a;r.locationType===this._dynamicWaiverUtils.LOCATION_TYPE.AIRPORT&&(l=l+" ("+o+")"),i.push(l)}}return i},getChangeOfDatesMessages:function(e){var t=[];if(!e||!e.scope.data.business.DynamicWaiver)return t;for(var i=0;i<e.scope.data.business.DynamicWaiver.waiverItemsPerSegmentId.length;i++)for(var n=e.scope.data.business.DynamicWaiver.waiverItemsPerSegmentId[i].segmentId,r=0;r<e.scope.data.business.DynamicWaiver.waiverItemsPerSegmentId[i].waiverItems.length;r++){var s=e.scope.data.business.DynamicWaiver.waiverItemsPerSegmentId[i].waiverItems[r],a=this.getChangeOfDatesMessage(e,n,s);""!==a&&-1===t.indexOf(a)&&t.push(a)}return t},getChangeOfDatesMessage:function(e,t,i){var n="",r=this.isInboundFlightImpacted(t,e),s=this.isOutboundFlightImpacted(t,e),a=this.isComplexFlow(e),o=this.isOneWayTrip(e),l=null,c=this.getListItineraryBySegmentId(t,e),d=this._dynamicWaiverUtils.getDisruptedDatesForBound(c,e.scope.data.business.DynamicWaiver.waiverItemsPerSegmentId),p=this._dynamicWaiverUtils.getWaivedDatesFromListDateRanges(i.newTicket),_=this._dynamicWaiverUtils.getWaivedDatesFromListDateOffsets(i.newTicket,d),u=p.concat(_);if(1===u.length?l=this._dateUtils.formatDateTime(u[0],this._dateUtils.FORMATS.SHORT_DATE_FORMAT_7):u.length>1&&(l=this.getFormattedDateRange(u)),l&&u.length>0)var n=this.getChangeOfDatesMessageWithFormattedDate(s,r,o,a,l,u);return n},getChangeOfDatesMessageWithFormattedDate:function(e,t,i,n,r,s){var a="";return e?a=1===s.length?this._i18n.getStringFromPattern("tx_pltg_text_BookingWaiverWrnChangeYourDepartureDateTo",[r]):this._i18n.getStringFromPattern("tx_pltg_text_BookingWaiverWrnChangeYourDepartureDateBetween",[r]):t?a=1===s.length?this._i18n.getStringFromPattern("tx_pltg_text_BookingWaiverWrnChangeYourReturnDateTo",[r]):this._i18n.getStringFromPattern("tx_pltg_text_BookingWaiverWrnChangeYourReturnDateBetween",[r]):i?a=1===s.length?this._i18n.getStringFromPattern("tx_pltg_text_BookingWaiverWrnChangeYourFlightDateTo",[r]):this._i18n.getStringFromPattern("tx_pltg_text_BookingWaiverWrnChangeYourFlightDateBetween",[r]):n&&(a=1===s.length?this._i18n.getStringFromPattern("tx_pltg_text_BookingWaiverWrnChangeYourFlightOnTo",[r]):this._i18n.getStringFromPattern("tx_pltg_text_BookingWaiverWrnChangeYourFlightOnBetween",[r])),a},getFormattedDateRange:function(e){if(aria.utils.Type.isArray(e)){var t=this._dateUtils.formatDateTime(e[0],this._dateUtils.FORMATS.SHORT_DATE_FORMAT_7),i=this._dateUtils.formatDateTime(e[e.length-1],this._dateUtils.FORMATS.SHORT_DATE_FORMAT_7);return t+" - "+i}return null},getDisruptedAirports:function(e){var t=[];if(!e)return t;for(var i=0;i<e.length;i++)for(var n=0;n<e[i].waiverItems.length;n++){var r=e[i],s=r.waiverItems[n],a=this.getDisruptedAirportsPerWaiverItem(s,r.segmentId);t=this.concatArrayUnique(t,a)}return t},concatArrayUnique:function(e,t){if(aria.utils.Type.isArray(e)&&aria.utils.Type.isArray(t))for(var i=0;i<t.length;i++)-1===e.indexOf(t[i])&&""!==t[i]&&e.push(t[i]);return e||[]},getDisruptedAirportsPerWaiverItem:function(e){for(var t=[],i=[this.FLIGHT_DIRECTION.FROM,this.FLIGHT_DIRECTION.TO],n=0;n<i.length;n++)if(e.currentTicket&&e.currentTicket[i[n]]){var r=this.getDisruptedAirportsPerDirection(e,i[n]);t=t.concat(r)}return t},getFlightDirectionsForChangeOfRouting:function(e,t,i){var n=[];if(!e)return n;if(e.from&&e.to){var r=this.shouldConsiderFlightDirection(e,this.FLIGHT_DIRECTION.FROM,i,t),s=this.shouldConsiderFlightDirection(e,this.FLIGHT_DIRECTION.TO,i,t);r&&n.push(this.FLIGHT_DIRECTION.FROM),s&&n.push(this.FLIGHT_DIRECTION.TO),0===n.length&&(n.push(this.FLIGHT_DIRECTION.FROM),n.push(this.FLIGHT_DIRECTION.TO))}else e.from?n.push(this.FLIGHT_DIRECTION.FROM):e.to&&n.push(this.FLIGHT_DIRECTION.TO);return n},shouldConsiderFlightDirection:function(e,t,i,n){var r=this.getListItineraryBySegmentId(i,n),s=!1;if(!(r&&e&&e[t]&&e[t].listLocations))return s;e:for(var a=0;a<e[t].listLocations.length;a++)for(var o=e[t].listLocations[a],l=0;l<r.listSegment.length;l++){var c=r.listSegment[l];if(s=this.areLocationsEqual(o,c,t))break e}return s},areLocationsEqual:function(e,t,i){var n=null;return i===this.FLIGHT_DIRECTION.FROM?n=t.beginLocation:i===this.FLIGHT_DIRECTION.TO&&(n=t.endLocation),e.locationCode===n.locationCode&&e.locationLabel===n.locationName?!0:!1},getDisruptedAirportsPerDirection:function(e,t){for(var i=[],n=0;n<e.currentTicket[t].listLocations.length;n++){var r=e.currentTicket[t].listLocations[n],s=r.locationLabel;r.locationType===this._dynamicWaiverUtils.LOCATION_TYPE.AIRPORT&&(s=r.locationLabel+" ("+r.locationCode+")"),i.push(s)}return i},isOutboundFlightImpacted:function(e,t){return t.listItinerary&&t.listItinerary.length>0&&t.listItinerary[0].listSegment&&t.listItinerary[0].listSegment.length>0&&t.listItinerary[0].listSegment[0].id===e},isInboundFlightImpacted:function(e,t){return t.listItinerary&&t.listItinerary.length>1&&t.listItinerary[1].listSegment.length>0&&t.listItinerary[1].listSegment[0].id===e},isOneWayTrip:function(e){return 1===e.listItinerary.length},isComplexFlow:function(e){return e.scope.data.business.Search&&e.scope.data.business.Search.tripType===this.COMPLEX_TRIPTYPE},getListItineraryBySegmentId:function(e,t){if(!t||!t.listItinerary)return null;for(var i=0;i<t.listItinerary.length;i++)for(var n=t.listItinerary[i],r=0;r<n.listSegment.length;r++){var s=n.listSegment[r];if(s.id===e)return n}return null},getWarningMessagesClass:function(){var e=["warning-messages"];return e.join(" ")}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/pageBuilder/PageDefinitionBuilder.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.pageBuilder.PageDefinitionBuilder",$dependencies:["aria.utils.Array","aria.utils.Json","plnextv2.utils.pageBuilder.PageDefinitionConfigBean","plnextv2.utils.BeanValidationLogger","plnextv2.config.ComponentsDefinitions","plnextv2.utils.DeviceUtils","plnextv2.utils.CustomAriaUtils","plnextv2.config.CustomPlaceholdersDefinitions"],$singleton:!0,$statics:{MAIN_TEMPLATE:"plnextv2.views.MainTemplate",PH_PAGE_CONTENT_ALIAS:"pageContent",MOD_PAGE_CONTROLLER_ALIAS:"pageController",PAGE_BINDINGS_ALIAS:"PAGE"},$prototype:{init:function(e){this.__pageConfiguration=null,this.__components=plnextv2.config.ComponentsDefinitions,this.__custom_placeholders=plnextv2.config.CustomPlaceholdersDefinitions,this.deviceUtils=plnextv2.utils.DeviceUtils,this._config=e.pageConfig,this._pageDefinition=null,this._initPageDefinition(),this._staticConfig=e.staticPageConfig,plnextv2.utils.BeanValidationLogger.validate(this._config,"plnextv2.utils.pageBuilder.PageDefinitionConfigBean.PageDefinitionConfig",!0),this.__loadPageDefinitionDependency(this._config.pageId,e.callback)},__afterDependencyLoading:function(e){var t=this.__custom_placeholders.getPageCustomizationDevice(this._config.pageId);this.__deviceModuleDefinition=this.__getDevicePageModuleDefinition(t),this.__pageBindings=this.__deviceModuleDefinition.BINDINGS;var i=this.__deviceModuleDefinition.MAIN_MODULE;this._setPlaceholder(this.PH_PAGE_CONTENT_ALIAS,{template:i.placeholder.template,module:this.MOD_PAGE_CONTROLLER_ALIAS}),this._addModule(this.MOD_PAGE_CONTROLLER_ALIAS,i.module),this._addModuleArgs(this.MOD_PAGE_CONTROLLER_ALIAS,this.__pageBindings[this.PAGE_BINDINGS_ALIAS],this._config.pageId);var n=i.contents||[];this._setContents(n,this.PH_PAGE_CONTENT_ALIAS),this._buildPageDefinition(),this._setStaticConfig(),this.__custom_placeholders.addPlaceholdersCustomizationInformation(this._pageDefinition.pageComposition,this._config.pageId,this.MOD_PAGE_CONTROLLER_ALIAS),this.$logDebug("built Page Definition for "+this._config.pageId),this.$callback(e.callback,this)},__loadPageDefinitionDependency:function(e,t){Aria.load({classes:[this.resolvePageBuilderPath(e)],oncomplete:{fn:this.__onPageDefinitionDependencyLoad,scope:this,args:{pageId:e,callback:t}}})},__onPageDefinitionDependencyLoad:function(e){this.__pageConfiguration=Aria.getClassRef(this.resolvePageBuilderPath(e.pageId)),this.__afterDependencyLoading(e)},resolvePageBuilderPath:function(e){return"plnextv2.modules."+e+".config."+e+"PageDefinition"},__getDevicePageModuleDefinition:function(e){var t=this.deviceUtils.getPageDeviceType();return e&&this.__pageConfiguration[e]&&this.$logDebug("(cfg.js \u2192 customDevice) Device overriding to "+e+" for a main page container"),this.__pageConfiguration[e]||this.__pageConfiguration[t]||this.__pageConfiguration[this.deviceUtils.DESKTOP]},_buildPageDefinition:function(){for(var e=this._config.pageCompositionConfig.components,t=(plnextv2.config.CustomPlaceholdersDefinitions,[]),i=e.length,n=0;i>n;n++){var r=e[n];aria.utils.Json.setValue(r,"parentPhName",this.PH_PAGE_CONTENT_ALIAS),t.push(r),this.__addUIDComponent(r)}for(;t.length>0;){r=t.pop();var s=this.__custom_placeholders.getComponentCustomizationDevice(this._config.pageId,r.name),a=this.__components.getDeviceComponentDefinition(r.name,s),o=this.__pageBindings[r.name];this._isModuleInConfig(a.placeholder.module)||(this._addModule(a.placeholder.module,a.module),this._addModuleArgs(a.placeholder.module,o,r.name));var l=r.parentPhName+"."+a.placeholderName,c=this.__custom_placeholders.addComponentCustomizationInformation(a.placeholder,r.name,this._config.pageId,this.MOD_PAGE_CONTROLLER_ALIAS);this._setPlaceholder(l,c),o||this.$logError("Component '"+r.name+"' not found in PageDefinition: possible configuration mismatch for device type: "+this.deviceUtils.getPageDeviceType()+".");var d=o&&o.contents||[];this._setContents(d,l);for(var p=a.children?a.children.length:0,_=0;p>_;_++){var u=null;if(aria.utils.Array.forEach(e,function(e){e.name==a.children[_]&&(u=e)}),u){var m=aria.utils.Json.copy(u);aria.utils.Json.setValue(m,"parentPhName",l),t.push(m)}}}this._setPageContents(this._config.contents)},_initPageDefinition:function(){this._pageDefinition={contents:{menus:{},placeholderContents:{}},pageCompositionConfig:this._config.pageCompositionConfig,pageComposition:{placeholders:{},template:this.MAIN_TEMPLATE,modules:{},pageData:this._config.pageData},pageId:this._config.pageId,title:this._config.title,url:this._config.url,animation:this._config.animation,components:{}}},_setStaticConfig:function(){if(this._staticConfig){var e=this._pageDefinition.pageComposition.placeholders,t=this._pageDefinition.pageComposition.modules;this._pageDefinition=this._staticConfig.pageDefinition,this._staticConfig.mergeOverride?(aria.utils.Json.inject(this._pageDefinition.pageComposition.placeholders,e,!1),aria.utils.Json.inject(this._pageDefinition.pageComposition.modules,t,!1)):(aria.utils.Json.setValue(this._pageDefinition.pageComposition,"placeholders",e),aria.utils.Json.setValue(this._pageDefinition.pageComposition,"modules",t))}},_setContents:function(e,t){for(var i=0;i<e.length;i++)this._setContentPlaceholder(t,e[i])},_setContentPlaceholder:function(e,t){aria.utils.Json.setValue(this._pageDefinition.pageComposition.placeholders,e+"."+t,{contentId:t})},_isModuleInConfig:function(e){return this._pageDefinition.modules&&this._pageDefinition.modules[e]},_setPageId:function(e){aria.utils.Json.inject(this._pageDefinition,"pageId",e)},_setPageComposition:function(e){aria.utils.Json.inject(this._pageDefinition,"pageComposition",e)},_injectPageComposition:function(e){aria.utils.Json.inject(e,this._pageDefinition.pageComposition,!0)},_setTitle:function(e){aria.utils.Json.setValue(this._pageDefinition,"title",e)},_setPlaceholder:function(e,t){this._pageDefinition.pageComposition.placeholders||aria.utils.Json.setValue(this._pageDefinition.pageComposition,"placeholders",{}),aria.utils.Json.setValue(this._pageDefinition.pageComposition.placeholders,e,t)},_setTemplate:function(e){aria.utils.Json.setValue(this._pageDefinition.pageComposition,"template",e)},_setModules:function(e){aria.utils.Json.setValue(this._pageDefinition.pageComposition,"modules",e)},_injectModules:function(e){this._pageDefinition.pageComposition.modules?aria.utils.Json.inject(e,this._pageDefinition.pageComposition.modules,!0):this._setModules(e)},_addModule:function(e,t){this._pageDefinition.pageComposition.modules||this._setModules(t),aria.utils.Json.setValue(this._pageDefinition.pageComposition.modules,e,t)},_addModuleArgs:function(e,t,i){aria.utils.Json.setValue(this._pageDefinition.pageComposition.modules[e],"initArgs",{}),aria.utils.Json.setValue(this._pageDefinition.pageComposition.modules[e].initArgs,"bindings",t),aria.utils.Json.setValue(this._pageDefinition.pageComposition.modules[e].initArgs,"name",i)},_setBindings:function(e,t){aria.utils.Json.setValue(this._pageDefinition.pageComposition.modules[e],"bind",t)},_addBindings:function(e,t){this._pageDefinition.pageComposition.modules[e].bind?aria.utils.Json.inject(t,this._pageDefinition.pageComposition.modules[e].bind,!0):this._setBindings(e,t)},setPageData:function(e){aria.utils.Json.setValue(this._pageDefinition.pageComposition,"pageData",e)},_injectPageData:function(e){aria.utils.Json.inject(e,this._pageDefinition.pageComposition,!0)},getPageDefinition:function(){return this._pageDefinition},_setPageDefinition:function(e){this._pageDefinition=e},_setPageContents:function(e){e=this._normalizeContents(e),aria.utils.Json.setValue(this._pageDefinition,"contents",e)},_normalizeContents:function(e){var t={menus:e.menu||{},placeholderContents:e.placeholderContents||{}};return t},getComponents:function(){return this.__components},__addUIDComponent:function(e){this._pageDefinition.components||aria.utils.Json.setValue(this._pageDefinition,"components",{}),aria.utils.Json.setValue(this._pageDefinition.components,e.name,e.children)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/pageProvider/PlnextPageProvider.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.pageProvider.PlnextPageProvider",$implements:["aria.pageEngine.pageProviders.PageProviderInterface"],$dependencies:["aria.core.DownloadMgr","plnextv2.utils.requestManager.PlnextRequestManager","plnextv2.utils.context.AppContext","plnextv2.utils.pageBuilder.PageDefinitionBuilder","plnextv2.utils.widgets.plnextLib.navigationManager.PlnextNavigationManager","plnextv2.utils.HtmlUtils","plnextv2.utils.CustomAriaUtils","plnextv2.utils.storage.SessionStorageManager","plnextv2.config.CustomPlaceholdersDefinitions","aria.core.Browser","aria.utils.Event","aria.pageEngine.utils.HashManager","plnextv2.utils.preloader.PreLoader","plnextv2.utils.DeviceUtils"],$singleton:!0,$prototype:{init:function(e){this.customAriaUtils=plnextv2.utils.CustomAriaUtils,this._params=e,this.deviceUtils=plnextv2.utils.DeviceUtils,this._pe=e.pageEngine,this._navigationManager=plnextv2.utils.widgets.plnextLib.navigationManager.PlnextNavigationManager,this._pe.$addListeners({beforePageTransition:{fn:this.__publishAllControllerLoaded},pageReady:{fn:this.__onPageReady},scope:this}),this.firstLoad=!0,this.pageDefinitionBuilder=plnextv2.utils.pageBuilder.PageDefinitionBuilder,this._appContext=plnextv2.utils.context.AppContext,this._appContext.setSiteConfig(e.config.siteConfiguration),this.reqMgr=plnextv2.utils.requestManager.PlnextRequestManager,this.storageManager=plnextv2.utils.storage.SessionStorageManager,this.reqMgr.init(e),this.__onePageNavEnabled=e.onePageNavEnabled,this._config=e.config,this.isOfflineMode=this._config.isOfflineMode||!1,this.staticDefinition=this._config.staticDefinition,this._siteConfiguration=this._config.siteConfiguration,this._pageDefinitionConfig=this._config.pageDefinitionConfig,this._urlMap={pageIdToUrl:{},urlToPageId:{}},this._browserSpecificInit(),this._overrideNavigationSettings();var t=this._siteConfiguration.appData.config.recording;return this._recording=t&&t.active,this},loadSiteConfig:function(e){if(this._recording){var t=this;Aria.load({classes:["plnextv2.utils.recorder.Recorder"],oncomplete:function(){plnextv2.utils.recorder.Recorder.start(t._params),t.$callback.call(t,e.onsuccess,t.processSiteConfig.call(t,t._siteConfiguration))}})}else this.$callback(e.onsuccess,this.processSiteConfig(this._siteConfiguration))},loadPageDefinition:function(e,t){if(e=e||{},plnextv2.utils.HtmlUtils.activateLoading({container:document.body,hideLoadingContent:e.hidePageSpinner}),!e.forceReload){var i=this._getPageId(e);switch(this._detectNavigationType(e)){case"FIRST_LOAD":this.firstLoad=!1,this._onPageSuccess({pageDefinitionConfig:this._config.pageDefinitionConfig},{callback:t}),this._config.pageDefinitionConfig=null;break;case"PAGE_NAVIGATION":e.pageId=i,this.__onePageNavEnabled===!1&&(e.requestObj.isHTTP=!0),this._navigationManager.isRouterAvailable()&&(e.requestObj.replace===!0&&(e.replace=!0,e.requestObj.isHTTP=!1),this._navigationManager.snapshot()),this._sendRequest(e.requestObj,{callback:t});break;case"CACHE_NAVIGATION":this.__executePageDefinition(t.onsuccess,{pageId:i});break;case"BROWSER_NAVIGATION":var n=e.state.data.pageDefinitionConfig;this._onPageSuccess({pageDefinitionConfig:n},{callback:t})}jQuery(document.body).trigger("plenxtv2:navigate:start")}},_detectNavigationType:function(e){return this.firstLoad?"FIRST_LOAD":e.requestObj?"PAGE_NAVIGATION":e.key?"BROWSER_NAVIGATION":"CACHE_NAVIGATION"},__loadPageBuilder:function(e){var t={pageConfig:e.pageConfig,callback:e.callback};if(this.staticDefinition){var i=this.staticDefinition.basePageUrl+e.pageConfig.pageId+".json";aria.core.IO.asyncRequest({url:i,expectedResponseType:"json",callback:{fn:this.__onStaticPageLoading,scope:this,args:t,onerror:this._onFailure}})}else{var n={fn:this.__onPageDefinitionBuilderCreation,scope:this,args:e};this.pageDefinitionBuilder.init({pageConfig:e.pageConfig,callback:n})}},__onStaticPageLoading:function(e,t){var i=e.responseJSON;if(this._isStaticOverridePlaceholders()){var n={mergeOverride:this._isMergeOverride(),pageDefinition:i},r={fn:this.__onPageDefinitionBuilderCreation,scope:this,args:t};this.pageDefinitionBuilder.init({pageConfig:t.pageConfig,staticPageConfig:n,callback:r})}else aria.utils.Json.setValue(i.pageComposition,"pageData",t.pageConfig.pageData),this._executePageDefinition(t,i)},__onPageDefinitionBuilderCreation:function(e,t){var i=this.pageDefinitionBuilder.getPageDefinition();this.__executePageDefinition(t.callback.onsuccess,{pageId:i.pageId,pageDefinition:i})},__executePageDefinition:function(e,t){this._appContext.update(t),aria.utils.Path.describe(this._appContext.getPageData(),"appData")&&(aria.utils.Json.inject(this.customAriaUtils.removeMetadata(this._appContext.getPageData().appData),this._appContext.getAppData(),!0),this.__storeSessionData());var i=this._appContext.getPageDefinition();t.pageDefinition||this.deviceUtils.setPageDeviceType(i.pageComposition,i.pageId),jQuery(document.body).trigger("plenxtv2:navigate:end"),this.$callback(e,i)},__storeSessionData:function(){var e=this._appContext.getAppData();if(e.config.links.restartFlow){var t=this.customAriaUtils.removeMetadata(e.config.links.restartFlow.dmIn);this.storageManager.set("restartFlow",t,"Links"),this.storageManager.set("actionUrl",e.config.links.restartFlow.actionUrl,"Links")}else e.config.remove_prev_link&&this.storageManager.set("restartFlow",null,"Links");e.config.originPage&&this.storageManager.set("pages",e.config.originPage,"originPage")},processSiteConfig:function(e){return plnextv2.config.CustomPlaceholdersDefinitions.init(e.appData),this.reqMgr.addParams(e.appData.requestParameters),e},processPageDefinition:function(e){return e},_sendRequest:function(e,t){e.navigate=!0,aria.utils.Json.setValue(e,"callback",{fn:this._onPageSuccess,scope:this,args:t,onerror:this._onFailure}),this.isOfflineMode?this._getOfflinePage(e):this.reqMgr.sendJSON(e)},_getOfflinePage:function(){},_onPageSuccess:function(e,t){var i=e.pageDefinitionConfig||e.response&&e.response.data&&e.response.data.pageDefinitionConfig;i&&this.deviceUtils.setPageDeviceType(i),this._recording&&plnextv2.utils.recorder.Recorder.record(plnextv2.utils.recorder.Recorder.PAGE,i),this.__loadPageBuilder({pageConfig:i,callback:t.callback})},_onFailure:function(e,t){this.$callback(t.callback.onfailure)},_updateUrlMap:function(e){var t=e.pageId,i=e.url,n=this._urlMap;if(t&&i){n.pageIdToUrl.pageId=i,n.urlToPageId.url=t;{i.replace(/\/$/,"")}n.urlToPageId.alternativeUrl=t}},_getPageId:function(e){var t=this._urlMap.urlToPageId,i=e.pageId,n=e.url;if(i)return i;if(n){var r=t[n]||t[n+"/"]||t[n.replace(/\/$/,"")];if(r)return r}return this._config.homePageId},_getUrl:function(e){var t=this._urlMap.pageIdToUrl,i=e.pageId,n=e.url;return n?n:i&&t[i]?t[i]:"/"+i},_hasStaticDefinition:function(){return!!this.staticDefinition},_isStaticOverridePlaceholders:function(){var e=!1;return this.staticDefinition&&(e=this.staticDefinition.overridePlaceholders),!!e},_isMergeOverride:function(){var e=!1;return this.staticDefinition&&(e=this.staticDefinition.mergeOverride),!!e},_browserSpecificInit:function(){aria.core.Browser.isFirefox&&aria.utils.Event.addListener(Aria.$window,"beforeunload",{fn:function(){Aria.$window.document.body.style.display="none"}})},_overrideNavigationSettings:function(){var e=Aria.$window;if(!aria.core.Browser.isIE7){var t=aria.pageEngine.utils.HashManager;t.prototype.update=function(t){var i=t.url,n=t.title,r=t.pageId,s=aria.utils.Type;if(this._lastPageId=r,s.isString(i)&&(this._addInCache(i,r),this.getUrl()!=i)){if(t.replace){i=/^#/.test(i)?i:"#"+i;var a=e.location.href.split("#")[0];e.location.replace(a+i)}else this._hashManager.setHash(i);if(aria.core.Browser.isEdge){var o=plnextv2.utils.HtmlUtils.getFavIconUrl();plnextv2.utils.HtmlUtils.setFavIcon(o)}}s.isString(n)&&(e.document.title=n)}}},__publishAllControllerLoaded:function(){this._appContext.getEventBus().publish("pageEngine:allControllerLoaded",this)},__onPageReady:function(){window.performance&&"function"==typeof performance.mark&&performance.mark("onPageReady");var e=this;e.__changeTitle(),setTimeout(function(){plnextv2.utils.preloader.PreLoader.preloadNext(e._appContext.getPageId())},200)},__changeTitle:function(){var e={title:window.document.title};void 0!==this._params.config.siteConfiguration.appData.allowedDomain&&window.top!=window&&window.top.postMessage(aria.utils.Json.convertToJsonString(e),this._params.config.siteConfiguration.appData.allowedDomain)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/preloader/PreLoader.js
//*******************
var Aria=require("ariatemplates/Aria"),io=require("ariatemplates/core/IO"),downloadMgr=require("ariatemplates/core/DownloadMgr"),componentsDefinitions=require("plnextv2/config/ComponentsDefinitions"),deviceUtils=require("plnextv2/utils/DeviceUtils");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.preloader.PreLoader",$singleton:!0,$statics:{AT_PACKAGES:["aria/DomEvent.js","aria/core/IOFilter.js","aria/widgets/AriaLib.js","aria/pageEngine/PageEngine.js"],COMMON_PACKAGES:["plnextv2/components/common/address/desktop/views/AddressScript.js","plnextv2/modules/GERR/GERRBaseController.js","plnextv2/modules/COMMON/timeout/desktop/views/TimeoutTemplateScript.js"]},$constructor:function(){this._isEnabled=!0},$prototype:{enable:function(e){this._isEnabled=e},preload:function(e){if(this._isEnabled){this._loadLibraries(),e=e.split(",");for(var t=0;t<e.length;t++)this._loadModule(e[t],{fn:this._onModuleLoaded,scope:this,args:{uid:e[t],loadComponents:!0,loadNextModules:!1}})}},preloadNext:function(e){if(this._isEnabled){this._loadLibraries(),e=e.split(",");for(var t=0;t<e.length;t++)this._loadModule(e[t],{fn:this._onModuleLoaded,scope:this,args:{uid:e[t],loadComponents:!1,loadNextModules:!0}})}},_loadLibraries:function(){for(var e=0;e<this.AT_PACKAGES.length;e++)downloadMgr.loadFile(this.AT_PACKAGES[e],{fn:Aria.empty,scope:this});for(var t=0;t<this.COMMON_PACKAGES.length;t++)downloadMgr.loadFile(this.COMMON_PACKAGES[t],{fn:Aria.empty,scope:this})},_loadModule:function(e,t){e&&Aria.load({classes:[this._getPageDefinitionClassName(e)],oncomplete:t,onerror:{fn:Aria.empty,scope:this}})},_onModuleLoaded:function(e){var t=deviceUtils.getDeviceType(),i=Aria.getClassRef(this._getPageDefinitionClassName(e.uid));if(e.loadComponents&&i[t]&&i[t].BINDINGS)for(var n in i[t].BINDINGS)downloadMgr.loadFile(this._getComponentPath(n),{fn:Aria.empty,scope:this});if(e.loadNextModules&&i[t]&&i[t].NEXT_MODULES)for(var r=0;r<i[t].NEXT_MODULES.length;r++)this._loadModule(i[t].NEXT_MODULES[r],{fn:this._onModuleLoaded,scope:this,args:{uid:i[t].NEXT_MODULES[r],loadComponents:!0,loadNextModules:!1}})},_getComponentPath:function(e){return componentsDefinitions.getDeviceComponentDefinition(e).module.classpath.replace(/\./g,"/")+".js"},_getPageDefinitionClassName:function(e){return"plnextv2.modules."+e.toUpperCase()+".config."+e.toUpperCase()+"PageDefinition"}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/preloader/Preload.js
//*******************
function preloader(){var e=this;this.iframe=null,this.UIDS=["FPRM","FDCS","FPOW","FDFF","FPC","FDFFAW","SDAI","FDCSCPX","FDFFCPX","FDCT","RTPL"],this.url=function(){for(var e=document.getElementsByTagName("script"),t=null,i=0;i<e.length;i++)e[i].src&&e[i].src.indexOf("Preload.action")>0&&(t=e[i]);return function(){return t.src+"&TYPE=iframe"}}(),this.preload=function(t){e.iframe?(t&&t.modules&&e.sendMessage({action:"preload:modules",payload:t.modules.join(",")}),t&&t.statics&&e.sendMessage({action:"preload:statics",payload:t.statics})):(e.iframe=document.createElement("iframe"),e.iframe.setAttribute("id","dx_preload"),e.iframe.style.display="none",e.iframe.src=e.url(),window.addEventListener("message",function(i){switch(i.data.action){case"ready":var n=t&&t.modules?t.modules:e.UIDS;e.sendMessage({action:"preload:modules",payload:n.join(",")}),t&&t.statics&&e.sendMessage({action:"preload:statics",payload:t.statics})}},!1),document.body.appendChild(e.iframe))},this.sendMessage=function(t){e.iframe&&e.iframe.contentWindow.postMessage(t,"*")}}var dx=new preloader;
//*******************
//LOGICAL-PATH:plnextv2/utils/requestManager/APFXMLRequestHandler.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.requestManager.APFXMLRequestHandler",$extends:"aria.modules.requestHandler.XMLRequestHandler",$implements:["aria.modules.requestHandler.IRequestHandler"],$dependencies:["aria.utils.Json"],$statics:{JSON_ERROR_ON_FRAMEWORK:"Invalid Framework data have been received in the server response:\n %2",JSON_ERROR_ON_DATA:"Invalid data have been received in the server response:\n %2",JSON_ERROR_ON_ERRORS:"Invalid Errors data have been received in the server response:\n %2"},$prototype:{_extractCDATAasJSON:function(e,t){for(var i=e.childNodes,n=i.length,r=4,s=0;n>s;s++){var a=i[s];if(a.nodeType===r){var o=a.nodeValue;return{data:aria.utils.Json.load(a.nodeValue,this,t),source:o}}}return null},processXMLDocument:function(e,t){for(var i={},n={},r=3,s=e.childNodes,a=s.length,o=0;a>o;o++){var l=s[o];if(l.nodeType!==r){var c=l.tagName;if("framework"==c||"data"==c||"errors"==c){var d=this._extractCDATAasJSON(l,this["JSON_ERROR_ON_"+c.toUpperCase()]);i[c]=d.data,n[c]=d.source}}}if(i.framework){var p=i.framework.session,_=t.session;if(p)for(var u in p)p.hasOwnProperty(u)&&(_[u]=p[u])}var f={};return f.response=i.data,i.errors&&(f.errorData=i.errors,f.error=!0),f}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/requestManager/Constants.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.requestManager.Constants",$singleton:!0,$statics:{FULL_HTTP:"FULL_HTTP",JSON:"JSON",AJAX:"AJAX",PLNEXT_AJAX:"PLNEXT_AJAX"},$prototype:{}});
//*******************
//LOGICAL-PATH:plnextv2/utils/requestManager/CustomResourcesFilter.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.requestManager.CustomResourcesFilter",$extends:"aria.core.IOFilter",$constructor:function(e){this.__siteCode=e},$prototype:{onRequest:function(e){/[\/\\]custom[\/\\]/.test(e.url)&&(e.url+="?SITE="+this.__siteCode)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/requestManager/PlnextRequestManager.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.requestManager.PlnextRequestManager",$singleton:!0,$dependencies:["aria.modules.RequestMgr","plnextv2.utils.requestManager.PlnextUrlService","plnextv2.utils.requestManager.RequestFilter","plnextv2.utils.requestManager.APFXMLRequestHandler","plnextv2.utils.requestManager.RequestFilter","plnextv2.utils.DeviceUtils","plnextv2.utils.context.AppContext","plnextv2.utils.UrlUtils","aria.utils.QueryString","plnextv2.utils.requestManager.Sender","plnextv2.utils.requestManager.Constants","plnextv2.utils.requestManager.TimeoutManager","plnextv2.utils.widgets.plnextLib.navigationManager.PlnextNavigationManager"],$constructor:function(){this._urlUtil=plnextv2.utils.UrlUtils,this.__sessionId=null,this.__httpActionOnly=new Array,this.__params={},this.__appParams={},this.deviceUtils=plnextv2.utils.DeviceUtils,this._sender=plnextv2.utils.requestManager.Sender,this._appContext=plnextv2.utils.context.AppContext,this._queryString=aria.utils.QueryString,this._requestFilter=plnextv2.utils.requestManager.RequestFilter,this._constants=plnextv2.utils.requestManager.Constants},$statics:{PAGE_TICKET:"PAGE_TICKET"},$prototype:{init:function(e){this.setSessionId(e.sessionId),plnextv2.utils.requestManager.TimeoutManager.init(e)},_sendRequest:function(e,t){this._requestFilter.doFilter(e),plnextv2.utils.requestManager.TimeoutManager.requestInProgress=!0,e.data=e.data||{};var i=e.action;i||(i=this._urlUtil.extractAction(e.url));var n=null;if(e.clearSession||(n=this.__sessionId),!e.clearData){var r=this._appContext.getPageData().pageTicket;null!=r&&(e.keepPreviousPageTicket&&r>0&&(r-=1),aria.utils.Json.setValue(e.data,this.PAGE_TICKET,r))}var s=this._urlUtil.getBaseUrl(),a=aria.utils.Path.resolve("config.links.SSL_OVERRIDE",this._appContext.getAppData());e.navigate&&a&&!e.isHTTP&&(e.isHTTP=!0),a&&e.isHTTP&&"http"===s.split(":")[0]&&(s=s.replace("http","https"));var o=new plnextv2.utils.requestManager.PlnextUrlService({sessionId:n,method:e.method,isExternalUrl:e.isExternalUrl,isHTTP:e.isHTTP,baseRequestPath:s,requestData:e.data});e.isOverride&&(o.setOverrideService(!0),aria.utils.Json.inject(aria.utils.Json.removeMetadata(e.overrideParams),e.data,!0)),this._sender.send({action:i,type:t,requestObject:e,urlService:o,config:{listHTTPActions:this.__httpActionOnly,params:this.__params},callback:{fn:this.__ajaxCallbackWrapper,scope:this,args:[e.navigate,t,e.callback]}})},__ajaxCallbackWrapper:function(e,t,i){return{fn:function(n){if(plnextv2.utils.requestManager.TimeoutManager.requestInProgress=!1,!e&&aria.utils.Path.describe(n,"response.data.pageTicket")){var r=n.response.data.pageTicket;this._appContext.getPageData().pageTicket=r,plnextv2.utils.widgets.plnextLib.navigationManager.PlnextNavigationManager.updatePageTicket(r)}e&&plnextv2.utils.widgets.plnextLib.navigationManager.PlnextNavigationManager.resetHydrated(),t===this._constants.PLNEXT_AJAX&&jQuery(document.body).trigger("plenxtv2:plnextAjax:end",n.response.data),i&&i.fn.apply(i.scope,[n,i.args]),plnextv2.utils.requestManager.TimeoutManager.resetSessionStart(),e||plnextv2.utils.widgets.plnextLib.navigationManager.PlnextNavigationManager.snapshot()},scope:this}},sendJSON:function(e){this._sendRequest(e,this._constants.JSON)},ajaxCall:function(e){this._sendRequest(e,this._constants.AJAX)},sendAjax:function(e){this._sendRequest(e,this._constants.PLNEXT_AJAX)},addHTTPActionOnly:function(e){this.__httpActionOnly.push(e)},removeHTTPActionOnly:function(e){var t=this.__httpActionOnly.indexOf(e);this.__httpActionOnly.splice(t,1)},clearHTTPActionsOnly:function(){this.__httpActionOnly.clear()},addParams:function(e){aria.utils.Json.inject(e,this.__params,!0)},addParam:function(e){aria.utils.Json.inject(e,this.__params,!0)},removeParams:function(e){for(var t=0;t<e.length;t++)delete this.__params[e[t]]},removeParam:function(e){delete this.__params[e]},clearParams:function(){this.__params={}},setSessionId:function(e){this.__sessionId=e},getSessionId:function(){return this.__sessionId}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/requestManager/PlnextUrlService.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.requestManager.PlnextUrlService",$implements:["aria.modules.urlService.IUrlService"],$dependencies:["plnextv2.utils.UrlUtils","plnextv2.utils.widgets.plnextLib.navigationManager.PlnextNavigationManager"],$constructor:function(e){this.actionUrlPattern="[actionName][sessionId]",this.ajaxActionUrlPattern="AjaxCall.action[sessionId]?UID=[uid]&UI_ACTION=[actionName]",this.overrideUrlPattern="Override.action[sessionId]?EMBEDDED_TRANSACTION=[actionName]",this.externalUrlPattern="[actionName]?JSESSIONID=[sessionId]",this._sessionId=e.sessionId,this._isPlnextAjax=e.isPlnextAjax,this._isOverride=e.isOverride,this._isExternalUrl=e.isExternalUrl,this._isHTTP=e.isHTTP,this._uid=e.uid,this._method=e.method||"POST",this._baseRequestPath=e.baseRequestPath||"",this._requestData=e.requestData||{},this._urlUtils=plnextv2.utils.UrlUtils,this._navigationManager=plnextv2.utils.widgets.plnextLib.navigationManager.PlnextNavigationManager},$destructor:function(){},$prototype:{isCookieBasedSession:function(){return!1},createActionUrl:function(e,t,i){var n=t,r=!0;if(this._urlUtils.isAbsoluteUrl(n)){if(this._isExternalUrl){var i=this._sessionId;this.isCookieBasedSession()&&(i=""),n=this.externalUrlPattern.replace(/\[sessionId\]/g,i).replace(/\[actionName\]/g,n)}}else{r=!1,n=this._urlUtils.extractAction(t);var n=this.actionUrlPattern;if(this._isOverride?(n=this.overrideUrlPattern,t=t.substring(0,t.indexOf("."))):this._isPlnextAjax&&(n=this.ajaxActionUrlPattern),n=n.replace(/\[actionName\]/g,t||"").replace(/\[uid\]/g,this._uid),n=this._sessionId&&!this.isCookieBasedSession()?n.replace(/\[sessionId\]/g,";jsessionid="+this._sessionId):n.replace(/\[sessionId\]/g,""),this._isHTTP&&this._navigationManager.isRouterAvailable()){var s=plnextv2.utils.widgets.plnextLib.navigationManager.PlnextNavigationManager;n+="?"+s.getSerializedSearchData()}n=this._baseRequestPath+n}return{url:n,method:this._method,isAbsoluteUrl:r}},createServiceUrl:function(e,t,i){return t&&t.actionName?this.createActionUrl(e,t.actionName,i):this.createActionUrl(e,null,i)},createI18nUrl:function(e,t,i){var n=this.i18nUrlPattern;return n=n.replace(/\$\{sessionId\}/g,t||""),n=n.replace(/\$\{locale\}/g,i||"")},setPlnextAjaxService:function(e,t){this._isPlnextAjax=e,this._uid=t},setOverrideService:function(e){this._isOverride=e},setMethod:function(e){this._method=e}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/requestManager/RTLResourcesFilter.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.requestManager.RTLResourcesFilter",$extends:"aria.core.IOFilter",$constructor:function(){},$prototype:{onRequest:function(e){var t=aria.utils.Array.indexOf(e.url,".css");/\/plnextv2\/.*\.css$/.test(e.url)&&(e.url=e.url.substring(0,t)+"_rtl.css")}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/requestManager/RequestFilter.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.requestManager.RequestFilter",$singleton:!0,$dependencies:["plnextv2.utils.requestManager.PlnextUrlService","plnextv2.utils.requestManager.APFXMLRequestHandler","plnextv2.utils.DeviceUtils","plnextv2.utils.context.AppContext","plnextv2.utils.UrlUtils","aria.utils.QueryString"],$constructor:function(){this.__filters={},this._urlUtils=plnextv2.utils.UrlUtils,this._typeUtils=aria.utils.Type},$statics:{ACTION_EXTENSION:".action"},$destructor:function(){},$prototype:{doFilter:function(e){var t=this._urlUtils.extractAction(e.url),i=this._retrieveFilter(t);if(i){var n=i.action||t,r=e.data,s=i.filterData;e.data=s(r),n.indexOf(this.ACTION_EXTENSION)<0&&(n+=this.ACTION_EXTENSION),e.url=n}},_retrieveFilter:function(e){var t=this.__getFilterKey(e,plnextv2.utils.context.AppContext.getPageId()),i=this.__filters[t]||this.__filters[t.replace(this.ACTION_EXTENSION,"")]||this.__filters[e]||this.__filters[e.replace(this.ACTION_EXTENSION,"")];return i},addActionFilters:function(e){var t=this.__normalizeFilters(e);aria.utils.Json.inject(t,this.__filters,!0)},removeActionFilter:function(e,t){var i=this.__getFilterKey(e,t);delete this.__filters[i]},removeAllActionFilters:function(e){if(null==e)this.__filters={};else if(this._typeUtils.isObject(e)){var t=this.__getFilterKey(e.action,e.context),i=[];for(item in this.__filters)item.indexOf(t)>=0&&i.push(item);for(var n=i.length,r=0;n>r;r++)delete this.__filters[i[r]]}},__normalizeSingleFilter:function(e,t){var i=this.__getFilterKey(e.action,e.context);t[i]={},t[i].action=e.newAction,t[i].filterData=e.filterData},__normalizeFilters:function(e){var t={};if(this._typeUtils.isArray(e))for(var i=e.length,n=0;i>n;n++)this.__normalizeSingleFilter(e[n],t);else this.__normalizeSingleFilter(e,t);return t},__getFilterKey:function(e,t){var i=t?t+"::":"",n=e||"";return i+n.replace(this.ACTION_EXTENSION,"")}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/requestManager/Sender.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.requestManager.Sender",$singleton:!0,$dependencies:["plnextv2.utils.requestManager.PlnextUrlService","plnextv2.utils.requestManager.APFXMLRequestHandler","plnextv2.utils.widgets.plnextLib.navigationManager.PlnextNavigationManager","plnextv2.utils.DeviceUtils","plnextv2.utils.context.AppContext","plnextv2.utils.NativeAppCommunicationWrapper","plnextv2.utils.UrlUtils","aria.utils.QueryString","plnextv2.utils.CustomAriaUtils","plnextv2.utils.requestManager.Constants","aria.utils.Json","aria.utils.Object"],$statics:{DISTIL_TOKEN_HEADER:"X-D-Token"},$constructor:function(){this.urlUtils=plnextv2.utils.UrlUtils,this.queryString=aria.utils.QueryString,this.constants=plnextv2.utils.requestManager.Constants,this.ariaUtils=plnextv2.utils.CustomAriaUtils,this.Object=aria.utils.Object,this._nativeAppCommunicationWrapper=plnextv2.utils.NativeAppCommunicationWrapper},$destructor:function(){},$prototype:{send:function(e){var t=e.action,i=e.requestObject,n=e.urlService,r=e.config.listHTTPActions,s=e.config.params,a=e.callback,o=i.isHTTP===!0||aria.utils.Array.indexOf(r,t)>=0?this.constants.FULL_HTTP:e.type;i.data.HAS_STRUCTURED_INPUTS===!0&&(i.data=this._stringifyNestedObjects(i.data));var l=this._nativeAppCommunicationWrapper.getDistilToken();switch(l&&(document.cookie=this.DISTIL_TOKEN_HEADER+"="+l),o){case this.constants.FULL_HTTP:this.sendFullHTTP(i,n,s);break;case this.constants.PLNEXT_AJAX:this.sendPlnextAjax(i,n,s,a);break;case this.constants.JSON:this.sendJson(i,n,s,a);break;case this.constants.AJAX:this.sendGenericAjax(i,n,s,a)}},sendFullHTTP:function(e,t,i){var n=this.urlUtils.isAbsoluteUrl(e.url);e.data&&e.data.DATA_TYPE&&delete e.data.DATA_TYPE,(!n||e.isExternalUrl)&&(e.url=t.createActionUrl(null,e.url,null,e.isExternalUrl).url,aria.utils.Json.inject(plnextv2.utils.CustomAriaUtils.removeMetadata(i),e.data,!0)),plnextv2.utils.widgets.plnextLib.navigationManager.PlnextNavigationManager.unblock(),this.submitForm(e)},sendPlnextAjax:function(e,t,i,n){t.setPlnextAjaxService(!0,e.uid),jQuery(document.body).trigger("plenxtv2:plnextAjax:start"),this.sendJson(e,t,i,n)},sendJson:function(e,t,i,n){var r=this.urlUtils.extractAction(e.url),s={};this.Object.assign(s,i,e.data),e.url=r+"?"+jQuery.param(s,!0);var a={actionName:e.url,moduleName:"",urlService:t};aria.modules.RequestMgr.submitJsonRequest(a,e.data,n.fn.apply(n.scope,n.args)),t.$dispose()},_stringifyNestedObjects:function(e){for(var t=this.ariaUtils.cloneDeep(e),i=aria.utils.Json.keys(t),n=0;n<i.length;n++){var r=i[n],s=t[r];(!aria.utils.Object.isEmpty(s)||this._isObjectsArray(s))&&(t[r]=JSON.stringify(this.ariaUtils.removeMetadata(s)))}return t},_isObjectsArray:function(e){var t=!1;if(aria.utils.Type.isArray(e)){t=!0;for(var i=0;i<e.length;i++)t=t&&aria.utils.Type.isObject(e[i])}return t},sendGenericAjax:function(e,t,i,n){e.callback;e.callback=n(!1,e.callback),aria.core.IO.asyncRequest(e)},submitForm:function(e){if(aria.utils.Type.isHTMLElement(e)&&"form"==e.tagName)e.submit();else{var t=this.__buildForm(e);document.body.appendChild(t),t.submit()}},__buildForm:function(e){var t=document.createElement("form");t.action=e.url,t.method=e.method||"POST",e.target&&(t.target=e.target),"GET"==t.method.toUpperCase()&&aria.utils.Json.inject(this.queryString.parseQueryString(this.urlUtils.extractParamString(t.action)),e.data,!0);for(var i in e.data)if(e.data.hasOwnProperty(i)){var n=document.createElement("input");n.type="hidden",n.name=i,n.value=e.data[i],t.appendChild(n)}return t},__appendGlobalParams:function(e,t){return aria.modules.RequestMgr.__appendGlobalParams(e,this.__jsonParamToArray(t))},__jsonParamToArray:function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push({name:i,value:encodeURIComponent(e[i])});return t}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/requestManager/TimeoutManager.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.requestManager.TimeoutManager",$dependencies:["aria.core.Timer","plnextv2.utils.context.AppContext","aria.utils.Json"],$singleton:!0,$constructor:function(){this.requestInProgress=!1,this.__timeoutAlertEnabled=!1,this.__timeoutCallbackId=null,this.__timeoutAlert=null,this.__sessionTimeout=null,this.__sessionStart=null,this.__encryptionTimerCallbackId=null},$prototype:{init:function(e){var t=e.config.siteConfiguration.appData;this._startSessionTimeouts(t),this._startEncryptionTimeout(t)},_startSessionTimeouts:function(e){var t=e.config.timeout;aria.utils.Json.setValue(t,"timeOut",!1),this.__timeoutAlertEnabled=t.isTimeoutAlertEnabled,this.__timeoutAlert=t.timeoutAlert,this.__sessionTimeout=t.sessionTimeout,this.__sessionStart=(new Date).getTime(),this._startChrono()},_startChrono:function(){this.__timeoutAlertEnabled&&(this._stopChrono(),this.__timeoutCallbackId=aria.core.Timer.addCallback({fn:this._onTick,scope:this,delay:1e3}))},_stopChrono:function(){null!=this.__timeoutCallbackId&&(aria.core.Timer.cancelCallback(this.__timeoutCallbackId),this.__timeoutCallbackId=null)},_onTick:function(){var e=Math.round(((new Date).getTime()-this.__sessionStart)/1e3),t=plnextv2.utils.context.AppContext.getAppData().config.timeout,i=aria.utils.Json;!this.requestInProgress&&e>=this.__sessionTimeout?(this._stopChrono(),i.setValue(t,"timeLeft",0),i.setValue(t,"timeOutWarning",!1),i.setValue(t,"timeOut",t.sessionTimeoutDisplayed)):(!this.requestInProgress&&e>this.__sessionTimeout-this.__timeoutAlert&&i.setValue(t,"timeOutWarning",t.sessionTimeoutDisplayed),i.setValue(t,"timeLeft",this.__sessionTimeout-e),this._startChrono())},_startEncryptionTimeout:function(e){var t=aria.utils.Json,i=e.config.encryption;t.setValue(i,"timeout",!1);var n=this._getTimeToEncryptionTimeout(e);null!==n&&(n>1?this.__encryptionTimerCallbackId=aria.core.Timer.addCallback({fn:function(){t.setValue(i,"timeout",!0)},scope:this,delay:n}):t.setValue(i,"timeout",!0))},_getTimeToEncryptionTimeout:function(e){var t=e.config.encryption;return"encryptionTime"in t&&"encryptionTimeout"in t?1e3*t.encryptionTime-(new Date).getTime()+1e3*t.encryptionTimeout:null},resetSessionStart:function(){this.__sessionStart=(new Date).getTime(),aria.utils.Json.setValue(plnextv2.utils.context.AppContext.getAppData().config.timeout,"timeOut",!1)},_isFlowEncrypted:function(e){var t=e.config.encryption||{};return!!t.isEncrypted}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/search/FlightSearchUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.search.FlightSearchUtils",$singleton:!0,$constructor:function(){},$destructor:function(){},$statics:{},$prototype:{isAirShoppingNDCtoBeCalled:function(e,t,i,n){var r;return r=0==e?!1:0==t?"1"==i.displayType&&n>0&&!i.isContinueFromCalendar?!1:!0:1!=i.flexibleDatesSelected||i.isContinueFromCalendar?!0:!1},buildAirShoppingNDCDmIn:function(e,t){var i={};aria.utils.Json.setValue(i,"IS_STRUCTURED_XML","NO"),aria.utils.Json.setValue(i,"AirShoppingRQ_Document_MessageVersion","1.1.3"),aria.utils.Json.setValue(i,"AirShoppingRQ_Party_Sender_AgentUserSender_AgentUserID",e.userAgentId);var n=e.destinations[0];aria.utils.Json.setValue(i,"AirShoppingRQ_CoreQuery_OriginDestinations_OriginDestination1_Departure_AirportCode",n.beginLocation.locationCode),aria.utils.Json.setValue(i,"AirShoppingRQ_CoreQuery_OriginDestinations_OriginDestination1_Arrival_AirportCode",n.endLocation.locationCode),aria.utils.Json.setValue(i,"AirShoppingRQ_CoreQuery_OriginDestinations_OriginDestination1_Departure_Date",plnextv2.utils.DateUtils.formatDate(new Date(n.beginDate),"yyyy-MM-dd"));var r=e.destinations[1];if("O"!=e.tripType&&r){var s=r.beginDate?plnextv2.utils.DateUtils.formatDate(new Date(r.beginDate),"yyyy-MM-dd"):"";aria.utils.Json.setValue(i,"AirShoppingRQ_CoreQuery_OriginDestinations_OriginDestination2_Departure_AirportCode",r.beginLocation.locationCode),aria.utils.Json.setValue(i,"AirShoppingRQ_CoreQuery_OriginDestinations_OriginDestination2_Arrival_AirportCode",r.endLocation.locationCode),aria.utils.Json.setValue(i,"AirShoppingRQ_CoreQuery_OriginDestinations_OriginDestination2_Departure_Date",s)}for(var a=e.listTravellerTypeInfo,o={},l=1,c=0,d=0;d<a.length;d++){for(var p=a[d].travellerCode,_=a[d].travellersNumber,u=0;u<a[d].listTravellerTypeRequested.length;u++)a[d].listTravellerTypeRequested[u].hasInfant&&c++;"undefined"==typeof o[p]&&(aria.utils.Json.setValue(i,"AirShoppingRQ_Travelers_Traveler"+[l]+"_AnonymousTraveler_PTC",p),aria.utils.Json.setValue(i,"AirShoppingRQ_Travelers_Traveler"+[l]+"_AnonymousTraveler_PTC_-Quantity",_),l++),o[p]=_}c>0&&(aria.utils.Json.setValue(i,"AirShoppingRQ_Travelers_Traveler"+l+"_AnonymousTraveler_PTC","INF"),aria.utils.Json.setValue(i,"AirShoppingRQ_Travelers_Traveler"+l+"_AnonymousTraveler_PTC_-Quantity",c));var f;if(f=e.commercialFareFamilies?e.commercialFareFamilies[0].code:e.fareTypeFamily.code,aria.utils.Json.setValue(i,"AirShoppingRQ_Preferences_Preference1_FarePreferences_-PreferencesContext",f),t===!0||e.isContinueFromCalendar===!0){var m=1;m=this.addIncludeLocations(e.outboundConnectingPoints,1,!0,i,m),e.oneWaySelected||this.addIncludeLocations(e.inboundConnectingPoints,2,!0,i,m);var h=e.fareConversionCurrency;void 0!=h&&""!==h&&"0"!=h&&aria.utils.Json.setValue(i,"AirShoppingRQ_Parameters_CurrCodes_CurrCode1",h)}return i},addIncludeLocations:function(e,t,i,n,r){if("undefined"!=typeof e){for(var s=e.split(";"),a=r?r:1,o=0;o<s.length;o++){var l=s[o];""!==l&&(i===!0?(aria.utils.Json.setValue(n,"AirShoppingRQ_Preferences_Preference2_TransferPreferences_Connection_Codes_Code"+a,l.toUpperCase()),aria.utils.Json.setValue(n,"AirShoppingRQ_Preferences_Preference2_TransferPreferences_Connection_Codes_Code"+a+"_-PreferencesContext",t),a++):aria.utils.Json.setValue(n,"INCLUDE_LOCATION_"+t+"_"+a++,l.toUpperCase()))}return a}},addCurrencyConversionParams:function(e,t){void 0!=t&&""!==t&&"0"!==t&&(aria.utils.Json.setValue(e,"IS_PRICE_BY_INPUT_1","TRUE"),aria.utils.Json.setValue(e,"TYPE_OF_FARE_1",0),aria.utils.Json.setValue(e,"FARE_CONVERSION_1",t))},getAirShoppingNDCRequestObject:function(e){var t={url:"AirShopping.action",method:"GET",data:aria.utils.Json.removeMetadata(e),action:"AirShopping",isHTTP:!0};return t}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/searchManager/SearchManager.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.searchManager.SearchManager",$dependencies:["plnextv2.utils.storage.LocalStorageManager","plnextv2.utils.storage.SessionStorageManager","plnextv2.utils.context.AppContext"],$singleton:!0,$constructor:function(){this._localStorageManager=plnextv2.utils.storage.LocalStorageManager,this._maxLength=plnextv2.utils.context.AppContext._siteConfig.appData.config.previousSearchConfiguration.previousSearchListLength,this._expirationTimespan=plnextv2.utils.context.AppContext._siteConfig.appData.config.previousSearchConfiguration.previousSearchExpirationTimespan,this._activation=plnextv2.utils.context.AppContext._siteConfig.appData.config.previousSearchConfiguration.previousSearchActivation,this._searchHistory=[],this._currentSearch},$prototype:{_saveInLocalStorage:function(e){var t={};if(this._currentSearch=e,0!==this._maxLength&&e.isValidSearch){t.searchObj=e,t.expiryDate=(new Date).getTime()+24*this._expirationTimespan*60*60*1e3,t.hash=e.hash;for(var i in this._searchHistory)this._searchHistory[i].hash===e.hash&&this._searchHistory.splice(i,1);this._searchHistory.push(t),this._searchHistory&&this._searchHistory.length>this._maxLength&&this._searchHistory.splice(1,1)}this._localStorageManager.set("currentSearch",this._currentSearch,"PrevSearchManager"),this._localStorageManager.set("searchHistory",this._searchHistory,"PrevSearchManager")},_loadFromLocalStorage:function(){this._searchHistory=this._localStorageManager.get("searchHistory","PrevSearchManager")?this._localStorageManager.get("searchHistory","PrevSearchManager"):[],this._currentSearch=this._localStorageManager.get("currentSearch","PrevSearchManager"),this._sanitize()},_sanitize:function(){for(var e in this._searchHistory)if(this._searchHistory[e].expiryDate<=(new Date).getTime()&&this._searchHistory.splice(e,1),this._searchHistory[e]&&Date.parse(this._searchHistory[e].searchObj.destinations[0].beginDate)<(new Date).getTime()){var t=this._searchHistory[e].searchObj.destinations;for(var i in t)t.hasOwnProperty(i)&&(this._searchHistory[e].searchObj.destinations[i].beginDate="")}this._searchHistory&&this._searchHistory.length>this._maxLength&&this._searchHistory.splice(0,this._searchHistory.length-this._maxLength),this._localStorageManager.set("searchHistory",this._searchHistory,"PrevSearchManager")},_cleanAllSearches:function(){this._currentSearch=null,this._searchHistory.length=0,this._localStorageManager.remove("currentSearch","PrevSearchManager"),this._localStorageManager.remove("searchHistory","PrevSearchManager")},saveSearch:function(){if("ON"===this._activation){var e=plnextv2.utils.context.AppContext._siteConfig.appData.config.search;this._loadFromLocalStorage(),this._saveInLocalStorage(e)}else this._cleanAllSearches()},getPreviousSearches:function(){return"ON"===this._activation?0===this._searchHistory.length&&this._loadFromLocalStorage():this._cleanAllSearches(),this._searchHistory},getLastSearch:function(){return"ON"===this._activation?this._loadFromLocalStorage():this._cleanAllSearches(),this._currentSearch}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/storage/LocalStorageManager.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.storage.LocalStorageManager",$dependencies:["aria.storage.LocalStorage"],$extends:"plnextv2.utils.storage.StorageManager",$singleton:!0,$constructor:function(){this.$StorageManager.constructor.call(this,"aria.storage.LocalStorage")},$prototype:{}});
//*******************
//LOGICAL-PATH:plnextv2/utils/storage/SessionStorageManager.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.storage.SessionStorageManager",$dependencies:["aria.storage.SessionStorage"],$extends:"plnextv2.utils.storage.StorageManager",$singleton:!0,$constructor:function(){this.$StorageManager.constructor.call(this,"aria.storage.SessionStorage")},$prototype:{}});
//*******************
//LOGICAL-PATH:plnextv2/utils/storage/StorageManager.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.storage.StorageManager",$dependencies:["plnextv2.utils.context.AppContext","plnextv2.utils.CustomAriaUtils","plnextv2.utils.storage.StorageBeanCfg","aria.utils.Array"],$constructor:function(e){this._appContext=plnextv2.utils.context.AppContext,this._storageType=e,this._storage,this._init(),this._initStoredKeys()},$statics:{STORED_KEYS_KEY:"plnext:storage:storedKeys"},$prototype:{__normalizeArgsBean:function(e){try{aria.core.JsonValidator.normalize({json:e,beanName:"plnextv2.utils.storage.StorageBeanCfg.ContextArgs"},!0)}catch(t){this.$logInfo("plnextv2.utils.storage.StorageBeanCfg.ContextArgs not matched",id)}},_getNormalizedArgs:function(e,t){var i={};return"string"==typeof e?(i.key=e,i.context=t):"object"==typeof e&&(i=e),this.__normalizeArgsBean(i),i},_storedKeys:function(e){var t;return this._storage&&(t=this._storage.getItem(this.STORED_KEYS_KEY)||{},e)?t[e]:t},_initStoredKeys:function(){if(this._storage){var e=this._storage.getItem(this.STORED_KEYS_KEY);e||this._setStoredKeys({})}},_setContextStoredKeys:function(e,t){var i=this._storedKeys();i&&(aria.utils.Path.setValue(i,t,e),this._setStoredKeys(i))},_setStoredKeys:function(e){this._storage&&this._storage.setItem(this.STORED_KEYS_KEY,e)},_init:function(){var e=Aria.getClassInstance(this._storageType);this._isStorageEnabled(e)?this._storage=e:this.$logWarn("The storage is not available on this browser.")},_isStorageEnabled:function(e){try{return e.setItem("plnextStorageTest",0),e.removeItem("plnextStorageTest"),!0}catch(t){return!1}},_buildContextKey:function(e,t){return t+":"+e},_getContextKeys:function(e){var t=this._storedKeys(e)||[];return t},_setStoredKey:function(e,t){var i=this._storedKeys(t);i||(i=[]),aria.utils.Array.contains(i,e)||i.push(e),this._setContextStoredKeys(i,t)},_removeStoredKey:function(e,t){var i=this._storedKeys(t);i&&(aria.utils.Array.remove(i,e),this._setContextStoredKeys(i,t))},clearAll:function(){this._storage&&this._storage.clear()},clearContext:function(e){e=e||this._appContext.getPageId();var t=this._getContextKeys(e);if(t)for(var i=t.length,n=0;i>n;n++)this.remove(t[n],e)},get:function(e,t){var i=this._getNormalizedArgs(e,t);t=i.context||this._appContext.getPageId();var n;return this._storage&&(n=aria.utils.Json.load(this._storage.getItem(this._buildContextKey(i.key,t))),null!=n&&i.path&&(n=aria.utils.Path.resolve(i.path,n))),n},set:function(e,t,i){var n=this._getNormalizedArgs(e,i);i=n.context||this._appContext.getPageId();var r=plnextv2.utils.CustomAriaUtils.removeMetadata(t),s=r;if(n.path){if(s=this.get(n.key,i),!s)return;aria.utils.Path.setValue(s,n.path,r)}this._setStoredKey(n.key,i);var a=aria.utils.Json.convertToJsonString(s);this._storage&&this._storage.setItem(this._buildContextKey(n.key,i),a)},remove:function(e,t){var i=this._getNormalizedArgs(e,t);return t=i.context||this._appContext.getPageId(),i.path?void this.set(i,null):(this._removeStoredKey(i.key,t),void(this._storage&&this._storage.removeItem(this._buildContextKey(i.key,t))))},fill:function(e,t,i,n){var r=this._getNormalizedArgs(e,i);i=r.context||this._appContext.getPageId();var s=this.get(r,i);s&&this._recurse(t,s,n)},_recurse:function(e,t,i){for(var n in e)({}).hasOwnProperty.call(e,n)&&{}.hasOwnProperty.call(t,n)&&!aria.utils.Json.isMetadata(n)&&!aria.utils.Json.isMetadata(n)&&("object"==typeof e[n]&&"object"==typeof t[n]?this._recurse(e[n],t[n]):this._populate(e,t,n,i))},_populate:function(e,t,i,n){null==e[i]||null==t[i]||n&&aria.utils.Array.contains(n,i)||aria.utils.Json.setValue(e,i,t[i])},getAll:function(){var e={};if(this._storage){var t=this._storage.getItem(this.STORED_KEYS_KEY);e[this.STORED_KEYS_KEY]=t;for(var i in t)if(t.hasOwnProperty(i))for(var n=0;n<t[i].length;n++){var r=t[i][n],s=this._buildContextKey(r,i);e[s]=this.get(r,i)}}return e},setAll:function(e){for(var t in e)if(e.hasOwnProperty(t)&&t!=this.STORED_KEYS_KEY&&!/aria:/.test(t)){var i=t.split(":");this.set(i[1],e[t],i[0])}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/validators/AbstractDateValidator.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.validators.AbstractDateValidator",$extends:"aria.utils.validators.Validator",$constructor:function(e){this.$Validator.constructor.call(this,e)},$destructor:function(){this.$Validator.$destructor.call(this)},$prototype:{compare:function(e){var t=aria.utils.Date.removeTime(new Date(e)),i=aria.utils.Date.removeTime(new Date(Date.now()));return t.getTime()-i.getTime()},isValidDateObject:function(e){return e&&aria.utils.Type.isDate(e)?!isNaN(e.getTime()):!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/validators/DateInRanges.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.validators.DateInRanges",$extends:"plnextv2.utils.validators.AbstractDateValidator",$dependencies:["aria.utils.Date"],$constructor:function(e,t,i){i||(i=this.DEFAULT_LOCALIZED_MESSAGE),this.$AbstractDateValidator.constructor.call(this,i),this.__options=t,this.__rangeBefore=null,this.__rangeAfter=null,this.__when=null,this.__referenceDate=new Date(e),this.__configureParamsForValidation()},$destructor:function(){this.__options=null,this.__rangeBefore=null,this.__rangeAfter=null,this.__when=null,this.__referenceDate=null,this.$AbstractDateValidator.$destructor.call(this)},$statics:{DEFAULT_LOCALIZED_MESSAGE:"The value must be between two dates.",PAST:"PAST",FUTURE:"FUTURE",YEAR:"Y",MONTH:"M",DAY:"D"},$prototype:{validate:function(e){return"invalid"===e?this._validationFailed():null===e||void 0===e?this._validationSucceeded():this.__compare(e)?this._validationSucceeded():this._validationFailed()},__compare:function(e){return this.__isGreaterThanLowestDate(e)&&this.__isLowerThanGreatestDate(e)},__isGreaterThanLowestDate:function(e){var t=!1,i=this.__when===this.PAST?this.__rangeAfter:this.__rangeBefore,n=this.__createDate(i);return(aria.utils.Date.dayDifference(e,n)<0&&!i.useEqual||aria.utils.Date.dayDifference(e,n)<=0&&i.useEqual)&&(t=!0),t||null===i.value},__isLowerThanGreatestDate:function(e){var t=!1,i=this.__when===this.PAST?this.__rangeBefore:this.__rangeAfter,n=this.__createDate(i);return(aria.utils.Date.dayDifference(e,n)>0&&!i.useEqual||aria.utils.Date.dayDifference(e,n)>=0&&i.useEqual)&&(t=!0),t||null===i.value},__configureParamsForValidation:function(){var e=this.__options.split(":");this.__when=e[0].toUpperCase(),this.__rangeBefore=this.__createRange(e[1],/^(>)(=?)([0-9]+)([dmy])$/),this.__rangeAfter=this.__createRange(e[2],/^(<)(=?)([0-9]+)([dmy])$/)},__createRange:function(e,t){var i={useEqual:!1,value:null,unit:null};if("null"!==e){var n=t.exec(e);null!==n&&(i.useEqual="="===n[2],i.value=parseInt(n[3]),i.unit=n[4].toUpperCase())}return i},__createDate:function(e){var t=new Date(this.__referenceDate),i=this.__when===this.PAST?-1:1;if(null!==e.value)switch(e.unit){case this.YEAR:t.setFullYear(t.getFullYear()+i*e.value);break;case this.MONTH:t.setMonth(t.getMonth()+i*e.value);break;case this.DAY:t.setDate(t.getDate()+i*e.value)}return t}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/validators/DateSelectValidator.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.validators.DateSelectValidator",$extends:"plnextv2.utils.validators.AbstractDateValidator",$constructor:function(e){e||(e=this.DEFAULT_LOCALIZED_MESSAGE),this.$AbstractDateValidator.constructor.call(this,e)},$statics:{DEFAULT_LOCALIZED_MESSAGE:"Please provide a valid date."},$prototype:{validate:function(e){return"invalid"===e?this._validationFailed():null===e?this._validationSucceeded():this.isValidDateObject(e)?this._validationSucceeded():this._validationFailed()}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/validators/MinMaxNumber.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.validators.MinMaxNumber",$extends:"aria.utils.validators.Validator",$constructor:function(e,t,i){this.minValue=e,this.maxValue=t,(isNaN(parseInt(this.minValue,10))||isNaN(parseInt(this.maxValue,10)))&&this.$logError(this.MISSING_MIN_MAX_VALUES);var n=[this.minValue,this.maxValue];i=i?i:aria.utils.String.substitute(this.DEFAULT_LOCALIZED_MESSAGE,n),this.$Validator.constructor.call(this,i)},$destructor:function(){this.minValue=null,this.maxValue=null,this.$Validator.$destructor.call(this)},$statics:{DEFAULT_LOCALIZED_MESSAGE:"The value must be more than %1 and less than %2",MISSING_MIN_MAX_VALUES:"There was a problem loading the MinmaxValue validator, MIN and MAX values must be passed into the validators constructor."},$prototype:{validate:function(e){if(null==e||""===e)return this._validationSucceeded();if(isNaN(parseInt(e,10)))return this._validationFailed();var t=parseInt(e,10);return t<this.minValue||t>this.maxValue?this._validationFailed():this._validationSucceeded()}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/validators/NotFutureDate.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.validators.NotFutureDate",$extends:"plnextv2.utils.validators.AbstractDateValidator",$constructor:function(e){e||(e=this.DEFAULT_LOCALIZED_MESSAGE),this.$AbstractDateValidator.constructor.call(this,e)},$statics:{DEFAULT_LOCALIZED_MESSAGE:"The value must not be in the future."},$prototype:{validate:function(e){return null===e?this._validationSucceeded():this.compare(e)>0?this._validationFailed():this._validationSucceeded()}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/validators/NotPastDate.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.validators.NotPastDate",$extends:"plnextv2.utils.validators.AbstractDateValidator",$constructor:function(e){e||(e=this.DEFAULT_LOCALIZED_MESSAGE),this.$AbstractDateValidator.constructor.call(this,e)},$statics:{DEFAULT_LOCALIZED_MESSAGE:"The value must not be in the past."},$prototype:{validate:function(e){return null===e?this._validationSucceeded():this.compare(e)<0?this._validationFailed():this._validationSucceeded()}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/validators/ValueInList.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.validators.ValueInList",$extends:"aria.utils.validators.Validator",$dependencies:["aria.utils.Array"],$constructor:function(e,t){this.list=e,this.$Validator.constructor.call(this,t)},$destructor:function(){this.list=null,this.$Validator.$destructor.call(this)},$statics:{DEFAULT_LOCALIZED_MESSAGE:"The entry is not in the list."},$prototype:{validate:function(e){return null===e||void 0===e||this.compare(e)?this._validationSucceeded():this._validationFailed()},compare:function(e){return aria.utils.Array.contains(this.list,e)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/validators/ValueInListCountryCode.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.validators.ValueInListCountryCode",$extends:"plnextv2.utils.validators.ValueInList",$constructor:function(e,t){this.codeList=e,this.$ValueInList.constructor.call(this,e,t)},$prototype:{compare:function(e){for(var t=!1,i=this.codeList.length-1;i>=0;i--)if(this.codeList[i][0]===e){t=!0;break}return t}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/PlnextLib.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.PlnextLib",$singleton:!0,$extends:"aria.widgetLibs.WidgetLib",$prototype:{widgets:{Text:"plnextv2.utils.widgets.plnextLib.Text",TextArea:"plnextv2.utils.widgets.plnextLib.TextArea",Slider:"plnextv2.utils.widgets.plnextLib.slider.core.Slider",SliderDiscrete:"plnextv2.utils.widgets.plnextLib.sliderDiscrete.core.SliderDiscrete",AutocompleteWithSteps:"plnextv2.utils.widgets.plnextLib.autocompleteWithSteps.core.AutocompleteWithSteps",Button:"plnextv2.utils.widgets.plnextLib.button.core.Button",Switch:"plnextv2.utils.widgets.plnextLib.switchBtn.core.Switch",TeaserSwitch:"plnextv2.utils.widgets.plnextLib.teaserSwitch.core.TeaserSwitch",Tooltip:"plnextv2.utils.widgets.plnextLib.tooltip.core.CustomTooltip",AutocompleteBox:"plnextv2.utils.widgets.plnextLib.autocompleteBox.AutocompleteBox",SelectBox:"plnextv2.utils.widgets.plnextLib.selectBox.SelectBox",MultipleSelect:"plnextv2.utils.widgets.plnextLib.multipleSelect.MultipleSelect",Popover:"plnextv2.utils.widgets.plnextLib.popover.Popover",Dialog:"plnextv2.utils.widgets.plnextLib.dialog.core.Dialog",ModalDialog:"plnextv2.utils.widgets.plnextLib.modalDialog.core.ModalDialog",TripSummaryDialog:"plnextv2.utils.widgets.plnextLib.summaryDialog.core.TripSummaryDialog",Dropdown:"plnextv2.utils.widgets.plnextLib.dropdown.core.Dropdown",Message:"plnextv2.utils.widgets.plnextLib.message.core.Message",Stepper:"plnextv2.utils.widgets.plnextLib.stepper.core.Stepper",AXTextInput:"plnextv2.utils.widgets.plnextLib.AXTextInput.core.AXTextInput",OnOneLine:"plnextv2.utils.widgets.plnextLib.OnOneLine",HtmlTag:"plnextv2.utils.widgets.plnextLib.htmltag.core.HtmlTag",Template:"plnextv2.utils.widgets.plnextLib.template.core.PlnextTemplate",TabBar:"plnextv2.utils.widgets.plnextLib.tabBar.core.TabBar",Accordion:"plnextv2.utils.widgets.plnextLib.accordion.core.Accordion",ModalPopover:"plnextv2.utils.widgets.plnextLib.modalPopover.core.ModalPopover",Panel:"plnextv2.utils.widgets.plnextLib.panel.core.Panel",CollapsiblePanel:"plnextv2.utils.widgets.plnextLib.panel.core.CollapsiblePanel"}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/DropDown.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.DropDown",$dependencies:["aria.utils.Dom","aria.utils.Json","aria.popups.Popup","aria.html.Template","aria.templates.Layout","aria.utils.AriaWindow"],$constructor:function(e){this._cfg=e,this._popup=null,this._offset={top:1,bottom:0,left:0,right:0},this._inhibitAfterClose=!1,aria.utils.AriaWindow.$on({unloadWindow:this.$destructor,scope:this}),aria.templates.Layout.$on({viewportResized:this._onViewportResized,scope:this})},$statics:{ZINDEX:16777270},$destructor:function(){aria.utils.AriaWindow.$unregisterListeners(this),aria.templates.Layout.$unregisterListeners(this),this.close()},$prototype:{open:function(){var e=this._cfg,t=e.context.createSection({fn:this._contentWriter,scope:this});this._popup=new aria.popups.Popup,this._connectPopupEvents(),this._popup.open({section:t,domReference:e.domReference,keepSection:!1,preferredPositions:[{reference:"bottom left",popup:"top left"},{reference:"top left",popup:"bottom left"}],offset:this._offset,center:!1,closeOnMouseClick:!0,closeOnMouseScroll:!1,ignoreClicksOn:e.ignoreClicksOn}),this._popup.getDomElement().style.zIndex=this.ZINDEX},close:function(){this._popup&&this._popup.isOpen&&this._popup.close()},isOpen:function(){return this._popup?this._popup.isOpen:!1},_onViewportResized:function(){this.isOpen()&&(this._inhibitAfterClose=!0,this.close(),this._inhibitAfterClose=!1,this.open())},_contentWriter:Aria.empty,_connectPopupEvents:function(){this._popup.$addListeners({"*":{fn:this._onPopupEvent},scope:this})},_disconnectPopupEvents:function(){this._popup.$unregisterListeners(this)},_onPopupEvent:function(e){var t=this._cfg;this["_"+e.name]&&this["_"+e.name](),t[e.name]&&!this._inhibitAfterClose&&this.$callback(t[e.name],e)},_onAfterClose:function(){this._disconnectPopupEvents(),this._popup.$dispose()}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/LazyLoader.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.LazyLoader",$singleton:!0,$dependencies:["aria.utils.Json"],$statics:{LOADING:1,LOADED:2},$prototype:{_depMap:{},_status:{},_callbacks:{},register:function(e,t){this._depMap[e]=t,this._callbacks[e]=[]},load:function(e,t){var i=this._depMap[e];if(i){var n=this._status[e];if(n==this.LOADING)return void this._callbacks[e].push(t);if(n==this.LOADED)return void this.$callback(t);var r=aria.utils.Json.copy(i);this._callbacks[e].push(t),r.oncomplete={fn:this._executeCallbacks,scope:this,args:e,resIndex:-1},Aria.load(r)}},isLoaded:function(e){return this._status[e]==this.LOADED||!1},_executeCallbacks:function(e){this._status[e]=this.LOADED;for(var t=this._callbacks[e],i=0,n=t.length;n>i;i++)this.$callback(t[i]);this._callbacks[e]=[]}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/LightWidgetLib.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.LightWidgetLib",$extends:"aria.widgetLibs.WidgetLib",$singleton:!0,$prototype:{widgets:{TextInput:"plnextv2.utils.widgets.light.textinput.TextInputWithOnChange",DatePicker:"plnextv2.utils.widgets.light.datepicker.DatePicker",DateField:"plnextv2.utils.widgets.light.datefield.DateField",Autocomplete:"plnextv2.utils.widgets.light.autocomplete.Autocomplete",Calendar:"plnextv2.utils.widgets.light.calendar.Calendar"}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/autocomplete/AutoCompleteStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.autocomplete.AutoCompleteStyle",$extends:require("ariatemplates/templates/CSSTemplate.js"),$constructor:function(){this.$CSSTemplate.constructor.call(this)},$destructor:function(){this.$CSSTemplate.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n.autocompleteContainer {\nposition : relative;\nwidth : 200px;\npadding : 40px;\nbackground : #DFDFDF;\n}\n\n.autocompleteDropdown {\nposition : absolute;\nmax-height : 300px;\n}\n\n.autocomplete {\nwidth: 226px;\npadding: 2px;\n}\n\n::-webkit-input-placeholder {\ncolor: grey;\nfont-style: italic;\n}\n\n:-moz-placeholder {\ncolor: grey;\nfont-style: italic;\n}\n\n.bordersCorner {\nbackground: transparent url(",6),this.__$write(this.cssFolderPath,35),this.__$write("/img/dropdown.png) no-repeat scroll 0 0;\nfont-size: 1px;\n}\n.bordersVertical {\nbackground: transparent url(",35),this.__$write(this.cssFolderPath,39),this.__$write("/img/dropdown_v.png) repeat-x 0 0;\nfont-size: 1px;\n}\n.bordersHorizontal {\nbackground: transparent url(",39),this.__$write(this.cssFolderPath,43),this.__$write("/img/dropdown_h.png) repeat-y 0 0;\nfont-size: 1px;\n}\n.ac_topleft {\nwidth: 7px;\nheight: 7px;\nbackground-position: 0 0px;\n}\n.ac_topcenter {\nheight: 7px;\nbackground-position: 0 0px;\n}\n.ac_topright {\nwidth: 7px;\nheight: 7px;\nbackground-position: -7px 0px;\n}\n.ac_bottomleft {\nwidth: 7px;\nheight: 7px;\nbackground-position: 0 -7px;\n}\n.ac_bottomcenter {\nheight: 7px;\nbackground-position: 0 -7px;\n}\n.ac_bottomright {\nwidth: 7px;\nheight: 7px;\nbackground-position: -7px -7px;\n}\n.ac_left {\nwidth: 7px;\nbackground-position: 0px 0;\n}\n.ac_right {\nwidth: 7px;\nbackground-position: -7px 0;\n}\n.ac_middle {\nbackground-color: white;\n}\n.ac_content {\nposition: relative;\npadding: 0 0 0 0 !important;\nborder: 0 0 0 0 !important;\noverflow-x: hidden;\noverflow-y: auto;\n}\n\n.suggestion td {\npadding:0px;\nborder:none;\n}\n\n.selected {\nbackground-color: #CCC;\ncolor: #6E6E6E;\n}\n\n.suggestion .icon {\nvertical-align: top;\nfont-size: 1px;\nwidth: 16px;\nheight: 16px;\nbackground: url(",43),this.__$write(this.cssFolderPath,108),this.__$write("/img/airicons_16x16.png) no-repeat top left;\nwidth: 16px;\nheight: 16px;\ndisplay: inline-block;\nmargin: 0 1em 0 0;\npadding: 0;\n}\n.airTrain {\nbackground-position: -18px -0px;\n}\n\n.xLISTSelectedItem_dropdown {\nbackground-color: #FCAE06;\n}\n\n",108)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$csslibs={},e.__$prefix=!0},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/autocomplete/Autocomplete.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.autocomplete.Autocomplete",$extends:"plnextv2.utils.widgets.light.textinput.TextInputWithOnChange",$dependencies:["aria.utils.Dom","aria.utils.Event","aria.html.controllers.Suggestions","plnextv2.utils.widgets.light.LazyLoader","plnextv2.utils.widgets.light.autocomplete.AutocompleteCfgBeans","aria.utils.Json"],$constructor:function(e,t,i){e.on||(e.on={}),this._suggestionsOff=!1,this._caretDifferent=!1,this._jsonUtils=aria.utils.Json,this.$cfgBean="plnextv2.utils.widgets.light.autocomplete.AutocompleteCfgBeans.Properties",e.attributes=e.attributes||{},e.attributes.classList=e.attributes.classList?e.attributes.classList.concat(e.sclass):[e.sclass],e.attributes.autocomplete="off",this.$TextInputWithOnChange.constructor.call(this,e,t,i),this._keyCode=null,this._buffer="",this._dropdown=null,this.data={};var n=this.data;n.preselect="always"==e.preselect?0:-1,this._resetIdxs(),n.selectedIdx=null;var r=Aria.getClassInstance("aria.html.controllers.Suggestions");r.setResourcesHandler(e.resourcesHandler),this._highlightedIdxListener={fn:this._onHighlightChange,scope:this},this._selectedIdxListener={fn:this._onSelectionChange,scope:this},this._suggestionListener={fn:this._onSuggestionsChange,scope:this};var s=this._jsonUtils;s.addListener(n,"highlightedIdx",this._highlightedIdxListener),s.addListener(n,"selectedIdx",this._selectedIdxListener),s.addListener(r.data,"suggestions",this._suggestionListener),this.suggestionController=r,e.suggestionsTemplate=e.suggestionsTemplate||r._resourcesHandler.getDefaultTemplate(),plnextv2.utils.widgets.light.LazyLoader.register(this.$classpath,{classes:["plnextv2.utils.widgets.light.autocomplete.AutocompleteDropDown"],templates:[e.suggestionsTemplate]})},$destructor:function(){var e=this._jsonUtils,t=this.data;this._dropdown&&(this._dropdown.isOpen()?this._dropdown.close():this._onDropDownClose()),e.removeListener(t,"highlightedIdx",this._highlightedIdxListener),e.removeListener(t,"selectedIdx",this._selectedIdxListener),e.removeListener(this.suggestionController.data,"suggestions",this._suggestionListener),this.suggestionController.$dispose(),this.$TextInputWithOnChange.$destructor.call(this)},$prototype:{initWidget:function(){this.$TextInputWithOnChange.initWidget.call(this),this._cfg.lazy||plnextv2.utils.widgets.light.LazyLoader.load(this.$classpath)},_transform:function(e,t,i){var n=null;return"fromWidget"==i?(n=this._interpret(t),n&&this.onbind("value",n,t),this.$TextInputWithOnChange._transform.call(this,e,n,i)):t?(null!=t&&"object"==typeof t&&(t=null!=t?this._getLabelFromSuggestion(t):""),n=this.$TextInputWithOnChange._transform.call(this,e,t,i),t):""},_interpret:function(e){var t,i,n=null,r=this.data.selectedIdx,s=this.data.highlightedIdx,a=this.suggestionController.data.suggestions,o=this._bindingListeners;return o&&o.value&&(t=o.value,i=t.inside[t.to]),n=this._keyCode==aria.DomEvent.KC_ESCAPE?this._buffer:(r||0===r)&&r>=0?a[r]:a&&a.length>0&&s>=0?a[s]:i&&"object"==typeof i&&this._getLabelFromSuggestion(i)==e?i:e},onbind:function(e,t,i){null!=t&&"object"==typeof t&&(t=null!=t?this._getLabelFromSuggestion(t):""),this.$TextInputWithOnChange.onbind.call(this,e,t,i)},_onHighlightChange:function(e){var t=e.newValue;if(t>=0){var i=this.data.items[t].label;this._domElt.value=i}},_onSelectionChange:function(e){this._suggestionsOff=!0;var t=e.newValue;if(t>=0){var i=this.data.items[t].label;this._domElt.value=i}},_onkeydown:function(e){this._keyCode=e.keyCode;var t=this._keyCode,i=aria.DomEvent,n=this._jsonUtils,r=this.data,s=this._dropdown&&this._dropdown.isOpen();if(t!=i.KC_UP&&(t!=i.KC_DOWN||!s)&&t!=i.KC_ESCAPE){this._buffer=this._domElt.value,this._suggestionsOff=!1;var a=aria.utils.Caret.getPosition(this._domElt);this._caretDifferent=a.start!=a.end}if(t==i.KC_DOWN)if(e.preventDefault(),s){this._suggestionsOff=!0;var o=r.highlightedIdx,l=r.items.length-1;null!=o&&o>=0&&l>o?(r.oldHighlightedIdx=o,n.setValue(r,"highlightedIdx",o+1)):-1==o&&(r.oldHighlightedIdx=0,n.setValue(r,"highlightedIdx",0))}else this.data.textValue=this._buffer,this.suggestionController.suggestValue(this._buffer);else if(t==i.KC_UP){if(e.preventDefault(),s){this._suggestionsOff=!0;var o=r.highlightedIdx;o>0&&(r.oldHighlightedIdx=o,n.setValue(r,"highlightedIdx",o-1))}}else t==i.KC_ENTER||t==i.KC_TAB?s?(r.highlightedIdx>=0&&n.setValue(r,"selectedIdx",r.highlightedIdx),this._reportValueToDataModel(),this._dropdown.close(),t==i.KC_ENTER&&e.preventDefault()):t==i.KC_ENTER&&this._reportValueToDataModel():t==i.KC_ESCAPE&&s&&(this._dropdown.close(),n.setValue(r,"selectedIdx",-1),n.setValue(r,"highlightedIdx",-1),this._reportValueToDataModel());return!0},_reportValueToDataModel:function(){var e,t=this._bindingListeners,i=this._transform(void 0,this._domElt.value,"fromWidget");t&&t.value&&(e=t.value,this._jsonUtils.setValue(e.inside,e.to,i,e.cb))},_ontype:function(){var e=this._domElt.value,t=aria.DomEvent,i=aria.core.Browser;(!this._suggestionsOff&&this._keyCode!=t.KC_ESCAPE&&this._keyCode!=t.KC_TAB&&(e!=this._buffer||this._caretDifferent)||i.isAndroid&&i.isChrome)&&(this.data.textValue=e,this.suggestionController.suggestValue(e),this._buffer=e)},_onCutOrPaste:function(e){0===e.keyCode&&(this._onkeydown({keyCode:0}),aria.core.Timer.addCallback({fn:this._ontype,scope:this,delay:10}))},_onSuggestionsChange:function(){var e=plnextv2.utils.widgets.light;if(e.LazyLoader.isLoaded(this.$classpath)){var t=this.suggestionController.data.suggestions;this._dropdown||(this._dropdown=new e.autocomplete.AutocompleteDropDown(this._getDropDownConfig()));var i=this._dropdown;t&&0!==t.length?i.isOpen()?i.refresh():(this._resetIdxs(),i.open()):i.isOpen()&&i.close()}else e.LazyLoader.load(this.$classpath,{fn:this._onSuggestionsChange,scope:this})},_getDropDownConfig:function(){return{data:this.data,context:this._context,controller:this.suggestionController,template:this._cfg.suggestionsTemplate,domReference:this._domElt,lineNumber:this._lineNumber,onAfterClose:{fn:this._onDropDownClose,scope:this},sclass:this._cfg.sclass||"std"}},_registerListeners:function(e){this.$TextInputWithOnChange._registerListeners.call(this,e);for(var t=e.on,i=["keydown","paste","cut","type"],n=["_onkeydown","_onCutOrPaste","_onCutOrPaste","_ontype"],r=0,s=i.length;s>r;r++){var a=i[r];this._chainListener(t,a,{fn:this[n[r]],scope:this})}},_getLabelFromSuggestion:function(e){return this.suggestionController._resourcesHandler.suggestionToLabel(e)},_onDropDownClose:function(){this._dropdown.$dispose(),this._dropdown=null},_resetIdxs:function(){var e=this.data;e.selectedIdx=null,delete e.oldHighlightedIdx,0===e.preselect?e.highlightedIdx=0:-1==e.preselect&&(e.highlightedIdx=-1)}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/autocomplete/AutocompleteDropDown.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.autocomplete.AutocompleteDropDown",$extends:"plnextv2.utils.widgets.light.DropDown",$dependencies:["aria.utils.Dom","aria.utils.Json","aria.popups.Popup","aria.html.Template"],$constructor:function(e){this.$DropDown.constructor.call(this,e),this.data=e.data,this._popupStatusListener={fn:this._onpopupStatusChange,scope:this},aria.utils.Json.addListener(this.data,"popupOpen",this._popupStatusListener),this._templateInstance=null,this._sclass=e.sclass},$destructor:function(){aria.utils.Json.removeListener(this.data,"popupOpen",this._popupStatusListener),this.data=null,this._popupStatusListener=null,this.$DropDown.$destructor.call(this)},$prototype:{_onpopupStatusChange:function(e){e.newValue||this.close()},open:function(){this.$DropDown.open.call(this),aria.utils.Json.setValue(this.data,"popupOpen",!0)},_onAfterClose:function(){aria.utils.Json.setValue(this.data,"popupOpen",!1,this._popupStatusListener),this.$DropDown._onAfterClose.call(this)},_contentWriter:function(e){this._prepareDataForTemplate();var t={classpath:this._cfg.template,data:this.data,attributes:{style:"display: inline-block; height: 10px; overflow: visible",classList:[this._sclass+"acListContainer"]}},i=new aria.html.Template(t,this._cfg.context,this._cfg.lineNumber);e.registerBehavior(i),i.writeMarkup(e),this._templateInstance=i},refresh:function(){this._prepareDataForTemplate(),this._templateInstance.subTplCtxt.$refresh()},_prepareDataForTemplate:function(){var e=this._cfg,t=e.controller.data,i=this._prepareSuggestionsAndMatch(t.suggestions,this.data.textValue),n=this._mergeItemsAndSelectionInfo(t.newsuggestions,t.suggestions,i),r={};r.cssClassItem="xACItem",r.cssClassEnabled="xACEnabledItem",r.cssClassSelected="xACSelectedItem",r.cssClassDisabled="xACDisabledItem",r.cssClassMouseover="xACMouseOverItem",r.cssClassFooter="xACFooter",this.data.items=n.items,this.data.skin=r,this.data.selectedIdx=null},_prepareSuggestionsAndMatch:function(e,t){var i,n=-1;this._cfg.controller.data.newsuggestions=[];for(var r,s=0,a=e.length;a>s;s+=1){i=e[s],-1==n&&i.exactMatch&&(n=s),r=this._getLabelFromSuggestion(i);var o={entry:t,label:r,value:i};this._cfg.controller.data.newsuggestions[s]=o}return n},_getLabelFromSuggestion:function(e){return this._cfg.controller._resourcesHandler.suggestionToLabel(e)},_mergeItemsAndSelectionInfo:function(e,t,i){var n,r=aria.utils.Array;i=void 0===n?i:n;var s=this._getTrueMaxSelectedCount(e),a=!0,o=e,l="label",c="value",d="disabled";aria.utils.Type.isArray(e)||(o=e.container,l=e.labelProperty,c=e.valueProperty,d=e.disabledProperty);for(var p=[],_=-1,u=0,h=0,f=o.length;f>h;h++){var m=o[h],g=t?r.contains(t,m[c])||i===h:!1;e[h].disabled&&(g=!1),g&&(s>u?(u++,null!=_&&(_=-1==_?h:null)):(a=!0,g=!1));var b=d?m[d]:!1;p[h]={index:h,label:m[l],value:m[c],object:m,selected:g,initiallyDisabled:b,currentlyDisabled:b}}if(u==s)for(var h=0,f=p.length;f>h;h++)p[h].selected||(p[h].currentlyDisabled=!0);return{items:p,pbMaxSelected:a,selectedIndex:_,selectedCount:u}},_getTrueMaxSelectedCount:function(e){var t=this._cfg.controller.data,i=t.multipleSelect?t.maxSelectedCount:1;return null==i&&(null==e&&(e=t.items),i=1+e.length),this.$assert(268,i>=1),i}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/autocomplete/AutocompleteTemplate.tpl
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/widgets/light/autocomplete/AutocompleteTemplateScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.autocomplete.AutocompleteTemplate",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$AutocompleteTemplateScript.constructor.call(this)},$destructor:function(){this.$AutocompleteTemplateScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write('\n<div class="autocomplete_container" id="autocomplete_container">\n',23),this.__$insertSection(24,{id:"Items",macro:"renderItemsList"}),this.__$write("\n</div>\n",28)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderItemsList:function(){try{with(this){var items=[data.items];this.__$write("\n<table\n",33),this.__$statementOnEvent("mouseup",this.$normCallback({fn:"itemClick"}),34),this.__$statementOnEvent("mouseover",this.$normCallback({fn:"itemMouseOver"}),35),this.__$write('\ncellpadding="0" cellspacing="0"\n>\n<tbody ',36),this.__$writeId("suggestionsRows",38),this.__$write(" >\n",38),itemIndex=0;for(var key in items)this.macro_renderGroup(key,items[key]);this.__$write("\n</tbody>\n</table>\n",43)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderItemsList",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderGroup:function(key,items){try{with(this)for(var x=0,l=items.length;l>x;x++){var key=0===x&&key,item=items[x];this.macro_renderItem(item,key)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderGroup",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderItem:function(item,key){try{with(this)this.__$write("\n<tr ",56),this.__$writeId("itemIdx"+itemIndex,56),this.__$write(' class="',56),this.__$write(_getClassForItem(itemIndex),56),this.__$write('" >\n<td>\n<div class="item" data-itemIdx="',56),this.__$write(itemIndex,58),this.__$write('">',58),this.__$write(item.label,58),this.__$write("</div>\n</td>\n</tr>\n",58),itemIndex+=1}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderItem",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},e.__$width={},e.__$height={},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.widgets.light.autocomplete.AutocompleteTemplateScript,e)},__$initTemplate:function(){try{with(this)this.itemIndex=0}catch(_ex){return this.$logError(this.EXCEPTION_IN_VARINIT,[this.$classpath],_ex),!1}return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/autocomplete/AutocompleteTemplateScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.widgets.light.autocomplete.AutocompleteTemplateScript",$constructor:function(){this._refContainer="suggestionsRows",this._itemShift=0,this.onKbNav={fn:this._onKeyboardNavigation,scope:this}},$destructor:function(){this.$json.removeListener(this.data,"highlightedIdx",this.onKbNav)},$prototype:{$dataReady:function(){if(void 0!==this.data.preselect){this.data.preselect}},$displayReady:function(){this.$json.addListener(this.data,"highlightedIdx",this.onKbNav)},itemClick:function(e){if(e.preventDefault(),e.stopPropagation(),this.data.popupOpen){var t=e.target.getData("itemIdx",!0);t&&(this.$json.setValue(this.data,"selectedIdx",this.data.highlightedIdx),this.$json.setValue(this.data,"popupOpen",!1))}},itemMouseOver:function(e){if(this.data.popupOpen){var t=e.target.getData("itemIdx",!0);if(t){var i=this.data.highlightedIdx,n=parseInt(t,10);this.data.oldHighlightedIdx=i,this.data.highlightedIdx=n,i>=0&&this.$getElementById("itemIdx"+i).classList.setClassName(this._getClassForItem(i)),this.$getElementById("itemIdx"+n).classList.setClassName(this._getClassForItem(n))}}},_getClassForItem:function(e){var t=[this.data.skin.cssClassItem];return e==this.data.highlightedIdx&&t.push(this.data.skin.cssClassSelected),t.push(this.data.disabled?this.data.skin.cssClassDisabled:this.data.skin.cssClassEnabled),t.join(" ")},_onKeyboardNavigation:function(e){var t=e.newValue;if(e.oldValue!=this.data.oldHighlightedIdx)var i=this.data.oldHighlightedIdx;else var i=e.oldValue;var n=t;this.data.highlightedIdx=n,void 0!==i&&this.$getElementById("itemIdx"+i).classList.setClassName(this._getClassForItem(i)),this.$getElementById("itemIdx"+n).classList.setClassName(this._getClassForItem(n)),this.$json.setValue(this.data,"highlightedIdx",n)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/calendar/Calendar.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.calendar.Calendar",$extends:"aria.html.Element",$dependencies:["plnextv2.utils.widgets.light.calendar.CalendarController","plnextv2.utils.widgets.light.calendar.CalendarCfgBeans","aria.html.Template","aria.utils.Object","aria.utils.Array"],$constructor:function(e){this.$cfgBean="plnextv2.utils.widgets.light.calendar.CalendarCfgBeans.Properties",this._registerListeners(e),e.attributes=e.attributes||{},e.attributes.tabindex=e.attributes.tabindex||0,this.$Element.constructor.apply(this,arguments);var t=this._cfg.sclass||"std";this._hasFocus=!1;var i=aria.utils.Object.keys(e),n=["on","attributes","id","bind","tagName","sclass"],s=aria.utils.Array;i=s.filter(i,function(e){return!s.contains(n,e)});var r=aria.utils.Json.copy(e,!0,i);r.focus=this._hasFocus,this._data={skin:{sclass:t,baseCSS:"xCalendar_"+t+"_"},settings:r},this._controller=new plnextv2.utils.widgets.light.calendar.CalendarController(this._data),this._controllerListener={fn:this._onControllerEvent,scope:this},this._controller.$addListeners({update:this._controllerListener,dateClick:this._controllerListener}),this._templateCfg={classpath:this._cfg.template,data:{dataModel:this._data,controller:this._controller}}},$destructor:function(){this._controller.$removeListeners({update:this._controllerListener,dateClick:this._controllerListener}),this._controllerListener=null,this._controller.$dispose(),this.$Element.$destructor.call(this)},$prototype:{writeMarkup:function(e){this.$Element.writeMarkupBegin.call(this,e);var t=new aria.html.Template(this._templateCfg,this._context,this._lineNumber);e.registerBehavior(t),t.writeMarkup(e),this.$Element.writeMarkupEnd.call(this,e)},writeMarkupBegin:function(){this.$logError(this.INVALID_USAGE,[this.$class,"container"])},writeMarkupEnd:Aria.empty,_transferToDataModel:function(e,t){var i=this._bindingListeners[e];if(i){var n=this._transform(i.transform,t,"fromWidget");aria.utils.Json.setValue(i.inside,i.to,n,i.cb)}},_onControllerEvent:function(e){if(!this._inOnBoundPropertyChange)if("update"==e.name)e.properties.startDate&&this._transferToDataModel("startDate",this._data.settings.startDate),e.properties.value&&(this._transferToDataModel("value",this._data.settings.value),this.evalCallback(this._cfg.onchange));else if("dateClick"==e.name){var t=this._cfg.on.click;if(t)for(var i=0,n=t.length;n>i;i++)this.evalCallback(t[i],e)}},onbind:function(e,t){this._inOnBoundPropertyChange=!0;try{"startDate"==e?this._controller.navigate({},{date:t}):"value"==e&&this._controller.selectDay({date:t})}finally{this._inOnBoundPropertyChange=!1}},_registerListeners:function(e){e.on=e.on||{};for(var t,i=e.on,n=["blur","keydown","focus"],s=0,r=n.length;r>s;s++)t=n[s],this._chainListener(i,t,{fn:this["_dom_on"+t],scope:this})},_dom_onkeydown:function(e){this.sendKey(e.charCode,e.keyCode)&&(e.preventDefault(!0),this._controller.focus())},_dom_onfocus:function(){this._hasFocus=!0},_dom_onblur:function(){this._hasFocus=!1},sendKey:function(e,t){var i=this._controller;return i?i.keyevent({charCode:e,keyCode:t}):!1},getDom:function(){return this._domElt},focus:function(){this._controller.focus()},setWidgetProperty:function(e,t){this._cfg[e]=t}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/calendar/CalendarController.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.calendar.CalendarController",$dependencies:["aria.utils.Date","aria.utils.environment.Date","aria.utils.Array","aria.utils.Json","plnextv2.utils.widgets.light.calendar.CalendarCfgBeans","plnextv2.utils.context.AppContext"],$statics:{EVENT_CLICK_DATE:"clickDate"},$events:{focusChanged:"",focus:"",update:"",dateClick:"",keyevent:""},$constructor:function(e){this.json=aria.utils.Json,this._changedSettings={value:{},minValue:{},maxValue:{},startDate:{},displayUnit:{},numberOfUnits:{},firstDayOfWeek:{},monthLabelFormat:{},dayOfWeekLabelFormat:{},dateLabelFormat:{},completeDateLabelFormat:{}},this._changedSettingsNbr=11,this.init(e)},$destructor:function(){this._jsonListener&&(this.json.removeListener(this._calendarSettings,null,this._jsonListener),this._jsonListener=null),this._calendarData=null,this._calendarSettings=null},$prototype:{_settingsProperties:{value:{isDate:!0},minValue:{isDate:!0},maxValue:{isDate:!0},startDate:{isDate:!0},displayUnit:{},numberOfUnits:{},firstDayOfWeek:{},monthLabelFormat:{},dayOfWeekLabelFormat:{},dateLabelFormat:{},completeDateLabelFormat:{}},_defaultKeyActions:{33:{increment:-1,incrementUnit:"M"},34:{increment:1,incrementUnit:"M"},35:{refDate:"maxValue"},36:{refDate:"minValue"},37:{increment:-1,incrementUnit:"D"},38:{increment:-7,incrementUnit:"D"},39:{increment:1,incrementUnit:"D"},40:{increment:7,incrementUnit:"D"}},_jsonDataChanged:function(e){var t=aria.utils.Date,i=e.dataName,n=this._settingsProperties[i];if(n){var s=this._changedSettings[i];null==s&&(s={oldValue:e.oldValue,newValue:e.newValue},this._changedSettingsNbr++),(s.oldValue===e.newValue||n.isDate&&t.isSameDay(s.oldValue,e.newValue))&&(s=null,this._changedSettingsNbr--),this._changedSettings[i]=s}},init:function(e,t){this._appContext=plnextv2.utils.context.AppContext,this._eventBus=this._appContext.getEventBus(),e||(e={}),e.calendar={},e.settings||(e.settings={});var i=e.settings;this._data=e,this._calendarSettings=i,this._calendarData=e.calendar,i.startDate||(i.startDate=new Date),i.completeDateLabelFormat||(i.completeDateLabelFormat=aria.utils.environment.Date.getDateFormats().longFormat),null==i.firstDayOfWeek&&(i.firstDayOfWeek=aria.utils.environment.Date.getFirstDayOfWeek()),aria.core.JsonValidator.normalize({json:this._calendarSettings,beanName:"plnextv2.utils.widgets.light.calendar.CalendarCfgBeans.Properties"}),this.update(),this._jsonListener={fn:this._jsonDataChanged,scope:this},this.json.addListener(i,null,this._jsonListener,!0),t&&this.$callback(t)},notifyFocusChanged:function(e){var t={name:"focusChanged",focus:e,cancelDefault:!1};return this.json.setValue(this._data.settings,"focus",e),this.$raiseEvent(t),t.cancelDefault},keyevent:function(e){var t={name:"keyevent",charCode:e.charCode,keyCode:e.keyCode,cancelDefault:!1},i=this._defaultKeyActions[t.keyCode];null!=i&&(t.cancelDefault=!0,this.json.inject(i,t,!1)),this.$raiseEvent(t);var n=this._transformDate(this._calendarSettings.value,t);return n&&this.selectDay({date:n}),t.cancelDefault===!0},getDatePosition:function(e){var t=aria.utils.Array,i=aria.utils.Date,n=this._calendarData,s=i.dayDifference(this._realStartDate,e),r=Math.floor(s/7);if(0>r||r>=n.weeks.length)return null;var a=n.weeks[r],o=s%7,l=a.days[o];this.$assert(228,i.isSameDay(e,l.jsDate));var c=null,d=null,p=n.months[l.monthKey];return null!=p&&(d=t.indexOf(n.months,p),this.$assert(239,p==n.months[d]),c=l.monthKey==a.month||l.monthKey==a.monthEnd?a.indexInMonth:0,this.$assert(245,p.weeks[c]==a)),{weekIndex:r,monthIndex:d,weekInMonthIndex:c,dayInWeekIndex:o,month:p,week:a,day:l}},dateClick:function(e){var t={name:"dateClick",date:e.date};this._data&&this.selectDay({date:t.date}),this.$raiseEvent(t),this.publishAnalyticsEvent(this.EVENT_CLICK_DATE,e)},publishAnalyticsEvent:function(e,t){this._eventBus.publish("analytics:event:"+e,this,t)},navigate:function(e,t){var i=aria.utils.Date;e&&e.preventDefault&&e.preventDefault();var n=this._calendarData.startDate,s=this._transformDate(n,t);null!=s&&(i.isSameDay(n,s)||i.isSameDay(this._calendarSettings.startDate,s)||(this.json.setValue(this._calendarSettings,"startDate",s),this.update()))},selectDay:function(e){var t=e.date;(!t||this._isSelectable(t))&&(this.json.setValue(this._calendarSettings,"value",t),this._ensureDateVisible(t),this.update())},_ensureDateVisible:function(e){var t=aria.utils.Date;if(e){var i=this._calendarData;(t.dayDifference(e,i.startDate)>0||t.dayDifference(e,i.endDate)<0||this._changedSettings.startDate)&&this.json.setValue(this._calendarSettings,"startDate",e)}},_getMonthKey:function(e){return[e.getMonth(),e.getFullYear()].join("-")},focus:function(){this.$raiseEvent({name:"focus"})},update:function(){var e=aria.utils.Date;if(0!==this._changedSettingsNbr){var t=this.json,i=this._changedSettings,n=this._calendarData,s=this._calendarSettings;if(i.minValue&&t.setValue(s,"minValue",e.removeTime(s.minValue)),i.maxValue&&t.setValue(s,"maxValue",e.removeTime(s.maxValue)),(i.value||i.minValue||i.maxValue)&&this._checkValue(),i.value&&1==this._changedSettingsNbr){var r=i.value,a=i.value.oldValue,o=s.value;if(a){var l=this.getDatePosition(a);l&&(l.day.isSelected=!1,r.oldValuePosition=l)}if(o){var c=this.getDatePosition(o);c&&(c.day.isSelected=!0,r.newValuePosition=c)}}else{(i.firstDayOfWeek||i.dayOfWeekLabelFormat)&&t.setValue(n,"daysOfWeek",this._createDaysOfWeek()),t.setValue(n,"today",new Date);var d,p,_,u=new Date(s.startDate);"W"==s.displayUnit?(u=e.getStartOfWeek(u,s.firstDayOfWeek),d=new Date(u.getFullYear(),u.getMonth(),1),d=e.getStartOfWeek(d,s.firstDayOfWeek),p=new Date(u.getTime()),p.setDate(p.getDate()+7*s.numberOfUnits-1),_=new Date(p.getTime()),_.setDate(32),_.setDate(1)):(u=new Date(u.getFullYear(),u.getMonth(),1),d=e.getStartOfWeek(u,s.firstDayOfWeek),p=new Date(u.getTime()),p.setMonth(p.getMonth()+s.numberOfUnits),p.setDate(p.getDate()-1),_=new Date(p.getTime()),_.setDate(_.getDate()+1));var h=[],f=[];this._createMonthsAndWeeks(d,_,h,f),t.setValue(n,"startDate",u),t.setValue(n,"endDate",p),t.setValue(n,"weeks",h),t.setValue(n,"months",f),t.setValue(n,"startMonthIndex",0),t.setValue(n,"endMonthIndex",f.length-1),t.setValue(n,"startWeekIndex",Math.floor(e.dayDifference(d,u)/7)),t.setValue(n,"endWeekIndex",Math.floor(e.dayDifference(d,p)/7)),this.$assert(128,n.endMonthIndex<f.length),this.$assert(129,n.endWeekIndex<h.length);var m=s.minValue,g=s.maxValue;t.setValue(n,"previousPageEnabled",!m||u>m),t.setValue(n,"nextPageEnabled",!g||g>p),this._realStartDate=d}var b=this._changedSettings,v=this._changedSettingsNbr;this._changedSettings={},this._changedSettingsNbr=0,this.$raiseEvent({name:"update",properties:b,propertiesNbr:v,propertyshowShortcuts:s.showShortcuts})}},_transformDate:function(e,t){var i;if(null!=t.increment)if(null==e&&(e=this._calendarSettings.startDate),i=new Date(e),"M"==t.incrementUnit){var n=i.getMonth();i.setMonth(n+t.increment),(24+n+t.increment)%12!=i.getMonth()&&i.setDate(0)}else i.setDate("D"==t.incrementUnit?i.getDate()+t.increment:i.getDate()+7*t.increment);else if(t.refDate){var s=t.refDate;"minValue"==s?this._calendarSettings.minValue&&(i=this._calendarSettings.minValue):"maxValue"==s&&this._calendarSettings.maxValue&&(i=this._calendarSettings.maxValue)}else t.date&&(i=new Date(t.date));return i},_createDaysOfWeek:function(){for(var e=aria.utils.Date,t=[],i=this._calendarSettings.dayOfWeekLabelFormat,n=e.getStartOfWeek(new Date,this._calendarSettings.firstDayOfWeek),s=0;7>s;s++)t.push({label:e.format(n,i),day:n.getDay()}),n.setDate(n.getDate()+1);return t},_createMonthsAndWeeks:function(e,t,i,n){for(var s=new Date(e.getTime()),r=1==s.getDate()?s.getMonth():null;t>s;){var a=this._createWeek(s);if(i.push(a),s.getMonth()!=r){if(null!=r){var o=this._createMonth(i,i.length-1);n.push(o),n[o.monthKey]=o}r=s.getMonth()}}},_createWeek:function(e){for(var t,i=aria.utils.Date,n=0,s=[],r={days:s,indexInMonth:1+Math.floor((e.getDate()-2)/7),weekNumber:i.dayOfWeekNbrSinceStartOfYear(e)},a=0;7>a;a++){var o=this._createDay(e);s.push(o),t?0===n&&t!=o.monthKey&&(n=a):t=o.monthKey,1==e.getDate()&&(r.monthStart=o.monthKey,o.isFirstOfMonth=!0),e.setDate(e.getDate()+1),1==e.getDate()&&(r.monthEnd=o.monthKey,o.isLastOfMonth=!0)}return r.overlappingDays=n,0===n&&(r.month=t),r},_isSelectable:function(e){var t=this._calendarSettings,i=t.minValue,n=t.maxValue;return(!i||e>=i)&&(!n||n>=e)},_checkValue:function(){var e=this._calendarSettings,t=e.value,i=e.minValue,n=e.maxValue,s=t;null!=t&&(i&&i>t&&(s=i),n&&t>n&&(s=n),s!=t&&(i>n&&(s=null),this.json.setValue(e,"value",s)))},_createDay:function(e){var t=aria.utils.Date,i=this._calendarSettings,n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),s=e.getDay(),r={jsDate:n,label:t.format(n,i.dateLabelFormat),monthKey:this._getMonthKey(e)};return(0===s||6===s)&&(r.isWeekend=!0),t.isSameDay(n,this._calendarData.today)&&(r.isToday=!0),t.isSameDay(n,i.value)&&(r.isSelected=!0),t.isSameDay(n,i.prevSelected)&&(r.isPrevSelected=!0),r.isSelectable=this._isSelectable(n),r},_createMonth:function(e,t){for(var i=aria.utils.Date,n=e[t],s=n.days[0].monthKey,r=[],a={monthKey:s,weeks:r},o=t;o>=0;o--){var l=e[o];if(r.unshift(l),l.monthStart==s)break}var c=r[0];this.$assert(260,c.monthStart==s);var d=c.days[c.overlappingDays].jsDate;return a.firstOfMonth=d,a.label=i.format(d,this._calendarSettings.monthLabelFormat),a.weeksInMonth=r.length,a.daysBeforeStartOfMonth=c.overlappingDays,a.daysAfterEndOfMonth=n.overlappingDays>0?7-n.overlappingDays:0,a.daysInMonth=7*r.length-a.daysBeforeStartOfMonth-a.daysAfterEndOfMonth,a.wholeWeeksInMonth=r.length-(c.overlappingDays>0?1:0)-(n.overlappingDays>0?1:0),a}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/calendar/CalendarTemplate.tpl
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/widgets/light/calendar/CalendarTemplateScript.js"),require("ariatemplates/utils/Type.js"),require("ariatemplates/utils/Date.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.calendar.CalendarTemplate",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$CalendarTemplateScript.constructor.call(this)},$destructor:function(){this.$CalendarTemplateScript.$destructor.call(this),this.$Template.$destructor.call(this)},$resources:{res:require("ariatemplates/$resources").file("ariatemplates/resources/CalendarRes")},$css:[require("plnextv2/utils/widgets/light/calendar/CalendarTemplateStyle.tpl.css")],$prototype:{macro_main:function(){try{with(this)"M"==settings.displayUnit&&this.macro_renderCalendar()}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderCalendar:function(){try{with(this){this.__$write('\n<div class="calendarBox" role="region">\n',38),settings.label&&(this.__$write('\n<div class="',40),this.__$write(skin.baseCSS,40),this.__$write('label">',40),this.__$write(settings.label,40),this.__$write("</div>\n",40));for(var startIndex=calendar.startMonthIndex,endIndex=calendar.endMonthIndex,index=startIndex;endIndex>=index;index++)this.__$write('\n<span style="display: inline-block; vertical-align: top; margin: 2px;">\n',43),this.macro_renderMonth(calendar.months[index],index==startIndex,index==endIndex),this.__$write("\n</span>\n",45);settings.showShortcuts&&(this.__$write('\n<div style="text-align: center; margin: 1px;">\n<a title="',48),this.__$write(this.$modifier("dateformat",[calendar.today,settings.completeDateLabelFormat]),49),this.__$write('" tabIndex="-1" href="javascript:;" ',49),this.__$statementOnEvent("click",this.$normCallback({fn:"navigate",scope:data.controller,args:{date:calendar.today}}),49),this.__$write(">",49),this.__$write(res.today,49),this.__$write("</a>\n",49),this.__$insertSection(50,{id:"selectedDay",macro:"selectedDay"}),this.__$write("\n</div>\n",54)),this.isDynamicWaiver()&&this.macro_renderDynamicWaiverLegend(),this.__$write("\n</div>\n",59)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderCalendar",__filename,this["aria:currentLineNumber"]],_ex)}},macro_selectedDay:function(){try{with(this)settings.value&&(this.__$write('\n&nbsp;|&nbsp; <a title="',64),this.__$write(this.$modifier("dateformat",[settings.value,settings.completeDateLabelFormat]),64),this.__$write('" tabIndex="-1" href="javascript:;" ',64),this.__$statementOnEvent("click",this.$normCallback({fn:"navigate",scope:data.controller,args:{date:settings.value}}),64),this.__$write(">",64),this.__$write(res.selectedDate,64),this.__$write("</a>\n",64))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["selectedDay",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderMonth:function(month,first,last){try{with(this){this.__$write("\n<table ",69),this.__$writeId("table_month_"+month.monthKey,69),this.__$write(' role="grid" aria-readonly="true" tabindex="0" aria-activedescendant="',69),this.__$write(getIdForDay(settings.value),69),this.__$write('" class="',69),this.__$write(skin.baseCSS,69),this.__$write('month" cellspacing="0" style="width: ',69),this.__$write(settings.showWeekNumbers?138:128,69),this.__$write('px;">\n<thead role="presentation">\n<tr>\n<th colspan="8" class="',69),this.__$write(skin.baseCSS,72),this.__$write('monthHeader">\n<div class="',72),this.__$write(skin.baseCSS,73),this.__$write('monthTitle" style="position: relative;">\n',73),!first||!calendar.previousPageEnabled&&settings.restrainedNavigation||(this.__$write('\n<div class="previousMonth" style="position: absolute; left: 0px; top: -2px; cursor: pointer;" ',75),this.__$statementOnEvent("click",this.$normCallback({fn:"navigate",args:{increment:-1,incrementUnit:"M"},scope:data.controller}),75),this.__$write('>\n<span class="icon-arrow-left" title="',75),this.__$write(settings.previousMonthLabel,76),this.__$write('" aria-hidden="true">\n</div>\n',76)),!last||!calendar.nextPageEnabled&&settings.restrainedNavigation||(this.__$write('\n<div class="nextMonth" style="position: absolute; right: 0px; top: -2px; cursor: pointer;" ',80),this.__$statementOnEvent("click",this.$normCallback({fn:"navigate",args:{increment:1,incrementUnit:"M"},scope:data.controller}),80),this.__$write('>\n<span class="icon-arrow-right" title="',80),this.__$write(settings.nextMonthLabel,81),this.__$write('" aria-hidden="true">\n</div>\n',81)),this.__$write('\n<span aria-hidden="true">',84),this.__$write(month.label,84),this.__$write("</span>\n</div>\n</th>\n</tr>\n<tr>\n",84),settings.showWeekNumbers&&(this.__$write('<th  class="',89),this.__$write(skin.baseCSS,89),this.__$write('weekNumber">&nbsp;</th>',89));var __v_1=calendar.daysOfWeek;void 0==calendar.daysOfWeek&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,90]);for(var day_ct=0,__v_2=__v_1.length,day_index=0;__v_2>day_index;day_index++){var day=__v_1[day_index];day_ct++,this.__$write('\n<th class="',91),this.__$write(skin.baseCSS,91),this.__$write('weekDaysLabel" aria-hidden="true">',91),this.__$write(day.label,91),this.__$write("</th>\n",91)}this.__$write('\n</tr>\n</thead>\n<tbody role="presentation" ',93),this.__$statementOnEvent("click",this.$normCallback(clickDay),95),this.__$write(" ",95),this.__$statementOnEvent("mouseover",this.$normCallback(mouseOverDay),95),this.__$write(" ",95),this.__$statementOnEvent("mouseout",this.$normCallback(mouseOutDay),95),this.__$write(" ",95),this.__$writeId("month_"+month.monthKey,95),this.__$write(">\n",95);var nbweeks=0,__v_3=month.weeks;void 0==month.weeks&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,97]);for(var week_ct=0,__v_4=__v_3.length,week_index=0;__v_4>week_index;week_index++){var week=__v_3[week_index];week_ct++,nbweeks+=1,this.__$write('\n<tr role="row">\n',99),settings.showWeekNumbers&&(this.__$write('<td class="',100),this.__$write(skin.baseCSS,100),this.__$write('weekNumber">',100),0==week.overlappingDays||week.monthEnd==month.monthKey?this.__$write(week.weekNumber,100):this.__$write("&nbsp;",100),this.__$write("</td>",100));var __v_5=week.days;void 0==week.days&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,101]);for(var day_ct=0,__v_6=__v_5.length,day_index=0;__v_6>day_index;day_index++){var day=__v_5[day_index];day_ct++,this.macro_renderDay(day,month)}this.__$write("\n</tr>\n",104)}this.__$write("\n</tbody>\n</table>\n",106)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderMonth",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderDay:function(day,month){try{with(this){var jsDate=day.jsDate;day.monthKey==month.monthKey?(this.__$write('\n<td  id="',113),this.__$write(getIdForDay(jsDate),113),this.__$write('" class="',113),this.__$write(getClassForDay(day),113),this.__$write('" role="gridcell" aria-selected= "',113),this.__$write(day.isSelected?!0:!1,113),this.__$write('" tabindex="-1" ',113),this.__$write(day.isSelectable?'data-timestamp="'+jsDate.getTime()+'"':"",113),this.__$write(' title="',113),this.__$write(this.getDayTitle(day,month),113),this.__$write('">\n\n',113),this.isDisruptedDay(day)||this.__$write(day.label,116),this.__$write("\n</td>\n",118)):this.__$write('\n<td aria-selected="false" aria-disabled="true" />\n',120)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderDay",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderDynamicWaiverLegend:function(){try{with(this)this.__$write('\n<div class="dynamic-waiver-legend clearfix" aria-hidden="true">\n<span class="disrupted-legend">\n<div class="',128),this.__$write(skin.baseCSS,130),this.__$write("day ",130),this.__$write(skin.baseCSS,130),this.__$write('disrupted icon icon-warning-sign" title="',130),this.__$write(this.getDisruptedDateLabel(),130),this.__$write('">\n</div>\n<div class="dynamic-waiver-legend-text">\n',130),this.__$write(this.getDisruptedDateLabel(),133),this.__$write('\n</div>\n</span>\n<span class="waived-legend">\n<div class="',134),this.__$write(skin.baseCSS,137),this.__$write("day ",137),this.__$write(skin.baseCSS,137),this.__$write('waived" title="',137),this.__$write(this.getNoPenaltyLabel(),137),this.__$write("&nbsp;\n",137),this.__$write(this.getOtherFeesLabel(),138),this.__$write('">\n\n&nbsp;\n</div>\n<div class="dynamic-waiver-legend-text">\n',138),this.__$write(this.getNoPenaltyLabel(),143),this.__$write("<br/>\n",143),this.__$write(this.getOtherFeesLabel(),144),this.__$write("\n</div>\n</span>\n</div>\n",145)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderDynamicWaiverLegend",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},e.__$width={},e.__$height={},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.widgets.light.calendar.CalendarTemplateScript,e)},__$initTemplate:function(){try{with(this)this.calendar=data.dataModel.calendar,this.settings=data.dataModel.settings,this.skin=data.dataModel.skin}catch(_ex){return this.$logError(this.EXCEPTION_IN_VARINIT,[this.$classpath],_ex),!1}return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/calendar/CalendarTemplateScript.js
//*******************
!function(){Aria.tplScriptDefinition({$classpath:"plnextv2.utils.widgets.light.calendar.CalendarTemplateScript",$dependencies:["plnextv2.utils.DateUtils","aria.utils.Array"],$constructor:function(){this._dateUtils=plnextv2.utils.DateUtils,this._arrayUtils=aria.utils.Array,this._controllerListener={fn:this._onControllerEvent,scope:this},this._listenerAdded=!1},$destructor:function(){this._listenerAdded&&this.data.controller.$unregisterListeners(this),this._controllerListener=null},$prototype:{$dataReady:function(){this.data.controller.$addListeners({"*":this._controllerListener,scope:this}),this._listenerAdded=!0},_onControllerEvent:function(e){if("update"===e.name){var t=e.properties.value;1==e.propertiesNbr&&t?(this.updateClass(t.oldValuePosition),this.updateClass(t.newValuePosition),this.updateActiveDescendant(t.newValuePosition),e.propertyshowShortcuts&&this.$refresh({section:"selectedDay"})):this.$refresh()}else"focus"===e.name&&this.focus()},focus:function(){var e=this.data.dataModel.settings.value;e||(e=this.data.dataModel.settings.startDate,this.data.controller.selectDay({date:this.data.dataModel.settings.startDate}));var t=this.data.controller.getDatePosition(e),i=this.$getElementById("table_month_"+t.month.monthKey);i.focus(),i.$dispose()},updateClass:function(e){if(null!=e&&null!=e.month){var t=this.$getChild("month_"+e.month.monthKey,e.weekInMonthIndex),i=t.getChild((this.settings.showWeekNumbers?1:0)+e.dayInWeekIndex);i.classList.setClassName(this.getClassForDay(e.day)),i.setAttribute("aria-selected",e.day.isSelected),i.$dispose(),t.$dispose()}},updateActiveDescendant:function(e){var t=this.$getElementById("table_month_"+e.month.monthKey);t.setAttribute("aria-activedescendant",this.getIdForDay(e.day.jsDate)),t.focus(),t.$dispose},clickDay:function(e){var t=e.target.getData("timestamp");if(t){var i=new Date(parseInt(t,10));this.data.controller.dateClick({date:i,isDisrupted:this.isDisruptedDay({jsDate:i}),isWaivable:this.isWaivedDay({jsDate:i})})}},getClassForDay:function(e){var t=[],i=this.skin.baseCSS;return t.push(i+"day"),t.push(i+"mouseOut"),e.isWeekend&&e.isSelectable&&t.push(i+"weekEnd"),e.isSelected&&t.push(i+"selected"),e.isToday&&t.push(i+"today"),e.isPrevSelected&&t.push(i+"prevSelected"),this.isWaivedDay(e)&&t.push(i+"waived"),this.isDisruptedDay(e)&&t.push(i+"disrupted icon icon-warning-sign"),t.push(e.isSelectable?i+"selectable":i+"unselectable"),t.join(" ")},getIdForDay:function(e){var t=this.skin.baseCSS;return e&&(t+=e.getTime()),t},mouseOverDay:function(e){var t=e.target.getData("timestamp");t&&e.target.classList.setClassName(e.target.classList.getClassName().replace(this.skin.baseCSS+"mouseOut",this.skin.baseCSS+"mouseOver"))},mouseOutDay:function(e){var t=e.target.getData("timestamp");t&&e.target.classList.setClassName(e.target.classList.getClassName().replace(this.skin.baseCSS+"mouseOver",this.skin.baseCSS+"mouseOut"))},isWaivedDay:function(e){if(e&&this.settings.dynamicWaiver&&this.settings.dynamicWaiver.waivedDates)for(var t=this.settings.dynamicWaiver.waivedDates,i=0;i<t.length;i++)if(this._dateUtils.isOnSameDay(t[i],e.jsDate))return!0;return!1},isDisruptedDay:function(e){if(e&&this.settings.dynamicWaiver&&this.settings.dynamicWaiver.disruptedDates)for(var t=this.settings.dynamicWaiver.disruptedDates,i=0;i<t.length;i++)if(this._dateUtils.isOnSameDay(t[i],e.jsDate))return!0;return!1},getDayTitle:function(e,t){var i=[];return e&&t&&(i.push(this._dateUtils.formatDateTimeScreenReader(e.jsDate,this._dateUtils.SCREEN_READER_FORMATS.DAY_NUMBER_MONTH_YEAR)),this.isDisruptedDay(e)&&i.push(this.getDisruptedDateLabel()),this.isWaivedDay(e)&&(i.push(this.getNoPenaltyLabel()),i.push(this.getOtherFeesLabel()))),i.join("\n")},isDynamicWaiver:function(){var e=this.settings.dynamicWaiver;return e&&(e.disruptedDates&&e.disruptedDates.length>0||e.waivedDates&&e.waivedDates.length>0)},getDisruptedDateLabel:function(){return this.settings.dynamicWaiver?this.settings.dynamicWaiver.disruptedDateLabel:""},getNoPenaltyLabel:function(){return this.settings.dynamicWaiver?this.settings.dynamicWaiver.noPenaltyLabel:""},getOtherFeesLabel:function(){return this.settings.dynamicWaiver?this.settings.dynamicWaiver.otherFeesLabel:""}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/calendar/CalendarTemplateStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.calendar.CalendarTemplateStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n.calendarBox{\nbackground-color: ",8),this.__$write(this.$white,9),this.__$write(";\nborder-color:",9),this.__$write(this.$grayLight,10),this.__$write(";\nbox-shadow: 3px 3px 2px ",10),this.__$write(this.$gray,11),this.__$write(";\nborder: 1px solid;\npadding: 3px;\nwidth: 760px;\n}\n\n.xCalendar_std_month {\nmargin: 0.5em 0.3em\n}\n\n.xCalendar_std_month:focus {\noutline: 5px auto -webkit-focus-ring-color;\noutline-offset: -2px;\n}\n\n.xCalendar_std_monthTitle {\ntext-align: center;\ncolor: ",11),this.__$write(this.$grayDarken,28),this.__$write(";\n}\n\n.xCalendar_std_monthHeader {\npadding-bottom: 1em;\n}\n\n.xCalendar_std_weekDaysLabel {\ncolor: ",28),this.__$write(this.$grayDarken,36),this.__$write(";\nfont-size: 1em;\nfont-weight: normal;\n}\n\n.xCalendar_std_day {\nmin-width: 2em;\nmin-height: 2em;\ntext-align: center;\npadding: 0.4em 0.6em;\nborder: 1px solid ",36),this.__$write(this.$white,46),this.__$write(";\n}\n\n.xCalendar_std_selectable{\nbackground-color: ",46),this.__$write(this.$grayLighter,50),this.__$write(";\n}\n\n.xCalendar_std_selectable.xCalendar_std_today{\nbackground-color: ",50),this.__$write(this.$gray,54),this.__$write(";\n}\n\n.xCalendar_std_selectable:hover {\nbackground-color: ",54),this.__$write(this.$blue,58),this.__$write(";\ncolor: ",58),this.__$write(this.$white,59),this.__$write(";\n}\n\n.xCalendar_std_unselectable{\ncolor: ",59),this.__$write(this.$grayLight,63),this.__$write(";\nbackground-color: ",63),this.__$write(this.$grayLighten,64),this.__$write(";\n}\n\n.xCalendar_std_selected, .xCalendar_std_selected.xCalendar_std_today{\nbackground-color: ",64),this.__$write(this.$blue,68),this.__$write(";\ncolor: ",68),this.__$write(this.$white,69),this.__$write(";\ntext-decoration:underline;\n}\n\n.xCalendar_std_selectable.xCalendar_std_prevSelected{\nbackground-color: ",69),this.__$write(this.$blueLight,74),this.__$write(";\ncolor: ",74),this.__$write(this.$grayLighten,75),this.__$write(";\n}\n\n.xCalendar_std_selectable.xCalendar_std_prevSelected:hover {\nbackground-color: ",75),this.__$write(this.$blue,79),this.__$write(";\ncolor: ",79),this.__$write(this.$white,80),this.__$write(";\n}\n\n.xTextInputInput {\nfont-size: smaller;\n}\n\n.date-input input {\nfont-size: 11pt;\n}\n.dropdown-icon{\nwidth: 5%;\n}\n\n.xCalendar_std_disrupted {\nbackground-color: ",80),this.__$write(this.$grayLighten,95),this.__$write(";\ncolor: ",95),this.__$write(this.$warning,96),this.__$write(";\n}\n\n.xCalendar_std_waived {\nbackground-position: 90% 10%;\nbackground-repeat: no-repeat;\nbackground-image: ",96),this.__$write(this.$urlForCss,102),this.__$write('("',102),this.__$write(this.$imageFolder,102),this.__$write('triangle_black.png");\nbackground-size: 10px 10px;\n}\n\n.xCalendar_std_waived.xCalendar_std_mouseOver,\n.xCalendar_std_waived.xCalendar_std_selected:not(.xCalendar_std_disrupted),\n.xCalendar_std_selectable.xCalendar_std_waived:hover{\nbackground-image: ',102),this.__$write(this.$urlForCss,109),this.__$write('("',109),this.__$write(this.$imageFolder,109),this.__$write('triangle_white.png");\n}\n\n.dynamic-waiver-legend {\nmargin: .5em;\nfont-size: 13px;\n}\n\n.dynamic-waiver-legend .xCalendar_std_day {\nheight: 2.5em;\nwidth: 2.5em;\n}\n\n.dynamic-waiver-legend div {\ndisplay: inline-block;\n}\n\n.dynamic-waiver-legend .dynamic-waiver-legend-text {\nline-height: 13px;\nvertical-align: middle;\nmargin-right: 1em;\n}\n\n.dynamic-waiver-legend .xCalendar_std_waived {\nbackground-color: ',109),this.__$write(this.$grayLighter,133),this.__$write(";\n}\n",133)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/datefield/DateField.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.datefield.DateField",$extends:"plnextv2.utils.widgets.light.textinput.TextInputWithOnChange",$dependencies:["aria.utils.Date","plnextv2.utils.widgets.light.datefield.DateFieldCfgBeans","plnextv2.utils.DateUtils"],$constructor:function(e,t,i){this.$cfgBean="plnextv2.utils.widgets.light.datefield.DateFieldCfgBeans.Properties",this._dateUtil=aria.utils.Date,this.$TextInputWithOnChange.constructor.call(this,e,t,i),this._cfg.pattern||(this._cfg.pattern=plnextv2.utils.DateUtils.FORMATS.SHORT_DATE_FORMAT_5)},$destructor:function(){this._dateUtil=null,this.$TextInputWithOnChange.$destructor.call(this)},$prototype:{_transform:function(e,t,i){var n=null;return"fromWidget"==i?(n=this._dateUtil.interpret(t,{inputPattern:plnextv2.utils.DateUtils.retrieveDateTimePattern(this._cfg.pattern)}),n&&(this._isValidDate(n)?this.onbind("value",plnextv2.utils.DateUtils.formatDateTime(n,this._cfg.pattern),t):n=null),this.$TextInputWithOnChange._transform.call(this,e,n,i)):t&&this._isValidDate(t)?(n=this.$TextInputWithOnChange._transform.call(this,e,t,i),t instanceof Date?plnextv2.utils.DateUtils.formatDateTime(t,this._cfg.pattern):""):""},_isValidDate:function(e){var t=this._cfg;return e?!0:t.minValue&&this._dateUtil.compare(e,t.minValue)<0?!1:t.maxValue&&this._dateUtil.compare(e,t.maxValue)>0?!1:!0},applyTextToData:function(){var e=this._bindingListeners.value,t=this._hasPlaceholder?"":this._domElt.value,i=this._transform(e.transform,t,"fromWidget");aria.utils.Json.setValue(e.inside,e.to,i,e.cb)}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/datepicker/DatePicker.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.datepicker.DatePicker",$extends:"aria.html.Element",$dependencies:["plnextv2.utils.widgets.light.LazyLoader","plnextv2.utils.widgets.light.datepicker.DatePickerCfgBeans","plnextv2.utils.widgets.light.datefield.DateField","aria.utils.Json","aria.DomEvent"],$statics:{INVALID_USAGE:"Widget %1 can only be used as a %2."},$css:["plnextv2.utils.widgets.light.datepicker.DatePickerStyle"],$constructor:function(e,t,i){this._i18n=plnextv2.utils.I18n,this._jsonUtil=aria.utils.Json,this.data={value:e.value||null,calendarValue:null,startDate:null,disabled:this._getDisabledStateFromCfg(e),oldValue:null},this._internalDataModelChange={fn:this._updateExternalDataModel,scope:this},this._jsonUtil.addListener(this.data,"value",this._internalDataModelChange),this.$cfgBean="plnextv2.utils.widgets.light.datepicker.DatePickerCfgBeans.Properties",this.inputId=e.id,e.id=this.inputId+"-datePicker",e.on=e.on||{},this._registerListeners(e),this.$Element.constructor.call(this,e,t,i),this._iconDomElt=null,this._dateField=new plnextv2.utils.widgets.light.datefield.DateField(this._getDateFieldConfig(),t,i),plnextv2.utils.widgets.light.LazyLoader.register(this.$classpath,{classes:["plnextv2.utils.widgets.light.datepicker.DatePickerDropDown"],templates:[e.calendar.template]})},$destructor:function(){this._dropdown&&this._dropdown.close(),this._dateField.$dispose(),this._jsonUtil.removeListener(this.data,"value",this._internalDataModelChange),this._internalDataModelChange=null,this.data=null,this._onDropDownCloseCallback=null,this._iconDomElt=null,this.$Element.$destructor.call(this)},$prototype:{writeMarkup:function(e){this.$Element.writeMarkupBegin.call(this,e),this._dateField.writeMarkup(e),this._writeIconMarkup(e),this.$Element.writeMarkupEnd.call(this,e)},writeMarkupBegin:function(){this.$logError(this.INVALID_USAGE,[this.$class,"container"])},writeMarkupEnd:Aria.empty,initWidget:function(){this._dateField.initWidget(),this.$Element.initWidget.call(this),this._domElt.className+=" date-picker",this._iconDomElt=this._domElt.children[1],this.data.disabled&&this._updateDisableConfig(!0),this._cfg.lazy||plnextv2.utils.widgets.light.LazyLoader.load(this.$classpath)},onbind:function(e,t){"value"===e?this._jsonUtil.setValue(this.data,"value",t,this._internalDataModelChange):"disabled"===e&&this._updateDisableConfig(t)},setWidgetProperty:function(e,t){"value"===e?this._jsonUtil.setValue(this.data,"value",t):"disabled"===e&&this._jsonUtil.setValue(this.data,"disabled",t)},_registerListeners:function(e){var t=e.on;this._chainListener(t,"click",{fn:this._onclick,scope:this})},_onclick:function(e){"icon"!=e.target.getData("role")||this.data.disabled||(this._dateField.applyTextToData(),this._triggerDropDown(),this._dateField.focus())},_updateExternalDataModel:function(e){var t=this._bindingListeners.value;if(t){var i=this._transform(t.transform,e.newValue,"fromWidget");aria.utils.Json.setValue(t.inside,t.to,i,t.cb)}},_updateDisableConfig:function(e){aria.utils.Json.setValue(this.data,"disabled",e);var t=this._dateField._domElt,i=this._dateField._cfg;t.disabled=e,e?(t.placeholder=i.disabledPlaceholder,this.data.oldValue=this.data.value,aria.utils.Json.setValue(this.data,"value",{})):(aria.utils.Json.setValue(this.data,"value",this.data.oldValue),t.placeholder=i.placeholder)},_onDropDownOpen:function(){this._dropdown&&this._dropdown.focus()},_onDropDownClose:function(){var e=null;this._dropdown&&(e=this._dropdown.closeEvent,this._dropdown.$dispose(),this._dropdown=null),this._dateField.focus(),e&&e!=aria.DomEvent.KC_ESCAPE&&(this._jsonUtil.setValue(this.data,"value",this.data.calendarValue),this._dateField.callChangeListener())},_writeIconMarkup:function(e){var t=this._cfg.iconBtni18n||"tx_pltg_text_datePickerInfo_AX",i=this._cfg.sclass||"std",n=this._cfg.iconClass||"icon-calendar";e.write('<button type="button" class="input-group-addon datepicker-btn" aria-label="'+this._i18n.getLabel(t)+'"data-role="icon"><span data-role="icon" class="'+i+"-dropdown-icon "+n+'"></span></button>')},_triggerDropDown:function(){var e=plnextv2.utils.widgets.light;if(e.LazyLoader.isLoaded(this.$classpath)){this._dropdown||(this._dropdown=new e.datepicker.DatePickerDropDown(this._getDropDownConfig()));var t=this._dropdown;t.isOpen()?t.close():(this._jsonUtil.setValue(this.data,"calendarValue",this.data.value),t.open())}else e.LazyLoader.load(this.$classpath,{fn:this._triggerDropDown,scope:this})},_getDateFieldConfig:function(){var e=this._cfg,t=this._jsonUtil.copy(e.dateField);t.id=this.inputId,e.minValue&&(t.minValue=e.minValue),e.maxValue&&(t.maxValue=e.maxValue),e.autoselect&&(t.autoselect=e.autoselect),e.placeholder&&(t.placeholder=e.placeholder),e.disabledPlaceholder&&(t.disabledPlaceholder=e.disabledPlaceholder),e.pattern&&(t.pattern=e.pattern),t.bind={value:{to:"value",inside:this.data}},t.on=t.on||{},this._chainListener(t.on,"keydown",{fn:this._onDateFieldKeydown,scope:this});var i=this._cfg.sclass||"std";return t.attributes=t.attributes||{},t.attributes.classList=t.attributes.classList?t.attributes.classList.concat(i):[i],t.attributes.autocomplete="off",t},_getDropDownConfig:function(){var e={calendar:this._getCalendarCfg(),domReference:this._domElt,context:this._context,lineNumber:this._lineNumber,ignoreClicksOn:[this._iconDomElt],onAfterOpen:{fn:this._onDropDownOpen,scope:this},onAfterClose:{fn:this._onDropDownClose,scope:this}};return e},_getCalendarCfg:function(){var e=this._cfg,t=this._jsonUtil.copy(e.calendar);return t.minValue=e.minValue?e.minValue:new Date,e.maxValue&&(t.maxValue=e.maxValue),e.prevSelected&&(t.prevSelected=e.prevSelected.value.inside[e.prevSelected.value.to]),t.bind={value:{to:"calendarValue",inside:this.data}},t.startDate=e.startDate?e.startDate:this.data.value,t.sclass=this._cfg.sclass||t.sclass||"std",t},_onDateFieldKeydown:function(e){var t=aria.DomEvent,i=this._dropdown;i&&i.isOpen()?i.processKeyEvent(e):e.keyCode==t.KC_ARROW_DOWN&&(this._dateField.applyTextToData(),this._triggerDropDown(),e.preventDefault())},getId:function(){return this._cfg.id},_getDisabledStateFromCfg:function(e){return e.bind&&e.bind.disabled?e.bind.disabled.inside[e.bind.disabled.to]:e.disabled||null}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/datepicker/DatePickerDropDown.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.datepicker.DatePickerDropDown",$extends:"plnextv2.utils.widgets.light.DropDown",$dependencies:["plnextv2.utils.widgets.light.calendar.Calendar","aria.DomEvent","aria.utils.Type","aria.core.Browser"],$constructor:function(){this.$DropDown.constructor.apply(this,arguments),this._calendar=null,this.closeEvent=null,this._offset=aria.core.Browser.isIE7?{top:5,bottom:-10,left:0,right:0}:{top:5,bottom:5,left:0,right:0}},$destructor:function(){this._calendar=null,this.$DropDown.$destructor.apply(this,arguments)},$prototype:{_contentWriter:function(e){var t=this._cfg.calendar;this._addCalendarListeners(t);var i=t.sclass;e.write('<span style="display: inline-block; overflow: visible" class="'+i+'dpCalendarContainer">');var n=new plnextv2.utils.widgets.light.calendar.Calendar(t,this._cfg.context,this._cfg.lineNumber);e.registerBehavior(n),n.writeMarkup(e),e.write("</span>"),this._calendar=n},_addCalendarListeners:function(e){e.on=e.on||{},e.on.keydown=e.on.keydown?aria.utils.Type.isArray(e.on.keydown)?e.on.keydown:[e.on.keydown]:[],e.on.keydown.push({fn:this._onCalendarKeydown,scope:this}),e.on.click=e.on.click?aria.utils.Type.isArray(e.on.click)?e.on.click:[e.on.click]:[],e.on.click.push({fn:this._onCalendarClick,scope:this})},_onCalendarKeydown:function(e){var t=e.keyCode,i=aria.DomEvent,n=!0;(t==i.KC_ENTER||t==i.KC_SPACE||t==i.KC_TAB||t==i.KC_ESCAPE)&&(this.closeEvent=t,this.close(),this.closeEvent=null),n&&e.preventDefault(!0)},_onCalendarClick:function(e){e.date&&(this.closeEvent="click",this.close(),this.closeEvent=null)},processKeyEvent:function(e){this._calendar.sendKey(e.charCode,e.keyCode),this._onCalendarKeydown(e)},focus:function(){this._calendar.focus()}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/datepicker/DatePickerStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.datepicker.DatePickerStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n.datepicker-btn {\ndisplay: inline-block;\nwidth: 38px;\nheight: 34px;\nline-height: inherit;\n}\n\n.datepicker-btn:focus {\noutline: 1px dotted ",14),this.__$write(this.$blueFocusShadow1,23),this.__$write(";\noutline: 5px auto -webkit-focus-ring-color;\n}\n\n.date-picker input.form-control {\ndisplay: inline-block;\nwidth: calc(100% - 38px);\n}\n\n",23)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/skin/AutocompleteSkin.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.skin.AutocompleteSkin",$singleton:!0,$prototype:{skinObject:{std:{backgroundColor:"white",borderRadius:"6px",border:"1px solid #DFDFDF",padding:"5px",width:"400px",item:{background:"white",color:"black",padding:"5px"},disabledItem:{background:"white",color:"#CCC"},selectedItem:{background:"#0088CC",color:"white"},mouseOverItem:{background:"#0088CC",color:"white"}},marker:{backgroundColor:"#f8f8f8",borderRadius:"6px",border:"1px solid #22ade6",padding:"5px",width:"400px",item:{background:"#f8f8f8",color:"black",padding:"5px"},disabledItem:{background:"#F5FF00",color:"#CCC"},selectedItem:{background:"#F5FF00",color:"black"},mouseOverItem:{background:"#FCD27B",color:"black"}}}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/skin/AutocompleteStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");require("plnextv2/utils/widgets/light/skin/AutocompleteSkin.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.skin.AutocompleteStyle",$extends:require("ariatemplates/templates/CSSTemplate.js"),$constructor:function(){this.$CSSTemplate.constructor.call(this)},$destructor:function(){this.$CSSTemplate.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this){var skinClasses=plnextv2.utils.widgets.light.skin.AutocompleteSkin.skinObject,__v_1=skinClasses;void 0==skinClasses&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,24]);var skinClass_ct=0;for(var skinClass_index in __v_1)if(__v_1.hasOwnProperty(skinClass_index)&&!this.$json.isMetadata(skinClass_index)){var skinClass=__v_1[skinClass_index];skinClass_ct++;var info={skinClassName:skinClass_index,skinClass:skinClass};this.macro_writeSkinClass(info)}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},macro_writeSkinClass:function(info){try{with(this){var skinClassName=info.skinClassName,skinClass=info.skinClass,prefix="."+skinClassName+"acListContainer";this.__$write(prefix,38),this.__$write(" .autocomplete_container {\nbackground-color: ",38),this.__$write(skinClass.backgroundColor,39),this.__$write(";\nborder: ",39),this.__$write(skinClass.border,40),this.__$write(";\nborder-radius: ",40),this.__$write(skinClass.borderRadius,41),this.__$write(";\npadding: ",41),this.__$write(skinClass.padding,42),this.__$write(";\nwidth: ",42),this.__$write(skinClass.width,43),this.__$write(";\n}\n\n",43),this.__$write(prefix,46),this.__$write(" table {\nwidth: 100%;\n}\n\n",46),this.__$write(prefix,50),this.__$write(" td {\ndisplay: block;\n}\n\n",50),this.__$write(prefix,54),this.__$write(" .xACEnabledItem {\nbackground-color: ",54),this.__$write(skinClass.item.background,55),this.__$write(";\ncolor: ",55),this.__$write(skinClass.item.color,56),this.__$write(";\npadding: ",56),this.__$write(skinClass.item.padding,57),this.__$write(";\ndisplay: block\n}\n\n",57),this.__$write(prefix,61),this.__$write(" .xACSelectedItem {\nbackground-color: ",61),this.__$write(skinClass.selectedItem.background,62),this.__$write(";\ncolor: ",62),this.__$write(skinClass.selectedItem.color,63),this.__$write(";\n}\n\n",63),this.__$write(prefix,66),this.__$write(" .xACDisabledItem {\nbackground-color: ",66),this.__$write(skinClass.disabledItem.background,67),this.__$write(";\ncolor: ",67),this.__$write(skinClass.disabledItem.color,68),this.__$write(";\n}\n\n",68),this.__$write(prefix,71),this.__$write(" .xACMouseOverItem {\nbackground-color: ",71),this.__$write(skinClass.mouseOverItem.background,72),this.__$write(";\ncolor: ",72),this.__$write(skinClass.mouseOverItem.color,73),this.__$write(";\n}\n\n",73)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["writeSkinClass",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$csslibs={},e.__$prefix=!1},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/skin/CalendarSkin.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.skin.CalendarSkin",$singleton:!0,$prototype:{skinObject:{std:{fontSize:14,dayBorderColor:"#FFF",dayBackgroundColor:"#FFF",dayColor:"#000",dayPadding:"3px",monthTitleBackgroundColor:"#FFF",monthTitleBorderColor:"#FFF",monthTitleColor:"#34495E",monthTitlePaddingBottom:"3px",monthTitlePaddingTop:"3px",monthTitleFontSize:16,weekDaysLabelBackgroundColor:"#FFF",weekDaysLabelBorderColor:"#FFF",weekDaysLabelColor:"#2C3E50",weekDaysLabelFontWeight:"bold",weekDaysLabelPadding:"3px",weekEndBackgroundColor:"#DFDFDF",weekEndBorderColor:"#DFDFDF",weekEndColor:"#000",weekNumberBackgroundColor:"#FFF",weekNumberBorderColor:"#FFF",selectedBorderColor:"#0088CC",selectedBackgroundColor:"#0088CC",selectedColor:"#FFF",mouseOverBorderColor:"#0088CC",mouseOverBackgroundColor:"#FFF",mouseOverColor:"#000",todayBorderColor:"#34495E",todayBackgroundColor:"#34495E",todayColor:"#FFF",dayFontWeight:"normal",disabled:"grey",nextMonth:"img/right.png",previousMonth:"img/left.png"},marker:{fontSize:14,dayBorderColor:"#f8f8f8",dayBackgroundColor:"#f8f8f8",dayColor:"#000",dayPadding:"3px",monthTitleBackgroundColor:"#f8f8f8",monthTitleBorderColor:"#f8f8f8",monthTitleColor:"#34495E",monthTitlePaddingBottom:"3px",monthTitlePaddingTop:"3px",monthTitleFontSize:16,weekDaysLabelBackgroundColor:"#f8f8f8",weekDaysLabelBorderColor:"#f8f8f8",weekDaysLabelColor:"#2C3E50",weekDaysLabelFontWeight:"bold",weekDaysLabelPadding:"3px",weekEndBackgroundColor:"#DFDFDF",weekEndBorderColor:"#DFDFDF",weekEndColor:"#000",weekNumberBackgroundColor:"#f8f8f8",weekNumberBorderColor:"#f8f8f8",selectedBorderColor:"#F5FF00",selectedBackgroundColor:"#F5FF00",selectedColor:"#000",mouseOverBorderColor:"#0088CC",mouseOverBackgroundColor:"#F5FF00",mouseOverColor:"#000",todayBorderColor:"#34495E",todayBackgroundColor:"#34495E",todayColor:"#FFF",dayFontWeight:"normal",disabled:"grey",nextMonth:"img/right.png",previousMonth:"img/left.png"}}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/skin/CalendarStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");require("plnextv2/utils/widgets/light/skin/CalendarSkin.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.skin.CalendarStyle",$extends:require("ariatemplates/templates/CSSTemplate.js"),$constructor:function(){this.$CSSTemplate.constructor.call(this)},$destructor:function(){this.$CSSTemplate.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this){var skinClasses=plnextv2.utils.widgets.light.skin.CalendarSkin.skinObject,__v_1=skinClasses;void 0==skinClasses&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,25]);var skinClass_ct=0;for(var skinClass_index in __v_1)if(__v_1.hasOwnProperty(skinClass_index)&&!this.$json.isMetadata(skinClass_index)){var skinClass=__v_1[skinClass_index];skinClass_ct++;var info={skinClassName:skinClass_index,skinClass:skinClass};this.macro_writeSkinClass(info)}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},macro_writeSkinClass:function(info){try{with(this){var skinClassName=info.skinClassName,skinClass=info.skinClass;this.__$write("\n\n.",37),this.__$write(skinClassName,38),this.__$write("dpCalendarContainer .nextMonth {\nbackground-image: url(",38),this.__$write(cssFolderPath,39),this.__$write("/",39),this.__$write(skinClass.nextMonth,39),this.__$write(");\nwidth: 20px;\nheight: 20px;\n}\n\n.",39),this.__$write(skinClassName,44),this.__$write("dpCalendarContainer .previousMonth {\nbackground-image: url(",44),this.__$write(cssFolderPath,45),this.__$write("/",45),this.__$write(skinClass.previousMonth,45),this.__$write(");\nwidth: 20px;\nheight: 20px;\n}\n\n.xCalendar_",45),this.__$write(skinClassName,50),this.__$write("_label {\nfont-weight:bold;\nmargin: 2px;\n}\n.xCalendar_",50),this.__$write(skinClassName,54),this.__$write("_general a:hover {\ntext-decoration: underline;\n}\ntable.xCalendar_",54),this.__$write(skinClassName,57),this.__$write("_month {\nfont-size: ",57),this.__$write(skinClass.fontSize,58),this.__$write("px;\ntext-align: center;\nborder: 0px none;\nborder-collapse:separate;\nborder-spacing:0;\n}\n.xCalendar_",58),this.__$write(skinClassName,64),this.__$write("_monthTitle {\nwidth: 100%;\nborder-color:",64),this.__$write(skinClass.monthTitleBorderColor,66),this.__$write(";\nborder-style:solid;\nborder-width:1px 0;\ncolor:",66),this.__$write(skinClass.monthTitleColor,69),this.__$write(";\nfont-weight:bold;\nbackground-color:",69),this.__$write(skinClass.monthTitleBackgroundColor,71),this.__$write(";\npadding-top:",71),this.__$write(skinClass.monthTitlePaddingTop,72),this.__$write(";\npadding-bottom:",72),this.__$write(skinClass.monthTitlePaddingBottom,73),this.__$write(";\n}\n.xCalendar_",73),this.__$write(skinClassName,75),this.__$write("_day {\n",75),skinClass.dayBorderColor&&(this.__$write("\nborder:1px solid ",77),this.__$write(skinClass.dayBorderColor,77),this.__$write(";\n",77)),this.__$write("\nwidth: 13px;\nbackground-color:",79),this.__$write(skinClass.dayBackgroundColor,80),this.__$write(";\ncolor:",80),this.__$write(skinClass.dayColor,81),this.__$write(";\npadding:",81),this.__$write(skinClass.dayPadding,82),this.__$write(";\nfont-weight:",82),this.__$write(skinClass.dayFontWeight,83),this.__$write(";\n}\n.xCalendar_",83),this.__$write(skinClassName,85),this.__$write("_weekEnd {\nbackground-color:",85),this.__$write(skinClass.weekEndBackgroundColor,86),this.__$write(";\nborder:1px solid ",86),this.__$write(skinClass.weekEndBorderColor,87),this.__$write(";\ncolor:",87),this.__$write(skinClass.weekEndColor,88),this.__$write(";\n}\n.xCalendar_",88),this.__$write(skinClassName,90),this.__$write("_selectable  {\ncursor: pointer;\n}\n.xCalendar_",90),this.__$write(skinClassName,93),this.__$write("_unselectable {\nborder: 1px solid ",93),this.__$write(this.$modifier("default",[skinClass.unselectableBorderColor,skinClass.dayBorderColor]),94),this.__$write(";\nbackground-color:",94),this.__$write(this.$modifier("default",[skinClass.unselectableBackgroundColor,skinClass.dayBackgroundColor]),95),this.__$write(";\ncolor:",95),this.__$write(this.$modifier("default",[skinClass.unselectableColor,skinClass.disabled]),96),this.__$write(";\n}\n.xCalendar_",96),this.__$write(skinClassName,98),this.__$write("_today {\nborder: 1px solid ",98),this.__$write(skinClass.todayBorderColor,99),this.__$write(";\nbackground-color:",99),this.__$write(skinClass.todayBackgroundColor,100),this.__$write(";\ncolor:",100),this.__$write(skinClass.todayColor,101),this.__$write(";\n}\n.xCalendar_",101),this.__$write(skinClassName,103),this.__$write("_weekNumber {\nbackground-color:",103),this.__$write(skinClass.weekNumberBackgroundColor,104),this.__$write(";\nborder:1px solid ",104),this.__$write(skinClass.weekNumberBorderColor,105),this.__$write(";\nfont-weight:bold;\nwidth: 13px;\n}\n.xCalendar_",105),this.__$write(skinClassName,109),this.__$write("_weekDaysLabel {\nbackground-color:",109),this.__$write(skinClass.weekDaysLabelBackgroundColor,110),this.__$write(";\nborder:1px solid ",110),this.__$write(skinClass.weekDaysLabelBorderColor,111),this.__$write(";\nfont-weight:",111),this.__$write(skinClass.weekDaysLabelFontWeight,112),this.__$write(";\ncolor:",112),this.__$write(skinClass.weekDaysLabelColor,113),this.__$write(";\nwidth: 13px;\npadding:",113),this.__$write(skinClass.weekDaysLabelPadding,115),this.__$write(";\n}\n.xCalendar_",115),this.__$write(skinClassName,117),this.__$write("_selected,.xCalendar_",117),this.__$write(skinClassName,117),this.__$write("_mouseOver {\nbackground-color:",117),this.__$write(skinClass.selectedBackgroundColor,118),this.__$write(";\nborder: 1px solid ",118),this.__$write(skinClass.selectedBorderColor,119),this.__$write(";\ncolor:",119),this.__$write(skinClass.selectedColor,120),this.__$write(";\n}\n",120)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["writeSkinClass",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$csslibs={},e.__$prefix=!1},__$initTemplate:function(){try{with(this)this.skinnableClassName="Calendar"}catch(_ex){return this.$logError(this.EXCEPTION_IN_VARINIT,[this.$classpath],_ex),!1}return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/skin/DatePickerSkin.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.skin.DatePickerSkin",$singleton:!0,$prototype:{skinObject:{std:{generalBackgroundColor:"white",generalPadding:"5px",generalBorder:"1px solid #DFDFDF",generalBorderRadius:"6px",icon:{url:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gVGhlIGljb24gY2FuIGJlIHVzZWQgZnJlZWx5IGluIGJvdGggcGVyc29uYWwgYW5kIGNvbW1lcmNpYWwgcHJvamVjdHMgd2l0aCBubyBhdHRyaWJ1dGlvbiByZXF1aXJlZCwgYnV0IGFsd2F5cyBhcHByZWNpYXRlZC4gCllvdSBtYXkgTk9UIHN1Yi1saWNlbnNlLCByZXNlbGwsIHJlbnQsIHJlZGlzdHJpYnV0ZSBvciBvdGhlcndpc2UgdHJhbnNmZXIgdGhlIGljb24gd2l0aG91dCBleHByZXNzIHdyaXR0ZW4gcGVybWlzc2lvbiBmcm9tIGljb25tb25zdHIuY29tIC0tPgoKPHN2ZwogICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB2ZXJzaW9uPSIxLjEiCiAgIHg9IjBweCIKICAgeT0iMHB4IgogICB3aWR0aD0iNTEycHgiCiAgIGhlaWdodD0iNTEycHgiCiAgIHZpZXdCb3g9IjAgMCA1MTIgNTEyIgogICBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MTIgNTEyIgogICB4bWw6c3BhY2U9InByZXNlcnZlIgogICBpZD0ic3ZnMiIKICAgaW5rc2NhcGU6dmVyc2lvbj0iMC40OC40IHI5OTM5IgogICBzb2RpcG9kaTpkb2NuYW1lPSJpY29ubW9uc3RyLWNhbGVuZGFyLTUtaWNvbi5zdmciPjxtZXRhZGF0YQogICBpZD0ibWV0YWRhdGE5Ij48cmRmOlJERj48Y2M6V29yawogICAgICAgcmRmOmFib3V0PSIiPjxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PjxkYzp0eXBlCiAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+PC9jYzpXb3JrPjwvcmRmOlJERj48L21ldGFkYXRhPjxkZWZzCiAgIGlkPSJkZWZzNyIgLz48c29kaXBvZGk6bmFtZWR2aWV3CiAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgIGJvcmRlcm9wYWNpdHk9IjEiCiAgIG9iamVjdHRvbGVyYW5jZT0iMTAiCiAgIGdyaWR0b2xlcmFuY2U9IjEwIgogICBndWlkZXRvbGVyYW5jZT0iMTAiCiAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwIgogICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjE2ODAiCiAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9IjEwMjgiCiAgIGlkPSJuYW1lZHZpZXc1IgogICBzaG93Z3JpZD0iZmFsc2UiCiAgIGlua3NjYXBlOnpvb209IjAuNDYwOTM3NSIKICAgaW5rc2NhcGU6Y3g9Ii04Mi40NDA2NzgiCiAgIGlua3NjYXBlOmN5PSIyNTYiCiAgIGlua3NjYXBlOndpbmRvdy14PSIxNjcyIgogICBpbmtzY2FwZTp3aW5kb3cteT0iLTgiCiAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjEiCiAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9InN2ZzIiIC8+CjxwYXRoCiAgIGlkPSJjYWxlbmRhci01LWljb24iCiAgIGQ9Ik0xOTcuNDUzLDI5NS45NTFoLTU4LjkwNXYtNTguOTA0aDU4LjkwNVYyOTUuOTUxeiBNMjg2LjQ1MiwyMzcuMDQ3aC01OC45MDR2NTguOTA0aDU4LjkwNFYyMzcuMDQ3eiAgIE0zNzUuNDUyLDIzNy4wNDdoLTU4LjkwNXY1OC45MDRoNTguOTA1VjIzNy4wNDd6IE0xOTcuNDUzLDMyMy4wNDdoLTU4LjkwNXY1OC45MDZoNTguOTA1VjMyMy4wNDd6IE0yODYuNDUyLDMyMy4wNDdoLTU4LjkwNCAgdjU4LjkwNmg1OC45MDRWMzIzLjA0N3ogTTM3NS40NTEsMzIzLjA0N2gtNTguOTA0djU4LjkwNmg1OC45MDRWMzIzLjA0N3ogTTM5Ny4zODksMTE4LjEzMWMwLDEwLjAzNS04LjEzNSwxOC4xNzEtMTguMTcsMTguMTcxICBzLTE4LjE3MS04LjEzNi0xOC4xNzEtMTguMTcxVjcyLjQwMmMwLTEwLjAzNCw4LjEzNi0xOC4xNywxOC4xNzEtMTguMTdzMTguMTcsOC4xMzYsMTguMTcsMTguMTdWMTE4LjEzMXogTTE1MS44ODksNzIuMzIgIGMwLTEwLjAzNS04LjEzNi0xOC4xNzEtMTguMTctMTguMTcxYy0xMC4wMzYsMC0xOC4xNzEsOC4xMzYtMTguMTcxLDE4LjE3MXY0NS43MjhjMCwxMC4wMzUsOC4xMzUsMTguMTcxLDE4LjE3MSwxOC4xNzEgIGMxMC4wMzQsMCwxOC4xNy04LjEzNiwxOC4xNy0xOC4xNzFWNzIuMzJ6IE00MTkuMzUyLDk4Ljg1MXYxOC42MTZjMCwyMi4xMy0xOC4wMDQsNDAuMTM0LTQwLjEzMyw0MC4xMzQgIGMtMjIuMTMsMC00MC4xMzQtMTguMDA0LTQwLjEzNC00MC4xMzRWOTguODUxSDE3My44NTJ2MTguNTMzYzAsMjIuMTMtMTguMDA0LDQwLjEzNC00MC4xMzMsNDAuMTM0ICBjLTIyLjEzLDAtNDAuMTM0LTE4LjAwNC00MC4xMzQtNDAuMTM0Vjk4Ljg1MUg1MHYzNTloNDEydi0zNTlINDE5LjM1MnogTTQyMiw0MTcuODUxSDkwVjE5NS4zOGgzMzJWNDE3Ljg1MXoiCiAgIHN0eWxlPSJmaWxsOiM3ZjhkOWE7ZmlsbC1vcGFjaXR5OjEiIC8+Cjwvc3ZnPg==",width:"26px",height:"26px",backgroundColor:"white",border:"1px solid #DFDFDF",borderRadius:"6px"}},marker:{generalBackgroundColor:"#f8f8f8",generalPadding:"5px",generalBorder:"1px solid #22ade6",generalBorderRadius:"6px",icon:{url:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gVGhlIGljb24gY2FuIGJlIHVzZWQgZnJlZWx5IGluIGJvdGggcGVyc29uYWwgYW5kIGNvbW1lcmNpYWwgcHJvamVjdHMgd2l0aCBubyBhdHRyaWJ1dGlvbiByZXF1aXJlZCwgYnV0IGFsd2F5cyBhcHByZWNpYXRlZC4gCllvdSBtYXkgTk9UIHN1Yi1saWNlbnNlLCByZXNlbGwsIHJlbnQsIHJlZGlzdHJpYnV0ZSBvciBvdGhlcndpc2UgdHJhbnNmZXIgdGhlIGljb24gd2l0aG91dCBleHByZXNzIHdyaXR0ZW4gcGVybWlzc2lvbiBmcm9tIGljb25tb25zdHIuY29tIC0tPgoKPHN2ZwogICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB2ZXJzaW9uPSIxLjEiCiAgIHg9IjBweCIKICAgeT0iMHB4IgogICB3aWR0aD0iNTEycHgiCiAgIGhlaWdodD0iNTEycHgiCiAgIHZpZXdCb3g9IjAgMCA1MTIgNTEyIgogICBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MTIgNTEyIgogICB4bWw6c3BhY2U9InByZXNlcnZlIgogICBpZD0ic3ZnMiIKICAgaW5rc2NhcGU6dmVyc2lvbj0iMC40OC40IHI5OTM5IgogICBzb2RpcG9kaTpkb2NuYW1lPSJpY29ubW9uc3RyLWNhbGVuZGFyLTUtaWNvbi5zdmciPjxtZXRhZGF0YQogICBpZD0ibWV0YWRhdGE5Ij48cmRmOlJERj48Y2M6V29yawogICAgICAgcmRmOmFib3V0PSIiPjxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PjxkYzp0eXBlCiAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+PC9jYzpXb3JrPjwvcmRmOlJERj48L21ldGFkYXRhPjxkZWZzCiAgIGlkPSJkZWZzNyIgLz48c29kaXBvZGk6bmFtZWR2aWV3CiAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgIGJvcmRlcm9wYWNpdHk9IjEiCiAgIG9iamVjdHRvbGVyYW5jZT0iMTAiCiAgIGdyaWR0b2xlcmFuY2U9IjEwIgogICBndWlkZXRvbGVyYW5jZT0iMTAiCiAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwIgogICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjE2ODAiCiAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9IjEwMjgiCiAgIGlkPSJuYW1lZHZpZXc1IgogICBzaG93Z3JpZD0iZmFsc2UiCiAgIGlua3NjYXBlOnpvb209IjAuNDYwOTM3NSIKICAgaW5rc2NhcGU6Y3g9Ii04Mi40NDA2NzgiCiAgIGlua3NjYXBlOmN5PSIyNTYiCiAgIGlua3NjYXBlOndpbmRvdy14PSIxNjcyIgogICBpbmtzY2FwZTp3aW5kb3cteT0iLTgiCiAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjEiCiAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9InN2ZzIiIC8+CjxwYXRoCiAgIGlkPSJjYWxlbmRhci01LWljb24iCiAgIGQ9Ik0xOTcuNDUzLDI5NS45NTFoLTU4LjkwNXYtNTguOTA0aDU4LjkwNVYyOTUuOTUxeiBNMjg2LjQ1MiwyMzcuMDQ3aC01OC45MDR2NTguOTA0aDU4LjkwNFYyMzcuMDQ3eiAgIE0zNzUuNDUyLDIzNy4wNDdoLTU4LjkwNXY1OC45MDRoNTguOTA1VjIzNy4wNDd6IE0xOTcuNDUzLDMyMy4wNDdoLTU4LjkwNXY1OC45MDZoNTguOTA1VjMyMy4wNDd6IE0yODYuNDUyLDMyMy4wNDdoLTU4LjkwNCAgdjU4LjkwNmg1OC45MDRWMzIzLjA0N3ogTTM3NS40NTEsMzIzLjA0N2gtNTguOTA0djU4LjkwNmg1OC45MDRWMzIzLjA0N3ogTTM5Ny4zODksMTE4LjEzMWMwLDEwLjAzNS04LjEzNSwxOC4xNzEtMTguMTcsMTguMTcxICBzLTE4LjE3MS04LjEzNi0xOC4xNzEtMTguMTcxVjcyLjQwMmMwLTEwLjAzNCw4LjEzNi0xOC4xNywxOC4xNzEtMTguMTdzMTguMTcsOC4xMzYsMTguMTcsMTguMTdWMTE4LjEzMXogTTE1MS44ODksNzIuMzIgIGMwLTEwLjAzNS04LjEzNi0xOC4xNzEtMTguMTctMTguMTcxYy0xMC4wMzYsMC0xOC4xNzEsOC4xMzYtMTguMTcxLDE4LjE3MXY0NS43MjhjMCwxMC4wMzUsOC4xMzUsMTguMTcxLDE4LjE3MSwxOC4xNzEgIGMxMC4wMzQsMCwxOC4xNy04LjEzNiwxOC4xNy0xOC4xNzFWNzIuMzJ6IE00MTkuMzUyLDk4Ljg1MXYxOC42MTZjMCwyMi4xMy0xOC4wMDQsNDAuMTM0LTQwLjEzMyw0MC4xMzQgIGMtMjIuMTMsMC00MC4xMzQtMTguMDA0LTQwLjEzNC00MC4xMzRWOTguODUxSDE3My44NTJ2MTguNTMzYzAsMjIuMTMtMTguMDA0LDQwLjEzNC00MC4xMzMsNDAuMTM0ICBjLTIyLjEzLDAtNDAuMTM0LTE4LjAwNC00MC4xMzQtNDAuMTM0Vjk4Ljg1MUg1MHYzNTloNDEydi0zNTlINDE5LjM1MnogTTQyMiw0MTcuODUxSDkwVjE5NS4zOGgzMzJWNDE3Ljg1MXoiCiAgIHN0eWxlPSJmaWxsOiM3ZjhkOWE7ZmlsbC1vcGFjaXR5OjEiIC8+Cjwvc3ZnPg==",width:"26px",height:"26px",backgroundColor:"#F5FF00",border:"1px solid #22ade6",borderRadius:"6px"}}}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/skin/DatePickerStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");require("plnextv2/utils/widgets/light/skin/DatePickerSkin.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.skin.DatePickerStyle",$extends:require("ariatemplates/templates/CSSTemplate.js"),$constructor:function(){this.$CSSTemplate.constructor.call(this)},$destructor:function(){this.$CSSTemplate.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this){var skinClasses=plnextv2.utils.widgets.light.skin.DatePickerSkin.skinObject,__v_1=skinClasses;void 0==skinClasses&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,25]);var skinClass_ct=0;for(var skinClass_index in __v_1)if(__v_1.hasOwnProperty(skinClass_index)&&!this.$json.isMetadata(skinClass_index)){var skinClass=__v_1[skinClass_index];skinClass_ct++;var info={skinClassName:skinClass_index,skinClass:skinClass};this.macro_writeSkinClass(info)}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},macro_writeSkinClass:function(info){try{with(this){var skinClassName=info.skinClassName,skinClass=info.skinClass;this.__$write("\n\n.",37),this.__$write(skinClassName,38),this.__$write("dpCalendarContainer {\nbackground-color: ",38),this.__$write(skinClass.generalBackgroundColor,39),this.__$write(";\npadding: ",39),this.__$write(skinClass.generalPadding,40),this.__$write(";\nborder: ",40),this.__$write(skinClass.generalBorder,41),this.__$write(";\nborder-radius: ",41),this.__$write(skinClass.generalBorderRadius,42),this.__$write(";\n}\n\n",42);var icon=skinClass.icon;this.__$write("\n.",46),this.__$write(skinClassName,46),this.__$write("-dropdown-icon {\nbackground-image: url('",46),this.__$write(icon.url,47),this.__$write("');\nbackground-color: ",47),this.__$write(icon.backgroundColor,48),this.__$write(";\ndisplay: inline-block;\nwidth: ",48),this.__$write(icon.width,50),this.__$write(";\nheight: ",50),this.__$write(icon.height,51),this.__$write(";\nbackground-size: ",51),this.__$write(icon.width,52),this.__$write(" ",52),this.__$write(icon.height,52),this.__$write(";\nborder: ",52),this.__$write(icon.border,53),this.__$write(";\nborder-radius: ",53),this.__$write(icon.borderRadius,54),this.__$write(";\nvertical-align: middle;\n}\n\n",54)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["writeSkinClass",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$csslibs={},e.__$prefix=!1},__$initTemplate:function(){try{with(this)this.skinnableClassName="Calendar"}catch(_ex){return this.$logError(this.EXCEPTION_IN_VARINIT,[this.$classpath],_ex),!1}return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/skin/SkinLoader.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.skin.SkinLoader",$singleton:!0,$dependencies:["aria.templates.CSSMgr"],$css:["plnextv2.utils.widgets.light.skin.AutocompleteStyle","plnextv2.utils.widgets.light.skin.CalendarStyle","plnextv2.utils.widgets.light.skin.TextInputStyle","plnextv2.utils.widgets.light.skin.DatePickerStyle"],$constructor:function(){aria.templates.CSSMgr.loadClassPathDependencies(this.$classpath,this.$css)},$destructor:function(){aria.templates.CSSMgr.unloadClassPathDependencies(this.$classpath,this.$css)}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/skin/TextInputSkin.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.skin.TextInputSkin",$singleton:!0,$prototype:{skinObject:{std:{normal:{border:"1px solid #DFDFDF",borderRadius:"6px",color:"black",backgroundColor:"white",padding:"5px",width:"200px"},focus:{border:"1px solid #DFDFDF",borderRadius:"6px",color:"black",backgroundColor:"white"},placeholder:{color:"grey",fontStyle:"italic"}},marker:{normal:{border:"1px solid #026c9c",borderRadius:"6px",color:"black",backgroundColor:"#f8f8f8",padding:"5px",width:"200px"},focus:{border:"1px solid #22ade6",borderRadius:"6px",color:"black",backgroundColor:"#f8f8f8"},placeholder:{color:"grey",fontStyle:"italic"}}}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/skin/TextInputStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");require("plnextv2/utils/widgets/light/skin/TextInputSkin.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.skin.TextInputStyle",$extends:require("ariatemplates/templates/CSSTemplate.js"),$constructor:function(){this.$CSSTemplate.constructor.call(this)},$destructor:function(){this.$CSSTemplate.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this){var skinClasses=plnextv2.utils.widgets.light.skin.TextInputSkin.skinObject,__v_1=skinClasses;void 0==skinClasses&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,24]);var skinClass_ct=0;for(var skinClass_index in __v_1)if(__v_1.hasOwnProperty(skinClass_index)&&!this.$json.isMetadata(skinClass_index)){var skinClass=__v_1[skinClass_index];skinClass_ct++;var info={skinClassName:skinClass_index,skinClass:skinClass};this.macro_writeSkinClass(info)}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},macro_writeSkinClass:function(info){try{with(this){var skinClassName=info.skinClassName,skinClass=info.skinClass;this.__$write("\n\n.",36),this.__$write(skinClassName,37),this.__$write("  {\nbackground-color: ",37),this.__$write(skinClass.normal.backgroundColor,38),this.__$write(";\nborder: ",38),this.__$write(skinClass.normal.border,39),this.__$write(";\nborder-radius: ",39),this.__$write(skinClass.normal.borderRadius,40),this.__$write(";\npadding: ",40),this.__$write(skinClass.normal.padding,41),this.__$write(";\ncolor: ",41),this.__$write(skinClass.normal.color,42),this.__$write(";\nwidth: ",42),this.__$write(skinClass.normal.width,43),this.__$write(";\nvertical-align: middle;\n}\n\n.",43),this.__$write(skinClassName,47),this.__$write(":focus  {\nbackground-color: ",47),this.__$write(skinClass.focus.backgroundColor,48),this.__$write(";\nborder: ",48),this.__$write(skinClass.focus.border,49),this.__$write(";\nborder-radius: ",49),this.__$write(skinClass.focus.borderRadius,50),this.__$write(";\ncolor: ",50),this.__$write(skinClass.focus.padding,51),this.__$write(";\noutline: none;\n}\n\n.",51),this.__$write(skinClassName,55),this.__$write(".placeholder {\ncolor : ",55),this.__$write(skinClass.placeholder.color,56),this.__$write(";\nfont-style: ",56),this.__$write(skinClass.placeholder.fontStyle,57),this.__$write(";\n}\n\ninput.",57),this.__$write(skinClassName,60),this.__$write("::-webkit-input-placeholder {\nfont-style: ",60),this.__$write(skinClass.placeholder.fontStyle,61),this.__$write(";\n}\n\ninput.",61),this.__$write(skinClassName,64),this.__$write("::-moz-input-placeholder {\nfont-style: ",64),this.__$write(skinClass.placeholder.fontStyle,65),this.__$write(";\n}\n\ninput.",65),this.__$write(skinClassName,68),this.__$write("::-ms-input-placeholder {\nfont-style: ",68),this.__$write(skinClass.placeholder.fontStyle,69),this.__$write(";\n}\n\n\n",69)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["writeSkinClass",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$csslibs={},e.__$prefix=!1},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/textinput/TextInputWithOnChange.js
//*******************
!function(){function e(){this._storedValue=this._hasPlaceholder?"":this._domElt.value}function t(){var e=this._hasPlaceholder?"":this._domElt.value;this._storedValue!=e&&this.$callback(this._changeListener,e)}Aria.classDefinition({$classpath:"plnextv2.utils.widgets.light.textinput.TextInputWithOnChange",$extends:"aria.html.TextInput",$dependencies:["aria.utils.Date"],$constructor:function(i,n,s){this._storedValue=null,i.on=i.on||{};var a=i.on.change;a&&(delete i.on.change,this._changeListener=this.$normCallback.call(n._tpl,a),this._chainListener(i.on,"focus",{fn:e,scope:this}),this._chainListener(i.on,"blur",{fn:t,scope:this},!0)),this.$TextInput.constructor.call(this,i,n,s)},$destructor:function(){this._changeListener=null,this.$TextInput.$destructor.call(this)},$prototype:{getDom:function(){return this._domElt},callChangeListener:function(){var e=this._hasPlaceholder?"":this._domElt.value;this._storedValue!=e&&this.$callback(this._changeListener,e),this._storedValue=e}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/AXTextInput/core/AXTextInput.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.AXTextInput.core.AXTextInput",$extends:"aria.html.TextInput",$dependencies:["aria.utils.Dom"],$statics:{WIDGET_ERROR:"AXTextInput error. Could not find the Element in the DOM.",MISSING_ERROR_ID:"Missing errorId in Widget Configuration.",ARIA_DESCRIBED_BY:"aria-describedby",ARIA_INVALID:"aria-invalid",ARIA_LIVE:"aria-live",ERROR_BIND:"error"},$constructor:function(e,t,i){this.$TextInput.constructor.call(this,e,t,i),this._domElt=null,this._errorId=e.errorId},$destructor:function(){this.$TextInput.$destructor.call(this)},$prototype:{initWidget:function(){return this.$TextInput.initWidget.call(this),this._errorId||this.$logError(this.MISSING_ERROR_ID),this._domElt=this.getDom(),this._domElt?void this._setAriaInvalid(!1):void this.$logError(this.WIDGET_ERROR)},onbind:function(e,t){switch(this.$TextInput.onbind.apply(this,arguments),e){case this.ERROR_BIND:this._updateOnErrorMarkup(t)}},_updateOnErrorMarkup:function(e){void 0!==e?(this._setFocusOnInput(),this._setAriaInvalid(!0),this._setAriaDescribedBy(this._errorId)):(this._setAriaDescribedBy(),this._setAriaInvalid(!1))},_setFocusOnInput:function(){var e=this;setTimeout(function(){e._domElt.focus()},200)},_setAriaInvalid:function(e){"boolean"==typeof e?this._domElt.setAttribute(this.ARIA_INVALID,e):this._domElt.removeAttribute(this.ARIA_INVALID)},_setAriaDescribedBy:function(e){"string"==typeof e&&e.length>0?this._domElt.setAttribute(this.ARIA_DESCRIBED_BY,e):this._domElt.removeAttribute(this.ARIA_DESCRIBED_BY)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/LazyLoader.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.LazyLoader",$singleton:!0,$dependencies:["aria.utils.Json"],$statics:{LOADING:1,LOADED:2},$prototype:{_depMap:{},_status:{},_callbacks:{},register:function(e,t){this._depMap[e]=t,this._callbacks[e]=[]},load:function(e,t){var i=this._depMap[e];if(i){var n=this._status[e];if(n==this.LOADING)return void this._callbacks[e].push(t);if(n==this.LOADED)return void this.$callback(t);var s=aria.utils.Json.copy(i);this._callbacks[e].push(t),s.oncomplete={fn:this._executeCallbacks,scope:this,args:e,resIndex:-1},Aria.load(s)}},isLoaded:function(e){return this._status[e]==this.LOADED||!1},_executeCallbacks:function(e){this._status[e]=this.LOADED;for(var t=this._callbacks[e],i=0,n=t.length;n>i;i++)this.$callback(t[i]);this._callbacks[e]=[]}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/OnOneLine.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.OnOneLine",$extends:"aria.widgetLibs.BaseWidget",$constructor:function(e,t,i){this.$BaseWidget.constructor.call(this,e,t,i),this.__lineMarkupBegin=void 0},$prototype:{writeMarkupBegin:function(e){this.__lineMarkupBegin=e._out.length},writeMarkupEnd:function(e){var t=e._out.length-this.__lineMarkupBegin,i=e._out.splice(this.__lineMarkupBegin,t);line=i.join(""),line=line.replace(/\n|\r/g,""),line.length>0?e.write(line):this.$logWarn("Empty container-widget: %2 in %1",[/[^\.]*$/.exec(this.$classpath)[0]])}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/Text.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.Text",$extends:"aria.widgets.Widget",$dependencies:["aria.DomEvent","aria.utils.Dom","aria.utils.String"],$constructor:function(){this.$Widget.constructor.apply(this,arguments),this._defaultMargin=0,this._cssClassNames=""},$destructor:function(){this.textContent=null,this.$Widget.$destructor.call(this)},$prototype:{_widgetMarkup:function(e){var t=(this._cfg,this._cfg.text);t=null!==t?""+t:"",this.textContent=t,e.write(aria.utils.String.escapeHTML(this.textContent))},_onBoundPropertyChange:function(e,t){var i=this.getDom();"text"==e&&null!==t&&(t=""+t,i.innerHTML=aria.utils.String.escapeHTML(t))}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/TextArea.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.TextArea",$extends:"aria.html.TextInput",$constructor:function(e,t,i){this.$TextInput.constructor.call(this,e,t,i),this._cfg.tagName="textarea",delete e.attributes.type},$prototype:{tagName:"textarea",writeMarkup:function(e){this.$Element.writeMarkupBegin.call(this,e),this.$Element.writeMarkupEnd.call(this,e)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/accordion/core/Accordion.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.accordion.core.Accordion",$extends:"aria.widgets.Widget",$dependencies:["plnextv2.utils.widgets.plnextLib.accordion.bean.AccordionCfgBeans","aria.utils.Event","aria.utils.Dom","plnextv2.utils.HtmlUtils","plnextv2.styles.BaseCssScript","plnextv2.utils.context.AppContext"],$css:["plnextv2.utils.widgets.plnextLib.accordion.style.AccordionCss"],$statics:{CSS_CLASS_BODY_HIDDEN:"collapsed",CSS_CLASS_HEADER_HIDDEN:"collapsed",CSS_CLASS_ELEMENT:"plnext-accordion-element",CSS_CLASS_HEADER_STICKY:"plnext-accordion-sticky-header",DEFAULT_DROPDOWN_ICON:"icon-caret icon-caret-down",DEFAULT_DROPUP_ICON:"icon-caret icon-caret-up",KEY_CODE_ENTER:13,KEY_CODE_SPACE:32,KEY_CODE_ARROW_LEFT:37,KEY_CODE_ARROW_UP:38,KEY_CODE_ARROW_RIGHT:39,KEY_CODE_ARROW_DOWN:40,KEY_CODE_END:35,KEY_CODE_HOME:36},$constructor:function(){this._cfgBean="plnextv2.utils.widgets.plnextLib.accordion.bean.AccordionCfgBeans.AccordionCfg",this.$Widget.$constructor.apply(this,arguments),this._widgetId=this._createDynamicId(),this.__elements=[],this.__visibleElements={},this.__showAnimationOngoing=!1,plnextv2.utils.context.AppContext.getEventBus().subscribe("plnext-accordion:update-element-with-index",this._updateElementWithIndex,this)},$destructor:function(){this.$Widget.$destructor.call(this),plnextv2.utils.context.AppContext.getEventBus().unsubscribe("plnext-accordion:update-element-with-index",this._updateElementWithIndex,this)},$prototype:{writeMarkup:function(e){var t=this._cfg.accordionElements,i=["<div",' id="'+this._widgetId+'"',' class="plnext-accordion"',' role="tablist"',' multiselectable="'+this._cfg.multiSelectable+'"'," >"];e.write(i.join(""));for(var n=0;n<t.length;n++)this._writeElementMarkup(e,t[n],n);e.write("</div>")},_writeElementMarkup:function(e,t,i){var n=this._createDynamicId(),s=[this.CSS_CLASS_ELEMENT];t.elementClass&&s.push(t.elementClass),e.write("<div class='"+s.join(" ")+"'>"),this._writeElementHeaderMarkup(e,t.heading,n,t.headingMacro,t.subHeadingMacro,t.iconCaretDown,t.iconCaretUp),this._writeElementBodyMarkup(e,t.contentMacro,n),e.write("</div>"),this.__elements.push({index:i,targetId:n,onShow:t.onShow,onHeaderClicked:t.onHeaderClicked,onHeaderEnterPressed:t.onHeaderEnterPressed})},_writeElementHeaderMarkup:function(e,t,i,n,s,a,r){var o=["plnext-accordion-header",this.CSS_CLASS_HEADER_HIDDEN];this._cfg.areHeadersSticky&&e.write("<div class='"+this.CSS_CLASS_HEADER_STICKY+"'>");var l=a||this.DEFAULT_DROPDOWN_ICON,c=r||this.DEFAULT_DROPUP_ICON,d=["<"+this._cfg.headingLevel," id='"+i+"-label'"," role='tab'"," class='"+o.join(" ")+"'"," data-target-id='"+i+"'"," aria-controls='"+i+"'"," aria-expanded='false'"," aria-selected='false'"," tabindex='0' >"," <span class='icon-container'>"," <i class='icon-caret icon-caret-down-custom ",l,"' aria-hidden='true'></i>"," <i class='icon-caret icon-caret-up-custom ",c,"' aria-hidden='true'></i>"," </span>"];e.write(d.join("")),t?e.write(t):n&&e.callMacro(n),d=["</"+this._cfg.headingLevel+">"],e.write(d.join("")),s&&this._writeSubHeaderMarkup(e,i,s),this._cfg.areHeadersSticky&&e.write("</div>")},_writeSubHeaderMarkup:function(e,t,i){var n=["<div"," id='"+t+"-sub-header'"," class='plnext-accordion-sub-header "+this.CSS_CLASS_HEADER_HIDDEN+"'"," >"];e.write(n.join("")),e.callMacro(i),e.write("</div>")},_writeElementBodyMarkup:function(e,t,i){var n=["<div"," class='plnext-accordion-body "+this.CSS_CLASS_BODY_HIDDEN+"'"," id='"+i+"'"," role='tabpanel'"," aria-labelledby='"+i+"-label'"," aria-hidden='true'",">"];e.write(n.join("")),e.callMacro(t),e.write("</div>")},initWidget:function(){this._indexHTMLElements(),this._registerEvents(),this._cfg.isFirstElementOpenedOnInit&&this._show(this.__elements[0],!0),plnextv2.utils.context.AppContext.getEventBus().publish("plnext-accordion:initialized",this)},_indexHTMLElements:function(){for(var e=0;e<this.__elements.length;e++){var t=this.__elements[e].targetId;this.__elements[e].headerElement=aria.utils.Dom.getElementById(t+"-label"),this.__elements[e].subHeaderElement=aria.utils.Dom.getElementById(t+"-sub-header"),this.__elements[e].bodyElement=aria.utils.Dom.getElementById(t)}},_registerEvents:function(){for(var e=0;e<this.__elements.length;e++){var t=this.__elements[e];aria.utils.Event.addListener(t.headerElement,"click",{fn:this._onHeaderClicked,scope:this,args:{element:t}},!0),aria.utils.Event.addListener(t.headerElement,"keydown",{fn:this._onHeaderKeyDown,scope:this,args:{element:t}},!0),aria.utils.Event.addListener(t.headerElement,"focus",{fn:this._onHeaderFocused,scope:this,args:{element:t}},!0),aria.utils.Event.addListener(t.headerElement,"blur",{fn:this._onHeaderBlurred,scope:this,args:{element:t}},!0),aria.utils.Event.addListener(t.bodyElement,"keydown",{fn:this._onBodyKeyDown,scope:this,args:{element:t}},!0)}},_onHeaderClicked:function(e,t){var i=t.element;i.onHeaderClicked?(i.onHeaderClicked=this._addToggleActionCallback(i,i.onHeaderClicked),this.$callback(t.element.onHeaderClicked)):this._toggle(i)},_addToggleActionCallback:function(e,t){var i=this;return t.args||aria.utils.Type.isObject(t.args)||(t.args={}),t.args.callbackToggleAction=function(){i._toggle(e)},t},_onHeaderKeyDown:function(e,t){var i=t.element;e.keyCode===this.KEY_CODE_ENTER||e.keyCode===this.KEY_CODE_SPACE?i.onHeaderEnterPressed?(i.onHeaderEnterPressed=this._addToggleActionCallback(i,i.onHeaderEnterPressed),this.$callback(i.onHeaderEnterPressed)):this._toggle(i):e.keyCode===this.KEY_CODE_HOME?this.__elements[0].headerElement.focus():e.keyCode===this.KEY_CODE_END&&this.__elements[this.__elements.length-1].headerElement.focus()},_onHeaderFocused:function(e,t){t.element.headerElement.setAttribute("aria-selected",!0)},_onHeaderBlurred:function(e,t){t.element.headerElement.setAttribute("aria-selected",!1)},_onBodyKeyDown:function(e,t){(e.ctrlKey&&e.keyCode===this.KEY_CODE_ARROW_UP||e.keyCode===this.KEY_CODE_ARROW_LEFT)&&this.__elements[t.element.index].headerElement.focus()},_toggle:function(e){this.__visibleElements[e.targetId]?this._hide(e):this._show(e)},_show:function(e,t){if(!this.__visibleElements[e.targetId])if(this._cfg.multiSelectable||this._hideAll(),e.onShow){var i=this;e.onShow.args.callbackShowUpdateDOM=function(){i._showUpdateDOM(e,t)},this.$callback(e.onShow)}else this._showUpdateDOM(e,t)},_showUpdateDOM:function(e,t){e.bodyElement.classList.remove(this.CSS_CLASS_BODY_HIDDEN),e.bodyElement.setAttribute("aria-hidden",!1),e.bodyElement.style.height=e.bodyElement.scrollHeight+"px",e.headerElement.classList.remove(this.CSS_CLASS_HEADER_HIDDEN),e.headerElement.setAttribute("aria-expanded",!0),e.subHeaderElement&&(e.subHeaderElement.classList.remove(this.CSS_CLASS_BODY_HIDDEN),e.subHeaderElement.setAttribute("aria-hidden",!1),e.subHeaderElement.style.height=e.subHeaderElement.scrollHeight+"px"),this.__visibleElements[e.targetId]=e,t||(e.headerElement.scrollIntoView&&e.headerElement.scrollIntoView(),e.headerElement.focus())},_updateElementWithIndex:function(e,t){this.__elements&&this.__elements[t]&&this._showUpdateDOM(this.__elements[t],!1)},_hide:function(e){this.__visibleElements[e.targetId]&&(e.headerElement.classList.add(this.CSS_CLASS_HEADER_HIDDEN),e.headerElement.setAttribute("aria-expanded",!1),e.bodyElement.classList.add(this.CSS_CLASS_BODY_HIDDEN),e.bodyElement.style.height="0px",e.bodyElement.setAttribute("aria-hidden",!0),e.subHeaderElement&&(e.subHeaderElement.setAttribute("aria-hidden",!0),e.subHeaderElement.classList.add(this.CSS_CLASS_BODY_HIDDEN),e.subHeaderElement.style.height="0px"),delete this.__visibleElements[e.targetId],e.headerElement.focus())},_hideAll:function(){for(var e in this.__visibleElements)this.__visibleElements.hasOwnProperty(e)&&this._hide(this.__visibleElements[e])}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/accordion/style/AccordionCss.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.accordion.style.AccordionCss",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n.plnext-accordion {\npadding: 0;\n}\n\n.plnext-accordion-element {\nmargin-top: 20px;\n}\n\n.plnext-accordion-element:first-child {\nmargin-top: 0;\n}\n\n.plnext-accordion-header {\ndisplay: block;\nposition: relative;\nmargin-top: 0;\nmargin-bottom: 0;\npadding: 15px 20px;\nfont-weight: ",10),this.__$write(this.$bold,29),this.__$write(";\nbackground-color: ",29),this.__$write(this.$blueLighter,30),this.__$write(";\ncolor: ",30),this.__$write(this.$white,31),this.__$write(";\n}\n\n.plnext-accordion-sticky-header {\nposition: -webkit-sticky;\nposition: sticky;\ntransition: top 0.3s ease;\n}\n\n.plnext-accordion-header:focus {\noutline-width: 2px;\noutline-style: solid;\noutline-color: ",31),this.__$write(this.$blueElectric,43),this.__$write(";\n}\n\n.plnext-accordion-header span.icon-container {\nposition: absolute;\ntop: 50%;\nright: 0;\npadding-right: inherit;\n",43),this.macro_transform("translateY(-50%)"),this.__$write("\n}\n\n.plnext-accordion-header i.icon-caret {\nfloat: right;\n}\n\n.plnext-accordion-header .icon-caret-up-custom,\n.plnext-accordion-header.collapsed .icon-caret-down-custom {\ndisplay: inline;\n}\n\n.plnext-accordion-header .icon-caret-down-custom,\n.plnext-accordion-header.collapsed .icon-caret-up-custom {\ndisplay: none;\n}\n\n.plnext-accordion-body {\noverflow: hidden;\npadding: 20px;\nbackground-color: ",52),this.__$write(this.$white,71),this.__$write(";\n}\n\n.plnext-accordion-body {\n-webkit-transition: height ",71),this.__$write(this.transitionTimes.accordion,75),this.__$write("ms ease-in-out;\n-moz-transition: height ",75),this.__$write(this.transitionTimes.accordion,76),this.__$write("ms ease-in-out;\n-ms-transition: height ",76),this.__$write(this.transitionTimes.accordion,77),this.__$write("ms ease-in-out;\n-o-transition: height ",77),this.__$write(this.transitionTimes.accordion,78),this.__$write("ms ease-in-out;\ntransition: height ",78),this.__$write(this.transitionTimes.accordion,79),this.__$write("ms ease-in-out;\n}\n\n.plnext-accordion-body,\n.plnext-accordion-sub-header.collapsed {\nheight: 0px;\n}\n\n.plnext-accordion-body.collapsed,\n.plnext-accordion-sub-header.collapsed {\noverflow: hidden;\n}\n\n",79)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/autocompleteBox/AutocompleteBox.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.autocompleteBox.AutocompleteBox",$extends:"aria.html.Element",$dependencies:["aria.utils.Dom","aria.utils.Event","aria.html.controllers.Suggestions","aria.utils.Json","plnextv2.utils.widgets.plnextLib.LazyLoader","plnextv2.utils.widgets.plnextLib.autocompleteBox.AutocompleteBoxCfgBeans","plnextv2.utils.widgets.plnextLib.autocompleteBox.AutocompleteBoxDropDown","plnextv2.utils.widgets.plnextLib.autocompleteBox.textfield.TextField"],$css:["plnextv2.utils.widgets.plnextLib.autocompleteBox.style.AutocompleteBoxStyle"],$statics:{INVALID_USAGE:"Widget %1 can only be used as a %2."},$constructor:function(e,t,i){this._jsonUtils=aria.utils.Json,this._i18n=plnextv2.utils.I18n,this.data={value:e.value||null};var n=this.data;this.data.fromClick=!1,this._suggestionsOff=!1,this._caretDifferent=!1,this.$cfgBean="plnextv2.utils.widgets.plnextLib.autocompleteBox.AutocompleteBoxCfgBeans.Properties",e.attributes=e.attributes||{},e.attributes.classList=e.attributes.classList?e.attributes.classList.concat(e.sclass):[],e.allowRichContent&&e.attributes.classList.push("richDropdown"),e.disabled&&e.attributes.classList.push("disabled"),e.attributes.autocomplete="off",e.on=e.on||{},this._registerListeners(e,t),this._idSelectionField=e.id,e.id="",this.$Element.constructor.call(this,e,t,i),this._iconDomElt=null,this._selectionFieldDomElt=null,this._keyCode=null,this._buffer="",this._dropdown=null,this._srNotificationDomElt=null;var n=this.data;n.preselect="always"==e.preselect?0:"strict"==e.preselect||e.allowRichContent?1:-1,this._resetIdxs(),n.selectedIdx=null,n.animationTime=500,n.highlightedFooter=!1,n.showAll=!1,n.selectedOption=null,n.initSR=!1,n.autocompleteBoxId=this._createDynamicId(),n.multiKey=!1,n.multiKeyPrev=0,n.multipleKeyTimeOut=100;var s=Aria.getClassInstance("aria.html.controllers.Suggestions");s.setResourcesHandler(e.resourcesHandler),this._highlightedIdxListener={fn:this._onHighlightChange,scope:this},this._selectedIdxListener={fn:this._onSelectionChange,scope:this},this._showAllListener={fn:this._showAllSuggestions,scope:this},this._suggestionListener={fn:this._onSuggestionsChange,scope:this},this._selectedOptionListener={fn:this._selectedOptionChange,scope:this},this._onChangeValueListener={fn:this._onChangeValueToWidget,scope:this};var a=this._jsonUtils;a.addListener(n,"highlightedIdx",this._highlightedIdxListener),a.addListener(n,"selectedIdx",this._selectedIdxListener),a.addListener(n,"showAll",this._showAllListener),a.addListener(s.data,"suggestions",this._suggestionListener),a.addListener(n,"selectedOption",this._selectedOptionListener),this.suggestionController=s,e.suggestionsTemplate=e.suggestionsTemplate||s._resourcesHandler.getDefaultTemplate(),e.allowRichContent?(a.addListener(this._bindingListeners.value.inside,this._bindingListeners.value.to,this._onChangeValueListener,!1),this.data.value=this._getCurrentLabel()):this._textField=new plnextv2.utils.widgets.plnextLib.autocompleteBox.textfield.TextField(this._getTextFieldConfig(),t,i),plnextv2.utils.widgets.plnextLib.LazyLoader.register(this.$classpath,{classes:["plnextv2.utils.widgets.plnextLib.autocompleteBox.AutocompleteBoxDropDown"],templates:[e.suggestionsTemplate]}),this._allowValuesNotListed=e.allowValuesNotListed===!0,this._isShowingPreSuggestedValues=!1,this._hasPreSuggestedValues=e.hasPreSuggestedValues,this.data.hasPreSuggestedValues=this._hasPreSuggestedValues,this.suggestionController._resourcesHandler.setHasPreSuggestedValues(this._hasPreSuggestedValues)},$destructor:function(){var e=this._jsonUtils,t=this.data;this._dropdown&&(this._dropdown.isOpen()?this._dropdown.close():this._onDropDownClose()),this._cfg.allowRichContent||this._textField.$dispose(),e.removeListener(t,"highlightedIdx",this._highlightedIdxListener),e.removeListener(t,"selectedIdx",this._selectedIdxListener),e.removeListener(t,"showAll",this._showAllListener),e.removeListener(this.suggestionController.data,"suggestions",this._suggestionListener),e.removeListener(t,"selectedOption",this._selectedOptionListener),e.removeListener(this._bindingListeners.value.inside,this._bindingListeners.value.to,this._onChangeValueListener),this._internalDataModelChange=null,this.data=null,this.suggestionController.$dispose(),this._iconDomElt=null,this._selectionFieldDomElt=null,this._srNotificationDomElt=null,this._changeListener=null,this.$Element.$destructor.call(this)},$prototype:{writeMarkup:function(e){if(this.$Element.writeMarkupBegin.call(this,e),this._writeSrNotificationMarkup(e),"none"===this._cfg.iconClass||this._cfg.allowRichContent||this._textField._cfg.attributes.classList.push("with-icon"),this._cfg.allowRichContent){var t=this._cfg.disabled?"":'tabindex="0"',i=this._cfg.disabled?'aria-disabled="true"':'aria-expanded="false"';e.write('<span id="'+this._idSelectionField+'" '+i+' role="combobox"  class="richContentSelection" '+t+">"+this.data.value+"</span>")}else this._textField.writeMarkup(e);this._writeIconMarkup(e),this.$Element.writeMarkupEnd.call(this,e)},writeMarkupBegin:function(){this.$logError(this.INVALID_USAGE,[this.$class,"container"])},writeMarkupEnd:Aria.empty,_writeIconMarkup:function(e){var t=this._cfg.iconClass||"icon-origin";if(this._cfg.allowRichContent)e.write('<span class="richContentIcon" data-role="icon" aria-hidden="true"><span class="caret"></span></span>');else if("none"!==t){var i=this._cfg.iconBtni18n||"tx_pltg_text_autocompleteBtnInfo_AX";e.write('<button type="button" class="input-group-addon autocomplete-btn" data-role="icon" aria-label="'+this._i18n.getLabel(i)+'" "><span class="dropdown-icon '+t+'" data-role="icon" aria-hidden="true"></span></button>')}},_writeSrNotificationMarkup:function(e){e.write('<p role="status" aria-live="polite" class="plnext-sr-only"></p>')},initWidget:function(){this._cfg.allowRichContent?this.$Element.initWidget.call(this):(this._textField.initWidget(),this.$Element.initWidget.call(this),this._srNotificationDomElt=this._domElt.children[0]),this._selectionFieldDomElt=this._domElt.children[1],this._iconDomElt=this._domElt.children[2],this._cfg.lazy||plnextv2.utils.widgets.plnextLib.LazyLoader.load(this.$classpath),""==this._selectionFieldDomElt.value&&this._reportValueToDataModel(),this._selectionFieldDomElt.setAttribute("aria-owns",this.data.autocompleteBoxId)},getId:function(){return this._cfg.id},_reportValueToDataModel:function(){var e,t=this._bindingListeners;if(this._domElt){var i=this._prepareTransform(void 0,this._domElt.value,"fromWidget");if(t&&t.value&&(e=t.value,"object"==typeof i)){var n=this._getObjectFromSuggestion(i);this._jsonUtils.setValue(e.inside,e.to,n),this._changeListener&&this.$callback(this._changeListener,n)}}},_prepareTransform:function(e,t,i){var n=null;if("fromWidget"==i){if(n=this._interpret(t),n&&"undefined"!=typeof n){this.onbind("value",n,t);{n.label?n.label:""}return n}return{}}return t?(null!=t&&"object"==typeof t&&(t=null!=t?this._getLabelFromSuggestion(t):""),n=this._TextField._transform.call(this,e,t,i),t):""},_interpret:function(e){var t,i,n=null,s=this.data.selectedIdx,a=this.data.highlightedIdx,r=this.suggestionController.data.suggestions,o=this._bindingListeners;return o&&o.value&&(t=o.value,i=t.inside[t.to]),n=this._keyCode!=aria.DomEvent.KC_ESCAPE||this._cfg.allowRichContent?(s||0===s)&&s>=0?r[s]:r&&r.length>0&&a>=0?r[a]:i&&"object"==typeof i&&this._getLabelFromSuggestion(i)==e?i:e:this._buffer},_showAllSuggestions:function(){this.data.showAll&&this.suggestionController._resourcesHandler.getAllSuggestions({fn:this._allSuggestionsCallback,scope:this,args:{}})},_allSuggestionsCallback:function(e){this._jsonUtils.setValue(this.suggestionController.data,"suggestions",e),this._jsonUtils.setValue(this.data,"showAll",!1),this._resetIdxs(),this._cfg.allowRichContent&&this._setExpandedState(!0)},_setFocus:function(e){var t=this._dropdown;(t.isOpen()||e)&&this._textField.focus()},_closeDropdown:function(){var e=this._dropdown;e.isOpen()&&e.close()},_getDropDownConfig:function(){var e={data:this.data,context:this._context,controller:this.suggestionController,acController:this,template:this._cfg.suggestionsTemplate,allowRichContent:this._cfg.allowRichContent,domReference:this._selectionFieldDomElt,lineNumber:this._lineNumber,ignoreClicksOn:[this._iconDomElt,this._selectionFieldDomElt],onAfterClose:{fn:this._onDropDownClose,scope:this},sclass:this._cfg.sclass||"std",customLabels:this._cfg.customLabels||{}};return e},_getTextFieldConfig:function(){var e=this._cfg,t=this._jsonUtils.copy(e.textField),i=aria.core.Browser;t.id=this._idSelectionField,e.placeholder&&(t.placeholder=e.placeholder),e.autoselect&&(t.autoselect=e.autoselect),t.bind={value:{to:"value",inside:this.data}},t.on=t.on||{};var n=t.on,s=["keydown","paste","cut","type","click","blur"],a=["_onSelectionFieldKeydown","_onTextFieldCutOrPaste","_onTextFieldCutOrPaste","_onTextFieldType","_onTextFieldClick","_onTextFieldBlur"],r=e.showSuggestionsOnFocus;null!=r&&r&&(s.push("focus"),a.push("_showSuggestionsOnFocus"));for(var o=0,l=s.length;l>o;o++){var c=s[o];this._chainListener(n,c,{fn:this[a[o]],scope:this})}return t.attributes={},t.attributes.autocomplete=i.isChrome?"disabled":"off",(e.readOnly||e.allowRichContent)&&(t.attributes.readonly="true"),e.textField.formControlClass&&(t.attributes.classList=[e.textField.formControlClass]),t.attributes.aria=e.attributes.aria,t},_registerListeners:function(e,t){if(!e.disabled){var i=e.on,n=e.on.change;n&&(delete e.on.change,this._changeListener=this.$normCallback.call(t._tpl,n)),e.allowRichContent&&this._chainListener(i,"keydown",{fn:this._onSelectionFieldKeydown,scope:this}),this._chainListener(i,"click",{fn:this._onclick,scope:this})}},_getLabelFromSuggestion:function(e){return this.suggestionController._resourcesHandler.suggestionToLabel(e)},_getObjectFromSuggestion:function(e){var t=this.suggestionController._resourcesHandler.suggestionToHandlerObject(e);return this._isEmpty(t)&&(t=null),""!==this._selectionFieldDomElt.value&&this._allowValuesNotListed===!0&&null===t&&(t=this._selectionFieldDomElt.value),t},_isEmpty:function(e){var t=Object.prototype.hasOwnProperty;if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;for(var i in e)if(t.call(e,i))return!1;return!0},onbind:function(e,t){"value"===e&&"object"==typeof t?(t=null!=t?this._getLabelFromSuggestion(t):"",t===this.data.value&&this._jsonUtils.setValue(this.data,"value",null),this._jsonUtils.setValue(this.data,"value",t)):"value"===e&&"string"==typeof t&&this._cfg.oneToOneMatch&&this._onChangeValueToWidget()},_onHighlightChange:function(e){var t=e.newValue;if(t>=0){var i=this.data.items[t].label;this._domElt.value=i,this._cfg.allowRichContent&&(this._selectionFieldDomElt.innerHTML=this.data.items[t].value.label,this._dropdown._setSize())}},_onSelectionChange:function(e){this._suggestionsOff=!0;var t=e.newValue;if(t>=0&&this.data.items.length>0){var i=this.data.items[t].label;if(this._domElt.value=i,this._cfg.allowRichContent?e.oldValue!=e.newValue&&(this._selectionFieldDomElt.innerHTML=this.data.items[t].value.label,this._reportValueToDataModel()):this._reportValueToDataModel(),this._cfg.on.blur)for(var n=0;n<this._cfg.on.blur.length;n++){var s=this._cfg.on.blur[n];s.fn.apply(s.scope,[null,s.args,void 0])}}},_onSuggestionsChange:function(){var e=plnextv2.utils.widgets.plnextLib;if(e.LazyLoader.isLoaded(this.$classpath)){var t=this.suggestionController.data.suggestions;this._dropdown||(this._dropdown=new e.autocompleteBox.AutocompleteBoxDropDown(this._getDropDownConfig()));var i=this._dropdown;t&&0!==t.length?(this._resetIdxs(),i.isOpen()?i.refresh():(this._resetIdxs(),i.open()),this._cfg.customLabels&&this._updateSrNotification(1==t.length?this._cfg.customLabels.srNotificationSingleResult:this._i18n.getStringFromPattern(this._cfg.customLabels.srNotification,[t.length]))):i.isOpen()?""==this.data.textValue?i.close():(i.refresh(),this._cfg.customLabels&&this._updateSrNotification(this._cfg.customLabels.noMatches)):""!=this.data.textValue&&(this._resetIdxs(),i.open(),this._cfg.customLabels&&this._updateSrNotification(this._cfg.customLabels.noMatches))}else e.LazyLoader.load(this.$classpath,{fn:this._onSuggestionsChange,scope:this})},_onDropDownClose:function(){var e=null;this._dropdown&&(e=this._dropdown.closeEvent,this._dropdown.$dispose(),this._dropdown=null),e&&e==aria.DomEvent.KC_TAB||this._selectionFieldDomElt.focus(),e&&e!=aria.DomEvent.KC_ESCAPE&&(this._allowValuesNotListed&&(this._domElt.value!==this.data.value&&(this._domElt.value=this.data.value),this._reportValueToDataModel()),this._jsonUtils.setValue(this.data,"value",this.data.value),this._cfg.allowRichContent||this._textField.callChangeListener()),this._jsonUtils.setValue(this.data,"selectedOption",null),this._cfg.allowRichContent&&(this._setExpandedState(!1),e&&e==aria.DomEvent.KC_TAB&&this._jsonUtils.setValue(this.data,"selectedIdx",this.data.highlightedIdx)),this._updateSrNotification("")},_onclick:function(e){("icon"==e.target.getData("role")||this._cfg.allowRichContent)&&this._openDropdownOnClick()},_triggerDropDown:function(){this._dropdown||(this._dropdown=new plnextv2.utils.widgets.plnextLib.autocompleteBox.AutocompleteBoxDropDown(this._getDropDownConfig()));var e=this._dropdown;e.isOpen()?e.close():"object"==typeof this.data.value&&(this._jsonUtils.setValue(this.data,"value",this.data.value),e.open())},_resetIdxs:function(){var e=this.data;delete e.oldHighlightedIdx,0!==e.preselect||this._isShowingPreSuggestedValues?-1==e.preselect||this._isShowingPreSuggestedValues?e.highlightedIdx=-1:1==e.preselect&&(e.highlightedIdx=this._getIndexSelectedItem()):e.highlightedIdx=0,this._cfg.allowRichContent||(this._jsonUtils.setValue(this.data,"selectedOption",null),e.selectedIdx=null),e.highlightedFooter=!1},_onSelectionFieldKeydown:function(e){this._keyCode=e.keyCode;var t=this._keyCode,i=(aria.core.Browser,aria.DomEvent),n=this._jsonUtils,s=this.data,a=this._dropdown&&this._dropdown.isOpen();if(t!=i.KC_UP&&(t!=i.KC_DOWN||!a)&&t!=i.KC_ESCAPE){this._buffer=this._selectionFieldDomElt.value,this._suggestionsOff=!1;var r=aria.utils.Caret.getPosition(this._selectionFieldDomElt);this._caretDifferent=r.start!=r.end}if(s.multiKey)s.multiKeyPrev!=t&&n.setValue(s,"multiKey",!1);else if(n.setValue(s,"multiKey",!0),n.setValue(s,"multiKeyPrev",t),setTimeout(function(){n.setValue(s,"multiKey",!1)},s.multipleKeyTimeOut),t==i.KC_DOWN)if(e.preventDefault(),a){this._suggestionsOff=!0;var o=s.highlightedIdx,l=s.items.length-1;this.data.highlightedFooter?(this.data.oldHighlightedIdx=-1,n.setValue(s,"highlightedFooter",!1)):-1==o?(s.oldHighlightedIdx=0,n.setValue(s,"highlightedIdx",0)):null!=o&&o>=0&&l>o?(s.oldHighlightedIdx=o,n.setValue(s,"highlightedIdx",o+1)):0==l&&null==s.selectedOption?n.setValue(s,"initSR",!0):this._cfg.readOnly||this._cfg.itemHighlighted!=l&&-1!=l||(s.oldHighlightedIdx=-1==l?-1:o,s.highlightedIdx=-1,n.setValue(s,"highlightedFooter",!0),e.preventDefault())}else{if(!this._buffer||0==this._buffer.length)return a&&this._dropdown.close(),this._hasPreSuggestedValues?this.suggestionController.suggestValue(this._buffer):n.setValue(this.data,"showAll",!0),!0;this.data.textValue=this._buffer,this._cfg.readOnly||this.suggestionController.suggestValue(this._buffer)}else if(t==i.KC_UP){if(e.preventDefault(),this.data.highlightedFooter)-1!=s.oldHighlightedIdx&&n.setValue(s,"highlightedIdx",s.oldHighlightedIdx),n.setValue(s,"highlightedFooter",!1);else if(a){this._suggestionsOff=!0;var o=s.highlightedIdx;o>0&&(s.oldHighlightedIdx=o,n.setValue(s,"highlightedIdx",o-1))}}else if(t==i.KC_ENTER&&s.highlightedFooter)n.setValue(this.data,"showAll",!0),e.preventDefault();else if(t==i.KC_ENTER||t==i.KC_TAB||t==i.KC_ESCAPE&&this._cfg.allowRichContent)if(a){if(s.highlightedIdx>=0&&n.setValue(s,"selectedIdx",s.highlightedIdx),!this._cfg.allowRichContent){var c=this._selectionFieldDomElt.value,d=this._selectionFieldDomElt.selectionStart;this._reportValueToDataModel(),this._selectionFieldDomElt.value=c,this._selectionFieldDomElt.setSelectionRange(d,d)}this._dropdown.close(),t==i.KC_ENTER?e.preventDefault():t==i.KC_ESCAPE&&e.stopPropagation()}else t==i.KC_ENTER&&(this._reportValueToDataModel(),this._cfg.allowRichContent&&this._openDropdownOnClick());else t==i.KC_ESCAPE&&a&&(this._dropdown.close(),n.setValue(s,"selectedIdx",-1),n.setValue(s,"highlightedIdx",-1),this._reportValueToDataModel());return!0},_onTextFieldType:function(){var e=this._selectionFieldDomElt.value,t=aria.DomEvent,i=aria.core.Browser;if(this._isShowingPreSuggestedValues=this._hasPreSuggestedValues&&""===e?!0:!1,!this._suggestionsOff&&this._keyCode!=t.KC_ESCAPE&&this._keyCode!=t.KC_TAB&&(e!=this._buffer||this._caretDifferent)||i.isAndroid&&i.isChrome){this.data.textValue=e;var n=this._keyCode!=t.KC_ENTER&&this._keyCode!=t.KC_TAB&&this._keyCode!=t.KC_DOWN&&this._keyCode!=t.KC_UP&&this._keyCode!=t.KC_LEFT&&this._keyCode!=t.KC_RIGHT&&this._keyCode!=t.KC_CTRL&&this._keyCode!=t.KC_SHIFT&&this._keyCode!=t.KC_ALT;if(n){var s=e,a=this._selectionFieldDomElt.selectionStart;this._selectionFieldDomElt.value="";var r,o=this._bindingListeners;o&&o.value&&(r=o.value,this._jsonUtils.setValue(r.inside,r.to,null)),e=this._selectionFieldDomElt.value=s,this._selectionFieldDomElt.setSelectionRange(a,a)}this._cfg.readOnly?this._openDropdownOnClick():(this.suggestionController.suggestValue(e),n&&""!=this._selectionFieldDomElt.value&&!this._dropdown.isOpen()&&this._dropdown.open()),this._buffer=e}},_onTextFieldClick:function(){this._cfg.autoselect&&(this._textField._firstFocus=!0,this._textField._autoselect()),this._cfg.readOnly&&this._openDropdownOnClick()},_onTextFieldCutOrPaste:function(e){0===e.keyCode&&(this._onSelectionFieldKeydown({keyCode:0}),aria.core.Timer.addCallback({fn:this._onTextFieldType,scope:this,delay:10}))},_onTextFieldBlur:function(e){var t=this._selectionFieldDomElt.value.trim();""==t&&this._reportValueToDataModel(),this.data.cancelBlurPropagation&&(e.stopPropagation(),this.data.cancelBlurPropagation=!1)},_openDropdownOnClick:function(){var e=this._dropdown;e&&e.isOpen()?e.close():(this._jsonUtils.setValue(this.data,"showAll",!0),this._selectionFieldDomElt.focus())},_updateSrNotification:function(e){var t=this._srNotificationDomElt;t&&(jQuery(t).empty(),jQuery(t).html(e))},_selectedOptionChange:function(e){e.newValue?this._selectionFieldDomElt.setAttribute("aria-activedescendant",e.newValue):this._selectionFieldDomElt.removeAttribute("aria-activedescendant")},_showSuggestionsOnFocus:function(){if(""!==this.data.value&&null!=this.data.value&&!this.data.fromClick){var e=this._selectionFieldDomElt.selectionStart,t=this._selectionFieldDomElt.selectionEnd;this._buffer="",this._suggestionsOff=!1,this._keyCode=0,this._onTextFieldType(),this._reportValueToDataModel(),this._selectionFieldDomElt.setSelectionRange(e,t)}!this.data.value&&this._hasPreSuggestedValues&&(this._isShowingPreSuggestedValues=!0,this._resetIdxs(),this._dropdown||(this._dropdown=new plnextv2.utils.widgets.plnextLib.autocompleteBox.AutocompleteBoxDropDown(this._getDropDownConfig())),this.suggestionController.suggestValue("")),this.data.fromClick=!1},_getIndexSelectedItem:function(){if(this.data.value&&this.suggestionController)for(var e=this.suggestionController._resourcesHandler._suggestions,t=0;t<e.length;t++)if(e[t].original.label==this.data.value)return t;return 0},_setExpandedState:function(e){this._selectionFieldDomElt.setAttribute("aria-expanded",e)},_onChangeValueToWidget:function(){var e=this._getCurrentLabel();this.data.value!=e&&(this._jsonUtils.setValue(this.data,"value",e),this._selectionFieldDomElt.innerHTML=e)},_getCurrentLabel:function(){for(var e=this.suggestionController._resourcesHandler._suggestions,t=this._bindingListeners.value.inside[this._bindingListeners.value.to],i=0;i<e.length;i++)if(e[i].original.code==t)return e[i].original.label;return e.length>0?e[0].original.label:""}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/autocompleteBox/AutocompleteBoxDropDown.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.autocompleteBox.AutocompleteBoxDropDown",$extends:"plnextv2.utils.widgets.light.DropDown",$dependencies:["aria.utils.Dom","aria.utils.Json","aria.popups.Popup","aria.html.Template","aria.utils.Event","aria.core.Timer"],$statics:{ZINDEX:16777273},$constructor:function(e){this.$DropDown.constructor.call(this,e),this.data=e.data,this._popupStatusListener={fn:this._onpopupStatusChange,scope:this},aria.utils.Json.addListener(this.data,"popupOpen",this._popupStatusListener),aria.utils.Json.addListener(this.data,"onMouseClickClose",this._onMouseClickClose),aria.utils.Event.addListener(window,"scroll",{fn:this._setSize,scope:this},!0),this._templateInstance=null,this._sclass=e.sclass,this._customLabels=e.customLabels,this._allowRichContent=e.allowRichContent,this._allowRichContent&&(aria.popups.PopupManager.baseZIndex=this.ZINDEX,aria.popups.PopupManager.currentZIndex=this.ZINDEX)},$destructor:function(){aria.utils.Json.removeListener(this.data,"popupOpen",this._popupStatusListener),aria.utils.Json.removeListener(this.data,"onMouseClickClose",this._onMouseClickClose),aria.utils.Event.removeListener(window,"scroll",{fn:this._setSize,scope:this},!0),this.data=null,this._popupStatusListener=null,this.$DropDown.$destructor.call(this)},$prototype:{_onpopupStatusChange:function(e){e.newValue||this.close()},open:function(){this.$DropDown.open.call(this),aria.utils.Json.setValue(this.data,"popupOpen",!0)},_setSize:function(){if(this.isOpen()){var e=this._popup.getDomElement(),t=this._cfg.domReference,i=Math.max(document.documentElement.clientHeight,window.innerHeight||0),n=t.parentNode.getBoundingClientRect().top,s=i-(n+t.getBoundingClientRect().height),a=e.querySelector(".autocompleteBox-suggestions");if(null==a)return void aria.core.Timer.addCallback({fn:this._setSize,scope:this,delay:100});if(this._allowRichContent){var r=e.querySelector(".richContent .autocompleteBox-container");r&&(r.style.cssText="width: "+t.offsetWidth+"px")}else{var o=e.clientHeight-a.clientHeight+t.getBoundingClientRect().height,l=null;n>s?(a.style.cssText="max-height: "+Math.floor(n-o)+"px;",l=[{reference:"top left",popup:"bottom left"},{reference:"bottom left",popup:"top left"}]):(a.style.cssText="max-height: "+Math.floor(s-o)+"px;",l=[{reference:"bottom left",popup:"top left"},{reference:"top left",popup:"bottom left"}]),this._popup.setPreferredPositions(l)}this._popup.refresh(),this._popup.updatePosition()}},_onAfterClose:function(){aria.utils.Json.setValue(this.data,"popupOpen",!1,this._popupStatusListener),this.$DropDown._onAfterClose.call(this)},_contentWriter:function(e){this._prepareDataForTemplate();var t=[this._sclass+"acListContainer"];this._allowRichContent&&t.push("richContent");var i={classpath:this._cfg.template,data:this.data,attributes:{classList:t}},n=new aria.html.Template(i,this._cfg.context,this._cfg.lineNumber);e.registerBehavior(n),n.writeMarkup(e),this._templateInstance=n},refresh:function(){this._prepareDataForTemplate(),this._templateInstance.subTplCtxt.$refresh(),this._setSize()},_prepareDataForTemplate:function(){var e=this._cfg,t=e.controller.data,i=this._prepareSuggestionsAndMatch(t.suggestions,this.data.textValue),n=this._mergeItemsAndSelectionInfo(t.newsuggestions,t.suggestions,i),s={};s.cssClassItem="autocompleteBox-item",s.cssClassEnabled="autocompleteBox-item-enabled",s.cssClassSelected="autocompleteBox-item-selected",s.cssClassDisabled="autocompleteBox-item-disabled",s.cssClassMouseover="autocompleteBox-item-mouseOver",s.cssClassFooter="autocompleteBox-footer",s.cssClassFooterMenu="autocompleteBox-footer-menu",s.cssClassShowAll="autocompleteBox-footer-showAll",s.cssClassShowAllSelected="autocompleteBox-footer-showAll-selected",this.data.items=n.items,this.data.skin=s,this.data.customLabels=this._customLabels,this.data.controller=this._cfg.acController,this.data.displayRichContentOnly=this._allowRichContent,this.data.selectedIdx=null},_prepareSuggestionsAndMatch:function(e,t){var i,n=-1;this._cfg.controller.data.newsuggestions=[];for(var s,a=0,r=e.length;r>a;a+=1){i=e[a],-1==n&&i.exactMatch&&(n=a),s=this._getLabelFromSuggestion(i);var o={entry:t,label:s,value:i};this._cfg.controller.data.newsuggestions[a]=o}return n},_getLabelFromSuggestion:function(e){return this._cfg.controller._resourcesHandler.suggestionToLabel(e)},_mergeItemsAndSelectionInfo:function(e,t,i){var n,s=aria.utils.Array;i=void 0===n?i:n;var a=this._getTrueMaxSelectedCount(e),r=!0,o=e,l="label",c="value",d="disabled";aria.utils.Type.isArray(e)||(o=e.container,l=e.labelProperty,c=e.valueProperty,d=e.disabledProperty);for(var p=[],_=-1,u=0,h=0,m=o.length;m>h;h++){var f=o[h],g=t?s.contains(t,f[c])||i===h:!1;e[h].disabled&&(g=!1),g&&(a>u?(u++,null!=_&&(_=-1==_?h:null)):(r=!0,g=!1));var b=d?f[d]:!1;p[h]={index:h,label:f[l],value:f[c],object:f,selected:g,initiallyDisabled:b,currentlyDisabled:b}}if(u==a)for(var h=0,m=p.length;m>h;h++)p[h].selected||(p[h].currentlyDisabled=!0);return{items:p,pbMaxSelected:r,selectedIndex:_,selectedCount:u}},_getTrueMaxSelectedCount:function(e){var t=this._cfg.controller.data,i=t.multipleSelect?t.maxSelectedCount:1;return null==i&&(null==e&&(e=t.items),i=1+e.length),this.$assert(268,i>=1),i},_onMouseClickClose:function(){this.closeEvent=aria.DomEvent.KC_TAB},_onAfterOpen:function(){this._setSize()}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/autocompleteBox/countryCodeTpl/CountryCodeTemplate.tpl
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/widgets/plnextLib/autocompleteBox/countryCodeTpl/CountryCodeTemplateScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.autocompleteBox.countryCodeTpl.CountryCodeTemplate",$extends:require("plnextv2/utils/widgets/plnextLib/autocompleteBox/defaultTpl/DefaultTemplate.tpl"),$constructor:function(){this.$DefaultTemplate.constructor.call(this),this.$CountryCodeTemplateScript.constructor.call(this)},$destructor:function(){this.$CountryCodeTemplateScript.$destructor.call(this),this.$DefaultTemplate.$destructor.call(this)},$css:[require("plnextv2/utils/widgets/plnextLib/autocompleteBox/countryCodeTpl/CountryCodeTemplateStyle.tpl.css")],$prototype:{macro_main:function(){try{with(this){var customLabels=data.customLabels;this.__$write('\n<div id="',25),this.__$write(this.data.autocompleteBoxId,25),this.__$write('" class="autocompleteBox-container">\n',25),this.__$insertSection(26,{id:"Items",macro:"renderItemsList"}),0==this.data.items.length&&(this.__$write('\n<div class="no-matches"><span class="no-matches-text">',33),this.__$write(customLabels.noMatches,33),this.__$write("</span></div>\n",33)),this.__$write("\n</div>\n",35)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderItemsList:function(){try{with(this){var items=[data.items],customLabels=data.customLabels;data.hasPreSuggestedValues&&_hasPreSuggestions(items)&&(this.__$write('\n<span class="autocompleteBox-suggested-values">',46),this.__$write(this._i18n.getLabel("tx_pltg_text_SuggestedValues"),46),this.__$write("</span>\n",46)),this.__$write('\n<ol class="autocompleteBox-suggestions" role="listbox"\n',48),this.__$statementOnEvent("mouseup",this.$normCallback({fn:"itemClick"}),49),this.__$statementOnEvent("mousedown",this.$normCallback({fn:"itemMouseDown"}),50),this.__$statementOnEvent("mouseover",this.$normCallback({fn:"itemMouseOver"}),51),this.__$writeId("suggestionsRows",52),this.__$write(" >\n",52),itemIndex=0;for(var key in items)this.macro_renderGroup(key,items[key],customLabels);this.__$write("\n</ol>\n",57)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderItemsList",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderItem:function(item,key,customLabels){try{with(this)this.__$write('\n<li tabindex="-1" ',68),this.__$writeId("itemIdx"+itemIndex,68),this.__$write(' title="',68),this.__$write(_getLabel(item,!1),68),this.__$write('" class="',68),this.__$write(_getClassForItem(itemIndex),68),this.__$write('" data-itemIdx="',68),this.__$write(itemIndex,68),this.__$write('" role="option">\n\n',68),this.__$write(_getLabel(item,!0),70),this.__$write("\n</li>\n",71),itemIndex+=1}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderItem",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.widgets.plnextLib.autocompleteBox.countryCodeTpl.CountryCodeTemplateScript,e)},__$initTemplate:function(){return this.$DefaultTemplate.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/autocompleteBox/countryCodeTpl/CountryCodeTemplateScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.autocompleteBox.countryCodeTpl.CountryCodeTemplateScript",$extends:"plnextv2.utils.widgets.plnextLib.autocompleteBox.defaultTpl.DefaultTemplateScript",$dependencies:["plnextv2.utils.I18n","aria.utils.Path"],$statics:{PATTERN:"$1 ($2)"},$constructor:function(){this._i18n=plnextv2.utils.I18n,this.$DefaultTemplateScript.constructor.call(this)},$prototype:{_onFooterKbNavigation:function(){var e=this.data.controller;e&&this.data.popupOpen&&e._closeDropdown()},_hasPreSuggestions:function(e){var t=e&&e[0]&&e[0][0];if(!t)return!1;var i=aria.utils.Path.describe(t,"value.codeRender.isPreSuggestion");return i&&i.value},_getLabel:function(e,t){var i=e.value;return this.PATTERN.replace("$1",this.__highlight(i.label,i.labelRender,t)).replace("$2",this.__highlight(i.code,i.codeRender,t))},__highlight:function(e,t,i){return t.match&&i?(substring=e.substring(t.position,t.length),t.val.replace(this.createRegEx(substring),'<span class="highlight-suggestion">'+substring+"</span>")):t.val}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/autocompleteBox/countryCodeTpl/CountryCodeTemplateStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.autocompleteBox.countryCodeTpl.CountryCodeTemplateStyle",$extends:require("plnextv2/utils/widgets/plnextLib/autocompleteBox/defaultTpl/DefaultTemplateStyle.tpl.css"),$constructor:function(){this.$DefaultTemplateStyle.constructor.call(this)},$destructor:function(){this.$DefaultTemplateStyle.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.macro_defaultTplRules(),this.__$write("\n\n.no-matches {\nmargin-bottom: 10px;\n}\n\n.no-matches-text {\npadding-left: 5px;\n}\n\n.highlight-suggestion {\nfont-weight: bold;\n}\n\n.autocompleteBox-container {\nwidth: 19em;\n}\n\n.autocompleteBox-item {\nwhite-space: nowrap;\npadding-right: 1.5em;\noverflow: hidden;\ntext-overflow: ellipsis;\n}\n\n.autocompleteBox-item:hover {\ncursor: pointer;\n}\n\n\n.autocompleteBox-suggested-values {\ncolor:  ",9),this.__$write(this.$grayDark,39),this.__$write(";\nfont-weight: ",39),this.__$write(this.$normal,40),this.__$write(";\nfont-size: 14px;\nfont-family: 'Roboto', sans-serif;\npadding-left: 5px;\n}\n",40)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$DefaultTemplateStyle.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/autocompleteBox/defaultTpl/DefaultTemplate.tpl
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/widgets/plnextLib/autocompleteBox/defaultTpl/DefaultTemplateScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.autocompleteBox.defaultTpl.DefaultTemplate",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$DefaultTemplateScript.constructor.call(this)},$destructor:function(){this.$DefaultTemplateScript.$destructor.call(this),this.$Template.$destructor.call(this)},$css:[require("plnextv2/utils/widgets/plnextLib/autocompleteBox/defaultTpl/DefaultTemplateStyle.tpl.css")],$prototype:{macro_main:function(){try{with(this){{data.customLabels}this.__$write('\n<div id="',25),this.__$write(this.data.autocompleteBoxId,25),this.__$write('" class="autocompleteBox-container">\n',25),this.__$insertSection(26,{id:"Items",macro:"renderItemsList"}),this.__$write("\n</div>\n",30)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderItemsList:function(){try{with(this){var items=[data.items],customLabels=data.customLabels;this.__$write('\n\n<ol class="autocompleteBox-suggestions" role="listbox"\n',36),this.__$statementOnEvent("click",this.$normCallback({fn:"itemClick"}),38),this.__$statementOnEvent("mousedown",this.$normCallback({fn:"itemMouseDown"}),39),this.__$statementOnEvent("mouseover",this.$normCallback({fn:"itemMouseOver"}),40),this.__$writeId("suggestionsRows",41),this.__$write(" >\n",41),itemIndex=0;for(var key in items)this.macro_renderGroup(key,items[key],customLabels);this.__$write("\n</ol>\n",46)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderItemsList",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderGroup:function(key,items,customLabels){try{with(this)for(var x=0,l=items.length;l>x;x++){var key=0===x&&key,item=items[x];this.macro_renderItem(item,key,customLabels)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderGroup",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderItem:function(item,key,customLabels){try{with(this){this.__$write('\n<li tabindex="-1" ',58),this.__$writeId("itemIdx"+itemIndex,58),this.__$write(' class="',58),this.__$write(_getClassForItem(itemIndex),58),this.__$write('" data-itemIdx="',58),this.__$write(itemIndex,58),this.__$write('" role="option">\n',58);var labelCode="",substring="";item.value.labelRender.match===!0?(substring=item.value.label.substring(item.value.labelRender.position,item.value.labelRender.length),labelCode=item.value.labelRender.val.replace(createRegEx(substring),'<span class="highlight-suggestion">'+substring+"</span>")):labelCode=item.value.labelRender.val,data.displayRichContentOnly||(item.value.codeRender.match===!0?(substring=item.value.code.substring(item.value.codeRender.position,item.value.codeRender.length),labelCode+=" ("+item.value.codeRender.val.replace(substring,'<span class="highlight-suggestion">'+substring+"</span>")+")"):labelCode+=" ("+item.value.codeRender.val+")"),this.__$write(labelCode,83),this.__$write("\n</li>\n",84),itemIndex+=1}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderItem",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},e.__$width={},e.__$height={},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.widgets.plnextLib.autocompleteBox.defaultTpl.DefaultTemplateScript,e)},__$initTemplate:function(){try{with(this)this.itemIndex=0}catch(_ex){return this.$logError(this.EXCEPTION_IN_VARINIT,[this.$classpath],_ex),!1}return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/autocompleteBox/defaultTpl/DefaultTemplateScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.autocompleteBox.defaultTpl.DefaultTemplateScript",$constructor:function(){this._refContainer="suggestionsRows",this._itemShift=0,this.onKbNav={fn:this._onKeyboardNavigation,scope:this},this.onFooterKbNav={fn:this._onFooterKbNavigation,scope:this},this.initSRAttr={fn:this._initSRAttribute,scope:this}},$destructor:function(){this.$json.removeListener(this.data,"highlightedIdx",this.onKbNav),this.$json.removeListener(this.data,"highlightedFooter",this.onFooterKbNav),this.$json.removeListener(this.data,"initSR",this.initSRAttr)},$prototype:{$dataReady:function(){if(void 0!==this.data.preselect){{this.data.preselect}1===this.data.preselect&&(this.$json.setValue(this.data.controller.data,"selectedOption",this.$getId("itemIdx"+this.data.highlightedIdx)),this.data.controller.data.selectedIdx=this.data.highlightedIdx)}},$displayReady:function(){this.$json.addListener(this.data,"highlightedIdx",this.onKbNav),this.$json.addListener(this.data,"highlightedFooter",this.onFooterKbNav),this.$json.addListener(this.data,"initSR",this.initSRAttr)},itemClick:function(e){if(e.preventDefault(),e.stopPropagation(),this.data.fromClick=!0,this.data.popupOpen){var t=e.target.getData("itemIdx",!0);t&&(this.$json.setValue(this.data.controller.data,"selectedIdx",parseInt(t,10)),this.$json.setValue(this.data.controller.data,"popupOpen",!1))}},itemMouseDown:function(e){this.data.cancelBlurPropagation=!0,e.stopPropagation()},itemMouseOver:function(e){if(this.data.popupOpen){var t=e.target.getData("itemIdx",!0);if(t){var i=this.data.highlightedIdx,n=parseInt(t,10);this.data.oldHighlightedIdx=i,this.data.highlightedIdx=n,i>=0&&this.$getElementById("itemIdx"+i).classList.setClassName(this._getClassForItem(i)),this.$getElementById("itemIdx"+n).classList.setClassName(this._getClassForItem(n))}}},_getClassForItem:function(e){var t=[this.data.skin.cssClassItem];return e==this.data.highlightedIdx&&t.push(this.data.skin.cssClassSelected),t.push(this.data.disabled?this.data.skin.cssClassDisabled:this.data.skin.cssClassEnabled),t.join(" ")},_onKeyboardNavigation:function(e){if(0===this.data.preselect&&null==this.data.selectedOption){this.$json.setValue(this.data.controller.data,"selectedOption",this.$getId("itemIdx0")),this.data.highlightedIdx=0;var t=this.$getElementById("itemIdx0");return void t.classList.setClassName(this._getClassForItem(0))}var i=e.newValue;if(e.oldValue!=this.data.oldHighlightedIdx)var n=this.data.oldHighlightedIdx;else var n=e.oldValue;var s=i;this.data.highlightedIdx=s,void 0!==n&&this.$getElementById("itemIdx"+n).classList.setClassName(this._getClassForItem(n));{var a=this.$getElementById("itemIdx"+s),r=this.$getElementById("itemIdx"+n),o=jQuery("#"+this.$getId("itemIdx"+s));jQuery("#"+this.$getId("itemIdx"+s))}a.classList.setClassName(this._getClassForItem(s)),a.setAttribute("tabindex","0"),r.setAttribute("tabindex","-1"),this.$json.setValue(this.data.controller.data,"selectedOption",this.$getId("itemIdx"+s));var l=jQuery("#"+this.$getId(this._refContainer));if(l){var c=o.parent().scrollTop()+o.offset().top-o.parent().offset().top,d=.9*l.height(),p=o.parent().scrollTop();c>d+p?l.stop().animate({scrollTop:c},this.data.animationTime):o.parent().scrollTop()>c&&l.stop().animate({scrollTop:c-d},this.data.animationTime)}this.$json.setValue(this.data.controller.data,"highlightedIdx",s)},_initSRAttribute:function(e){e.newValue&&(this.$json.setValue(this.data.controller.data,"selectedOption",this.$getId("itemIdx0")),this.data.initSR=!1)},createRegEx:function(e){var t=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/gi,"\\$&");return new RegExp("("+t+")","i")}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/autocompleteBox/defaultTpl/DefaultTemplateStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.autocompleteBox.defaultTpl.DefaultTemplateStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_defaultTplRules:function(){try{with(this)this.__$write("\n\n.autocompleteBox-container {\nbackground-color: ",8),this.__$write(this.$white,10),this.__$write(";\nborder: 1px solid ",10),this.__$write(this.$grayBorder,11),this.__$write(";\nbox-shadow: 3px 3px 2px ",11),this.__$write(this.$grayDark,12),this.__$write(";\npadding: 0.2em;\nwidth: 20em;\nmargin-top: 0.2em;\n}\n\n.autocompleteBox-suggestions {\nmax-height: 30em;\noverflow:auto;\npadding: 0.1em;\nlist-style-type: none;\n}\n\n.autocompleteBox-input {\ncursor: text !important;\n}\n\n.autocompleteBox-item-enabled {\nbackground-color: ",12),this.__$write(this.$white,30),this.__$write(";\ncolor: ",30),this.__$write(this.$black,31),this.__$write(";\npadding: 5px;\ndisplay: block\n}\n\n.autocompleteBox-item-disabled {\nbackground-color: ",31),this.__$write(this.$white,37),this.__$write(";\ncolor: ",37),this.__$write(this.$orangeLight,38),this.__$write(";\n}\n\n.autocompleteBox-item-mouseOver, .autocompleteBox-item-selected {\nbackground-color: ",38),this.__$write(this.$blue,42),this.__$write(";\ncolor: ",42),this.__$write(this.$white,43),this.__$write(";\n}\n\n.autocompleteBox-item-line{\ndisplay: table-cell;\n}\n\n.richContent .autocompleteBox-container {\nmargin-top: 0;\npadding: 0;\n}\n\n.richContent .autocompleteBox-suggestions {\nmargin: 0;\n}\n\n.richContent .autocompleteBox-item-enabled {\nbackground-color: ",43),this.__$write(this.$grayLight,60),this.__$write(";\nborder: 1px solid ",60),this.__$write(this.$gray,61),this.__$write(";\n}\n\n.richContent .autocompleteBox-item-mouseOver, .richContent .autocompleteBox-item-selected {\nbackground-color: ",61),this.__$write(this.$white,65),this.__$write(";\ncursor: pointer;\ncolor: ",65),this.__$write(this.$black,67),this.__$write(";\nborder: 1px solid ",67),this.__$write(this.$blue,68),this.__$write(";\n}\n\n",68)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["defaultTplRules",__filename,this["aria:currentLineNumber"]],_ex)}},macro_main:function(){try{with(this)this.macro_defaultTplRules()}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/autocompleteBox/destinationTpl/DestinationTemplate.tpl
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/widgets/plnextLib/autocompleteBox/destinationTpl/DestinationTemplateScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.autocompleteBox.destinationTpl.DestinationTemplate",$extends:require("plnextv2/utils/widgets/plnextLib/autocompleteBox/defaultTpl/DefaultTemplate.tpl"),$constructor:function(){this.$DefaultTemplate.constructor.call(this),this.$DestinationTemplateScript.constructor.call(this)},$destructor:function(){this.$DestinationTemplateScript.$destructor.call(this),this.$DefaultTemplate.$destructor.call(this)},$css:[require("plnextv2/utils/widgets/plnextLib/autocompleteBox/destinationTpl/DestinationTemplateStyle.tpl.css")],$prototype:{macro_main:function(){try{with(this){var customLabels=data.customLabels;this.__$write('\n<div id="',25),this.__$write(this.data.autocompleteBoxId,25),this.__$write('" class="autocompleteBox-container">\n',25),this.__$insertSection(26,{id:"Items",macro:"renderItemsList"}),0==this.data.items.length&&(this.__$write('\n<div class="no-matches"><span class="no-matches-text">',33),this.__$write(customLabels.noMatches,33),this.__$write("</span></div>\n",33)),this.__$write("\n\n\n<div ",35),this.__$writeId("autocompleteBoxFooter",37),this.__$write(' class="',37),this.__$write(this.data.skin.cssClassFooter,37),this.__$write('">\n<ul role="menu" class="',37),this.__$write(this.data.skin.cssClassFooterMenu,38),this.__$write('">\n<li role="menuitem" ',38),this.__$writeId("autocompleteBoxFooterShowAll",39),this.__$write(' class="',39),this.__$write(this.data.skin.cssClassShowAll,39),this.__$write('" ',39),this.__$statementOnEvent("click",this.$normCallback({fn:"showAllSuggestions"}),39),this.__$write(">",39),this.__$write(customLabels.showAllDestinations,39),this.__$write("</li>\n</ul>\n</div>\n</div>\n",39)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderItem:function(item,key,customLabels){try{with(this)this.__$write("\n<li ",46),this.__$writeId("itemIdx"+itemIndex,46),this.__$write(' class="',46),this.__$write(_getClassForItem(itemIndex),46),this.__$write('" data-itemIdx="',46),this.__$write(itemIndex,46),this.__$write('" role="option">\n<div class="item">\n',46),isDynamicAirportEnabled()?(this.__$write('\n<span class="autocompleteBox-item-line">\n',49),item.value.airportDetails&&item.value.airportDetails.provinceCode?(this.__$write(item.value.cityName,51),this.__$write(" - ",51),this.__$write(item.value.airportDetails.provinceCode,51),this.__$write(", ",51),this.__$write(item.value.countryName,51)):(this.__$write(item.value.cityName,53),this.__$write(" - ",53),this.__$write(item.value.countryName,53)),this.__$write("\n</span>\n",55)):(this.__$write('\n<span class="autocompleteBox-item-line">',57),this.__$write(item.value.cityName,57),this.__$write(" - ",57),this.__$write(item.value.countryName,57),this.__$write("</span>\n",57)),this.__$write("\n<span>\n",59),item.value.labelCustomized?this.__$write(item.value.labelCustomized,61):this.__$write(item.value.label,63),this.__$write("\n</span>\n</div>\n</li>\n",65),itemIndex+=1}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderItem",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.widgets.plnextLib.autocompleteBox.destinationTpl.DestinationTemplateScript,e)},__$initTemplate:function(){return this.$DefaultTemplate.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/autocompleteBox/destinationTpl/DestinationTemplateScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.autocompleteBox.destinationTpl.DestinationTemplateScript",$prototype:{_onFooterKbNavigation:function(e){var t=e.dataHolder,i=this.$getElementById("autocompleteBoxFooterShowAll");i.classList.setClassName(this._getClassForFooter(e.newValue));var n=t.oldHighlightedIdx;if(e.newValue){if(-1!=n){var s=this.$getElementById("itemIdx"+n);s&&s.classList.setClassName(this._getClassForItem(n))}this.$json.setValue(this.data.controller.data,"selectedOption",this.$getId("autocompleteBoxFooterShowAll"))}else if("undefined"!=typeof n&&-1!=n){var a=this.$getElementById("itemIdx"+n);a&&a.classList.setClassName(this._getClassForItem(n))}else{var r=this.data.controller;r&&this.data.popupOpen&&r._closeDropdown()}},showAllSuggestions:function(){this.$json.setValue(this.data.controller.data,"showAll",!0)},_getClassForFooter:function(e){var t=this.data.skin;return e?t.cssClassShowAll+" "+t.cssClassShowAllSelected:t.cssClassShowAll},isDynamicAirportEnabled:function(){var e=plnextv2.utils.context.AppContext.getPageData();if(e.config){var t=e.config.SEARCH_BAR;return t||(t=e.config.SEARCH_BAR_ADVANCED),t&&t.dynamicAirportEnabled}return!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/autocompleteBox/destinationTpl/DestinationTemplateStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.autocompleteBox.destinationTpl.DestinationTemplateStyle",$extends:require("plnextv2/utils/widgets/plnextLib/autocompleteBox/defaultTpl/DefaultTemplateStyle.tpl.css"),$constructor:function(){this.$DefaultTemplateStyle.constructor.call(this)},$destructor:function(){this.$DefaultTemplateStyle.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.macro_defaultTplRules(),this.__$write("\n\n.autocompleteBox-item-line{\ndisplay: table-cell;\n}\n\n.autocompleteBox-footer {\nline-height: 3em;\nbackground-color: ",9),this.__$write(this.$grayLight,16),this.__$write(";\nborder-top: 1px solid ",16),this.__$write(this.$grayBorder,17),this.__$write(";\n}\n\n.autocompleteBox-footer-menu {\npadding-left: 0;\nmargin-bottom: 0;\n}\n\n.autocompleteBox-footer-showAll {\npadding-left: 0.5em;\ncursor: pointer\n}\n\n.autocompleteBox-footer-showAll.autocompleteBox-footer-showAll-selected {\nbackground-color: ",17),this.__$write(this.$blue,31),this.__$write(";\ncolor: ",31),this.__$write(this.$white,32),this.__$write(";\n}\n\n.no-matches {\npadding-bottom: 1em;\n}\n\n",32)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$DefaultTemplateStyle.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/autocompleteBox/style/AutocompleteBoxStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.autocompleteBox.style.AutocompleteBoxStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n.richDropdown {\ndisplay: block;\nborder: 1px solid ",7),this.__$write(this.$gray,9),this.__$write(";\npadding: 5px;\ncursor: pointer;\n}\n\n.richContentSelection {\ndisplay: table-cell;\nwidth:100%;\n}\n\n.richContentIcon {\ndisplay: table-cell;\npadding-right: 5px;\n}\n\n.richDropdown:hover {\nborder: 1px solid ",9),this.__$write(this.$blue,25),this.__$write(";\n}\n\n.richDropdown.disabled {\ncursor: not-allowed;\nbackground-color: ",25),this.__$write(this.$grayLighter,30),this.__$write(";\n}\n\n.richDropdown.disabled:hover {\nborder: 1px solid ",30),this.__$write(this.$gray,34),this.__$write(";\n}\n\n.autocomplete-btn:focus {\noutline: 1px dotted ",34),this.__$write(this.$blueFocusShadow1,38),this.__$write(";\noutline: 5px auto -webkit-focus-ring-color;\n}\n\n.autocomplete-btn {\ndisplay: inline-block;\nwidth: 38px;\nheight: 34px;\nline-height: inherit;\n}\n\n[autocomplete] {\nwidth: 100%;\n}\n\n[autocomplete] > input.form-control {\ndisplay: inline-block;\n}\n[autocomplete] > input.with-icon {\nwidth: calc(100% - 38px);\n}\n\n",38)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/autocompleteBox/textfield/TextField.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.autocompleteBox.textfield.TextField",$extends:"plnextv2.utils.widgets.light.textinput.TextInputWithOnChange",$dependencies:["aria.utils.Date","plnextv2.utils.widgets.plnextLib.autocompleteBox.textfield.TextFieldCfgBeans"],$constructor:function(e,t,i){this.$cfgBean="plnextv2.utils.widgets.plnextLib.autocompleteBox.textfield.TextFieldCfgBeans.Properties",this.$TextInputWithOnChange.constructor.call(this,e,t,i)},$destructor:function(){this.$TextInputWithOnChange.$destructor.call(this)},$prototype:{_transform:function(e,t,i){var n=null;return"string"!=typeof t&&(t=""),"fromWidget"==i?(n=t,this.$TextInputWithOnChange._transform.call(this,e,n,i)):(n=this.$TextInputWithOnChange._transform.call(this,e,t,i),t)},applyTextToData:function(){var e=this._bindingListeners.value,t=this._hasPlaceholder?"":this._domElt.value,i=this._transform(e.transform,t,"fromWidget");aria.utils.Json.setValue(e.inside,e.to,i,e.cb)},_registerListeners:function(){}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/autocompleteWithSteps/core/AutocompleteWithSteps.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.autocompleteWithSteps.core.AutocompleteWithSteps",$extends:"aria.widgetLibs.BindableWidget",$css:["plnextv2.utils.widgets.plnextLib.autocompleteWithSteps.style.AutocompleteWithStepsCss"],$statics:{INVALID_CONFIGURATION:"%1Invalid configuration for the autocomplete with steps widget!",SUGGESTION_VALUE_ATTRIBUTE:"data-value",HIGHLIGHTED_SUGGESTION_CLASS:"active-suggestion",HAS_ERROR_CLASS:"has-error",HIGHLIGHTED_SUGGESTION_NONE:-1,HIDE_SUGGESTIONS_LEFT_CSS:"-999999px",SHOW_SUGGESTIONS_LEFT_CSS:"0",HIDE_FEEDBACK_ICON_CSS:"none",SHOW_FEEDBACK_ICON_CSS:"block",ARIA_ACTIVE_DESCENDANT_ATTRIBUTE:"aria-activedescendant"},$dependencies:["plnextv2.utils.widgets.plnextLib.autocompleteWithSteps.bean.AutocompleteWithStepsCfgBeans","plnextv2.utils.I18n","aria.utils.Event","aria.DomEvent","aria.utils.Json","aria.utils.ClassList"],$constructor:function(e){this.$BindableWidget.constructor.apply(this,arguments),this._i18n=plnextv2.utils.I18n,this._i18n=plnextv2.utils.I18n;var t={beanName:"plnextv2.utils.widgets.plnextLib.autocompleteWithSteps.bean.AutocompleteWithStepsCfgBeans.AutoCompleteWithStepsCfg",json:this._cfg};try{this._cfgOk=aria.core.JsonValidator.normalize(t,!0)}catch(i){this.$logError(this.INVALID_CONFIGURATION,null,i)}this._cfgOk&&(this._registerBindings(),this._steps=this.__deepCopy(this._cfg.steps).sort(this.__compareSteps),this._maxValue=this._steps.length>1?this._getStep(this._steps.length-1).value:0,this._minValue=this._steps.length>1?this._getStep(0).value:0,this._widgetId=this._createDynamicId(),this._domIdNotification=this._widgetId+"-notification",this._domIdInputGroup=this._widgetId+"-input-group",this._domIdInputField=this._widgetId+"-input-field",this._domIdSuggestions=this._widgetId+"-suggestions",this._domIdSuggestionPrefix=this._widgetId+"-suggestion-",this._domIdHelpBlock=this._widgetId+"-help-block",this._domIdFeedbackIcon=this._widgetId+"-feedback-icon",this._highlightedSuggestion=this.HIGHLIGHTED_SUGGESTION_NONE,this._suggestionsAreDisplayed=!1,this._suggestions=[],this._errorInputFormatNotValid=this._cfg.errorInputFormatNotValid,this._errorInputInvalidAmount=this._cfg.errorInputInvalidAmount,this._instancesToDispose=[],this._onValueChange=e.onValueChange)},$destructor:function(){if(this._cfgOk){for(var e=0,t=this._instancesToDispose.length;t>e;++e)this._instancesToDispose[e].$dispose();this._domElemNotification=null,this._domElemInputGroup=null,this._domElemInputField=null,this._domElemSuggestions=null,this._domElemHelpBlock=null,this._domElemFeedbackIcon=null}this.$BindableWidget.$destructor.call(this)},$prototype:{initWidget:function(){this._domElemNotification=this.getElementById(this._domIdNotification),this._domElemInputGroup=this.getElementById(this._domIdInputGroup),this._domElemInputField=this.getElementById(this._domIdInputField),this._domElemSuggestions=this.getElementById(this._domIdSuggestions),this._domElemHelpBlock=this.getElementById(this._domIdHelpBlock),this._domElemFeedbackIcon=this.getElementById(this._domIdFeedbackIcon),aria.utils.Event.addListener(this._domElemInputField,"keyup",{fn:this._keyPressedInField,scope:this},!0),aria.utils.Event.addListener(this._domElemInputField,"keydown",{fn:this._keyDownInField,scope:this},!0),aria.utils.Event.addListener(this._domElemInputField,"focus",{fn:this._focusedField,scope:this},!0),aria.utils.Event.addListener(this._domElemInputField,"blur",{fn:this._blurredField,scope:this},!0),aria.utils.Event.addListener(this._domElemSuggestions,"mousedown",{fn:this._clickOnSuggestion,scope:this},!0),this._hideSuggestions(),this._notifyDataChange()},writeMarkup:function(e){if(this._cfgOk){var t=['<div id="'+this._domIdInputGroup+'" class="autocomplete-steps-container has-feedback">','<label class="autocomplete-steps-label control-label" for="'+this._domIdInputField+'">'+this._cfg.label+"</label>",'<p id="'+this._domIdNotification+'"role="status" aria-live="polite" class="plnext-sr-only"></p>','<span class="autocomplete-steps-field">','<input id="'+this._domIdInputField+'" class="form-control autocomplete-steps-input" autocomplete="off" type="text" aria-owns="'+this._domIdSuggestions+'"/>','<ul id="'+this._domIdSuggestions+'" class="autocomplete-steps-suggestions" role="listbox"></ul>','<span id="'+this._domIdFeedbackIcon+'" class="form-control-feedback icon-exclamation-sign autocomplete-steps-field-icon" style="display: none;" aria-hidden="true">',"</span>","</span>",'<span id="'+this._domIdHelpBlock+'" class="help-block"></span>',"</div>"];e.write(t.join(""))}},_keyPressedInField:function(e){var t=new aria.DomEvent(e);t.keyCode!==t.KC_ARROW_UP&&t.keyCode!==t.KC_ARROW_DOWN&&t.keyCode!==t.KC_ENTER&&(this._isValid(t.target.value)?(this._hideError(),this._showSuggestions()):(this._hideSuggestions(),this._showError(this._errorInputFormatNotValid)))},_keyDownInField:function(e){var t=new aria.DomEvent(e);t.keyCode===t.KC_ARROW_UP||t.keyCode===t.KC_ARROW_DOWN?(e.preventDefault(),0===this._domElemInputField.value.length?this._hideSuggestions():this._suggestionsAreDisplayed?this._changeHighlightedSuggestion(t):this._showSuggestions()):t.keyCode===t.KC_ENTER&&(e.preventDefault(),this._highlightedSuggestion===this.HIGHLIGHTED_SUGGESTION_NONE?(this._hideSuggestions(),0===this._domElemInputField.value.length?this._showError(this._errorInputFormatNotValid):this._isStep(this._domElemInputField.value)||this._showError(this._errorInputInvalidAmount)):this._enterOnHighlightedSuggestion())},_focusedField:function(){0!==this._domElemInputField.value.length&&this._isValid(this._domElemInputField.value)&&this._showSuggestions()},_blurredField:function(){return this._hideSuggestions(),this._isValid(this._domElemInputField.value)?this._isStep(this._domElemInputField.value)?void 0:void this._showError(this._errorInputInvalidAmount):void this._showError(this._errorInputFormatNotValid)},_enterOnHighlightedSuggestion:function(){var e=this._domIdSuggestionPrefix+this._highlightedSuggestion;this._selectSuggestion(this.getElementById(e))},_clickOnSuggestion:function(e){e.preventDefault(),this._selectSuggestion(e.target)},_selectSuggestion:function(e){var t=new aria.templates.DomElementWrapper(e),i=t.getData("value",!0);this._domElemNotification.innerHTML=this._i18n.getStringFromPattern(this._cfg.labelSelectedSuggestion,[i]),this._domElemInputField.value=i,this._refreshValue(),this._hideSuggestions(),t.$dispose()},_changeHighlightedSuggestion:function(e){e.keyCode===e.KC_ARROW_UP?this._updateHighlightedSuggestion(this._highlightedSuggestion-1>=-1?this._highlightedSuggestion-1:this._suggestions.length-1):e.keyCode===e.KC_ARROW_DOWN&&this._updateHighlightedSuggestion(this._highlightedSuggestion+1<=this._suggestions.length-1?this._highlightedSuggestion+1:-1)},_updateHighlightedSuggestion:function(e){var t=this.HIGHLIGHTED_SUGGESTION_CLASS,i=this.ARIA_ACTIVE_DESCENDANT_ATTRIBUTE;if(this._highlightedSuggestion!==this.HIGHLIGHTED_SUGGESTION_NONE){var n=this.getElementById(this._domIdSuggestionPrefix+this._highlightedSuggestion),s=this.getClassList(n);s.remove(t),this._domElemInputField.removeAttribute(i)}if(e!==this.HIGHLIGHTED_SUGGESTION_NONE){var a=this.getElementById(this._domIdSuggestionPrefix+e),r=this.getClassList(a);r.add(t),this._domElemInputField.setAttribute(i,this._domIdSuggestionPrefix+e)}this._highlightedSuggestion=e},_hideSuggestions:function(){this._domElemSuggestions.style.left=this.HIDE_SUGGESTIONS_LEFT_CSS,this._updateHighlightedSuggestion(this.HIGHLIGHTED_SUGGESTION_NONE),this._suggestionsAreDisplayed=!1},_showSuggestions:function(){this._updateSuggestions(this._domElemInputField.value),this._domElemSuggestions.style.left=this.SHOW_SUGGESTIONS_LEFT_CSS,this._suggestionsAreDisplayed=!0},_showError:function(e){var t=this.getClassList(this._domElemInputGroup);t.add(this.HAS_ERROR_CLASS),this._domElemFeedbackIcon.style.display=this.SHOW_FEEDBACK_ICON_CSS,this._domElemHelpBlock.innerHTML=e,this._domElemNotification.innerHTML=e},_hideError:function(){var e=this.getClassList(this._domElemInputGroup);e.remove(this.HAS_ERROR_CLASS),this._domElemFeedbackIcon.style.display=this.HIDE_FEEDBACK_ICON_CSS,this._domElemHelpBlock.innerHTML=""},_updateSuggestions:function(e){this._updateHighlightedSuggestion(this.HIGHLIGHTED_SUGGESTION_NONE),this._suggestions=[];for(var t=0,i=this._steps.length;i>t;++t)if(t===i-1)this._suggestions.push(this._getStep(t)),e==this._getStep(t).value&&this._refreshValue();else{if(e==this._getStep(t).value){this._refreshValue(),this._suggestions.push(this._getStep(t));break}if(e>this._getStep(t).value&&e<this._getStep(t+1).value){this._suggestions.push(this._getStep(t)),this._suggestions.push(this._getStep(t+1));break}}this._updateNotificationLabel(this._suggestions.length),this._domElemSuggestions.innerHTML=this._generateHTMLSuggestions()},_generateHTMLSuggestions:function(){for(var e="",t=0,i=this._suggestions.length;i>t;++t)e+=this._generateHTMLSuggestion(t,this._suggestions[t]);return e},_generateHTMLSuggestion:function(e,t){return'<li id="'+(this._domIdSuggestionPrefix+e)+'" class="autocomplete-steps-suggestion" '+this.SUGGESTION_VALUE_ATTRIBUTE+'="'+t.value+'" role="option">'+t.label+"</li>"},_updateNotificationLabel:function(e){this._domElemNotification.innerHTML=0===e?this._cfg.labelZeroSuggestions:1===e?this._cfg.labelOneSuggestion:this._i18n.getStringFromPattern(this._cfg.labelManySuggestions,[e])},_refreshValue:function(){var e=this._cfg.bind.value;if(e){var t=this._transform(e.transform,this._domElemInputField.value,"fromWidget");aria.utils.Json.setValue(e.inside,e.to,t)}},_notifyDataChange:function(e,t){var i=this._minValue,n=this._bindingListeners[t];n&&("undefined"==typeof n.inside[n.to]&&(n.inside[n.to]=this._minValue),i=this._transform(n.transform,n.inside[n.to],"toWidget")),this._hideError(),this._domElemInputField.value=i,this._onValueChange&&this.$callback(this._onValueChange)},_getStep:function(e){return e>=0&&e<this._steps.length?this._steps[e]:null},_isStep:function(e){for(var t=0,i=this._steps.length;i>t;++t)if(this._getStep(t).value==e)return!0;return!1},_isValid:function(e){return 0===e.length?!1:isNaN(e)?!1:Number(e)<this._minValue?!1:!0},getElementById:function(e){return aria.utils.Dom.getElementById(e)},getClassList:function(e){var t=new aria.utils.ClassList(e);return this._instancesToDispose.push(t),t},__deepCopy:function(e){return JSON.parse(JSON.stringify(e))},__compareSteps:function(e,t){return e.value<t.value?-1:e.value>t.value?1:0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/autocompleteWithSteps/style/AutocompleteWithStepsCss.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.autocompleteWithSteps.style.AutocompleteWithStepsCss",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n.autocomplete-steps-container {\nheight: 34px;\nmargin-bottom: 30px;\n}\n\n.autocomplete-steps-label {\nbackground-color: ",22),this.__$write(this.$grayLighter,29),this.__$write(";\nborder: 1px solid ",29),this.__$write(this.$grayBorder,30),this.__$write(";\nborder-right: 0;\ndisplay: inline-block;\ncolor: ",30),this.__$write(this.$grayDarken,33),this.__$write(";\nmargin: 0;\npadding: 0 12px;\nheight: 100%;\nline-height: 32px;\nvertical-align: top;\n}\n\n.autocomplete-steps-container.has-error .form-control,\n.autocomplete-steps-container.has-error .autocomplete-steps-label {\nborder-color: ",33),this.__$write(this.$warning,43),this.__$write(";\n}\n\n.autocomplete-steps-container.has-error .help-block,\n.autocomplete-steps-container.has-error .control-label {\ncolor: ",43),this.__$write(this.$warning,48),this.__$write(";\n}\n\n.autocomplete-steps-field {\nposition: relative;\ndisplay: inline-block;\n}\n\n.autocomplete-steps-input {\nposition: relative;\nline-height: 32px;\nborder: 1px solid ",48),this.__$write(this.$grayBorder,59),this.__$write(";\nbackground-color: ",59),this.__$write(this.$white,60),this.__$write(";\npadding: 0 5px;\nmargin: 0;\nbox-shadow: inset 0 1px 1px rgba(0,0,0,.075);\n}\n\n.autocomplete-steps-suggestions {\npadding: 0;\nmargin: 0;\nbackground-color: ",60),this.__$write(this.$white,69),this.__$write(";\ncolor: ",69),this.__$write(this.$grayDarken,70),this.__$write(";\nmin-width: 100%;\nposition: absolute;\ntop: 100%;\nleft:0;\nz-index: 10;\nfloat: left;\nlist-style: none;\nfont-size: 14px;\nbox-shadow: 2px 2px 10px 0px ",70),this.__$write(this.$grayLight,79),this.__$write(";\nborder: 1px solid ",79),this.__$write(this.$grayBorder,80),this.__$write(";\n}\n\n.form-control-feedback.autocomplete-steps-field-icon {\ntop: 0;\n}\n\n.autocomplete-steps-suggestions > .autocomplete-steps-suggestion {\npadding: 5px 10px;\n}\n\n.autocomplete-steps-input:focus {\nbox-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6);\nborder: 1px solid ",80),this.__$write(this.$blue,93),this.__$write(";\n}\n\n.autocomplete-steps-suggestion:hover {\ncursor: pointer;\nbackground-color: ",93),this.__$write(this.$blue,98),this.__$write(";\ncolor: ",98),this.__$write(this.$white,99),this.__$write(";\n}\n\n.autocomplete-steps-suggestion.active-suggestion {\nbackground-color: ",99),this.__$write(this.$blue,103),this.__$write(";\ncolor: ",103),this.__$write(this.$white,104),this.__$write(";\n}\n\n",104),this.macro_addMediQueryCssRules()}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},macro_addMediQueryCssRules:function(){try{with(this)this.isLessThanIEVersion(9)||this.macro_addXXXSCssRules()}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["addMediQueryCssRules",__filename,this["aria:currentLineNumber"]],_ex)}},macro_addXXXSCssRules:function(){try{with(this)this.__$write("\n@media (max-width: ",118),this.__$write(this.breakpoints.XXXS_MAX,118),this.__$write(") {\n.autocomplete-steps-label {\nwidth: 25%;\npadding: 0 9px;\n}\n\n.autocomplete-steps-field {\nwidth: 75%;\npadding: 0px;\n}\n}\n",118)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["addXXXSCssRules",__filename,this["aria:currentLineNumber"]],_ex)}},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/button/core/Button.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.button.core.Button",$extends:"aria.widgets.Widget",$css:["plnextv2.utils.widgets.plnextLib.button.style.ButtonCss"],$statics:{INVALID_CONFIGURATION:"%1Invalid configuration for the button widget!",ICON_PLANE:"icon-plane",ICON_CARET_RIGHT:"icon-caret-right",ICON_CARET_LEFT:"icon-caret-left",ICON_REPEAT:"icon-repeat"},$dependencies:["plnextv2.utils.widgets.plnextLib.button.bean.ButtonCfgBeans","aria.utils.Event","aria.DomEvent","plnextv2.utils.HtmlUtils"],$constructor:function(){this.$BaseWidget.constructor.apply(this,arguments);var e={beanName:"plnextv2.utils.widgets.plnextLib.button.bean.ButtonCfgBeans.ButtonCfg",json:this._cfg};try{this._cfgOk=aria.core.JsonValidator.normalize(e,!0)}catch(t){this.$logError(this.INVALID_CONFIGURATION,null,t)}if(this._cfgOk){this._normalizeCfg();var i=this._cfg.bind;i&&(this._bindingCallback={fn:this._notifyDataChange,scope:this},aria.utils.Json.addListener(i.inside,i.to,this._bindingCallback,!1)),this._domButtonId=this._createDynamicId(),this._delegateId=aria.utils.Delegate.add({fn:this._delegate,scope:this}),this._readValue(),this._disableOnLoad=this._cfg.disableOnLoad,this._keyPressed=!1}},$destructor:function(){if(this._delegateId&&(aria.utils.Delegate.remove(this._delegateId),this._delegateId=null),this._bindingCallback){var e=this._cfg.bind;aria.utils.Json.removeListener(e.inside,e.to,this._bindingCallback,!1),this._bindingCallback=null}plnextv2.utils.HtmlUtils.removeElementFromBeDisabledOnLoad(document.getElementById(this._domButtonId)),this.$BaseWidget.$destructor.call(this)},$prototype:{writeMarkup:function(e){if(this._cfgOk){var t=this._writeButton(this._cfg);e.write(t.join(""))}},_writeButton:function(e){var t=this._createAttributesOutput(e),i=["<button ",t.join(" "),aria.utils.Delegate.getMarkup(this._delegateId),">"],n=["</button>"],s=[],a=[],r=0;switch(e.noIcons||(e.noLeftIcon||(e.classList.leftIcon.length>0&&e.classList.leftIcon.push("padding-right"),s=this._writeIconTag("left",e.classList.leftIcon),r++),e.noRightIcon||(e.classList.rightIcon.length>0&&e.classList.rightIcon.push("padding-left"),a=this._writeIconTag("right",e.classList.rightIcon),r++)),r){case 0:e.classList.text.push("no-icons");break;case 1:e.classList.text.push("one-icon")}return i=i.concat(s),i=i.concat(this._writeTextTag(e.text,e.classList.text)),i=i.concat(a),i=i.concat(n)},_createAttributesOutput:function(e){var t=[];if(e.attributes){for(var i in e.attributes)e.attributes.hasOwnProperty(i)&&"object"==typeof e.attributes[i]?t=t.concat(this._createExtendedAttributesOutput(i,e.attributes[i])):e.attributes.hasOwnProperty(i)&&t.push(i+'="'+e.attributes[i]+'"');e.attributes.hasOwnProperty("id")?this._domButtonId=e.attributes.id:t.push('id="'+this._domButtonId+'"')}var n="plnext-widget-btn btn btn-"+e.type+" "+e.classList.button.join(" ");return t.push('class="'+n+'"'),t},_createExtendedAttributesOutput:function(e,t){var i=[];for(var n in t)t.hasOwnProperty(n)&&i.push(e+"-"+n+'="'+t[n]+'"');return i},_normalizeCfg:function(){this._cfg.classList.button=this._cfg.classList.button||[],this._cfg.classList.text=this._cfg.classList.text||[],this._cfg.classList.leftIcon=this._cfg.classList.leftIcon||[],this._cfg.classList.rightIcon=this._cfg.classList.rightIcon||[]},_writeTextTag:function(e,t){return t=t||[],['<span class="plnext-widget-btn-text ',t.join(" "),'">',e,"</span>"]},_writeIconTag:function(e,t){return t=t||[],['<i class="icon icon-',e," ",t.join(" "),'" aria-hidden="true"></i>']},_delegate:function(e){var t=this["_button_"+e.type];t&&t.call(this,e)},_button_keydown:function(e){(e.keyCode===aria.DomEvent.KC_SPACE||e.keyCode===aria.DomEvent.KC_ENTER)&&(this._keyPressed=!0)},_button_keyup:function(e){e.preventDefault(),this._keyPressed&&(this._keyPressed=!1,this.evalCallback(this._cfg.onClick),this._updateDisplay(!0))},_button_click:function(e){e.preventDefault(),this._keyPressed||(this.evalCallback(this._cfg.onClick),this._updateDisplay(!0))},_button_focus:function(){this._updateDisplay(!0)},_button_blur:function(){this._updateDisplay(!1)},_setValue:function(){this._value=!this._value;var e=this._cfg.bind;e&&aria.utils.Json.setValue(e.inside,e.to,this._value)},_notifyDataChange:function(){this._readValue(),this._updateDisplay()},_updateDisplay:function(){},initWidget:function(){this._updateDisplay(),this._disableOnLoad&&plnextv2.utils.HtmlUtils.addElementToBeDisabledOnLoad(document.getElementById(this._domButtonId))},getDom:function(e){var t=aria.utils.Dom.getElementById(e);return t},_readValue:function(){var e=null,t=this._cfg.bind;t?(t.inside[t.to]||(t.inside[t.to]=!1),e=t.inside[t.to]):e=!1,this._value=e}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/button/style/ButtonCss.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.button.style.ButtonCss",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write('\n\n\n\nbutton.btn.plnext-widget-btn {\nwidth: auto;\nmax-width: 100%;\nwhite-space: normal;\nword-break: break-word;\n}\n\nbutton.btn.plnext-widget-btn > * {\n\ndisplay: table-cell;\nfloat: none;\nvertical-align: middle;\nwhite-space: normal;\nword-break: break-word;\n}\n\nbutton.btn.plnext-widget-btn > span {\nmax-width: 100%;\npadding: 0;\ntext-align: left;\n}\n\nbutton.btn.plnext-widget-btn > span.no-icons {\n\ndisplay: inline-block;\n}\n\nbutton.btn.plnext-widget-btn  i.icon-large{\nfont-size : 130%;\n}\n\nhtml[dir="ltr"] .btn > span.plnext-widget-btn-text::first-letter {\ntext-transform: capitalize;\n}\n\nhtml[dir="ltr"][lang="th"] .btn > span.plnext-widget-btn-text::first-letter {\ntext-transform: none;\n}\n\n\n\nbutton.btn.plnext-widget-btn.btn-primary .padding-left{\npadding-left: 20px;\n}\n\nbutton.btn.plnext-widget-btn.btn-primary .padding-right{\npadding-right: 20px;\n}\n\nbutton.btn.plnext-widget-btn.btn-primary {\npadding: 10px 20px;\nfont-size: 16px;\nfont-weight: 900;\n}\n\nbutton.btn.plnext-widget-btn.btn-primary > span {\ntext-transform: uppercase;\n}\n\nhtml[lang="th"] button.btn.plnext-widget-btn.btn-primary > span {\ntext-transform: none;\n}\n\n',38),this.macro_primarySmall(),this.macro_primaryButtonXsAndXxs(),this.macro_othersXXXS(),this.__$write('\n\n\n\nbutton.btn.plnext-widget-btn.btn-default .padding-left, button.btn.plnext-widget-btn.btn-secondary .padding-left,\nbutton.btn.plnext-widget-btn.btn-tertiary .padding-left {\npadding-left: 5px;\n}\n\nbutton.btn.plnext-widget-btn.btn-default > span,\nbutton.btn.plnext-widget-btn.btn-secondary > span,\nbutton.btn.plnext-widget-btn.btn-tertiary > span {\ntext-transform: lowercase;\n}\n\nhtml[lang="th"] button.btn.plnext-widget-btn.btn-default > span,\nhtml[lang="th"] button.btn.plnext-widget-btn.btn-secondary > span,\nhtml[lang="th"] button.btn.plnext-widget-btn.btn-tertiary > span {\ntext-transform: none;\n}\n\nhtml[dir="ltr"] button.btn.plnext-widget-btn.btn-default > span::first-letter,\nhtml[dir="ltr"] button.btn.plnext-widget-btn.btn-secondary > span::first-letter,\nhtml[dir="ltr"] button.btn.plnext-widget-btn.btn-tertiary > span::first-letter {\ntext-transform: uppercase;\n}\n\nhtml[dir="ltr"][lang="th"] button.btn.plnext-widget-btn.btn-default > span::first-letter,\nhtml[dir="ltr"][lang="th"] button.btn.plnext-widget-btn.btn-secondary > span::first-letter,\nhtml[dir="ltr"][lang="th"] button.btn.plnext-widget-btn.btn-tertiary > span::first-letter {\ntext-transform: none;\n}\n\nbutton.btn.plnext-widget-btn.btn-default .padding-right, button.btn.plnext-widget-btn.btn-secondary .padding-right,\nbutton.btn.plnext-widget-btn.btn-tertiary .padding-right {\npadding-right: 5px;\n}\n\nbutton.btn.plnext-widget-btn.btn-default, button.btn.plnext-widget-btn.btn-secondary,\nbutton.btn.plnext-widget-btn.btn-tertiary {\npadding: 6px 15px;\n}\n\n.plnext-widget-btn.btn.btn-primary.text-centered,\n.plnext-widget-btn.btn.btn-primary.text-centered > span {\ntext-align: center;\n}\n\nbutton.plnext-widget-btn.btn.btn-secondary.btn-cancel.section-dialog-btn.section-dialog-btn-cancel,\nbutton.btn.plnext-widget-btn.btn-default.btn-big, button.btn.plnext-widget-btn.btn-secondary.btn-big,\nbutton.btn.plnext-widget-btn.btn-tertiary.btn-big {\npadding: 10px 20px;\nfont-size: 16px;\n}\n\nbutton.plnext-widget-btn.btn.btn-secondary.btn-cancel.section-dialog-btn.section-dialog-btn-cancel > span,\nbutton.btn.plnext-widget-btn.btn-default.btn-big > span,\nbutton.btn.plnext-widget-btn.btn-secondary.btn-big > span,\nbutton.btn.plnext-widget-btn.btn-tertiary.btn-big > span {\ntext-transform: uppercase;\n}\n\nhtml[lang="th"] button.plnext-widget-btn.btn.btn-secondary.btn-cancel.section-dialog-btn.section-dialog-btn-cancel > span,\nhtml[lang="th"] button.btn.plnext-widget-btn.btn-default.btn-big > span,\nhtml[lang="th"] button.btn.plnext-widget-btn.btn-secondary.btn-big > span,\nhtml[lang="th"] button.btn.plnext-widget-btn.btn-tertiary.btn-big > span {\ntext-transform: none;\n}\n\n@media (max-width: ',109),this.__$write(this.breakpoints.XS_MAX,177),this.__$write(") {\n.plnext-widget-btn.btn.btn-primary.text-centered,\n.plnext-widget-btn.btn.btn-primary.text-centered > span {\ntext-align: left;\n}\n}\n\n.plnext-widget-btn.btn.btn-primary.text-centered .plnext-widget-btn-text.no-icons {\nwidth: 100%;\n}\n\n.plnext-widget-btn.btn.btn-primary.grey-button,\n.plnext-widget-btn.btn.btn-primary.grey-button:hover {\nbackground-color: ",177),this.__$write(this.$grayShade,190),this.__$write(";\nborder-color: ",190),this.__$write(this.$grayShade,191),this.__$write(";\ncolor: ",191),this.__$write(this.$grayDarken,192),this.__$write(";\n}\n\n.plnext-widget-btn.btn.btn-primary.white-button,\n.plnext-widget-btn.btn.btn-primary.white-button:hover {\nbackground-color: ",192),this.__$write(this.$white,197),this.__$write(";\nborder: 0;\ncolor: ",197),this.__$write(this.$grayDarker,199),this.__$write(";\n}\n\n.plnext-widget-btn.btn.btn-primary.white-button,\n.plnext-widget-btn.btn.btn-primary.white-button span {\ntext-align: center;\n}\n\n.plnext-widget-btn.btn.btn-primary.white-button:hover {\nbackground-color: ",199),this.__$write(this.$grayLightenAlt,208),this.__$write(";\n}\n\n",208),this.macro_overrideBaseCss()}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},macro_primaryButtonXsAndXxs:function(){try{with(this)this.__$write("\n\n\n@media (max-width: ",219),this.__$write(this.breakpoints.XXS_MAX,221),this.__$write("){\nbutton.btn.plnext-widget-btn.btn-primary > span, button.btn.plnext-widget-btn.btn-primary {\nwidth: 100%;\n}\n}\n\n",221)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["primaryButtonXsAndXxs",__filename,this["aria:currentLineNumber"]],_ex)}},macro_overrideBaseCss:function(){try{with(this)this.__$write("\nbutton.plnext-widget-btn.btn.btn-primary i, button.plnext-widget-btn.btn.btn-secondary i,\nbutton.plnext-widget-btn.btn.btn-tertiary i, button.plnext-widget-btn.btn.btn-default i {\npadding-right: 0;\n}\n\nbutton.plnext-widget-btn.btn-primary i + span + i, button.plnext-widget-btn.btn-secondary i,\nbutton.plnext-widget-btn.btn-tertiary i, button.plnext-widget-btn.btn-default i {\npadding: 0;\n}\n",233)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["overrideBaseCss",__filename,this["aria:currentLineNumber"]],_ex)}},macro_primarySmall:function(){try{with(this)this.__$write('\n\n\nbutton.btn.plnext-widget-btn.btn-primary.small-primary {\nfont-size: 14px;\npadding: 6px 10px;\n}\n\nbutton.btn.plnext-widget-btn.btn-primary.small-primary > span {\ntext-transform: lowercase;\n}\n\nbutton.btn.plnext-widget-btn.btn-primary.small-primary > span::first-letter {\ntext-transform: uppercase;\n}\n\nhtml[lang="th"] button.btn.plnext-widget-btn.btn-primary.small-primary > span ,\nhtml[lang="th"] button.btn.plnext-widget-btn.btn-primary.small-primary > span::first-letter {\ntext-transform: none;\n}\n\nbutton.btn.plnext-widget-btn.btn-primary.small-primary .padding-right {\npadding-right: 5px;\n}\n\nbutton.btn.plnext-widget-btn.btn-primary.small-primary .padding-left {\npadding-left: 5px;\n}\n\n\n@media (max-width: ',248),this.__$write(this.breakpoints.XXXS_MAX,277),this.__$write("){\nbutton.btn.plnext-widget-btn.btn-primary.small-primary {\ndisplay: inline-block;\nwidth: 100%;\ntext-align: center;\n}\n\nbutton.btn.plnext-widget-btn.btn-primary.small-primary > * {\ndisplay: inline-block;\nmargin: 0;\n}\n\nbutton.btn.plnext-widget-btn.btn-primary.small-primary > span {\nwidth: auto;\ntext-align: center;\n}\n\n}\n\n",277)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["primarySmall",__filename,this["aria:currentLineNumber"]],_ex)}},macro_othersXXXS:function(){try{with(this)this.__$write("\n\n\n@media (max-width: ",302),this.__$write(this.breakpoints.XXXS_MAX,304),this.__$write("){\n\nbutton.btn.plnext-widget-btn.btn-default,\nbutton.btn.plnext-widget-btn.btn-secondary,\nbutton.btn.plnext-widget-btn.btn-tertiary {\ndisplay: inline-block;\nwidth: 100%;\ntext-align: center;\n}\n\nbutton.btn.plnext-widget-btn.btn-default > *,\nbutton.btn.plnext-widget-btn.btn-secondary > *,\nbutton.btn.plnext-widget-btn.btn-tertiary > * {\ndisplay: inline-block;\n}\n\nbutton.btn.plnext-widget-btn.btn-primary.small-primary > span,\nbutton.btn.plnext-widget-btn.btn-default > span,\nbutton.btn.plnext-widget-btn.btn-secondary > span,\nbutton.btn.plnext-widget-btn.btn-tertiary > span {\nwidth: auto;\ntext-align: center;\n}\n\nbutton.btn.plnext-widget-btn.btn-default.btn-big, button.btn.plnext-widget-btn.btn-secondary.btn-big,\nbutton.btn.plnext-widget-btn.btn-tertiary.btn-big, button.btn.plnext-widget-btn.btn-default.btn-big > span, button.btn.plnext-widget-btn.btn-secondary.btn-big > span,\nbutton.btn.plnext-widget-btn.btn-tertiary.btn-big > span {\ntext-align: left;\n}\n}\n\n",304)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["othersXXXS",__filename,this["aria:currentLineNumber"]],_ex)}},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/dialog/core/Dialog.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.dialog.core.Dialog",$extends:"aria.widgetLibs.BindableWidget",$dependencies:["plnextv2.utils.widgets.plnextLib.dialog.bean.DialogCfgBeans","plnextv2.utils.HtmlUtils","plnextv2.utils.widgets.plnextLib.dialog.core.DialogManager","aria.utils.FireDomEvent","plnextv2.utils.ErrorUtils","plnextv2.utils.analytics.AnalyticsUtils","aria.utils.ClassList","aria.utils.Dom","aria.utils.AriaWindow"],$css:["plnextv2.utils.widgets.plnextLib.dialog.style.DialogStyle"],$statics:{INVALID_CONFIGURATION:"%1 dialog invalid configuration !",ZINDEX_DIALOG:16777271,TAB_KEY:9,MIN_X_MARGIN:10,MIN_Y_MARGIN:10,DIALOG_CLASS:"dialog",DIALOG_CONTENT_CLASS:"dialog-content"},$constructor:function(){this._dialogManager=plnextv2.utils.widgets.plnextLib.dialog.core.DialogManager,this.$BindableWidget.constructor.apply(this,arguments),this._registerBindings(),this._document=null,this._popup=null,this._content=null,this._lastFocus=null,this._closeButtonId=this._createDynamicId(),this._closeButtonFooterId=this._createDynamicId(),this._headerId=this._createDynamicId(),this._delegateId=aria.utils.Delegate.add({fn:this._delegate,scope:this}),this._eventsConnected=!1,this._errorUtils=plnextv2.utils.ErrorUtils,this._analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils,this._eventBus=plnextv2.utils.context.AppContext.getEventBus()},$destructor:function(){var e=document.getElementById("dialog-"+this._cfg.id);this._removeDomElement(e),this.close(),this._document=null,this._popup=null,this._content=null,this._closeButtonId=null,this._closeButtonFooterId=null,this._lastFocus=null,this._delegateId&&(aria.utils.Delegate.remove(this._delegateId),this._delegateId=null),this.$BindableWidget.$destructor.call(this)},$prototype:{initWidget:function(){this.getProperty("visible")&&this.open()},writeMarkupBegin:function(e){var t=[],i=[],n=[],s=[];(this._cfg.closeButton||this._cfg.bind.title)&&(t.push('<div id = "dialog-header-'+this._cfg.id+'" class = "dialog-header">'),i=this._cfg.bind.title&&this._cfg.bind.title.inside[this._cfg.bind.title.to]?this._cfg.bind.title.inside[this._cfg.bind.title.to]:"",t.push('<div class="dialog-header-container"><h2 id="'+this._headerId+'" class="dialog-title'),this._cfg.bsGridClass&&t.push(" row"),t.push('">'+i+"</h2>"),this._cfg.closeButton&&t.push("<button id="+this._closeButtonId+" "+aria.utils.Delegate.getMarkup(this._delegateId)+' type="button" class="dialog-close-button dialog-close"><i title="'+plnextv2.utils.I18n.getLabel("tx_pltg_text_Close")+'" aria-hidden="true" class="icon-remove"></i><span class="plnext-sr-only">'+plnextv2.utils.I18n.getLabel("tx_pltg_text_Close")+"</span></button>"),t.push("</div></div>")),n.push('<div id = "dialog-content-'+this._cfg.id+'" class = "'+this.DIALOG_CONTENT_CLASS),this._cfg.bsGridClass&&n.push(" row"),n.push('" tabindex="-1">'),this._cfg.bsGridClass&&s.push('<div class = "row">'),s.push('<div id = "dialog-',this._cfg.id,'"',' class = "',this.DIALOG_CLASS," dialog-hide ",this._cfg.bsGridClass,'"',' aria-hidden="true"  tabindex="-1"'),this._cfg.bind.title&&s.push(' aria-labelledby="'+this._headerId+'"'),s.push(' aria-describedby="dialog-content-'+this._cfg.id+'">'),s=s.concat(t),s=s.concat(n),e.write(s.join(""))},_getDialogClass:function(){return"dialog"},writeMarkupEnd:function(e){e.write(this._cfg.bsGridClass?"</div></div>"+this._writeFooter()+"</div>":"</div>"+this._writeFooter()+"</div>")},_writeFooter:function(){var e=[];return this._cfg.closeButtonFooter&&(e.push('<div id = "dialog-footer-'+this._cfg.id+'" class = "dialog-footer">'),e.push("<button id="+this._closeButtonFooterId+" "+aria.utils.Delegate.getMarkup(this._delegateId)+' type="button" class="btn dialog-footer-close-button"> <span>'+plnextv2.utils.I18n.getLabel("tx_pltg_text_Close")+"</span></button>"),e.push("</div>")),e.join("")},_notifyDataChange:function(e,t){this._onBoundPropertyChange(t,e.newValue,e.oldValue)},_delegate:function(e){"click"==e.type&&this.changeProperty("visible",!1)},_onBoundPropertyChange:function(e,t){"visible"===e?(this._cfg.visible=t,t?this.open():this.close()):"contentLoaded"===e?this._onContentLoaded(t):"title"===e&&this._onTitleUpdated(t)},open:function(){this._cfg.onOpen&&this.evalCallback(this._cfg.onOpen),this._popup=aria.utils.Dom.getElementById("dialog-"+this._cfg.id),this._popup&&(this.launchAnalyticsTimeoutEventError(this._cfg.id,this._context),this._content=aria.utils.Dom.getElementById("dialog-content-"+this._cfg.id),this._removeDomElement(this._popup),document.body.appendChild(this._popup),document.activeElement&&(this._lastFocus=document.activeElement),null!==this._dialogManager.current()&&void 0!==this._dialogManager.current()&&this._dialogManager.push(this._dialogManager.current()),this._dialogManager.setCurrentPopup(this),this.displayDom())},close:function(){if(this._disconnectEvents(),this._popup){this._clearStyle(this._popup),this._clearStyle(aria.utils.Dom.getElementById("dialog-content-"+this._cfg.id)),this._displayPopup(this._popup,!1),this._removeDomElement(this._mask),this._popup=null;var e=this._dialogManager.pop();void 0!==e&&null!==e?(this._dialogManager.setCurrentPopup(e),e.displayDom()):this._dialogManager.setCurrentPopup(null),this._lastFocus&&-1===this._lastFocus.className.indexOf("plnext-message")?this._lastFocus.focus():this.safeFocus(document.querySelector("a")),this._cfg.onClose&&this.evalCallback(this._cfg.onClose)}},displayDom:function(){if(this._popup){var e=this._dialogManager.getPreviousPopup();"undefined"!=typeof e&&null!==e&&e.isDisplayed()&&(e._disconnectEvents(),this._removeDomElement(e._mask),e._displayPopup(e._popup,!1),aria.utils.FireDomEvent.fireEvent("mousedown",e._popup)),this._eventsConnected||this._connectEvents(),this._updatePosition(aria.utils.Dom.getGeometry(this._popup)),this._mask=this._createMask(),this._popup.parentNode.insertBefore(this._mask,this._popup),this._displayPopup(this._popup,!0),this.safeFocus(this._popup.querySelector("h1, h2, h3, h4, h5, h6")),this._popup.click&&this._popup.click()}},_updatePosition:function(e){if(this._popup){var t=aria.utils.Dom.getViewportSize(),i=aria.utils.Dom.getElementById("dialog-content-"+this._cfg.id),n={};this._cfg.width?n.width=this._cfg.width:(n.width=null!=this._cfg.xMargin?t.width-2*this._cfg.xMargin:this._cfg.minXMargin&&e.width>t.width-2*this._cfg.minXMargin?t.width-2*this._cfg.minXMargin:e.width,this._cfg.minWidth&&n.width<this._cfg.minWidth&&(n.width=this._cfg.minWidth)),this._cfg.height?n.height=this._cfg.height:(n.height=null!=this._cfg.yMargin?t.height-2*this._cfg.yMargin:this._cfg.minYMargin&&e.height>t.height-2*this._cfg.minYMargin?t.height-2*this._cfg.minYMargin:e.height,this._cfg.minHeight&&n.height<this._cfg.minHeight&&(n.height=this._cfg.minHeight));var s=aria.utils.Dom.centerInViewport(n);n.width>t.width-this.MIN_X_MARGIN&&(n.width=t.width-this.MIN_X_MARGIN,s.left=this.MIN_X_MARGIN/2),n.height>t.height-this.MIN_Y_MARGIN&&(n.height=t.height-this.MIN_Y_MARGIN,s.top=this.MIN_Y_MARGIN/2),s=this._updateOffsetWithDocumentScroll(s),this._popup.style.width=String(n.width)+"px",this._popup.style.height=String(n.height)+"px",this._popup.style.top=this._cfg.top?this._cfg.top:s.top+"px",this._popup.style.left=s.left+"px",this._popup.style.zIndex=this.ZINDEX_DIALOG,i.style.height=n.height+"px",i.style.width=n.width+"px";var a=aria.utils.Dom.getGeometry(aria.utils.Dom.getElementById("dialog-header-"+this._cfg.id)),r=aria.utils.Dom.getGeometry(aria.utils.Dom.getElementById("dialog-footer-"+this._cfg.id));headerHeight=0,footerHeight=0,a&&(headerHeight=a.height),r&&(footerHeight=r.height),i.style.height=n.height-headerHeight-footerHeight+"px",this._cfg.autoHeight&&(this._popup.style.height="auto",i.style.height="auto")}},_updateOffsetWithDocumentScroll:function(e){var t=aria.utils.Dom._getDocumentScroll();return t.scrollTop<=e.top&&(e.top=e.top-t.scrollTop),t.scrollLeft<=e.left&&(e.left=e.left-t.scrollLeft),e},_displayPopup:function(e,t){var i=new aria.utils.ClassList(e),n=aria.utils.Dom.getElementById("main-container");t?(n&&n.setAttribute("aria-hidden",!0),this._mask.setAttribute("aria-hidden",!1),e.setAttribute("aria-hidden",!1),i.remove("dialog-hide"),i.add("dialog-show")):(this._mask.setAttribute("aria-hidden",!0),e.setAttribute("aria-hidden",!0),i.remove("dialog-show"),i.add("dialog-hide"),n&&n.removeAttribute("aria-hidden")),i.$dispose()},isDisplayed:function(){return"false"===this._popup.getAttribute("aria-hidden")},_clearStyle:function(e){e&&e.removeAttribute("style")},_createMask:function(){var e;return this._popup&&(e=this._document.createElement("div"),e.id="dialogMask_"+this._cfg.id,e.className=this._cfg.maskCssClass?this._cfg.maskCssClass:"dialog-mask",e.style.zIndex=this.ZINDEX_DIALOG,e.style.position="fixed",e.style.width="100%",e.style.height="100%",e.style.top=0,e.style.left=0),e},_removeDomElement:function(e){e&&aria.utils.Dom.removeElement(e)},_onContentLoaded:function(){this._clearStyle(this._popup),this._clearStyle(aria.utils.Dom.getElementById("dialog-content-"+this._cfg.id)),this._updatePosition(aria.utils.Dom.getGeometry(this._popup))},_onTitleUpdated:function(e){var t=aria.utils.Dom.getElementById(this._headerId);t&&(t.innerHTML=e)},_onDocumentClick:function(e){if(this._popup){var t=new aria.DomEvent(e),i=t.target;!aria.utils.Dom.isAncestor(i,this._popup)&&aria.utils.Dom.isInViewport({top:e.pageY,left:e.pageX},{height:1,width:1})&&(this._cfg.closeOnMouseClick?this.changeProperty("visible",!1):e.preventDefault()),t.$dispose()}},_onViewportResized:function(){this._clearStyle(this._popup),this._clearStyle(aria.utils.Dom.getElementById("dialog-content-"+this._cfg.id)),this._updatePosition(aria.utils.Dom.getGeometry(this._popup)),this._eventBus.publish("dialog:resize:completed",this,{})},_onKeyPress:function(e){this._cfg.closeOnEscape=this._cfg.hasOwnProperty("closeOnEscape")?this._cfg.closeOnEscape:!0,27==e.keyCode&&this._cfg.closeOnEscape&&aria.utils.Dom.getElementById(this._closeButtonId).click()},_onFocus:function(e){this._popup.contains(e.target)||(e.stopPropagation(),this._popup.focus())},_connectEvents:function(){this._disconnectEvents(),this._document=Aria.$window.document,aria.utils.AriaWindow.attachWindow(),aria.utils.Event.addListener(this._document,"mousedown",{fn:this._onDocumentClick,scope:this},!1),aria.utils.Event.addListener(this._document,"touchend",{fn:this._onDocumentClick,scope:this},!0),aria.utils.Event.addListener(this._document,"keydown",{fn:this._onKeyPress,scope:this},!1),aria.utils.Event.addListener(this._document,"focus",{fn:this._onFocus,scope:this},!0),aria.utils.AriaWindow.$on({unloadWindow:this._disconnectEvents,scope:this}),aria.templates.Layout.$on({viewportResized:this._onViewportResized,scope:this}),this._eventsConnected=!0},_disconnectEvents:function(){this._document&&(aria.utils.Event.removeListener(this._document,"mousedown",{fn:this._onDocumentClick}),aria.utils.Event.removeListener(this._document,"touchend",{fn:this._onDocumentClick}),aria.utils.Event.removeListener(this._document,"keydown",{fn:this._onKeyPress}),aria.utils.Event.removeListener(this._document,"focus",{fn:this._onFocus}),aria.utils.AriaWindow.$unregisterListeners(this),aria.templates.Layout.$unregisterListeners(this),aria.utils.AriaWindow.detachWindow(),this._document=null,this._eventsConnected=!1)},setProperty:function(e,t){var i;if(!this._cfg)return null;var n=this._cfg.bind,s=this.getProperty(e);if(this._cfg[e]=t,n){var a=n[e];if(a){var r=a.inside,o=a.to,l=a.transform;if(r&&(o||0===o)){i=this._transform(l,t,"fromWidget");var c=this._bindingListeners[e];aria.utils.Json.setValue(r,o,i,c?c.cb:null)}}}return s!==t?{oldValue:s,newValue:t}:void 0},setWidgetProperty:function(e,t){if(this._cfg){var i=this.getProperty(e);t!=i&&(this._cfg[e]=t,this._onBoundPropertyChange(e,t,i))}},changeProperty:function(e,t){this._cfg&&(this.setWidgetProperty(e,t),this.setProperty(e,t))},getProperty:function(e){return this._cfg?this._cfg[e]:null},safeFocus:function(e){if(e)if(e.hasAttribute("tabindex")){var t=e.getAttribute("tabindex");e.setAttribute("tabindex",0),e.focus(),e.setAttribute("tabindex",t)}else e.setAttribute("tabindex",0),e.focus(),e.removeAttribute("tabindex")},launchAnalyticsTimeoutEventError:function(e,t){var i="";if("timeout-dialog"===e?i=this._analyticsUtils.TIMEOUT_TYPE.ALERT:"timeout-warning-dialog"===e&&(i=this._analyticsUtils.TIMEOUT_TYPE.DIALOG),""!==i){var n={pageID:plnextv2.utils.context.AppContext.getPageId(),timeoutType:i};t.moduleCtrl.publishAnalyticsEvent("timeoutDisplayed",n)}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/dialog/core/DialogManager.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.dialog.core.DialogManager",$dependencies:[],$css:[],$singleton:!0,$statics:{},$constructor:function(){this.__popups=[],this.__currentPopup=null},$destructor:function(){},$prototype:{setCurrentPopup:function(e){this.__currentPopup=e},pop:function(){return this.__popups.pop()},push:function(e){return this.__popups.push(e)},getPreviousPopup:function(){return 0===this.__popups.length?null:this.__popups[this.__popups.length-1]},current:function(){return this.__currentPopup},getCurrentPopup:function(){return this.__currentPopup}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/dialog/style/DialogStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.dialog.style.DialogStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n.dialog {\n-moz-box-shadow: 0 0 5px 5px ",7),this.__$write(this.$grayDarken,8),this.__$write(";\n-webkit-box-shadow: 0 0 5px 5px ",8),this.__$write(this.$grayDarken,9),this.__$write(";\nbox-shadow: 0 0 5px 5px ",9),this.__$write(this.$grayDarken,10),this.__$write(";\nbackground-color: ",10),this.__$write(this.$grayLighten,11),this.__$write(";\n\nposition:fixed;\n}\n\n.dialog-header {\nborder-bottom: solid thin ",11),this.__$write(this.$gray,17),this.__$write(";\ndisplay:table;\npadding: 5px;\nwidth: 100%;\n}\n\n.dialog-header-container {\ndisplay: table;\nwidth: 100%;\n}\n\n.dialog-title {\ndisplay:table-cell;\ntext-align: left;\nmargin:0;\npadding:0;\nvertical-align: middle;\n}\n\n.dialog-close-button {\ndisplay:table-cell;\ntext-align: right;\nvertical-align: top;\ncursor:pointer;\nwidth:1%;\n}\n\n.dialog-content {\noverflow: auto;\ndisplay:inline-block;\n}\n\n.dialog-mask {\nbackground-color : ",17),this.__$write(this.$black,50),this.__$write(";\nfilter: alpha(opacity=65);\n-khtml-opacity: 0.65;\n-moz-opacity: 0.65;\nopacity: 0.65;\n}\n\n.dialog.dialog-hide {\nvisibility : hidden;\n}\n\n.dialog.dialog-show {\nvisibility : visible;\n}\n\n.dialog-close{\nwidth :1.7em;\nfloat :right;\nbackground :none;\nborder :none;\n}\n\n.dialog-footer {\ndisplay: table;\nwidth: 100%;\n}\n.dialog-footer-close-button {\nfloat: right;\n}\n\n",50)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/dropdown/core/Dropdown.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.dropdown.core.Dropdown",$extends:"aria.widgetLibs.BaseWidget",$css:["plnextv2.utils.widgets.plnextLib.dropdown.style.DropdownStyle"],$dependencies:["aria.utils.String","aria.utils.Dom","plnextv2.utils.I18n","plnextv2.utils.widgets.plnextLib.dropdown.bean.BeanCfg"],$constructor:function(e,t){this.$BaseWidget.constructor.apply(this,arguments),this._cfgBean="plnextv2.utils.widgets.plnextLib.dropdown.bean.BeanCfg.DropdownCfg",this._cfgOk=aria.core.JsonValidator.validateCfg(this._cfgBean,e),this._cfg=e,this._containerId=this._cfg.id?this._cfg.id:this._createDynamicId(),this._fitText=this._cfg.fitText?this._cfg.fitText:!1,this._buttonId=this._createDynamicId(),this._buttonElt=null,this._optionsId=this._createDynamicId(),this._optionsElt=null,this._optionsIdsArray=[],this._linksIdsArray=[],this._context=t,this._hasOnClickOutListener=!1,this._overwriteLabel=this._cfg.overwriteLabel?this._cfg.overwriteLabel:!1,this._addOptionLabel=this._cfg.addOptionLabel?this._cfg.addOptionLabel:!1},$statics:{ID_NOT_FOUND:"Id not found in {@plnext:Dropdown}",CONTAINER_USAGE_FORBIDDEN:"%1The usage as a container {@plnext:Dropdown}{/@plntext:Dropdown} is not allowed; use the {@plnext:Dropdown /} syntax instead."},$prototype:{writeMarkup:function(e){if(this._cfgOk){var t=['<div id="',this._containerId,'" class="plnext-dropdown ',this._cfg.cssClass,'">','<button id="',this._buttonId,'"','type="button" aria-haspopup="true" aria-expanded="false" class="btn ',this._cfg.buttonClass,'">'];if(this._iconId=this._createDynamicId(),this._overwriteLabel){var i=this.__getPreSelectedOptionLabel();i&&(this._cfg.label=i);var n=this.__getPreSelectedOptionIconClass();n&&(this._cfg.iconClass=n)}this._cfg.iconClass&&t.push(['<span id="',this._iconId,'" class="icon ',this._cfg.iconClass,'" aria-hidden="true"></span>'].join(""));var s="right";"rtl"==document.dir&&(s="left"),this._labelId=this._createDynamicId(),this._cfg.initialLabel=this._cfg.label,t.push(['<span class="main-label" id="',this._labelId,'">',this._cfg.label,"</span>",'<span class="icon-caret-down" aria-hidden="true"></span>',"</button>",'<ul aria-labelledby="',this._buttonId,'" id="',this._optionsId,'" class="dropdown-menu ',this._cfg.dropDownClass,'">'].join("")),this._writeOptionsMarkup(this._cfg.options,t),t.push('</ul><div class="sr-only dropdown-sr-warning" role="status" aria-live="polite"></div></div>'),e.write(t.join(""))}},_writeOptionsMarkup:function(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.label){var s=this._createDynamicId();this._optionsIdsArray.push(s);var a=this._createDynamicId();this._linksIdsArray.push(a),t.push(['<li id="',s,'"'].join("")),n.cssClass&&t.push([' class="',n.cssClass,'"'].join("")),t.push('><a id="'),t.push(a),t.push('" role="option" href="javascript:void(0);"><span class="icon '),t.push(n.iconClass),t.push('" aria-hidden="true"></span>'),t.push(n.label),t.push("</a></li>")}else t.push('<li class="divider"></li>'),this._optionsIdsArray.push(null)}},writeMarkupBegin:function(){this.$logError(this.CONTAINER_USAGE_FORBIDDEN)},writeMarkupEnd:function(){},initWidget:function(){this._buttonElt=aria.utils.Dom.getElementById(this._buttonId),this._optionsElt=aria.utils.Dom.getElementById(this._optionsId),aria.utils.Event.addListener(this._buttonElt,"click",{fn:this._toggle,scope:this},!0),aria.utils.Event.addListener(this._buttonElt,"keyup",{fn:this._displayDropDown,scope:this},!0),aria.utils.Event.addListener(this._buttonElt,"keydown",{fn:this._preventPageScroll},!0);for(var e=this._cfg.options,t=0,i=0;t<e.length;t++){var n=e[t];if(n.label){var s=aria.utils.Dom.getElementById(this._optionsIdsArray[t]);aria.utils.Event.addListener(s,"click",{fn:this._evalCallback,scope:this,args:n},!0),aria.utils.Event.addListener(s,"keyup",{fn:this._handleNavigation,scope:this,args:{index:i++}},!0),aria.utils.Event.addListener(s,"keydown",{fn:this._preventPageScroll},!0)}}},_preventPageScroll:function(e){switch(e.keyCode){case aria.DomEvent.KC_UP:case aria.DomEvent.KC_DOWN:e.preventDefault()}},_evalCallback:function(e,t){this._context.evalCallback(t.action),this._overwriteLabel&&this.__updateMainButton(t.labelCode),this._collapse(),document.querySelector("#"+this._containerId+" .dropdown-sr-warning").innerHTML=plnextv2.utils.I18n.getStringFromPattern("tx_pltg_pattern_filterSelectedSRWarning",[t.label])},_handleNavigation:function(e,t){var i=aria.DomEvent,n=e.keyCode;switch(n){case i.KC_UP:e.preventDefault(),this._moveFocus(t.index,-1);break;case i.KC_DOWN:e.preventDefault(),this._moveFocus(t.index,1);break;case i.KC_ESCAPE:this._collapse()}},_moveFocus:function(e,t){var i=e+t;if(i>=0&&i<this._linksIdsArray.length){for(var n;!n;)n=aria.utils.Dom.getElementById(this._linksIdsArray[i]),i+=t;n.focus()}},_toggle:function(){if(this._fitText){var e=$("#"+this._optionsElt.id).prev().outerWidth();$("#"+this._optionsElt.id).css("min-width",e+"px")}if("none"===this._optionsElt.style.display||""===this._optionsElt.style.display){this._optionsElt.style.opacity=0,this._optionsElt.style.display="block";var t=$("#"+this._optionsElt.id);t.hasClass("drop-up")&&t.removeClass("drop-up");var i=this._optionsElt.getBoundingClientRect(),n=$(document).height(),s=this._getScrollY(),a=i.top+s,r=t.height(),o=t.prev().find("span").last();a+r>n?(t.hasClass("drop-up")||t.addClass("drop-up"),o.hasClass("icon-caret-down")&&o.removeClass("icon-caret-down"),o.addClass("icon-caret-up")):(t.hasClass("drop-up")&&t.removeClass("drop-up"),o.hasClass("icon-caret-up")&&o.removeClass("icon-caret-up"),o.addClass("icon-caret-down")),this._optionsElt.style.opacity=1,this._setExpandedState(!0),this._addOnClickOutListener()}else this._optionsElt.style.display="none",this._setExpandedState(!1),this._removeOnClickOutListener()},_getScrollY:function(){var e=window.scrollY||window.pageYOffset||document.documentElement.scrollTop;return e},_collapse:function(){this._toggle(),this._buttonElt.focus()},_addOnClickOutListener:function(){this._hasOnClickOutListener||(aria.utils.Event.addListener(document,"click",{fn:this._hideOnClickOut,scope:this},!0),this._hasOnClickOutListener=!0)},_displayDropDown:function(e){var t=aria.DomEvent;(e.keyCode===t.KC_UP||e.keyCode===t.KC_DOWN)&&(""===this._optionsElt.style.display||"none"===this._optionsElt.style.display?$(this._buttonElt).click():$(aria.utils.Dom.getElementById(this._optionsIdsArray[0])).find("a").focus()),e.keyCode===t.KC_ESCAPE&&this._collapse()},_removeOnClickOutListener:function(){this._hasOnClickOutListener&&(aria.utils.Event.removeListener(document,"click",{fn:this._hideOnClickOut,scope:this},!0),this._hasOnClickOutListener=!1)},_hideOnClickOut:function(e){var t=e.target||e.srcElement;if(t.offsetParent)var i=t.offsetParent.id;i!=this._containerId&&i!=this._buttonId&&i!=this._optionsId&&(this._optionsElt.style.display="none",this._setExpandedState(!1),this._removeOnClickOutListener())},_setExpandedState:function(e){null!=this._buttonElt&&this._buttonElt.setAttribute("aria-expanded",e)},__updateMainButton:function(e){if(this._overwriteLabel){var t=this.__getLabelFromCode(e);if(t)if(this._addOptionLabel){var i=this._cfg.label+": "+t;this.__updateLabel(i),this.__updateTooltip(i)}else this.__updateLabel(t),this.__updateTooltip(t);var n=this.__getIconClassFromCode(e);this.__updateIconClass(n?n:"")}},__updateLabel:function(e){var t=aria.utils.Dom.getElementById(this._labelId);t.innerHTML=e},__updateTooltip:function(e){this._buttonElt.setAttribute("title",e)},__updateIconClass:function(e){var t=aria.utils.Dom.getElementById(this._iconId);t.className="icon "+e},__getLabelFromCode:function(e){for(var t=this._cfg.options,i=0;i<t.length;i++){var n=t[i];if(n.labelCode===e)return n.showDropDownLabel?this._cfg.initialLabel:n.label}return null},__getIconClassFromCode:function(e){for(var t=this._cfg.options,i=0;i<t.length;i++){var n=t[i];if(n.labelCode===e)return n.iconClass}return null},__getPreSelectedOptionLabel:function(){for(var e=this._cfg.options,t=0;t<e.length;t++){var i=e[t];if(i.preselect)return i.label}return null},__getPreSelectedOptionIconClass:function(){for(var e=this._cfg.options,t=0;t<e.length;t++){var i=e[t];if(i.preselect)return i.iconClass}return null}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/dropdown/style/DropdownStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.dropdown.style.DropdownStyle",$extends:require("ariatemplates/templates/CSSTemplate.js"),$constructor:function(){this.$CSSTemplate.constructor.call(this)},$destructor:function(){this.$CSSTemplate.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n.plnext-dropdown {\nposition: relative;\n}\n\n\n.plnext-dropdown > button {\nposition: relative;\nwidth: 100%;\ntext-align: left;\n\n-webkit-transition: background-color 350ms ease-in-out;\n-o-transition: background-color 350ms ease-in-out;\ntransition: background-color 350ms ease-in-out;\n}\n\n.plnext-dropdown > button:hover {\nbackground-color: #fdfdfd;\nborder-color: transparent;\n}\n\n.plnext-dropdown .icon {\nmargin-right: 0.5em;\n}\n\n.plnext-dropdown > button > .icon-caret-down {\nposition: absolute;\ntop: 0.65em;\nright: 0.5em;\n}\n\n.plnext-dropdown > .dropdown-menu {\npadding: 0;\nmargin: 0;\nbackground-color: #fff;\nmin-width: 100%;\nbox-shadow: 2px 2px 3px rgba(0,0,0,0.25);\n}\n\n\n.plnext-dropdown > .dropdown-menu > li {\npadding: 0;\nmargin: 0;\ntext-align: left;\n}\n\n.plnext-dropdown > .dropdown-menu > li:first-child > a {\nmargin-top: .5rem;\n}\n\n.plnext-dropdown > .dropdown-menu > li > a {\nwidth: 100%;\ntext-decoration: none;\npadding: .5rem 1rem;\nfont-weight: 300;\ncolor: black;\nwhite-space: normal;\n}\n\n.plnext-dropdown > .dropdown-menu > li > a:hover,\n.plnext-dropdown > .dropdown-menu > li > a:focus {\nbackground-color: #f0f0f0;\n}\n\n\n.plnext-dropdown > .dropdown-menu li.divider {\nmargin-top: 1rem;\npadding: 0;\n}\n\n.plnext-dropdown > .dropdown-menu li.divider + li {\nmargin-top: 1rem;\n}\n\n\n.plnext-dropdown > .dropdown-menu li.footer {\npadding: 1rem 0;\nmargin-bottom: 0;\nbackground-color: #f0f0f0;\n}\n\n.plnext-dropdown > .dropdown-menu li.footer a {\ncolor: #005eb8;\ntext-decoration: underline;\n}\n\n.plnext-dropdown > .dropdown-menu li.footer a:hover {\ntext-decoration: none;\n}\n\n.plnext-dropdown > .dropdown-menu li.divider + li.footer {\nmargin: 0;\n}\n\n",19)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$csslibs={},e.__$prefix=!0},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/handlers/AirportCityResourcesHandler.js
//*******************
!function(){var e,t,i;Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.handlers.AirportCityResourcesHandler",$implements:["plnextv2.utils.widgets.plnextLib.handlers.IDefaultResourcesHandler"],$extends:"plnextv2.utils.widgets.plnextLib.handlers.DefaultResourcesHandler",$dependencies:["aria.utils.String","plnextv2.utils.widgets.plnextLib.handlers.AirportCityResourcesHandlerBean"],$statics:{SUGGESTION_BEAN:"plnextv2.utils.widgets.plnextLib.handlers.AirportCityResourcesHandlerBean.Suggestion",CONFIGURATION_BEAN:"plnextv2.utils.widgets.plnextLib.handlers.AirportCityResourcesHandlerBean.Configuration",INVALID_CONFIG:"Invalid handler configuration in : %1.",INVALD_SUGGESTION_TYPE:"Suggestions must be an array.",INVALID_SUGGESTIONS:"Suggestions does not match suggestion bean aria.resources.handlers.LCResourcesHandleBean.Suggestions",INVALID_KEYCODE:"Suggestions does not match labelKey or codeKey",INVALID_COUNTRY_NAME:"CountryNameKey not provided for the suggestions",INVALID_CITY_NAME:"CityNameKey not provided for the suggestions"},$constructor:function(t){if(this.threshold=1,this.codeExactMatch=!0,this.boundaryRegex=/\s+/g,this._labelMatchAtWordBoundaries=!1,this.__islabelCode=!1,this._suggestions=[],this._options={labelKey:"label",labelCustomizedKey:"labelCustomized",filteringLabelCustomizedKey:"filteringLabelCustomized",countryNameKey:"countryName",cityNameKey:"cityName",codeKey:"code",airportDetailsKey:"airportDetails"},t){if(!e.check(t,this.CONFIGURATION_BEAN))return void this.$logError(this.INVALID_CONFIG,[this.$classpath]);this.codeExactMatch=t.codeExactMatch?!0:t.codeExactMatch,this.threshold=t.threshold||1,this._labelMatchAtWordBoundaries=!!t.labelMatchAtWordBoundaries,this._options.labelKey=t.labelKey||"label",this._options.labelCustomizedKey=t.labelCustomizedKey||"labelCustomized",this._options.filteringLabelCustomizedKey=t.filteringLabelCustomizedKey||"filteringLabelCustomized",this._options.cityNameKey=t.cityNameKey||"cityName",this._options.countryNameKey=t.countryNameKey||"countryName",this._options.codeKey=t.codeKey||"code",this._options.airportDetailsKey=t.airportDetailsKey||"airportDetails",this._options.sortingMethod=t.sortingMethod,this.__islabelCode="label"===this._options.labelKey&&"code"===this._options.codeKey,this._newSearchBarEnabled=t.newSearchBarEnabled}},$destructor:function(){this._suggestions=null},$onload:function(){e=aria.core.JsonValidator,t=aria.utils.String,i=aria.utils.Type},$onunload:function(){e=null,t=null,i=null},$prototype:{getSuggestions:function(e,n){if(i.isString(e)&&e.length>=this.threshold){e=t.stripAccents(e).toLowerCase();var s,a,r=[],o=[],l=[],c=this._suggestions.length,d=e.length,p=this._labelMatchAtWordBoundaries,_=!1;for(s=0;c>s;s++)if(a=this._suggestions[s],a.code===e)a.original.exactMatch=!0,r.unshift(a.original);else if(a.code.substring(0,d)!==e||this.codeExactMatch){for(var h,u=this._newSearchBarEnabled?a.filteringLabelCustomized:a.label,m=p?this.__getWordBoundaries(u):[0],f=!1,g=0,b=m.length;b>g;g++)if(h=m[g],u.substring(h,h+d)===e){_=u===e;var v=0===h,x=v?o:l;a.original.multiWordMatch=!v,a.original.exactMatch=_,_?(f=!0,x.unshift(a.original)):(f=!0,x.push(a.original));break}if(!f){m=p?this.__getWordBoundaries(a.countryName):[0];for(var h,g=0,b=m.length;b>g;g++)if(h=m[g],a.countryName.substring(h,h+d)===e){var _=a.countryName===e,v=0===h,x=v?o:l;a.original.multiWordMatch=!v,a.original.exactMatch=_,_?(f=!0,x.unshift(a.original)):(f=!0,x.push(a.original));break}}if(!f&&a.airportDetails.airportName){m=p?this.__getWordBoundaries(a.airportDetails.airportName):[0];for(var h,g=0,b=m.length;b>g;g++)if(h=m[g],a.airportDetails.airportName.substring(h,h+d)===e){var _=a.airportDetails.airportName===e,v=0===h,x=v?o:l;a.original.multiWordMatch=!v,a.original.exactMatch=_,_?x.unshift(a.original):x.push(a.original);break}}}else r.push(a.original),a.original.exactMatch=!1;var C=r.concat(o).concat(l);this.$callback(n,C)}else this.$callback(n,null)},setSuggestions:function(n){if(!i.isArray(n))return this.$logError(this.INVALD_SUGGESTION_TYPE,null,n);var s=[],a=this._options.labelKey,r=this._options.cityNameKey,o=this._options.countryNameKey,l=this._options.airportDetailsKey,c=this._options.codeKey,d=this._options.labelCustomizedKey,p=this._options.filteringLabelCustomizedKey;n.sort(this._options.sortingMethod&&i.isFunction(this._options.sortingMethod)?this._options.sortingMethod:function(e,t){var i,n=this.getValueLabel(e,a),s=this.getValueLabel(t,a);return i=n>s?1:s>n?-1:0}.bind(this));for(var _=0,h=n.length;h>_;_++){var u=n[_],m={};if(this.__islabelCode&&!e.check(u,this.SUGGESTION_BEAN))return this.$logError(this.INVALID_SUGGESTIONS,null,n);if(!u.hasOwnProperty(a)||!u.hasOwnProperty(c))return this.$logError(this.INVALID_KEYCODE,null,n);if(!u.hasOwnProperty(o))return this.$logError(this.INVALID_COUNTRY_NAME,null,n);if(!u.hasOwnProperty(r))return this.$logError(this.INVALID_CITY_NAME,null,n);m.label=u[a],m.labelCustomized=u[d],m.filteringLabelCustomized=u[p]?u[p]:u[d],m.cityName=u[r],m.code=u[c],m.airportDetails=u[l],m.countryName=this.getCountryName(u,o);var f={label:t.stripAccents(m.label).toLowerCase(),labelCustomized:m.labelCustomized,filteringLabelCustomized:t.stripAccents(m.filteringLabelCustomized).toLowerCase(),countryName:t.stripAccents(m.countryName).toLowerCase(),cityName:t.stripAccents(m.cityName).toLowerCase(),code:t.stripAccents(m.code).toLowerCase(),airportDetails:m.airportDetails,original:m};this._labelMatchAtWordBoundaries&&(f.wordBoundaries=this.__getWordBoundaries(f.label)),s.push(f)}this._suggestions=s},getValueLabel:function(e,t){return e.airportDetails&&!e.airportDetails.airportCode?e.cityName+" (AAA)":e[t]},getCountryName:function(e,t){return this.isDynamicAirListActivated()?e.airportDetails[t]||e[t]:e[t]},suggestionToCountryName:function(e){return e.countryName},suggestionToCityName:function(e){return e.cityName},isDynamicAirListActivated:function(){var e=plnextv2.utils.context.AppContext.getPageData();if(e.config){var t=e.config.SEARCH_BAR;return t||(t=e.config.SEARCH_BAR_ADVANCED),t&&t.dynamicAirportEnabled}return!1},updateAirportList:function(e,t){this._airports=e||[],t&&t.init?(this._organizeDestinations(t),this.setSuggestions(this._destinations)):this.setSuggestions(this._airports)}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/handlers/CountryCodeResourcesHandler.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.handlers.CountryCodeResourcesHandler",$extends:"plnextv2.utils.widgets.plnextLib.handlers.DefaultResourcesHandler",$constructor:function(e,t){this._countryCodes=[],this._preSuggestedValues=t,this._preSuggestedValues&&this._organizePreSuggestedValues(),this._cfg={codeExactMatch:!1,labelMatchAtWordBoundaries:!0,threshold:1,enableSort:!0},this.$DefaultResourcesHandler.constructor.call(this,this._cfg),this._organizeData(e),this.setSuggestions(this._countryCodes)},$prototype:{_organizeData:function(e){if(e)for(var t=0;t<e.length;t++){var i=e[t];this._countryCodes.push({code:i.countryCode+"",label:i.countryName+"",countryIsoCode:i.countryIsoCode})}},_organizePreSuggestedValues:function(){for(var e=[],t=0;t<this._preSuggestedValues.length;t++){var i=this._preSuggestedValues[t];e.push({code:i.countryCode+"",label:i.countryName+"",original:{code:i.countryCode+"",label:i.countryName+"",countryIsoCode:i.countryIsoCode+""}})}this._preSuggestedValues=e},suggestionToLabel:function(e){return e.code},suggestionToHandlerObject:function(e){return e&&"undefined"!=typeof e.code?e.code:""},getSuggestions:function(e,t){if(e=e.replace(/(^00|^011)/i,"+"),aria.utils.Type.isString(e)&&e.length>=this.threshold)this.$DefaultResourcesHandler.getSuggestions.call(this,e,t);else if(aria.utils.Type.isString(e)&&this._hasPreSuggestedValues){var i,n,s,a=[],r=e.length,o=this._preSuggestedValues.length;for(n=0;o>n;n++)s=this._preSuggestedValues[n],i=this._prepareOriginalSuggestion(s),s.original.exactMatch=!0,i.codeRender.isPreSuggestion=!0,i.codeRender.position=0,i.codeRender.length=r,i.codeRender.match=!0,a.push(i);var l=a;this.$callback(t,l)}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/handlers/DefaultResourcesHandler.js
//*******************
!function(){var e,t,i;Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.handlers.DefaultResourcesHandler",$implements:["plnextv2.utils.widgets.plnextLib.handlers.IDefaultResourcesHandler"],$dependencies:["aria.utils.String","plnextv2.utils.widgets.plnextLib.handlers.DefaultResourcesHandlerBean"],$statics:{SUGGESTION_BEAN:"plnextv2.utils.widgets.plnextLib.handlers.DefaultResourcesHandlerBean.Suggestion",CONFIGURATION_BEAN:"plnextv2.utils.widgets.plnextLib.handlers.DefaultResourcesHandlerBean.Configuration",INVALID_CONFIG:"Invalid handler configuration in : %1.",INVALD_SUGGESTION_TYPE:"Suggestions must be an array.",INVALID_SUGGESTIONS:"Suggestions does not match suggestion bean aria.resources.handlers.LCResourcesHandleBean.Suggestions",INVALID_KEYCODE:"Suggestions does not match labelKey or codeKey",BOLD_CLASS:"highlight-suggestion"},$constructor:function(t){if(this.threshold=1,this.codeExactMatch=!0,this.boundaryRegex=/./g,this._labelMatchAtWordBoundaries=!1,this.__islabelCode=!1,this._suggestions=[],this._options={labelKey:"label",codeKey:"code"},this._hasPreSuggestedValues=!1,t){if(!e.check(t,this.CONFIGURATION_BEAN))return void this.$logError(this.INVALID_CONFIG,[this.$classpath]);this.codeExactMatch=t.codeExactMatch?!0:t.codeExactMatch,this.threshold=t.threshold||1,this._labelMatchAtWordBoundaries=!!t.labelMatchAtWordBoundaries,this._options.labelKey=t.labelKey||"label",this._options.codeKey=t.codeKey||"code",this._options.sortingMethod=t.sortingMethod,this._options.enableSort=t.enableSort&&!0,this.__islabelCode="label"===this._options.labelKey&&"code"===this._options.codeKey}},$destructor:function(){this._suggestions=null},$onload:function(){e=aria.core.JsonValidator,t=aria.utils.String,i=aria.utils.Type},$onunload:function(){e=null,t=null,i=null},$prototype:{getSuggestions:function(e,n){if(i.isString(e)&&e.length>=this.threshold){e=t.stripAccents(e).toLowerCase();var s,a,r,o,l=[],c=[],d=[],p=[],_=this._suggestions.length,h=e.length,u=this._labelMatchAtWordBoundaries,m=!1;for(s=0;_>s;s++)if(a=this._suggestions[s],r=this._prepareOriginalSuggestion(a),a.code===e)a.original.exactMatch=!0,r.codeRender.position=0,r.codeRender.length=h,r.codeRender.match=!0,c.push(r);else if(a.code.substring(0,h)!==e||this.codeExactMatch){for(var f,g=u?this.__getWordBoundaries(a.label):[0],b=0,v=g.length;v>b;b++)if(f=g[b],a.label.substring(f,f+h)===e){m=a.label===e;var x=0===f;o={startsWithMatch:x,originalSuggestion:r,suggestion:a,textEntryLength:h,boundary:f},r=this.constructLabelMatched(o);var C=x?d:p;a.original.multiWordMatch=!x,a.original.exactMatch=m,m?C.unshift(r):C.push(r);break}}else r.codeRender.position=0,r.codeRender.length=h,r.codeRender.match=!0,a.original.exactMatch=!1,l.push(r);var w=c.concat(l.concat(d).concat(p));this.$callback(n,w)}else this.$callback(n,null)},constructLabelMatched:function(e){return e.startsWithMatch?(e.originalSuggestion.labelRender.position=0,e.originalSuggestion.labelRender.length=e.textEntryLength):(e.originalSuggestion.labelRender.position=e.boundary,e.originalSuggestion.labelRender.length=e.boundary+e.textEntryLength),e.originalSuggestion.labelRender.match=!0,e.originalSuggestion},getDefaultTemplate:function(){return"plnextv2.utils.widgets.plnextLib.autocompleteBox.defaultTpl.DefaultTemplate"},setSuggestions:function(n){if(!i.isArray(n))return this.$logError(this.INVALD_SUGGESTION_TYPE,null,n);var s=[],a=this._options.labelKey,r=this._options.codeKey;this._options.sortingMethod&&i.isFunction(this._options.sortingMethod)?n.sort(this._options.sortingMethod):this._options.enableSort&&n.sort(function(e,t){return e[a]>t[a]?1:e[a]<t[a]?-1:0});for(var o=0,l=n.length;l>o;o++){var c=n[o],d={};if(this.__islabelCode&&!e.check(c,this.SUGGESTION_BEAN))return this.$logError(this.INVALID_SUGGESTIONS,null,n);if(!c.hasOwnProperty(a)||!c.hasOwnProperty(r))return this.$logError(this.INVALID_KEYCODE,null,n);d=c,d.label=c[a],d.code=c[r];var p={label:t.stripAccents(d.label).toLowerCase(),code:t.stripAccents(d.code).toLowerCase(),original:d};this._labelMatchAtWordBoundaries&&(p.wordBoundaries=this.__getWordBoundaries(p.label)),s.push(p)}this._suggestions=s},setThreshold:function(e){this.threshold=e},suggestionToLabel:function(e){return e.label},getAllSuggestions:function(e){for(var t,i,n=this._suggestions,s=n.length,a=[],r=0;s>r;r++)t=n[r],i=this._prepareOriginalSuggestion(t),a.push(i);this.$callback(e,a)},__getWordBoundaries:function(e){for(var t=this.boundaryRegex,i=[0];null!==t.exec(e);)i.push(t.lastIndex);return t.lastIndex=0,i},suggestionToHandlerObject:function(e){return e&&"undefined"!=typeof e.code?e:{}},_defaultRenderObject:function(e){return{val:e,position:null,length:0,match:!1}},_prepareOriginalSuggestion:function(e){var t=e.original;return t.codeRender=this._defaultRenderObject(t.code),t.labelRender=this._defaultRenderObject(t.label),t},getHasPreSuggestedValues:function(){return this._hasPreSuggestedValues()},setHasPreSuggestedValues:function(e){this._hasPreSuggestedValues=e}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/handlers/IDefaultResourcesHandler.js
//*******************
!function(){Aria.interfaceDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.handlers.IDefaultResourcesHandler",$interface:{getSuggestions:{$type:"Function"},getDefaultTemplate:{$type:"Function"},suggestionToLabel:{$type:"Function"},getAllSuggestions:{$type:"Function"}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/htmltag/core/HtmlTag.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.htmltag.core.HtmlTag",$extends:"aria.widgetLibs.BaseWidget",$dependencies:["plnextv2.utils.widgets.plnextLib.htmltag.bean.HtmlTagCfgBeans"],$constructor:function(e,t,i){this._cfgBean="plnextv2.utils.widgets.plnextLib.htmltag.bean.HtmlTagCfgBeans",this.$BaseWidget.constructor.call(this,e,t,i)},$prototype:{writeMarkupBegin:function(e){e.write("<"+this._cfg.tag+this._getClassString()+this._getIdString()+">")},writeMarkupEnd:function(e){var t=this._cfg.tag;t.split(" ").length>1&&(t=t.split(" ")[0]),e.write("</"+t+">")},_getClassString:function(){return this._cfg.cssClass?" class='"+this._cfg.cssClass+"' ":""},_getIdString:function(){return this._cfg.id?" id='"+this._cfg.id+"' ":""}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/message/core/Message.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.message.core.Message",$extends:"aria.widgetLibs.BindableWidget",$dependencies:["plnextv2.utils.widgets.plnextLib.message.bean.MessageCfgBeans","plnextv2.utils.BootstrapUtils","plnextv2.utils.context.AppContext"],$css:["plnextv2.utils.widgets.plnextLib.message.style.MessageStyle"],$statics:{ALERT_TYPE_ERROR:"error",ALERT_TYPE_WARNING:"warning",ALERT_TYPE_INFO:"info",ALERT_TYPE_CONFIRMATION:"confirmation",ALERT_TYPE_WIDGET:"widget"},$constructor:function(){this.$BindableWidget.constructor.apply(this,arguments),this._registerBindings(),this._closeButtonId=this._createDynamicId(),this._delegateId=aria.utils.Delegate.add({fn:this._delegate,scope:this}),this.visible=!0,this.bootstrapUtils=plnextv2.utils.BootstrapUtils;var e=plnextv2.utils.context.AppContext.getPageData().appData;this._newMessagesStyle=e.config.messagesNewStyle},$destructor:function(){this._closeButtonId=null,this._delegateId&&(aria.utils.Delegate.remove(this._delegateId),this._delegateId=null),this.$BindableWidget.$destructor.call(this)},$prototype:{initWidget:function(){this.open()},writeMarkupBegin:function(e){var t="info",i="";this._cfg.type&&(this._cfg.type===this.ALERT_TYPE_ERROR&&(t="danger",i=this._newMessagesStyle?"icon-remove-sign":"icon-exclamation-sign"),this._cfg.type===this.ALERT_TYPE_WARNING&&(t="warning",i="icon-warning-sign"),(this._cfg.type===this.ALERT_TYPE_INFO||this._cfg.type===this.ALERT_TYPE_WIDGET&&!this._newMessagesStyle)&&(t="info",i=this._cfg.attributes&&this._cfg.attributes.icon?this._cfg.attributes.icon:"icon-info-sign"),this._cfg.type===this.ALERT_TYPE_CONFIRMATION&&(t="confirmation",i=this._cfg.attributes&&this._cfg.attributes.icon?this._cfg.attributes.icon:this._newMessagesStyle?"icon-ok-sign":"icon-ok"),this._cfg.type===this.ALERT_TYPE_WIDGET&&(t=this.ALERT_TYPE_WIDGET,i=this._cfg.attributes&&this._cfg.attributes.icon?this._cfg.attributes.icon:this._newMessagesStyle?"icon-miles":"icon-info-sign")),this._cfg.customIcon&&(i=this._cfg.customIcon);var n="";this._cfg.closeButton&&(n="<i id="+this._closeButtonId+" "+aria.utils.Delegate.getMarkup(this._delegateId)+' type="button" class="icon-remove message-close-button"></i>');var s="h4";this._cfg.titleLvl&&(s=this._cfg.titleLvl);var a="";this._cfg.title&&(a="<"+s+' id="alert-title-'+this._cfg.id+'" class="alert-title"><strong>'+this.getCorrectTitle(this._cfg.title)+"</strong></"+s+">");var r="";this._cfg.style&&(r='style="'+this._cfg.style+'"'),this._cfg.cssClass=this._cfg.cssClass||"",this._cfg.cssClass=this._newMessagesStyle?this._cfg.cssClass+" message-panel-styled":this._cfg.cssClass+" message-panel-original";var o=['<div tabindex="-1" id="',this._cfg.id,'" class="'+this._cfg.cssClass+" plnext-message plnext-message-",t," alert alert-",t,'" ',r,">",'<span class="alert-icon alert-icon-',t," ",i,'" aria-hidden="true"></span>',a];this._cfg.type===this.ALERT_TYPE_WARNING&&o.push(['<span class="plnext-sr-only">',plnextv2.utils.I18n.getLabel("tx_pltg_text_sr_warning"),"</span>"].join("")),o.push(['<div class="content">',n].join("")),e.write(o.join(""))},writeMarkupEnd:function(e){e.write("</div></div>")},_notifyDataChange:function(e,t){this._onBoundPropertyChange(t,e.newValue,e.oldValue)},_delegate:function(e){"click"==e.type&&this.changeProperty("visible",!1)},_onBoundPropertyChange:function(e,t,i){"visible"===e?(this._cfg.visible=t,t?this.open():this.close()):"title"===e&&(this._cfg.title=""+t,void 0!==i&&this._updateTitle())},_updateTitle:function(){var e=aria.utils.Dom.getElementById("alert-title-"+this._cfg.id);e.innerHTML=aria.utils.String.escapeHTML(this.getCorrectTitle(this._cfg.title))},open:function(){this._message=aria.utils.Dom.getElementById(this._cfg.id),this._displayElement(this._message,!0)},close:function(){this._message&&(this._displayElement(this._message,!1),this._message=null)},_displayElement:function(e,t){var i=new aria.utils.ClassList(e);t?(i.remove("message-hide"),i.add("message-show")):(i.remove("message-show"),i.add("message-hide"))},setProperty:function(e,t){var i;if(!this._cfg)return null;var n=this._cfg.bind,s=this.getProperty(e);if(this._cfg[e]=t,n){var a=n[e];if(a){var r=a.inside,o=a.to,l=a.transform;if(r&&(o||0===o)){i=this._transform(l,t,"fromWidget");var c=this._bindingListeners[e];aria.utils.Json.setValue(r,o,i,c?c.cb:null)}}}return s!==t?{oldValue:s,newValue:t}:void 0},setWidgetProperty:function(e,t){if(this._cfg){var i=this.getProperty(e);t!=i&&(this._cfg[e]=t,this._onBoundPropertyChange(e,t,i))}},changeProperty:function(e,t){this._cfg&&(this.setWidgetProperty(e,t),this.setProperty(e,t))},getProperty:function(e){return this._cfg?this._cfg[e]:null},getCorrectTitle:function(e){return aria.utils.Type.isNumber(parseInt(e.charAt(0)))?e.toLowerCase():aria.utils.String.capitalize(e)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/message/style/MessageStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");require("plnextv2/utils/widgets/plnextLib/message/style/MessageStyleScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.message.style.MessageStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this),this.$MessageStyleScript.constructor.call(this)},$destructor:function(){this.$MessageStyleScript.$destructor.call(this),this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)_newMessagesStyle?this.macro_newMessageStyle():this.macro_oldMessageStyle()}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},macro_newMessageStyle:function(){try{with(this)this.__$write("\n\n.plnext-message {\npadding: 20px;\nborder: 2px solid;\n}\n\n.plnext-message > .alert-title {\nfont-size: 16px;\nfont-weight: ",16),this.__$write(this.$strong,24),this.__$write(";\nword-break: normal;\ntext-transform: none;\nmargin-top: 2px;\n}\n\n.plnext-message > .alert-icon {\nmargin-right: 7px;\nfont-size: 24px;\nfloat: left;\nwidth: 24px;\n}\n\n.plnext-message > .content {\nmargin-left: 20px;\nmargin-top: 2px;\n}\n\n.plnext-message > .content p {\nfont-size: 14px;\ncolor: ",24),this.__$write(this.$grayDarker,44),this.__$write(";\nmargin-left: 10px;\n}\n\n.plnext-message > .content p:last-child {\nmargin-bottom: 0;\n}\n\n.plnext-message > .content ul li {\nfont-size: 14px;\nline-height: 14px;\nmargin-left: 10px;\nmargin-bottom: 15px;\ndisplay: inline-block;\nwidth: 100%\n}\n\n.plnext-message > .content *:last-child {\nmargin-bottom: 0;\n}\n\n.plnext-message-danger > .alert-icon, .plnext-message-danger > .alert-title,\n.plnext-message-warning > .alert-icon, .plnext-message-warning > .alert-title {\ncolor: ",44),this.__$write(this.$amadeusCherry,67),this.__$write(";\n}\n.plnext-message-info > .alert-icon, .plnext-message-info > .alert-title {\ncolor: ",67),this.__$write(this.$blue,70),this.__$write(";\n}\n.plnext-message-confirmation > .alert-icon, .plnext-message-confirmation > .alert-title {\ncolor: ",70),this.__$write(this.$greenConfirmation,73),this.__$write(";\n}\n.plnext-message-widget > .alert-icon, .plnext-message-widget > .alert-title {\ncolor: ",73),this.__$write(this.$grayDarken,76),this.__$write(";\n}\n\n.plnext-message-danger,\n.plnext-message-warning {\nborder-color: ",76),this.__$write(this.$amadeusCherry,81),this.__$write(";\nbackground-color: ",81),this.__$write(this.$white,82),this.__$write(";\n}\n.plnext-message-info {\nborder-color: ",82),this.__$write(this.$blue,85),this.__$write(";\nbackground-color: ",85),this.__$write(this.$white,86),this.__$write(";\n}\n.plnext-message-confirmation {\nborder-color: ",86),this.__$write(this.$greenConfirmation,89),this.__$write(";\nbackground-color: ",89),this.__$write(this.$white,90),this.__$write(";\n}\n.plnext-message-widget {\nborder: none;\nbackground-color: ",90),this.__$write(this.$white,94),this.__$write(';\n}\n\n.plnext-message.message-panel-styled .content .checkbox,\n.plnext-message.message-panel-styled .content .checkbox input[type="checkbox"] {\nmargin: 0;\npadding-left: 8px;\n}\n\n.plnext-message.message-panel-original .cancelled-car-message-text {\ntop:10px;\nposition:relative;\n}\n\n.cancelled-car-hidden {\ndisplay:none;\n}\n\n.plnext-message.message-panel-styled .alert-title strong {\nfont-family: inherit;\nfont-weight: inherit;\n}\n\n.plnext-message.message-panel-styled .content .checkbox label {\nmargin-left: 2px;\n}\n\n.plnext-message.message-panel-styled .content .form-group {\nmargin-left: 8px;\nmargin-bottom: 0;\n}\n\n.plnext-message.message-panel-styled .content .checkbox input[type=checkbox] + label:before {\ncolor: ',94),this.__$write(this.$blue,127),this.__$write(";\nbackground-color: ",127),this.__$write(this.$grayLighten,128),this.__$write(";\nline-height: 18px;\ntext-align: center;\nfont-family: 'ADC-icons';\ncursor: pointer;\ncontent: \"\";\ndisplay: inline-block;\nborder: 1px solid ",128),this.__$write($grayBorder,135),this.__$write(";\nwidth: 20px;\nheight: 20px;\nvertical-align: middle;\nmargin: -3px 6px 0 -20px;\n",135),this.macro_boxShadow("inset 1px 1px 3px 0px "+this.$blackAlmostTransparent+", 0px 1px 0px 0px "+this.$whitePartialOpaque),this.__$write('\n}\n\n.plnext-message.message-panel-styled .content .checkbox input[type=checkbox]:checked + label:before {\ncontent: "\\f00c";\n}\n\n.plnext-message.message-panel-styled .content .checkbox-container {\nmargin-top: 28px;\n}\n\n\n.plnext-message.message-panel-styled .content .checkbox input[type=checkbox]:focus + label:before,\n.traveller-additional-options .checkbox input[type=checkbox]:not(:checked):focus + label:before {\nborder-color: ',142),this.__$write(this.cornflowerBlue,155),this.__$write(";\noutline: 0;\n",155),this.macro_boxShadow("inset 0 1px 1px "+this.$blackFullOpaque+", 0 0 8px "+this.$blueLightCheckbox),this.__$write("\n}\n\n@media (max-width: ",158),this.__$write(this.breakpoints.XS_MAX,160),this.__$write(') {\n.plnext-message {\npadding: 10px;\n}\n\n.plnext-message-widget.message-panel-styled .content .checkbox,\n.plnext-message-widget .content .checkbox input[type="checkbox"] {\npadding-left: 8px;\n}\n}\n\n',160)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["newMessageStyle",__filename,this["aria:currentLineNumber"]],_ex)}},macro_oldMessageStyle:function(){try{with(this)this.__$write("\n\n\n.plnext-message .message-close-button{\ncolor: #616161;\ndisplay:table-cell;\ntext-align: right;\nvertical-align: top;\ncursor:pointer;\nwidth:1%;\n}\n\n.message-hide {\ndisplay : none;\n}\n\n.plnext-message {\npadding:20px;\nwidth:100%;\ncolor:",176),this.__$write(this.$grayDarken,194),this.__$write(";\n}\n\n.plnext-message .alert-icon{\nfloat:left;\nfont-size:42px;\n}\n\n.plnext-message .alert-icon-danger, .plnext-message-danger .alert-title,\n.plnext-message .alert-icon-warning, .plnext-message-warning .alert-title {\ncolor:",194),this.__$write(this.$amadeusCherry,204),this.__$write(";\n}\n\n.plnext-message .alert-icon-info {\ncolor:",204),this.__$write(this.$gray,208),this.__$write(";\n}\n\n.plnext-message .alert-icon-confirmation {\ncolor:",208),this.__$write(this.$green,212),this.__$write(";\n}\n\n.alert-confirmation {\nbackground-color:",212),this.__$write(this.$white,216),this.__$write(";\n}\n\n.plnext-message.alert-confirmation {\ndisplay:table;\n}\n\n.message-panel-original .cancelled-car-message-text{\ntop:10px;\nposition:relative;\n}\n\n.cancelled-car-hidden{\ndisplay:none;\n}\n\n.plnext-message-info .alert-title {\ncolor:",216),this.__$write(this.$grayDarken,233),this.__$write(';\n}\n\n.plnext-message > .alert-title {\nmargin:0 0 0px 20px;\nfont-size:18px;\nfont-family: "Roboto Black";\ndisplay:inline-block;\nline-height:42px;\n}\n\n.plnext-message .content{\nmargin-left:62px;\n}\n\n\n\n@media only screen and (max-width: ',233),this.__$write(this.breakpoints.XS_MAX,250),this.__$write("){\n\n.plnext-message .alert-icon{\nfloat:none;\ndisplay:inline-block;\nvertical-align: middle;\n}\n\n.plnext-message {\ntext-align: center;\n}\n\n.plnext-message .content{\ntext-align: left;\nmargin:10px 0 0 0;\n}\n\n}\n\n",250)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["oldMessageStyle",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.widgets.plnextLib.message.style.MessageStyleScript,e)},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/message/style/MessageStyleScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.message.style.MessageStyleScript",$dependencies:["plnextv2.utils.context.AppContext"],$constructor:function(){var e=plnextv2.utils.context.AppContext.getPageData().appData;this._newMessagesStyle=e.config.messagesNewStyle||!1}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/modalDialog/core/ModalDialog.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.modalDialog.core.ModalDialog",$extends:"plnextv2.utils.widgets.plnextLib.dialog.core.Dialog",$dependencies:[],$css:["plnextv2.utils.widgets.plnextLib.modalDialog.style.ModalDialogStyle"],$statics:{DIALOG_CLASS:"plnext-modal-dialog",DIALOG_CONTENT_CLASS:"dialog dialog-content"},$prototype:{_updatePosition:function(){this._popup&&(this._popup.style.zIndex=this.ZINDEX_DIALOG)},_updateOffsetWithDocumentScroll:function(){return{top:0,left:0}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/modalDialog/style/ModalDialogStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.modalDialog.style.ModalDialogStyle",$extends:require("plnextv2/utils/widgets/plnextLib/dialog/style/DialogStyle.tpl.css"),$constructor:function(){this.$DialogStyle.constructor.call(this)},$destructor:function(){this.$DialogStyle.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.$DialogStyle.macro_main.apply(this,[]),this.__$write("\n\n.plnext-modal-dialog {\n\nposition: fixed;\ntop: 0;\n\nbottom: 0;\n\nheight: 100%;\n\nleft: 10px;\nright: 10px;\n}\n\n.plnext-modal-dialog.dialog-hide {\nvisibility : hidden;\n}\n\n.plnext-modal-dialog.dialog-show {\nvisibility : visible;\n}\n\n.plnext-modal-dialog .dialog-content {\npadding: 20px;\n\nposition: relative;\ndisplay:block;\nmargin: auto;\nmax-width: 500px;\n\ntop: 50%;\ntransform: translateY(-50%);\n}\n\n.plnext-modal-dialog h2 {\nfont-weight: ",9),this.__$write(this.fontWeight.bold,44),this.__$write(";\n}\n\n.plnext-modal-dialog .btn {\nmargin-right: .5em;\n}\n\n@media (max-width: ",44),this.__$write(this.breakpoints.XXXS_MAX,51),this.__$write(") {\n.plnext-modal-dialog .btn,\n.plnext-modal-dialog .plnext-widget-btn.btn-primary {\nwidth: 100%;\nmargin-right: 0;\n}\n}\n",51)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},__$initTemplate:function(){return this.$DialogStyle.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/modalPopover/core/ModalPopover.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.modalPopover.core.ModalPopover",$extends:"aria.widgets.Widget",$dependencies:["plnextv2.utils.widgets.plnextLib.modalPopover.bean.ModalPopoverCfgBean","aria.utils.Json","plnextv2.utils.animations.ripple.Ripple","plnextv2.utils.I18n","plnextv2.utils.DeviceUtils","plnextv2.utils.NativeAppCommunicationWrapper","aria.utils.String"],$css:["plnextv2.utils.widgets.plnextLib.modalPopover.style.ModalPopoverCss"],$statics:{KEY_CODE_ESC:27},$constructor:function(){this._nativeAppCommunicationWrapper=plnextv2.utils.NativeAppCommunicationWrapper,this._cfgBean="plnextv2.utils.widgets.plnextLib.modalPopover.bean.ModalPopoverCfgBean.ModalPopoverCfgBean",this.$Widget.constructor.apply(this,arguments),this._widgetId=this._createDynamicId(),this._headerCloseBtnId=this._widgetId+"-header-close-btn",this._contentCloseBtnId=this._widgetId+"-content-close-btn",this._headerId=this._widgetId+"-heading",this._cssMobileAppMode=""},$destructor:function(){this._jqWidgetContainer.remove(),this._jqWindow.off("resize",this._onResize)},$prototype:{writeMarkup:function(e){this._cfg.closeButtonLabel=this._cfg.closeButtonLabel||plnextv2.utils.I18n.getLabel("tx_pltg_text_Close");var t="popover-container popover-hidden";this._cfg.cssClass&&(t+=" "+this._cfg.cssClass),e.write('<div role="dialog" tabindex="-1" id="'+this._widgetId+'" class="'+t+'" aria-labelledby="'+this._headerId+'">'),this._isEmbeddedInApp()||this._writeHeaderMarkup(e),this._cfg.displaySubheaderSticky&&(this._cssMobileAppMode="popover-mobile-app-sticky-mode"),e.write('<div class="popover-main '+this._cssMobileAppMode+'">'),this.__writeSubheaderMarkup(e);var i=this._cfg.modalId?'id="'+this._cfg.modalId+'"':"";e.write("<div "+i+' class="popover-body '+this._cssMobileAppMode+'">'),e.callMacro(this._cfg.contentMacro);var n="";this._cfg.showCloseButtonAfterContent&&(n=this._buildContentCloseButtonMarkup()),markup=[n,"</div>","</div>","</div>"],e.write(markup.join(""))},_writeHeaderMarkup:function(e){this._cfg.binding.heading||this.$logError("_writeHeaderMarkup this._cfg.binding.heading empty %1");var t=['<div class="popover-header">','<div class="popover-header-content">','<h1 id="'+this._headerId+'" class="popover-heading">',this._cfg.binding.heading.inside[this._cfg.binding.heading.to],"</h1>",'<button id="'+this._headerCloseBtnId+'" class="btn popover-header-close-btn">','<i class="icon-close" aria-hidden="true"></i>','<span class="plnext-sr-only">'+this._cfg.closeButtonLabel+"</span>","</button>","</div>","</div>"];e.write(t.join(""))},__writeSubheaderMarkup:function(e){this._cfg.subheaderMacro&&(e.write('<div class="popover-subheader '+this._cssMobileAppMode+'"><div class="popover-subheader-content '+this._cssMobileAppMode+'">'),e.callMacro(this._cfg.subheaderMacro),e.write("</div></div>"))},_buildContentCloseButtonMarkup:function(){var e="";this._cfg.closeButtonCssClass&&(e=this._cfg.closeButtonCssClass);var t=['<div class="popover-content-close-button-container">','<button id="'+this._contentCloseBtnId+'" class="btn btn-primary popover-content-close-btn'+e+'">',this._cfg.closeButtonLabel,"</button>","</div>"];return t.join("")},initWidget:function(){this._jqWindow=jQuery(window),this._jqContentNode=$(this._cfg.backgroundContentSelector),this._jqWidgetContainer=$("#"+this._widgetId),this._jqHeaderCloseBtn=$("#"+this._headerCloseBtnId),this._jqHeading=$("#"+this._headerId),this._jqHeader=this._jqWidgetContainer.find(".popover-header"),this._jqMain=this._jqWidgetContainer.find(".popover-main"),this._jqSubheader=this._jqWidgetContainer.find(".popover-subheader"),this._switchParentDomNode(),this._cfg.displaySubheaderSticky&&this._serviceSummaryHeaderScrollAppEvent(),this._jqWidgetContainer.keydown({scope:this},function(e){e.keyCode===e.data.scope.KEY_CODE_ESC&&e.data.scope._handleCloseButtonClick.call(e.data.scope)}),this._jqHeaderCloseBtn.click({scope:this},function(e){e.data.scope._handleCloseButtonClick.call(e.data.scope)}),this._cfg.showCloseButtonAfterContent&&(this._jqContentCloseBtn=$("#"+this._contentCloseBtnId),this._jqContentCloseBtn.click({scope:this},function(e){e.data.scope._handleCloseButtonClick.call(e.data.scope)})),aria.utils.Json.addListener(this._cfg.binding.show.inside,this._cfg.binding.show.to,{fn:this._handleShowWidget,scope:this},!1,!1),this._cfg.binding.heading||this.$logError("initWidget this._cfg.binding.heading empty! %1"),aria.utils.Json.addListener(this._cfg.binding.heading.inside,this._cfg.binding.heading.to,{fn:this._handleHeadingChange,scope:this},!1,!1),this._jqWindow.resize(this,this._onResize),this._handleMainHeight()},_switchParentDomNode:function(){this._jqWidgetContainer.detach(),this._jqWidgetContainer.appendTo("body")},_handleShowWidget:function(){var e=this._cfg.binding.show.inside[this._cfg.binding.show.to];e&&(this._previousActiveElement=document.activeElement),this._togglePopoverVisibility(e),this._toggleBackgroundScroll(e),this._handleMainHeight()},_handleHeadingChange:function(){var e=this._cfg.binding.heading.inside[this._cfg.binding.heading.to];e&&this._jqHeading.html(e)},_togglePopoverVisibility:function(e){e?(this._jqWidgetContainer.removeClass("popover-hidden").addClass("popover-show"),this._focusPopoverHeading(),this._isEmbeddedInApp()&&this._sendAppHeaderOpen()):(this._jqWidgetContainer.removeClass("popover-show").addClass("popover-hidden"),this._focusLastActiveElement(),this._isEmbeddedInApp()&&this._sendAppHeaderClose())},_focusPopoverHeading:function(){var e=this;window.setTimeout(function(){e._jqWidgetContainer.focus()},700)},_focusLastActiveElement:function(){var e=this;window.setTimeout(function(){e._previousActiveElement.focus()},700)},_toggleBackgroundScroll:function(e){e?$("#page-container").animate({opacity:0},700):$("#page-container").animate({opacity:1})},_toggleBackgroundContentAriaHiddenStatus:function(){},_handleCloseButtonClick:function(){aria.utils.Json.setValue(this._cfg.binding.show.inside,this._cfg.binding.show.to,!1),null!=this._cfg.onClose&&this.$callback(this._cfg.onClose)},_onResize:function(e){e.data._cfg.binding.show.inside[e.data._cfg.binding.show.to]&&e.data._handleMainHeight()},_handleMainHeight:function(){var e=this._jqWindow.height()-this._jqHeader.height();this._jqMain.css({height:e+"px"})},_sendAppHeaderOpen:function(){this.currentHeaderData=this._nativeAppCommunicationWrapper.getHeaderData(),this._nativeAppCommunicationWrapper.sendHeaderData({title:aria.utils.String.capitalize(this._cfg.binding.heading.inside[this._cfg.binding.heading.to]),id:"dxpopup",hamburgerForApp:!1,backButtonForApp:!1,cancelButtonForApp:!0,popupForApp:!1}),this._nativeAppCommunicationWrapper.setNativeCloseButtonCallback({scope:this,fn:this._handleCloseButtonClick})},_sendAppHeaderClose:function(){this._nativeAppCommunicationWrapper.sendHeaderData(this.currentHeaderData),this._nativeAppCommunicationWrapper.removeNativeCloseButtonCallback()},_isEmbeddedInApp:function(){return plnextv2.utils.DeviceUtils.isEmbeddedInApp()&&this._nativeAppCommunicationWrapper.isEnabled()},_serviceSummaryHeaderScrollAppEvent:function(){this.lastScrollPosition=0;var e=this;this._jqMain.scroll({scope:e},function(){var t=e._jqMain.scrollTop();e._jqSubheader.css(t>e.lastScrollPosition?{top:2*-e._jqSubheader.height()+"px"}:{top:0}),e.lastScrollPosition=t})}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/modalPopover/style/ModalPopoverCss.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.modalPopover.style.ModalPopoverCss",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.$BaseCss.macro_main.apply(this,[]),this.__$write("\n\n.popover-container {\nvisibility: hidden;\nz-index: -9999999;\nposition: fixed;\nopacity: 0;\nbottom: -400px;\nleft: 0;\ntransition:\ntransform 0.6s cubic-bezier(0.35, 0, 0.25, 1),\nopacity 0.6s cubic-bezier(0.35, 0, 0.25, 1);\nwidth: 100%;\nheight: 100%;\nbackground-color: ",8),this.__$write(this.$grayLighten,21),this.__$write(";\n}\n\n.popover-show {\nvisibility: visible;\nz-index: 9999999;\ntransform: translateY(-400px);\nopacity: 1;\n}\n\n.popover-header {\nwidth: 100%;\ndisplay: flex;\nflex-flow: row wrap;\njustify-content: center;\nbackground-color: ",21),this.__$write(this.$tabletLightGray,36),this.__$write(";\nposition: relative;\n}\n\n.popover-header, .popover-subheader {\nbox-shadow: 0 3px 5px 0 ",36),this.__$write(this.$grayLightShade,41),this.__$write(";\nz-index: 2;\n}\n\n.popover-subheader {\nwidth: 100%;\nbackground-color: ",41),this.__$write(this.$grayLight,47),this.__$write(";\n}\n\n.popover-header-content, .popover-subheader-content {\nwidth: 100%;\nheight: 100%;\nmax-width: ",47),this.__$write(this.breakpoints.MD_MIN,53),this.__$write(";\ncolor: ",53),this.__$write(this.$grayDarken,54),this.__$write(";\n}\n\n.popover-header-content {\ndisplay: flex;\nflex-flow: row nowrap;\nalign-items: center;\npadding-top:0;\npadding-bottom:0;\n}\n\n.popover-main{\nwidth: 100%;\ndisplay: flex;\nflex-flow: column;\nalign-items: center;\npadding: initial;\n}\n\n@media (min-width: ",54),this.__$write(this.breakpoints.MD_MIN,73),this.__$write(") {\n.popover-header-content, .popover-subheader-content {\npadding: 15px 20px;\n}\n}\n\n@media (max-width: ",73),this.__$write(this.breakpoints.SM_MAX,79),this.__$write(") {\n.popover-header-content, .popover-subheader-content {\npadding: 10px 20px;\n}\n}\n\n@media (max-width: ",79),this.__$write(this.breakpoints.XXS_MAX,85),this.__$write(') {\n.popover-header-content {\npadding: 12px 7.5px;\n}\n\n.popover-subheader-content {\npadding: 0 7.5px 10px 7.5px;\n}\n\n.popover-header-close-btn {\nfont-size: 18px;\n}\n\n.popover-heading [class^="icon-"],\n.popover-heading [class*=" icon-"] {\nfont-size: 16px;\n}\n}\n\n@media (min-width: ',85),this.__$write(this.breakpoints.XS_MIN,104),this.__$write(') {\n.popover-header-content {\npadding: 10px 17.5px;\n}\n\n.popover-subheader-content {\npadding: 0 17.5px 10px 17.5px;\n}\n\n.popover-header-close-btn {\nfont-size: 22px;\n}\n\n.popover-heading [class^="icon-"],\n.popover-heading [class*=" icon-"] {\nfont-size: 24px;\n}\n}\n\n@media (min-width: ',104),this.__$write(this.breakpoints.SM_MIN,123),this.__$write(") {\n.popover-header-content {\npadding: 10px 27.5px;\n}\n\n.popover-subheader-content {\npadding: 0 27.5px 15px 27.5px;\n}\n}\n\n.popover-subheader-content {\ncolor: inherit;\nheight: auto;\nmargin: 0 auto;\n}\n\n.popover-body {\nwidth: 100%;\nflex: 1;\nmax-width: ",123),this.__$write(this.breakpoints.MD_MIN,142),this.__$write(";\noverflow-y: auto;\n-webkit-overflow-scrolling: touch;\npadding: 10px;\n}\n\n\n.popover-body > * {\n-webkit-transform: translateZ(0);\n}\n\n.popover-content-close-button-container {\nwidth: 100%;\nmax-width: ",142),this.__$write(this.breakpoints.MD_MIN,155),this.__$write(";\npadding: 10px;\ndisplay: flex;\njustify-content: flex-end;\n}\n\n.popover-heading {\nwidth: 100%;\nheight: 100%;\nfont-size: 16px;\nmargin: 0;\npadding: 0;\ntext-transform: capitalize;\nfont-weight: ",155),this.__$write(this.$bold,168),this.__$write(";\ndisplay: flex;\nalign-items: center;\n}\n\n.popover-header-close-btn,\n.popover-header-close-btn:active,\n.popover-header-close-btn:focus,\n.popover-header-close-btn:hover {\nheight: 100%;\nbackground-color: transparent;\nborder: none;\nline-height: 1;\nbox-shadow: none;\npadding: 0;\n}\n\n.popover-content-close-btn,\n.popover-content-close-btn:active,\n.popover-content-close-btn:focus,\n.popover-content-close-btn:hover {\ncolor: ",168),this.__$write(this.$grayDarken,189),this.__$write(";\nbackground-color: ",189),this.__$write(this.$gray,190),this.__$write(";\nborder-color: ",190),this.__$write(this.$gray,191),this.__$write(";\ntext-transform: capitalize;\n}\n\n\n@media (max-height: 480px) {\n.popover-main{\noverflow-y: auto;\n-webkit-overflow-scrolling: touch;\n}\n\n.popover-body {\noverflow-y: initial;\n-webkit-overflow-scrolling: initial;\n}\n}\n\n\n.popover-main.popover-mobile-app-sticky-mode {\noverflow-y: auto;\n-webkit-overflow-scrolling: touch;\n}\n\n.popover-subheader.popover-mobile-app-sticky-mode {\nbackground-color: ",191),this.__$write(this.$white,215),this.__$write(";\nposition: -webkit-sticky;\nposition: sticky;\ntransition: top 0.3s ease;\n}\n\n.popover-subheader-content.popover-mobile-app-sticky-mode {\npadding: 5px 15px 5px 15px;\n}\n\n@media (max-width: ",215),this.__$write(this.breakpoints.XXS_MAX,225),this.__$write(") {\n.popover-subheader-content.popover-mobile-app-sticky-mode {\npadding: 7.5px 15px 7.5px 15px;\n}\n}\n\n.popover-body.popover-mobile-app-sticky-mode {\noverflow-y: initial;\n-webkit-overflow-scrolling: initial;\n}\n\n",225)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/multipleSelect/MultipleSelect.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.multipleSelect.MultipleSelect",$extends:"aria.html.Element",$dependencies:["plnextv2.utils.widgets.plnextLib.multipleSelect.MultipleSelectCfgBeans","plnextv2.utils.widgets.plnextLib.multipleSelect.MultipleSelectDropDown","plnextv2.utils.widgets.plnextLib.multipleSelect.textfield.TextField","aria.utils.Json","aria.DomEvent","plnextv2.utils.widgets.plnextLib.LazyLoader","plnextv2.utils.StringUtils","plnextv2.utils.CustomAriaUtils"],$statics:{INVALID_USAGE:"Widget %1 can only be used as a %2."},$css:["plnextv2.utils.widgets.plnextLib.multipleSelect.MultipleSelectStyle"],$constructor:function(e,t,i){this._i18n=plnextv2.utils.I18n,this._jsonUtil=aria.utils.Json,this._stringUtils=plnextv2.utils.StringUtils,this._customAriaUtils=plnextv2.utils.CustomAriaUtils,this.data={value:e.value||null},this.selectElements={value:e.selectElements||null},this.selectConfig={value:e.selectConfig||null},this._internalDataModelChange={fn:this._updateExternalDataModel,scope:this},this._jsonUtil.addListener(this.data,"value",this._internalDataModelChange),this.$cfgBean="plnextv2.utils.widgets.plnextLib.multipleSelect.MultipleSelectCfgBeans.Properties",e.on=e.on||{},this._registerListeners(e),this._idTextField=e.id,e.id="",this.$Element.constructor.call(this,e,t,i),this._iconDomElt=null,this._textField=new plnextv2.utils.widgets.plnextLib.multipleSelect.textfield.TextField(this._getTextFieldConfig(),t,i),plnextv2.utils.widgets.plnextLib.LazyLoader.register(this.$classpath,{classes:["plnextv2.utils.widgets.plnextLib.multipleSelect.MultipleSelectDropDown"]})},$destructor:function(){this._dropdown&&this._dropdown.close(),this._textField.$dispose(),this._jsonUtil.removeListener(this.data,"value",this._internalDataModelChange),this._internalDataModelChange=null,this.data=null,this._onDropDownCloseCallback=null,this._iconDomElt=null,this.$Element.$destructor.call(this)},$prototype:{writeMarkup:function(e){this.$Element.writeMarkupBegin.call(this,e),this._textField.writeMarkup(e),this._writeIconMarkup(e),this.$Element.writeMarkupEnd.call(this,e),this.data.value.summary=this._initSummary()},writeMarkupBegin:function(){this.$logError(this.INVALID_USAGE,[this.$class,"container"])},writeMarkupEnd:Aria.empty,initWidget:function(){this._textField.initWidget(),this.$Element.initWidget.call(this),this._domElt.className+=" multiple-select",this._iconDomElt=this._domElt.children[1],this._cfg.lazy||plnextv2.utils.widgets.plnextLib.LazyLoader.load(this.$classpath)},onbind:function(e,t){"value"===e&&"object"==typeof t&&this._jsonUtil.setValue(this.data,"value",t,this._internalDataModelChange)},setWidgetProperty:function(e,t){"value"===e&&"object"==typeof t&&this._jsonUtil.setValue(this.data,"value",t)},_registerListeners:function(e){var t=e.on;this._chainListener(t,"click",{fn:this._onclick,scope:this})},_onclick:function(){this._triggerDropDown(),this.selectConfig.value.setFocusOnFirstSelect||this._textField.focus()},_updateExternalDataModel:function(e){var t=this._bindingListeners.value;if(t)if("object"==typeof e.newValue){aria.utils.Json.setValue(t.inside,t.to,e.newValue,t.cb);var i=e.newValue.selectValues;for(element in i)this._customAriaUtils.isMetadata(element)||aria.utils.Json.setValue(this.selectConfig.value.container,element,i[element])}else aria.utils.Json.setValue(this.data,"value",e.oldValue)},_onDropDownClose:function(){var e=null;this._dropdown&&(e=this._dropdown.closeEvent,this._dropdown.$dispose(),this._dropdown=null),e&&e==aria.DomEvent.KC_TAB||this._textField.focus(),e&&e!=aria.DomEvent.KC_ESCAPE&&(this._jsonUtil.setValue(this.data,"value",this.data.value),this._textField.callChangeListener())},_writeIconMarkup:function(e){var t=this._cfg.iconBtni18n||"tx_pltg_text_multipleSelectInfo_AX",i=this._cfg.iconClass||"icon-adult";e.write('<button type="button" aria-label="'+this._i18n.getLabel(t)+'"class="input-group-addon btn-multiple-select" data-role="icon"><span data-role="icon" class="dropdown-icon '+i+'"></span></button>')},_triggerDropDown:function(){var e=plnextv2.utils.widgets.plnextLib;if(e.LazyLoader.isLoaded(this.$classpath)){this._dropdown||(this._dropdown=new e.multipleSelect.MultipleSelectDropDown(this._getDropDownConfig()));var t=this._dropdown;t.isOpen()?t.close():"object"==typeof this.data.value&&(this._jsonUtil.setValue(this.data,"value",this.data.value),t.open(),t.setFocusOnFirstSelect())}else e.LazyLoader.load(this.$classpath,{fn:this._triggerDropDown,scope:this})},_getTextFieldConfig:function(){var e=this._cfg,t=this._jsonUtil.copy(e.textField);return t.id=this._idTextField,e.placeholder&&(t.placeholder=e.placeholder),t.bind={value:{to:"value",inside:this.data}},t.on=t.on||{},this._chainListener(t.on,"keydown",{fn:this._onTextFieldKeydown,scope:this}),t.attributes={},t.attributes.readonly="true",t.attributes.autocomplete="off",e.textField.formControlClass&&(t.attributes.classList=[e.textField.formControlClass]),t},_getDropDownConfig:function(){var e={selectList:this._getSelectListCfg(),domReference:this._domElt,context:this._context,lineNumber:this._lineNumber,ignoreClicksOn:[this._iconDomElt],onAfterClose:{fn:this._onDropDownClose,scope:this}};return e},_getSelectListCfg:function(){var e=this._cfg,t=this._jsonUtil.copy(e.selectList);return t.bind={value:{to:"value",inside:this.data},selectConfig:{to:"value",inside:this.selectConfig},selectElements:{to:"value",inside:this.selectElements}},t},_onTextFieldKeydown:function(e){var t=aria.DomEvent,i=this._dropdown;i&&i.isOpen()?i.processKeyEvent(e):e.keyCode==t.KC_ARROW_DOWN&&(this._triggerDropDown(),e.preventDefault())},_initSummary:function(){var e="",t=this.data.value.selectValues,i=this.selectElements.value;for(index in i){var n=i[index].name,s=Number(t[n]);if("undefined"!=typeof t[n]&&s>0){var a;a="undefined"==typeof i[index].localizable||i[index].localizable?1===s?i[index].label:i[index].multiLabel:1===s?i[index].labelI18nKey:i[index].multiLabelI18nKey,e+=t[n]+" "+this._stringUtils.capitaliseFirstLetter(a)+", "}}return e.length>2&&(e=e.substring(0,e.length-2)),e},getId:function(){return this._cfg.id}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/multipleSelect/MultipleSelectDropDown.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.multipleSelect.MultipleSelectDropDown",$extends:"plnextv2.utils.widgets.light.DropDown",$dependencies:["aria.DomEvent","aria.utils.Type","aria.core.Browser","plnextv2.utils.widgets.plnextLib.multipleSelect.selectList.SelectList"],$constructor:function(){this.$DropDown.constructor.apply(this,arguments),this._selectList=null,this.closeEvent=null,this._offset=aria.core.Browser.isIE7?{top:5,bottom:-10,left:0,right:0}:{top:5,bottom:5,left:0,right:0}},$destructor:function(){this._selectList=null,this.$DropDown.$destructor.apply(this,arguments)},$prototype:{_contentWriter:function(e){var t=this._cfg.selectList;t.template="plnextv2.utils.widgets.plnextLib.multipleSelect.selectList.view.SelectListTemplate",this._addSelectListListeners(t),e.write('<span id="multipleSelectListContainer" class="dpSelectListContainer">'),selectList=new plnextv2.utils.widgets.plnextLib.multipleSelect.selectList.SelectList(t,this._cfg.context,this._cfg.lineNumber),e.registerBehavior(selectList),selectList.writeMarkup(e),e.write("</span>"),this._selectList=selectList},_addSelectListListeners:function(e){e.on=e.on||{},e.on.keydown=e.on.keydown?aria.utils.Type.isArray(e.on.keydown)?e.on.keydown:[e.on.keydown]:[],e.on.keydown.push({fn:this._onSelectListKeydown,scope:this})},_onSelectListKeydown:function(e){var t=e.keyCode,i=aria.DomEvent,n=!this._selectList._hasFocus;(t==i.KC_SPACE||t==i.KC_ESCAPE||n)&&(n&&(t=i.KC_ESCAPE),this.closeEvent=t,this.close(),this.closeEvent=null)},processKeyEvent:function(e){var t=this._selectList.sendKey(e);this._onSelectListKeydown(e,t)},setFocusOnFirstSelect:function(){this._selectList.setFocusOnFirstElement()}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/multipleSelect/MultipleSelectStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.multipleSelect.MultipleSelectStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n.multiple-select input.form-control {\nwidth: calc(100% - 38px);\n}\n\n.btn-multiple-select {\ndisplay: inline-block;\nwidth: 38px;\nheight: 34px;\nline-height: inherit;\n}\n\n.btn-multiple-select:focus {\noutline: 1px dotted ",15),this.__$write(this.$blueFocusShadow1,28),this.__$write(";\noutline: 5px auto -webkit-focus-ring-color;\n}\n\n",28)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/multipleSelect/selectList/SelectList.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.multipleSelect.selectList.SelectList",$extends:"aria.html.Element",$dependencies:["plnextv2.utils.widgets.plnextLib.multipleSelect.selectList.controller.SelectListController","plnextv2.utils.widgets.plnextLib.multipleSelect.selectList.SelectListCfgBeans","aria.html.Template","aria.utils.Object","aria.utils.Array","aria.DomEvent"],$css:["plnextv2.utils.widgets.plnextLib.multipleSelect.selectList.style.SelectListStyle"],$constructor:function(e){this.$cfgBean="plnextv2.utils.widgets.plnextLib.multipleSelect.selectList.SelectListCfgBeans.Properties",this._registerListeners(e),e.attributes=e.attributes||{},e.attributes.tabindex=e.attributes.tabindex||0,this.$Element.constructor.apply(this,arguments);var t=this._cfg.sclass,i=aria.widgets.AriaSkinInterface.getSkinObject("Calendar",t);this._hasFocus=!1;var n=aria.utils.Object.keys(e),s=["on","attributes","id","bind","tagName","sclass"],a=aria.utils.Array;n=a.filter(n,function(e){return!a.contains(s,e)});var r=aria.utils.Json.copy(e,!0,n);r.focus=this._hasFocus,this._data={skin:{sclass:t,skinObject:i,baseCSS:"xCalendar_"+t+"_"},settings:r},this._controller=new plnextv2.utils.widgets.plnextLib.multipleSelect.selectList.controller.SelectListController(this._data),this._controllerListener={fn:this._onControllerEvent,scope:this},this._controller.$addListeners({update:this._controllerListener}),this._templateCfg={classpath:this._cfg.template,data:{dataModel:this._data,controller:this._controller}}},$destructor:function(){this._controller.$removeListeners({update:this._controllerListener}),this._controllerListener=null,this._controller.$dispose(),this.$Element.$destructor.call(this)},$prototype:{writeMarkup:function(e){this.$Element.writeMarkupBegin.call(this,e);var t=new aria.html.Template(this._templateCfg,this._context,this._lineNumber);e.registerBehavior(t),t.writeMarkup(e),this.$Element.writeMarkupEnd.call(this,e)},writeMarkupBegin:function(){this.$logError(this.INVALID_USAGE,[this.$class,"container"])},writeMarkupEnd:Aria.empty,_transferToDataModel:function(e,t){var i=this._bindingListeners[e];i&&"object"==typeof t&&aria.utils.Json.setValue(i.inside,i.to,t,i.cb)},_onControllerEvent:function(e){this._inOnBoundPropertyChange||"update"==e.name&&e.properties.value&&(this._transferToDataModel("value",this._data.settings.value),this.evalCallback(this._cfg.onchange))},onbind:function(e){this._inOnBoundPropertyChange=!0;try{}finally{this._inOnBoundPropertyChange=!1}},_registerListeners:function(e){e.on=e.on||{};for(var t,i=e.on,n=["blur","keydown","focus"],s=0,a=n.length;a>s;s++)t=n[s],this._chainListener(i,t,{fn:this["_dom_on"+t],scope:this})},_dom_onkeydown:function(e){var t=this.getDom();this.sendKey(e)||(e.preventDefault(!0),t.focus())},_dom_onfocus:function(){this._hasFocus=!0},_dom_onblur:function(){this._hasFocus=!1},sendKey:function(e){var t=aria.DomEvent,i=this._domElt.getElementsByTagName("SELECT");if(i){var n=i.length;if(n>0){var s=document.activeElement;if(e.keyCode==t.KC_TAB)if(e.shiftKey)for(var a=0;n>a;a++){var r=i[a];r==s&&(0==a?(this._hasFocus=!1,e.preventDefault(!0)):i[a].focus())}else s==i[n-1]&&(this._hasFocus=!1,e.preventDefault(!0))}}return!0},getDom:function(){return this._domElt},setWidgetProperty:function(e,t){this._cfg[e]=t},setFocusOnFirstElement:function(){var e=this._domElt.getElementsByTagName("SELECT");e&&e.length>0&&e[0].focus()}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/multipleSelect/selectList/controller/ISelectListController.js
//*******************
!function(){Aria.interfaceDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.multipleSelect.selectList.controller.ISelectListController",$extends:"aria.templates.IModuleCtrl",$interface:{updateSelect:{$type:"Function"},buildSummary:{$type:"Function"}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/multipleSelect/selectList/controller/SelectListController.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.multipleSelect.selectList.controller.SelectListController",$dependencies:["aria.utils.Date","aria.utils.environment.Date","aria.utils.Array","aria.utils.Json","plnextv2.utils.widgets.plnextLib.multipleSelect.selectList.SelectListCfgBeans","plnextv2.utils.StringUtils"],$events:{focusChanged:"",update:"",keyevent:""},$constructor:function(e){this.json=aria.utils.Json,this._stringUtils=plnextv2.utils.StringUtils,this._changedSettings={value:{}},this._changedSettingsNbr=1,this.init(e)},$destructor:function(){this._jsonListener&&(this.json.removeListener(this._selectListSettings,null,this._jsonListener),this._jsonListener=null),this._selectListSettings=null},$prototype:{$publicInterfaceName:"plnextv2.utils.widgets.plnextLib.multipleSelect.selectList.controller.ISelectListController",_settingsProperties:{value:{}},_jsonDataChanged:function(e){var t=e.dataName,i=this._settingsProperties[t];if(i){var n=this._changedSettings[t];null==n&&(n={oldValue:e.oldValue,newValue:e.newValue},this._changedSettingsNbr++),n.oldValue===e.newValue&&(n=null,this._changedSettingsNbr--),this._changedSettings[t]=n}},init:function(e,t){e||(e={}),e.settings||(e.settings={});var i=e.settings;this._data=e,this._selectListSettings=i,aria.core.JsonValidator.normalize({json:this._selectListSettings,beanName:"plnextv2.utils.widgets.plnextLib.multipleSelect.selectList.SelectListCfgBeans.Properties"}),this.update(),this._jsonListener={fn:this._jsonDataChanged,scope:this},this.json.addListener(i,null,this._jsonListener,!0),t&&this.$callback(t)},notifyFocusChanged:function(e){var t={name:"focusChanged",focus:e,cancelDefault:!1};return this.json.setValue(this._data.settings,"focus",e),this.$raiseEvent(t),t.cancelDefault},keyevent:function(){},update:function(){if(0!==this._changedSettingsNbr){var e=(this.json,this._changedSettings),t=this._selectListSettings;if(e.value&&this._checkValue(),e.value&&1==this._changedSettingsNbr){e.value,e.value.oldValue,t.value}var i=this._changedSettings,n=this._changedSettingsNbr;this._changedSettings={},this._changedSettingsNbr=0,this.$raiseEvent({name:"update",properties:i,propertiesNbr:n,propertyshowShortcuts:t.showShortcuts})}},_checkValue:function(){var e=this._selectListSettings,t=e.value,i=t;null!=t&&i!=t&&"object"==typeof i&&this.json.setValue(e,"value",i)},selectUpdated:function(e){if(this._data){var t="",i=this._selectListSettings.value.selectValues,n=this._selectListSettings.selectElements;e&&(i[e.name]=e.val);for(index in n){var s=n[index].name,a=Number(i[s]);if("undefined"!=typeof i[s]&&a>0){var r=1==a?n[index].label:n[index].multiLabel;t+=i[s]+" "+this._stringUtils.capitaliseFirstLetter(r)+", "}}t.length>2&&(t=t.substring(0,t.length-2)),aria.utils.Json.setValue(this._data.settings,"value",{summary:t,selectValues:i}),this.update()}}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/multipleSelect/selectList/style/SelectListStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.multipleSelect.selectList.style.SelectListStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n.multipleSelect-container {\nbackground-color: ",8),this.__$write(this.$white,9),this.__$write(";\nborder: 1px solid ",9),this.__$write(this.$grayBorder,10),this.__$write(";\nwidth: 20em;\ndisplay: inline-block;\nvertical-align: top;\nmargin: 0.1em;\nwidth: 100%;\n}\n\n.selectList-container {\nmargin: 0.1em;\nwidth: 100%;\npadding: 0.3em;\nmin-width: 15em;\n}\n\n.selectList-footer {\nline-height: 2.5em;\nbackground-color: ",10),this.__$write(this.$grayLight,27),this.__$write(";\npadding: 0.3em;\nborder-top: 1px solid ",27),this.__$write(this.$grayBorder,29),this.__$write(";\n}\n.selectList\n{\ndisplay: table;\nlist-style: none;\npadding: 0.1em;\nwidth: 100%;\nmargin-bottom: 0.2em;\n}\n\n.selectItem {\ndisplay:table-row;\n}\n\n.selectItemHide {\ndisplay:none;\n}\n\n.selectList-label {\ncolor: ",29),this.__$write(this.$black,49),this.__$write(";\ntext-transform: capitalize;\n}\n\n.selectList-subLabel {\ndisplay: inherit;\nfont-size: .7em;\ncolor: ",49),this.__$write(this.$grayDark,56),this.__$write("\n}\n\n.selectItem > span, .selectItem > select {\ndisplay:table-cell;\nvertical-align: top;\n}\n\n.selectItem > select {\nfloat : right;\n}\n\n.selectList > li{\nposition: relative;\nmargin: 0 0 23px 0;\n}\n\n",57)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/multipleSelect/selectList/view/SelectListTemplate.tpl
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/html/HtmlLibrary.js"),require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/widgets/plnextLib/multipleSelect/selectList/view/SelectListTemplateScript.js"),require("ariatemplates/html/Select.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.multipleSelect.selectList.view.SelectListTemplate",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$SelectListTemplateScript.constructor.call(this)},$destructor:function(){this.$SelectListTemplateScript.$destructor.call(this),this.$Template.$destructor.call(this)},$css:[require("plnextv2/utils/widgets/plnextLib/multipleSelect/selectList/style/SelectListStyle.tpl.css")],$prototype:{macro_main:function(){try{with(this)if(selectData&&selectConfig){this.__$write('\n<div class="multipleSelect-container">\n',15);var nSelect=selectData.length,thresHold=selectConfig.threshold,nElements=Math.min(thresHold,nSelect);this.__$write('\n<div class="selectList-container">\n<ul class="selectList">\n',19);for(var index=0;nElements>index;index++){var item=selectData[index];this.macro_renderSelect(item,selectConfig,"")}for(index=nElements;nSelect>index;index++){var item=selectData[index];this.macro_renderSelect(item,selectConfig,"selectItem-threshold hide")}if(this.__$write("\n\n<ul>\n</div>\n",29),nSelect>thresHold){var accessibleShowAllLink=selectConfig.showAllElementsAccessible?"":'tabIndex="-1"';this.__$write('\n\n<div class="selectList-footer">\n\n<a title="',36),this.__$write(selectConfig.customLabels.showAll,39),this.__$write('"\n',39),this.__$write(accessibleShowAllLink,40),this.__$write(' href="javascript:;" ',40),this.__$statementOnEvent("click",this.$normCallback({fn:"showAllElements"}),40),this.__$statementOnEvent("keydown",this.$normCallback({fn:"setCustomFocus"}),41),this.__$write(">\n",42),this.__$write(selectConfig.customLabels.showAll,43),this.__$write("\n</a>\n\n</div>\n",44)}this.__$write("\n</div>\n",48)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},macro_renderSelect:function(item,config,displayClass){try{with(this){this.__$write('\n<li class="selectItem ',54),this.__$write(displayClass,54),this.__$write('">\n',54);var subLabel=item.subLabel||"";this.__$write('\n<span>\n<i class="',56),this.__$write(config[item.name].iconClass,57),this.__$write('" aria-hidden="true"></i>\n<label id="lbl_',57),this.__$write(item.name,58),this.__$write('" class="label selectList-label">',58),this.__$write(item.label,58),this.__$write("\n<span class='plnext-sr-only'> ",59),this.__$write(subLabel,59),this.__$write('</span>\n</label>\n<span class="selectList-subLabel">',59),this.__$write(subLabel,61),this.__$write("</span>\n</span>\n\n",61),this.__$processWidgetMarkup("aria.html.HtmlLibrary","Select",{options:item.options,id:item.name,attributes:{classList:item.classList,aria:{labelledby:"lbl_"+item.name}},bind:{value:{inside:config.container,to:config[item.name].bind}},on:{change:{fn:this.onSelectChange,scope:this,args:{item:item}},keyup:{fn:this.onSelectChange,scope:this,args:{item:item}},click:{fn:this.onSelectChange,scope:this,args:{item:item}}}},64),this.__$write("\n</li>\n",100)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["renderSelect",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},e.__$width={},e.__$height={},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.widgets.plnextLib.multipleSelect.selectList.view.SelectListTemplateScript,e)},__$initTemplate:function(){try{with(this)this.selectData=data.dataModel.settings.selectElements,this.selectConfig=data.dataModel.settings.selectConfig}catch(_ex){return this.$logError(this.EXCEPTION_IN_VARINIT,[this.$classpath],_ex),!1}return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/multipleSelect/selectList/view/SelectListTemplateScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.multipleSelect.selectList.view.SelectListTemplateScript",$prototype:{$viewReady:function(){var e=aria.utils.Dom.getElementById("multipleSelectListContainer");if(e){var t=e.getElementsByTagName("SELECT"),i=t.length;if(t&&i>0){var n=t[0];n.focus()}}},onSelectChange:function(e,t){this.data.controller.selectUpdated({val:e.target.getProperty("value"),name:t.item.name})},showAllElements:function(e){jQuery(".selectItem-threshold").removeClass("hide"),e.preventDefault()},setCustomFocus:function(e){e.keyCode===aria.DomEvent.KC_TAB&&e.shiftKey===!1&&this.selectConfig.setFocusOnFirstSelect&&(document.querySelector(this.selectConfig.domSelectorToNextFocus).focus(),e.preventDefault())}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/multipleSelect/textfield/TextField.js
//*******************
!function(){Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.multipleSelect.textfield.TextField",$extends:"plnextv2.utils.widgets.light.textinput.TextInputWithOnChange",$dependencies:["aria.utils.Date","plnextv2.utils.widgets.plnextLib.multipleSelect.textfield.TextFieldCfgBeans"],$constructor:function(e,t,i){this.$cfgBean="plnextv2.utils.widgets.plnextLib.multipleSelect.textfield.TextFieldCfgBeans.Properties",this.$TextInputWithOnChange.constructor.call(this,e,t,i)},$destructor:function(){this.$TextInputWithOnChange.$destructor.call(this)},$prototype:{initWidget:function(){this.$TextInput.initWidget.call(this)},_transform:function(e,t,i){var n=null;return"fromWidget"==i?(n=t,this.$TextInputWithOnChange._transform.call(this,e,n,i)):t?t.summary:(n=this.$TextInputWithOnChange._transform.call(this,e,t,i),t)},applyTextToData:function(){var e=this._bindingListeners.value,t=this._hasPlaceholder?"":this._domElt.value,i=this._transform(e.transform,t,"fromWidget");aria.utils.Json.setValue(e.inside,e.to,i,e.cb)},_registerListeners:function(){}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/navigationManager/PlnextNavigationManager.js
//*******************
var _isHydrated=!1,gateway=aria.core.AppEnvironment.applicationSettings.gateway;gateway&&gateway.router.state()&&(_isHydrated=gateway.router.state().isHydrated||!1),Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.navigationManager.PlnextNavigationManager",$dependencies:["aria.core.Browser","aria.utils.Function","aria.core.AppEnvironment","plnextv2.utils.context.AppContext","plnextv2.utils.HtmlUtils","plnextv2.utils.CustomAriaUtils","aria.utils.Path","aria.utils.Object","aria.utils.Json"],$constructor:function(e){if(this._appSettings=aria.core.AppEnvironment.applicationSettings,!this.isRouterAvailable())throw new Error("Router is not available, please make sure that all the gateway scripts are loaded");var t=aria.utils.Function.bind;this._navigate=e||null,this.__history=this._appSettings.gateway.router.history(),this.__gateway=this._appSettings.gateway,this.__qs=this._appSettings.gateway.qs,this.undbind=this.__history.listen(t(this.handlePopState,this)),this._popped=!1,this._persistent=this._appSettings.gateway.persistent,aria.core.Browser.isSafari&&(window.onpageshow=function(e){e.persisted&&window.location.reload()})},$destructor:function(){this.undbind()},$statics:{REASON_BLOCK_TEMPORARY:"REASON_BLOCK_TEMPORARY",REASON_BLOCK_PERSISTENT:"REASON_BLOCK_PERSISTENT",REASON_BLOCK_CURRENT_PAGE:"REASON_BLOCK_CURRENT_PAGE",__router:aria.core.AppEnvironment.applicationSettings.gateway&&aria.core.AppEnvironment.applicationSettings.gateway.router,__history:aria.core.AppEnvironment.applicationSettings.gateway&&aria.core.AppEnvironment.applicationSettings.gateway.router.history(),__gateway:aria.core.AppEnvironment.applicationSettings.gateway,__qs:aria.core.AppEnvironment.applicationSettings.gateway&&aria.core.AppEnvironment.applicationSettings.gateway.qs,state:{isBlocked:!1,reason:null,numberOfSteps:0},activeTimeouts:[],_appSettings:aria.core.AppEnvironment.applicationSettings,$logDebug:Aria.$logDebug,getRequestParametersFromState:function(e,t){var i=aria.utils.Function.bind(plnextv2.utils.CustomAriaUtils.removeMetadata,plnextv2.utils.CustomAriaUtils),n=i(e.data.siteConfiguration.appData.requestParameters,!1,{cleanCircular:!0});return n._t=Math.round((new Date).getTime()/1e3),n.PAGE_ID=e.data.pageDefinitionConfig.pageId,delete n.DIGITAL_DATA,t&&aria.utils.Json.inject(this.getLocationSearch(),n),n},getLocationSearch:function(){var e=this.__qs.parse(window.location.search);return e=JSON.parse(JSON.stringify(e))},currentHistoryPosition:function(){return this.__gateway?this.__router.state().index:0},targetPageLocation:function(e){var t=this.__router.state().index;return e-t},block:function(e,t){if(this.__gateway){var i=this.__router.state().index;switch(e){case this.REASON_BLOCK_TEMPORARY:var n=-1===this.__gateway.persistent.get("tempBlock");n&&this.__gateway.persistent.set("tempBlock",i);break;case this.REASON_BLOCK_PERSISTENT:var s=this.__gateway.persistent.get("persistentBlock")<i,a=t&&t!==this.__gateway.persistent.get("blockingSegment");a&&s&&(this.__gateway.persistent.set("blockingSegment",t),this.__gateway.persistent.set("persistentBlock",i));break;case this.REASON_BLOCK_CURRENT_PAGE:var s=this.__gateway.persistent.get("persistentBlock")<=i,a=t&&t!==this.__gateway.persistent.get("blockingSegment");a&&s&&(this.__gateway.persistent.set("blockingSegment",t),this.__gateway.persistent.set("persistentBlock",i+1))}}return this.unblock},blockTemporary:function(){var e=aria.utils.Function.bind(this.block,this),t=this.REASON_BLOCK_TEMPORARY,i=setTimeout(function(){e(t)},500);this.activeTimeouts.push(i)},blockPersistent:function(e){var t=aria.utils.Function.bind(this.block,this),i=this.REASON_BLOCK_PERSISTENT,n=setTimeout(function(){t(i,e)},500);this.activeTimeouts.push(n)},blockCurrent:function(e){this.block(this.REASON_BLOCK_CURRENT_PAGE,e)},blockNextPage:function(e){this.__gateway&&this.__gateway.persistent.set("blockOnNextPageScope",e)},executeScheduledBlock:function(){var e=this.__gateway.persistent.get("blockOnNextPageScope");e&&(this.__gateway.persistent.set("blockOnNextPageScope",null),this.blockPersistent(e))},unblock:function(e){if(!e)for(;this.activeTimeouts.length;)clearTimeout(this.activeTimeouts.shift());this.__gateway&&this.__gateway.persistent.set("tempBlock",-1)},updatePageTicket:function(e){this.__gateway&&this.__gateway.persistent.set("pageTicket",e)},getPageBlockState:function(){if(!this.isRouterAvailable())return this.state;if(this.__gateway&&!this.__history.location||!this.__router.state())return this.state;var e,t=this.__router.state().index,i=this.__gateway.persistent.get(),n=!1,s=0;return i.tempBlock>-1&&t>i.tempBlock?(n=this.REASON_BLOCK_TEMPORARY,s=i.tempBlock):i.persistentBlock>-1&&t<i.persistentBlock&&(n=this.REASON_BLOCK_PERSISTENT,s=this.__history.length-1),e=this.targetPageLocation(s),{isBlocked:n!==!1,reason:n,numberOfSteps:e}},pushState:function(e){if(this.__history){if(!e||!e.state)throw new Error("`location.state` must be provided in order to replace state");e.state.index=this.__history.length,e.state.index=this.__router.state()?(this.__router.state().index||0)+1:0,e.state.isHydrated=!0,e=this.cleanStateObject(e);try{this.__history.push(e)}catch(t){this.$logDebug("(PlnextNavigationManager) Unable to push a state to browser history. Page data was too big?")}}},replaceState:function(e){if(this.__history){if(!e||!e.state)throw new Error("`location.state` must be provided in order to replace state");if(this.__router.state()){var t=this.__router.state().index;e.state.index=t||0}else e.state.index=this.__history.length-1;e.state.isHydrated=!0,e=this.cleanStateObject(e);try{this.__history.replace(e)}catch(i){this.$logDebug("(PlnextNavigationManager) Unable to push a state to browser history. Page data was too big?")}}},cleanStateObject:function(e){var t=aria.utils.Function.bind(plnextv2.utils.CustomAriaUtils.removeMetadata,plnextv2.utils.CustomAriaUtils);return e=t(e,!1,{cleanCircular:!0}),e.state.data.pageDefinitionConfig.components&&delete e.state.data.pageDefinitionConfig.components,e.state.data.pageDefinitionConfig.pageComposition&&delete e.state.data.pageDefinitionConfig.pageComposition,e.state=this.__gateway.msgpack.encode(e.state),e},getSnapshotData:function(){return{data:{siteConfiguration:plnextv2.utils.context.AppContext.getSiteConfig(),pageDefinitionConfig:plnextv2.utils.context.AppContext.getPageDefinition()},sessionId:window.sessionId}},snapshot:function(){if(this.__history){var e=this.getSnapshotData(),t=this.getRequestParametersFromState(e,!0);this.replaceState({search:this.serialize(t),state:e,title:this.getTitle(e)})}},newSnapshot:function(){if(this.__history){var e=this.getSnapshotData(),t=this.getRequestParametersFromState(e,!0);this.pushState({search:this.serialize(t),state:e,title:this.getTitle(e)})}},getSerializedSearchData:function(){var e=this.getSnapshotData(),t=this.getRequestParametersFromState(e);return delete t.PAGE_ID,this.serialize(t)},serialize:function(e){return this.__qs.stringify(e)},getLocation:function(){return this.__history?this.__history.location||{}:{}},getState:function(e){return e||this.getLocation().state||{}},getUrl:function(){return this.getLocation().pathname},getTitle:function(e){return e=e||this.getState(),e.data.pageDefinitionConfig.title||""},getPageId:function(e){return e=e||this.getState(),e.id},isRouterAvailable:function(){return!(!this._appSettings.gateway||!this._appSettings.gateway.router)},isHydrated:function(){return this.__router&&this.__router.state()?_isHydrated:!1},resetHydrated:function(){_isHydrated=!1}},$prototype:{handlePopState:function(e,t){var i=plnextv2.utils.context.AppContext.getEventBus();i.publish("event::navigation",this,{action:t,location:e}),"POP"===t&&(this._popped=!0,_isHydrated=!0,e.state=this.__gateway.msgpack.decode(e.state),e.state.data.pageDefinitionConfig.pageData.pageTicket=this._persistent.get("pageTicket"),plnextv2.utils.HtmlUtils.deactivateLoading(document.body),document.title=this.getTitle(e.state),this.$callback(this._navigate,e))},update:function(e){if(e.url){if(!this._popped){var t=this.__gateway.persistent.get("blockOnNextPageScope");this.executeScheduledBlock();var i=this.getRequestParametersFromState(e.state,e.replace),n=window.location.pathname,s=e.state.data.pageDefinitionConfig.pageData.pageTicket;s>this._persistent.get("pageTicket")&&this._persistent.set("pageTicket",e.state.data.pageDefinitionConfig.pageData.pageTicket),/jsessionid/.test(n)||(n+=";jsessionid="+window.sessionId);var a={pathname:n,search:this.serialize(i),title:e.title,state:e.state||{}};e.replace?(a.replaceEmptyState=void 0===this.__router.state(),this.replaceState(a)):(_isHydrated=!1,this.unblock(t),this.pushState(a)),document.title=e.title}aria.utils.Json.setValue(this.state,"isBlocked",this.getPageBlockState().isBlocked),this._popped=!1}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/panel/core/CollapsiblePanel.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.panel.core.CollapsiblePanel",$extends:"aria.widgetLibs.BindableWidget",$css:["plnextv2.utils.widgets.plnextLib.panel.style.CollapsiblePanelStyle"],$dependencies:["aria.utils.Dom","aria.utils.Event"],$statics:{CSS_CLASS_COLLAPSED:"collapsed"},$prototype:{writeMarkupBegin:function(e){var t=this._cfg.classList.slice(0);t.push("panel",this.CSS_CLASS_COLLAPSED),this.__id=this._createDynamicId();var i=["<div class='",t.join(" "),"' id='",this.__id,"'>","<h2 class='panel-header'>","<a href='javascript:void(0)' aria-expanded='false' id='",this.__id,"-header-link'>"];this._cfg.icon&&i.push("<i class='icon ",this._cfg.icon,"' aria-hidden='true'></i>"),i.push("<div class='text'>"),e.write(i.join("")),this._cfg.titleMacro?e.callMacro(this._cfg.titleMacro):e.write(this._cfg.title),i=["</div>","<i class='icon icon-chevron-down' aria-hidden='true'></i>","<i class='icon icon-chevron-up' aria-hidden='true'></i>","</a>","</h2>","<section class='panel-content'>"],e.write(i.join(""))},writeMarkupEnd:function(e){var t=["</section></div>"];e.write(t.join(""))},initWidget:function(){this._indexHTMLElements(),this._registerEvents()},_indexHTMLElements:function(){this.__element=aria.utils.Dom.getElementById(this.__id),this.__headerLink=aria.utils.Dom.getElementById(this.__id+"-header-link")},_registerEvents:function(){aria.utils.Event.addListener(this.__headerLink,"click",{fn:this._onHeaderLinkClicked,scope:this},!0)},_onHeaderLinkClicked:function(){var e=this.__element.classList.toggle(this.CSS_CLASS_COLLAPSED);this.__publishAnalyticsToggleEvent(),this.__headerLink.setAttribute("aria-expanded",e?"false":"true")},__publishAnalyticsToggleEvent:function(){this._cfg.analyticsToggleEvent&&this._context.moduleCtrl.publishAnalyticsEvent(this._cfg.analyticsToggleEvent)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/panel/core/Panel.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.panel.core.Panel",$extends:"aria.widgetLibs.BindableWidget",$css:["plnextv2.utils.widgets.plnextLib.panel.style.PanelStyle"],$dependencies:[],$prototype:{writeMarkupBegin:function(e){var t=this._cfg.classList.slice(0);t.push("panel");var i=["<div "];this._cfg.id&&i.push("id='"+this._cfg.id+"' "),i.push("class='",t.join(" "),"'>","<h2 class='panel-header'>"),this._cfg.icon&&i.push("<i class='icon ",this._cfg.icon,"' aria-hidden='true'></i>"),i.push("<span class='text'>",this._cfg.title,"</span>"),this._cfg.subtitle&&i.push("<span class='text subtitle'>",this._cfg.subtitle,"</span>"),i.push("</h2>","<section class='panel-content'>"),e.write(i.join(""))},writeMarkupEnd:function(e){var t=["</section></div>"];e.write(t.join(""))}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/panel/style/CollapsiblePanelStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.panel.style.CollapsiblePanelStyle",$extends:require("plnextv2/utils/widgets/plnextLib/panel/style/PanelStyle.tpl.css"),$constructor:function(){this.$PanelStyle.constructor.call(this)},$destructor:function(){this.$PanelStyle.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.$PanelStyle.macro_main.apply(this,[]),this.__$write("\n\n.panel-header a {\ndisplay: -ms-flexbox;\ndisplay: flex;\n-ms-flex-align: center;\nalign-items: center;\n}\n\n.panel .icon-chevron-down,\n.panel.collapsed .icon-chevron-up,\n.panel.collapsed .panel-content {\ndisplay: none;\n}\n\n.panel .icon-chevron-down,\n.panel .icon-chevron-up {\nmargin-left: auto;\n}\n\n.panel .icon-chevron-up,\n.panel.collapsed .icon-chevron-down {\ndisplay: inline-block;\n}\n",9)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},__$initTemplate:function(){return this.$PanelStyle.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/panel/style/PanelStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.panel.style.PanelStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n\n.panel {\ncolor: ",7),this.__$write(this.$grayDarken,10),this.__$write(";\nbox-shadow: 1px 1px 2px ",10),this.__$write(this.$grayShadow,11),this.__$write(";\nmargin: 20px 0;\n}\n\n.panel-header {\npadding: 1.111em;\nfont-size: 18px;\nbackground: ",11),this.__$write(this.$grayLight,18),this.__$write(";\nmargin: 0;\n}\n\n.panel-small-padding .panel-header {\npadding: 15px 10px;\n}\n\n.panel-header .text {\nfont-family: ",18),this.__$write(this.$blackFont,27),this.__$write(";\ntext-decoration: none;\n}\n\n.panel-header .text.subtitle {\nfont-family: ",27),this.__$write(this.$normalFont,32),this.__$write(";\ntext-decoration: none;\ndisplay: block;\nfont-size: 14px;\nmargin-left: 1.786em;\nmargin-top: 0.1em;\n}\n\n.panel-header a {\ncolor: inherit;\ntext-decoration: none;\n}\n\n.panel-header .icon {\nmargin-right: 10px;\nfont-size: 24px;\n}\n\n.panel-content {\npadding: 10px;\n}\n\n@media (max-width: ",32),this.__$write(breakpoints.XS_MAX,54),this.__$write(") {\n.panel-header {\npadding: 1.111em 0.556em;\n}\n}\n\n",54)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/popover/Popover.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.popover.Popover",$extends:"aria.widgetLibs.BaseWidget",$css:["plnextv2.utils.widgets.plnextLib.popover.PopoverStyle"],$dependencies:["aria.utils.String","aria.utils.Dom","aria.utils.ClassList","aria.utils.Array","plnextv2.utils.BootstrapUtils","plnextv2.utils.widgets.plnextLib.popover.BeanCfg","plnextv2.utils.HtmlUtils"],$constructor:function(e){this._bootstrapUtils=plnextv2.utils.BootstrapUtils,this._cfgBean="plnextv2.utils.widgets.plnextLib.popover.BeanCfg.PopoverCfg",this._cfgOk=aria.core.JsonValidator.validateCfg(this._cfgBean,e),this._id=e.targetId?e.targetId:this._createDynamicId(),this._popId=this._createDynamicId(),this._closeId=this._createDynamicId(),this._arrowId=this._createDynamicId(),this._domElt=null,this._popElt=null,this._closeElt=null,this._activeElem=null,this._cssClass="popover "+e.cssClass+" ",this._wrapperCssClass=e.wrapperCssClass,this._position=e.position,this._width=e.width,this._xoffset=e.xoffset,this._yoffset=e.yoffset,this._showOnMouseOver=e.showOnMouseOver,this._fadeIn=e.fadeIn,this._fadeInTime=e.fadeInTime,this._fadeOut=e.fadeOut,this._fadeOutTime=e.fadeOutTime,this._onOpenListener=null,this._onClose=e.onClose,this._responsive=e.responsive,this._responsiveBoundingContainer=e.responsiveBoundingContainer,this.jqWindow=jQuery(window),this.$BaseWidget.constructor.apply(this,arguments)},$statics:{MACRO_OR_HTML_CONTENT_NOT_FOUND:"A macro or a htmlContent was not specified for the popover widget config.",MISSING_CLOSING_TAG:"Missing closing tag. This widget can be used only as a container.",MANDATORY_CFG:"A mandatory parameter was missing.",ENTER_KEY:13,BODY:"BODY"},$prototype:{__checkCfgConsistency:function(){var e=this._cfg;return e.macro||e.htmlContent?(e.openOn&&(e.openOn.inside&&e.openOn.to&&e.openOn.booleanFn||this.$logError(this.MANDATORY_CFG)),void(e.closeOn&&(e.closeOn.inside&&e.closeOn.to&&e.closeOn.booleanFn||this.$logError(this.MANDATORY_CFG)))):(this.$logError(this.MACRO_OR_HTML_CONTENT_NOT_FOUND),void(this._cfgOk=!1))},writeMarkup:function(){this.$logError(this.MISSING_CLOSING_TAG)},writeMarkupBegin:function(e){this.__checkCfgConsistency(),this._cfgOk&&e.write('<span id="'+this._id+'" class="'+this._wrapperCssClass+'">')},writeMarkupEnd:function(e){if(this._cfgOk){"rtl"==document.dir&&("right"==this._position?this._position="left":"left"==this._position&&(this._position="right"));var t=['</span><div id="',this._popId,'" class="',this._cssClass,this._position,'" style="width:',this._width,'px;"><div id="'+this._arrowId+'" class="arrow"></div><div class="popover-content">'];e.write(t.join("")),this._cfg.macro?e.callMacro(this._cfg.macro):e.write(this._cfg.htmlContent),this._showOnMouseOver||e.write('<button id="'+this._closeId+'" type="button"aria-label="'+plnextv2.utils.I18n.getLabel("tx_pltg_text_Close")+'" class="close icon-remove" ></button>'),e.write("</div></div>")}},_callbackOnClose:function(){this.$callback(this._onClose)},__registerOnOpenCloseBindings:function(){var e=this._cfg.openOn;if(e){var t={fn:this.__notifyOnOpenChange,scope:this,args:e.booleanFn};try{aria.utils.Json.addListener(e.inside,e.to,t,!0),this._onOpenListener={inside:e.inside,to:e.to,booleanFn:e.booleanFn}}catch(i){this.$logError(this.INVALID_BEAN)}}var n=this._cfg.closeOn;if(n){var t={fn:this.__notifyOnCloseChange,scope:this,args:n.booleanFn};try{aria.utils.Json.addListener(n.inside,n.to,t,!0)}catch(i){this.$logError(this.INVALID_BEAN)}}for(var s=this._cfg.bindRefreshTo,a=0;a<s.length;a++){var t={fn:this.__notifyOnRefreshChange,scope:this};try{aria.utils.Json.addListener(s[a].inside,s[a].to,t,!0)}catch(i){this.$logError(this.INVALID_BEAN)}}},__notifyOnOpenChange:function(e,t){t.fn&&(t.fn(e.newValue,t.args)?this.show():this.hide())},__notifyOnCloseChange:function(e,t){t.fn&&(t.fn(e.newValue,t.args)?this.hide():this.show())},__notifyOnRefreshChange:function(){this.isOpen()&&this.calculatePosition()},initWidget:function(){if(this._cfgOk){this.__registerOnOpenCloseBindings(),this._domElt=aria.utils.Dom.getElementById(this._id),this._popElt=aria.utils.Dom.getElementById(this._popId),this._closeElt=aria.utils.Dom.getElementById(this._closeId),this._arrowElt=aria.utils.Dom.getElementById(this._arrowId),this.hide();var e=this,t=function(){e.show()},i=function(){e.hide(),e._showOnMouseOver||e.returnFocusToElem()};this._onOpenListener||(this._showOnMouseOver?(this._domElt.onmouseover=t,this._domElt.onkeyup=function(t){t.preventDefault(),t.keyCode==e.ENTER_KEY&&(e.isOpen()?e.hide():e.show())},this._domElt.onmouseout=i):this._domElt.onclick=t),this._closeElt&&(this._closeElt.onclick=this._onClose?this._callbackOnClose.bind(this):i),this._responsive&&this.jqWindow.resize(this.calculatePosition.bind(this))}},show:function(){if(this._cfgOk){if(this._activeElem=document.activeElement,this._activeElem.tagName==this.BODY&&(this._domElt.tabIndex="-1",this._activeElem=this._domElt),this._fadeIn&&this._fadeInTime){var e=this._popElt,t=this._fadeInTime;e.style.transition="opacity 0.5s ease-out",setTimeout(function(){e.style.opacity="1"},t)}else this._popElt.style.opacity="1",this._popElt.style.transition="none";this._popElt.style.display="block";var i=new aria.utils.ClassList(this._popElt);i.add("shown"),this.calculatePosition(),this._showOnMouseOver||this.setFocusOnPopover()}},calculatePosition:function(){this._cfgOk&&(this._responsive?this.calculateResponsiveHorizontalPositionsAndWidths():this.calculateHorizontalPosition(),this.calculateVerticalPosition())},calculateResponsiveHorizontalPositionsAndWidths:function(){this._popElt.style.width="auto";var e=this._getClientRect(this._domElt),t=this._getClientRect(this._arrowElt),i=this._getClientRect(this._popElt),n=e.left+e.width/2-i.width/2,s=i.width;if(this._responsiveBoundingContainer){var a=this._getClientRect(document.querySelector(this._responsiveBoundingContainer));n<a.left&&(n=a.left);var r=n+s;if(r>a.right){var o=a.left+a.width-s;n=o>0?o:0}i.width>a.width&&(n=a.left,this._popElt.style.width=a.width+"px")}this._setStyle(this._popElt,"left","auto"),this._setStyle(this._popElt,"right",a.left+"px"),window.innerWidth<parseInt(this._bootstrapUtils.XXS_MAX)&&(n=0,this._popElt.style.width="100%",this._setStyle(this._popElt,"right","0px"));var l=(t.width-e.width)/2,c=e.left-n-l;plnextv2.utils.HtmlUtils.isRTLActivated()||(c+=t.width/2),this._arrowElt.style.left=c+"px",this._arrowElt.style.right="auto"},calculateVerticalPosition:function(){var e=aria.utils.Dom.getStyle(this._domElt,"position");if("fixed"===e||null!=this._domElt.offsetParent){var t=aria.utils.Dom.getOffset(this._domElt).top,i=aria.utils.Dom.getGeometry(this._domElt).height,n=aria.utils.Dom.getGeometry(this._popElt).height;this._popElt.style.top=this.__getVerticalOffset(t,i,n)}},calculateHorizontalPosition:function(){var e=aria.utils.Dom.getStyle(this._domElt,"position");if("fixed"===e||null!=this._domElt.offsetParent){"right"!==this._cfg.position&&"left"!==this._cfg.position&&(this._arrowElt.style.left="50%");var t=aria.utils.Dom.getOffset(this._domElt).left,i=aria.utils.Dom.getGeometry(this._domElt).width,n=aria.utils.Dom.getGeometry(this._popElt).width;this._popElt.style.left=this.__getHorizontalOffset(t,i,n)}},hide:function(){if(this._fadeOut&&this._fadeOutTime){var e=this._popElt,t=this._fadeOutTime;e.style.transition="opacity 0.5s ease-out",e.style.opacity="0",setTimeout(function(){e.style.display="none"},t)}else this._popElt.style.display="none";var i=new aria.utils.ClassList(this._popElt);i.remove("shown")},setFocusOnPopover:function(){this._popElt&&(this._popElt.tabIndex="-1",this._popElt.focus())},returnFocusToElem:function(){this._activeElem&&this._activeElem.focus()},isOpen:function(){return"block"==this._popElt.style.display},__getVerticalOffset:function(e,t,i){var n=this._yoffset+e;return"bottom"==this._position?n+t+"px":"top"==this._position?n-i+"px":"left"==this._position||"right"==this._position?n+.5*(-i+t)+"px":void 0},__getHorizontalOffset:function(e,t,i){var n=this._xoffset+e,s=2;return"top"==this._position||"bottom"==this._position?n+.5*(t-i)+"px":"right"==this._position?n+t+s+"px":"left"==this._position?n-i-s+"px":void 0},_getClientRect:function(e){var t=e.getBoundingClientRect(),i={top:window.pageYOffset-document.documentElement.clientTop,left:window.pageXOffset-document.documentElement.clientLeft};return{height:t.height||e.offsetHeight,width:t.width||e.offsetWidth,top:t.top+i.top,bottom:t.bottom+i.top,left:t.left+i.left,right:t.right+i.left}},_setStyle:function(e,t,i){plnextv2.utils.HtmlUtils.isRTLActivated()&&(t.indexOf("left")>=0?t=t.replace("left","right"):t.indexOf("right")>=0&&(t=t.replace("right","left"))),e.style[t]=i}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/popover/PopoverStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.popover.PopoverStyle",$extends:require("ariatemplates/templates/CSSTemplate.js"),$constructor:function(){this.$CSSTemplate.constructor.call(this)},$destructor:function(){this.$CSSTemplate.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\ndiv.popover {\nposition: absolute;\nmax-width: none;\ncolor: #3f3f3f;\nopacity: 0;\n}\n\ndiv.popover:focus {\nborder: 1px solid #cccccc;\n}\n\ndiv.popover button.close {\nposition: absolute;\ntop: 6px;\nright: 9px;\nfont-size: 1.3em;\n}\n",19)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$csslibs={},e.__$prefix=!0},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/seatmap/SeatMap.tpl
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/widgets/plnextLib/seatmap/resources/lib/Vertical.tml"),require("plnextv2/utils/widgets/plnextLib/seatmap/resources/lib/Horizontal.tml"),require("plnextv2/utils/widgets/plnextLib/seatmap/SeatMapScript.js"),require("ariatemplates/html/RadioButton.js"),require("ariatemplates/html/CheckBox.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.seatmap.SeatMap",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$SeatMapScript.constructor.call(this)},$destructor:function(){this.$SeatMapScript.$destructor.call(this),this.$Template.$destructor.call(this)},$css:[require("plnextv2/utils/widgets/plnextLib/seatmap/resources/css/Container.tpl.css"),require("plnextv2/utils/widgets/plnextLib/seatmap/resources/css/Horizontal.tpl.css"),require("plnextv2/utils/widgets/plnextLib/seatmap/resources/css/Vertical.tpl.css")],$prototype:{macro_main:function(){try{with(this){var deckBinding=this.data.bind.availableDecks,deckList=deckBinding.inside[deckBinding.to];if(deckList.length>1){this.__$write('\n<div class="decks">\n<div class="deckListTitle" >',20),this.__$write(this.i18n.getLabel("tx_pltg_text_DeckList"),21),this.__$write("</div>\n",21);var __v_1=deckList;void 0==deckList&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,22]);for(var deckItem_ct=0,__v_2=__v_1.length,deckItem_index=0;__v_2>deckItem_index;deckItem_index++){var deckItem=__v_1[deckItem_index];deckItem_ct++,this.__$write('\n\n<div class="deck">\n\n',23),this.__$processWidgetMarkup("aria.html.HtmlLibrary","RadioButton",{id:deckItem,value:deckItem,attributes:{name:"decks"},bind:{selectedValue:{inside:data.bind.displayedDeck.inside,to:data.bind.displayedDeck.to}}},26),this.__$write('\n<label class="deckBox deckN',39),this.__$write(deckItem,39),this.__$write('" for="',39),this.__$write(this.$getId(deckItem),39),this.__$write('">\n\n',39),deckItem==MAIN?this.__$write(this.i18n.getLabel("tx_pltg_text_SeatMapMAINDeck"),42):deckItem==UPPER?this.__$write(this.i18n.getLabel("tx_pltg_text_SeatMapUPPERDeck"),44):this.__$write(deckItem,46),this.__$write("\n</label>\n</div>\n",48)}this.__$write("\n</div>\n",51)}this.__$insertSection(54,{bindRefreshTo:[data.bind.displayedDeck],macro:{name:"mainContainer",scope:this}})}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},macro_mainContainer:function(){try{with(this){var deck=buildDeck(),selectedTraveller=this.data.scopeSeatMapView.seatMap.displayData.selectedTraveller;deck?(this.data.oneClickSelectionEnabled&&this.__$write(this.$modifier("eat",[prepareOneSeatSelectionGroups(deck)]),68),data.selectedSegment&&(this.__$write('\n<h3 class="sectionTitle">',71),this.__$write(data.selectedSegment.airline.code,71),this.__$write(data.selectedSegment.flightNumber,71),this.__$write(" ",71),this.__$write(data.selectedSegment.equipment.name,71),this.__$write("</h3>\n",71)),data.seatFilters&&this.macro_seatMapFilters(data),this.__$write('\n\n<div\nid="seatmap"\nclass="seatMapContainer ',78),this.__$write(data.orientation,81),this.__$write('"\npaxN="paxN',81),this.__$write(selectedTraveller,82),this.__$write('"\nstyle="\n',82),data.width&&(this.__$write("\nwidth:",85),this.__$write(data.width,85),this.__$write(";\n",85)),data.height&&(this.__$write("\nheight:",88),this.__$write(data.height,88),this.__$write(";\n",88)),this.__$write('\n"\n',90),this.__$statementOnEvent("keydown",this.$normCallback("onSeatMapKeyPress"),91),this.__$statementOnEvent("focus",this.$normCallback("onSeatMapFocus"),92),this.__$statementOnEvent("blur",this.$normCallback("onSeatMapBlur"),93),this.__$statementOnEvent("click",this.$normCallback("onSeatMapClick"),95),this.__$write("\n>\n\n",96),data.orientation==this.HORIZONTAL?this.horizontal.macro_drawSeatMap(deck,data.displayLettersOnFacilities,data.allowOccupiedSeatSelection,data.displayCharacteristics,data.bind.travellers,data.travellerList,data.dictionary.seatCharacteristics,data.displayPopover,data.displayPriceRanges,data.selectedSegment,data.bind.isStandardSelection):(data.seatFilters&&this.__$write('\n<div class="overlay-filter"></div>\n',115),this.vertical.macro_drawSeatMap(deck,data.displayLettersOnFacilities,data.allowOccupiedSeatSelection,data.displayCharacteristics,data.bind.travellers,data.travellerList,data.dictionary.seatCharacteristics,data.displayPopover,data.displayPriceRanges,data.selectedSegment,data.bind.isStandardSelection)),this.__$write("\n</div>\n",130)):(this.__$write('\n<div class="seatmapNotAvailable">',132),this.__$write(this.i18n.getLabel("tx_pltg_text_SeatMapUnavailable"),132),this.__$write("</div>\n",132))}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["mainContainer",__filename,this["aria:currentLineNumber"]],_ex)}},macro_seatMapFilters:function(){try{with(this){this.__$write('\n<div class="row">\n<div class="col-xs-24">\n<div class="bound-table-filter col-xs-24">\n<div class="bound-table-panel-filter row">\n<div class="filter-container">\n',140);this.__$write("\n<button ",146),this.__$writeId("idBtnFilter",146),this.__$write(' tabindex="0" aria-expanded="false"\nclass="panel-heading-filter panel-heading-filter-collapse panel-heading col-xs-24"\naria-label="',146),this.__$write(this.i18n.getLabel("tx_pltg_text_add_filters"),148),this.__$write("\"\naria-describedby='",148),this.__$write(this.$getId("seatAvailableSR"),149),this.__$write("'\n",149),this.__$statementOnEvent("click",this.$normCallback({fn:"toggleFilters",scope:this}),150),this.__$write(">\n<i ",150),this.__$writeId("idIconFilter",151),this.__$write(' class="bound-table-panel-filter-icon icon-caret-down" aria-hidden="true"></i>\n</button>\n',151),this.__$insertSection(153,{id:"seatAvailableSR",macro:{name:"seatAvailableSR",scope:this},bindRefreshTo:[{inside:data.filter}]}),this.__$write('\n\n<div class="shortcut-container">\n<label class="header-text-filter" ',161),this.__$writeId("idPanelFilterText",163),this.__$write(' for="idBtnFilter">\n',163),this.__$write(this.i18n.getLabel("tx_pltg_text_add_filters"),164),this.__$insertSection(165,{id:"filterTotal",macro:{name:"filtersApplied",scope:this},bindRefreshTo:[{inside:data.filter}]}),this.__$write("\n</label>\n</div>\n</div>\n\n",173),this.__$insertSection(177,{id:"filter-result",macro:{name:"filterResult",scope:this},bindRefreshTo:[{inside:data.filter}]}),this.__$write("\n\n<div ",185),this.__$writeId("idPanelFilter",186),this.__$write(' class="bound-table-filters-container col-xs-24" style="display:none">\n\n<div class="availability-filters row">\n',186),this.__$insertSection(189,{id:"seat-available",macro:{name:"seatAvailable",scope:this},bindRefreshTo:[{inside:data.filter}]});for(var i=0;i<data.filter.length;i++)this.__$write('\n\n<div class="filter filter-row col-xs-24 form-group">\n<div class="checkbox">\n',198),this.__$processWidgetMarkup("aria.html.HtmlLibrary","CheckBox",{label:"checkboxFilter "+i,id:"filter"+i,bind:{checked:{inside:data.filter[i],to:"checked"}}},201),this.__$write("\n<label ",211),this.__$writeId("checkboxFilter"+i,211),this.__$write(' for="',211),this.__$write(this.$getId("filter"+i),211),this.__$write('"  >',211),this.__$write(data.filter[i].label,211),this.__$write("</label>\n</div>\n</div>\n",211);this.__$write('\n\n\n<div class="filter filter-row col-xs-24">\n\n<button type="button" class="btn btn-default btn-close-filter" ',215),this.__$statementOnEvent("click",this.$normCallback({fn:"toggleFilters",scope:this}),219),this.__$write(">\n",219),this.__$write(this.i18n.getLabel("tx_pltg_text_close_filters"),220),this.__$write('\n</button>\n</div>\n</div>\n\n</div>\n</div>\n</div>\n</div>\n</div>\n\n<div class="clearfix"></div>\n',221)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["seatMapFilters",__filename,this["aria:currentLineNumber"]],_ex)}},macro_filtersApplied:function(){try{with(this){var nbFiltersApplied=this.getNbFiltersApplied();nbFiltersApplied>0&&this.__$write(" ("+nbFiltersApplied+")",240)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["filtersApplied",__filename,this["aria:currentLineNumber"]],_ex)}},macro_filterResult:function(){try{with(this)this.checkFiltersUpdate(data.filter)?(this.__$write('\n<div class="filter-result">\n<span class="filter-result-content">\n',249),this.__$write(this.getFilteredSeats(),251),this.__$write('\n</span>\n<button type="button" class="btn pull-right" ',252),this.__$statementOnEvent("click",this.$normCallback({fn:this.clearFilters,scope:this}),253),this.__$write(">\n",253),this.__$write(this.i18n.getLabel("tx_pltg_text_clear_filters"),254),this.__$write("\n</button>\n</div>\n",255)):this.__$write(this.$modifier("eat",[this.clearFilters()]),258)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["filterResult",__filename,this["aria:currentLineNumber"]],_ex)}},macro_seatAvailable:function(){try{with(this)if(0===this.getNbFiltersApplied()){var nbSeatsAvailable=this.getNbAvailableSeats();this.__$write('\n<div class="filter-result filter-row col-xs-24">\n',269),1===nbSeatsAvailable?(this.__$write("\n<span>",271),this.__$write(this.i18n.getStringFromPattern("tx_pltg_text_seat_available_filters",[nbSeatsAvailable]),271),this.__$write("</span>\n",271)):(this.__$write("\n<span>",273),this.__$write(this.i18n.getStringFromPattern("tx_pltg_text_seats_available_filters",[nbSeatsAvailable]),273),this.__$write("</span>\n",273)),this.__$write("\n</div>\n",275)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["seatAvailable",__filename,this["aria:currentLineNumber"]],_ex)}},macro_seatAvailableSR:function(){try{with(this){this.__$write('\n<span class="plnext-sr-only" >\n',283);var filtersApplied=this.getNbFiltersApplied();filtersApplied>1?this.__$write(this.i18n.getStringFromPattern("tx_pltg_text_filters_applied",[filtersApplied]),286):1===filtersApplied&&this.__$write(this.i18n.getStringFromPattern("tx_pltg_text_filter_applied",[filtersApplied]),288),this.__$write("\n</span>\n",290)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["seatAvailableSR",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={horizontal:"plnextv2.utils.widgets.plnextLib.seatmap.resources.lib.Horizontal",vertical:"plnextv2.utils.widgets.plnextLib.seatmap.resources.lib.Vertical"},e.__$width={},e.__$height={},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.widgets.plnextLib.seatmap.SeatMapScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/seatmap/SeatMapScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.seatmap.SeatMapScript",$dependencies:["plnextv2.utils.widgets.plnextLib.seatmap.resources.data.Facility","plnextv2.utils.widgets.plnextLib.seatmap.resources.data.RowDescriptorManager","plnextv2.utils.widgets.plnextLib.seatmap.resources.data.OneClickSelectionHelper","plnextv2.utils.I18n","aria.utils.Array","plnextv2.utils.context.AppContext","aria.utils.Dom","plnextv2.utils.ColorUtils","aria.utils.String"],$statics:{VERTICAL:"vertical",HORIZONTAL:"horizontal",MAIN:"MAIN",UPPER:"UPPER",UPDOWN:"UPDOWN",RIGHTLEFT:"RIGHTLEFT",FIRSTROW:"A",FIRSTCOLUMN:1,WINDOW:"W",CENTER:"C",AISLE:"A",WINDOW_AISLE:"WA",EXTRA_LEG:"L",SEAT_STATUS_TAKEN:"TAKEN",SEAT_STATUS_AVAILABLE:"AVAILABLE",SEAT_STATUS_MISSING:"MISSING",SEAT_CHARGEABLE:"CH",MAX_FILTERS:10,ROW_ORIENTATION:{FRONT:"F",REAR:"R",CENTER:"C"},COLUMN_ORIENTATION:{LEFT:"L",RIGHT:"R",CENTER:"C"},CORRIDOR:"CORRIDOR",CORRIDOR_SUFFIX:"_CORRIDOR",NDC_SEATMAP:3,FRONT_FACILITY_ROWS_REGEX:/^[0-9]+\-[0-9]+$/,REAR_FACILITY_ROWS_REGEX:/^[0-9]+\+[0-9]+$/,CODE_EXIT_DOOR_FACILITY:"D",CODE_CUSTOM_CHARAC_DISCOUNTED:"DX_DISCOUNTED",CODE_CUSTOM_CHARAC_MOST_DISCOUNTED:"DX_MOST_DISCOUNTED"},$constructor:function(){this.Facility=plnextv2.utils.widgets.plnextLib.seatmap.resources.data.Facility,this.RowDescriptorManager=plnextv2.utils.widgets.plnextLib.seatmap.resources.data.RowDescriptorManager,this.arrayUtils=aria.utils.Array,this.i18n=plnextv2.utils.I18n,this.domUtils=aria.utils.Dom,this._colorUtils=plnextv2.utils.ColorUtils,this._eventBus=plnextv2.utils.context.AppContext.getEventBus(),this.deckInformation={displayedDeck:this.MAIN},this._occupiedSeats={},this._selectedSeats={},this._facilityHelper=null,this._oneClickHelper=null,this._enableManualSelection=!0,this._seatList={},this._maxRow,this._maxCol,this._previousSeat,this._priceRanges=[],this._invertFactor=plnextv2.utils.HtmlUtils.isRTLActivated()?-1:1,this._eventBus.subscribe("seatmap:discounted-seats-teaser:apply",this.applyMostDiscountedSeatsFilter,this),this._eventBus.subscribe("seatmap:discounted-seats-teaser:remove",this.clearFilters,this)},$destructor:function(){this._occupiedSeats=null,this._selectedSeats=null,this._facilityHelper=null,this._enableManualSelection=null,this.data&&(this.data.aircraftMap=null,this.data.bind&&this.removeBindings(this.data.bind)),this._eventBus.unsubscribe("seatmap:discounted-seats-teaser:apply",this.applyMostDiscountedSeatsFilter,this),this._eventBus.unsubscribe("seatmap:discounted-seats-teaser:remove",this.clearFilters,this)},$prototype:{$afterRefresh:function(){this._setBindValue("seats",this._seatList)},$dataReady:function(){var e=plnextv2.utils.widgets.plnextLib.seatmap.resources.data.Facility;e.emergencyExitCode=this.data.emergencyExitCode,e.lavatoryCode=this.data.lavatoryCode,e.disabledToiletsCode=this.data.disabledToiletsCode,e.galleyCode=this.data.galleyCode,this.data.enableManualSelection===!1&&(this._enableManualSelection=!1);var t={};if(this.data&&this.data.aircraftMap){var i=this.data.aircraftMap.cabins;if(i)for(var n=0;n<i.length;n++)i[n].location&&(t[i[n].location]=null)}this._setBindValue("availableDecks",aria.utils.Object.keys(t)),this.$json.setValue(this.data.bind,"displayedDeck",{inside:this.deckInformation,to:"displayedDeck"}),this.data.bind&&this.addBindings(this.data.bind)},_isSeatSelectedInPNR:function(e){return-1!==this.data.seatsInSelection.indexOf(e)},removeBindings:function(e){e.selectedSeats&&this._seatListCallback&&this.$json.removeListener(e.selectedSeats.inside,e.selectedSeats.to,this._seatListCallback,!1),e.occupiedSeats&&this._seatListCallback&&this.$json.removeListener(e.occupiedSeats.inside,e.occupiedSeats.to,this._seatListCallback,!1),this._seatListCallback=null},addBindings:function(e){this._seatListCallback={fn:this._updateSeatList,scope:this},e.selectedSeats&&this.$json.addListener(e.selectedSeats.inside,e.selectedSeats.to,this._seatListCallback,!1,!1),e.occupiedSeats&&this.$json.addListener(e.occupiedSeats.inside,e.occupiedSeats.to,this._seatListCallback,!1,!1)},buildDeck:function(){try{if(this.data.aircraftMap&&this.data.aircraftMap.cabins){this._deck={deckLabel:this.deckInformation.displayedDeck,cabins:[]};var e={};this._setBindValue("bestDiscountPercentage",this.data.aircraftMap.bestDiscountPercentage),this._setBindValue("hasRestrictedSeats",!1),this._setBindValue("hasExtraLegRoomSeats",!1),this.data.seatFilters&&(this.data.filter=this.buildFiltersList());for(var t=0;t<this.data.aircraftMap.cabins.length;t++){var i=this.data.aircraftMap.cabins[t];e[i.location]=null,i.location===this.deckInformation.displayedDeck&&this._deck.cabins.push(this._buildCabin(i))}if(0===this._deck.cabins.length){this.deckInformation.displayedDeck=this.data.aircraftMap.cabins[0].location,this._deck.deckLabel=this.deckInformation.displayedDeck;for(var t=0;t<this.data.aircraftMap.cabins.length;t++)this._deck.cabins.push(this._buildCabin(this.data.aircraftMap.cabins[t]))}return this._setBindValue("availableDecks",aria.utils.Object.keys(e)),this._deck}return this.$logWarn("The aircraft map is not defined or isn't in the right format."),{deckLabel:this.deckInformation.displayedDeck,cabins:[]}}catch(n){return this.$logError(n.message),null}},_setBindValue:function(e,t){var i=this.data.bind;if(i&&i[e]){var n=i[e];this.$json.setValue(n.inside,n.to,t)}},_getBindValue:function(e){var t=this.data.bind;if(t&&t[e]){var i=t[e];if(i.inside&&i.to)return i.inside[i.to]}return null},_buildCabin:function(e){this._listOfOneSelectionGroups=[],this._facilityHelper=null,this._buildCorridorList(e.patternColumns);for(var t={first:null,last:null},i=!1,n=[],s=[],a=this._formatCabinPattern(e.patternColumns),r=Object.keys(a),o=0;o<e.rows.length;o++){var l=e.rows[o],c=!1,d={},p={},_=l.isOverWing;if((null===t.first||null===t.last)&&(!i&&_?t.first=l.index:!i||_||l.isEmpty||(t.last=l.index-1)),null!=l.facilities&&l.facilities.length>0)if(this.data.scopeSeatMapView.data.config.seatmapOutputType===this.NDC_SEATMAP)for(var h=0;h<l.facilities.length;h++)this._addFacilityInSeatMap(l.facilities[h],d,p,r,_);else{c=!0,this._getFacilityHelper().reset();for(var h=0;h<l.facilities.length;h++){var u=l.facilities[h];if(u){var m=new plnextv2.utils.widgets.plnextLib.seatmap.resources.data.Facility(this.data.dictionary.facilities[u.type],u.type,u.location,u.position);this._getFacilityHelper().addFacility(m)}}}for(var f=Object.keys(d).filter(function(e){return this.FRONT_FACILITY_ROWS_REGEX.test(e)},this).map(function(e){return d[e]}),h=f.length-1;h>=0;--h)s.push(""),n.push(f[h]);if(!l.isEmpty){i=_,s.push(l.index);var g=this._addCorridorInColumns(l.columns,a),b=JSON.parse(JSON.stringify(l));b.columns=g,n.push(this._buildRow(b,_,c))}for(var v in p)this.REAR_FACILITY_ROWS_REGEX.test(v)&&(s.push(""),n.push(p[v]))}return{pattern:a,cabinMap:n,rowIndexes:s,columnIndexes:r,firstWingIndex:null!=t.first?t.first:-1,lastWingIndex:null!=t.last?t.last:-1}},prepareOneSeatSelectionGroups:function(e){this._getOneClickSelectionHelper().prepareSelectionGroups(e,this.data.travellerList.length)},_formatCabinPattern:function(e){for(var t=[],i=0;i<e.length;++i)t[e[i].index]=e[i].status,this.arrayUtils.contains(this.corridorList,e[i].index)&&(t[e[i].index+this.CORRIDOR_SUFFIX]=this.CORRIDOR);return t},_buildCorridorList:function(e){e&&(this.columnStatus=e,this._detectCorridors(e))},_detectCorridors:function(e){if(this.corridorList=[],e&&0!==e.length){var t=e.map(function(e){return e.status}).join("-"),i=this._detectSeatGroup(t),n=this._detectSeatGroup(t,!0),s=i.length+n.length;0===i.length||0===n.length||s>e.length?this.corridorList.push(e[Math.floor(e.length/2)].index):s===e.length?this.corridorList.push(e[i.length-1].index):s<e.length&&(this.corridorList.push(e[i.length-1].index),this.corridorList.push(e[e.length-n.length-1].index))}},_detectSeatGroup:function(e,t){t=!!t;for(var i=[[this.WINDOW_AISLE],[this.WINDOW,this.AISLE],[this.WINDOW,this.CENTER,this.AISLE],[this.WINDOW,this.CENTER,this.CENTER,this.AISLE],[this.WINDOW,this.CENTER,this.CENTER,this.CENTER,this.AISLE]],n=0;n<i.length;++n){var s=(t?i[n].reverse():i[n]).join("-");if(!t&&0===e.indexOf(s)||t&&aria.utils.String.endsWith(e,s))return i[n]}return[]},_getFacilityHelper:function(){return this._facilityHelper||(this._facilityHelper=new this.RowDescriptorManager(this.columnStatus,this.corridorList)),this._facilityHelper},_getOneClickSelectionHelper:function(){return this._oneClickHelper||(this._oneClickHelper=new plnextv2.utils.widgets.plnextLib.seatmap.resources.data.OneClickSelectionHelper),this._oneClickHelper},_buildRow:function(e,t,i){for(var n=[],s=!0,a=!1,r=!1,o=!1,l=e.columns.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),c=0;c<l.length;c++){var d=l[c];if(a=c+1===l.length,s||a){s&&a&&this.$logError("A seat can't be the first and the last seat of a row at the same time.");var p=!1;d.windowSeatWithoutWindow&&(p=!0),s?r=p:a&&(o=p)}n.push(this._getSquareDescriptor(e.index,d)),s=!1}var _={rowIndex:e.index,isOverWing:t,rowData:n,emptyRow:!1,leftWindowMissing:r,rightWindowMissing:o,hasFacilities:i};return i&&(_.details=this._getFacilityHelper().getJson()),_},_getSquareDescriptor:function(e,t){var i={colIndex:t.index};return"undefined"!=typeof t.seat?i.seat=this._buildSeatSquareDescriptor(e,t):"undefined"!=typeof t.facility?i.facility=this._buildFacilitySquareDescriptor(t):"undefined"!=typeof t.corridor&&(i.corridor={}),i},_buildSeatSquareDescriptor:function(e,t){var i=e+t.index,n=this.data.definedPriceRanges?this.data.definedPriceRanges.priceRanges:[],s=this._getSelectedPax(),a=[],r={isMissing:!1,isAvailable:!1,isChargeable:!1,isSelected:!1,isDiscounted:!1,isRestricted:!1,characteristics:this._getSeatCharacteristics(t.seat),priceList:a};this.arrayUtils.contains(r.characteristics,this.EXTRA_LEG)&&this._setBindValue("hasExtraLegRoomSeats",!0),this._seatList[i]=r.characteristics;var o=this._getSeatStatus(t.seat),l=this._isSeatSelectedInPNR(i);if(o===this.SEAT_STATUS_TAKEN&&l&&(o=this.SEAT_STATUS_AVAILABLE),o===this.SEAT_STATUS_TAKEN?(this._occupiedSeats[i]=null,r.isRestricted=this._isSeatRestricted(t.seat)):o===this.SEAT_STATUS_AVAILABLE?r.isAvailable=!0:o===this.SEAT_STATUS_MISSING?r.isMissing=!0:this.$logError("Wrong code for seat status. Correct codes: <AVAILABLE> (for available seat), <TAKEN> (for taken seats) or <MISSING> (for missing seat). Found code: <"+o+">"),this.arrayUtils.contains(r.characteristics,this.SEAT_CHARGEABLE)){r.isChargeable=!0;for(var c=this._getSeatListPriceForPax(t.seat,s),d=0;d<c.length;d++){var p=c[d];p.discount&&(r.isDiscounted=!0,-1===r.characteristics.indexOf(this.CODE_CUSTOM_CHARAC_DISCOUNTED)&&r.characteristics.push(this.CODE_CUSTOM_CHARAC_DISCOUNTED),1===p.discount.ratioFromBestDiscount&&-1===r.characteristics.indexOf(this.CODE_CUSTOM_CHARAC_MOST_DISCOUNTED)&&r.characteristics.push(this.CODE_CUSTOM_CHARAC_MOST_DISCOUNTED),this.data.discountColors&&2===this.data.discountColors.length&&(p.discount.color=this._colorUtils.computeGradient(this.data.discountColors[0],this.data.discountColors[1],p.discount.ratioFromBestDiscount))),a.push(p)}r.priceRange=this._addPriceRangeInList(a,n)}var _=this._getSeatMediaContentForPax(t.seat,s);_&&(r.mediaContent=_);var h=this._getBindValue("selectedSeats");return h&&this.arrayUtils.contains(h,i)&&(r.isSelected=!0),r},_buildFacilitySquareDescriptor:function(e){var t={},i=e.facility.type;t.code=i,t.title=this.data.dictionary.facilities[i];var n=this.Facility.getCustomFacilityStyle(i);return n&&(t.style=n),t},_addPriceRangeInList:function(e,t){if(e.length)for(var i=e[0].value,n=e[0].currency,s=0;s<t.length;++s)if(t[s].currency==n&&i<=t[s].max&&i>=t[s].min){for(var a=t[s],r=!1,o=0;!r&&o<this._priceRanges.length;o++)this._priceRanges[o].name===a.name&&(r=!0);return r||(this._priceRanges.push(a),this._setBindValue("priceRanges",this._priceRanges)),a}return null},_updateSeatList:function(e){var t=e.dataName;if(this.arrayUtils.contains(["occupiedSeats","selectedSeats"],t)){var i,n,s=this.arrayUtils.clone(e.newValue),a={},r=e.dataHolder&&e.dataHolder.seatList?e.dataHolder.seatList:[];if(e.oldValue)for(var o=0;o<e.oldValue.length;o++){var l=e.oldValue[o];if(this.arrayUtils.contains(s,l))a[l]=null;else{var c=this._getSeatTd(l);c&&(this._updateClasses(t,c,"rem"),n=c.getAttribute("data-seat"));var d=this._getSeatInput(l);d&&(i={seat:n,seatList:r},this._updateScreenReaderInput(t,d,"rem",l,null,i))}}if(s.length>0)for(var o=0;o<s.length;o++){var c=this._getSeatTd(s[o]);a[s[o]]=null;var p=null;c&&(this._updateClasses(t,c,"add"),p=this._getSeatedTraveller(c),n=c.getAttribute("data-seat"));var d=this._getSeatInput(s[o]);d&&(i={seat:n,seatList:r},this._updateScreenReaderInput(t,d,"add",s[o],p,i))}this["_"+t]=a}},_updateScreenReaderInput:function(e,t,i,n,s,a){var r=this.data.bind.isStandardSelection.inside[this.data.bind.isStandardSelection.to],o="";a.seat&&a.seatList&&a.seatList[a.seat]&&this.arrayUtils.contains(a.seatList[a.seat],"E")&&(o=this.i18n.getLabel("tx_pltg_text_seatSituatedInExitRow_AX"));var l="";"rem"===i?(l=this.i18n.getLabel("tx_pltg_text_seat")+" "+n+" "+this.i18n.getLabel("tx_pltg_text_available"),l+=r?" "+this.i18n.getLabel("tx_pltg_text_PressEnterToSit"):" "+this.i18n.getLabel("tx_pltg_text_PressEnterToSitGroup")):l=r?this.i18n.getStringFromPattern("tx_pltg_pattern_seatmap_seatSelectedForTraveller",[n,s]):this.i18n.getStringFromPattern("tx_pltg_pattern_seatmap_seatSelectedForTraveller",[n,s])+this.i18n.getStringFromPattern("tx_pltg_seatmap_groupSeatSelected",[n]),t.innerHTML=l},_updateClasses:function(e,t,i){var n=this["_"+i+"Class"];if(t&&"function"==typeof n)if("selectedSeats"===e){var s=this._getSeatedTraveller(t);"add"===i?(t.setAttribute("data-seat-selected",!0),this._addClass(t,"paxN"+s),this._updateExtraLegClasses(t,!0)):"rem"===i&&(t.removeAttribute("data-seat-selected"),this._cleanClass(t),this._updateExtraLegClasses(t,!1))}else"occupiedSeats"===e&&n(t,"icon-seat-unavailable")},_updateExtraLegClasses:function(e,t){var i=e.previousElementSibling;i&&i.classList.contains("extra-leg")&&(t?i.classList.add("extra-leg-selected"):i.classList.remove("extra-leg-selected"))},_getSeatedTraveller:function(e){var t=null,i=e.getAttribute("data-seatmetadata"),n=i?i.split("-"):null;if(n){var s=this.data.bind.travellers.inside[this.data.bind.travellers.to];for(oneTraveller in s)s[oneTraveller].seat===n[3]&&(t=oneTraveller)}return t},_cleanClass:function(e){e.className=e.className.replace(new RegExp("paxN[0-9]*"),"")},_getSeatTd:function(e){var t=this.domUtils.getElementById("seat"+e);return t?t:null},_getSeatInput:function(e){var t=this.domUtils.getElementById("inputSR"+e);return t?t:null},onSeatMapClick:function(e){if(e=e||window.event,e.target&&"DIV"===e.target.tagName){var t=e.target.getData("seatmetadata",!0);if(t)var i=t.split("-"),n=i[3];target=this.domUtils.getElementById("seat"+n)}else if(e.target&&"BUTTON"===e.target.tagName){var n=e.target.getData("seat",!0);target=this.domUtils.getElementById("seat"+n)}else target=null;if(e&&target&&this._isSelectableSeat(target)){var s=this._getJSONConfFromSeat(target),a=s.seatId,r=this._getSeatInfo(s.cabin,s.realRow,s.realCol),o=this.data.bind.isStandardSelection.inside[this.data.bind.isStandardSelection.to];r.bestMolecule&&r.bestMolecule.seats&&!o?this._selectSeatsInMolecule(r):o&&this._selectSeat(r,s),this._previousSeat=a,e.target&&"BUTTON"===e.target.tagName?this.domUtils.getElementById("inputSR"+this._previousSeat).focus():this.domUtils.getElementById("seat"+this._previousSeat).focus()}},onSeatMapKeyPress:function(e){if(e=e||window.event,e&&e.target){if(e.keyCode===e.KC_TAB)if(e.stopPropagation(),e.preventDefault(),this.domUtils.getElementById("statusSR").innerHTML="",e.shiftKey)if(this.data.bind.isStandardSelection.inside[this.data.bind.isStandardSelection.to]){var t=this.data.bind.selectedPax.inside[this.data.bind.selectedPax.to];this.data.scopeSeatMapView.$focus(t)}else{var i="seatMapLegendSectionLink";this.data.scopeSeatMapView.$focus(i)}else this.domUtils.getElementById("clearSeats").focus();switch(this._maxCol||this._getMaxCol(),this._maxRow||this._getMaxRow(),this._previousSeat=this._previousSeat||this._getFirstEmptySeat(),e.keyCode){case e.KC_ENTER:case e.KC_SPACE:e.preventDefault();var n=this.domUtils.getElementById("seat"+this._previousSeat),s=this._getJSONConfFromSeat(n),a=this._getSeatInfo(s.cabin,s.realRow,s.realCol),r=this.data.bind.isStandardSelection.inside[this.data.bind.isStandardSelection.to];a.bestMolecule&&a.bestMolecule.seats&&!r?this._selectSeatsInMolecule(a):r&&this._isSelectableSeat(n)&&this._selectSeat(a,s);break;case e.KC_LEFT:e.preventDefault(),this._previousSeat=this._getNextSeat(this._previousSeat,this.RIGHTLEFT,-1),this.domUtils.getElementById("seat"+this._previousSeat).focus();break;case e.KC_RIGHT:e.preventDefault(),this._previousSeat=this._getNextSeat(this._previousSeat,this.RIGHTLEFT,1),this.domUtils.getElementById("seat"+this._previousSeat).focus();break;case e.KC_DOWN:e.preventDefault(),this._previousSeat=this._getNextSeat(this._previousSeat,this.UPDOWN,-1),this.domUtils.getElementById("seat"+this._previousSeat).focus();break;case e.KC_UP:e.preventDefault(),this._previousSeat=this._getNextSeat(this._previousSeat,this.UPDOWN,1),this.domUtils.getElementById("seat"+this._previousSeat).focus()}}},onSeatMapFocus:function(e){e&&(e.stopPropagation(),e.preventDefault());var t;if(this._maxCol||this._getMaxCol(),this._maxRow||this._getMaxRow(),e.target&&"DIV"===e.target.tagName&&(t=e.target.getData("seatmetadata",!0)),!this._previousSeat)if(t){var i=t.split("-");this._previousSeat=i[3]}else this._previousSeat=this._getFirstEmptySeat(),this.domUtils.getElementById("seat"+this._previousSeat).focus()},onSeatMapBlur:function(e){e&&(e.stopPropagation(),e.preventDefault()),this._previousSeat=this._previousSeat||this._getFirstEmptySeat()},_getMaxCol:function(){var e=1;for(var t in this._seatList){var i=parseInt(t.slice(0,-1),10);i>e&&(e=i)}this._maxCol=e},_getMaxRow:function(){var e="A";for(var t in this._seatList){var i=t.slice(-1);i>e&&(e=i)}this._maxRow=e},_getFirstEmptySeat:function(){for(var e in this._seatList){var t=this.domUtils.getElementById("seat"+e);if(this._isSeatFocusable(t))return e}},_addColumnModulo:function(e,t){return e.column=e.column+t,e.column<this.FIRSTCOLUMN?(e.column=this._maxCol,!0):e.column>this._maxCol?(e.column=this.FIRSTCOLUMN,!0):!1},_addRowModulo:function(e,t){return e.row=String.fromCharCode(e.row.charCodeAt(0)+t),e.row<this.FIRSTROW?(e.row=this._maxRow,!0):e.row>this._maxRow?(e.row=this.FIRSTROW,!0):!1},_getNextRightLeftSeat:function(e,t){return this.data.orientation===this.VERTICAL?this._addRowModulo(e,t)&&this._addColumnModulo(e,t):this._addColumnModulo(e,this._invertFactor*t)&&this._addRowModulo(e,-t),e},_getNextUpDownSeat:function(e,t){return this.data.orientation===this.VERTICAL?this._addColumnModulo(e,-t):this._addRowModulo(e,this._invertFactor*t),e},_getNextSeat:function(e,t,i){var n,s=!1,a={row:e.slice(-1),column:parseInt(e.slice(0,-1),10)};do t===this.RIGHTLEFT?this._getNextRightLeftSeat(a,i):this._getNextUpDownSeat(a,i),n=this.domUtils.getElementById("seat"+a.column+a.row),s=this._isSeatFocusable(n);while(!n||!s);return a.column+a.row},_getJSONConfFromSeat:function(e){var t=e.getAttribute("data-seatmetadata");if(t){var i=t.split("-"),n={cabin:i[0],rowId:i[1],colId:i[2],seatId:i[3]},s=n.seatId.match(/(\d+)([a-zA-Z]+)/i);return 3===s.length&&(n.realRow=s[1],n.realCol=s[2]),n}return null},_getSeatInfo:function(e,t,i){var e=this._getCabin(e);if(e){var n=this._getRow(e,t);if(n){var s=this._getCol(n,i);if(s&&s.seat)return{characteristics:s.seat.characteristics,priceList:s.seat.priceList,bestMolecule:s.seat.bestMolecule}}}return{characteristics:[],priceList:[],bestMolecule:{}}},_getCabin:function(e){if(e&&this._deck&&this._deck.cabins){var t=this._deck.cabins[e];if(t)return t}return null},_getRow:function(e,t){if(e&&e.cabinMap&&t){t=parseInt(t,10);for(var i=0;i<e.cabinMap.length;i++){var n=e.cabinMap[i];if(n.rowIndex===t)return n}}return null},_getCol:function(e,t){if(e&&e.rowData&&t)for(var i=0;i<e.rowData.length;i++){var n=e.rowData[i];if(n.colIndex===t)return n}return null},_isSelectableSeat:function(e){return e&&"true"===e.getAttribute("data-seat-selectable")},_isSelectedSeat:function(e){return e?"true"===e.getAttribute("data-seat-selected"):!1},_addClass:function(e,t){var i=new aria.utils.ClassList(e);i.add(t),i.$dispose()},_remClass:function(e,t){var i=new aria.utils.ClassList(e);i.remove(t),i.$dispose()},_selectSeat:function(e,t){this.data.onSeatClicked.fn.apply(this.data.onSeatClicked.scope,[{column:t.realCol,row:t.realRow,seatId:t.seatId,selected:"undefined"==typeof this._selectedSeats[t.seatId]?!1:!0,occupied:"undefined"==typeof this._occupiedSeats[t.seatId]?!1:!0,characteristics:this._getSeatCharacteristics(e),priceList:e.priceList}])},_selectSeatsInMolecule:function(e){this.data.onClearSeatsClick.fn.apply(this.data.onClearSeatsClick.scope);for(var t=0;t<e.bestMolecule.seats.length;t++){var i=e.bestMolecule.seats[t],n=this._getJSONConfFromSeat(this.domUtils.getElementById("seat"+i.seatId)),s=this._getSeatInfo(n.cabin,n.realRow,n.realCol);this.data.onSeatClicked.fn.apply(this.data.onSeatClicked.scope,[{column:n.realCol,row:n.realRow,seatId:n.seatId,selected:"undefined"==typeof this._selectedSeats[i.seatId]?!1:!0,occupied:"undefined"==typeof this._occupiedSeats[i.seatId]?!1:!0,characteristics:s.characteristics,priceList:s.priceList,index:this.data.travellerList[t].Id}])}},toggleFilters:function(){var e=this.$getElementById("idPanelFilter"),t=jQuery("#"+e.getProperty("id")),i=this.$getElementById("idBtnFilter"),n=this.$getElementById("idIconFilter");this.toggleAriaExpanded(i,!0),t.slideToggle(),i.classList.toggle("panel-heading-filter-expanded"),i.classList.toggle("panel-heading-filter-collapse"),n.classList.toggle("icon-chevron-down"),n.classList.toggle("icon-chevron-up"),jQuery(".overlay-filter").toggleClass("overlay-active")},toggleAriaExpanded:function(e,t){"false"===e.getAttribute("aria-expanded")?(e.setAttribute("aria-expanded","true"),t&&e.focus()):e.setAttribute("aria-expanded","false")},clearFilters:function(){aria.templates.RefreshManager.stop();for(var e=0;e<this.data.filter.length;e++)this.$json.setValue(this.data.filter[e],"checked",!1);this.clearFiltersClasses(),aria.templates.RefreshManager.resume()},clearFiltersClasses:function(){jQuery(".filtered-seat").removeClass("filtered-seat")},_clearMatch:function(){jQuery(".match-filter").removeClass("match-filter")},checkFiltersUpdate:function(e){var t=0,i=!1;this._clearMatch(),this.clearFiltersClasses();for(var n=0;n<e.length;n++)e[n].checked&&(t++,e[n].code===this.CODE_CUSTOM_CHARAC_MOST_DISCOUNTED&&(i=!0),this._findSeatRows(e));this._unMatchSeatsFilters();var s=1===t&&i?"remove":"apply";return this._setBindValue("discountedSeatsTeaserState",s),t>0},_findSeatRows:function(e){for(var t=0;t<this._deck.cabins.length;t++)for(var i=0;i<this._deck.cabins[t].cabinMap.length;i++)this._checkSeatFilters(this._deck.cabins[t].cabinMap[i],e)},_checkSeatFilters:function(e,t){for(var i=0;i<e.rowData.length;i++){var n=e.rowIndex+e.rowData[i].colIndex,s=e.rowData[i].seat;s&&s.isAvailable&&s.characteristics.length>0&&this._checkSeatMatching(t,s.characteristics)&&this._matchSeatFilters(n)}},_matchSeatFilters:function(e){var t=document.getElementById("td"+e);this.domUtils.isInDom(t)&&t.classList.add("match-filter")},_unMatchSeatsFilters:function(){jQuery("[id*='td']").not(".match-filter").addClass("filtered-seat")},_checkSeatMatching:function(e,t){for(var i=0;i<e.length;i++)if(e[i].checked&&!this.arrayUtils.contains(t,e[i].code))return!1;return!0},getTotalSeats:function(){return document.querySelectorAll("[id^='seat'][data-seat-selectable='true']").length},buildFiltersList:function(){for(var e=this.data.seatFilters.split(","),t=this.data.dictionary.seatCharacteristics,i=[],n=0;n<e.length;n++){var s=e[n],a=null;if(t[s]?a=t[s]:this.data.aircraftMap&&this.data.aircraftMap.bestDiscountPercentage>0&&(s===this.CODE_CUSTOM_CHARAC_MOST_DISCOUNTED?a=this.i18n.getLabel("tx_pltg_text_SeatFilterMostDiscounted"):s===this.CODE_CUSTOM_CHARAC_DISCOUNTED&&(a=this.i18n.getLabel("tx_pltg_text_SeatFilterDiscounted"))),null!==a&&i.push({code:s,label:a,checked:!1}),i.length>=this.MAX_FILTERS)break}return i},getFilteredSeats:function(){var e=document.querySelectorAll(".match-filter [data-seat-selectable='true']").length,t=this.i18n.getLabel("tx_pltg_text_no_results_filters");return e>1?t=this.i18n.getStringFromPattern("tx_pltg_text_results_filters",[e,this.getTotalSeats()]):1===e&&(t=this.i18n.getStringFromPattern("tx_pltg_text_result_filters",[e,this.getTotalSeats()])),t},getNbFiltersApplied:function(){var e=0;for(option in this.data.filter)this.data.filter.hasOwnProperty(option)&&this.data.filter[option].checked&&e++;return e},getNbAvailableSeats:function(){var e=0;if(null!=this.data.aircraftMap)for(var t=0;t<this.data.aircraftMap.cabins.length;t++)for(var i=this.data.aircraftMap.cabins[t].rows,n=0;i&&n<i.length;++n)e+=this._countAvailableSeatsInRow(i[n]);return e},_countAvailableSeatsInRow:function(e){for(var t=0,i=0;null!==e.columns&&i<e.columns.length;++i)if(e.columns[i].seat){var n=this._getSeatStatus(e.columns[i].seat);n===this.SEAT_STATUS_AVAILABLE&&t++}return t},_addFacilityInSeatMap:function(e,t,i,n,s){var a=e.row,r=a.orientation,o=a.distance||1,l=a.index,c=this._createFacilityDescriptor(e,n);switch(r){case this.ROW_ORIENTATION.FRONT:case this.ROW_ORIENTATION.CENTER:var d=l+"-"+o;this._createEmptyRows(t,l,!0,o,n,!1),this._addFacilityInRow(c,t[d]);break;case this.ROW_ORIENTATION.REAR:var p=l+"+"+o;this._createEmptyRows(i,l,!1,o,n,s),this._addFacilityInRow(c,i[p])}},_addCorridorInColumns:function(e,t){var i=JSON.parse(JSON.stringify(e));for(var n in t)if(t[n]===this.CORRIDOR)for(var s=n.replace(this.CORRIDOR_SUFFIX,""),a=0;a<i.length;++a)if(i[a].index===s){i.splice(a+1,0,{index:n,corridor:{}});break}return i},_getFacilityColumn:function(e,t){var i,n=e.column.orientation,s=e.column.distance,a=e.column.index;if(n===this.COLUMN_ORIENTATION.CENTER||e.type===this.CODE_EXIT_DOOR_FACILITY)i=a;else{var r=t.indexOf(a);if(-1===r)return"";i=n===this.COLUMN_ORIENTATION.LEFT&&r-s>=0?t[r-s]:n===this.COLUMN_ORIENTATION.RIGHT&&r+s<t.length?t[r+s]:""}return i},_addFacilityInRow:function(e,t){if(t.rowData)if(e.facility.code===this.CODE_EXIT_DOOR_FACILITY&&t.rowData.length>0)e.colIndex===t.rowData[0].colIndex?t.hasLeftExitDoor=!0:e.colIndex===t.rowData[t.rowData.length-1].colIndex&&(t.hasRightExitDoor=!0);else for(var i=0;i<t.rowData.length;++i)if(t.rowData[i].colIndex===e.colIndex)return void(t.rowData[i]=e)},_createFacilityDescriptor:function(e,t){var i={colIndex:this._getFacilityColumn(e,t),facility:{code:e.type,title:this.data.dictionary.facilities[e.type],style:""}},n=this.Facility.getCustomFacilityStyle(e.type);return n&&(i.facility.style=n),i},_createEmptyRows:function(e,t,i,n,s,a){for(var r=1;n>=r;++r){var o;o=i?t+"-"+r:t+"+"+r,e[o]||(e[o]={isOverWing:a,rowData:this._getEmptyRow(s),emptyRow:!1,leftWindowMissing:!1,rightWindowMissing:!1,hasFacilities:!1,hasLeftExitDoor:!1,hasRightExitDoor:!1})}},_getEmptyRow:function(e){for(var t=[],i=0;i<e.length;++i)t.push({colIndex:e[i],corridor:{}});return t},_getSeatMediaContentForPax:function(e,t){var i=this._extractSeatMediaContentIdForPax(e,t),n=this.data.dictionary.mediaContents;return i&&n&&n[i]?n[i]:null},_extractSeatMediaContentIdForPax:function(e,t){var i=this._getSeatTraveller(e,t);return i.mediaContent?i.mediaContent:null},_getSeatTraveller:function(e,t){var i=e?e.travellers:null;if(i)for(var n=0;n<i.length;++n)if(i[n].id===t)return i[n];return{}},_getSeatCharacteristics:function(e){var t;return t=this.data.scopeSeatMapView.data.config.seatmapPerPax?this._getSeatCharacteristicsForPax(e,this._getSelectedPax()):e.characteristics,t?t:[]},_getSeatStatus:function(e){return e?this.data.scopeSeatMapView.data.config.seatmapPerPax?this._getSeatStatusForPax(e,this._getSelectedPax()):e.status:null},_getSeatStatusForPax:function(e,t){var i=this._getSeatTraveller(e,t);return i.status?i.status:null},_getSeatCharacteristicsForPax:function(e,t){var i=this._getSeatTraveller(e,t);return i.characteristics?i.characteristics:[]},_getSeatListPriceForPax:function(e,t){var i=this._getSeatTraveller(e,t);return i.prices?i.prices:[]},applyMostDiscountedSeatsFilter:function(){aria.templates.RefreshManager.stop();for(var e=0;e<this.data.filter.length;++e){var t=this.data.filter[e];t.code===this.CODE_CUSTOM_CHARAC_MOST_DISCOUNTED?this.$json.setValue(t,"checked",!0):this.$json.setValue(t,"checked",!1)}aria.templates.RefreshManager.resume()},_getSelectedPax:function(){var e=parseInt(this._getBindValue("selectedPax"),10);return null===e&&(e=1),e},_isSeatRestricted:function(e){if(!this.data.scopeSeatMapView.data.config.seatmapPerPax)return!1;var t=this._getSelectedPax(),i=this._getSeatTraveller(e,t);if(i.status===this.SEAT_STATUS_TAKEN&&e.travellers)for(var n=0;n<e.travellers.length;++n)if(e.travellers[n].id!==t&&e.travellers[n].status===this.SEAT_STATUS_AVAILABLE)return this._setBindValue("hasRestrictedSeats",!0),!0;return!1},_isSeatFocusable:function(e){if(e){var t=this._isSelectableSeat(e),i="true"===e.getAttribute("data-seat-restricted");return t||i}return!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/seatmap/resources/css/Container.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.seatmap.resources.css.Container",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this){this.__$write("\n.hidden{\ndisplay: none;\n}\n\n\n\n\ndiv.deckListTitle {\ndisplay: inline-block;\n}\n\ndiv.decks {\nbackground-color: ",7),this.__$write(this.$grayLight,19),this.__$write(';\nwidth: 500px;\n\n}\n\ndiv.decks div.deck {\ndisplay: inline-block;\nheight: 30px;\nline-height: 30px;\nwidth: 120px;\nposition: relative;\nmargin-top: 2px;\n}\n\ndiv.decks input[name="decks"] {\ndisplay: inline-block;\nposition: absolute;\nleft: 15px;\ntop: 5px;\n}\n\ndiv.decks label.deckBox {\npadding-left: 20px;\nmargin-bottom: 0px;\nwidth: 100%;\n}\n\n.decks .deck input[name="decks"]+label.deckBox {\nbackground-color: ',19),this.__$write(this.$grayLight,47),this.__$write(';\n}\n.decks .deck input[name="decks"]:checked+label.deckBox {\nbackground-color: ',47),this.__$write(this.$white,50),this.__$write(";\n}\n\n\n\n\n.seatInfoPopup {\nposition: absolute;\nmin-width: 170px;\nmax-width: 320px;\nz-index: 999999;\nfont-family: 'Roboto Regular';\npadding: 0;\ntext-align: left;\ncolor: ",50),this.__$write(this.$white,64),this.__$write(";\nbackground: ",64),this.__$write(this.$grayDarker,65),this.__$write(";\nbox-shadow: 1px 1px 2px rgba(0, 0, 0, 0.25);\n}\n\n.popup-seat-title {\nfont-size: 16px;\nfont-weight: ",65),this.__$write(this.$bold,71),this.__$write(";\nmargin-bottom: 15px;\npadding: 10px 10px 0 10px;\n}\n\n.popup-seat-one-click .popup-seat-title {\nbackground-color: ",71),this.__$write(this.$orangeLighter,77),this.__$write(";\npadding-bottom: 5px;\ntext-align: center;\n}\n\n.popup-seat-price {\nfont-size: 14px;\nmargin-bottom: 5px;\npadding: 0 10px;\n}\n\n.popup-seat-discounted:after {\nposition: absolute;\ncontent: '\\e628';\nfont-family: 'NewUI-icons';\nfont-size: 50px;\nfont-weight: ",77),this.__$write(this.$bold,93),this.__$write(";\ncolor: ",93),this.__$write(this.$red,94),this.__$write(";\nright: -15px;\ntop: -10px;\n}\n\n.popup-seat-nonDiscountedPrice-container {\ntext-decoration: line-through;\ncolor: ",94),this.__$write(this.$red,101),this.__$write(";\n}\n\n.popup-seat-nonDiscountedPrice {\nfont-size: 12px;\ncolor: ",101),this.__$write(this.$white,106),this.__$write("\n}\n\n.popup-seat-discountedPrice {\nfont-size: 14px;\nfont-weight: ",107),this.__$write(this.$bold,111),this.__$write(";\n}\n\n.popup-seat-discountRate {\nmargin: 0 5px;\npadding: 0 5px;\nfont-size: 11px;\n}\n\n.popup-seat-discountReason {\nbackground: ",111),this.__$write(this.$grayDarken,121),this.__$write(";\npadding: 8px 10px;\nmargin: 10px 0;\n}\n\n.popup-seat-characteristics {\nfont-size: 14px;\npadding: 0 10px;\n}\n\n.popup-seat-characteristic {\nlist-style-position: inside;\nlist-style-type: disc;\n}\n\n.popup-seat-media {\nmargin: 10px;\noverflow: hidden;\n}\n\n.popup-seat-restricted-warning {\nmargin-bottom: 5px;\npadding: 0 10px;\n}\n\n.seatMapContainer {\noverflow: visible;\npadding: 0;\nborder: 1px solid ",121),this.__$write(this.$grayLight,149),this.__$write(";\nbackground-color: ",149),this.__$write(this.$grayLighten,150),this.__$write(";\n-webkit-box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.25);\nbox-shadow: 1px 1px 2px rgba(0, 0, 0, 0.25);\n}\n\n.uicLetters,\n.uicNumbers {\nbackground-image: none;\ntext-align: center;\nwidth: 20px;\nfont-size: 14px;\n}\n\n.uicWing {\nbackground-color: ",150),this.__$write(this.$grayBorder,164),this.__$write(";\nbackground-image: none;\n}\n\n.uicCabinContainer {\ndisplay: inline-block;\ntext-align: center;\nvertical-align: middle;\nmargin: 20px auto;\n}\n\n.uicCabin {\ntext-align: center;\nwidth: auto;\nmargin-left: auto;\nmargin-right: auto;\n}\n\n.uicCabin td {\nposition: relative;\n}\n\n.uicSeatFacility,\n.uicZoneFacility {\nbackground-color: ",164),this.__$write(this.$grayDark,188),this.__$write(";\ncolor: white;\ntext-align: center;\ncursor: default\n}\n\n.uicCorridor {\nbackground-color: ",188),this.__$write(this.$grayLight,195),this.__$write(";\n}\n\n.firstColumn, .lastColumn {\nbackground-color: ",195),this.__$write(this.$gray,199),this.__$write(";\n}\n\n.icon-seatmap-exit-left:before, .icon-seatmap-exit-right:before {\ncolor: ",199),this.__$write(this.$red,203),this.__$write(";\n}\n.icon-seatmap-exit-left, .icon-seatmap-exit-right {\nbackground: ",203),this.__$write(this.$gray,206),this.__$write(";\n}\n\n\n\n\n.uicCabinContainer .uicCabin {\nbackground-color: ",206),this.__$write(this.$grayLight,213),this.__$write(";\n}\n\n.uicCabin [data-seat-selectable='true'] {\ncursor: pointer;\ncolor: ",213),this.__$write(this.$blackSeat,218),this.__$write(";\n}\n\n.uicCabin .icon-seat-best-molecule {\nbackground-color: ",218),this.__$write(this.$orangeLighter,222),this.__$write(";\n}\n\n[data-page-device-type=\"DESKTOP\"] .uicCabin [data-seat-selectable='true']:hover:before {\ncolor: ",222),this.__$write(this.$blue,226),this.__$write(";\n}\n\n.uicCabin [data-seat-selected='true']:before,\n.uicCabin [data-seat-selected='true']:hover:before {\ncontent: \"\\e611\";\n}\n\n.icon-seat-chargeable.priceRangeExpensive:before  {\ncolor: ",226),this.__$write(this.$blueLight,235),this.__$write(";\n}\n.icon-seat-chargeable.priceRangeMedium:before {\ncolor: ",235),this.__$write(this.$blueLighter,238),this.__$write(";\n}\n.icon-seat-chargeable.priceRangeCheap:before {\ncolor: ",238),this.__$write(this.$blueDark,241),this.__$write(";\n}\n\n[data-seat-selectable='true']:focus:before,\n[data-seat-restricted='true']:focus:before {\noutline-width: 2px;\noutline-style: solid;\noutline-color: #0AB4E2;\n}\n\n",241);for(var number=1;9>=number;number++)this.macro_seatNumber(number);this.__$write("\n\n.uicCabin .icon-seatmap-exit-left:before {\nmargin-left: -45px;\n}\n\n.uicCabin .icon-seatmap-exit-right:before {\nmargin-right: -45px;\n}\n\n.firstColumn,\n.icon-seatmap-exit-left:before,\n.icon-seatmap-exit-right:before,\n.uicLetters.firstRow,\n.uicNumbers.lastColumn {\nfont-weight: ",254),this.__$write(this.$bold,268),this.__$write(";\n}\n\n.uicCabin .extra-leg-row td [data-seat] {\nbackground-color: ",268),this.__$write(this.$grayLight,272),this.__$write(";\n}\n\n.uicCabin .extra-leg-row .extra-leg {\nposition: absolute;\nbottom: 19px;\nleft: 3px;\nheight: 11px;\nwidth: 13px;\nbackground: transparent;\nborder-top-left-radius: 3px;\nborder-top-right-radius: 3px;\n}\n\n.uicCabin .extra-leg-row .extra-leg {\nborder-left: 1px dashed ",272),this.__$write(this.$black,287),this.__$write(";\nborder-right: 1px dashed ",287),this.__$write(this.$black,288),this.__$write(";\nborder-top: 1px dashed ",288),this.__$write(this.$black,289),this.__$write(";\n}\n\n.uicCabin .extra-leg-row .extra-leg.extra-leg-selected {\nborder-color: ",289),this.__$write(this.$blue,293),this.__$write(";\n}\n\n.uicCabin .filtered-seat .extra-leg {\nbottom: 17px;\nheight: 9px;\n}\n\n.uicCabin .filtered-seat [data-seat-selectable='true']:before,\n.uicCabin .filtered-seat [data-seat-restricted='true']:before,\n.uicCabin .filtered-seat .icon-seat-unavailable:before,\n.uicCabin .filtered-seat > section.extra-leg {\ncolor: ",293),this.__$write(this.colors.tabletLightGray,305),this.__$write(";\nborder: none;\n}\n\n.uicCabin .filtered-seat > section.extra-leg {\nbackground-color: ",305),this.__$write(this.$grayLightSeat,310),this.__$write(";\nopacity: 1;\n}\n\n",310)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},macro_seatNumber:function(number){try{with(this)this.__$write("\n.paxN",317),this.__$write(number,317),this.__$write("[data-seat-selected='true']:after {\ncontent: '",317),this.__$write(number,318),this.__$write("';\n}\n\n.seatMapContainer[paxn=\"paxN",318),this.__$write(number,321),this.__$write('"] .paxN',321),this.__$write(number,321),this.__$write(":before {\ncolor: ",321),this.__$write(this.$blue,322),this.__$write(";\n}\n",322)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["seatNumber",__filename,this["aria:currentLineNumber"]],_ex)}},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/seatmap/resources/css/Horizontal.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.seatmap.resources.css.Horizontal",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write(container,13),this.__$write(" .uicSquare {\nwidth: ",13),this.__$write(squareSize,14),this.__$write(";\nheight: ",14),this.__$write(squareSize,15),this.__$write(";\nline-height: ",15),this.__$write(iconSize,16),this.__$write(";\npadding: 2px;\nfont-size: ",16),this.__$write(iconSize,18),this.__$write(";\n}\n\n",18),this.__$write(container,21),this.__$write(" .uicTopWindow,\n",21),this.__$write(container,22),this.__$write(" .uicBottomWindow,\n",22),this.__$write(container,23),this.__$write(" .uicNoWindow,\n",23),this.__$write(container,24),this.__$write(" .uicWindowPlaceHolder {\nwidth: ",24),this.__$write(squareSize,25),this.__$write(";\nheight: 3px;\n}\n\n",25),this.__$write(container,29),this.__$write(' .top .icon-seatmap-exit:before {\ncontent: "\\e60e";\nposition: absolute;\ntop: 2px;\nleft: 4px;\n-webkit-transform: rotate(90deg);\ntransform: rotate(90deg);\n',29),aria.core.Browser.isIE9&&this.__$write("\n-ms-transform: rotate(90deg);\n",37),this.__$write("\ncolor: ",39),this.__$write(this.$red,39),this.__$write(";\n}\n",39),this.__$write(container,41),this.__$write(' .bottom .icon-seatmap-exit:before {\ncontent: "\\e60e";\nposition: absolute;\nbottom: 2px;\nleft: 4px;\n-webkit-transform: rotate(-90deg);\ntransform: rotate(-90deg);\n',41),aria.core.Browser.isIE9&&this.__$write("\n-ms-transform: rotate(-90deg);\n",49),this.__$write("\ncolor: ",51),this.__$write(this.$red,51),this.__$write(";\n}\n\n\n\n",51),this.__$write(container,56),this.__$write(" .uicTopWindow,\n",56),this.__$write(container,57),this.__$write(" .uicBottomWindow,\n",57),this.__$write(container,58),this.__$write(" .uicNoWindow{\nbackground-color: ",58),this.__$write(this.$grayBorder,59),this.__$write(";\n}\n\n\n\n",59),this.__$write(container,64),this.__$write(" .uicFirstWingTop {\npadding: 0;\nborder-style: solid;\nborder-width: 0 0 ",64),this.__$write(squareSize,67),this.__$write(" ",67),this.__$write(squareSize,67),this.__$write(";\nborder-color: transparent transparent ",67),this.__$write(this.$grayBorder,68),this.__$write(" transparent;\n}\n\n",68),this.__$write(container,71),this.__$write(" .uicLastWingBottom {\npadding: 0;\nborder-style: solid;\nborder-width: ",71),this.__$write(squareSize,74),this.__$write(" ",74),this.__$write(squareSize,74),this.__$write(" 0 0;\nborder-color: ",74),this.__$write(this.$grayBorder,75),this.__$write(" transparent transparent transparent;\n}\n\n",75),this.__$write(container,78),this.__$write(" .uicFirstWingBottom {\npadding: 0;\nborder-style: solid;\nborder-width: 0 ",78),this.__$write(squareSize,81),this.__$write(" ",81),this.__$write(squareSize,81),this.__$write(" 0;\nborder-color: transparent ",81),this.__$write(this.$grayBorder,82),this.__$write(" transparent transparent;\n}\n\n",82),this.__$write(container,85),this.__$write(" .uicLastWingTop {\npadding: 0;\nborder-style: solid;\nborder-width: ",85),this.__$write(squareSize,88),this.__$write(" 0 0 ",88),this.__$write(squareSize,88),this.__$write(";\nborder-color: transparent transparent transparent ",88),this.__$write(this.$grayBorder,89),this.__$write(";\n}\n\n\n",89),this.__$write(container,93),this.__$write(" .seatInfoPopup.popup-seat-align-top {\nbottom: -23px;\n}\n",93),this.__$write(container,96),this.__$write(" .seatInfoPopup.popup-seat-align-bottom {\ntop: -22px;\n}\n",96),this.__$write(container,99),this.__$write(" .seatInfoPopup.popup-seat-align-right {\nright: 33px;\n}\n",99),this.__$write(container,102),this.__$write(' .seatInfoPopup.popup-seat-align-right:after {\ncontent: "";\nposition: absolute;\nright: -',102),this.__$write(popupArrowSize,105),this.__$write(";\nborder-top: ",105),this.__$write(popupArrowSize,106),this.__$write(" solid transparent;\nborder-bottom: ",106),this.__$write(popupArrowSize,107),this.__$write(" solid transparent;\nborder-left: ",107),this.__$write(popupArrowSize,108),this.__$write(" solid ",108),this.__$write(this.$grayDarker,108),this.__$write(";\n}\n\n",108),this.__$write(container,111),this.__$write(" .seatInfoPopup.popup-seat-align-left {\nleft: 32px;\n}\n",111),this.__$write(container,114),this.__$write(' .seatInfoPopup.popup-seat-align-left:before {\ncontent: "";\nposition: absolute;\nleft: -',114),this.__$write(popupArrowSize,117),this.__$write(";\nborder-top: ",117),this.__$write(popupArrowSize,118),this.__$write(" solid transparent;\nborder-bottom: ",118),this.__$write(popupArrowSize,119),this.__$write(" solid transparent;\nborder-right: ",119),this.__$write(popupArrowSize,120),this.__$write(" solid ",120),this.__$write(this.$grayDarker,120),this.__$write(";\n}\n\n",120),this.__$write(container,123),this.__$write(" .seatInfoPopup.popup-seat-align-top.popup-seat-align-right:after,\n",123),this.__$write(container,124),this.__$write(" .seatInfoPopup.popup-seat-align-top.popup-seat-align-left:before {\nbottom: ",124),this.__$write(squareSize,125),this.__$write(";\n}\n\n",125),this.__$write(container,128),this.__$write(" .seatInfoPopup.popup-seat-align-bottom.popup-seat-align-right:after,\n",128),this.__$write(container,129),this.__$write(" .seatInfoPopup.popup-seat-align-bottom.popup-seat-align-left:before {\ntop: ",129),this.__$write(squareSize,130),this.__$write(";\n}\n\n",130),this.__$write(container,133),this.__$write(" .seatMapContainer [data-seat-selectable='true'] {\nposition: relative;\n-webkit-transform: rotate(-90deg);\ntransform: rotate(-90deg);\n",133),aria.core.Browser.isIE9&&this.__$write("\n-ms-transform: rotate(-90deg);\n",138),aria.core.Browser.isIE8&&this.__$write('\nzoom: 1;\n-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n',141),this.__$write("\n}\n\n",144),this.__$write(container,146),this.__$write(" [data-seat-selected='true']:after {\nposition: absolute;\ntop: -1px;\nleft: 2px;\nfont-weight: 700;\ncolor: white;\nfont-size: 16px;\nwidth: ",146),this.__$write(squareSize,153),this.__$write(";\nheight: ",153),this.__$write(squareSize,154),this.__$write(";\nline-height: 20px;\n-webkit-transform: rotate(90deg);\ntransform: rotate(90deg);\n",154),aria.core.Browser.isIE9&&this.__$write("\n-ms-transform: rotate(90deg);\n",159),aria.core.Browser.isIE8&&this.__$write('\n-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n',162),this.__$write("\n}\n\n",164)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},__$initTemplate:function(){if(!this.$BaseCss.__$initTemplate.call(this))return!1;try{with(this)this.container=".horizontal",this.squareSize="20px",this.iconSize="14px",this.popupArrowSize="10px"}catch(_ex){return this.$logError(this.EXCEPTION_IN_VARINIT,[this.$classpath],_ex),!1}return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/seatmap/resources/css/Legend.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.seatmap.resources.css.Legend",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n.horizontal .legendItem {\nfloat: left;\nclear: none;\n}\n\n.legendItem {\nmargin-left: 0px;\nclear: both;\n}\n\n.legendItem .icon {\nbackground-repeat: no-repeat;\nfloat: left;\nheight: 25px;\nwidth: 25px;\nline-height: 25px;\npadding: 2px;\ntext-align: center;\n}\n\n.legendItem .text {\npadding-left: 5px;\nline-height: 25px;\n}\n\n.legendContainer {\nclear: both;\nwidth: 100%;\ntext-align: left;\npadding-bottom: 10px;\n}\n\n.legendContainer .sectionTitle i{\npadding-right: 5px;\n}\n\n.legendItem .priceRangeExpensive {\ncolor: ",11),this.__$write(this.$magentaDark,49),this.__$write(";\n}\n\n.legendItem .priceRangeMedium {\ncolor: ",49),this.__$write(this.$red,53),this.__$write(";\n}\n\n.legendItem .priceRangeCheap {\ncolor: ",53),this.__$write(this.$red,57),this.__$write(";\n}\n\n.legendItem .icon.icon-seat-extra-leg {\nborder-left: 1px dashed ",57),this.__$write(this.$black,61),this.__$write(";\nborder-right: 1px dashed ",61),this.__$write(this.$black,62),this.__$write(";\nborder-top: 1px dashed ",62),this.__$write(this.$black,63),this.__$write(";\nheight: 11px;\nwidth: 12px;\nmargin-top: 6px;\nmargin-right: 6px;\nmargin-left: 6px;\nborder-top-left-radius: 3px;\nborder-top-right-radius: 3px;\n}\n\n.uicFacilityDisabled {\noverflow: hidden;\nwhite-space: nowrap;\nbackground: ",63),this.__$write(this.$grayDark,76),this.__$write(" ",76),this.__$write(urlForCss,76),this.__$write("(",76),this.__$write(facilityPath,76),this.__$write("/disabled.gif) 50% 50% no-repeat;\n}\n\n.uicFacilityEmergencyExit {\nbackground-color: #eeeeee ;\n}\n\n@media (max-width: ",76),this.__$write(breakpoints.XXXS_MAX,83),this.__$write(") {\n.legendItem{\nfloat: none;\nwidth: 100%;\n}\n}\n\n@media (max-width: ",83),this.__$write(breakpoints.SM_MAX,90),this.__$write(") {\n\n\n",90),aria.core.Browser.isIE9?this.__$write("\n.legend-items-container .legendItem{\ndisplay: inline-block;\nwidth: 49%;\n}\n",94):this.__$write("\n.legend-items-container{\n-moz-column-count: 2;\n-webkit-column-count: 2;\ncolumn-count: 2;\n}\n\n.legend-items-container .legendItem{\ndisplay: inline-flex;\nwidth: 100%;\n}\n",99),this.__$write("\n}\n",110)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},__$initTemplate:function(){if(!this.$BaseCss.__$initTemplate.call(this))return!1;try{with(this)this.imagesRoot=cssFolderPath+"/../img",this.facilityPath=imagesRoot+"/facilities",this.urlForCss="url"}catch(_ex){return this.$logError(this.EXCEPTION_IN_VARINIT,[this.$classpath],_ex),!1}return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/seatmap/resources/css/Vertical.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.seatmap.resources.css.Vertical",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write(container,18),this.__$write(" {\nposition: relative;\n}\n\n",18),this.__$write(container,22),this.__$write(" .uicSquare {\nwidth: ",22),this.__$write(squareSize,23),this.__$write(";\nheight: ",23),this.__$write(squareSize,24),this.__$write(";\nline-height: calc(",24),this.__$write(iconSize,25),this.__$write(" + 2*",25),this.__$write(squarePadding,25),this.__$write(");\npadding: ",25),this.__$write(squarePadding,26),this.__$write(";\nfont-size: ",26),this.__$write(iconSize,27),this.__$write(";\n}\n\n",27),this.__$write(container,30),this.__$write(" .uicLeftWindow,\n",30),this.__$write(container,31),this.__$write(" .uicRightWindow,\n",31),this.__$write(container,32),this.__$write(" .uicNoWindow,\n",32),this.__$write(container,33),this.__$write(" .uicWindowPlaceHolder {\nwidth: ",33),this.__$write(windowWidth,34),this.__$write(";\nheight: ",34),this.__$write(squareSize,35),this.__$write(";\n}\n\n",35),this.__$write(container,38),this.__$write(" .extra-leg-row .uicLeftWindow,\n",38),this.__$write(container,39),this.__$write(" .extra-leg-row .uicRightWindow,\n",39),this.__$write(container,40),this.__$write(" .extra-leg-row .uicNoWindow,\n",40),this.__$write(container,41),this.__$write(" .extra-leg-row .uicWindowPlaceHolder,\n",41),this.__$write(container,42),this.__$write(" .extra-leg-row .uicSquare,\n",42),this.__$write(container,43),this.__$write(" .extra-leg-row .uicNumbers {\nheight: ",43),this.__$write(extraLegHeight,44),this.__$write(";\n}\n\n",44),this.__$write(container,47),this.__$write(" .uicLeftWindow,\n",47),this.__$write(container,48),this.__$write(" .uicRightWindow,\n",48),this.__$write(container,49),this.__$write(" .uicNoWindow{\nbackground-color: ",49),this.__$write(this.$grayBorder,50),this.__$write(";\n}\n\n.uicCabin .extra-leg-row .uicNumbers {\npadding-top: calc(",50),this.__$write(extraLegHeight,54),this.__$write(" - ",54),this.__$write(squareSize,54),this.__$write(");\n}\n\n.uicCabin .extra-leg-row [data-seat] {\npadding-top: calc(",54),this.__$write(extraLegHeight,58),this.__$write(" - ",58),this.__$write(squareSize,58),this.__$write(" + ",58),this.__$write(squarePadding,58),this.__$write(");\n}\n\n",58),this.__$write(container,61),this.__$write(" .uicEmptySquare.uicSquare {\nbackground-color: ",61),this.__$write(this.$grayLighten,62),this.__$write(";\n}\n\n",62),this.__$write(container,65),this.__$write(" tr:first-child,\n",65),this.__$write(container,66),this.__$write(" tr:last-child {\nbackground-color: ",66),this.__$write(this.$grayLighten,67),this.__$write(";\n}\n\n",67),this.__$write(container,70),this.__$write(" .extra-leg-row .uicEmptySquare.uicSquare,\n",70),this.__$write(container,71),this.__$write(" .extra-leg-row .uicWing {\nheight: ",71),this.__$write(extraLegHeight,72),this.__$write(";\n}\n\n",72),this.__$write(container,75),this.__$write(" .uicFirstWingLeft {\npadding: 0;\nborder-style: solid;\nborder-width: 0 0 ",75),this.__$write(squareSize,78),this.__$write(" ",78),this.__$write(squareSize,78),this.__$write(";\nborder-color: transparent transparent ",78),this.__$write(this.$grayBorder,79),this.__$write(" transparent;\nbackground-color: #f8f8f8;\n}\n\n",79),this.__$write(container,83),this.__$write(" .extra-leg-row .uicFirstWingLeft {\nborder-width: 0 0 ",83),this.__$write(extraLegHeight,84),this.__$write(" ",84),this.__$write(squareSize,84),this.__$write(";\n}\n\n",84),this.__$write(container,87),this.__$write(" .uicLastWingLeft {\npadding: 0;\nborder-style: solid;\nborder-width: 0 ",87),this.__$write(squareSize,90),this.__$write(" ",90),this.__$write(squareSize,90),this.__$write(" 0;\nborder-color: transparent ",90),this.__$write(this.$grayBorder,91),this.__$write(" transparent transparent;\nbackground-color: #f8f8f8;\n}\n\n",91),this.__$write(container,95),this.__$write(" .extra-leg-row .uicLastWingLeft {\nborder-width: 0 ",95),this.__$write(squareSize,96),this.__$write(" ",96),this.__$write(extraLegHeight,96),this.__$write(" 0;\n}\n\n",96),this.__$write(container,99),this.__$write(" .uicFirstWingRight {\npadding: 0;\nborder-style: solid;\nborder-width: ",99),this.__$write(squareSize,102),this.__$write(" 0 0 ",102),this.__$write(squareSize,102),this.__$write(";\nborder-color: transparent transparent transparent ",102),this.__$write(this.$grayBorder,103),this.__$write(";\nbackground-color: #f8f8f8;\n}\n\n",103),this.__$write(container,107),this.__$write(" .extra-leg-row .uicFirstWingRight {\nborder-width: ",107),this.__$write(extraLegHeight,108),this.__$write(" 0 0 ",108),this.__$write(squareSize,108),this.__$write(";\n}\n\n",108),this.__$write(container,111),this.__$write(" .uicLastWingRight {\npadding: 0;\nborder-style: solid;\nborder-width: ",111),this.__$write(squareSize,114),this.__$write(" ",114),this.__$write(squareSize,114),this.__$write(" 0 0;\nborder-color: ",114),this.__$write(this.$grayBorder,115),this.__$write(" transparent transparent transparent;\nbackground-color: #f8f8f8;\n}\n\n",115),this.__$write(container,119),this.__$write(" .extra-leg-row .uicLastWingRight {\nborder-width: ",119),this.__$write(extraLegHeight,120),this.__$write(" ",120),this.__$write(squareSize,120),this.__$write(" 0 0;\n}\n\n",120),this.__$write(container,123),this.__$write(" .seatInfoPopup.popup-seat-align-top {\nbottom: calc(",123),this.__$write(squareSize,124),this.__$write(" + ",124),this.__$write(popupArrowSize,124),this.__$write(");\n}\n\n",124),this.__$write(container,127),this.__$write(" .extra-leg-row .seatInfoPopup.popup-seat-align-top {\nbottom: calc(",127),this.__$write(extraLegHeight,128),this.__$write(" + ",128),this.__$write(popupArrowSize,128),this.__$write(");\n}\n\n",128),this.__$write(container,131),this.__$write(" .seatInfoPopup.popup-seat-align-bottom {\ntop: calc(",131),this.__$write(squareSize,132),this.__$write(" + ",132),this.__$write(popupArrowSize,132),this.__$write(");\n}\n\n",132),this.__$write(container,135),this.__$write(" .extra-leg-row .seatInfoPopup.popup-seat-align-bottom {\ntop: calc(",135),this.__$write(extraLegHeight,136),this.__$write(" + ",136),this.__$write(popupArrowSize,136),this.__$write(");\n}\n\n",136),this.__$write(container,139),this.__$write(" .seatInfoPopup.popup-seat-align-right {\nright: -",139),this.__$write(leftRightPopupAlignment,140),this.__$write(";\n}\n\n",140),this.__$write(container,143),this.__$write(" .seatInfoPopup.popup-seat-align-left {\nleft: -",143),this.__$write(leftRightPopupAlignment,144),this.__$write(";\n}\n\n",144),this.__$write(container,147),this.__$write(" .seatInfoPopup.popup-seat-align-top:before {\ndisplay: none;\n}\n\n",147),this.__$write(container,151),this.__$write(' .seatInfoPopup.popup-seat-align-top:after {\ncontent: "";\nposition: absolute;\nbottom: -',151),this.__$write(popupArrowSize,154),this.__$write(";\nborder-style: solid;\nborder-width: ",154),this.__$write(popupArrowSize,156),this.__$write(" ",156),this.__$write(popupArrowSize,156),this.__$write(" 0 ",156),this.__$write(popupArrowSize,156),this.__$write(";\nborder-color: ",156),this.__$write(this.$grayDarker,157),this.__$write(" transparent transparent transparent;\n}\n\n",157),this.__$write(container,160),this.__$write(' .seatInfoPopup.popup-seat-align-bottom:before {\ncontent: "";\nposition: absolute;\ntop: -',160),this.__$write(popupArrowSize,163),this.__$write(";\nborder-style: solid;\nborder-width: 0 ",163),this.__$write(popupArrowSize,165),this.__$write(" ",165),this.__$write(popupArrowSize,165),this.__$write(" ",165),this.__$write(popupArrowSize,165),this.__$write(";\nborder-color: transparent transparent ",165),this.__$write(this.$grayDarker,166),this.__$write(" transparent;\n}\n\n",166),this.__$write(container,169),this.__$write(" .seatInfoPopup.popup-seat-align-bottom:after {\ndisplay: none;\n}\n\n",169),this.__$write(container,173),this.__$write(" .seatInfoPopup.popup-seat-align-right:before,\n",173),this.__$write(container,174),this.__$write(" .seatInfoPopup.popup-seat-align-right:after {\nright: ",174),this.__$write(leftRightPopupAlignment,175),this.__$write(";\n}\n\n",175),this.__$write(container,178),this.__$write(" .seatInfoPopup.popup-seat-align-left:before,\n",178),this.__$write(container,179),this.__$write(" .seatInfoPopup.popup-seat-align-left:after {\nleft: ",179),this.__$write(leftRightPopupAlignment,180),this.__$write(";\n}\n\n",180),this.__$write(container,183),this.__$write(" .seatInfoPopup.popup-seat-align-center:before,\n",183),this.__$write(container,184),this.__$write(" .seatInfoPopup.popup-seat-align-center:after {\nleft: 50%;\nmargin-left: -",184),this.__$write(popupArrowSize,186),this.__$write(";\n}\n\n\n",186),this.__$write(container,190),this.__$write(" .icon-seatmap-exit-left:before,\n",190),this.__$write(container,191),this.__$write(" .icon-seatmap-exit-right:before {\nposition: relative;\nz-index: 1;\n}\n\n",191),this.__$write(container,196),this.__$write(" [data-seat-selected='true']:after {\nposition: absolute;\nbottom: 0;\nleft: 0;\nfont-weight: 700;\ncolor: white;\nfont-size: ",196),this.__$write(seatSelectedFontSize,202),this.__$write(";\nwidth: ",202),this.__$write(squareSize,203),this.__$write(";\nheight: ",203),this.__$write(squareSize,204),this.__$write(";\nline-height: calc(",204),this.__$write(seatSelectedFontSize,205),this.__$write(" + 2*",205),this.__$write(squarePadding,205),this.__$write(");\n}\n\n\n\n",205),this.__$write(container,210),this.__$write(" .checkbox {\npadding: 11px 10px 11px 30px;\nmargin: 0;\nbackground-color: ",210),this.__$write($grayLighten,213),this.__$write(";\nborder: 1px solid ",213),this.__$write($grayBorder,214),this.__$write(";\nborder-top: 0px;\ntext-align: left;\n}\n\n.availability-filters input[type=checkbox] + label {\npadding-left: 10px;\ndisplay: inline-block;\n}\n\n.availability-filters input[type=checkbox] + label:before {\nfont-family: 'ADC-icons';\ncursor: pointer;\ncontent: \"\";\ndisplay: inline-block;\nborder: 1px solid ",214),this.__$write($grayBorder,229),this.__$write(";\nwidth: 20px;\nheight: 20px;\nvertical-align: middle;\nmargin: -3px 10px 0 -30px;\nbox-shadow: inset 1px 1px 3px 0px ",229),this.__$write($grayLightShade,234),this.__$write(", 0px 1px 0px 0px ",234),this.__$write($whitePartialOpaque,234),this.__$write(";\n}\n\n.availability-filters input[type=checkbox] + label:focus:before {\noutline: 0;\nbox-shadow: inset 0 1px 1px ",234),this.__$write(this.$blackPartialOpaque,239),this.__$write(", 0 0 15px ",239),this.__$write(this.$blueFocusShadow1,239),this.__$write(";\nborder: 1px solid;\n}\n\n.availability-filters input[type=checkbox] {\ncursor: pointer;\n}\n\ninput[type=checkbox]:checked + label {\nfont-weight: ",239),this.__$write($bold,248),this.__$write(';\n}\n\n.availability-filters input[type=checkbox]:checked + label:before {\ncontent: "\\f00c";\n}\n\n.availability-filters input[type=checkbox] + label:before {\ncolor: ',248),this.__$write($blue,256),this.__$write(";\nbackground-color: ",256),this.__$write($grayLighten,257),this.__$write(";\nline-height: 18px;\ntext-align: center;\n}\n\n.availability-filters input[type=checkbox]:focus + label:before {\noutline: 0;\n-webkit-box-shadow: inset 0 1px 1px ",257),this.__$write($blackFullOpaque,264),this.__$write(", 0 0 8px ",264),this.__$write($blueFocusShadow1,264),this.__$write(";\nbox-shadow: inset 0 1px 1px ",264),this.__$write($blackPartialOpaque,265),this.__$write(", 0 0 15px ",265),this.__$write($blueFocusShadow2,265),this.__$write(";\nborder: 1px solid;\n}\n\n.filter-container .header-text-filter {\ndisplay: block;\ncursor: pointer;\ntext-align: left;\nfont-weight: bold;\n}\n\n.bound-table-actionbar{\nmargin:0.5em 0;\n}\n\n.bound-table-panel-filter-icon {\nposition: absolute;\nright: 10px;\ntop: 13px;\n}\n\n.btn-default-filter{\nfont-weight: ",265),this.__$write(this.$strong,287),this.__$write(";\ntext-align:left;\nwidth:100%;\n}\n\n.filter-indicator .icon-trash {\ncolor: ",287),this.__$write(this.$grayDarken,293),this.__$write(";\n}\n\n.filter-indicator .icon-trash:hover {\ncolor: ",293),this.__$write(this.$grayDark,297),this.__$write(";\n}\n\n.filter-indicator i {\nmargin: 0 5px;\n}\n\n.header-text-filter {\nmargin-right:20px;\n}\n\n.filter-indicator-container{\nposition: relative;\ndisplay: block;\n}\n\n.filter-indicator{\ncolor: ",297),this.__$write(this.$blueDark,314),this.__$write(" ;\nfont-weight: ",314),this.__$write(this.$strong,315),this.__$write(";\ndisplay: inline-block;\nline-height: 27px;\npadding: 5px 0;\n}\n\n.bound-table-panel-filter .btn-default {\nwidth: 100%;\nbox-shadow: none;\n}\n\n.bound-table-filters-container{\nbackground-color:",315),this.__$write(this.$white,327),this.__$write(";\nz-index: 999991;\nposition:absolute;\nmargin-top: 0;\n}\n\n.filters-panel-btn{\nfloat:right;\nmargin-bottom:10px;\n}\n\n.filters-panel-btn i{\nmargin-right: 10px;\n}\n\n.panel-heading-filter {\nposition: absolute;\nleft: 0;\nheight: 44px;\nz-index: 999;\npadding: 12px 10px;\n-webkit-appearance: none;\n-moz-appearance: none;\nappearance: none;\ntext-indent: 0.01px;\ntext-overflow: '';\nbackground: none;\nline-height: 18px;\ntext-align: left;\n}\n\n.filter-container{\nbackground-color:",327),this.__$write(this.$gray,359),this.__$write(";\ntransition: background-color 350ms ease-in-out;\nborder: 1px solid ",359),this.__$write($grayBorder,361),this.__$write(";\n-webkit-box-shadow: 1px 1px 3px ",361),this.__$write($grayLightShade,362),this.__$write(";\nbox-shadow: 1px 1px 3px ",362),this.__$write($grayLightShade,363),this.__$write(";\nz-index: 999992;\nposition: relative;\n}\n\n.filter-container:hover{\nbackground-color: ",363),this.__$write(this.$grayLighten,369),this.__$write(";\n}\n\n.filters-panel-action-btn{\nbackground:",369),this.__$write(this.$grayLighten,373),this.__$write(";\npadding-top: 10px;\n}\n\n.filter-button {\nposition: absolute;\nwidth: 100px;\nheight:20px;\nbackground: ",373),this.__$write(this.$green,381),this.__$write(";\n}\n\n.shortcut-container {\nclear:both;\nmin-height:44px;\npadding: 12px 10px;\n}\n\n.shortcut-container label {\nmargin-bottom: 0;\n}\n\n.shortcut-container>* {\nz-index: 12;\n}\n\n.icon-filter, .header-text-filter, .shortcut {\nposition: relative;\nzoom:1;\ndisplay:inline;\n}\n\n.shortcut {\nposition: relative;\nwidth:10px;\nheight: 10px;\nbackground: ",381),this.__$write(this.$blue,408),this.__$write(";\n}\n\n.filter {\nmargin-bottom: 0;\n}\n\n.panel-heading-filter:hover{\ncursor:pointer;\n}\n\n.filters-panel-btn .btn{\nmargin-right:20px;\n}\n\n.availability-filters .icon-row-filters {\nmargin-top: 30px;\nfont-size:300%;\ntext-align:center;\ncolor:",408),this.__$write(this.$gray,427),this.__$write(";\n}\n\n.filter-slider, .filter-switch {\npadding-right: 20px;\npadding-left: 20px;\npadding-top: 20px;\n}\n\n.bound-table-actionbar .form-group > select{\npadding-right: 0;\n-webkit-box-shadow: 3px 3px 1px ",427),this.__$write($grayLightShade,438),this.__$write(";\nbox-shadow: 3px 3px 1px ",438),this.__$write($grayLightShade,439),this.__$write(";\n}\n\n.bound-table-actionbar .feedback-no-label.icon-sort{\ncolor: ",439),this.__$write(this.$grayDarken,443),this.__$write(";\n}\n\n",443),this.__$write(container,446),this.__$write(" .bound-table-filter {\nz-index: 999992;\n}\n\n.availability-form-control option {\ntext-transform:capitalize;\n}\n\n.filter,\n.filter-row {\npadding: 0;\n}\n\n.filter-result {\npadding: 13px 10px 11px 10px;\nbackground-color: ",446),this.__$write(this.$white,461),this.__$write(";\nborder: solid 1px ",461),this.__$write($grayBorder,462),this.__$write(";\nborder-top: 0px;\n-webkit-box-shadow: 1px 1px 3px ",462),this.__$write($grayLightShade,464),this.__$write(";\nbox-shadow: 1px 1px 3px ",464),this.__$write($grayLightShade,465),this.__$write(";\ntext-align: left;\n}\n\n.availability-filters .filter-result { box-shadow: none; }\n\n",465),this.__$write(container,471),this.__$write(" .filter .btn-close-filter {\ncolor: ",471),this.__$write(this.$grayDarken,472),this.__$write(";\nfont-weight: bold;\nborder: 1px solid ",472),this.__$write($grayBorder,474),this.__$write(";\nborder-top: 0px;\n-webkit-box-shadow: 1px 1px 3px ",474),this.__$write($grayLightShade,476),this.__$write(";\nbox-shadow: 1px 1px 3px ",476),this.__$write($grayLightShade,477),this.__$write(";\n}\n\n.filter-result button {\nwidth: auto; margin-top: -8px;\n-webkit-box-shadow: 1px 1px 1px ",477),this.__$write($grayLightShade,482),this.__$write(";\nbox-shadow: 1px 1px 1px ",482),this.__$write($grayLightShade,483),this.__$write(";\n}\n\n.filter-row .checkbox, .filter-row .btn-close-filter {\nmin-height: 44px;\n}\n\n.filter-row .checkbox {\npadding: 11px 10px 11px 30px;\n}\n\n.overlay-filter {\nposition: absolute;\nheight: 100%;\nwidth: 100%;\nbackground: none;\n-webkit-transition: z-index 0.5s step-end, background 1s;\ntransition: z-index 0.5s step-end, background 1s;\nopacity: 0.3;\nz-index: -1;\n}\n\n\n.overlay-filter.overlay-active {\nbackground: ",483),this.__$write(this.$black,507),this.__$write(";\nz-index: 999991;\n-webkit-transition: z-index 0.5s step-start, background 1s;\ntransition: z-index 0.5s step-start, background 1s;\n}\n\n\n\n\n@media screen and (min-width: ",507),this.__$write(this.breakpoints.SM_MIN,516),this.__$write(") {\n",516),this.__$write(container,517),this.__$write(" .filter-container .shortcut-container {\npadding-left: 20px;\n}\n\n.bound-table-panel-filter-icon {\nright: 20px;\n}\n\n.filter-result {\npadding: 13px 20px 11px 20px;\n}\n\n.filter-row .checkbox {\npadding: 11px 20px 11px 40px;\n}\n}\n\n",517)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},__$initTemplate:function(){if(!this.$BaseCss.__$initTemplate.call(this))return!1;try{with(this)this.container=".vertical",this.squareSize="20px",this.extraLegHeight="34px",this.iconSize="14px",this.seatSelectedFontSize="12px",this.windowWidth="3px",this.squarePadding="2px",this.popupArrowSize="10px",this.leftRightPopupAlignment="30px"}catch(_ex){return this.$logError(this.EXCEPTION_IN_VARINIT,[this.$classpath],_ex),!1}return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/seatmap/resources/data/Facility.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.seatmap.resources.data.Facility",$statics:{emergencyExitCode:"",lavatoryCode:"",disabledToiletsCode:"",galleyCode:"",getCustomFacilityStyle:function(e){if(null!=e){if(e===this.emergencyExitCode)return"uicFacilityEmergencyExit";if(e===this.lavatoryCode)return"icon-seatmap-facility-toilet";if(e===this.disabledToiletsCode)return"uicFacilityDisabled";if(e===this.galleyCode)return"icon-seatmap-facility-galley"}return null},cloneFacility:function(e){return new plnextv2.utils.widgets.plnextLib.seatmap.resources.data.Facility(e.json.desc,e.json.code,e.location,e.position)}},$constructor:function(e,t,i,n){this.positionValues=["L","R","C","LC","RC"],this.locationValues=["F","R"],this.position=null,this.location=null,this.json={desc:e?e:"",code:t?t:"--",span:-1,colId:-1,escapeCorridor:!1,customStyle:plnextv2.utils.widgets.plnextLib.seatmap.resources.data.Facility.getCustomFacilityStyle(t)},n&&(aria.utils.Array.contains(this.positionValues,n)?this.position=n:this.$logError("Error while building facility. Wrong position value: "+n+". It should be: "+this.positionValues.join(", "))),i&&(aria.utils.Array.contains(this.locationValues,i)?this.location=i:this.$logError("Error while building facility. Wrong location value: "+i+". It should be: "+this.locationValues.join(", ")))},$prototype:{isFrontFacility:function(){return"F"===this.location?!0:!1},getJson:function(){return this.json},setStartColumnIndex:function(e){this.json.colId=e},setSpan:function(e){this.json.span=e},setNeedToEscapeCorridor:function(e){this.json.escapeCorridor=e},getPosition:function(){return this.position},setPosition:function(e){this.position=e}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/seatmap/resources/data/OneClickSelectionHelper.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.seatmap.resources.data.OneClickSelectionHelper",$dependencies:[],$statics:{COLWEIGHT:1,ROWWEIGHT:1,ROWLIMIT:3},$constructor:function(){},$prototype:{prepareSelectionGroups:function(e,t){for(var i=0;i<e.cabins.length;i++){var n=e.cabins[i];this._getOneSeatSelectionGroups(n,t);for(var s=0;s<n.cabinMap.length;s++)this._analyzeCurrentSeatRow(n,s)}},_analyzeCurrentSeatRow:function(e,t){for(var i=e.cabinMap[t].rowData,n=0;n<i.length;n++){var s=i[n].seat;if(s&&s.isAvailable){var a=this._findBestMolecule(e,{row:t,col:n});this._computeMoleculeCharacteristics(a),this._computeMoleculePrice(a),s.bestMolecule=a}}},_findBestMolecule:function(e,t){for(var i=0;i<e.listOfOneSeatSelectionGroups.length;i++)for(var n=e.listOfOneSeatSelectionGroups[i],s=0;s<n.seats.length;s++){var a=n.seats[s];if(t.col===a.col&&t.row===a.row)return n}},_getOneSeatSelectionGroups:function(e,t){for(var i=[],n=0;n<e.cabinMap.length;n++){var s=e.cabinMap[n];if(!s.emptyRow)for(var a=0;a<s.rowData.length;a++)this._createAtomFromSeat(i,e,n,a)}var r=this._returnMolecules(i,t);r.sort(function(e,t){return e.distance-t.distance}),e.listOfOneSeatSelectionGroups=r},_createTwoSeatsAtoms:function(e,t,i,n,s,a){var r,o,l,c,d,p,_;t&&t.isAvailable&&i&&(r=n.rowIndexes[s]+n.columnIndexes[a],o=n.rowIndexes[s]+n.columnIndexes[a+1],l=n.cabinMap[s].rowData[a].seat.characteristics,c=n.cabinMap[s].rowData[a+1].seat.characteristics,n.cabinMap[s].rowData[a].seat.priceList.length>0&&n.cabinMap[s].rowData[a].seat.priceList[0].value?(d=n.cabinMap[s].rowData[a].seat.priceList[0].value,_=n.cabinMap[s].rowData[a].seat.priceList[0].currency):d=0,n.cabinMap[s].rowData[a+1].seat.priceList.length>0&&n.cabinMap[s].rowData[a+1].seat.priceList[0].value?(p=n.cabinMap[s].rowData[a+1].seat.priceList[0].value,_=n.cabinMap[s].rowData[a+1].seat.priceList[0].currency):p=0,e.push({size:2,row:s,colLeft:a,colRight:a+1,seats:[{row:s,col:a,seatId:r,characteristics:l,price:d},{row:s,col:a+1,seatId:o,characteristics:c,price:d}],currency:_,price:d+p}))},_createThreeSeatsAtoms:function(e,t,i,n,s,a,r){var o,l,c,d,p,_,h,u,m,f;t&&t.isAvailable&&i&&n&&(o=s.rowIndexes[a]+s.columnIndexes[r],l=s.rowIndexes[a]+s.columnIndexes[r+1],d=s.cabinMap[a].rowData[r].seat.characteristics,p=s.cabinMap[a].rowData[r+1].seat.characteristics,c=s.rowIndexes[a]+s.columnIndexes[r+2],_=s.cabinMap[a].rowData[r+2].seat.characteristics,s.cabinMap[a].rowData[r+2].seat.priceList.length>0&&s.cabinMap[a].rowData[r+2].seat.priceList[0].value?(m=s.cabinMap[a].rowData[r+2].seat.priceList[0].value,f=s.cabinMap[a].rowData[r+2].seat.priceList[0].currency):m=0,e.push({size:3,row:a,colLeft:r,colRight:r+2,seats:[{row:a,col:r,seatId:o,characteristics:d,price:h},{row:a,col:r+1,seatId:l,characteristics:p,price:u},{row:a,col:r+2,seatId:c,characteristics:_,price:m}],currency:f,price:h+u+m}))},_createAtomFromSeat:function(e,t,i,n){var s=t.cabinMap[i],a=s.rowData[n].seat,r=this._getSeat(s.rowData[n+1]),o=this._getSeat(s.rowData[n+2]);this._createTwoSeatsAtoms(e,a,r,t,i,n),this._createThreeSeatsAtoms(e,a,r,o,t,i,n)},_getSeat:function(e){return e&&e.seat&&e.seat.isAvailable?e.seat:void 0},_returnMolecules:function(e,t){var i=[];switch(t){case 2:i=[[2]];break;case 3:i=[[3]];break;case 4:i=[[2,2]];break;case 5:i=[[3,2]];break;case 6:i=[[3,3],[2,2,2]];break;case 7:i=[[3,2,2]];break;case 8:i=[[3,3,2],[2,2,2,2]];break;case 9:i=[[3,3,3],[3,2,2,2]]}for(var n=[],s=0;s<i.length;s++)this._combinationsFromSeatmap(e,i[s],n);return n},_computeMoleculeCharacteristics:function(e){if(e&&e.seats){for(var t={},i=0;i<e.seats.length;i++){var n=e.seats[i];this._computeSeatCharacteristics(t,n)}e.computedCharacteristics=t}},_computeMoleculePrice:function(e){if(e&&e.seats){for(var t=0,i=0;i<e.atoms.length;i++){var n=e.atoms[i];t+=n.price}e.computedPrice=t,e.computedPriceCurrency=e.atoms[0].currency}},_computeSeatCharacteristics:function(e,t){for(var i=0;i<t.characteristics.length;i++){var n=t.characteristics[i];e[n]?e[n]++:e[n]=1}},_combinationsFromSeatmap:function(e,t,i){var n=this,s=function(e,i,a,r){if(0===e)return void r.push(a);for(var o=0;o<i.length;o++)if(i[o].size===t[t.length-e]&&n._testFusionValidity(a.atoms,i[o],n)){var l=i.slice(0,o),c=i.slice(o+1);s(e-1,l.concat(c),{atoms:a.atoms.concat(i[o]),seats:a.seats.concat(i[o].seats),distance:a.distance+n._returnDistanceBetweenMoleculeAndAtom(a.atoms,i[o],n)},r)}};return s(t.length,e,{atoms:[],seats:[],distance:0},i),i},_testFusionValidity:function(e,t,i){for(var n=0;n<e.length;n++){var s=e[n];if(i._testOverlap(s,t)||Math.abs(t.row-s.row)>this.ROWLIMIT)return!1}return!0},_returnDistanceBetweenMoleculeAndAtom:function(e,t,i){for(var n=0,s=0;s<e.length;s++){var a=e[s];n+=i._returnDistanceBetweenTwoAtoms(a,t)}return n},_returnDistanceBetweenTwoAtoms:function(e,t){var i=0;return i+=(e.size+t.size)*this.COLWEIGHT*(Math.max(0,e.colLeft-t.colRight)+Math.max(0,t.colLeft-e.colRight)),i+=(e.size+t.size)*this.ROWWEIGHT*Math.abs(e.row-t.row),i+=Math.abs(e.colLeft-t.colLeft)/10,i+=Math.abs(e.colRight-t.colRight)/10},_testOverlap:function(e,t){return t.row===e.row&&(t.colLeft>=e.colLeft&&t.colLeft<=e.colRight||t.colRight>=e.colLeft&&t.colRight<=e.colRight||t.colLeft<=e.colLeft&&t.colRight>=e.colRight)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/seatmap/resources/data/RowDescriptorManager.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.seatmap.resources.data.RowDescriptorManager",$dependencies:["plnextv2.utils.widgets.plnextLib.seatmap.resources.data.rowDescriptor.OneCorridor","plnextv2.utils.widgets.plnextLib.seatmap.resources.data.rowDescriptor.TwoCorridor"],$constructor:function(e,t){this.frontRowDescriptor=null,this.rearRowDescriptor=null,this.numberCorridor=t.length,this.corridorDescriptor=t,this.columnsLetters=e,this.json={front:null,rear:null,frontThick:null,rearThick:null}},$prototype:{reset:function(){this.frontRowDescriptor&&this.frontRowDescriptor.reset(),this.rearRowDescriptor&&this.rearRowDescriptor.reset()},addFacility:function(e){e.isFrontFacility()?this._getFrontRowDescriptor().addToSubRow(e):this._getRearRowDescriptor().addToSubRow(e)},getJson:function(){var e,t={};return e=this._getFrontRowDescriptor(),e&&(t.frontThick=e.getFacilityRowHeight(),t.front=e.renderAsJSON()),e=this._getRearRowDescriptor(),e&&(t.rearThick=e.getFacilityRowHeight(),t.rear=e.renderAsJSON()),t},_getFrontRowDescriptor:function(){if(!this.frontRowDescriptor)if(1===this.numberCorridor)this.frontRowDescriptor=new plnextv2.utils.widgets.plnextLib.seatmap.resources.data.rowDescriptor.OneCorridor(this.columnsLetters,this.corridorDescriptor);else{if(2!==this.numberCorridor)throw new Error("Can't get frontRowDescriptor - can't determine number of corridors properly.");this.frontRowDescriptor=new plnextv2.utils.widgets.plnextLib.seatmap.resources.data.rowDescriptor.TwoCorridor(this.columnsLetters,this.corridorDescriptor)}return this.frontRowDescriptor},_getRearRowDescriptor:function(){if(!this.rearRowDescriptor)if(1===this.numberCorridor)this.rearRowDescriptor=new plnextv2.utils.widgets.plnextLib.seatmap.resources.data.rowDescriptor.OneCorridor(this.columnsLetters,this.corridorDescriptor);else{if(2!==this.numberCorridor)throw new Error("Can't get rearRowDescriptor - can't determine number of corridors properly.");this.rearRowDescriptor=new plnextv2.utils.widgets.plnextLib.seatmap.resources.data.rowDescriptor.TwoCorridor(this.columnsLetters,this.corridorDescriptor)}return this.rearRowDescriptor}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/seatmap/resources/data/rowDescriptor/CenterSubRow.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.seatmap.resources.data.rowDescriptor.CenterSubRow",$extends:"plnextv2.utils.widgets.plnextLib.seatmap.resources.data.rowDescriptor.SubRow",$dependencies:["plnextv2.utils.widgets.plnextLib.seatmap.resources.data.Facility"],$constructor:function(e,t){this.$SubRow.constructor(e,t);var i=plnextv2.utils.widgets.plnextLib.seatmap.resources.data.rowDescriptor.SubRow;this.subrow={},this.subrow.center=new i(e,t),this.length>1?(middleIndex=Math.floor(this.length/2)+e,this.subrow.left=new i(e,middleIndex-1)):(middleIndex=e,this.subrow.left=new i(e,middleIndex)),this.subrow.right=new i(middleIndex,t)},$prototype:{addFacility:function(e){e.setStartColumnIndex(this.initialColumnIndex),e.setSpan(this.length),this.length<=1&&e.setPosition("C"),"LC"===e.getPosition()?this.subrow.left.addFacility(e):"RC"===e.getPosition()?this.subrow.right.addFacility(e):"C"===e.getPosition()?this.subrow.center.addFacility(e):this.$logError("A left or right facility has been added to a centered placeholder subrow.")},reset:function(){this.subrow.center.facilitiesList=[],this.subrow.left.facilitiesList=[],this.subrow.right.facilitiesList=[]},isEmpty:function(){return this.subrow.center.isEmpty()&&this.subrow.left.isEmpty()&&this.subrow.right.isEmpty()?!0:!1},getHeight:function(){var e=centerFacilityList.size(),t=Math.max(leftCenterFacilityList.size(),rightCenterFacilityList.size());return e+t},getFacility:function(e){var t=[],i=null;if(this.isEmpty())t.push(this.getEmptyFacility());else if(this.subrow.center.isEmpty()){var n=this.subrow.left.getFacility(e),s=this.subrow.right.getFacility(e);n||s?(n||(n=this.subrow.left.getEmptyFacility()),n.setNeedToEscapeCorridor(!0),t.push(n),s||(s=this.subrow.right.getEmptyFacility()),t.push(s)):(i=this.subrow.right.getEmptyFacility(),t.push(i))}else t.push(this.subrow.center.getFacility(e));return t},getEmptyFacility:function(){var e=new plnextv2.utils.widgets.plnextLib.seatmap.resources.data.Facility;return e.setSpan(this.length),e.setStartColumnIndex(this.initialColumnIndex),e},contains:function(e){return this.subrow.right.contains(e)||this.subrow.left.contains(e)||this.subrow.center.contains(e)},size:function(){return Math.max(this.subrow.right.size(),this.subrow.left.size(),this.subrow.center.size())}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/seatmap/resources/data/rowDescriptor/OneCorridor.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.seatmap.resources.data.rowDescriptor.OneCorridor",$dependencies:["plnextv2.utils.widgets.plnextLib.seatmap.resources.data.Facility","plnextv2.utils.widgets.plnextLib.seatmap.resources.data.rowDescriptor.SubRow"],$constructor:function(e,t){this.leftSubRow=null,this.rightSubRow=null;for(var i=plnextv2.utils.widgets.plnextLib.seatmap.resources.data.rowDescriptor.SubRow,n=e.length,s=n,a=0;n>a;a++){var r=e[a];if(aria.utils.Array.contains(t,r.index)){var o=a+1;this.leftSubRow=new i(0,o-1),this.rightSubRow=new i(o+1,s);break}}this.centerSubRow=new i(0,s)},$prototype:{getFacilityRowHeight:function(){return Math.max(this.leftSubRow.size(),this.rightSubRow.size(),this.centerSubRow.size())},reset:function(){this.leftSubRow.facilitiesList=[],this.rightSubRow.facilitiesList=[],this.centerSubRow.facilitiesList=[]},addToSubRow:function(e){var t=e.getPosition();if("L"===t||"LC"===t)this.leftSubRow.addFacility(e);else if("R"===t||"RC"===t)this.rightSubRow.addFacility(e);else if("C"===t){var i=plnextv2.utils.widgets.plnextLib.seatmap.resources.data.Facility.cloneFacility(e);this.leftSubRow.addFacility(e),this.rightSubRow.addFacility(i)}},renderAsJSON:function(){var e=[];if(this.centerSubRow.isEmpty()){var t=Math.max(this.leftSubRow.size(),this.rightSubRow.size());for(i=0;t>i;i++){var n=[];n.push(this.leftSubRow.getFacility(i).getJson()),n.push(this.rightSubRow.getFacility(i).getJson()),n.sort(function(e,t){return e.colId>t.colId}),e.push(n)}}else{var t=this.centerSubRow.size();for(i=0;t>i;i++){var s=this.centerSubRow.getFacility(i).getJson();s.put("span",this.centerSubRow.length),e.push([s])}}return e}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/seatmap/resources/data/rowDescriptor/SubRow.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.seatmap.resources.data.rowDescriptor.SubRow",$dependencies:["plnextv2.utils.widgets.plnextLib.seatmap.resources.data.Facility"],$constructor:function(e,t){this.facilitiesList=[],this.length=0,this.firstIndex=e,this.lastIndex=t,this.initialColumnIndex=e;var i=t-e+1;i>0?this.length=i:this.$logError("Issue while setting up subrow first and last index in the columns array. First index is greater than lastindex(first/last: "+e+"/"+t+")")},$prototype:{size:function(){return this.facilitiesList.length},addFacility:function(e){e.setStartColumnIndex(this.initialColumnIndex),e.setSpan(this.length),this.facilitiesList.push(e)},isEmpty:function(){return 0===this.facilitiesList.length},contains:function(e){return"undefined"!=typeof this.facilitiesList[e]},getFacility:function(e){return this.facilitiesList[e]?this.facilitiesList[e]:this.getEmptyFacility()},getEmptyFacility:function(){var e=new plnextv2.utils.widgets.plnextLib.seatmap.resources.data.Facility;return e.setSpan(this.length),e.setStartColumnIndex(this.initialColumnIndex),e}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/seatmap/resources/data/rowDescriptor/TwoCorridor.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.seatmap.resources.data.rowDescriptor.TwoCorridor",$dependencies:["plnextv2.utils.widgets.plnextLib.seatmap.resources.data.rowDescriptor.SubRow","plnextv2.utils.widgets.plnextLib.seatmap.resources.data.rowDescriptor.CenterSubRow"],$constructor:function(e,t){for(var i=e.length,n=-1,s=-1,a=0;i>a&&(-1===n||-1===s);a++){var r=e[a];aria.utils.Array.contains(t,r.index)&&(-1===n?n=a+1:s=a+2)}var o=i+1,l=plnextv2.utils.widgets.plnextLib.seatmap.resources.data.rowDescriptor.SubRow,c=plnextv2.utils.widgets.plnextLib.seatmap.resources.data.rowDescriptor.CenterSubRow;this.leftSubRow=new l(0,n-1),this.centerSubRow=new c(n+1,s-1),this.rightSubRow=new l(s+1,o)},$prototype:{getFacilityRowHeight:function(){return Math.max(this.leftSubRow.size(),this.rightSubRow.size(),this.centerSubRow.size())},reset:function(){this.leftSubRow.facilitiesList=[],this.rightSubRow.facilitiesList=[],this.centerSubRow.reset()},addToSubRow:function(e){var t=e.getPosition();"L"===t?this.leftSubRow.addFacility(e):"R"===t?this.rightSubRow.addFacility(e):("C"===t||"LC"===t||"RC"===t)&&this.centerSubRow.addFacility(e)},renderAsJSON:function(){for(var e=[],t=Math.max(this.leftSubRow.size(),this.rightSubRow.size(),this.centerSubRow.size()),i=0;t>i;i++){var n=[];n.push(this.leftSubRow.getFacility(i).getJson()),n.push(this.rightSubRow.getFacility(i).getJson());for(var s=this.centerSubRow.getFacility(i),a=0;a<s.length;a++)n.push(s[a].getJson());n.sort(function(e,t){return e.colId-t.colId}),e.push(n)}return e}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/seatmap/resources/lib/Common.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/widgets/plnextLib/seatmap/resources/lib/CommonScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.seatmap.resources.lib.Common",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$CommonScript.constructor.call(this)},$destructor:function(){this.$CommonScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_drawWingSquare:function(row,rowIndex,cabin,wingPosition,isNotFacilityRow,isFrontFacility){try{with(this)1==row.isOverWing?cabin.firstWingIndex==rowIndex?isNotFacilityRow?this.macro_displayWing(wingPosition,"uicFirstWing"+wingPosition):isFrontFacility?this.macro_displayEmptySquare():this.macro_displayWing(wingPosition,"uicWing"):cabin.lastWingIndex==rowIndex?isNotFacilityRow?this.macro_displayWing(wingPosition,"uicLastWing"+wingPosition):isFrontFacility?this.macro_displayWing(wingPosition,"uicWing"):this.macro_displayEmptySquare():this.macro_displayWing(wingPosition,"uicWing"):(this.__$write('\n<td>\n<div aria-hidden="true"\naria-label=\'',36),this.__$write(wingPosition,38),this.__$write(" ",38),this.__$write(this._i18n.getLabel("tx_pltg_text_seatmap_oftheplane"),38),this.__$write('\'\nclass="uicEmptySquare uicSquare">\n<span class="plnext-sr-only">',38),this.__$write(wingPosition,40),this.__$write(" ",40),this.__$write(this._i18n.getLabel("tx_pltg_text_seatmap_oftheplane"),40),this.__$write("</span>\n</div>\n</td>\n",40))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["drawWingSquare",__filename,this["aria:currentLineNumber"]],_ex)}},macro_drawColumnSquare:function(options){try{with(this)options.square.seat?this.macro_displaySeat(options):options.square.facility?this.macro_displayNDCFacility(options):options.square.corridor&&this.macro_displayCorridor()}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["drawColumnSquare",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayEmptySquare:function(){try{with(this)this.__$write('\n<td>\n<div aria-hidden="true" class="uicEmptySquare uicSquare"></div>\n</td>\n',61)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayEmptySquare",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayWing:function(wingPosition,wingClass){try{with(this){var wingLabel=this._i18n.getLabel("tx_pltg_text_seatmap_wing");this.__$write('\n<td>\n<div aria-hidden="true"\naria-label=\'',68),this.__$write(wingPosition,70),this.__$write(" ",70),this.__$write(wingLabel,70),this.__$write("'\ntitle=\"",70),this.__$write(wingLabel,71),this.__$write('"\nclass="',71),this.__$write(wingClass,72),this.__$write(' uicSquare">\n<span class="plnext-sr-only">',72),this.__$write(wingPosition,73),this.__$write(" ",73),this.__$write(wingLabel,73),this.__$write("</span>\n</div>\n</td>\n",73)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayWing",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySeat:function(options){try{with(this){var seat=options.square.seat;seat.isMissing?this.macro_displayMissingSeat():(this.__$write('\n<td id="td',83),this.__$write(options.seatId,83),this.__$write('">\n',83),this.isSeatWithExtraLeg(seat)&&this.macro_displayExtraLegSection(options),this.__$write('\n<div id="seat',87),this.__$write(options.seatId,87),this.__$write('"\nclass="uicSquare ',87),this.__$write(formatSeatClasses(options),88),this.__$write('"\ndata-seat="',88),this.__$write(options.seatId,89),this.__$write('"\ntabindex="-1"\n\n',89),options.seatMetaData&&(this.__$write('\ndata-seatmetadata="',93),this.__$write(options.seatMetaData,93),this.__$write('"\n',93)),options.seatMetaData&&(seat.isAvailable||options.allowOccupiedSeatSelection)||this.__$write('\naria-hidden="true"\n',96),seat.isSelected&&this.__$write('\ndata-seat-selected="true"\n',99),seat.isDiscounted&&seat.isAvailable&&(this.__$write('\nstyle="color: ',102),this.__$write(this.getDiscountedSeatColor(seat),102),this.__$write(';"\n',102)),seat.isAvailable&&this.__$write('\ndata-seat-selectable="true"\n',105),seat.isRestricted&&this.__$write('\ndata-seat-restricted="true"\n',108),(seat.isAvailable||seat.isRestricted)&&(this.__$statementOnEvent("mouseenter",this.$normCallback({fn:"showDescriptionAction",scope:this,args:{id:"seatInfoPopup"+options.seatId,idParent:"td"+options.seatId,travellers:options.travellers,seatID:"seat"+options.seatId,travellerList:options.travellerList,bestMolecule:seat.bestMolecule,displayPopup:options.displayPopup,isStandardSelection:options.isStandardSelection}}),111),this.__$statementOnEvent("focus",this.$normCallback({fn:"showDescriptionAction",scope:this,args:{id:"seatInfoPopup"+options.seatId,idParent:"td"+options.seatId,travellers:options.travellers,seatID:"seat"+options.seatId,travellerList:options.travellerList,bestMolecule:seat.bestMolecule,displayPopup:options.displayPopup,isStandardSelection:options.isStandardSelection}}),125),this.__$statementOnEvent("mouseleave",this.$normCallback({fn:"mouseOutAction",scope:this,args:{id:"seatInfoPopup"+options.seatId,bestMolecule:seat.bestMolecule,isStandardSelection:options.isStandardSelection}}),137),this.__$statementOnEvent("blur",this.$normCallback({fn:"mouseOutAction",scope:this,args:{id:"seatInfoPopup"+options.seatId,bestMolecule:seat.bestMolecule,isStandardSelection:options.isStandardSelection}}),146)),this.__$write("\n>\n",154),seat.isSelected?this.macro_displaySeatSelectedSR(options):seat.isAvailable?this.macro_displaySeatInformationSR(options.seatId,seat,options.dictionary,options.isStandardSelection):seat.isRestricted?this.macro_displaySeatRestrictedWarningSR(options.seatId,seat):this.macro_displaySeatUnavailableSR(options.seatId,seat),this.__$write("\n</div>\n",164),options.displayPopup&&(seat.isAvailable||seat.isRestricted)&&this.macro_displaySeatPopup(options.seatId,seat,options.dictionary,options.isStandardSelection),this.__$write("\n</td>\n",168))}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySeat",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayExtraLegSection:function(options){try{with(this){var seat=options.square.seat;this.__$write('\n<section class="',174),this.__$write(this.CLASS_SEAT_EXTRA_LEG,174),this.__$write('"\n',174),this.__$statementOnEvent("mouseenter",this.$normCallback({fn:"showDescriptionAction",scope:this,args:{id:"seatInfoPopup"+options.seatId,idParent:"td"+options.seatId,travellers:options.travellers,seatID:"seat"+options.seatId,travellerList:options.travellerList,bestMolecule:seat.bestMolecule,displayPopup:options.displayPopup,isStandardSelection:options.isStandardSelection}}),175),this.__$statementOnEvent("focus",this.$normCallback({fn:"showDescriptionAction",scope:this,args:{id:"seatInfoPopup"+options.seatId,idParent:"td"+options.seatId,travellers:options.travellers,seatID:"seat"+options.seatId,travellerList:options.travellerList,bestMolecule:seat.bestMolecule,displayPopup:options.displayPopup,isStandardSelection:options.isStandardSelection}}),189),this.__$statementOnEvent("mouseleave",this.$normCallback({fn:"mouseOutAction",scope:this,args:{id:"seatInfoPopup"+options.seatId,bestMolecule:seat.bestMolecule,isStandardSelection:options.isStandardSelection}}),203),this.__$statementOnEvent("blur",this.$normCallback({fn:"mouseOutAction",scope:this,args:{id:"seatInfoPopup"+options.seatId,bestMolecule:seat.bestMolecule,isStandardSelection:options.isStandardSelection}}),212),this.__$write(">\n</section>\n",220)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayExtraLegSection",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayMissingSeat:function(){try{with(this)this.__$write('\n<td>\n<div class="uicEmptyArea uicSquare"\naria-hidden="true"\naria-label=\'',225),this.__$write(this._i18n.getLabel("tx_pltg_text_seatmap_emptyarea"),228),this.__$write('\'>\n<span class="plnext-sr-only">',228),this.__$write(this._i18n.getLabel("tx_pltg_text_seatmap_emptyarea"),229),this.__$write("</span>\n</div>\n</td>\n",229)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayMissingSeat",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayFacility:function(subRow,spanType,displayLettersOnFacilities){try{with(this)"--"!=subRow.code?(this.__$write("\n<td ",239),this.__$write(spanType,239),this.__$write('="',239),this.__$write(subRow.span,239),this.__$write('"\nclass="',239),subRow.customStyle&&this.__$write(subRow.customStyle,240),this.__$write(' uicZoneFacility uicFacilityTooltip uicSquare">\n',240),displayLettersOnFacilities&&(this.__$write('\n<span aria-hidden="true">',242),this.__$write(subRow.code,242),this.__$write("</span>\n",242)),this.__$write('\n<span class="plnext-sr-only">',244),this.__$write(subRow.desc,244),this.__$write("</span>\n</td>\n",244)):(this.__$write("\n<td ",247),this.__$write(spanType,247),this.__$write('="',247),this.__$write(subRow.span,247),this.__$write('" aria-label="corridor of size ',247),this.__$write(subRow.span,247),this.__$write('" class="uicCorridor">\n<div aria-hidden="true"><span class="plnext-sr-only">corridor of size ',247),this.__$write(subRow.span,248),this.__$write("</span></div>\n</td>\n",248))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayFacility",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayNDCFacility:function(options){try{with(this){var facility=options.square.facility;this.__$write('\n<td>\n<div class="',258),this.__$write(facility.style?facility.style:"",259),this.__$write(' uicSeatFacility uicFacilityTooltip uicSquare"\naria-hidden="true"\naria-label=\'',259),this.__$write(this._i18n.getLabel("tx_pltg_text_SeatMapLegendFacility"),261),this.__$write("'\n",261),facility.title&&(this.__$write('\ntitle="',263),this.__$write(facility.title,263),this.__$write('"\n',263)),this.__$write("\n>\n",265),options.displayLettersOnFacilities&&(this.__$write('\n<span aria-hidden="true">',267),this.__$write(facility.code,267),this.__$write("</span>\n",267)),this.__$write("\n</div>\n</td>\n",269)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayNDCFacility",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayCorridor:function(){try{with(this)this.__$write('\n<td>\n<div class="uicCorridor uicSquare"\naria-hidden="true"\naria-label="',274),this.__$write(this._i18n.getLabel("tx_pltg_text_seatmap_corridor"),277),this.__$write('">\n<span class="plnext-sr-only">',277),this.__$write(this._i18n.getLabel("tx_pltg_text_seatmap_corridor"),278),this.__$write("</span>\n</div>\n</td>\n",278)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayCorridor",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySeatUnavailableSR:function(seatId,seat){try{with(this){var exitRowSR="";aria.utils.Array.contains(seat.characteristics,"E")&&(exitRowSR=this._i18n.getLabel("tx_pltg_text_seatSituatedInExitRow_AX")),this.__$write('\n<span class="plnext-sr-only">\n',288),this.__$write(this._i18n.getLabel("tx_pltg_text_seat"),289),this.__$write(" ",289),this.__$write(seatId,289),this.__$write(" ",289),this.__$write(exitRowSR,289),this.__$write(" ",289),this.__$write(this._i18n.getLabel("tx_pltg_text_not_available"),289),this.__$write("\n</span>\n",290)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySeatUnavailableSR",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySeatSelectedSR:function(options){try{with(this){var passengerId=this.getPassengerIdForSeatSelected(options),seatLabel=this._i18n.getStringFromPattern("tx_pltg_pattern_seatmap_seatSelectedForTraveller",[options.seatId,passengerId]);this.__$write('\n\n<span class="plnext-sr-only">\n<button id="inputSR',297),this.__$write(options.seatId,299),this.__$write('">\n',299),this.__$write(seatLabel,300),this.__$write("\n</button>\n</span>\n",301)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySeatSelectedSR",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySeatInformationSR:function(seatId,seat,dictionary,isStandardSelection){try{with(this){var exitRowSR="";aria.utils.Array.contains(seat.characteristics,"E")&&(exitRowSR=this._i18n.getLabel("tx_pltg_text_seatSituatedInExitRow_AX"));var seatLabel=this._i18n.getLabel("tx_pltg_text_PressEnterToSit");!isStandardSelection&&seat.bestMolecule&&(seatLabel=this._i18n.getLabel("tx_pltg_text_PressEnterToSitGroup")),this.__$write('\n\n<span class="plnext-sr-only">\n',315),isStandardSelection||!isStandardSelection&&seat.bestMolecule?(this.__$write('\n<button id="inputSR',318),this.__$write(seatId,318),this.__$write('">\n',318),this.__$write(this._i18n.getLabel("tx_pltg_text_seat"),319),this.__$write(" ",319),this.__$write(seatId,319),this.__$write(" ",319),this.__$write(exitRowSR,319),this.__$write(" ",319),this.__$write(seatLabel,319),this.macro_displaySeatPrice(seat,!1,isStandardSelection),this.macro_displaySeatDiscountReason(seat,!1),this.macro_displaySeatCharacteristics(seat,dictionary,!1,isStandardSelection),this.__$write("\n</button>\n",323)):(this.__$write(this._i18n.getLabel("tx_pltg_text_seat"),325),this.__$write(" ",325),this.__$write(seatId,325),this.__$write(" ",325),this.__$write(exitRowSR,325),this.__$write(this._i18n.getLabel("tx_pltg_text_seat_not_available_for_groups"),326)),this.__$write("\n</span>\n",328)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySeatInformationSR",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySeatRestrictedWarningSR:function(seatId,seat){try{with(this)this.__$write('\n<span class="plnext-sr-only">\n',332),this.__$write(this._i18n.getStringFromPattern("tx_pltg_text_seatRestrictedWarningSR",[seatId]),333),this.__$write("\n</span>\n",334)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySeatRestrictedWarningSR",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySeatPopup:function(seatId,seat,dictionary,isStandardSelection){try{with(this){var oneClickSelectionClass=isStandardSelection?"":"popup-seat-one-click";this.__$write('\n<div aria-hidden="true"\nid="seatInfoPopup',339),this.__$write(seatId,340),this.__$write('"\nclass="seatInfoPopup ',340),this.__$write(oneClickSelectionClass,341),this.__$write(' popup-seat-align-top popup-seat-align-center hidden">\n',341),this.macro_displaySeatPopupTitle(seatId,seat,isStandardSelection),seat.isAvailable?(this.macro_displaySeatPrice(seat,!0,isStandardSelection),this.macro_displaySeatDiscountReason(seat,!0),this.macro_displaySeatCharacteristics(seat,dictionary,!0,isStandardSelection),isStandardSelection&&this.macro_displayRichMedia(seat)):seat.isRestricted&&this.macro_displaySeatRestrictedWarning(),this.__$write("\n</div>\n",353)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySeatPopup",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayRichMedia:function(seat){try{with(this)seat.mediaContent&&(this.__$write('\n<div class="popup-seat-media">\n',358),this.__$write(seat.mediaContent,359),this.__$write("\n</div>\n",360))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayRichMedia",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySeatRestrictedWarning:function(){try{with(this)this.__$write('\n<div class="popup-seat-restricted-warning">',365),this.__$write(this._i18n.getLabel("tx_pltg_text_seatRestrictedWarning"),365),this.__$write("</div>\n",365)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySeatRestrictedWarning",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySeatPopupTitle:function(seatId,seat,isStandardSelection){try{with(this)this.__$write('\n<div class="popup-seat-title">\n',369),!isStandardSelection&&seat.bestMolecule?this.__$write(this._i18n.getLabel("tx_pltg_text_seatmap_one_click_popup_title"),371):isStandardSelection?(this.__$write(this._i18n.getLabel("tx_pltg_text_seat"),375),this.__$write(" ",375),this.__$write(seatId,375)):this.__$write(this._i18n.getLabel("tx_pltg_text_seatmap_one_click_popup_warning"),373),this.__$write("\n</div>\n",377)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySeatPopupTitle",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySeatCharacteristics:function(seat,dictionary,inPopup,isStandardSelection){try{with(this){if(inPopup&&this.__$write('\n<ul class="popup-seat-characteristics">\n',382),!isStandardSelection&&seat.bestMolecule){if(seat.bestMolecule.computedCharacteristics){var __v_1=seat.bestMolecule.computedCharacteristics;void 0==seat.bestMolecule.computedCharacteristics&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,386]);var characteristic_ct=0;for(var characteristic_index in __v_1)if(__v_1.hasOwnProperty(characteristic_index)&&!this.$json.isMetadata(characteristic_index)){var characteristic=__v_1[characteristic_index];characteristic_ct++,this.isCharacteristicInDictionary(dictionary,characteristic_index)&&this.macro_displaySeatCharacteristic(characteristic_index,dictionary,inPopup,characteristic)}}}else{var __v_2=seat.characteristics;void 0==seat.characteristics&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,393]);for(var characteristic_ct=0,__v_3=__v_2.length,characteristic_index=0;__v_3>characteristic_index;characteristic_index++){var characteristic=__v_2[characteristic_index];characteristic_ct++,this.isCharacteristicInDictionary(dictionary,characteristic)&&this.macro_displaySeatCharacteristic(characteristic,dictionary,inPopup)}}inPopup&&this.__$write("\n</ul>\n",400)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySeatCharacteristics",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySeatCharacteristic:function(characteristic,dictionary,inPopup,number){try{with(this){var prefix=number?number+" &#215; ":"";inPopup?(this.__$write('\n<li class="popup-seat-characteristic">',407),this.__$write(prefix+dictionary[characteristic],407),this.__$write("</li>\n",407)):(this.__$write("\n&nbsp;",409),this.__$write(prefix+dictionary[characteristic],409))}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySeatCharacteristic",__filename,this["aria:currentLineNumber"]],_ex)}},macro_drawColumnLetter:function(columnLetter,rowCssClass){try{with(this)isCorridor(columnLetter)?this.__$write('\n<td>\n<span class="uicSquare"></span>\n</td>\n',419):(this.__$write('\n<td class="uicLetters ',415),this.__$write(rowCssClass,415),this.__$write('">\n<span aria-hidden="true">',415),this.__$write(columnLetter,416),this.__$write("</span>\n</td>\n",416))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["drawColumnLetter",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySeatPrice:function(seat,inPopup,isStandardSelection){try{with(this){if(inPopup){var seatDiscountedClass=seat.isDiscounted?"popup-seat-discounted":"";this.__$write('\n<div class="popup-seat-price ',428),this.__$write(seatDiscountedClass,428),this.__$write('">\n',428)}isStandardSelection?seat.isDiscounted?this.macro_displaySeatDiscountedPrice(seat.priceList[0],inPopup):seat.isChargeable?this.__$write(getFormattedPrice(seat.priceList[0].currency,seat.priceList[0].value),434):this.__$write(this._i18n.getLabel("tx_pltg_text_FreeOfCharge"),436):seat.bestMolecule&&(seat.bestMolecule.computedPrice>0?this.__$write(getFormattedPrice(seat.bestMolecule.computedPriceCurrency,seat.bestMolecule.computedPrice),440):this.__$write(this._i18n.getLabel("tx_pltg_text_FreeOfCharge"),442)),inPopup&&this.__$write("\n</div>\n",446)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySeatPrice",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySeatDiscountReason:function(seat,inPopup){try{with(this)seat.isDiscounted&&seat.priceList[0].discount&&seat.priceList[0].discount.reasons.length>0&&(inPopup&&this.__$write('\n<div class="popup-seat-discountReason">\n',454),this.__$write(seat.priceList[0].discount.reasons[0].label,456),inPopup&&this.__$write("\n</div>\n",458))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySeatDiscountReason",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySeatDiscountedPrice:function(priceInfo,inPopup){try{with(this){var discount=priceInfo.discount,formattedNonDiscountedPrice=getFormattedPrice(priceInfo.currency,discount.nonDiscountedTotalAmount),formattedDiscountedPrice=getFormattedPrice(priceInfo.currency,priceInfo.value),discountPattern="tx_pltg_pattern_SeatMapDiscountedPriceSR",discountRateStyle="";inPopup&&(discountPattern="tx_pltg_pattern_SeatMapPopupDiscountedPrice",discountRateStyle=this.getDiscountRateStyle(discount)),this.__$write(this._i18n.getStringFromPattern(discountPattern,[formattedNonDiscountedPrice,formattedDiscountedPrice,100*discount.percentage,discountRateStyle]),473)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySeatDiscountedPrice",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$macrolibs={},aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.widgets.plnextLib.seatmap.resources.lib.CommonScript,e)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/seatmap/resources/lib/CommonScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.seatmap.resources.lib.CommonScript",$dependencies:["aria.utils.String","plnextv2.utils.PriceUtils","plnextv2.utils.I18n"],$statics:{CORRIDOR_SUFFIX:"_CORRIDOR",CLASS_SEAT_CHARGEABLE:"icon-seat-chargeable",CLASS_SEAT_DISCOUNTED:"icon-seat-discount",CLASS_SEAT_AVAILABLE:"icon-seat-available",CLASS_SEAT_UNAVAILABLE:"icon-seat-unavailable",CLASS_SEAT_GROUP_UNAVAILABLE:"icon-seat-group-unavailable",CLASS_SEAT_RESTRICTED:"icon-ban-circle",CLASS_SEAT_CHARACTERISTIC_PREFIX:"uicCharacteristic",CLASS_SEAT_PASSENGER_NUMBER:"paxN",CLASS_SEAT_BEST_MOLECULE:"icon-seat-best-molecule",CHARACTERISTIC_SEAT_EXTRA_LEG:"L",CLASS_SEAT_EXTRA_LEG:"extra-leg",CLASS_POPUP_SEAT_ALIGN_LEFT:"popup-seat-align-left",CLASS_POPUP_SEAT_ALIGN_RIGHT:"popup-seat-align-right",CLASS_POPUP_SEAT_ALIGN_CENTER:"popup-seat-align-center",CLASS_POPUP_SEAT_ALIGN_TOP:"popup-seat-align-top",CLASS_POPUP_SEAT_ALIGN_BOTTOM:"popup-seat-align-bottom"},$constructor:function(){this._oldPopup,this._priceUtils=plnextv2.utils.PriceUtils,this._stringUtils=aria.utils.String,this._i18n=plnextv2.utils.I18n},$prototype:{formatSeatClasses:function(e){var t=e.square,i=t.seat,n=[];return i.isAvailable?(n.push(e.isStandardSelection||i.bestMolecule?i.isDiscounted?this.CLASS_SEAT_DISCOUNTED:i.isChargeable?this.CLASS_SEAT_CHARGEABLE:this.CLASS_SEAT_AVAILABLE:this.CLASS_SEAT_GROUP_UNAVAILABLE),i.priceRange&&e.displayPriceRanges&&n.push(i.priceRange.name)):n.push(i.isRestricted?this.CLASS_SEAT_RESTRICTED:this.CLASS_SEAT_UNAVAILABLE),this.addSelectedForPassengerClass(e,i,n),this.addSeatCharacteristicsClasses(e,i,n),n.join(" ")},addSelectedForPassengerClass:function(e,t,i){if(t.isSelected){var n=this.getPassengerIdForSeatSelected(e);n&&i.push(this.CLASS_SEAT_PASSENGER_NUMBER+n)}},getPassengerIdForSeatSelected:function(e){var t=e.travellers.inside.travellers;for(var i in t)if(!aria.utils.Json.isMetadata(i)&&t[i].seat===e.seatId)return i;return null},addSeatCharacteristicsClasses:function(e,t,i){e.displayCharacteristics&&t.characteristics.forEach(function(e){i.push(this.CLASS_SEAT_CHARACTERISTIC_PREFIX+e)},this)},showDescriptionAction:function(e,t){!t.isStandardSelection&&t.bestMolecule&&this._addBestMoleculeClass(t.bestMolecule),t.displayPopup&&this.showPopup(e,t)},showPopup:function(e,t){var i=aria.utils.Dom.getElementById(t.id),n=aria.utils.Dom.getElementById(t.idParent),s=aria.utils.Dom.getElementById("seatmap"),a=aria.utils.Dom.getElementById("dialog-content-serviceDialog");a||(a=document.querySelector(".popover-main")),this._removeClass(i,"hidden"),this._oldPopup&&this._oldPopup!=i&&this._hidePopup(e,{id:this._oldPopup.id}),this._oldPopup=i,this._computeVerticalPositioning(i,n,s,a),this._computeHorizontalPositioning(i,n,s,a),e.stopPropagation()},_applyPopupVerticalAlignment:function(e,t){this._removeClass(e,"popup-seat-align-top"),this._removeClass(e,"popup-seat-align-bottom"),this._addClass(e,t)},_applyPopupHorizontalAlignment:function(e,t){this._removeClass(e,"popup-seat-align-center"),this._removeClass(e,"popup-seat-align-left"),this._removeClass(e,"popup-seat-align-right"),this._addClass(e,t)},_addBestMoleculeClass:function(e){for(var t=0;t<e.seats.length;t++){var i="seat"+e.seats[t].seatId,n=aria.utils.Dom.getElementById(i);this._addClass(n,this.CLASS_SEAT_BEST_MOLECULE)}},mouseOutAction:function(e,t){!t.isStandardSelection&&t.bestMolecule&&this._removeBestMoleculeClass(t.bestMolecule),this._hidePopup(e,t)},_hidePopup:function(e,t){var i=aria.utils.Dom.getElementById(t.id);if(i&&null!=i){var n=aria.utils.Array.contains(i.className.split(" "),"hidden");i&&!n&&this._addClass(i,"hidden")}},_removeBestMoleculeClass:function(e){for(var t=0;t<e.seats.length;t++){var i="seat"+e.seats[t].seatId,n=aria.utils.Dom.getElementById(i);this._removeClass(n,this.CLASS_SEAT_BEST_MOLECULE)}},_getTopLeftSeatId:function(e){for(var t=e.seats[0].row,i=e.seats[0].col,n=e.seats[0].seatId,s=1;s<e.seats.length;s++)e.seats[s].row<t&&e.seats[s].col<i&&(t=e.seats[s].row,i=e.seats[s].col,n=e.seats[s].seatId);return n},onSeatClicked:function(e,t){this.scopeSeatMapView.onSeatClicked(e,t)},_addClass:function(e,t){var i=new aria.utils.ClassList(e);i.add(t),i.$dispose()},_removeClass:function(e,t){var i=new aria.utils.ClassList(e);i.remove(t),i.$dispose()},getFormattedPrice:function(e,t){return this._priceUtils.formatCurrency(t,{code:e,name:"",symbol:""})},seatWithExtraLeg:function(e){for(var t=e.rowData,i=0;i<t.length;i++)if(this.isSeatWithExtraLeg(t[i].seat))return!0;return!1},isCorridor:function(e){return this._stringUtils.endsWith(e,this.CORRIDOR_SUFFIX)},isSeatWithExtraLeg:function(e){return!!(e&&e.isAvailable&&aria.utils.Array.contains(e.characteristics,this.CHARACTERISTIC_SEAT_EXTRA_LEG))},isCharacteristicInDictionary:function(e,t){return e&&t&&e[t]},getDiscountedSeatColor:function(e){return e&&e.isDiscounted?e.priceList[0].discount.color:null},getDiscountRateStyle:function(e){return e&&e.color?"background-color:"+e.color+";":""}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/seatmap/resources/lib/Horizontal.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/widgets/plnextLib/seatmap/resources/lib/HorizontalScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.seatmap.resources.lib.Horizontal",$extends:require("plnextv2/utils/widgets/plnextLib/seatmap/resources/lib/Common.tml"),$constructor:function(){this.$Common.constructor.call(this),this.$HorizontalScript.constructor.call(this)},$destructor:function(){this.$HorizontalScript.$destructor.call(this),this.$Common.$destructor.call(this)},$prototype:{macro_drawSeatMap:function(deck,displayLettersOnFacilities,allowOccupiedSeatSelection,displayCharacteristics,travellers,travellerList,dictionary,displayPopup,displayPriceRanges,selectedSegment,isStandardSelection){try{with(this){this.__$write('\n\n\n<div class="plnext-sr-only" id="statusSR" aria-live="polite"></div>\n\n<table class="uicCabinContainer" border="0" cellspacing="0" cellpadding="0">\n<tbody>\n<tr>\n\n',8);var __v_1=deck.cabins;void 0==deck.cabins&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,16]);for(var cabin_ct=0,__v_2=__v_1.length,cabin_index=0;__v_2>cabin_index;cabin_index++){var cabin=__v_1[cabin_index];cabin_ct++,this.__$write('\n<td>\n<table  class="uicCabin" border="0" cellspacing="0" cellpadding="0">\n<tbody>\n\n\n\n\n<tr>\n<td class="uicSquare"></td>\n',17),this.macro_drawWing(cabin,"Top"),this.__$write('\n<td class="uicSquare"></td>\n</tr>\n\n\n\n\n\n<tr>\n<td class="uicWindowPlaceHolder"></td>\n',27),this.macro_drawWindows(cabin,"Top"),this.__$write('\n<td class="uicWindowPlaceHolder"></td>\n</tr>\n\n\n\n\n<tr class="top">\n<td class="uicSquare"></td>\n',37),this.macro_drawNumbers(cabin),this.__$write('\n<td class="uicSquare"></td>\n</tr>\n\n\n\n\n\n\n',46),plnextv2.utils.HtmlUtils.isRTLActivated()?this.macro_displaySeatmapRTL(cabin,cabin_index,displayLettersOnFacilities,allowOccupiedSeatSelection,displayCharacteristics,travellers,travellerList,dictionary,displayPopup,displayPriceRanges,selectedSegment,isStandardSelection):this.macro_displaySeatmap(cabin,cabin_index,displayLettersOnFacilities,allowOccupiedSeatSelection,displayCharacteristics,travellers,travellerList,dictionary,displayPopup,displayPriceRanges,selectedSegment,isStandardSelection),this.__$write('\n\n\n\n\n<tr td class="bottom">\n<td class="uicSquare"></td>\n',73),this.macro_drawNumbers(cabin),this.__$write('\n<td class="uicSquare"></td>\n</tr>\n\n\n\n\n<tr>\n<td class="uicWindowPlaceHolder"></td>\n',80),this.macro_drawWindows(cabin,"Bottom"),this.__$write('\n<td class="uicWindowPlaceHolder"></td>\n</tr>\n\n\n\n\n\n<tr>\n<td class="uicSquare"></td>\n',89),this.macro_drawWing(cabin,"Bottom"),this.__$write('\n<td class="uicSquare"></td>\n</tr>\n\n</tbody>\n</table>\n</td>\n',99)}this.__$write("\n</tr>\n</tbody>\n</table>\n",106)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["drawSeatMap",__filename,this["aria:currentLineNumber"]],_ex)}},macro_drawWing:function(cabin,position){try{with(this){var __v_3=cabin.cabinMap;void 0==cabin.cabinMap&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,112]);for(var row_ct=0,__v_4=__v_3.length,row_index=0;__v_4>row_index;row_index++){var row=__v_3[row_index];row_ct++;var row_number=cabin.rowIndexes[row_index];if(row.hasFacilities&&row.details.frontThick>0){var __v_5=row.details.front;void 0==row.details.front&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,116]);for(var facRow_ct=0,__v_6=__v_5.length,facRow_index=0;__v_6>facRow_index;facRow_index++){{__v_5[facRow_index]}facRow_ct++,this.macro_drawWingSquare(row,row_number,cabin,position,!1,!0)}}if(this.macro_drawWingSquare(row,row_number,cabin,position,!0,!1),row.hasFacilities&&row.details.rearThick>0){var __v_7=row.details.rear;void 0==row.details.rear&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,124]);for(var facRow_ct=0,__v_8=__v_7.length,facRow_index=0;__v_8>facRow_index;facRow_index++){{__v_7[facRow_index]}facRow_ct++,this.macro_drawWingSquare(row,row_number,cabin,position,!1,!1)}}}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["drawWing",__filename,this["aria:currentLineNumber"]],_ex)}},macro_drawNumbers:function(cabin){try{with(this){var __v_9=cabin.cabinMap;void 0==cabin.cabinMap&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,133]);for(var row_ct=0,__v_10=__v_9.length,row_index=0;__v_10>row_index;row_index++){var row=__v_9[row_index];if(row_ct++,row.hasFacilities&&row.details.frontThick>0){var __v_11=row.details.front;void 0==row.details.front&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,136]);for(var facRow_ct=0,__v_12=__v_11.length,facRow_index=0;__v_12>facRow_index;facRow_index++){var facRow=__v_11[facRow_index];facRow_ct++;var row_class_list="",__v_13=facRow;void 0==facRow&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,138]);for(var subRow_ct=0,__v_14=__v_13.length,subRow_index=0;__v_14>subRow_index;subRow_index++){var subRow=__v_13[subRow_index];subRow_ct++,"D"==subRow.code&&(row_class_list="exitDoor")}this.__$write('\n<td class="uicNumbers uicSquare lastColumn ',143),"exitDoor"==row_class_list&&this.__$write("icon-seatmap-exit",143),this.__$write('"></td>\n',143)}}if(this.__$write('\n\n<td class="uicNumbers uicSquare lastColumn"><span aria-hidden="true">',146),this.__$write(cabin.rowIndexes[row_index],147),this.__$write("</span></td>\n\n",147),row.hasFacilities&&row.details.rearThick>0){var __v_15=row.details.rear;void 0==row.details.rear&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,150]);for(var facRow_ct=0,__v_16=__v_15.length,facRow_index=0;__v_16>facRow_index;facRow_index++){var facRow=__v_15[facRow_index];facRow_ct++,this.__$write("            ",150);var row_class_list="",__v_17=facRow;void 0==facRow&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,151]);for(var subRow_ct=0,__v_18=__v_17.length,subRow_index=0;__v_18>subRow_index;subRow_index++){var subRow=__v_17[subRow_index];subRow_ct++,"D"==subRow.code&&(row_class_list="exitDoor")}this.__$write('\n<td class="uicNumbers uicSquare lastColumn ',156),"exitDoor"==row_class_list&&this.__$write("icon-seatmap-exit",156),this.__$write('"></td>\n',156)}}}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["drawNumbers",__filename,this["aria:currentLineNumber"]],_ex)}},macro_drawWindows:function(cabin,position){try{with(this){var __v_19=cabin.cabinMap;void 0==cabin.cabinMap&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,164]);for(var row_ct=0,__v_20=__v_19.length,row_index=0;__v_20>row_index;row_index++){var row=__v_19[row_index];if(row_ct++,row.hasFacilities&&row.details.frontThick>0){var __v_21=row.details.front;void 0==row.details.front&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,167]);for(var facRow_ct=0,__v_22=__v_21.length,facRow_index=0;__v_22>facRow_index;facRow_index++){{__v_21[facRow_index]}facRow_ct++,this.__$write('\n<td class="uicNoWindow"></td>\n',168)}}if("Top"==position?(this.__$write('\n<td class="',173),this.__$write(row.rightWindowMissing?"uicNoWindow":"uicTopWindow",173),this.__$write('"></td>\n',173)):(this.__$write('\n<td class="',175),this.__$write(row.leftWindowMissing?"uicNoWindow":"uicBottomWindow",175),this.__$write('"></td>\n',175)),row.hasFacilities&&row.details.rearThick>0){var __v_23=row.details.rear;void 0==row.details.rear&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,179]);for(var facRow_ct=0,__v_24=__v_23.length,facRow_index=0;__v_24>facRow_index;facRow_index++){{__v_23[facRow_index]}facRow_ct++,this.__$write('\n<td class="uicNoWindow"></td>\n',180)}}}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["drawWindows",__filename,this["aria:currentLineNumber"]],_ex)}},macro_drawFacilities:function(facArray,colPos,displayLettersOnFacilities){try{with(this){var __v_25=facArray;void 0==facArray&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,188]);for(var facRow_ct=0,__v_26=__v_25.length,facRow_index=0;__v_26>facRow_index;facRow_index++){var facRow=__v_25[facRow_index];facRow_ct++;var __v_27=facRow;void 0==facRow&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,189]);for(var subRow_ct=0,__v_28=__v_27.length,subRow_index=0;__v_28>subRow_index;subRow_index++){var subRow=__v_27[subRow_index];subRow_ct++,subRow.colId+subRow.span==colPos&&this.macro_displayFacility(subRow,"rowspan",displayLettersOnFacilities)}}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["drawFacilities",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySeatmap:function(cabin,cabinIndex,displayLettersOnFacilities,allowOccupiedSeatSelection,displayCharacteristics,travellers,travellerList,dictionary,displayPopup,displayPriceRanges,selectedSegment,isStandardSelection){try{with(this){var reversedColumns=(cabin.cabinMap[0],cabin.columnIndexes.reverse()),__v_29=reversedColumns;void 0==reversedColumns&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,211]);for(var column_ct=0,__v_30=__v_29.length,column_index=0;__v_30>column_index;column_index++){var column=__v_29[column_index];column_ct++;var column_length=cabin.columnIndexes.length,column_idx=column_length-1-column_index;this.__$write("\n\n\n<tr>\n",215),this.macro_drawColumnLetter(column,"firstRow");var __v_31=cabin.cabinMap;void 0==cabin.cabinMap&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,220]);for(var row_ct=0,__v_32=__v_31.length,row_index=0;__v_32>row_index;row_index++){var row=__v_31[row_index];row_ct++,row.hasFacilities&&row.details.frontThick>0&&this.macro_drawFacilities(row.details.front,column_length-column_index,displayLettersOnFacilities);var seatId=cabin.rowIndexes[row_index]+column;this.macro_drawColumnSquare({square:row.rowData[column_idx],seatId:seatId,seatMetaData:[cabinIndex,row_index,cabin.columnIndexes.length-column_index-1,seatId].join("-"),allowOccupiedSeatSelection:allowOccupiedSeatSelection,displayLettersOnFacilities:displayLettersOnFacilities,displayCharacteristics:displayCharacteristics,travellers:travellers,travellerList:travellerList,dictionary:dictionary,displayPopup:displayPopup,displayPriceRanges:displayPriceRanges,isStandardSelection:isStandardSelection.inside[isStandardSelection.to]}),row.hasFacilities&&row.details.rearThick>0&&this.macro_drawFacilities(row.details.rear,column_length-column_index,displayLettersOnFacilities)}this.macro_drawColumnLetter(column,"lastRow"),this.__$write("\n</tr>\n",248)}{cabin.columnIndexes.reverse()}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySeatmap",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displaySeatmapRTL:function(cabin,cabinIndex,displayLettersOnFacilities,allowOccupiedSeatSelection,displayCharacteristics,travellers,travellerList,dictionary,displayPopup,displayPriceRanges,selectedSegment,isStandardSelection){try{with(this){var __v_33=(cabin.cabinMap[0],cabin.columnIndexes);void 0==cabin.columnIndexes&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,269]);for(var column_ct=0,__v_34=__v_33.length,column_index=0;__v_34>column_index;column_index++){var column=__v_33[column_index];column_ct++;var column_length=cabin.columnIndexes.length,column_idx=column_length-1-column_index;this.__$write("\n\n\n<tr>\n",272),this.macro_drawColumnLetter(column,"firstRow");var __v_35=cabin.cabinMap;void 0==cabin.cabinMap&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,276]);for(var row_ct=0,__v_36=__v_35.length,row_index=0;__v_36>row_index;row_index++){var row=__v_35[row_index];row_ct++,row.hasFacilities&&row.details.frontThick>0&&this.macro_drawFacilitiesRTL(row.details.front,column_index,displayLettersOnFacilities);var seatId=cabin.rowIndexes[row_index]+column;!row.rowData[column_idx].seat||cabin.pattern[column]!==plnextv2.utils.widgets.plnextLib.seatmap.SeatMapScript.WINDOW&&cabin.pattern[column]!==plnextv2.utils.widgets.plnextLib.seatmap.SeatMapScript.AISLE||this.__$write(this.$modifier("eat",[row.rowData[column_idx].seat.characteristics.push(cabin.pattern[column])]),285),this.macro_drawColumnSquare({square:row.rowData[column_idx],seatId:seatId,seatMetaData:[cabinIndex,row_index,cabin.columnIndexes.length-column_index-1,seatId].join("-"),allowOccupiedSeatSelection:allowOccupiedSeatSelection,displayLettersOnFacilities:displayLettersOnFacilities,displayCharacteristics:displayCharacteristics,travellers:travellers,travellerList:travellerList,dictionary:dictionary,displayPopup:displayPopup,displayPriceRanges:displayPriceRanges,isStandardSelection:isStandardSelection.inside[isStandardSelection.to]}),row.hasFacilities&&row.details.rearThick>0&&this.macro_drawFacilitiesRTL(row.details.rear,column_index,displayLettersOnFacilities)}this.macro_drawColumnLetter(column,"lastRow"),this.__$write("\n</tr>\n",308)}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displaySeatmapRTL",__filename,this["aria:currentLineNumber"]],_ex)}},macro_drawFacilitiesRTL:function(facArray,colPos,displayLettersOnFacilities){try{with(this){var __v_37=facArray;void 0==facArray&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,313]);for(var facRow_ct=0,__v_38=__v_37.length,facRow_index=0;__v_38>facRow_index;facRow_index++){var facRow=__v_37[facRow_index];facRow_ct++;var __v_39=facRow;void 0==facRow&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,314]);for(var subRow_ct=0,__v_40=__v_39.length,subRow_index=0;__v_40>subRow_index;subRow_index++){var subRow=__v_39[subRow_index];subRow_ct++,subRow.colId==colPos&&this.macro_displayFacility(subRow,"rowspan",displayLettersOnFacilities)}}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["drawFacilitiesRTL",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.widgets.plnextLib.seatmap.resources.lib.HorizontalScript,e)},__$initTemplate:function(){return this.$Common.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/seatmap/resources/lib/HorizontalScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.seatmap.resources.lib.HorizontalScript",$extends:"plnextv2.utils.widgets.plnextLib.seatmap.resources.lib.CommonScript",$dependencies:[],$statics:{},$constructor:function(){},$prototype:{_computeHorizontalPositioning:function(e,t,i){var n=t.offsetLeft+e.offsetLeft-i.offsetLeft;0>n?(this._removeClass(e,this.CLASS_POPUP_SEAT_ALIGN_RIGHT),this._addClass(e,this.CLASS_POPUP_SEAT_ALIGN_LEFT)):(this._removeClass(e,this.CLASS_POPUP_SEAT_ALIGN_LEFT),this._addClass(e,this.CLASS_POPUP_SEAT_ALIGN_RIGHT))},_computeVerticalPositioning:function(e,t,i){var n=t.offsetTop+e.offsetTop-i.offsetTop;0>n&&(this._removeClass(e,this.CLASS_POPUP_SEAT_ALIGN_TOP),this._addClass(e,this.CLASS_POPUP_SEAT_ALIGN_BOTTOM))}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/seatmap/resources/lib/Vertical.tml
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/widgets/plnextLib/seatmap/resources/lib/VerticalScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.seatmap.resources.lib.Vertical",$extends:require("plnextv2/utils/widgets/plnextLib/seatmap/resources/lib/Common.tml"),$constructor:function(){this.$Common.constructor.call(this),this.$VerticalScript.constructor.call(this)},$destructor:function(){this.$VerticalScript.$destructor.call(this),this.$Common.$destructor.call(this)},$prototype:{macro_drawSeatMap:function(deck,displayLettersOnFacilities,allowOccupiedSeatSelection,displayCharacteristics,travellers,travellerList,dictionary,displayPopup,displayPriceRanges,selectedSegment,isStandardSelection){try{with(this){this.__$write('\n\n<div class="plnext-sr-only" id="statusSR" aria-live="polite"></div>\n\n<div class="uicCabinContainer" border="0" cellspacing="0" cellpadding="0">\n',8);var __v_1=deck.cabins;void 0==deck.cabins&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,12]);for(var cabin_ct=0,__v_2=__v_1.length,cabin_index=0;__v_2>cabin_index;cabin_index++){var cabin=__v_1[cabin_index];cabin_ct++,this.__$write('\n<table class="uicCabin" border="0" cellspacing="0" cellpadding="0">\n',13),selectedSegment&&(this.__$write('\n<caption class="plnext-sr-only">\n',15),this.__$write(this._i18n.getStringFromPattern("tx_pltg_text_SeatmapCaption",[selectedSegment.beginLocation.cityName,selectedSegment.endLocation.cityName]),16),this.__$write("\n</caption>\n",19)),this.__$write('\n\n<tbody>\n\n\n\n\n<tr class="letters-row">\n',21),this.macro_drawLetters(cabin,"firstRow"),this.__$write("\n</tr>\n\n\n\n\n\n",29);var __v_3=cabin.cabinMap;void 0==cabin.cabinMap&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,35]);for(var row_ct=0,__v_4=__v_3.length,row_index=0;__v_4>row_index;row_index++){var row=__v_3[row_index];row_ct++;var row_number=cabin.rowIndexes[row_index];row.hasFacilities&&row.details.frontThick>0&&this.macro_drawFacilities(row.details.front,displayLettersOnFacilities,row,row_number,cabin,!0);var extraLegHere=seatWithExtraLeg(row),extraClass="";extraLegHere&&(extraClass+=" extra-leg-row");var rowCssClass="seats-row";""==row_number&&(rowCssClass="facilities-row"),this.__$write('\n\n<tr class="',52),this.__$write(rowCssClass,53),this.__$write(" ",53),this.__$write(extraClass,53),this.__$write('">\n\n',53),this.macro_drawWingSquare(row,row_number,cabin,"Left",!0,!1),this.__$write('\n\n<td>\n<div aria-hidden="true" class="',56),this.__$write(row.leftWindowMissing?"uicNoWindow":"uicLeftWindow",58),this.__$write('"></div>\n</td>\n<td class="uicNumbers firstColumn ',58),row.hasLeftExitDoor&&this.__$write("icon-seatmap-exit-left",60),this.__$write('">\n',60),""!=row_number&&(this.__$write('\n<div aria-hidden="true">',62),this.__$write(row_number,62),this.__$write("</div>\n",62)),this.__$write("\n</td>\n\n",64);var __v_5=row.rowData;void 0==row.rowData&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,66]);for(var square_ct=0,__v_6=__v_5.length,square_index=0;__v_6>square_index;square_index++){{__v_5[square_index]}square_ct++;var seatId=row_number+cabin.columnIndexes[square_index];this.macro_drawColumnSquare({square:row.rowData[square_index],seatId:seatId,seatMetaData:[cabin_index,row_index,square_index,seatId].join("-"),allowOccupiedSeatSelection:allowOccupiedSeatSelection,displayLettersOnFacilities:displayLettersOnFacilities,displayCharacteristics:displayCharacteristics,travellers:travellers,travellerList:travellerList,dictionary:dictionary,displayPopup:displayPopup,displayPriceRanges:displayPriceRanges,isStandardSelection:isStandardSelection.inside[isStandardSelection.to]})}this.__$write('\n\n<td class="uicNumbers lastColumn ',84),row.hasRightExitDoor&&this.__$write("icon-seatmap-exit-right",85),this.__$write('">\n',85),""!=row_number&&(this.__$write('\n<div aria-hidden="true">',87),this.__$write(row_number,87),this.__$write("</div>\n",87)),this.__$write('\n</td>\n<td>\n<div aria-hidden="true" class="',89),this.__$write(row.rightWindowMissing?"uicNoWindow":"uicRightWindow",91),this.__$write('"></div>\n</td>\n',91),this.macro_drawWingSquare(row,row_number,cabin,"Right",!0,!1),this.__$write("\n</tr>\n\n",94),row.hasFacilities&&row.details.rearThick>0&&this.macro_drawFacilities(row.details.rear,displayLettersOnFacilities,row,row_number,cabin,!1)}this.__$write('\n\n\n\n\n<tr class="letters-row">\n',101),this.macro_drawLetters(cabin,"lastRow"),this.__$write("\n</tr>\n</tbody>\n</table>\n\n",107)}this.__$write("\n</div>\n",112)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["drawSeatMap",__filename,this["aria:currentLineNumber"]],_ex)}},macro_drawFacilities:function(facArray,displayLettersOnFacilities,row,row_number,cabin,isFrontFacility){try{with(this){var __v_7=facArray;void 0==facArray&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,116]);for(var facRow_ct=0,__v_8=__v_7.length,facRow_index=0;__v_8>facRow_index;facRow_index++){var facRow=__v_7[facRow_index];facRow_ct++;var row_class_list="",rowExitDoorsMap=this._getRowExitDoors(facRow);rowExitDoorsMap.hasExitDoor&&(row_class_list="exitDoor");var extraLegHere=seatWithExtraLeg(row);extraLegHere&&""==row_class_list&&(row_class_list+=" extra-leg-row"),this.__$write('\n\n<tr class="facilities-row ',128),this.__$write(row_class_list,129),this.__$write('">\n',129),this.macro_drawWingSquare(row,row_number,cabin,"Left",!1,isFrontFacility),this.__$write('\n<td><div aria-hidden="true" class="uicNoWindow"></div></td>\n<td class="uicNumbers firstColumn ',131),rowExitDoorsMap.left&&this.__$write("icon-seatmap-exit-left",132),this.__$write('"></td>\n\n',132);var facRowLength=facRow.length,__v_9=facRow;void 0==facRow&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,135]);for(var subRow_ct=0,__v_10=__v_9.length,subRow_index=0;__v_10>subRow_index;subRow_index++){var subRow=__v_9[subRow_index];subRow_ct++,this.macro_displayFacility(subRow,"colspan",displayLettersOnFacilities);var isLastFacilityOnRow=subRow_index==facRowLength-1;isLastFacilityOnRow||subRow.escapeCorridor||(this.__$write('\n<td>\n<div aria-hidden="true" aria-label="',142),this.__$write(this._i18n.getLabel("tx_pltg_text_seatmap_corridor"),143),this.__$write('" class="uicSquare uicCorridor">\n<span class="plnext-sr-only">',143),this.__$write(this._i18n.getLabel("tx_pltg_text_seatmap_corridor"),144),this.__$write("</span>\n</div>\n</td>\n",144))}this.__$write('\n\n<td class="uicNumbers lastColumn ',150),rowExitDoorsMap.right&&this.__$write("icon-seatmap-exit-right",151),this.__$write('"></td>\n<td><div aria-hidden="true" class="uicNoWindow"></div></td>\n',151),this.macro_drawWingSquare(row,row_number,cabin,"Right",!1,isFrontFacility),this.__$write("\n</tr>\n",154)}}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["drawFacilities",__filename,this["aria:currentLineNumber"]],_ex)}},macro_drawLetters:function(cabin,rowCssClass){try{with(this){this.__$write('\n<td class="uicSquare"></td>\n<td class="uicWindowPlaceHolder"></td>\n<td class="uicSquare"></td>\n\n',159);var __v_11=cabin.columnIndexes;void 0==cabin.columnIndexes&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,163]);for(var column_ct=0,__v_12=__v_11.length,column_index=0;__v_12>column_index;column_index++){var column=__v_11[column_index];column_ct++,this.macro_drawColumnLetter(column,rowCssClass)}this.__$write('\n\n<td class="uicSquare"></td>\n<td class="uicWindowPlaceHolder"></td>\n<td class="uicSquare"></td>\n',166)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["drawLetters",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){aria.core.TplClassLoader._importScriptPrototype(plnextv2.utils.widgets.plnextLib.seatmap.resources.lib.VerticalScript,e)},__$initTemplate:function(){return this.$Common.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/seatmap/resources/lib/VerticalScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.seatmap.resources.lib.VerticalScript",$extends:"plnextv2.utils.widgets.plnextLib.seatmap.resources.lib.CommonScript",$dependencies:["plnextv2.utils.I18n"],$statics:{PSEUDO_ELEMENT_BEFORE:":before",PSEUDO_ELEMENT_AFTER:":after",PROPERTY_DISPLAY:"display",PROPERTY_BORDER_LEFT_WIDTH:"border-left-width",VALUE_DISPLAY_BLOCK:"block"},$constructor:function(){this._i18n=plnextv2.utils.I18n},$prototype:{_computeHorizontalPositioning:function(e,t,i,n){var s=e.getBoundingClientRect(),a=t.getBoundingClientRect(),r=n.getBoundingClientRect(),o=a.x+a.width/2-s.width/2,l=this.CLASS_POPUP_SEAT_ALIGN_CENTER;e.style.left="",o<r.x?l=this.CLASS_POPUP_SEAT_ALIGN_LEFT:o+s.width>r.width?l=this.CLASS_POPUP_SEAT_ALIGN_RIGHT:e.style.left=a.width/2-s.width/2+"px",this._applyPopupHorizontalAlignment(e,l)},_computeVerticalPositioning:function(e,t,i,n){var s=e.getBoundingClientRect(),a=t.getBoundingClientRect(),r=n.getBoundingClientRect(),o=this._getPopupArrowHeight(e),l=a.y-s.height-o,c=a.y+a.height+s.height+o;popupAlignment=l>r.y?this.CLASS_POPUP_SEAT_ALIGN_TOP:c<r.height?this.CLASS_POPUP_SEAT_ALIGN_BOTTOM:l>r.height-c?this.CLASS_POPUP_SEAT_ALIGN_TOP:this.CLASS_POPUP_SEAT_ALIGN_BOTTOM,this._applyPopupVerticalAlignment(e,popupAlignment)},_getPopupArrowHeight:function(e){var t=window.getComputedStyle(e,this.PSEUDO_ELEMENT_BEFORE),i=window.getComputedStyle(e,this.PSEUDO_ELEMENT_AFTER),n=0;return t.getPropertyValue(this.PROPERTY_DISPLAY)===this.DISPLAY_BLOCK?n=t.getPropertyValue(this.PROPERTY_BORDER_LEFT_WIDTH):i.getPropertyValue(this.PROPERTY_DISPLAY)===this.DISPLAY_BLOCK&&(n=i.getPropertyValue(this.PROPERTY_BORDER_LEFT_WIDTH)),parseFloat(n,10)},_getRowExitDoors:function(e){var t={hasExitDoor:!1,left:!1,right:!1};return e.forEach(function(e){"D"===e.code&&(t.hasExitDoor=!0,0===e.colId?t.left=!0:t.right=!0)}),t}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/selectBox/SelectBox.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.selectBox.SelectBox",$extends:"aria.html.Select",$dependencies:["plnextv2.utils.StringUtils","plnextv2.utils.widgets.plnextLib.selectBox.bean.SelectBoxCfg"],$constructor:function(e,t,i){this.$cfgBean=this.$cfgBean||"plnextv2.utils.widgets.plnextLib.selectBox.bean.SelectBoxCfg.Properties",this._stringUtils=plnextv2.utils.StringUtils,this.$Select.constructor.call(this,e,t,i)},$prototype:{writeMarkup:function(e){this._openTag(e),e.write(">");var t=[""],i=this._cfg.options;if(i){var n=this.populateOptions(i,t);t.push(n)}t.push(["</"+this._cfg.tagName+">"]),e.write(t.join(""))},onbind:function(e,t,i){switch(e){case"disabled":this._domElt.disabled=t;break;case"selectedIndex":this._domElt.selectedIndex=t,this.setValueInDataModel(),this.isIndexValid(t)||this.setIndexInDataModel();break;case"value":this._domElt.selectedIndex=this.getIndex(t),this.setIndexInDataModel();break;case"options":this._manageOptionsBind(t,i);break;case"error":this._updateOnErrorMarkup(t)}this.onDisabledBind(e,t,i)},_manageOptionsBind:function(e,t){var i=aria.utils.Dom.getElementById(this._id),n=null;if(t&&t[i.options.selectedIndex]&&(n=t[i.options.selectedIndex].value),e&&aria.core.Browser.isIE)this.populateIEOptions(e);else if(e){var s=[""];s=this.populateOptions(e,s),i.innerHTML=s.join("")}var a=this._getPreviouslySelectedValueNewIndex(e,n);null!==a&&(i.options.selectedIndex=a)},_getPreviouslySelectedValueNewIndex:function(e,t){var i=null;if(e&&null!==t)for(var n=0;n<e.length&&null===i;n++)e[n].value===t&&(i=n);return i},_updateOnErrorMarkup:function(e){e?(this._domElt.setAttribute("aria-invalid",!0),this._domElt.setAttribute("aria-describedby",this._cfg.errorId)):(this._domElt.setAttribute("aria-invalid",!1),this._domElt.removeAttribute("aria-describedby"))},populateOptions:function(e,t){this.options=[];for(var i=aria.utils.String,n=0,s=e.length;s>n;n++){t.push(["<option "]);var a=e[n];aria.utils.Type.isString(a)?(a=this._stringUtils.decodeHtmlEntity(a),a={label:a,value:a}):a={label:this._stringUtils.decodeHtmlEntity(a.label),attributes:a.attributes,value:null==a.value?a.label:a.value};var r=i.encodeForQuotedHTMLAttribute(""+a.value);if(t.push(['value="'+r+'"']),a.attributes){var o=aria.utils.Html.buildAttributeList(a.attributes);t.push(o)}t.push([">"]),t.push(i.escapeHTML(a.label)),t.push(["</option>"]),this.options[n]=a}return t},populateIEOptions:function(e){var t=aria.utils.Dom.getElementById(this._id);t.options.length=0;for(var i=0,n=e.length;n>i;i++){var s=e[i],a=document.createElement("option");aria.utils.Type.isString(s)?(s=this._stringUtils.decodeHtmlEntity(s),s={label:s,value:s}):s={label:this._stringUtils.decodeHtmlEntity(s.label),attributes:s.attributes,value:null==s.value?s.label:s.value},a.value=s.value,a.label=s.label,a.attributes=s.attributes,t.options[i]=a}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/selectBox/bean/SelectBoxCfg.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.selectBox.bean.SelectBoxCfg",$namespaces:{json:"aria.core.JsonTypes",base:"aria.html.beans.ElementCfg",common:"aria.widgetLibs.CommonBeans",html:"aria.templates.CfgBeans"},$beans:{Properties:{$type:"base:Properties",$properties:{options:{$type:"json:Array",$contentType:{$type:"json:MultiTypes",$contentTypes:[{$type:"ListItemCfg"},{$type:"json:String"}]},$default:[]},bind:{$type:"base:Properties.bind",$properties:{selectedIndex:{$type:"common:BindingRef"},value:{$type:"common:BindingRef"},disabled:{$type:"common:BindingRef"},options:{$type:"common:BindingRef"}}}}},ListItemCfg:{$type:"json:Object",$restricted:!1,$properties:{value:{$type:"json:MultiTypes",$mandatory:!1,$contentTypes:[{$type:"json:Integer"},{$type:"json:String"}]},label:{$type:"json:String",$mandatory:!0},attributes:{$type:"html:HtmlAttribute"}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/slider/core/Slider.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.slider.core.Slider",$extends:"aria.widgets.Widget",$css:["plnextv2.utils.widgets.plnextLib.slider.style.SliderCss"],$statics:{INVALID_CONFIGURATION:"%1Invalid configuration for the slider!",BUTTON_WIDTH:15,LEFT:!0,RIGHT:!1,TIME:"time",DURATION:"duration"},$dependencies:["plnextv2.utils.widgets.plnextLib.slider.bean.SliderCfgBeans","aria.utils.Event","aria.DomEvent","plnextv2.utils.I18n","aria.utils.AriaWindow"],$constructor:function(){this.$BaseWidget.constructor.apply(this,arguments);var e={beanName:"plnextv2.utils.widgets.plnextLib.slider.bean.SliderCfgBeans.SliderCfg",json:this._cfg};try{this._cfgOk=aria.core.JsonValidator.normalize(e,!0)}catch(t){this.$logError(this.INVALID_CONFIGURATION,null,t)}if(this._cfgOk){this._rtlMode=plnextv2.utils.HtmlUtils.isRTLActivated(),this._label=this._cfg.label,this._labelFrom=this._cfg.labelFrom||plnextv2.utils.I18n.getLabel("tx_pltg_text_slider_from"),this._labelTo=this._cfg.labelTo||plnextv2.utils.I18n.getLabel("tx_pltg_text_slider_to"),this._sliderWidth,this._maxSlideDistance=this._maxLeftPosition;var i=this._cfg.bindValueLeft;i&&(this._bindingCallbackLeft={fn:this._notifyDataChangeLeft,scope:this},aria.utils.Json.addListener(i.inside,i.to,this._bindingCallbackLeft,!1)),this._maxValue=this._cfg.maxValue,this._minValue=this._cfg.minValue,this._type=this._cfg.type,this._leftValue=this._minValue,this._readValue(this.LEFT),this._leftPosition=0,this._setLeftPosition(this._leftValue),this._increment=this._cfg.increment,this._baseIncrement=this._cfg.baseIncrement,this._domIdBackgroundLine=this._createDynamicId(),this._domIdRangeLine=this._createDynamicId(),this._isFocused=!1,this._domElt=null,this._savedClientX=null,this._mouseOver=!1,this._keyDown=!1,this._mouseDown=!1,this._delegateButtonId=aria.utils.Delegate.add({fn:this._delegateButton,scope:this}),this._valueText=this._cfg.valueText||"",this._domIdLeft=this._createDynamicId(),this._needUpdate=!1,this._nbButton=1,this._cfg.range?(this._nbButton=2,this._leftPosition=0,this._setLeftPosition(this._leftValue),i=this._cfg.bindValueRight,i&&(this._bindingCallbackRight={fn:this._notifyDataChangeRight,scope:this},aria.utils.Json.addListener(i.inside,i.to,this._bindingCallbackRight,!1)),this._rightValue=this._maxValue,this._readValue(this.RIGHT),this._rightPosition=0,this._setRightPosition(this._rightValue),this._domIdRight=this._createDynamicId()):(this._showLeftSelectionLine=!0,this._showSliderLimits=this._cfg.showSliderLimits),aria.utils.AriaWindow.$on({unloadWindow:this.$destructor,scope:this}),aria.templates.Layout.$on({viewportResized:this._onViewporResized,scope:this}),this._eventTriggered=!1}},$destructor:function(){this._detachBodyEvents(),aria.utils.AriaWindow.$unregisterListeners(this),aria.templates.Layout.$unregisterListeners(this);aria.utils.Dom.getElementById(this._domIdBackgroundLine);if(this._delegateButtonId&&(aria.utils.Delegate.remove(this._delegateButtonId),this._delegateButtonId=null),this._bindingCallbackLeft){var e=this._cfg.bindValueLeft;aria.utils.Json.removeListener(e.inside,e.to,this._bindingCallbackLeft,!1),this._bindingCallbackLeft=null}this._bindingCallbackRight&&(e=this._cfg.bindValueRight,aria.utils.Json.removeListener(e.inside,e.to,this._bindingCallbackRight,!1),this._bindingCallbackRight=null),this._domElt=null,this.$BaseWidget.$destructor.call(this)},$prototype:{writeMarkup:function(e){if(this._cfgOk){var t;if(this._cfg.range){var i=this._minValue,n=this._maxValue;this._type==this.TIME?(i=plnextv2.utils.DateUtils.formatDateTime(this._minValue,plnextv2.utils.DateUtils.FORMATS.TIME_FORMAT),n=plnextv2.utils.DateUtils.formatDateTime(this._maxValue,plnextv2.utils.DateUtils.FORMATS.TIME_FORMAT)):this._type==this.DURATION&&(i=plnextv2.utils.DateUtils.formatDateTime(this._minValue,plnextv2.utils.DateUtils.FORMATS.DURATION_FORMAT),n=plnextv2.utils.DateUtils.formatDateTime(this._maxValue,plnextv2.utils.DateUtils.FORMATS.DURATION_FORMAT));{this._createDynamicId(),this._createDynamicId()}t=["<fieldset>",'<div class="slider slider-horizontal slider-time">','<div id="',this._domIdBackgroundLine,'" class="slider-track" style="width:100%;">','<div id="',this._domIdRangeLine,'" class="slider-selection"></div>',"<button ",aria.utils.Delegate.getMarkup(this._delegateButtonId),' id="',this._domIdLeft,'" class="slider-handle slider-handle-left round" type="button" tabindex="0" role="slider" aria-valuemin="',i,'" aria-valuemax="',n,'" aria-label="',this._label," ",this._labelFrom,'"></button>',"<button ",aria.utils.Delegate.getMarkup(this._delegateButtonId),' id="',this._domIdRight,'" class="slider-handle slider-handle-right round"  type="button" tabindex="0" role="slider" aria-valuemin="',i,'" aria-valuemax="',n,'" aria-label="',this._label," ",this._labelTo,'"></button>',"</div></div></fieldset>"]}else{var s=this._createDynamicId();t=['<fieldset><label id="',s,'" class="slider-label" for="',this._domIdLeft,'">',this._label,'<span style="display:none">slider</span></label>','<div class="slider slider-horizontal slider-time">','<div id="',this._domIdBackgroundLine,'" class="slider-track" style="width:100%">'],this._showLeftSelectionLine&&t.push(['<div class="slider-selection" id="',this._domIdRangeLine,'"></div>'].join("")),this._showSliderLimits&&t.push(['<div class="slider-limit-left">',this._cfg.lowerLimitLabel,'</div><div class="slider-limit-right">',this._cfg.upperLimitLabel,"</div>"].join("")),t.push(["<button ",aria.utils.Delegate.getMarkup(this._delegateButtonId),' id="',this._domIdLeft,'" class="slider-handle slider-handle-left round" type="button" style="left:',this._leftPosition,'px;" tabindex="0" role="slider" aria-valuemin="',this._minValue,'" aria-valuemax="',this._maxValue,'" aria-valuenow="',this._computeValue(this._leftValue),'" aria-labelledby="',s,'"> </button>',"</div></div></fieldset>"].join(""))}e.write(t.join(""))}},_delegateButton:function(e){var t=this["_button_"+e.type];t&&(t.call(this,e),e.preventDefault())},_button_focus:function(e){this._isFocused=!0,this._attachBodyEvents(e.target.id)},_button_mouseover:function(e){this._mouseOver=!0,this._updateDisplay(e.target.id)},_button_blur:function(){this._isFocused=!1,this._detachBodyEvents()},_button_mouseout:function(e){this._mouseOver=!1,this._updateDisplay(e.target.id)},_button_touchstart:function(e){this._sliderWidth=aria.utils.Dom.getElementById(this._domIdBackgroundLine).clientWidth,(!this._maxLeftPosition||this._maxLeftPosition<-1)&&(this._maxLeftPosition=this._sliderWidth-this._rightPosition-this._nbButton*this.BUTTON_WIDTH),(!this._maxRightPosition||this._maxRightPosition<-1)&&(this._maxRightPosition=this._sliderWidth-this._leftPosition-this._nbButton*this.BUTTON_WIDTH),this._maxSlideDistance=this._sliderWidth-this._nbButton*this.BUTTON_WIDTH,this.getButtonDom(e.target.id).focus(),this._savedClientX=e.targetTouches[0].clientX,this._attachBodyEvents(e.target.id),this._updateDisplay(e.target.id)},_button_mousedown:function(e){this._sliderWidth=aria.utils.Dom.getElementById(this._domIdBackgroundLine).clientWidth,(!this._maxLeftPosition||this._maxLeftPosition<-1)&&(this._maxLeftPosition=this._sliderWidth-this._rightPosition-this._nbButton*this.BUTTON_WIDTH),(!this._maxRightPosition||this._maxRightPosition<-1)&&(this._maxRightPosition=this._sliderWidth-this._leftPosition-this._nbButton*this.BUTTON_WIDTH),this._maxSlideDistance=this._sliderWidth-this._nbButton*this.BUTTON_WIDTH,this.getButtonDom(e.target.id).focus(),this._savedClientX=e.clientX,this._attachBodyEvents(e.target.id)},_moveOnClickBar:function(e,t){this._sliderWidth=aria.utils.Dom.getElementById(this._domIdBackgroundLine).clientWidth;var i=this.getButtonDom(t.elem);this._savedClientX||(this._savedClientX=i.getBoundingClientRect().left),this._maxLeftPosition||(this._maxLeftPosition=this._sliderWidth-this._nbButton*this.BUTTON_WIDTH),this._minRightPosition||(this._minRightPosition=0),this._maxSlideDistance=this._sliderWidth-this._nbButton*this.BUTTON_WIDTH;var n=new aria.DomEvent(e);n.stopPropagation(!0);var s=n.clientX-this._savedClientX;n.$dispose(),this._move(t.elem,s)},_attachBodyEvents:function(e){if(!this._mouseDown){this._mouseDown=!0;var t=Aria.$window.document.body;aria.utils.Event.addListener(t,"mousemove",{fn:this._document_mousemove,args:{elem:e},scope:this},!0),aria.utils.Event.addListener(t,"touchmove",{fn:this._document_touchmove,args:{elem:e},scope:this},!0),aria.utils.Event.addListener(t,"mouseup",{fn:this._document_mouseup,args:{elem:e},scope:this},!0),aria.utils.Event.addListener(t,"touchend",{fn:this._document_mouseup,args:{elem:e},scope:this},!0)}if(!this._keyDown){this._keyDown=!0;var t=Aria.$window.document.body;aria.utils.Event.addListener(t,"keydown",{fn:this._document_keyMap,args:{elem:e},scope:this},!0),aria.utils.Event.addListener(t,"keyup",{fn:this._document_keyup,scope:this},!0)}},_onViewporResized:function(){this._sliderWidth=aria.utils.Dom.getElementById(this._domIdBackgroundLine).clientWidth,this._maxSlideDistance=this._sliderWidth-this._nbButton*this.BUTTON_WIDTH,this._leftPosition=this._leftValue*this._maxSlideDistance,this._rightPosition=this._rightValue*this._maxSlideDistance,this._maxLeftPosition=this._sliderWidth-this._rightPosition-this._nbButton*this.BUTTON_WIDTH,this._maxRightPosition=this._sliderWidth-this._leftPosition-this._nbButton*this.BUTTON_WIDTH,this._updateDisplay(this._domIdLeft),this._updateDisplay(this._domIdRight)},_detachBodyEvents:function(){if(this._mouseDown){var e=Aria.$window.document.body;aria.utils.Event.removeListener(e,"mousemove",{fn:this._document_mousemove,scope:this});var e=Aria.$window.document.body;aria.utils.Event.removeListener(e,"touchmove",{fn:this._document_touchmove,scope:this}),aria.utils.Event.removeListener(e,"mouseup",{fn:this._document_mouseup,scope:this}),aria.utils.Event.removeListener(e,"touchend",{fn:this._document_mouseup,scope:this}),this._mouseDown=!1}if(this._keyDown&&!this._isFocused){var e=Aria.$window.document.body;aria.utils.Event.removeListener(e,"keydown",{fn:this._document_keyarrowmove,scope:this}),aria.utils.Event.removeListener(e,"keyup",{fn:this._document_keyup,scope:this}),this._keyDown=!1}},_document_keyMap:function(e,t){this._sliderWidth=aria.utils.Dom.getElementById(this._domIdBackgroundLine).clientWidth,(!this._maxLeftPosition||this._maxLeftPosition<-1)&&(this._maxLeftPosition=this._sliderWidth-this._rightPosition-this._nbButton*this.BUTTON_WIDTH),(!this._maxRightPosition||this._maxRightPosition<-1)&&(this._maxRightPosition=this._sliderWidth-this._leftPosition-this._nbButton*this.BUTTON_WIDTH),this._maxSlideDistance=this._sliderWidth-this._nbButton*this.BUTTON_WIDTH;var i=e.ctrlKey,n=new aria.DomEvent(e);n.stopPropagation(!0);var s=this._increment;if(i&&(s=this._baseIncrement),((n.keyCode==n.KC_ARROW_LEFT||n.keyCode==n.KC_ARROW_DOWN)&&!this._rtlMode||(n.keyCode==n.KC_ARROW_RIGHT||n.keyCode==n.KC_ARROW_UP)&&this._rtlMode)&&(s=-s),n.$dispose(),n.keyCode==n.KC_TAB)this._detachBodyEvents();else if(n.keyCode==n.KC_ARROW_LEFT||n.keyCode==n.KC_ARROW_RIGHT||n.keyCode==n.KC_ARROW_DOWN||n.keyCode==n.KC_ARROW_UP)e.preventDefault(),s=this._toPercent(s)*this._maxSlideDistance,this._move(t.elem,s);else if(n.keyCode==n.KC_HOME||n.keyCode==n.KC_END){if(e.preventDefault(),n.keyCode==n.KC_HOME)var s=-this._leftPosition;else var s=this._maxSlideDistance-this._leftPosition;this._move(t.elem,s)}},_move:function(e,t){if(this._eventTriggered=!0,this._maxValue!=this._minValue)if(e==this._domIdLeft){var i=this._leftPosition;this._setLeftPosition(this._leftPosition+t),this._rtlMode?this._savedClientX-=this._leftPosition-i:this._savedClientX+=this._leftPosition-i,this._maxRightPosition=this._sliderWidth-this._leftPosition-this._nbButton*this.BUTTON_WIDTH,this._setValue(this._leftPosition/this._maxSlideDistance,this.LEFT)}else if(e==this._domIdRight){var n=this._rightPosition;this._setRightPosition(this._rightPosition-t),this._rtlMode?this._savedClientX+=this._rightPosition-n:this._savedClientX-=this._rightPosition-n,this._maxLeftPosition=this._sliderWidth-this._rightPosition-this._nbButton*this.BUTTON_WIDTH,this._setValue(this._rightPosition/this._maxSlideDistance,this.RIGHT)}this._updateDisplay(e)},_document_mousemove:function(e,t){var i=new aria.DomEvent(e),n=this._rtlMode?-1:1;i.stopPropagation(!0);var s=i.clientX-this._savedClientX;i.$dispose(),this._move(t.elem,n*s)},_document_touchmove:function(e,t){var i=new aria.DomEvent(e),n=this._rtlMode?-1:1;i.stopPropagation(!0);var s=i.targetTouches[0].clientX-this._savedClientX;i.$dispose(),this._move(t.elem,n*s)},_document_mouseup:function(e,t){this._detachBodyEvents(),this._updateDisplay(t.elem)},_document_keyup:function(){if(this._mouseDown){var e=Aria.$window.document.body;aria.utils.Event.removeListener(e,"mousemove",{fn:this._document_mousemove,scope:this}),aria.utils.Event.removeListener(e,"mouseup",{fn:this._document_mouseup,scope:this}),this._mouseDown=!1}},_setLeftPosition:function(e){e>this._maxLeftPosition?e=this._maxLeftPosition:0>e&&(e=0),this._leftPosition=e},_setRightPosition:function(e){e>this._maxRightPosition?e=this._maxRightPosition:0>e&&(e=0),this._rightPosition=e},_setValue:function(e,t){if(t){if(e!==this._leftValue){this._leftValue=e;var i=this._cfg.bindValueLeft;i&&aria.utils.Json.setValue(i.inside,i.to,this._computeValue(e))}}else if(e!==this._rightValue){this._rightValue=e;var i=this._cfg.bindValueRight;i&&aria.utils.Json.setValue(i.inside,i.to,this._maxValue+this._minValue-this._computeValue(e))}this._eventTriggered=!1},_notifyDataChangeLeft:function(){this._eventTriggered||(this._readValue(!0),this._sliderWidth=aria.utils.Dom.getElementById(this._domIdBackgroundLine).clientWidth,this._maxSlideDistance=this._sliderWidth?this._sliderWidth-this._nbButton*this.BUTTON_WIDTH:0,0===this._leftValue&&(this._maxRightPosition=this._maxSlideDistance),this._setLeftPosition(this._leftValue*this._maxSlideDistance),this._updateDisplay(this._domIdLeft)),this._eventTriggered=!1},_notifyDataChangeRight:function(){this._eventTriggered||(this._readValue(!1),this._sliderWidth=aria.utils.Dom.getElementById(this._domIdBackgroundLine).clientWidth,this._maxSlideDistance=this._sliderWidth?this._sliderWidth-this._nbButton*this.BUTTON_WIDTH:0,0===this._rightValue&&(this._maxLeftPosition=this._maxSlideDistance),this._setRightPosition(this._rightValue*this._maxSlideDistance),this._updateDisplay(this._domIdRight)),this._eventTriggered=!1},_updateDisplay:function(e){var t=this.getButtonDom(e);if(!t)return void(this._needUpdate=!0);var i="slider-handle round";if(e==this._domIdLeft?(this._setStyleToButton(t,this._leftValue,!0,this._computeValue(this._leftValue)),i+=" slider-handle-left"):e==this._domIdRight&&(this._setStyleToButton(t,this._rightValue,!1,this._maxValue+this._minValue-this._computeValue(this._rightValue)),i+=" slider-handle-right"),t.className!=i&&(t.className=i),this._cfg.range)this._setRangeBar();else if(this._showLeftSelectionLine){var t=this.getLeftSelectionLine(),n=Math.round(100*this._leftValue)+"%";t.style.width!=n&&(t.style.width=n)}},_setStyleToButton:function(e,t,i,n){var s=this._sliderWidth?100*this._maxSlideDistance/this._sliderWidth:100,a=Math.ceil(t*s)+"%";this._rtlMode&&i||!this._rtlMode&&!i?e.style.right!=a&&(e.style.right=a):e.style.left!=a&&(e.style.left=a),this._type==this.TIME?e.setAttribute("aria-valuetext",plnextv2.utils.DateUtils.formatDateTime(n,plnextv2.utils.DateUtils.FORMATS.TIME_FORMAT)):this._type==this.DURATION?e.setAttribute("aria-valuetext",plnextv2.utils.DateUtils.formatDateTime(n,plnextv2.utils.DateUtils.FORMATS.DURATION_FORMAT)):""!=this._valueText?e.setAttribute("aria-valuetext",this._computeValue(t)+" "+this._valueText):e.setAttribute("aria-valuenow",this._computeValue(t))},_setRangeBar:function(){var e=this.getBetweenLine(),t=this._sliderWidth?100*this._maxSlideDistance/this._sliderWidth:100,i=Math.round(this._leftValue*t)+"%",n=Math.round(this._rightValue*t)+"%";this._rtlMode?(e.style.right!=i&&(e.style.right=i),e.style.left!=n&&(e.style.left=n)):(e.style.left!=i&&(e.style.left=i),e.style.right!=n&&(e.style.right=n))},initWidget:function(){if(!this._cfg.range){aria.utils.Dom.getElementById(this._domIdBackgroundLine)}this._notifyDataChangeLeft(),this._notifyDataChangeRight()},getButtonDom:function(e){var t=aria.utils.Dom.getElementById(e);return this._domElt=t,t},getBetweenLine:function(){var e=aria.utils.Dom.getElementById(this._domIdRangeLine);return this._domElt=e,e},getLeftSelectionLine:function(){var e=aria.utils.Dom.getElementById(this._domIdRangeLine);return this._domElt=e,e},getDom:function(){var e=this.getButtonDom();return e.parentNode},_readValue:function(e){var t=null,i=null;e?(t=this._leftValue,i=this._cfg.bindValueLeft):(t=this._rightValue,i=this._cfg.bindValueRight),i&&("undefined"==typeof i.inside[i.to]&&(i.inside[i.to]=e?this._minValue:this._maxValue),t=i.inside[i.to]),t=null==t?0:this._uncomputeValue(e?t:this._maxValue+this._minValue-t),0>t&&(t=0),t>=1&&(t=1),e?this._leftValue=t:this._rightValue=t},_computeValue:function(e){var t=(this._maxValue-this._minValue)*e+this._minValue;return Math.round(t)},_uncomputeValue:function(e){if(this._maxValue==this._minValue)return 0;var t=(e-this._minValue)/(this._maxValue-this._minValue);return t},_toPercent:function(e){return e/(this._maxValue-this._minValue)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/slider/style/SliderCss.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.slider.style.SliderCss",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n.slider [tabindex=\"0\"]:focus {\noutline-width: 2px;\noutline-style: solid;\noutline-color: #0AB4E2;\n}\n\n.slider-label {\ndisplay: inline-block;\nfont-weight: 700;\n}\n\n.slider.slider-time {\nheight: auto;\n}\n.slider.slider-horizontal {\npadding-left: 1rem;\npadding-right: 1rem;\nwidth: 100%;\nheight: 28px;\n}\n.slider {\ndisplay: inline-block;\nvertical-align: middle;\nposition: relative;\n}\n\n.slider.slider-time .slider-track {\ntop: 15px;\nz-index: 2;\nmargin-left: 0rem;\n}\n\n.slider.slider-horizontal .slider-track {\nheight: 14px;\nmargin-top: -7px;\ntop: 50%;\nleft: 0;\n}\n.slider .slider-track {\nmargin-left: 1rem;\n}\n\n.slider-track {\nposition: absolute;\ncursor: pointer;\nbackground-color: #dfdfdf;\n-webkit-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);\nbox-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);\nborder-radius: 0px;\n}\n\n.slider.slider-horizontal .slider-selection {\nheight: 100%;\ntop: 0;\nbottom: 0;\n}\n\n.slider-selection {\nposition: absolute;\nbackground-image: -webkit-linear-gradient(top, #005eb8 0%, #005eb8 100%);\nbackground-image: linear-gradient(to bottom, #005eb8 0%, #005eb8 100%);\nbackground-repeat: repeat-x;\nfilter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff005eb8', endColorstr='#ff005eb8', GradientType=0);\n-webkit-box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.15);\nbox-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.15);\n-webkit-box-sizing: border-box;\n-moz-box-sizing: border-box;\nbox-sizing: border-box;\nborder-radius: 0px;\n}\n\n.slider-handle {\nposition: absolute;\nwidth: 30px;\nheight: 30px;\nbackground-color: #ffffff;\nfilter: none;\n-webkit-box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.25);\nbox-shadow: 1px 1px 1px rgba(0, 0, 0, 0.25);\nborder: 2px solid #005eb8;\n}\n\n.slider-handle.round {\nborder-radius: 50%;\n}\n\n.slider-handle.round:hover{\nbackground-color:",38),this.__$write(this.$grayLight,126),this.__$write(";\n}\n\n.slider .slider-handle {\nz-index: 1;\n}\n\n.slider.slider-horizontal .slider-handle {\nmargin-top: -7px;\n}\n\n.slider-handle-left{\nmargin-left: -15px;\n}\n\n.slider-handle-right{\nmargin-right: -15px;\n}\n\n.slider-limit-left {\nborder-left: 1px solid #005eb8;\ncolor: #005eb8;\nheight: 32px;\nposition: absolute;\nfont-size: 0.8em;\npadding-top: 20px;\npadding-left:2px;\n}\n\n.slider-limit-right {\nborder-right: 1px solid #bcbcbc;\nheight: 32px;\nposition: absolute;\nfont-size: 0.8em;\npadding-top: 20px;\npadding-right:2px;\nright:0px;\n}\n\n",126)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/sliderDiscrete/core/SliderDiscrete.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.sliderDiscrete.core.SliderDiscrete",$extends:"aria.widgetLibs.BindableWidget",$css:["plnextv2.utils.widgets.plnextLib.sliderDiscrete.style.SliderDiscreteCss"],$statics:{INVALID_CONFIGURATION:"%1Invalid configuration for the discrete slider!",HANDLE_STYLE_ROUND:"round",HANDLE_STYLE_CURSOR:"cursor",HANDLE_STYLE_RECTANGLE:"rectangle",HANDLE_TRIANGLE_CLASS:"slider-discrete-handle-triangle",HANDLE_CLASS:"slider-discrete-handle",HANDLE_SQUARE_BOTTOM_CLASS:"slider-discrete-handle-square-bottom",HANDLE_SQUARE_TOP_CLASS:"slider-discrete-handle-square-top",HANDLE_LABEL_CLASS:"slider-discrete-handle-label",HANDLE_LABEL_RIGHT_CLASS:"slider-discrete-handle-label-right",HANDLE_LABEL_LEFT_CLASS:"slider-discrete-handle-label-left",HIGHLIGHT_BEFORE_CURSOR_CLASS:"slider-discrete-highlight-before",DISPLAY_STEP_LABELS_ALL:"all",DISPLAY_STEP_LABELS_PARTIAL:"partial",DISPLAY_STEP_LABELS_NONE:"none"},$dependencies:["plnextv2.utils.widgets.plnextLib.sliderDiscrete.bean.SliderDiscreteCfgBeans","plnextv2.utils.widgets.plnextLib.popover.Popover","aria.utils.Event","aria.DomEvent","plnextv2.utils.HtmlUtils","plnextv2.utils.I18n","aria.utils.Array","aria.utils.AriaWindow"],$constructor:function(e){this.$BindableWidget.constructor.apply(this,arguments);var t={beanName:"plnextv2.utils.widgets.plnextLib.sliderDiscrete.bean.SliderDiscreteCfgBeans.SliderDiscreteCfg",json:this._cfg};try{this._cfgOk=aria.core.JsonValidator.normalize(t,!0)&&this._cfg.steps.length>=2}catch(i){this.$logError(this.INVALID_CONFIGURATION,null,i)}if(this._cfgOk){this._registerBindings(),this._htmlUtils=plnextv2.utils.HtmlUtils,this._rtlMode=this._htmlUtils.isRTLActivated(),this._label=this._cfg.label,this._steps=this.__deepCopy(this._cfg.steps).sort(this.__compareSteps),this._stepDivider=this._computeStepDivider(),this._currentStepIndex=0,this._stepChanged=!1,this._handleStyle=this._cfg.handleStyle,this._showStepLabels=this._cfg.showStepLabels,this._displayStepLabelsType=this._cfg.displayStepLabelsType,this._lowerLimitLabel=this._cfg.lowerLimitLabel,this._upperLimitLabel=this._cfg.upperLimitLabel,this._showSliderLimits=this._cfg.showSliderLimits,this._rangeFromToLabel=this._cfg.rangeFromToLabel,this._sliderPositionMinX=null,this._sliderPositionMaxX=null,this._maxValue=this._steps.length>1?this._getStep(this._steps.length-1).value:0,this._minValue=this._steps.length>1?this._getStep(0).value:0,this._initValuesInRTL(),this._value=this._minValue;for(var n=0,s=this._steps.length;s>n;++n)this._steps[n].percent=this._toPercent(this._steps[n].value);this._isFocused=!1,this._keyDown=!1,this._mouseDown=!1,this._delegateButtonId=aria.utils.Delegate.add({fn:this._delegateButton,scope:this}),e.showMinMaxButtons&&(this._delegateMinMaxButtonsId=aria.utils.Delegate.add({fn:this._delegateMinMaxButtons,scope:this})),this._widgetId=this._cfg.baseId?this._cfg.baseId:this._createDynamicId(),this._domIdContainer=this._widgetId+"-container",this._domIdLabel=this._widgetId+"-label",this._domIdHandle=this._widgetId+"-handle",this._domIdHandleLabel=this._widgetId+"-handle-label",this._domIdBackgroundLine=this._widgetId+"-background-line",this._domIdSelectionLine=this._widgetId+"-selection-line",this._domIdHighlightLine=this._widgetId+"-highlight-line",this._domIdMinButton=this._widgetId+"-min-button",this._domIdMaxButton=this._widgetId+"-max-button",this._onValueChange=e.onValueChange,aria.utils.AriaWindow.$on({unloadWindow:this.$destructor,scope:this}),aria.templates.Layout.$on({viewportResized:this._onViewportResized,scope:this})}},$destructor:function(){this._cfgOk&&(this._detachBodyKeyEvents(),this._detachBodyMouseEvents(),aria.utils.AriaWindow.$unregisterListeners(this),aria.templates.Layout.$unregisterListeners(this),aria.utils.Event.removeListener(this._domElemBackgroundLine,"click",{fn:this._slider_click,scope:this}),this._delegateButtonId&&(aria.utils.Delegate.remove(this._delegateButtonId),this._delegateButtonId=null),this._delegateMinMaxButtonsId&&(aria.utils.Delegate.remove(this._delegateMinMaxButtonsId),this._delegateMinMaxButtonsId=null),this._domElemContainer=null,this._domElemHandle=null,this._domElemHandleLabel=null,this._domElemBackgroundLine=null,this._domElemSelectionLine=null,this._domElemHighlightLine=null,this.$BindableWidget.$destructor.call(this))},$prototype:{initWidget:function(){this._cfgOk&&(this._domElemContainer=this.getElementById(this._domIdContainer),this._domElemHandle=this.getElementById(this._domIdHandle),this._domElemHandleLabel=this.getElementById(this._domIdHandleLabel),this._domElemBackgroundLine=this.getElementById(this._domIdBackgroundLine),this._domElemSelectionLine=this.getElementById(this._domIdSelectionLine),this._domElemHighlightLine=this.getElementById(this._domIdHighlightLine),aria.utils.Event.addListener(this._domElemBackgroundLine,"click",{fn:this._slider_click,scope:this},!0),aria.utils.Event.addListener(this._domElemBackgroundLine,"touchmove",{fn:this._slider_click,scope:this},!0),aria.utils.Event.addListener(this._domElemBackgroundLine,"mousemove",{fn:this._slider_mousemove,scope:this},!0),aria.utils.Event.addListener(this._domElemBackgroundLine,"mouseout",{fn:this._slider_mouseout,scope:this},!0),aria.utils.Event.addListener(this._domElemContainer,"mouseenter",{fn:this._widget_mouseenter,scope:this},!0),this._updateSavedSliderPosition(),this._notifyDataChange())},getClientX:function(e){return e.touches?e.touches[0].clientX:e.clientX},_initValuesInRTL:function(){if(this._rtlMode){var e=this._maxValue;this._maxValue=this._minValue,this._minValue=e}},_widget_mouseenter:function(){this._updateSavedSliderPosition(),aria.utils.Event.removeListener(this._domElemContainer,"mouseenter",{fn:this._widget_mouseenter,scope:this})},_slider_click:function(e){var t=new aria.DomEvent(e);t.stopPropagation(!0),this._domElemHighlightLine.style.width="0",this._checkAndMove(this.getClientX(t)),t.$dispose()},_slider_mousemove:function(e){for(var t,i,n=new aria.DomEvent(e),s=this._computeValue(this._computePosition(this.getClientX(n))),a=null,r=0,o=this._steps.length;o>r;++r){if(0===r&&s<(this._getStep(r).value+this._getStep(r+1).value)/2){a=0;break}if(r===o-1&&s>=(this._getStep(r-1).value+this._getStep(r).value)/2){a=this._steps.length-1;break}s>=this._getStep(r).value&&s<this._getStep(r+1).value&&(a=r,s>=(this._getStep(r).value+this._getStep(r+1).value)/2&&a++)}if(null!==a){var l="",c=this.getClassList(this._domElemHighlightLine);i=100*this._getCurrentStep().percent,t=100*this._getStep(a).percent-i,0>t?(l="width:"+-t+"%;",l+="left:"+(i+t)+"%;",c.add(this.HIGHLIGHT_BEFORE_CURSOR_CLASS)):(l="width:"+t+"%;",l+="left:"+i+"%;",c.remove(this.HIGHLIGHT_BEFORE_CURSOR_CLASS)),this._domElemHighlightLine.style.cssText=l}},_slider_mouseout:function(){this._domElemHighlightLine.style.width="0%",this._domElemHighlightLine.style.left=this._domElemHandle.style.left},writeMarkup:function(e){if(this._cfgOk){e.write(['<div id="'+this._domIdContainer+'" class="slider-discrete-container">'].join("")),this._label&&e.write(['<label id="',this._domIdLabel,'" class="slider-discrete-label" for="',this._domIdHandle,'">',this._label,'<span style="display:none">slider</span></label>'].join("")),this._rangeFromToLabel&&e.write(['<div class="slider-discrete-range-label plnext-sr-only">',plnextv2.utils.I18n.getStringFromPattern(this._rangeFromToLabel,[this._htmlUtils.formatPriceLabelForAccessibility(this._lowerLimitLabel),this._htmlUtils.formatPriceLabelForAccessibility(this._upperLimitLabel)]),"</div>"].join("")),e.write('<div class="slider-discrete">'),this._cfg.showMinMaxButtons&&this.__generateMinMaxButton(e,!this._rtlMode),e.write('<div id="'+this._domIdBackgroundLine+'" class="slider-discrete-track" style="width:100%">');for(var t=1,i=this._steps.length;i-1>t;++t){var n=100*this._steps[t].percent;e.write(0!==this._stepDivider&&t%this._stepDivider===0?'<span class="slider-discrete-step-delimiter-inter" style="left: '+n+'%"></span>':'<span class="slider-discrete-step-delimiter" style="left: '+n+'%"></span>'),this._showStepLabels&&this._displayLabel(t)&&e.write('<span class="slider-discrete-step-delimiter-label" style="left: '+n+'%">'+this._steps[t].value+"</span>")}e.write(['<div class="slider-discrete-selection" id="',this._domIdSelectionLine,'"></div>'].join("")),e.write(['<div class="slider-discrete-highlight" id="',this._domIdHighlightLine,'"></div>',"<button ",aria.utils.Delegate.getMarkup(this._delegateButtonId),' id="',this._domIdHandle,'" type="button" ',' class="',this.HANDLE_CLASS," ",this._handleStyle,'" style="left:0%" tabindex="0" role="slider"','aria-valuemin="',this._minValue,'" aria-valuemax="',this._maxValue,'" aria-valuetext="',this._htmlUtils.formatPriceLabelForAccessibility(this._getCurrentStep().label),'"'].join("")),this._label&&e.write(' aria-labelledby="'+this._domIdLabel+'"'),e.write(">"),this._handleStyle===this.HANDLE_STYLE_CURSOR&&e.write(['<span class="'+this.HANDLE_SQUARE_TOP_CLASS+'"></span>','<span class="'+this.HANDLE_SQUARE_BOTTOM_CLASS+'"></span>'].join("")),e.write("</button></div>"),this._showSliderLimits&&e.write(['<div class="slider-discrete-limit slider-discrete-limit-left" aria-hidden="true">'+this._lowerLimitLabel+"</div>",'<div class="slider-discrete-limit slider-discrete-limit-right" aria-hidden="true">'+this._upperLimitLabel+"</div>"].join("")),this._cfg.showCurrentValue&&e.write('<div id="'+this._domIdHandleLabel+'" class="'+this.HANDLE_LABEL_CLASS+" "+this.HANDLE_LABEL_RIGHT_CLASS+'" aria-hidden="true"></div>'),this._cfg.showMinMaxButtons&&this.__generateMinMaxButton(e,this._rtlMode),e.write("</div></div>")}},__generateMinMaxButton:function(e,t){var i=this._steps.length-1,n=this._domIdMinButton,s="slider-discrete-min",a=this._rtlMode?i:0;t||(n=this._domIdMaxButton,s="slider-discrete-max",a=this._rtlMode?0:i);var r=this._getStep(a).label,o=[];o.push('<button id="'+n+'"',aria.utils.Delegate.getMarkup(this._delegateMinMaxButtonsId),' class="slider-discrete-min-max-btn">','<span class="plnext-sr-only">',this._htmlUtils.formatPriceLabelForAccessibility(r),"</span>",'<div class="slider-discrete-circle '+s+'-circle"></div>',"</button>");var l={position:"top",htmlContent:r,showOnMouseOver:!0,fadeIn:!1,cssClass:"slider-discrete-min-max-popover",wrapperCssClass:["slider-discrete-min-max",s].join(" ")},c=new plnextv2.utils.widgets.plnextLib.popover.Popover(l,this._context,this._lineNumber);e.registerBehavior(c),c.writeMarkupBegin(e),e.write(o.join("")),c.writeMarkupEnd(e)},_displayLabel:function(e){var t=!1;switch(this._displayStepLabelsType){case this.DISPLAY_STEP_LABELS_ALL:t=!0;break;case this.DISPLAY_STEP_LABELS_NONE:t=!1;break;case this.DISPLAY_STEP_LABELS_PARTIAL:t=e%this._stepDivider===0}return t},_onViewportResized:function(){this._updateSavedSliderPosition(),this._updateDisplay()},_delegateButton:function(e){var t=this["_button_"+e.type];"function"==typeof t&&(t.call(this,e),e.preventDefault())},_delegateMinMaxButtons:function(e){var t=this["_minMaxButtons_"+e.type];"function"==typeof t&&(t.call(this,e),e.preventDefault())},_minMaxButtons_click:function(e){aria.utils.Array.contains([e.target.id,e.target.parentElement.id],this._domIdMinButton)?this._rtlMode?this._stepMaximum():this._stepMinimum():aria.utils.Array.contains([e.target.id,e.target.parentElement.id],this._domIdMaxButton)&&(this._rtlMode?this._stepMinimum():this._stepMaximum()),this._stepChanged&&(this._move(),this._minMaxButtons_mouseout(e))},_minMaxButtons_mouseover:function(e){this._slider_mousemove(e),this._updateDisplay()},_minMaxButtons_mouseout:function(e){this._slider_mouseout(e)},_button_focus:function(){this._isFocused=!0,this._attachBodyKeyEvents()},_button_blur:function(){this._isFocused=!1,this._detachBodyKeyEvents()},_button_mousedown:function(){this._domElemHandle.focus(),this._attachBodyMouseEvents()},_document_mousemove:function(e){var t=new aria.DomEvent(e);t.stopPropagation(!0),this._checkAndMove(this.getClientX(t)),t.$dispose()},_document_mouseup:function(){this._detachBodyMouseEvents()},_document_keyup:function(){this._detachBodyMouseEvents()},_attachBodyMouseEvents:function(){if(!this._mouseDown){var e=Aria.$window.document.body;this._mouseDown=!0,aria.utils.Event.addListener(e,"mousemove",{fn:this._document_mousemove,scope:this},!0),aria.utils.Event.addListener(e,"touchmove",{fn:this._document_mousemove,scope:this},!0),aria.utils.Event.addListener(e,"mouseup",{fn:this._document_mouseup,scope:this},!0),aria.utils.Event.addListener(e,"touchend",{fn:this._document_mouseup,scope:this},!0)}},_attachBodyKeyEvents:function(){if(!this._keyDown&&this._isFocused){var e=Aria.$window.document.body;this._keyDown=!0,aria.utils.Event.addListener(e,"keydown",{fn:this._document_keyMap,scope:this},!0),aria.utils.Event.addListener(e,"keyup",{fn:this._document_keyup,scope:this},!0)}},_detachBodyMouseEvents:function(){if(this._mouseDown){var e=Aria.$window.document.body;aria.utils.Event.removeListener(e,"mousemove",{fn:this._document_mousemove,scope:this}),aria.utils.Event.removeListener(e,"touchmove",{fn:this._document_mousemove,scope:this}),aria.utils.Event.removeListener(e,"mouseup",{fn:this._document_mouseup,scope:this}),aria.utils.Event.removeListener(e,"touchend",{fn:this._document_mouseup,scope:this}),this._mouseDown=!1}},_detachBodyKeyEvents:function(){if(this._keyDown&&!this._isFocused){var e=Aria.$window.document.body;aria.utils.Event.removeListener(e,"keydown",{fn:this._document_keyMap,scope:this}),aria.utils.Event.removeListener(e,"keyup",{fn:this._document_keyup,scope:this}),this._keyDown=!1}},_document_keyMap:function(e){var t=e.ctrlKey,i=new aria.DomEvent(e);if(i.stopPropagation(!0),i.$dispose(),i.keyCode===i.KC_TAB)this._isFocused=!1,this._detachBodyKeyEvents();else{e.preventDefault(),this._domElemHighlightLine.style.width="0%",this._domElemHighlightLine.style.left=this._domElemHandle.style.left;var n=this._hasPressedIncreaseKey(i),s=this._hasPressedDecreaseKey(i);i.keyCode===i.KC_HOME||t&&s?this._stepMinimum():i.keyCode===i.KC_END||t&&n?this._stepMaximum():n?this._stepUp():s&&this._stepDown(),this._stepChanged&&this._move()}},_move:function(){this._stepChanged=!1,this._updateSliderHandleAccessibilityLabel(),this._refreshValue(),this._updateDisplay()},_checkAndMove:function(e){var t=this._computeValue(this._computePosition(e));if(!(t<this._getStepUpBreakpoint()&&t>=this._getStepDownBreakpoint()))for(var i=0,n=this._steps.length;n>i;++i){if(0===i&&t<=this._getStep(i).value){this._stepMinimum();break}if(i===n-1&&t>=this._getStep(i).value){this._stepMaximum();break}t>=this._getStep(i).value&&t<this._getStep(i+1).value&&(this._stepTo(i),t>=this._getStepUpBreakpoint()&&this._stepUp())}this._stepChanged&&this._move()},_stepMinimum:function(){0!==this._currentStepIndex&&(this._currentStepIndex=0,this._stepChanged=!0)},_stepMaximum:function(){this._currentStepIndex!==this._steps.length-1&&(this._currentStepIndex=this._steps.length-1,this._stepChanged=!0)},_stepTo:function(e){this._currentStepIndex!==e&&(this._currentStepIndex=e,this._stepChanged=!0)},_stepUp:function(){this._currentStepIndex+1<=this._steps.length-1&&(this._currentStepIndex++,this._stepChanged=!0)},_stepDown:function(){this._currentStepIndex-1>=0&&(this._currentStepIndex--,this._stepChanged=!0)},_getStepUpBreakpoint:function(){return(this._getCurrentStep().value+this._getNextStep().value)/2},_getStepDownBreakpoint:function(){return(this._getPreviousStep().value+this._getCurrentStep().value)/2},_getStep:function(e){return e>=0&&e<this._steps.length?this._steps[e]:null},_getCurrentStep:function(){return this._getStep(this._currentStepIndex)},_getPreviousStep:function(){return this._currentStepIndex>=1&&this._currentStepIndex<this._steps.length?this._steps[this._currentStepIndex-1]:this._steps[this._currentStepIndex]},_getNextStep:function(){return this._currentStepIndex>=0&&this._currentStepIndex+1<this._steps.length?this._steps[this._currentStepIndex+1]:this._steps[this._currentStepIndex]},_refreshValue:function(){var e=this._cfg.bind.value;if(e){var t=this._transform(e.transform,this._getCurrentStep().value,"fromWidget");aria.utils.Json.setValue(e.inside,e.to,t)}},_notifyDataChange:function(e,t){var i=this._getCurrentStep().value,n=this._bindingListeners[t];n&&("undefined"==typeof n.inside[n.to]&&(n.inside[n.to]=this._minValue),i=this._transform(n.transform,n.inside[n.to],"toWidget"));for(var s=0,a=this._steps.length;a>s;++s)if(i==this._steps[s].value){this._currentStepIndex!==s&&(this._currentStepIndex=s,this._move());break}this._value=i,this._updateDisplay(),this._onValueChange&&this.$callback(this._onValueChange)},_updateDisplay:function(){var e=this.getClassList(this._domElemHandleLabel),t=this._getCurrentStep().percent,i=100*t+"%";this._domElemHandle.style.left=i,this._domElemSelectionLine.style.width=i,this._cfg.showCurrentValue&&(this._domElemHandleLabel.innerHTML=this._getCurrentStep().label,t>.5?(this._domElemHandleLabel.style.left="",this._domElemHandleLabel.style.right=100*(1-t)+"%",e.contains(this.HANDLE_LABEL_LEFT_CLASS)||(e.add(this.HANDLE_LABEL_LEFT_CLASS),e.remove(this.HANDLE_LABEL_RIGHT_CLASS))):.5>=t&&(this._domElemHandleLabel.style.right="",this._domElemHandleLabel.style.left=i,e.contains(this.HANDLE_LABEL_RIGHT_CLASS)||(e.add(this.HANDLE_LABEL_RIGHT_CLASS),e.remove(this.HANDLE_LABEL_LEFT_CLASS))))},_updateSliderHandleAccessibilityLabel:function(){var e=this._htmlUtils.formatPriceLabelForAccessibility(this._getCurrentStep().label);this._domElemHandle.setAttribute("aria-valuetext",e)},_updateSavedSliderPosition:function(){this._sliderPositionMinX=this._domElemBackgroundLine.getBoundingClientRect().left,this._sliderPositionMaxX=this._domElemBackgroundLine.getBoundingClientRect().right},getClassList:function(e){return new aria.utils.ClassList(e)},getElementById:function(e){return aria.utils.Dom.getElementById(e)},getDom:function(){return this._domElemContainer.parentNode},_computeStepDivider:function(){for(var e=[],t=[],i=[],n=this._steps.length-1,s=0,a=2;n>a;++a)n%a===0&&(e.push(a),t.push(a-n/a));return i=this._getCandidates(e,t),1===i.length?s=n/i[0]:2===i.length&&(s=i[1]%2===0?n/i[1]:n/i[0]),s},_getCandidates:function(e,t){for(var i=null,n=[],s=0;s<t.length;++s)null===i||Math.abs(t[s])<i?(n=[],n.push(e[s]),i=Math.abs(t[s])):Math.abs(t[s])==i&&n.push(e[s]);return n},_computeValue:function(e){var t=(this._maxValue-this._minValue)*e+this._minValue;return t},_computePosition:function(e){return(e-this._sliderPositionMinX)/(this._sliderPositionMaxX-this._sliderPositionMinX)},_toPercent:function(e){return(e-this._minValue)/(this._maxValue-this._minValue)},_hasPressedIncreaseKey:function(e){return this._rtlMode&&e.keyCode===e.KC_ARROW_LEFT||!this._rtlMode&&e.keyCode===e.KC_ARROW_RIGHT||e.keyCode===e.KC_ARROW_UP},_hasPressedDecreaseKey:function(e){return this._rtlMode&&e.keyCode===e.KC_ARROW_RIGHT||!this._rtlMode&&e.keyCode===e.KC_ARROW_LEFT||e.keyCode===e.KC_ARROW_DOWN},__deepCopy:function(e){return JSON.parse(JSON.stringify(e))},__compareSteps:function(e,t){return e.value<t.value?-1:e.value>t.value?1:0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/sliderDiscrete/style/SliderDiscreteCss.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.sliderDiscrete.style.SliderDiscreteCss",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n.slider-discrete-container {\nmargin-bottom: 55px;\n}\n\n\n.slider-discrete-label {\npadding-bottom: 10px;\n}\n\n.slider-discrete {\ndisplay: inline-block;\nposition: relative;\nwidth: 100%;\nheight: 28px;\nvertical-align: middle;\nmargin-top: 18px;\n}\n\n.slider-discrete-track {\nz-index: 10;\nheight: 14px;\ntop: 50%;\nleft: 0;\nborder: solid 1px ",22),this.__$write(this.$grayBorder,46),this.__$write(";\nposition: absolute;\ncursor: pointer;\nbackground-color: ",46),this.__$write(this.$gray,49),this.__$write(";\n-webkit-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);\nbox-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);\nborder-radius: 0px;\n}\n\n.slider-discrete-selection {\nheight: 100%;\ntop: 0;\nbottom: 0;\nz-index: 20;\nposition: absolute;\nbackground-color: ",49),this.__$write(this.$blueDark,61),this.__$write(";\nbox-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.15);\nbox-sizing: border-box;\nborder-radius: 0px;\n}\n\n.slider-discrete-handle {\nposition: absolute;\nbackground-color: ",61),this.__$write(this.$white,69),this.__$write(";\nfilter: none;\nz-index: 50;\n}\n\n.slider-discrete-handle.round {\nborder: 2px solid ",69),this.__$write(this.$blue,75),this.__$write(";\nborder-radius: 50%;\nwidth: 30px;\nheight: 30px;\nmargin-top: -7px;\nmargin-left: -15px;\nbox-shadow: 1px 1px 1px rgba(0, 0, 0, 0.25);\n}\n\n.slider-discrete-handle.rectangle {\nborder: 2px solid ",75),this.__$write(this.$blue,85),this.__$write(";\nwidth: 4px;\nheight: 26px;\nmargin-top: -9px;\nmargin-left: -8px;\nbox-shadow: 1px 1px 1px rgba(0, 0, 0, 0.25);\n}\n\n.slider-discrete-handle.cursor {\nborder: 0;\nbackground-color: transparent;\nwidth: 24px;\nheight: 36px;\nmargin-top: -26px;\nmargin-left: -12px;\n}\n\n.slider-discrete-handle-square-top {\nposition: absolute;\nborder-radius: 2px 2px 3px 3px;\nwidth: 24px;\nheight: 24px;\ntop: 0;\nborder: 1px solid ",85),this.__$write(this.$gray,108),this.__$write(";\nleft: 0;\nbackground-color: ",108),this.__$write(this.$white,110),this.__$write(";\nbox-shadow: 2px 1px 2px ",110),this.__$write(this.$grayBorder,111),this.__$write(";\n}\n\n.slider-discrete-handle-square-bottom {\nposition: absolute;\ntop: 15px;\nleft: 4px;\nwidth: 16px;\nheight: 16px;\nbackground-color: ",111),this.__$write(this.$white,120),this.__$write(";\nborder-radius: 0 0 1px 0;\nborder-bottom: 1px solid ",120),this.__$write(this.$gray,122),this.__$write(";\nborder-right: 1px solid ",122),this.__$write(this.$gray,123),this.__$write(";\ntransform: rotate(45deg);\nbox-shadow: 2px 1px 2px ",123),this.__$write(this.$grayBorder,125),this.__$write(";\n}\n\n.slider-discrete-handle-label {\nposition: absolute;\nbottom: 18px;\npadding: 0 4px 0 4px;\nfont-size: smaller;\n}\n\n.slider-discrete-handle-label-right {\ntext-align: left;\nmargin-left: 14px;\n}\n\n.slider-discrete-handle-label-left {\nmargin-right: 14px;\ntext-align: right;\n}\n\n\n",125),this.isLessThanIEVersion(9)&&this.__$write("\n.slider-discrete-handle-square-bottom {\ntop: 15px;\nleft: 1px;\n-ms-filter: \"progid:DXImageTransform.Microsoft.Matrix(M11=0.7071067811865474, M12=-0.7071067811865477, M21=0.7071067811865477, M22=0.7071067811865474, SizingMethod='auto expand')\";\n}\n",147),this.__$write("\n\n.slider-discrete-handle:focus {\ncursor: e-resize;\n}\n\n.slider-discrete-handle:hover {\ncursor: e-resize;\n}\n\n.slider-discrete-limit {\ncolor: ",153),this.__$write(this.$grayDarker,163),this.__$write(";\nposition: absolute;\nfont-size: 0.8em;\npadding-top: 7px;\ntop: 28px;\n}\n\n.slider-discrete-limit-left {\nborder-left: 1px solid ",163),this.__$write(this.$grayBorder,171),this.__$write(";\npadding-left: 2px;\nleft: 0;\n}\n\n.slider-discrete-limit-right {\nborder-right: 1px solid ",171),this.__$write(this.$grayBorder,177),this.__$write(";\npadding-right: 2px;\nright:0;\ntext-align: right;\n}\n\n.slider-discrete-step-delimiter {\nposition: absolute;\nbackground-color: ",177),this.__$write(this.$grayBorder,185),this.__$write(";\nwidth: 1px;\nheight: 12px;\nz-index: 40;\n}\n\n.slider-discrete-step-delimiter-inter {\nposition: absolute;\nbackground-color: ",185),this.__$write(this.$grayBorder,193),this.__$write(";\nwidth: 1px;\nheight: 22px;\nz-index: 40;\n}\n\n.slider-discrete-step-delimiter-label {\nposition: absolute;\ntop: 15px;\nfont-size: 0.8em;\n}\n\n.slider-discrete-highlight {\nposition: absolute;\nheight: 12px;\nbackground-color: ",193),this.__$write(this.$white,208),this.__$write(";\nz-index: 30;\n}\n\n.slider-discrete-highlight-before {\nbackground-color: ",208),this.__$write(this.$blueElectric,213),this.__$write(";\n}\n\n.slider-discrete-handle:focus,\n.slider-discrete-handle:focus > .slider-discrete-handle-triangle-border {\noutline-width: 2px;\noutline-style: solid;\noutline-color: ",213),this.__$write(this.$blueElectric,220),this.__$write(";\n}\n\n.slider-discrete-min-max {\nwidth: 15px;\nheight: 14px;\nborder: 1px solid ",220),this.__$write(this.$grayBorder,226),this.__$write(";\nposition: absolute;\ntop: 14px;\ncursor: pointer;\npadding: 1px 1px 1px 2px;\nbackground: ",226),this.__$write(this.$gray,231),this.__$write(";\n}\n\n.slider-discrete-min-max-btn {\nposition: absolute;\nborder: 0;\nbackground-color: transparent;\nmargin-top: -1px;\nmargin-left: -6px;\n}\n\n.slider-discrete-handle {\nposition: absolute;\n}\n\n.slider-discrete-min-max:hover {\nbackground: ",231),this.__$write(this.$white,247),this.__$write(";\n}\n\n.popover.slider-discrete-min-max-popover{\ncolor: ",247),this.__$write(this.$white,251),this.__$write(";\nbackground-color: ",251),this.__$write(this.$grayDarker,252),this.__$write(";\nborder-width: 0px;;\n}\n\n\n.popover.slider-discrete-min-max-popover.shown {\ndisplay: table !important;\n}\n\n.popover.slider-discrete-min-max-popover > .arrow:after {\nborder-top-color: ",252),this.__$write(this.$grayDarker,262),this.__$write(";\n}\n\n.slider-discrete-min {\nleft: -15px;\nborder-right: 0px;\n}\n\n.slider-discrete-max {\nright: -15px;\nborder-left: 0px;\n}\n\n.slider-discrete-circle {\nheight: 10px;\nwidth: 10px;\nborder-radius: 50%;\n\n}\n\n.slider-discrete-min-circle {\nborder: 1px solid ",262),this.__$write(this.$grayDarken,283),this.__$write(";\n}\n\n.slider-discrete-max-circle {\nbackground: ",283),this.__$write(this.$grayDarken,287),this.__$write(";\n}\n\n",287)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/stepper/core/Stepper.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.stepper.core.Stepper",$extends:"aria.widgetLibs.BindableWidget",$dependencies:["plnextv2.utils.widgets.plnextLib.stepper.bean.StepperCfgBeans","plnextv2.utils.I18n","plnextv2.utils.widgets.plnextLib.selectBox.SelectBox","aria.html.TextInput","aria.utils.Event","aria.DomEvent","aria.utils.Dom","aria.utils.Data","aria.utils.Json","aria.core.JsonValidator","aria.utils.String"],$css:["plnextv2.utils.widgets.plnextLib.stepper.style.StepperStyle"],$statics:{INVALID_CONFIGURATION:"%1Invalid configuration for the stepper",INPUT_TEXTFIELD:"TEXTFIELD",INPUT_DROPDOWN:"DROPDOWN",PROPERTY_VALUE:"value",PROPERTY_DISABLED:"disabled",BUTTON_PLUS:"BUTTON_PLUS",BUTTON_MINUS:"BUTTON_MINUS",ZERO_VALUE:0,DEFAULT_STEP:1,HIDDEN_CLASS:"hidden",ERROR_CLASS:"has-error",ERROR_CODE_NUMBER:"117646",ERROR_CODE_MINMAX:"21400061",ERROR_SECTION_CLASS:"help-block",INT_REGEX:/^\d+$/},$constructor:function(e,t,i){this.$BindableWidget.constructor.apply(this,arguments),e=this._cfg;var n={beanName:"plnextv2.utils.widgets.plnextLib.stepper.bean.StepperCfgBeans.StepperCfg",json:e};try{this._cfgOk=aria.core.JsonValidator.normalize(n,!0)}catch(s){this.$logError(this.INVALID_CONFIGURATION,null,s)}if(this._cfgOk){this._jsonUtil=aria.utils.Json,this._i18n=plnextv2.utils.I18n,this._step=e.step,this._minValue=e.minValue,this._maxValue=this._isAllowedValue(e.maxValue)?e.maxValue:this._getLowerAllowedValue(e.maxValue),this._resetValue=this.ZERO_VALUE>=this._minValue&&this.ZERO_VALUE<=this._maxValue?this.ZERO_VALUE:this._minValue,this.data={},this.data[this.PROPERTY_VALUE]=e.value||this._resetValue.toString(),this.data[this.PROPERTY_DISABLED]=e.disabled||!1,this._registerBindings(),this._internalDataModelChange={fn:this._updateExternalDataModel,scope:this},this._jsonUtil.addListener(this.data,this.PROPERTY_VALUE,this._internalDataModelChange),this._jsonUtil.addListener(this.data,this.PROPERTY_VALUE,{fn:this._stateChange,scope:this},!1,!0),this._stateChanged={fn:this._disabledStateChange,scope:this},this._jsonUtil.addListener(this.data,this.PROPERTY_DISABLED,this._stateChanged);var a=e.inputType;this._inputField=null,this._inputField=a==this.INPUT_DROPDOWN?new plnextv2.utils.widgets.plnextLib.selectBox.SelectBox(this._getSelectConfig(),t,i):new plnextv2.utils.widgets.plnextLib.AXTextInput.core.AXTextInput(this._getTextInputConfig(),t,i),this._domInputId=this._inputField._id,this._onValueChange=e.onValueChange,this._label=e.label,this._labelMaxReached=e.labelMaxReached,this._labelMinReached=e.labelMinReached,this._labelInvalidValue=e.labelInvalidValue,this._labelMinMax=this._i18n.getErrorFromPattern(this.ERROR_CODE_MINMAX,[this._minValue,this._maxValue]);var r=e.id;this._domDivId=r?this._context.$getId(r):this._createDynamicId(),this._domButtonPlusId=this._createDynamicId(),this._domButtonMinusId=this._createDynamicId(),this._domErrorSectionId=this._createDynamicId(),this._srWarningContainerId=this._createDynamicId(),this._domDiv=null,this._domButtonPlus=null,this._domButtonMinus=null,this._domErrorSection=null,this._srWarningContainer=null}},$destructor:function(){this._cfgOk&&(this._jsonUtil.removeListener(this.data,this.PROPERTY_VALUE,this._internalDataModelChange),this._internalDataModelChange=null,this._jsonUtil.removeListener(this.data,this.PROPERTY_DISABLED,this._stateChanged),this._jsonUtil.removeListener(this.data,"value",{fn:this._stateChange,scope:this},!0),this._stateChanged=null,this._inputField.$dispose(),this.data=null,aria.utils.Event.removeListener(this._domButtonMinusId,"click",{fn:this._buttonClicked}),aria.utils.Event.removeListener(this._domButtonPlusId,"click",{fn:this._buttonClicked}),this._domDiv=null,this._domButtonPlus=null,this._domButtonMinus=null,this._domErrorSection=null,this._srWarningContainer=null),this.$BindableWidget.$destructor.call(this)},$prototype:{writeMarkup:function(e){if(this._cfgOk){var t=['<div class="stepper form-group has-feedback ',this._cfg.stepperClass,'" id="',this._domDivId,'">'];this._label&&t.push(["<div>",'<label class="stepper-label control-label ',this._cfg.labelClass,'" for="',this._domInputId,'">',this._label,"</label>",'<div class="plnext-sr-only" aria-live="polite" id="',this._srWarningContainerId,'">',"</div>","</div>"].join("")),t.push(['<button type="button" id="',this._domButtonMinusId,'" class="stepper-button stepper-minus-button btn" ','aria-label="',this._cfg.labelMinusButton,'">','<span class="icon-minus"></span>',"</button>"].join("")),e.write(t.join("")),this._inputField.writeMarkup(e),t=['<button type="button" id="',this._domButtonPlusId,'" class="stepper-button stepper-plus-button btn" ','aria-label="',this._cfg.labelPlusButton,'">','<span class="icon-plus"></span>',"</button>"],t.push(['<div class="stepper-error" id="',this._domErrorSectionId,'">',"</div>"].join("")),t.push(["</div>"]),e.write(t.join(""))}},initWidget:function(){this._inputField.initWidget();var e=aria.utils.Dom;this._domDiv=e.getElementById(this._domDivId),this._domButtonPlus=e.getElementById(this._domButtonPlusId),this._domButtonMinus=e.getElementById(this._domButtonMinusId),this._domErrorSection=e.getElementById(this._domErrorSectionId),this._srWarningContainer=e.getElementById(this._srWarningContainerId),this.data.disabled&&(this._addClass(this.HIDDEN_CLASS,this._domButtonMinus),this._addClass(this.HIDDEN_CLASS,this._domButtonPlus)),aria.utils.Event.addListener(this._domButtonMinusId,"click",{fn:this._buttonClicked,scope:this,args:this.BUTTON_MINUS}),aria.utils.Event.addListener(this._domButtonPlusId,"click",{fn:this._buttonClicked,scope:this,args:this.BUTTON_PLUS})},setWidgetProperty:function(e,t){if(e==this.PROPERTY_VALUE){var i=this._bindingListeners[this.PROPERTY_VALUE];this._validateInternalDataModel({newValue:t})||(t=this._resetValue.toString(),this._jsonUtil.setValue(i.inside,i.to,this._transform(i.transform,t,"fromWidget"))),this._jsonUtil.setValue(this.data,this.PROPERTY_VALUE,t)}else e==this.PROPERTY_DISABLED&&this._jsonUtil.setValue(this.data,this.PROPERTY_DISABLED,t)},_notifyDataChange:function(e,t){if(t==this.PROPERTY_VALUE){var i=this._bindingListeners[this.PROPERTY_VALUE],n=this._transform(i.transform,e.newValue,"toWidget");this._validateInternalDataModel({newValue:n})||(n=this._resetValue.toString(),this._jsonUtil.setValue(i.inside,i.to,this._transform(i.transform,n,"fromWidget"))),this._jsonUtil.setValue(this.data,this.PROPERTY_VALUE,n,this._internalDataModelChange)}else t==this.PROPERTY_DISABLED&&this._jsonUtil.setValue(this.data,this.PROPERTY_DISABLED,e.newValue)},_stateChange:function(){this._srWarningContainer.innerHTML=this._i18n.getStringFromPattern(this._cfg.srWarning,[this.data.value])},_updateExternalDataModel:function(e){var t=this._validateInternalDataModel(e);if(t){var i=this._bindingListeners.value;if(i){var n=this._transform(i.transform,e.newValue,"fromWidget");this._jsonUtil.setValue(i.inside,i.to,n,i.cb)}this._onValueChange&&this.$callback(this._onValueChange)}},_validateInternalDataModel:function(e){var t=e.newValue,i=this._isInteger(t);if(!i)return this._addErrorState(this._i18n.getErrorMessage(this.ERROR_CODE_NUMBER)),!1;var n=this._validateMinMaxValues(t);return n?this._step==this.DEFAULT_STEP||this._isAllowedValue(t)?(this._removeErrorState(),!0):(this._addErrorState(this._labelInvalidValue),!1):(this._addErrorState(this._labelMinMax),!1)},_disabledStateChange:function(e){e.newValue?(this._addClass(this.HIDDEN_CLASS,this._domButtonMinus),this._addClass(this.HIDDEN_CLASS,this._domButtonPlus)):(this._removeClass(this.HIDDEN_CLASS,this._domButtonMinus),this._removeClass(this.HIDDEN_CLASS,this._domButtonPlus))},_getTextInputConfig:function(){var e={attributes:{classList:["form-control","stepper-input","stepper-text-input"]},errorId:this._domErrorSectionId,bind:{value:{to:this.PROPERTY_VALUE,inside:this.data},disabled:{to:this.PROPERTY_DISABLED,inside:this.data},error:{to:"error",inside:this.data}},on:{keydown:{fn:this._onTextfieldKeyDown,scope:this}}};if(this._cfg.notifyChangeOnType){var t={fn:this._onTextfieldKeyUp,scope:this};e.on.keyup=t}return this._cfg.inputClass&&e.attributes.classList.push(this._cfg.inputClass),e},_onTextfieldKeyUp:function(e){if(!e.shiftKey&&e.keyCode!=aria.DomEvent.KC_TAB&&e.keyCode!=e.KC_UP&&e.keyCode!=e.KC_DOWN){var t=this._inputField._domElt;t&&this._jsonUtil.setValue(this.data,this.PROPERTY_VALUE,t.value)}},_onTextfieldKeyDown:function(e){e.keyCode==e.KC_UP?(e.preventDefault(),this._increment()):e.keyCode==e.KC_DOWN&&(e.preventDefault(),this._decrement())},_getSelectConfig:function(){var e=this._createDropdownOptions(),t={attributes:{classList:["form-control","stepper-input","stepper-dropdown"]},options:e,errorId:this._domErrorSectionId,bind:{value:{to:this.PROPERTY_VALUE,inside:this.data},disabled:{to:this.PROPERTY_DISABLED,inside:this.data},error:{to:"error",inside:this.data}}};return this._cfg.inputClass&&t.attributes.classList.push(this._cfg.inputClass),t},_createDropdownOptions:function(){var e,t=[];for(i=this._minValue;i<=this._maxValue;i+=this._step)e={value:i.toString(),label:i.toString()},t.push(e);return t},_buttonClicked:function(e,t){e.preventDefault(),t==this.BUTTON_PLUS?this._increment():t==this.BUTTON_MINUS&&this._decrement()},_increment:function(){var e=""==this.data.value?0/0:+this.data.value,t=null;if(isNaN(e))t=this._resetValue;else{if(e>=this._maxValue)return this._addErrorState(this._labelMaxReached),void(this._srWarningContainer.innerHTML=this._i18n.getStringFromPattern(this._cfg.srWarningMaximum,[this._maxValue]));t=!this._isAllowedValue(e)||e<this._minValue?this._getUpperAllowedValue(e):e+this._step}this._jsonUtil.setValue(this.data,this.PROPERTY_VALUE,t.toString())},_decrement:function(){var e=""==this.data.value?0/0:+this.data.value,t=null;if(isNaN(e))t=this._resetValue;else{if(e<=this._minValue)return this._addErrorState(this._labelMinReached),void(this._srWarningContainer.innerHTML=this._i18n.getStringFromPattern(this._cfg.srWarningMinimum,[this._minValue]));t=!this._isAllowedValue(e)||e>this._maxValue?this._getLowerAllowedValue(e):e-this._step}this._jsonUtil.setValue(this.data,this.PROPERTY_VALUE,t.toString())},_validateMinMaxValues:function(e){var t=!0,i=parseInt(e);return(null!=this._minValue&&i<this._minValue||null!=this._maxValue&&i>this._maxValue)&&(t=!1),t},_updateErrorMessage:function(e){var t=this._domErrorSection;t&&(t.innerHTML=e)},_addErrorState:function(e){e&&(this._addClass(this.ERROR_CLASS,this._domDiv),this._addClass(this.ERROR_SECTION_CLASS,this._domErrorSection),this._updateErrorMessage(e),this._jsonUtil.setValue(this.data,"error",e))},_removeErrorState:function(){this._removeClass(this.ERROR_CLASS,this._domDiv),this._removeClass(this.ERROR_SECTION_CLASS,this._domErrorSection),this._updateErrorMessage("")},_addClass:function(e,t){t&&-1==aria.utils.Array.indexOf(t.className,e)&&(t.className+=" "+e)},_removeClass:function(e,t){t&&(t.className=aria.utils.String.trim(t.className.replace(e,"")))},_isInteger:function(e){return this.INT_REGEX.test(e)},_isAllowedValue:function(e){var t=(parseInt(e)-this._minValue)%this._step;return 0==t},_getUpperAllowedValue:function(e){var t=null;if(e<this._minValue)t=this._minValue;else{var i=e-this._minValue,n=i%this._step;t=Math.min(this._maxValue,i+(this._step-n)+this._minValue)}return t},_getLowerAllowedValue:function(e){var t=null;if(null!=this._maxValue&&e>this._maxValue)t=this._maxValue;else{var i=e-this._minValue,n=i%this._step;t=Math.max(this._minValue,i-n+this._minValue)}return t}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/stepper/style/StepperStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.stepper.style.StepperStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this){var shadowButton="1px 1px 2px rgba(0,0,0,.25)",shadowInput="inset 2px 2px 3px rgba(0,0,0,.05)",shadowInputFocus="inset 0 1px rgba(0,0,0,.075),0 0 8px rgba(0,94,184,.6)",inputWhite="#fdfdfd";this.__$write("\n\n.stepper .stepper-button {\ndisplay: block;\nposition: relative;\nz-index: 2;\n-moz-box-shadow: ",27),this.__$write(shadowButton,32),this.__$write(";\n-webkit-box-shadow: ",32),this.__$write(shadowButton,33),this.__$write(";\nbox-shadow: ",33),this.__$write(shadowButton,34),this.__$write(";\n}\n\n\n.stepper .stepper-minus-button {\n}\n\n\n.stepper .stepper-plus-button {\n}\n\n\n.stepper .stepper-input {\nposition: relative;\nz-index: 1;\nwidth: auto;\nmin-width: 45px;\n-moz-box-shadow: ",34),this.__$write(shadowInput,51),this.__$write(";\n-webkit-box-shadow: ",51),this.__$write(shadowInput,52),this.__$write(";\nbox-shadow: ",52),this.__$write(shadowInput,53),this.__$write(";\n\ntext-align: center;\nmargin-left: -1px;\nmargin-right: -1px;\n}\n\n.stepper input:focus,\n.stepper select:focus {\nz-index: 3;\nborder-color: ",53),this.__$write(this.$blue,63),this.__$write(";\nbox-shadow: ",63),this.__$write(shadowInputFocus,64),this.__$write(";\n}\n\n.stepper .stepper-input:not([disabled]) {\nbackground-color: ",64),this.__$write(inputWhite,68),this.__$write(";\n}\n\n.stepper.form-group.has-error .stepper-input {\nz-index: 3;\nborder-top-color: ",68),this.__$write(this.$red,73),this.__$write(";\nborder-bottom-color: ",73),this.__$write(this.$red,74),this.__$write(";\n\ntext-align-last: center;\n}\n\n\n.stepper.has-feedback .stepper-text-input.form-control {\npadding: 5px 0px;\n}\n\n\n.stepper .stepper-dropdown {\nbackground-image: none;\n}\n\n\n.stepper .stepper-error.help-block {\nclear: both;\npadding-top: 5px;\n}\n\n.stepper .stepper-button,\n.stepper .stepper-input {\nfloat: left;\n}\n\n.stepper .stepper-dropdown {\npadding-right: 0.5em;\n",74),aria.core.Browser.isIE9||aria.core.Browser.isIE8||this.__$write("\npadding-left: 0.5em;\n",103),this.__$write("\n\n}\n",105)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/summaryDialog/core/TripSummaryDialog.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.summaryDialog.core.TripSummaryDialog",$extends:"aria.widgetLibs.BindableWidget",$dependencies:["plnextv2.utils.widgets.plnextLib.dialog.bean.DialogCfgBeans","aria.utils.Dom","plnextv2.utils.FocusUtils","aria.templates.NavigationManager","aria.utils.AriaWindow"],$css:["plnextv2.utils.widgets.plnextLib.summaryDialog.style.TripSummaryDialogStyle"],$statics:{INVALID_CONFIGURATION:"%1 sliding-panel invalid configuration !",ZINDEX_DIALOG:16777271,openedPopup:null},$constructor:function(e,t,i){this.__normalizeCfg(e),this.$BindableWidget.constructor.apply(this,[e,t,i]),this._registerBindings(),this._document=null,this._popup=null,this._resetTabTriggerBefore=null,this._resetTabTriggerAfter=null,this._closeButtonId=this._createDynamicId(),this.shiftKeyPressed=!1,this._delegateId=aria.utils.Delegate.add({fn:this._delegate,scope:this}),this._FocusUtils=plnextv2.utils.FocusUtils,this._dialogManager=plnextv2.utils.widgets.plnextLib.dialog.core.DialogManager},$destructor:function(){this.close(),this._document=null,this._popup=null,this._closeButtonId=null,this._delegateId&&(aria.utils.Delegate.remove(this._delegateId),this._delegateId=null),this.$BindableWidget.$destructor.call(this)},$prototype:{initWidget:function(){},__normalizeCfg:function(e){e.visible=e.visible===!0},writeMarkupBegin:function(e){e.write('<div id="reset-tab-trigger-before" class="plnext-sr-only hidden" tabindex="0"></div><div id = "sliding-panel-'+this._cfg.id+'" >'),this._cfg.macro&&e.callMacro(this._cfg.macro)},writeMarkupEnd:function(e){e.write('<div style="clear:both;"></div></div><div id="reset-tab-trigger-after" class="plnext-sr-only hidden" tabindex="0"></div>')},_notifyDataChange:function(e,t){this._resizeDialog(),this._onBoundPropertyChange(t,e.newValue,e.oldValue)},_delegate:function(e){"click"==e.type&&this.changeProperty("visible",!1)},_onBoundPropertyChange:function(e,t){"visible"===e?(this._cfg.visible=t,t?(this._cfg.onOpen&&this.evalCallback(this._cfg.onOpen),this.open()):(this._cfg.onClose&&this.evalCallback(this._cfg.onClose),this.close())):"contentLoaded"===e&&(this._cfg.contentLoaded=t,t&&this._resizeDialog())},open:function(){var e=plnextv2.utils.widgets.plnextLib.dialog.core.Dialog.openedPopup;e!==this&&(null!=e&&e.changeProperty("visible",!1),plnextv2.utils.widgets.plnextLib.dialog.core.Dialog.openedPopup=this,this._popup=aria.utils.Dom.getElementById("sliding-panel-"+this._cfg.id),this._resetTabTriggerBefore=new aria.templates.DomElementWrapper(aria.utils.Dom.getElementById("reset-tab-trigger-before")),this._resetTabTriggerAfter=new aria.templates.DomElementWrapper(aria.utils.Dom.getElementById("reset-tab-trigger-after")),this._resetTabTriggerBefore.classList.remove("hidden"),this._resetTabTriggerAfter.classList.remove("hidden"),this._connectEvents(),this._mask=this._createMask(),this._updatePosition(aria.utils.Dom.getGeometry(this._popup)),this._displayElement(this._popup,!0),this._popup.parentNode.insertBefore(this._mask,this._popup))},close:function(){this._resetTabTriggerBefore&&this._resetTabTriggerBefore.classList.add("hidden"),this._resetTabTriggerAfter&&this._resetTabTriggerAfter.classList.add("hidden"),this._disconnectEvents(),this._popup&&(this._popup.removeAttribute("style"),this._displayElement(this._popup,!1),this._removeDomElement(this._mask),this._popup=null,plnextv2.utils.widgets.plnextLib.dialog.core.Dialog.openedPopup=null)},_updatePosition:function(){this._popup&&(this._popup.style.position="relative",this._popup.style.zIndex=this.ZINDEX_DIALOG)},_displayElement:function(e,t){var i=new aria.utils.ClassList(e);t?i.add("trip-summary-dialog"):i.remove("trip-summary-dialog")},_resizeDialog:function(){var e=this;setTimeout(function(){var t,i=aria.utils.Dom.getElementById("sliding-panel-"+e._cfg.id);t=document.getElementsByClassName?document.getElementsByClassName("slider-content-sctn")[0]:document.querySelectorAll(".slider-content-sctn")[0];var n=0,s=document.getElementById("trip-summary");if(null!=s&&(n=Math.max(s.clientHeight,s.scrollHeight,s.offsetHeight)),t){var a=Math.max(t.clientHeight,t.scrollHeight,t.offsetHeight);a>n&&(n=a),i.style.minHeight=n+100+"px",setTimeout(function(){i.style.minHeight=n+100+"px"},1)}},0)},_createMask:function(){var e;return this._popup&&(e=this._document.createElement("div"),e.id="sliding-panelMask_"+this._cfg.id,e.className=this._cfg.maskCssClass?this._cfg.maskCssClass:"sliding-panel-mask",e.style.zIndex=this.ZINDEX_DIALOG,e.style.position="fixed",e.style.width="280%",e.style.height="100%",e.style.top=0,e.style.left="-60%",e.style.bottom=0),e},_removeDomElement:function(e){e&&aria.utils.Dom.removeElement(e)},_onDocumentClick:function(e){if(this._popup){var t=new aria.DomEvent(e),i=t.target;this._cfg.closeOnMouseClick&&!aria.utils.Dom.isAncestor(i,this._popup)&&aria.utils.Dom.isAncestor(i,aria.utils.Dom.getElementById("main-container"))&&aria.utils.Dom.isInViewport({top:e.pageY,left:e.pageX},{height:1,width:1})&&this.changeProperty("visible",!1),t.$dispose()}},_onViewportResized:function(){this._updatePosition(aria.utils.Dom.getGeometry(this._popup)),this._resizeDialog()},_onKeyPress:function(e){this._cfg.closeOnEscape=this._cfg.hasOwnProperty("closeOnEscape")?this._cfg.closeOnEscape:!0,27==e.keyCode&&this._cfg.closeOnEscape&&this.changeProperty("visible",!1),this.shiftKeyPressed=e.shiftKey},_connectEvents:function(){this._disconnectEvents(),this._document=Aria.$window.document,aria.utils.AriaWindow.attachWindow(),aria.utils.Event.addListener(this._document,"mousedown",{fn:this._onDocumentClick,scope:this},!0),aria.utils.Event.addListener(this._document,"touchend",{fn:this._onDocumentClick,scope:this},!0),aria.utils.Event.addListener(this._document,"keydown",{fn:this._onKeyPress,scope:this},!0),aria.utils.Event.addListener(this._document,"focusin",{fn:this._onDocumentFocusIn,scope:this},!0),aria.utils.AriaWindow.$on({unloadWindow:this.$destructor,scope:this}),aria.templates.Layout.$on({viewportResized:this._onViewportResized,scope:this})},_onDocumentFocusIn:function(e){var t=new aria.DomEvent(e),i=t.target;this._dialogManager&&this._dialogManager.getCurrentPopup()||aria.utils.Dom.isAncestor(i,this._popup)||this._FocusUtils.focusFirst(this._popup,this.shiftKeyPressed),t.$dispose()},_disconnectEvents:function(){this._document&&(aria.utils.Event.removeListener(this._document,"mousedown",{fn:this._onDocumentClick}),aria.utils.Event.removeListener(this._document,"touchend",{fn:this._onDocumentClick}),aria.utils.Event.removeListener(this._document,"keydown",{fn:this._onKeyPress}),aria.utils.Event.removeListener(this._document,"focusin",{fn:this._onDocumentFocusIn}),aria.utils.AriaWindow.$unregisterListeners(this),aria.templates.Layout.$unregisterListeners(this),aria.utils.AriaWindow.detachWindow(),this._document=null)},setProperty:function(e,t){var i;if(!this._cfg)return null;var n=this._cfg.bind,s=this.getProperty(e);if(this._cfg[e]=t,n){var a=n[e];if(a){var r=a.inside,o=a.to,l=a.transform;if(r&&(o||0===o)){i=this._transform(l,t,"fromWidget");var c=this._bindingListeners[e];aria.utils.Json.setValue(r,o,i,c?c.cb:null)}}}return s!==t?{oldValue:s,newValue:t}:void 0},setWidgetProperty:function(e,t){if(this._cfg){var i=this.getProperty(e);t!=i&&(this._cfg[e]=t,this._onBoundPropertyChange(e,t,i))}},changeProperty:function(e,t){this._cfg&&(this.setWidgetProperty(e,t),this.setProperty(e,t))},getProperty:function(e){return this._cfg?this._cfg[e]:null}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/summaryDialog/style/TripSummaryDialogStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.summaryDialog.style.TripSummaryDialogStyle",$extends:require("ariatemplates/templates/CSSTemplate.js"),$constructor:function(){this.$CSSTemplate.constructor.call(this)},$destructor:function(){this.$CSSTemplate.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n.trip-summary-dialog {\nbackground-color: #f8f8f8;\nvisibility : visible;\nanimation: trip-summary-slide 0.5s forwards;\noverflow:visible;\n-webkit-animation: trip-summary-slide 0.5s forwards;\nborder-bottom: 1px solid #333;\nborder-right: 300px solid #f8f8f8;\nbox-shadow: 5px 5px 15px #333;\nbox-sizing: content-box;\nborder-right:0\\9;\nmargin-left:9%;\n}\n\n.sliding-panel-content {\noverflow: auto;\npadding: 20px 0 10px 20px;\n}\n\n.sliding-panel-mask {\nbackground-color : #000;\nfilter: alpha(opacity=65);\n-khtml-opacity: 0.65;\n-moz-opacity: 0.65;\nopacity: 0.65;\nanimation: fadein 0.5s forwards;\n-webkit-animation: fadein 0.5s forwards;\n}\n\n@keyframes fadein {\nfrom { opacity: 0; }\nto   { opacity: 0.65; }\n}\n\n@-webkit-keyframes fadein {\nfrom { opacity: 0; }\nto   { opacity: 0.65; }\n}\n\n@keyframes trip-summary-slide {\nfrom {\nmargin-left: 50%;\nwidth: 101%;\n}\n\nto {\nmargin-left: 9%;\nwidth: 100%;\n}\n}\n\n@-webkit-keyframes trip-summary-slide {\nfrom {\nmargin-left: 50%;\nwidth: 101%;\n}\n\nto {\nmargin-left: 9%;\nwidth: 100%;\n}\n}\n",6)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$csslibs={},e.__$prefix=!0},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/switchBtn/core/Switch.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.switchBtn.core.Switch",$extends:"aria.widgets.Widget",$css:["plnextv2.utils.widgets.plnextLib.switchBtn.style.SwitchCss"],$statics:{INVALID_CONFIGURATION:"%1Invalid configuration for the slider!",BUTTON_WIDTH:23,LEFT:!0,RIGHT:!1},$dependencies:["plnextv2.utils.widgets.plnextLib.switchBtn.bean.SwitchCfgBeans","aria.utils.Event","aria.DomEvent"],$constructor:function(){this.$BaseWidget.constructor.apply(this,arguments);var e={beanName:"plnextv2.utils.widgets.plnextLib.switchBtn.bean.SwitchCfgBeans.SwitchCfg",json:this._cfg};try{this._cfgOk=aria.core.JsonValidator.normalize(e,!0)}catch(t){this.$logError(this.INVALID_CONFIGURATION,null,t)}if(this._cfgOk){this._switchOnLabel=this._cfg.onLabel,this._switchOffLabel=this._cfg.offLabel,this._eventLaunched=!1;var i=this._cfg.bind;i&&(this._bindingCallback={fn:this._notifyDataChange,scope:this},aria.utils.Json.addListener(i.inside,i.to,this._bindingCallback,!1)),this._domSwitchId=this._createDynamicId(),this._domInputId=this._createDynamicId(),this._delegateId=aria.utils.Delegate.add({fn:this._delegate,scope:this}),this._readValue()}},$destructor:function(){if(this._delegateId&&(aria.utils.Delegate.remove(this._delegateId),this._delegateId=null),this._bindingCallback){var e=this._cfg.bind;aria.utils.Json.removeListener(e.inside,e.to,this._bindingCallback,!1),this._bindingCallback=null}this.$BaseWidget.$destructor.call(this)},$prototype:{writeMarkup:function(e){if(this._cfgOk){var t;t=['<div class="switch"><input ',aria.utils.Delegate.getMarkup(this._delegateId),' type="checkbox" id=',this._domInputId,'><span class="spanswitch on">',this._switchOnLabel,'</span><span class="spanswitch unchecked" id="',this._domSwitchId,'"></span><span class="spanswitch off">',this._switchOffLabel,"</span></div>"],e.write(t.join(""))}},_delegate:function(e){var t=this["_button_"+e.type];t&&t.call(this,e)},_button_click:function(){this._setValue(),this._updateDisplay(!0)},_button_focus:function(){this._updateDisplay(!0)},_button_blur:function(){this._updateDisplay(!1)},_setValue:function(){this._value=!this._value;var e=this._cfg.bind;e&&aria.utils.Json.setValue(e.inside,e.to,this._value)},_notifyDataChange:function(){this._readValue(),this._updateDisplay()},_updateDisplay:function(e){var t=this.getDom(this._domSwitchId),i="spanswitch";i+=this._value?" checked":" unchecked",e&&(i+=" focused"),t.className=i,t=this.getDom(this._domInputId),t.checked=this._value},initWidget:function(){var e=this.getDom(this._domInputId);e.checked=this._value,this._updateDisplay()},getDom:function(e){var t=aria.utils.Dom.getElementById(e);return t},_readValue:function(){var e=null;binding=this._cfg.bind,binding?(binding.inside[binding.to]||(binding.inside[binding.to]=!1),e=binding.inside[binding.to]):e=!1,this._value=e}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/switchBtn/style/SwitchCss.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.switchBtn.style.SwitchCss",$extends:require("ariatemplates/templates/CSSTemplate.js"),$constructor:function(){this.$CSSTemplate.constructor.call(this)},$destructor:function(){this.$CSSTemplate.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write('\n.switch {\nwidth: 100px;\nheight: 30px;\nposition: relative;\nbackground-color : #bcbcbc;\nborder:outset thin;\ncursor: pointer;\n}\n\n.switch .focused {\noutline-width: 2px;\noutline-style: solid;\noutline-color: #0AB4E2;\n}\n\n.switch input[type="checkbox"] {\n-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";\nfilter: alpha(opacity=0);\n-moz-opacity: 0;\nopacity: 0;\nz-index: 100;\nposition: absolute;\nleft:0;\nwidth: 100%;\nheight: 100%;\ncursor: pointer;\nmargin:0;\npadding:0;\n}\n\n.switch .spanswitch{\nfloat:left;\nwidth:50%;\nheight:100%;\ntext-align:center;\nfont-style: normal;\nfont-weight: bold;\nfont-family: Helvetica, Arial, sans-serif;\ntext-transform: uppercase;\ntext-shadow: 0 1px 0 #bcb8ae, 0 -1px 0 #97958e;\noverflow: hidden;\ntext-overflow: ellipsis;\n}\n\n.switch .on{\nbackground: #005EB8;\ncolor: #ffffff;\n}\n\n.switch .unchecked,.switch .checked{\ntop:0;\nposition:absolute;\nz-index: 90;\nbackground-color : white;\n}\n.switch .checked{\nleft:50%;\n}\n\n.switch .unchecked{\nleft:0;\n}\n\n',37)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$csslibs={},e.__$prefix=!0},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/tabBar/core/TabBar.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.tabBar.core.TabBar",$extends:"aria.widgets.Widget",$dependencies:["plnextv2.utils.widgets.plnextLib.tabBar.bean.TabBarCfgBeans","aria.utils.Type","plnextv2.utils.I18n","plnextv2.utils.animations.ripple.Ripple"],$css:["plnextv2.utils.widgets.plnextLib.tabBar.style.TabBarCss"],$statics:{ANIMATION_DURATION:400,KEY_CODE_ENTER:13,KEY_CODE_SPACE:32,KEY_CODE_TAB:9,DIRECTION_LEFT:"left",DIRECTION_RIGHT:"right",HIDE_SCROLL_BTN_CSS_CLASS:"not-visible",TAB_BTN_SELECTED_CLASS:"tab-button-selected",HAS_FOCUS:"has-focus",NO_SCROLL_CLASS_NAME:"no-scroll",BREAKPOINT_XS:768},$constructor:function(){this._cfgBean="plnextv2.utils.widgets.plnextLib.tabBar.bean.TabBarCfgBeans.TabBarCfg",this.$Widget.constructor.apply(this,arguments),this._widgetId=this._createDynamicId(),this._tabsContainerId=this._widgetId+"-tabs-container",this._leftButtonId=this._widgetId+"-left-btn",this._rightButtonId=this._widgetId+"-right-btn",this._underlineBarId=this._widgetId+"-underline-bar",this._setFocusIndex(this._getSelectedIndex()),this.__updateScrollEnabled()},$destructor:function(){this._jqTabsContainer.off(),this._jqTabItems.off(),this._jqLeftButton.off(),this._jqRightButton.off()},$prototype:{writeMarkup:function(e){this._out=e;var t=this._scrollEnabled?"":this.NO_SCROLL_CLASS_NAME,i=['<div id="'+this._widgetId+'" class="tab-bar clearfix">',this._createNavButton(this.DIRECTION_LEFT),'<div id="'+this._tabsContainerId+'" class="tabs-container '+t+'">',this._createTabs(),this._createUnderlineBar(),"</div>",this._createNavButton(this.DIRECTION_RIGHT),"</div>"];this._out.write(i.join(""))},_createTabs:function(){var e=[];e.push('<ul class="tab-bar-list" role="tablist">');for(var t=0;t<this._cfg.buttonBeans.length;t++){var i=this._cfg.buttonBeans[t],n="false",s="";t===this._getFocusIndex()&&(n="true",s=this.TAB_BTN_SELECTED_CLASS),e.push('<li tabindex="0" data-tab-index="'+t+'" class="btn list-item '+s+'" ','role="tab" aria-selected="'+n+'">',i.label,"</li>")}return e.push("</ul>"),e.join("")},_createUnderlineBar:function(){var e=['<div id="'+this._underlineBarId+'" class="underline-bar" aria-hidden="true"></div>'];return e.join("")},_createNavButton:function(e){var t=[],i=this._leftButtonId,n=this.HIDE_SCROLL_BTN_CSS_CLASS,s="nav-button-left icon-chevron-left";return e===this.DIRECTION_RIGHT&&(i=this._rightButtonId,s="nav-button-right icon-chevron-right",this._cfg.buttonBeans.length>this.__getEffectiveNumberOfButtonsDisplayed()&&(n="")),t.push('<div id="'+i+'" class="nav-button-container '+n+'" aria-hidden="true">','<button tabindex="0" class="nav-button '+s+'"></button>',"</div>"),t.join("")},_getSelectedIndex:function(){var e=0,t=this._cfg.defaultSelectionIndex;return aria.utils.Type.isNumber(this._cfg.defaultSelectionIndex)&&t>0&&t<this._cfg.buttonBeans.length&&(e=t),e},initWidget:function(){this._jqTabsContainer=$("#"+this._tabsContainerId),this._jqTabList=$("#"+this._widgetId+" .tab-bar-list"),this._jqTabItems=$("#"+this._widgetId+" .tab-bar-list li"),this._jqLeftButton=$("#"+this._leftButtonId),this._jqRightButton=$("#"+this._rightButtonId),this._jqUnderlineBar=$("#"+this._underlineBarId),this._handleTabBarResize(),$(window).resize({scope:this},function(e){e.data.scope._handleTabBarResize.call(e.data.scope,e),e.data.scope._updateScrollButtonVisibility.call(e.data.scope)}),this._jqTabsContainer.keydown({scope:this},function(e){e.data.scope._handleKeyDown.call(e.data.scope,e)}),this._scrollEnabled&&this._jqTabsContainer.scroll({scope:this},function(e){e.data.scope._updateScrollButtonVisibility.call(e.data.scope)}),this._jqTabItems.click({scope:this},function(e){e.data.scope._selectTab.call(e.data.scope,e)}),this._jqLeftButton.click({scope:this},function(e){var t=e.data.scope;t._handleButtonScroll.call(t,e,t.DIRECTION_LEFT)}),this._jqRightButton.click({scope:this},function(e){var t=e.data.scope;t._handleButtonScroll.call(t,e,t.DIRECTION_RIGHT)}),this._cfg.callOnClickOnInit&&this._jqTabItems[this._getFocusIndex()].click()},_handleTabBarResize:function(){$(this._jqTabList).css("width",this._getTotalWidthOfTabs()+"px");var e=this._getTabWidth();$(this._jqTabItems).css("width",e+"px"),$(this._jqUnderlineBar).css("width",e+"px"),this.__updateScrollEnabled(),this._scrollTabIntoViewport(),this._moveUnderlineBar()},__updateScrollEnabled:function(){this._scrollEnabled=this._cfg.buttonBeans.length>this.__getEffectiveNumberOfButtonsDisplayed(),this._jqTabsContainer&&(this._scrollEnabled?this._jqTabsContainer.removeClass(this.NO_SCROLL_CLASS_NAME):this._jqTabsContainer.addClass(this.NO_SCROLL_CLASS_NAME))},_handleKeyDown:function(e){switch(e.keyCode){case this.KEY_CODE_TAB:e.stopPropagation(),this._handleTabKey(e.shiftKey);break;case this.KEY_CODE_SPACE:case this.KEY_CODE_ENTER:e.stopPropagation(),this._selectTab(e)}},_handleTabKey:function(e){this._incrementFocusIndex(e?-1:1),this._scrollEnabled&&this._scrollTabIntoViewport()},_incrementFocusIndex:function(e){var t=this._getFocusIndex()+e;t>=0&&t<this._cfg.buttonBeans.length&&this._setFocusIndex(t)},_selectTab:function(e){this._setFocusIndex(e.target.dataset.tabIndex),this._scrollEnabled&&this._scrollTabIntoViewport(),this._setAriaSelectedStatus(),this._highlightSelectedTab(),this._moveUnderlineBar(),this.$callback(this._cfg.buttonBeans[this._getFocusIndex()].onClick,e)},_setAriaSelectedStatus:function(){$(this._jqTabItems).attr("aria-selected","false"),$(this._jqTabItems[this._getFocusIndex()]).attr("aria-selected","true")},_highlightSelectedTab:function(){$(this._jqTabItems).removeClass(this.TAB_BTN_SELECTED_CLASS),$(this._jqTabItems[this._getFocusIndex()]).addClass(this.TAB_BTN_SELECTED_CLASS)},_moveUnderlineBar:function(){var e=this._jqTabItems[this._getFocusIndex()].offsetLeft;$(this._jqUnderlineBar).css("transform","translateX("+e+"px)")},_scrollTabIntoViewport:function(){var e=this._jqTabItems[this._getFocusIndex()],t=this._getTabWidth(),i=e.offsetLeft,n=i+t,s=this._getScrollOffset(),a=s+this._getTabContainerWidth(),r=0;s>i?(r=Math.max(t,Math.abs(i-s)),this._scroll(this.DIRECTION_LEFT,r)):n>a&&(r=Math.max(t,Math.abs(n-a)),this._scroll(this.DIRECTION_RIGHT,r))},_handleButtonScroll:function(e,t){e.preventDefault(),this._scroll(t,this._getScrollButtonMaxDelta())},_scroll:function(e,t){var i=this._getRightScrollBound(),n=this._getScrollOffset();e===this.DIRECTION_LEFT?n-t>0?n-=t:n=0:i>=n+t?n+=t:n=i,$(this._jqTabsContainer).animate({scrollLeft:n},this.ANIMATION_DURATION)},_updateScrollButtonVisibility:function(){var e=this._getScrollOffset();0>=e?this._jqLeftButton.addClass(this.HIDE_SCROLL_BTN_CSS_CLASS):this._jqLeftButton.removeClass(this.HIDE_SCROLL_BTN_CSS_CLASS),e>=this._getRightScrollBound()?this._jqRightButton.addClass(this.HIDE_SCROLL_BTN_CSS_CLASS):this._jqRightButton.removeClass(this.HIDE_SCROLL_BTN_CSS_CLASS)},_setFocusIndex:function(e){null!=e&&(aria.utils.Type.isNumber(e)||(e=parseInt(e,10)),this._focusIndex=e)},_getFocusIndex:function(){return this._focusIndex},_getTabContainerWidth:function(){var e=Math.floor($(this._jqTabsContainer).width());return e},_getTabWidth:function(){var e=0,t=this.__getResponsiveWidth(),i=this._getTabContainerWidth(),n=this._cfg.buttonBeans.length,s=this.__getEffectiveNumberOfButtonsDisplayed();return e=Math.floor(t<=this.BREAKPOINT_XS&&s>n?i/n:i/s)},__getResponsiveWidth:function(){return window.innerWidth},_getTotalWidthOfTabs:function(){return this._getTabWidth()*this._cfg.buttonBeans.length},_getScrollButtonMaxDelta:function(){return(this.__getEffectiveNumberOfButtonsDisplayed()-1)*this._getTabWidth()},_getRightScrollBound:function(){return this._getTotalWidthOfTabs()-this._getTabContainerWidth()},_getScrollOffset:function(){return $(this._jqTabsContainer).scrollLeft()},__getEffectiveNumberOfButtonsDisplayed:function(){if(!this._cfg.responsiveNumberOfButtonsDisplayed)return this._cfg.numberOfButtonsDisplayed;var e;responsiveWidth=this.__getResponsiveWidth();for(var t=0;t<this._cfg.responsiveNumberOfButtonsDisplayed.length;t++)if(e=this._cfg.responsiveNumberOfButtonsDisplayed[t],this.__isNumberInInterval(responsiveWidth,e))return e.numberOfButtonsDisplayed;return this._cfg.numberOfButtonsDisplayed},__isNumberInInterval:function(e,t){return(!t.min||t.min<=e)&&(e<=t.max||!t.max)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/tabBar/style/TabBarCss.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.tabBar.style.TabBarCss",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n.tab-bar {\ndisplay: flex;\nflex-flow: row nowrap;\nwidth: 100%;\nbackground-color: ",14),this.__$write(this.$tabletLightGray,19),this.__$write(";\ntext-align: center;\nvertical-align: middle;\nborder-top: 1px solid ",19),this.__$write(this.$grayDarken,22),this.__$write(";\n}\n\n.tabs-container {\nwidth: 100%;\nheight: ",22),this.__$write(tabbarHeight,27),this.__$write(";\noverflow-x: scroll;\n-webkit-overflow-scrolling: touch;\nposition: relative;\n}\n\n.tab-bar-list {\npadding: 0;\nmargin: 0;\nfloat: left;\nlist-style: none;\nheight: ",27),this.__$write(tabHeight,38),this.__$write(";\n}\n\n.list-item {\nfloat: left;\nheight: ",38),this.__$write(tabHeight,43),this.__$write(";\nwhite-space: normal;\noverflow: hidden;\nmargin: 0;\npadding: 0 10px;\nbox-shadow: none;\nwidth: 200px;\nborder: 0;\nbackground: transparent;\ntext-transform: uppercase;\nfont-weight: ",43),this.__$write(this.$normal,53),this.__$write(";\ndisplay: flex;\nalign-items: center;\njustify-content: center;\n}\n\n.tab-button-selected {\nfont-weight: ",53),this.__$write(this.$bold,60),this.__$write(";\n}\n\n.not-visible {\nvisibility: hidden;\n}\n\n.nav-button-container {\nwidth: ",60),this.__$write(navButtonWidth,68),this.__$write(";\ntransition: visibility 0.2s;\n}\n\n.nav-button {\noverflow: hidden;\nmargin: 0;\npadding: 0;\nbox-shadow: none;\nheight: ",68),this.__$write(tabbarHeight,77),this.__$write(";\nwidth: ",77),this.__$write(navButtonWidth,78),this.__$write(";\ncolor: ",78),this.__$write(this.$gray,79),this.__$write(";\nbackground: ",79),this.__$write(this.$almostBlack,80),this.__$write(";\nborder: 0;\nfont-weight: ",80),this.__$write(this.$bold,82),this.__$write(";\nfont-size: 16px;\n}\n\n.nav-button-left, .nav-button-right {\nfont-size: 16px;\n}\n\n.tab-bar li:focus,\n.tab-bar li:active {\noutline: 1px solid ",82),this.__$write(this.$blue,92),this.__$write(";\noutline-offset: -1px;\nbox-shadow: inset 0 1px 1px ",92),this.__$write(this.$blackFullOpaque,94),this.__$write(", 0 0 8px ",94),this.__$write(this.$blue,94),this.__$write(";\n}\n\n.underline-bar {\ndisplay: inline-block;\nposition: absolute;\nleft: 0;\nbottom: 0;\nheight: 7px;\nwidth: 200px;\nbackground-color: ",94),this.__$write(this.$blue,104),this.__$write(";\ntransition: transform 0.6s cubic-bezier(0.35, 0, 0.25, 1), width 0.4s;\n}\n\n.no-scroll {\noverflow: hidden;\n}\n\n",104)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},__$initTemplate:function(){if(!this.$BaseCss.__$initTemplate.call(this))return!1;try{with(this)this.tabbarHeight="60px",this.tabHeight="53px",this.navButtonWidth="40px"}catch(_ex){return this.$logError(this.EXCEPTION_IN_VARINIT,[this.$classpath],_ex),!1}return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/teaserSwitch/core/TeaserSwitch.js
//*******************
"use strict";Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.teaserSwitch.core.TeaserSwitch",$extends:"aria.widgetLibs.BindableWidget",$css:["plnextv2.utils.widgets.plnextLib.teaserSwitch.style.TeaserSwitchStyle"],$dependencies:["aria.utils.String","aria.utils.Dom","plnextv2.utils.I18n","plnextv2.utils.widgets.plnextLib.teaserSwitch.bean.BeanCfg"],$constructor:function(e,t){this.$BindableWidget.constructor.apply(this,arguments),this._i18n=plnextv2.utils.I18n,this._context=t,this._cfgBean="plnextv2.utils.widgets.plnextLib.teaserSwitch.bean.BeanCfg.TeaserSwitchCfg",this._cfgOk=aria.core.JsonValidator.validateCfg(this._cfgBean,e),this._cfg=e,this._labelYes=this._cfg.labels.yes?this._cfg.labels.yes:"Yes",this._labelNo=this._cfg.labels.no?this._cfg.labels.no:"No",this._noId=this._createDynamicId(),this._yesId=this._createDynamicId(),this._buttonAXStatusId=this._createDynamicId(),this._questionLabel=this._cfg.labels.question?this._cfg.labels.question:" ",this._activeElt=null,this._initialButton=this._cfg.initialButton||this.INITIAL_BUTTON_NO,this.bind=this._cfg.bind,this._checkCfgConsistency(),this._SRStatusUpdateWarningPattern=this._cfg.labels.SRWarningPattern?this._cfg.labels.SRWarningPattern:"{0} button pressed"},$destructor:function(){this._detachEvents(),this._cfg.bind&&(this._callback&&aria.utils.Json.removeListener(this._cfg.bind.value.inside,this._cfg.bind.value.to,this._callback),this._callbackYesButtonBlocked&&aria.utils.Json.removeListener(this._cfg.bind.isYesButtonBlocked.inside,this._cfg.bind.isYesButtonBlocked.to,this._callbackYesButtonBlocked)),this._yesButtonElt=null,this._noButtonElt=null},$statics:{MANDATORY_CFG:"A mandatory parameter is missing.",CONTAINER_USAGE_FORBIDDEN:"%1The usage as a container {@plnext:TeaserSwitch}{/@plntext:TeaserSwitch} is not allowed; use the {@plnext:TeaserSwitch /} syntax instead.",BINDING_NEEDED:"Binding missing",INITIAL_BUTTON_YES:"Yes",INITIAL_BUTTON_NO:"No"},$prototype:{_checkCfgConsistency:function(){!this.bind||!this.bind.value||this.bind.value.inside&&this.bind.value.to||(this.$logError(this.MANDATORY_CFG),this._cfgOk=!1)},writeMarkup:function(e){var t='<span class="sr-only">'+this._questionLabel+"</span>",i=['<div class="teaser-switch">','<div class="btn-group uxd-btn-multiple uxd-toggle-delayed">','<button type="button" id="'+this._noId+'" class="btn btn-secondary" aria-pressed="true">'+t+this._labelNo+"</button>",'<button type="button" id="'+this._yesId+'" class="btn btn-secondary" aria-pressed="false">'+t+this._labelYes+"</button>",'</div></div><div class="sr-only" role="status" aria-live="polite" id="'+this._buttonAXStatusId+'"></div>'];e.write(i.join(""))},writeMarkupBegin:function(){this.$logError(this.CONTAINER_USAGE_FORBIDDEN)},writeMarkupEnd:function(){},initWidget:function(){this._cfgOk&&(this._yesButtonElt=aria.utils.Dom.getElementById(this._yesId),this._noButtonElt=aria.utils.Dom.getElementById(this._noId),aria.utils.Event.addListener(this._yesButtonElt,"click",{fn:this._cfg.bind.isYesButtonBlocked&&this._cfg.bind.isYesButtonBlocked.inside[this._cfg.bind.isYesButtonBlocked.to]?this._yesButtonBlockedAction:this._yesButtonAction,scope:this},!0),aria.utils.Event.addListener(this._noButtonElt,"click",{fn:this._noButtonAction,scope:this},!0),this._initialButton===this.INITIAL_BUTTON_YES?(this._activeElt=this._yesButtonElt,this._yesButtonElt.setAttribute("aria-pressed","true"),this._noButtonElt.setAttribute("aria-pressed","false")):(this._activeElt=this._noButtonElt,this._noButtonElt.setAttribute("aria-pressed","true"),this._yesButtonElt.setAttribute("aria-pressed","false")),this._activeElt.className+=" active",this._registerBindings())},_registerBindings:function(){var e=this._cfg.bind;if(this._buttonElt=aria.utils.Dom.getElementById(this._buttonId),e&&(e.isYesButtonBlocked&&(this._callbackYesButtonBlocked={fn:this._notifyChangeYesBlockedState,scope:this,args:[]},aria.utils.Json.addListener(e.isYesButtonBlocked.inside,e.isYesButtonBlocked.to,this._callbackYesButtonBlocked,!1)),e.value)){this._callback={fn:this._notifyChange,scope:this,args:[]};try{aria.utils.Json.addListener(e.value.inside,e.value.to,this._callback,!1);var t=this._transform(e.value.transform,this.bind.value.inside[this.bind.value.to],"toWidget");this._doToggle(t)&&this._toggleActive()}catch(i){this.$logError(this.INVALID_BEAN)}}},_doToggle:function(e){return e&&this._activeElt!==this._yesButtonElt||!e&&this._activeElt!==this._noButtonElt?!0:!1},_notifyChange:function(){var e=this._transform(this.bind.value.transform,this.bind.value.inside[this.bind.value.to],"toWidget");this._doToggle(e)&&this._toggleActive()},_notifyChangeYesBlockedState:function(){this.bind.isYesButtonBlocked&&this.bind.isYesButtonBlocked.inside[this.bind.isYesButtonBlocked.to]?(aria.utils.Event.removeListener(this._yesButtonElt,"click",{fn:this._yesButtonAction,scope:this}),aria.utils.Event.addListener(this._yesButtonElt,"click",{fn:this._yesButtonBlockedAction,scope:this},!0)):(aria.utils.Event.removeListener(this._yesButtonElt,"click",{fn:this._yesButtonBlockedAction,scope:this}),aria.utils.Event.addListener(this._yesButtonElt,"click",{fn:this._yesButtonAction,scope:this},!0))},_setValue:function(e){var t=this._cfg.bind.value,i=e===this._yesButtonElt?!0:!1;if(t){if(this._activeElt!==e){var n=t.transform?this._transform(t.transform,i,"fromWidget"):i;aria.utils.Json.setValue(t.inside,t.to,n)}}else this.$logWarn(this.BINDING_NEEDED,[this.$class,"selectedValue"])},_yesButtonAction:function(e){e.preventDefault(),this._setValue(this._yesButtonElt),aria.utils.Type.isCallback(this._cfg.callbackYes)&&this._context.evalCallback(this._cfg.callbackYes,this._cfg.callbackYes.args),aria.utils.Dom.getElementById(this._buttonAXStatusId).innerHTML=this._i18n.getStringFromPattern(this._SRStatusUpdateWarningPattern,[this._labelYes])},_noButtonAction:function(e){e.preventDefault(),this._setValue(this._noButtonElt),aria.utils.Type.isCallback(this._cfg.callbackNo)&&this._context.evalCallback(this._cfg.callbackNo,this._cfg.callbackNo.args),aria.utils.Dom.getElementById(this._buttonAXStatusId).innerHTML=this._i18n.getStringFromPattern(this._SRStatusUpdateWarningPattern,[this._labelNo])},_yesButtonBlockedAction:function(e){e.preventDefault(),aria.utils.Type.isCallback(this._cfg.callbackYesBlocked)&&this._context.evalCallback(this._cfg.callbackYesBlocked,this._cfg.callbackYesBlocked.args),aria.utils.Dom.getElementById(this._buttonAXStatusId).innerHTML=this._i18n.getStringFromPattern(this._SRStatusUpdateWarningPattern,[this._labelYes])},_setActive:function(e){null==e.className.match(/(?:^|\s)active(?!\S)/)&&(this._activeElt=e,e.setAttribute("aria-pressed","true"),e.className+=" active",e.focus())},_unsetActive:function(e){null!=e.className.match(/(?:^|\s)active(?!\S)/)&&(e.className=e.className.replace(/(?:^|\s)active(?!\S)/g,""),e.setAttribute("aria-pressed","false"))},_toggleActive:function(){var e=this._activeElt.id===this._noId?this._yesButtonElt:this._noButtonElt,t=this._activeElt.id===this._noId?this._noButtonElt:this._yesButtonElt;this._setActive(e),this._unsetActive(t)},_detachEvents:function(){aria.utils.Event.removeListener(this._yesButtonElt,"click",{fn:this._yesButtonAction,scope:this}),aria.utils.Event.removeListener(this._yesButtonElt,"click",{fn:this._yesButtonBlockedAction,scope:this}),aria.utils.Event.removeListener(this._noButtonElt,"click",{fn:this._noButtonAction,scope:this})}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/teaserSwitch/style/TeaserSwitchStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.teaserSwitch.style.TeaserSwitchStyle",$extends:require("ariatemplates/templates/CSSTemplate.js"),$constructor:function(){this.$CSSTemplate.constructor.call(this)},$destructor:function(){this.$CSSTemplate.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n.teaser-switch .btn-group,\n.teaser-switch .btn-group .btn {\nbox-shadow: none;\n}\n\n.teaser-switch .btn-group ul {\nmargin: 0;\npadding: 0;\n}\n\n.teaser-switch .btn-group .btn.active {\n-webkit-box-shadow: inset 2px 2px 3px rgba(0,0,0,0.05);\nbox-shadow: inset 2px 2px 3px rgba(0,0,0,0.05);\nborder-top: 1px solid #dfdfdf;\nborder-left: 1px solid #dfdfdf;\nborder-bottom: 1px solid #fff;\nborder-right: 1px solid #fff;\nborder: 1px solid #bcbcbc;\nborder-color: #005eb8;\nfont-weight: bold;\nbackground-color: #fdfdfd\n}\n\n.teaser-switch .btn-group .btn.active:after {\nfont-family: 'NewUI-icons';\nspeak: none;\nfont-style: normal;\nfont-weight: normal;\nfont-variant: normal;\ntext-transform: none;\nline-height: 1;\ncontent: \"\\f0d8\";\nposition: absolute;\nbottom: -10px;\nfont-size: 1.8em;\nwidth: 100%;\nleft: 0;\ntext-align: center;\ncolor: #005eb8;\n}\n\n.teaser-switch .btn-group .btn:focus {\nborder-color: ",19),this.__$write(this.$blue,62),this.__$write(";\noutline: 0;\nbox-shadow: inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(0,94,184,.6);\noutline-color: ",62),this.__$write(this.$blueElectric,65),this.__$write(";\n\n-ms-filter: \"progid:DXImageTransform.Microsoft.Shadow(Strength=2, Direction=135, Color='#005eb8')\";\n}\n\n.teaser-switch .btn-secondary {\nbackground-color: #dfdfdf;\ncolor: #3f3f3f;\n}\n\n",65)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(e){e.__$csslibs={},e.__$prefix=!0},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/template/core/PlnextTemplate.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.template.core.PlnextTemplate",$extends:"aria.html.Template",$constructor:function(){this.$Template.constructor.apply(this,arguments),this.subTplCtxt.placeholderPath=this._context.placeholderPath}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/tooltip/core/CustomTooltip.js
//*******************
!function(){var e,t={};Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.tooltip.core.CustomTooltip",$extends:"aria.widgetLibs.BaseWidget",$css:["plnextv2.utils.widgets.plnextLib.tooltip.style.CustomTooltipStyle"],$statics:{WIDGET_TOOLTIP_MACRO:"%1Tooltip with id '%2' must either be a container or have the 'macro' property specified.",ANCHOR_BOTTOM:"bottom",ANCHOR_TOP:"top",ANCHOR_LEFT:"left",ANCHOR_RIGHT:"right"},$dependencies:["plnextv2.utils.widgets.plnextLib.tooltip.bean.CustomTooltipCfgBeans","aria.popups.PopupManager","aria.popups.Beans","aria.DomEvent","aria.utils.Math","aria.utils.Dom","aria.utils.Size","aria.utils.Event","aria.utils.Delegate"],$events:{onAfterOpen:"",onClose:""},$onload:function(){e=aria.core.Timer},$onunload:function(){t=null,e=null},$constructor:function(e,t){this.$BaseWidget.constructor.apply(this,arguments);var i={beanName:"plnextv2.utils.widgets.plnextLib.tooltip.bean.CustomTooltipCfgBeans.CustomTooltipCfg",json:this._cfg};try{this._cfgOk=aria.core.JsonValidator.normalize(i,!0)}catch(n){this.$logError(this.INVALID_CONFIGURATION,null,n)}this._cfgOk&&(this._document=Aria.$window.document,this._associatedHtmlElem=null,this._showTimeout=null,this._hideTimeout=null,this._domId=e.id?t.$getId(e.id):this._createDynamicId(),this._buttonId=this._createDynamicId(),this._elemId=e.associatedElem,this._preferredWidth=this._cfg.preferredWidth,this._preferredHeight=this._cfg.preferredHeight,this._openOnMouseClick=this._cfg.openOnMouseClick,this._openOnMouseMove=this._cfg.openOnMouseMove,this._openOnMouseOver=this._cfg.openOnMouseOver,this._openOnKeyboardEnter=this._cfg.openOnKeyboardEnter,this._closeOnMouseOut=this._cfg.closeOnMouseOut,this._closeOnMouseClick=this._cfg.closeOnMouseClick,this._closeOnMouseOutDelay=this._cfg.closeOnMouseOutDelay,this._closeOnMouseOutDelay&&(this._closeOnMouseOutAssociatedElem=!0),this._showDelay=this._cfg.showDelay,this._delegateId=aria.utils.Delegate.add({fn:this._delegate,scope:this}),this._document=Aria.$window.document,this._displaySide=this._cfg.displaySide,this._functionOpen=this._cfg.onAfterOpen,this._functionClose=this._cfg.onClose)},$destructor:function(){this._cfgOk=!1,this._detachEvents(),this._delegateId&&(aria.utils.Delegate.remove(this._delegateId),this._delegateId=null),this._showTimeout&&(e.cancelCallback(this._showTimeout),this._showTimeout=null),this._section&&(this.deletePopup(),this._section.$unregisterListeners(this),this._section.$dispose(),this._section=null)},$prototype:{_initPopup:function(){this.domELement=null,this._isOpen=!1,this._referencePosition=null,this._referenceSize=null,this._section=null,this._sectionSize=null,this.ANCHOR_KEYS=[this.ANCHOR_BOTTOM,this.ANCHOR_TOP,this.ANCHOR_LEFT,this.ANCHOR_RIGHT],this._ignoreClicksOn=this._cfg.ignoreClicksOn,this._rootElementOverflow=-1,this._rootElement=aria.utils.Dom.getDocumentScrollElement(),this._reference=this._cfg.isBodyReferencePosition?this._document.body:this._associatedHtmlElem},deletePopup:function(){this.close(),this._reference=null,this.domELement&&(aria.utils.Dom.removeElement(this.domELement),this.domELement=null),this.conf.domReference=null,this._ignoreClicksOn=null,this.$unregisterListeners()},_applyConfig:function(e){null!=this.domELement&&aria.utils.Dom.removeElement(this.domELement),this.domELement=this._createDomElement(),aria.utils.Event.addListener(this.domELement,"click",{fn:this.fixTooltip,scope:this},!0),this.setSection(e.section),null!==e.absolutePosition&&this.setPositionAsReference(e.absolutePosition),this.conf=e},_createDomElement:function(){var e=this._document,t=e.createElement("div");t.style.cssText="position:absolute;top:-15000px;left:-15000px;",t.innerHTML="<div "+aria.utils.Delegate.getMarkup(this._delegateId)+" style='position:absolute;top:-15000px;left:-15000px;visibility:hidden;display:block;'></div>";var i=t.firstChild;return this._reference.appendChild(i),i},setSection:function(e){aria.utils.Dom.replaceHTML(this.domELement,e.html),e.initWidgets(),this._section=e},setPositionAsReference:function(e){var t={height:0,width:0};e={top:e.top,left:e.left},this._referencePosition=e,this._referenceSize=t},_attachMouseOverListener:function(){this._detachMouseOverListener(),aria.utils.Event.addListener(this.domELement,"mouseover",{fn:this._clearMouseOutTimer,scope:this})},refresh:function(){this._isOpen&&this._show()},_clearMouseOutTimer:function(){aria.core.Timer.cancelCallback(this._mouseOutTimer)},_defaultBeforeOpenCallback:function(){return!0},_defaultBeforeCloseCallback:function(){return!0},_detachMouseOverListener:function(){aria.utils.Event.removeListener(this.domELement,"mouseover",{fn:this._clearMouseOutTimer})},_getComputedStyle:function(){var e,t;t=this._isOpen&&this.computedStyle.zIndex?this.computedStyle.zIndex:aria.popups.PopupManager.getZIndexForPopup(this),e=this.conf.preferredWidth>0?{width:this.conf.preferredWidth,height:0}:this._getFreeSize();var i=this._getPosition(e),n={top:i.top,left:i.left,height:e.height,width:e.width,zIndex:t};return n},_getFreeSize:function(){var e=aria.core.Browser;this.domELement.style.cssText="position:absolute;top:-15000px;left:-15000px;visibility:hidden;display:block;";var t=e.isIE9||e.isIE10?this.domELement.offsetWidth+1:this.domELement.offsetWidth;return{width:t,height:this.domELement.offsetHeight}},_getPosition:function(e){var t=this._getPositionWithOffset();return this._fitInViewPort(t,e),t},_fitInViewPort:function(e,t){var i,n,s,a,r=aria.utils.Dom.getViewportSize(),o=aria.utils.Dom._getDocumentScroll();this._document.body!=this._reference?(i=-this._reference.getBoundingClientRect().top,n=r.height-this._reference.getBoundingClientRect().top,s=0,a=this._reference.parentNode.offsetWidth-this._reference.offsetLeft-t.width,e.top<i?e.top=i:t.height/2>n&&(e.top=n-t.height),e.left<s?e.left=0:e.left>a&&(e.left=a)):(i=o.scrollTop,n=r.height+o.scrollTop-t.height,s=0,a=r.width-t.width,e.top+=i,e.top<i?e.top=i:e.top>n&&(e.top=n))},_getPositionWithOffset:function(){var e=this._referencePosition.top,t=this._referencePosition.left,i=this.conf.offset;e+=i.top,t+=i.left;var n={top:e,left:t};return n},_hide:function(){this.domELement&&(this.domELement.style.cssText="position:absolute;display:none;overflow:auto;")},fixTooltip:function(){this.conf.closeOnMouseOut=!1,this._hideTimeout&&e.cancelCallback(this._hideTimeout),this._closeOnMouveElemOut&&aria.utils.Event.removeListener(this._associatedHtmlElem,"mouseleave",{fn:this.closeOnMouseElemOut,scope:this},!0),aria.utils.Event.removeListener(this.domELement,"click",{fn:this.fixTooltip,scope:this})},_onMouseOutTimeout:function(){this._detachMouseOverListener(),this.closeTooltip()},_show:function(){this.computedStyle=this._getComputedStyle(),this.domELement.style.cssText=["top:",this.computedStyle.top,"px;","left:",this.computedStyle.left,"px;","z-index:",this.computedStyle.zIndex,";","width:",this.computedStyle.width,"px;","position:absolute;display:inline-block;"].join("")},moveTo:function(e){e&&"absolutePosition"in e&&this.setPositionAsReference(e.absolutePosition),this.refresh(),this.refreshProcessingIndicators()},cancelMouseOutTimer:function(){this._mouseOutTimer&&this._clearMouseOutTimer()},close:function(){this._isOpen&&(this._hide(),this._isOpen=!1)},closeOnMouseClick:function(e){return this.conf.closeOnMouseClick?(this.close(e),!0):void 0},closeOnMouseOut:function(){this.conf.closeOnMouseOut&&(this.conf.closeOnMouseOutDelay<=0?this.closeTooltip():(this.cancelMouseOutTimer(),this._mouseOutTimer=aria.core.Timer.addCallback({fn:this._onMouseOutTimeout,scope:this,delay:this.conf.closeOnMouseOutDelay}),this._attachMouseOverListener()))},getDomElement:function(){return this.domELement},open:function(e){this._isOpen||(this._applyConfig(e),this._computeDisplay(this._displaySide),this._show(),this._isOpen=!0,this.refreshProcessingIndicators(),this.$raiseEvent("onAfterOpen"))},_computeDisplay:function(e){var t=this.domELement.firstChild.offsetWidth,i=this.domELement.firstChild.offsetHeight;"right"==e?this.conf.offset={top:-i/2,left:this.conf.offset.left}:"left"==e?this.conf.offset={top:-i/2,left:this.conf.offset.left-t}:"top"==e?this.conf.offset={top:this.conf.offset.top-i,left:-t/2}:"bottom"==e&&(this.conf.offset={top:0,left:-t/2})},refreshProcessingIndicators:function(){this._section&&this._section.refreshProcessingIndicator(!0)},getId:function(){return this._domId},_delegate:function(e){var t=this["_button_"+e.type];"contentchange"==e.type?this.refresh():t&&e.target.id==this._buttonId&&t.call(this,e)},_button_click:function(){this.closeTooltip(),this._associatedHtmlElem.focus()},_button_keydown:function(e){e.keyCode==aria.DomEvent.KC_ENTER&&(this.closeTooltip(),this._associatedHtmlElem.focus())},_checkCfgConsistency:function(){if(this._cfgOk){var e=this._cfg;return this._container&&e.contentMacro||!this._container&&!e.contentMacro?(this.$logError(this.WIDGET_TOOLTIP_MACRO,[e.id]),void(this._cfgOk=!1)):void 0}},attachEvents:function(){this._openOnMouseClick&&(aria.utils.Event.addListener(this._associatedHtmlElem,"click",{fn:this._openMouseClick,scope:this},!0),aria.utils.Event.addListener(this._associatedHtmlElem,"touchstart",{fn:this._openOnTouch,scope:this},!0),aria.utils.Event.addListener(this._associatedHtmlElem,"keydown",{fn:this._openKeydown,scope:this},!0)),this._openOnMouseOver&&aria.utils.Event.addListener(this._associatedHtmlElem,"mouseover",{fn:this._openMouseOver,scope:this},!0),this._openOnMouseMove&&aria.utils.Event.addListener(this._associatedHtmlElem,"mousemove",{fn:this._openMouseMove,scope:this},!0),this._openOnMouseClick||(aria.utils.Event.addListener(this._associatedHtmlElem,"mouseleave",{fn:this.closeOnMouseElemOut,scope:this},!1),aria.utils.Event.addListener(this._associatedHtmlElem,"focus",{fn:this._openOnFocus,scope:this},!0),aria.utils.Event.addListener(this._associatedHtmlElem,"focusout",{fn:this.closeOnMouseElemOut,scope:this},!0))},_detachEvents:function(){this._openOnMouseClick&&(aria.utils.Event.removeListener(this._associatedHtmlElem,"click",{fn:this._openMouseClick,scope:this}),aria.utils.Event.removeListener(this._associatedHtmlElem,"keydown",{fn:this._openKeydown,scope:this}),aria.utils.Event.removeListener(this._associatedHtmlElem,"touchstart",{fn:this._openOnTouch,scope:this})),this._openOnMouseOver&&aria.utils.Event.removeListener(this._associatedHtmlElem,"mouseover",{fn:this._openMouseOver,scope:this}),this._openOnMouseMove&&aria.utils.Event.removeListener(this._associatedHtmlElem,"mousemove",{fn:this._openMouseMove,scope:this}),this._closeOnMouveElemOut&&aria.utils.Event.removeListener(this._associatedHtmlElem,"mouseleave",{fn:this.closeOnMouseElemOut,scope:this}),aria.utils.Event.removeListener(this._associatedHtmlElem,"focus",{fn:this._openOnFocus,scope:this}),aria.utils.Event.removeListener(this._associatedHtmlElem,"focusout",{fn:this.closeOnMouseElemOut,scope:this})},_openMouseClick:function(t){var i=t.target||t.srcElement,n={};if(i!=this._buttonId){if(this._cfg.isBodyReferencePosition?(n.clientX=t.clientX,n.clientY=t.clientY):(n.clientY=void 0==t.offsetY?t.layerY:t.offsetY,n.clientX=t.clientX-this._associatedHtmlElem.getBoundingClientRect().left),!this._cfgOk)return;if(this._isOpen&&this._associatedHtmlElem)return;this._showTimeout||(this._showTimeout=e.addCallback({scope:this,fn:this.showTooltip,args:n,delay:this._cfg.showDelay}))}},_openOnTouch:function(){var t={};this._associatedHtmlElem.focus(),t.clientX=this._associatedHtmlElem.getBoundingClientRect().width/2,t.clientY=this._associatedHtmlElem.getBoundingClientRect().height/2,this._cfgOk&&(this._isOpen&&this._associatedHtmlElem||this._showTimeout||(this._showTimeout=e.addCallback({scope:this,fn:this.showTooltip,args:t,delay:this._cfg.showDelay})))},_openKeydown:function(t){var i=t.target.id||t.srcElement.id;if(t.keyCode==aria.DomEvent.KC_ENTER&&i!=this._buttonId){var n={};if(this._associatedHtmlElem.focus(),n.clientX=this._associatedHtmlElem.getBoundingClientRect().width/2,n.clientY=this._associatedHtmlElem.getBoundingClientRect().height/2,!this._cfgOk)return;this._showTimeout||(this._showTimeout=e.addCallback({scope:this,fn:this.showTooltip,args:n,delay:this._cfg.showDelay}))}},_openOnFocus:function(){var t={};t.clientX=this._associatedHtmlElem.getBoundingClientRect().width/2,t.clientY=this._associatedHtmlElem.getBoundingClientRect().height/2,this._cfgOk&&(this._isOpen&&this._associatedHtmlElem||this._showTimeout||(this._showTimeout=e.addCallback({scope:this,fn:this.showTooltip,args:t,delay:this._cfg.showDelay})))},_openMouseOver:function(t){var i={};this._cfg.isBodyReferencePosition?(i.clientX=t.clientX,i.clientY=t.clientY):(i.clientX=void 0==t.offsetX?t.layerX:t.offsetX,i.clientY=void 0==t.offsetY?t.layerY:t.offsetY),this._cfgOk&&(this._isOpen&&this._associatedHtmlElem||this._showTimeout||(this._showTimeout=e.addCallback({scope:this,fn:this.showTooltip,args:i,delay:this._cfg.showDelay})))},closeOnMouseElemOut:function(t){this._cfgOk&&(this._isOpen&&this.closeOnMouseOut(t),this._showTimeout&&(e.cancelCallback(this._showTimeout),this._showTimeout=null))},_notInTooltip:function(e){if(this._isOpen){var t=this.domELement.offsetLeft-15,i=this.domELement.offsetLeft+this.domELement.offsetWidth+15,n=this.domELement.offsetTop-15,s=this.domELement.offsetTop+this.domELement.offsetHeight+15;if(e.clientX>t&&e.clientX<i&&e.clientY>n&&e.clientY<s)return!1}return!0},_openMouseMove:function(t){var i={};this._cfg.isBodyReferencePosition?(i.clientX=t.clientX,i.clientY=t.clientY):(i.clientX=void 0==t.offsetX?t.layerX:t.offsetX,i.clientY=void 0==t.offsetY?t.layerY:t.offsetY),this._cfgOk&&this._showTimeout&&(e.cancelCallback(this._showTimeout),this._showTimeout=e.addCallback({scope:this,fn:this.showTooltip,args:i,delay:this._cfg.showDelay}))},_widgetMarkupBegin:function(e){var t=this._cfg;this._sectionId=["__toolTipSection_",t.id].join(""),this._domId=t.id,e.skipContent=!0,e.beginSection({id:this._sectionId,type:""})},_widgetMarkupEnd:function(e){e.endSection()},_writerCallback:function(e){var t="popover "+this._cfg.displaySide;this._cfg.cssClass&&(t+=" "+this._cfg.cssClass),e.write('<span class="'+t+'">');var i="",n="";this._cfg.arrow&&(i+='<div class="arrow"></div>'),this._cfg.closeButton&&(n+="<button id="+this._buttonId+" "+aria.utils.Delegate.getMarkup(this._delegateId)+'alt="'+plnextv2.utils.I18n.getLabel("tx_pltg_text_Close")+'" type="button" class="close icon-remove"></button>');var s=[i,'<div class="popover-content">',n];e.write(s.join("")),e.callMacro(this._cfg.contentMacro),e.write("</div></span>")},writeMarkup:function(e){this._checkCfgConsistency(),this._cfgOk&&(this._widgetMarkupBegin(e),this._widgetMarkupEnd(e))},writeMarkupBegin:function(e){this._checkCfgConsistency(),this._cfgOk&&this._widgetMarkupBegin(e)},writeMarkupEnd:function(e){this._widgetMarkupEnd(e)},showTooltip:function(e){if(this._cfgOk&&(this._showTimeout=null,this._closeOnMouseOutDelay>0&&(this._mouseOutTimer=aria.core.Timer.addCallback({fn:this._onMouseOutTimeout,scope:this,delay:this._closeOnMouseOutDelay})),!this._isOpen)){if(this._cfg.isWrapPosition)var i=aria.utils.Dom.getGeometry(this._associatedHtmlElem),n={left:i.x+.5*i.width,top:i.y};else var n={left:e.clientX,top:e.clientY};var s={section:this._sectionId};s.writerCallback={fn:this._writerCallback,scope:this},s.section=this._sectionId,t[this._domId]=!0;var a=this._context.getRefreshedSection(s);this.$on({scope:this,onClose:this._onAfterPopupClose,onAfterOpen:this._onAfterPopupOpen}),this._initPopup(),this.open({section:a,absolutePosition:n,closeOnMouseOut:this._closeOnMouseOut,closeOnMouseOutDelay:this._closeOnMouseOutDelay,offset:{left:0,top:0}})}},closeTooltip:function(){this._isOpen&&(this.$raiseEvent("onClose"),this.deletePopup(),this._hideTimeout=null)},_onAfterPopupClose:function(e){this._functionClose&&this._functionClose.fn.call(this._functionClose.scope,e,this._functionClose.args),t[this._domId]=!1,delete t[this._domId]},_onAfterPopupOpen:function(e){this._functionOpen&&this._functionOpen.fn.call(this._functionOpen.scope,e,this._functionOpen.args)},initWidget:function(){this._associatedHtmlElem||(this._associatedHtmlElem=aria.utils.Dom.getElementById(this._context.$getElementById(this._elemId).getProperty("id"))),this.attachEvents()}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/tooltip/style/CustomTooltipStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.utils.widgets.plnextLib.tooltip.style.CustomTooltipStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n.popover {\ndisplay: inline-block;\nposition: relative;\n}\n\n",6)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/styles/BaseCssScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.styles.BaseCssScript",$dependencies:["aria.core.Browser","plnextv2.utils.context.AppContext","plnextv2.utils.BootstrapUtils","plnextv2.utils.DeviceUtils"],$statics:{TRANSITION_TIMES:{ACCORDION:700}},$constructor:function(){this.$rtlActivated=plnextv2.utils.context.AppContext.getAppData().config.language.isRtl,this.$verticalCalendarPerBound=plnextv2.utils.context.AppContext.getAppData().config.vCalPerBoundDesktop?plnextv2.utils.context.AppContext.getAppData().config.vCalPerBoundDesktop.vCalPerBoundDesktopConfig:!1,this.$resourcesFolder=rootClassPath+"plnextv2/resources/",this.$imageFolder=this.$resourcesFolder+"img/",this.$urlForCss="url",this.breakpoints={XXXS_MIN:plnextv2.utils.BootstrapUtils.XXXS_MIN,XXXS_MAX:plnextv2.utils.BootstrapUtils.XXXS_MAX,XXS_MIN:plnextv2.utils.BootstrapUtils.XXS_MIN,XXS_MAX:plnextv2.utils.BootstrapUtils.XXS_MAX,XS:plnextv2.utils.BootstrapUtils.XS,XS_MIN:plnextv2.utils.BootstrapUtils.XS_MIN,XS_MAX:plnextv2.utils.BootstrapUtils.XS_MAX,SM_MIN:plnextv2.utils.BootstrapUtils.SM_MIN,SM_MAX:plnextv2.utils.BootstrapUtils.SM_MAX,MD_MIN:plnextv2.utils.BootstrapUtils.MD_MIN,MD_MAX:plnextv2.utils.BootstrapUtils.MD_MAX,LG_MIN:plnextv2.utils.BootstrapUtils.LG_MIN},this.transitionTimes={accordion:this.TRANSITION_TIMES.ACCORDION},this.fontWeight={thin:"100",light:"300",normal:"400",bold:"700",strong:"900"},this.$thin=this.fontWeight.thin,this.$light=this.fontWeight.light,this.$normal=this.fontWeight.normal,this.$bold=this.fontWeight.bold,this.$strong=this.fontWeight.strong,this.$thinFont="'Roboto Thin', sans-serif",this.$normalFont="'Roboto Regular', sans-serif",this.$boldFont="'Roboto Bold', sans-serif",this.$blackFont="'Roboto Black', sans-serif",this.colors={blue:"#005eb8",blueLight:"#00a9e0",blueLighter:"#005eb8",blueDark:"#056ccf",blueFocusShadow1:"rgba(102, 175, 233, 1)",blueFocusShadow2:"rgba(102, 175, 233, 1)",blueShadow:"rgba(0,94,184,.6)",blueLightCheckbox:"rgba(102, 175, 233, 0.6)",blackFullOpaque:"rgba(0,0,0,.075)",blackPartialOpaque:"rgba(0,0,0,.75)",blackHalfOpaque:"rgba(0,0,0,.5)",blackAlmostTransparent:"rgba(0,0,0,.05)",blackSeat:"#303030",blueElectric:"#0AB4E2",blueConfirmed:"#2f77c7",orangeLight:"#6ad1e3",orangeLighter:"#f7c87b",orange:"#ffa06a",amadeusOrange:"#e95326",red:"#c30054",warning:"#c30054",magentaDark:"#bc0061",gray:"#dfdfdf",grayPlane:"#e5e5e5",grayBorder:"#bcbcbc",grayDisabled:"#e7e7e7",grayLeftBorder:"#cccccc",grayLight:"#ececec",grayLighter:"#f0f0f0",grayLightest:"#f2f2f2",grayLighten:"#f8f8f8",grayLightenAlt:"#fdfdfd",grayLightness:"#777777",grayLightSeat:"#E1E1E1",grayLightServices:"#C3C3C3",grayShade:"#ddd",grayDarkShade:"#D8D8D8",grayShadow:"rgba(0,0,0,0.25)",grayDark:"#767676",grayDarker:"#616161",grayDarken:"#3f3f3f",grayLightShade:"rgba(0, 0, 0, .2)",grayHeaderCard:"rgb(236, 236, 236)",greenConfirmation:"#008942",white:"#FFFFFF",whiteDark:"#FEFEFE",almostBlack:"#30373D",black:"#000000",cornflowerBlue:"#66AFE9",roseCherry:"#9B0042",darkGray:"#AAAAAA",tabletDarkGray:"#484848",tabletLightGray:"#D0D0D0",amadeusCherry:"#ce0058",amadeusLightBlue:"#00a9e0",violet:"#6a3492",green:"#008000",darkCherry:"#b9004f",darkerCherry:"#961f63",wildStrawberry:"#FF358B",whitePartialOpaque:"rgba(255, 255, 255, .8)"},this.$blackFullOpaque=this.colors.blackFullOpaque,this.$blackPartialOpaque=this.colors.blackPartialOpaque,this.$blackHalfOpaque=this.colors.blackHalfOpaque,this.$blackAlmostTransparent=this.colors.blackAlmostTransparent,this.$blackSeat=this.colors.blackSeat,this.$blueLightCheckbox=this.colors.blueLightCheckbox,this.$blueFocusShadow1=this.colors.blueFocusShadow1,this.$blueFocusShadow2=this.colors.blueFocusShadow2,this.$blueShadow=this.colors.blueShadow,this.$blue=this.colors.blue,this.$blueLight=this.colors.blueLight,this.$blueLighter=this.colors.blueLighter,this.$blueDark=this.colors.blueDark,this.$blueElectric=this.colors.blueElectric,this.$blueConfirmed=this.colors.blueConfirmed,this.$orangeLight=this.colors.orangeLight,this.$orangeLighter=this.colors.orangeLighter,this.$orange=this.colors.orange,this.$amadeusOrange=this.colors.amadeusOrange,this.$red=this.colors.red,this.$warning=this.colors.warning,this.$magentaDark=this.colors.magentaDark,this.$gray=this.colors.gray,this.$grayBorder=this.colors.grayBorder,this.$grayDisabled=this.colors.grayDisabled,this.$grayLeftBorder=this.colors.grayLeftBorder,this.$grayLight=this.colors.grayLight,this.$grayLightSeat=this.colors.grayLightSeat,this.$grayLightServices=this.colors.grayLightServices,this.$grayLighter=this.colors.grayLighter,this.$grayLighten=this.colors.grayLighten,this.$grayLightenAlt=this.colors.grayLightenAlt,this.$grayLightest=this.colors.grayLightest,this.$grayLightness=this.colors.grayLightness,this.$grayPlane=this.colors.grayPlane,this.$grayDark=this.colors.grayDark,this.$grayDarker=this.colors.grayDarker,this.$grayDarken=this.colors.grayDarken,this.$grayLightShade=this.colors.grayLightShade,this.$grayShade=this.colors.grayShade,this.$grayDarkShade=this.colors.grayDarkShade,this.$grayShadow=this.colors.grayShadow,this.$grayHeaderCard=this.colors.grayHeaderCard,this.$greenConfirmation=this.colors.greenConfirmation,this.$white=this.colors.white,this.$whiteDark=this.colors.whiteDark,this.$almostBlack=this.colors.almostBlack,this.$black=this.colors.black,this.cornflowerBlue=this.colors.cornflowerBlue,this.roseCherry=this.colors.roseCherry,this.darkGray=this.colors.darkGray,this.lightGray=this.colors.lightGray,this.$tabletDarkGray=this.colors.tabletDarkGray,this.$tabletLightGray=this.colors.tabletLightGray,this.$amadeusCherry=this.colors.amadeusCherry,this.$amadeusLightBlue=this.colors.amadeusLightBlue,this.$violet=this.colors.violet,this.$green=this.colors.green,this.$darkCherry=this.colors.darkCherry,this.$darkerCherry=this.colors.darkerCherry,this.$wildStrawberry=this.colors.wildStrawberry,this.$whitePartialOpaque=this.colors.whitePartialOpaque,this.$mediaOnlyScreenSM="@media only screen and (min-width: 600px) and (max-width: 991px)",this.$lineHeight=1.42857143},$prototype:{$rgba:function(e,t){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgba("+parseInt(i[1],16)+","+parseInt(i[2],16)+","+parseInt(i[3],16)+","+t+");"},isLessThanIEVersion:function(e){var t=aria.core.Browser;return t.isIE&&t.majorVersion<e},isDesktopPage:function(){return plnextv2.utils.DeviceUtils.isPageDeviceTypeDesktop()},isTabletPage:function(){return plnextv2.utils.DeviceUtils.isPageDeviceTypeTablet()},isMobilePage:function(){return plnextv2.utils.DeviceUtils.isPageDeviceTypeMobile()},isIOS:function(){return plnextv2.utils.DeviceUtils.isIOS()},isEmbeddedInApp:function(){return plnextv2.utils.DeviceUtils.isEmbeddedInApp()},browserSupportFlex:function(){return!(aria.core.Browser.isIE6||aria.core.Browser.isIE7||aria.core.Browser.isIE8||aria.core.Browser.isIE9)}}});
//*******************
//LOGICAL-PATH:plnextv2/styles/car/CarBaseCssScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.styles.car.CarBaseCssScript",$constructor:function(){this.$carBgUrl=rootClassPath+"img/carLogo/carImage/",this.$urlForCss="url"},$prototype:{}});
//*******************
//LOGICAL-PATH:plnextv2/styles/BaseCss.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");require("plnextv2/utils/animations/ripple/style/Ripple.cml"),require("plnextv2/styles/BaseCssScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.styles.BaseCss",$extends:require("ariatemplates/templates/CSSTemplate.js"),$constructor:function(){this.$CSSTemplate.constructor.call(this),this.$BaseCssScript.constructor.call(this)},$destructor:function(){this.$BaseCssScript.$destructor.call(this),this.$CSSTemplate.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.macro_mainMacro(),this.macro_xxsGrid(),this.macro_xxxsGrid(),this.ripple.macro_load(),this.__$write("\n\n\n.page-actions-bar {\nmargin-top: 20px;\n}\n\n.page-actions-bar button {\nmargin-right: 10px;\nmargin-bottom: 10px;\n}\n\n\n@media (max-width: ",20),this.__$write(this.breakpoints.XXXS_MAX,32),this.__$write(") {\n.page-actions-bar .button-container {\ndisplay: -ms-flexbox;\ndisplay: flex;\n-ms-flex-direction: column;\nflex-direction: column;\n}\n\n.page-actions-bar .button-container .btn {\n-ms-flex-order: 3;\norder: 3;\n}\n\n.page-actions-bar .button-container .btn.next-button {\n-ms-flex-order: 1;\norder: 1;\n}\n\n.page-actions-bar .button-container .btn.ignore-button {\n-ms-flex-order: 2;\norder: 2;\n}\n}\n\n\nbutton.btn.btn-primary, button.btn.btn-secondary, button.btn.btn-tertiary,\nbutton.btn.btn-default {\nmax-width: 100%;\nwhite-space: normal;\nword-break: break-word;\n}\n\n\nbutton.btn.btn-primary i {\npadding-right: 6px;\n}\n\nbutton.btn.btn-primary i + span + i {\npadding: 0 0 0 6px;\n}\n\n\nbutton.btn.btn-default i, button.btn.btn-default span,\nbutton.btn.btn-secondary i, button.btn.btn-secondary span {\npadding-right: 6px;\n}\n\nbutton.btn.btn-default i + span + i, button.btn.btn-default span + span + span,\nbutton.btn.btn-secondary i + span + i, button.btn.btn-secondary span + span + span {\npadding: 0 0 0 6px;\n}\n\nbutton.btn.btn-default > *, button.btn.btn-secondary > *,\nbutton.btn.btn-primary > *, button.btn.btn-tertiary > * {\n\nfloat: none;\ndisplay: table-cell;\nwhite-space: normal;\nword-break: break-word;\nvertical-align: middle;\n}\n\n\n@media (max-width: ",32),this.__$write(this.breakpoints.XXXS_MAX,95),this.__$write('){\n\n.uxd-btn-multiple > button.btn.btn-default,\n.uxd-btn-multiple > button.btn.btn-tertiary,\n.uxd-btn-multiple > button.btn.btn-secondary,\n.uxd-btn-multiple > button.btn.btn-primary.small-primary {\nwidth: auto;\n}\n\nbutton.btn.btn-default, button.btn.btn-tertiary, button.btn.btn-secondary,\nbutton.btn.btn-primary.small-primary {\ndisplay: inline-block;\nwidth: 100%;\ntext-align: center;\n}\n\nbutton.btn.btn-default, button.btn.btn-tertiary > *, button.btn.btn-secondary > *,\nbutton.btn.btn-primary.small-primary > *{\ndisplay: inline-block;\nmargin: 0;\n}\n\nbutton.btn.btn-default, button.btn.btn-tertiary > span, button.btn.btn-secondary > span,\nbutton.btn.btn-primary.small-primary > span {\nwidth: auto;\n}\n}\n\nbutton.btn.btn-tertiary.calendarmatrix-modifydates-btn > * {\ndisplay: inline-block;\n}\n\n.btn-invisible:focus {\noutline:none;\nborder:none;\n}\n\n\n.btn-invisible:focus {\noutline:none;\nborder:none;\n}\n\n.btn-invisible {\n\nposition: absolute;\n\n\n-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";\n\n\nfilter: alpha(opacity=0);\n\n\n-moz-opacity: 0;\n\n\n-khtml-opacity: 0;\n\n\nopacity: 0;\n}\n',95)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},macro_xxsGrid:function(){try{with(this)this.__$write("\n@media (max-width: ",163),this.__$write(this.breakpoints.XXS_MAX,163),this.__$write(") {\n.col-xxs-8 {\nwidth: 33.33333333%;\n}\n.col-xxs-12 {\nwidth: 50%;\n}\n.col-xxs-16 {\nwidth: 66.66666667%;\n}\n.col-xxs-24 {\nwidth: 100%;\n}\n}\n",163)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["xxsGrid",__filename,this["aria:currentLineNumber"]],_ex)}},macro_xxxsGrid:function(){try{with(this)this.__$write("\n@media (max-width: ",183),this.__$write(this.breakpoints.XXXS_MAX,183),this.__$write(") {\n.col-xxxs-8 {\nwidth: 33.33333333%;\n}\n.col-xxxs-12 {\nwidth: 50%;\n}\n.col-xxxs-16 {\nwidth: 66.66666667%;\n}\n.col-xxxs-24 {\nwidth: 100%;\n}\n}\n",183)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["xxxsGrid",__filename,this["aria:currentLineNumber"]],_ex)}},macro_mainMacro:function(){try{with(this);}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["mainMacro",__filename,this["aria:currentLineNumber"]],_ex)}},macro_animation:function(args){try{with(this)args=args||"none",this.__$write("\n\n-webkit-animation: ",209),this.__$write(args,210),this.__$write(";\n-moz-animation: ",210),this.__$write(args,211),this.__$write(";\n-ms-animation: ",211),this.__$write(args,212),this.__$write(";\n-o-animation: ",212),this.__$write(args,213),this.__$write(";\nanimation: ",213),this.__$write(args,214),this.__$write(";\n",214)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["animation",__filename,this["aria:currentLineNumber"]],_ex)}},macro_animationFillMode:function(mode){try{with(this)mode=mode||"none",this.__$write("\n\n-webkit-animation-fill-mode: ",219),this.__$write(mode,220),this.__$write(";\n-moz-animation-fill-mode: ",220),this.__$write(mode,221),this.__$write(";\n-ms-animation-fill-mode: ",221),this.__$write(mode,222),this.__$write(";\n-o-animation-fill-mode: ",222),this.__$write(mode,223),this.__$write(";\nanimation-fill-mode: ",223),this.__$write(mode,224),this.__$write(";\n",224)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["animationFillMode",__filename,this["aria:currentLineNumber"]],_ex)}},macro_keyframes:function(name,args){try{with(this)this.__$write("\n@keyframes ",228),this.__$write(name,228),this.__$write(" {\n",228),this.__$write(args,229),this.__$write("\n}\n@-moz-keyframes ",230),this.__$write(name,231),this.__$write(" {\n",231),this.__$write(args,232),this.__$write("\n}\n@-webkit-keyframes ",233),this.__$write(name,234),this.__$write(" {\n",234),this.__$write(args,235),this.__$write("\n}\n@-ms-keyframes ",236),this.__$write(name,237),this.__$write(" {\n",237),this.__$write(args,238),this.__$write("\n}\n@-o-keyframes ",239),this.__$write(name,240),this.__$write(" {\n",240),this.__$write(args,241),this.__$write("\n}\n",242)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["keyframes",__filename,this["aria:currentLineNumber"]],_ex)}},macro_boxShadow:function(shadow){try{with(this)shadow=shadow||"none",this.__$write("\n\n-webkit-box-shadow: ",247),this.__$write(shadow,248),this.__$write(";\n-moz-box-shadow: ",248),this.__$write(shadow,249),this.__$write(";\nbox-shadow: ",249),this.__$write(shadow,250),this.__$write(";\n",250)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["boxShadow",__filename,this["aria:currentLineNumber"]],_ex)}},macro_appearance:function(appearance){try{with(this)appearence=appearance||"none",this.__$write("\n\nappearance: ",255),this.__$write(appearance,256),this.__$write(";\n-moz-appearance: ",256),this.__$write(appearance,257),this.__$write(";\n-webkit-appearance: ",257),this.__$write(appearance,258),this.__$write(";\n",258)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["appearance",__filename,this["aria:currentLineNumber"]],_ex)}},macro_transition:function(transition){try{with(this)transition=transition||"none",this.__$write("\n\ntransition: ",263),this.__$write(transition,264),this.__$write(";\n-webkit-transition: ",264),this.__$write(transition,265),this.__$write(";\n",265)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["transition",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayFlex:function(display){try{with(this)display=display||"flex",browserSupportFlex()?(this.__$write("\ndisplay: -webkit-",272),this.__$write(display,272),this.__$write(";\ndisplay: -moz-",272),this.__$write(display,273),this.__$write(";\ndisplay: -ms-",273),this.__$write(display,274),this.__$write(";\ndisplay: -ms-",274),this.__$write(display,275),this.__$write("box;\ndisplay: ",275),this.__$write(display,276),this.__$write(";\n",276)):this.__$write("\ndisplay: block;\n",278)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayFlex",__filename,this["aria:currentLineNumber"]],_ex)}},macro_flex:function(columns){try{with(this)columns=columns||"initial",this.__$write("\n\n-webkit-flex: ",284),this.__$write(columns,285),this.__$write(";\n-moz-flex: ",285),this.__$write(columns,286),this.__$write(";\n-ms-flex: ",286),this.__$write(columns,287),this.__$write(";\nflex: ",287),this.__$write(columns,288),this.__$write(";\n",288)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["flex",__filename,this["aria:currentLineNumber"]],_ex)}},macro_alignItems:function(align){try{with(this)align=align||"stretch",this.__$write("\n\nwebkit-align-items: ",293),this.__$write(align,294),this.__$write(";\n-ms-align-items: ",294),this.__$write(align,295),this.__$write(";\nalign-items: ",295),this.__$write(align,296),this.__$write(";\n",296)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["alignItems",__filename,this["aria:currentLineNumber"]],_ex)}},macro_alignSelf:function(align){try{with(this)align=align||"auto",this.__$write("\n\n-webkit-align-self: ",301),this.__$write(align,302),this.__$write(";\n-ms-align-self: ",302),this.__$write(align,303),this.__$write(";\nalign-self: ",303),this.__$write(align,304),this.__$write(";\n",304)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["alignSelf",__filename,this["aria:currentLineNumber"]],_ex)}},macro_alignContent:function(align){try{with(this)align=align||"stretch",this.__$write("\n\n-webkit-align-content: ",309),this.__$write(align,310),this.__$write(";\n-ms-align-content: ",310),this.__$write(align,311),this.__$write(";\nalign-content: ",311),this.__$write(align,312),this.__$write(";\n",312)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["alignContent",__filename,this["aria:currentLineNumber"]],_ex)}},macro_justifyContent:function(justify){try{with(this)justify=justify||"flex-start",this.__$write("\n\n-webkit-justify-content: ",317),this.__$write(justify,318),this.__$write(";\n-ms-justify-content: ",318),this.__$write(justify,319),this.__$write(";\njustify-content: ",319),this.__$write(justify,320),this.__$write(";\n",320)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["justifyContent",__filename,this["aria:currentLineNumber"]],_ex)}},macro_flexBasis:function(width){try{with(this)"undefined"==typeof width&&(width="auto"),this.__$write("\n\n-webkit-flex-basis: ",327),this.__$write(width,328),this.__$write(";\n-ms-flex-basis: ",328),this.__$write(width,329),this.__$write(";\nflex-basis: ",329),this.__$write(width,330),this.__$write(";\n",330)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["flexBasis",__filename,this["aria:currentLineNumber"]],_ex)}},macro_flexShrink:function(shrink){try{with(this)"undefined"==typeof shrink&&(shrink=1),this.__$write("\n\n-webkit-flex-shrink: ",337),this.__$write(shrink,338),this.__$write(";\n-ms-flex-shrink: ",338),this.__$write(shrink,339),this.__$write(";\nflex-shrink: ",339),this.__$write(shrink,340),this.__$write(";\n",340)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["flexShrink",__filename,this["aria:currentLineNumber"]],_ex)}},macro_flexGrow:function(grow){try{with(this)"undefined"==typeof grow&&(grow=0),this.__$write("\n\n-webkit-flex-grow: ",347),this.__$write(grow,348),this.__$write(";\n-ms-flex-grow: ",348),this.__$write(grow,349),this.__$write(";\nflex-grow: ",349),this.__$write(grow,350),this.__$write(";\n",350)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["flexGrow",__filename,this["aria:currentLineNumber"]],_ex)}},macro_flexOrder:function(order){try{with(this)"undefined"==typeof order&&(order=0),this.__$write("\n\n-webkit-order: ",357),this.__$write(order,358),this.__$write(";\n-ms-order: ",358),this.__$write(order,359),this.__$write(";\norder: ",359),this.__$write(order,360),this.__$write(";\n",360)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["flexOrder",__filename,this["aria:currentLineNumber"]],_ex)}},macro_flexFlow:function(flow){try{with(this)this.__$write("\n-webkit-flex-flow: ",364),this.__$write(flow,364),this.__$write(";\n-ms-flex-flow: ",364),this.__$write(flow,365),this.__$write(";\nflex-flow: ",365),this.__$write(flow,366),this.__$write(";\n",366)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["flexFlow",__filename,this["aria:currentLineNumber"]],_ex)}},macro_flexWrap:function(wrap){try{with(this)wrap=wrap||"nowrap",this.__$write("\n\n-webkit-flex-wrap: ",371),this.__$write(wrap,372),this.__$write(";\n-ms-flex-wrap: ",372),this.__$write(wrap,373),this.__$write(";\nflex-wrap: ",373),this.__$write(wrap,374),this.__$write(";\n",374)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["flexWrap",__filename,this["aria:currentLineNumber"]],_ex)}},macro_flexDirection:function(direction){try{with(this)direction=direction||"row",this.__$write("\n\n-webkit-flex-direction: ",379),this.__$write(direction,380),this.__$write(";\n-ms-flex-direction: ",380),this.__$write(direction,381),this.__$write(";\nflex-direction: ",381),this.__$write(direction,382),this.__$write(";\n",382)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["flexDirection",__filename,this["aria:currentLineNumber"]],_ex)}},macro_transform:function(propertyValue){try{with(this)propertyValue=propertyValue||"none",this.__$write("\n\n-webkit-transform: ",391),this.__$write(propertyValue,392),this.__$write(";\n-moz-transform: ",392),this.__$write(propertyValue,393),this.__$write(";\n-ms-transform: ",393),this.__$write(propertyValue,394),this.__$write(";\ntransform: ",394),this.__$write(propertyValue,395),this.__$write(";\n",395)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["transform",__filename,this["aria:currentLineNumber"]],_ex)}},macro_checkboxStyle:function(){try{with(this)this.__$write("\n.checkbox {\npadding-left: 2.143em;\n}\n\n.checkbox input[type=checkbox] {\nposition: absolute;\ntop: 0.15em;\nleft: 0.15em;\nmargin: 0;\n}\n\n.checkbox input[type=checkbox]:focus {\noutline: 0;\nbox-shadow: none;\n}\n\n.checkbox input[type=checkbox]:before {\ncolor: ",402),this.__$write(this.$blue,419),this.__$write(";\nbackground-color: ",419),this.__$write(this.$grayLighten,420),this.__$write(";\nline-height: 1.357em;\ntext-align: center;\nfont-family: 'ADC-icons';\ncursor: pointer;\ncontent: \"\";\ndisplay: inline-block;\nborder: 1px solid ",420),this.__$write($grayBorder,427),this.__$write(";\nwidth: 1.429em;\nheight: 1.429em;\nvertical-align: middle;\nposition: absolute;\ntop: -0.15em;\nleft: -0.15em;\n",427),this.macro_boxShadow("inset 1px 1px 3px 0px "+this.$blackAlmostTransparent+", 0px 1px 0px 0px "+this.$whitePartialOpaque),this.__$write('\n}\n\n.checkbox input[type=checkbox]:checked:before {\ncontent: "\\f00c";\n}\n',436)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["checkboxStyle",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(t){t.__$csslibs={ripple:"plnextv2.utils.animations.ripple.style.Ripple"},t.__$prefix=!1,aria.core.TplClassLoader._importScriptPrototype(plnextv2.styles.BaseCssScript,t)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/styles/Common.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/core/Browser.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.styles.Common",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_mainMacro:function(){try{with(this)this.__$write("\n\n\n\n\n\n\n.left-divider {\npadding-left: 20px;\nborder-left: 1px solid ",14),this.__$write(this.$grayLighter,22),this.__$write(";\n}\n.right-divider {\npadding-right: 20px;\nborder-right: 1px solid ",22),this.__$write(this.$grayLighter,26),this.__$write(";\n}\n\nselect.form-control {\n-webkit-appearance: none;\n-moz-appearance: none;\nappearance: none;\ntext-indent: 0.01px;\ntext-overflow: '';\nbackground-repeat: no-repeat ;\n}\n\n\nselect.form-control::-ms-expand {\ndisplay: none;\n}\n\nlabel.control-label{\nmargin-bottom:0;\n}\nlabel.control-label.mandatory-label {\nfont-weight:",26),this.__$write(this.$bold,47),this.__$write(";\n}\n\n.anchor[tabindex] {\n\n}\n\n\n.main-icon {\nfont-size: 2.5em;\ndisplay: inline-block;\nmargin: 0 0.5em 0 0.3em;\ncolor: ",47),this.__$write(this.$gray,59),this.__$write(";\n}\n\n.heading-icon {\nfont-size: 1.7em;\nmargin-left: 0.3em;\n}\n\n\na {\ntext-decoration:underline;\n}\n\n",59),this.$rtlActivated?this.macro_printRtlRules():this.macro_printLtrRules(),(this.isTabletPage()||this.isMobilePage())&&this.macro_tabletMacro()}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["mainMacro",__filename,this["aria:currentLineNumber"]],_ex)}},macro_animatedPage:function(){try{with(this)aria.core.Browser.isIE8||this.__$write("\n.page {\ntop:0;\nleft:0;\nposition:absolute;\nwidth: 100%;\nmin-height: 100%;\nborder: 0;\n}\n",87)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["animatedPage",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printLtrRules:function(){try{with(this)this.__$write("\nselect.form-control {\nbackground-image: ",100),this.__$write(this.$urlForCss,101),this.__$write('("',101),this.__$write(this.$imageFolder,101),this.__$write('corner.png");\nbackground-position: right bottom;\nbackground-image: none\\9;\n}\n',101)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printLtrRules",__filename,this["aria:currentLineNumber"]],_ex)}},macro_printRtlRules:function(){try{with(this)this.__$write(this.$rtlPrefix,109),this.__$write(" select.form-control {\nbackground-image: ",109),this.__$write(this.$urlForCss,110),this.__$write('("',110),this.__$write(this.$imageFolder,110),this.__$write('corner-rtl.png");\n\nbackground-position: left bottom;\nbackground-image: none\\9;\n}\n',110)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["printRtlRules",__filename,this["aria:currentLineNumber"]],_ex)}},macro_tabletMacro:function(){try{with(this)this.__$write("\n\n.tablet-page-template-section,\n.tablet-centered,\n.tablet-page-template-section .page-template-section {\nmax-width: ",119),this.__$write(this.breakpoints.MD_MIN,123),this.__$write(";\nmargin-left: auto;\nmargin-right: auto;\n}\n\n.tablet-full-width{\nwidth: 100vw;\nposition: relative;\nleft: 50%;\nright: 50%;\nmargin-left: -50vw;\nmargin-right: -50vw;\n}\n\n",123)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["tabletMacro",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(t){t.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/styles/IncompatibilityModalDialog.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.styles.IncompatibilityModalDialog",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n.modal-message-body {\npadding: 0;\nwidth: 100%;\n}\n\n.message-title {\nfont-size: 23px;\nmargin-bottom: 0.652em;\n}\n\n.message-content {\nmargin-bottom: 1.071em;\n}\n\n.message-confirmation {\nfont-weight: ",6),this.__$write(this.$bold,22),this.__$write(";\n}\n\n\n.incomblocker-modal-footer-buttons {\npadding: 1.071em 0em 0em;\ntext-align: left;\n}\n\n.blocker-title {\nfont-size: 22px;\npadding: 0;\nmargin: 0;\nmargin-bottom: 10px;\n}\n\n.blocker-content {\npadding: 5px 0;\n}\n\n.blocker-confirmation {\nfont-weight: ",22),this.__$write(this.$bold,43),this.__$write(";\npadding: 5px 0;\n}\n\n.blocker-footer-buttons {\nmargin-top: 10px;\n}\n\n@media (max-width: ",43),this.__$write(this.breakpoints.XXS_MAX,51),this.__$write(") {\n.btn-cancel {\nfont-weight: ",51),this.__$write(this.$bold,53),this.__$write(";\nmargin-right: 0.714em;\nmargin-bottom: 0.357em;\n}\n}\n\n.btn-cancel {\nfont-weight: ",53),this.__$write(this.$bold,60),this.__$write(";\nmargin-right: 0.714em;\n}\n\n.btn-confirm {\nfont-weight: ",60),this.__$write(this.$bold,65),this.__$write(";\n}\n\n.btn-understood {\nfont-weight: ",65),this.__$write(this.$bold,69),this.__$write(";\n}\n",69)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/styles/PageTemplateStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.styles.PageTemplateStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this);}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(t){t.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/styles/RadioCheckStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.styles.RadioCheckStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n\n:not(#foo) input[type=checkbox],\n:not(#foo) input[type=radio] {\ndisplay: inline-block;\nopacity: 0;\n}\n\n.radio > input[type=checkbox],\n.radio > input[type=radio] {\nfloat: none;\n}\n\n:not(#foo) input[type=checkbox] + label:before,\n:not(#foo) input[type=radio] + label:before {\nfont-family: 'ADC-icons';\ncontent: \"\";\ncolor: ",24),this.__$write(this.$blue,41),this.__$write(";\ndisplay: inline-block;\nbackground-color: ",41),this.__$write(this.$grayLighten,43),this.__$write(";\nborder: 1px solid ",43),this.__$write(this.$grayBorder,44),this.__$write(";\nfont-size: 1em;\nline-height: 14px;\ntext-align: center;\nwidth: 20px;\nheight: 20px;\nvertical-align: middle;\nmargin: -3px 6px 0 -20px;\nbox-shadow: inset 1px 1px 3px 0px rgba(0, 0, 0, .2), 0px 1px 0px 0px rgba(255, 255, 255, .8);\n}\n\n:not(#foo) input[type=checkbox] + label:before {\npadding: 2px 0 0 0;\n}\n\n:not(#foo) input[type=radio] + label:before {\nborder-radius: 50%;\n}\n\n\n@media screen\\0 {\n:not(#foo) input[type=radio] + label:before {\npadding: 2px 0 0 0;\n}\n}\n\n:not(#foo) input[type=radio]:focus + label:before,\n:not(#foo) input[type=checkbox]:focus + label:before {\noutline: 0;\n-webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6);\nbox-shadow: inset 0 1px 1px rgba(0,0,0,.75), 0 0 15px rgba(102, 175, 233, 1);\nborder: 1px solid;\n}\n\n.has-error :not(#foo) input[type=radio] + label:before,\n.has-error :not(#foo) input[type=checkbox] + label:before  {\nborder-color: ",44),this.__$write(this.$red,80),this.__$write(";\n}\n\n.has-error :not(#foo) input[type=checkbox]:focus + label:before {\nborder-color: ",80),this.__$write(this.$roseCherry,84),this.__$write(';\n-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #ff358b;\nbox-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #ff358b;\n}\n\n:not(#foo) input[type=checkbox]:checked + label:before {\ncontent: "\\f00c";\n}\n\n:not(#foo) input[type=radio]:checked + label:before {\ncontent: "\\25CF";\n}\n\n',84)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(t){t.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/styles/TPageActionBarStyle.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.styles.TPageActionBarStyle",$extends:require("plnextv2/styles/BaseCss.tpl.css"),$constructor:function(){this.$BaseCss.constructor.call(this)},$destructor:function(){this.$BaseCss.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n\n.page-actions-bar button {\nmargin: 10px 0px 10px 0px;\npadding: 15px 20px 15px 20px;\nwidth: 100%;\n}\n\n@media (max-width: ",11),this.__$write(this.breakpoints.XXS_MAX,19),this.__$write(") {\n",19),this.macro_mobileButtons(),this.__$write("\n}\n",21)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},macro_mobileButtons:function(){try{with(this)this.__$write("\n\n\n.page-actions-bar > .row > div {\nwidth: 100%;\nmargin-left: 0;\nmargin-right: 0;\n}\n\n.page-actions-bar .plnext-widget-btn {\nfont-size: 16px;\n}\n\n.page-actions-bar .plnext-widget-btn-text,\n.page-actions-bar .plnext-widget-btn-text.no-icons{\ntext-align: left;\n}\n\n.page-actions-bar .plnext-widget-btn-text > span.no-icons{\ndisplay: table-cell;\n}\n\n",28)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["mobileButtons",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(t){t.__$prefix=!1},__$initTemplate:function(){return this.$BaseCss.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/styles/car/CarBaseCss.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");require("plnextv2/styles/car/CarBaseCssScript.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.styles.car.CarBaseCss",$extends:require("ariatemplates/templates/CSSTemplate.js"),$constructor:function(){this.$CSSTemplate.constructor.call(this),this.$CarBaseCssScript.constructor.call(this)},$destructor:function(){this.$CarBaseCssScript.$destructor.call(this),this.$CSSTemplate.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.macro_mainMacro()}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},macro_mainMacro:function(){try{with(this);}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["mainMacro",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(t){t.__$csslibs={},t.__$prefix=!1,aria.core.TplClassLoader._importScriptPrototype(plnextv2.styles.car.CarBaseCssScript,t)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/styles/creditCardFourByFour/CCFourByFourBaseCss.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.styles.creditCardFourByFour.CCFourByFourBaseCss",$extends:require("plnextv2/styles/Common.tpl.css"),$constructor:function(){this.$Common.constructor.call(this)},$destructor:function(){this.$Common.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write('\n\n.form-group .cardNumberSplit:focus{\nbox-shadow: none;\n}\n.form-group .cardNumberSplit{\ndisplay: inline-block;\nmargin:0;\nborder:none;\nwidth:23%;\nheight:auto;\npadding: 6px;\nposition:absolute;\ntext-align:center;\nbackground-color: transparent;\n}\nhtml[dir="rtl"] .form-group .cardNumberSplit{\nposition: static;\n}\n\n\n.form-group .cardNumberSplitWrapper-focus-ok {\nborder-color: ',8),this.__$write(this.cornflowerBlue,29),this.__$write(";\noutline: 0;\n-moz-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6);\n-webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6);\nbox-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102, 175, 233, 0.6);\n}\n\n.form-group .cardNumberSplitWrapper-focus-error {\nborder-color: ",29),this.__$write(this.$roseCherry,37),this.__$write(";\nbox-shadow: 0 1px 1px rgba(0, 0, 0, 0.075) inset, 0 0 6px ",37),this.__$write(this.$wildStrawberry,38),this.__$write(';\noutline: 0 none;\n}\n\n.credit-card-number-feedback-icon{\nright : -4px;\n}\n\n.separator{\ntop:46%;\nheight:15px;\ncolor:#bcbcbc;\nposition:absolute;\n}\n.separator_1{\nleft:22%;\n}\nhtml[dir="rtl"] .separator_1{\nright:68%;\n}\n.separator_2{\nleft:45%;\n}\nhtml[dir="rtl"] .separator_2{\nright:45%;\n}\n.separator_3{\nleft:68%;\n}\nhtml[dir="rtl"] .separator_3{\nright:22%;\n}\n.form-group .cardNumberSplitWrapper{\ndisplay:inline-block;\nheight: 34px;\nwidth:100%;\nposition:relative;\npadding:0px\n}\n\n.form-group .split_1{\nvertical-align: middle;\nleft:0px;\n}\n\n.form-group .split_2{\nvertical-align: middle;\nleft:23%;\n}\n\n.split_3{\nvertical-align: middle;\nleft:46%;\n}\n\n.split_4{\nvertical-align: middle;\nleft:69%;\n}\n\n.creditCardWrapper {\npadding-top:0;\n}\n\n.form-group .cardNumberSplitWrapper input[type="text"] {\nwidth: 23%;\npadding-right: 0;\n}\n\n.creditCardWrapper .section-border {\nposition:relative;\npadding:1em;\n}\n.creditCardWrapper .cc-select-message {\ntext-align:center;\npadding: 1em 0 2em;\n}\n\n.creditCardWrapper .credit-card-name {\nmargin-top:1.2em;\nwhite-space:normal;\n}\n\n.creditCardWrapper .no-padding{\npadding:0;\n}\n\n.credit-card-number-form-4x4{\nmargin-bottom:10px;\n}\n\n.creditCardWrapper h5 {\nfont-size: 1.2em;\nmargin-top: 0;\n}\n\n.max-width-tiny {\nmax-width: 11em;\n}\n\n.max-width-small {\nmax-width: 15em;\n}\n\n.max-width-medium {\nmax-width: 18em;\n}\n\n.max-width-large {\nmax-width: 22em;\n}\n\n.max-width-full {\nwidth: auto;\nmax-width: 44em;\n}\n\nhtml[dir="rtl"] .has-feedback .form-control-feedback {\nleft: 0px;\n}\n\n\n',38)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(t){t.__$prefix=!1},__$initTemplate:function(){return this.$Common.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/styles/customDialog/CustomDialog.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.styles.customDialog.CustomDialog",$extends:require("plnextv2/styles/Common.tpl.css"),$constructor:function(){this.$Common.constructor.call(this)},$destructor:function(){this.$Common.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n.dialog-content{\nheight: auto;\n}\n.dialog-content{\npadding: 0.5em;\n}\n.content-display {\nwidth: 57%;\nmargin-left: 21%;\n}\n.content-display h3{\nfont-size: 2.4rem;\nmargin-bottom: 1em;\n}\n.content-border {\nborder-right: 1px solid ",8),this.__$write($grayLight,23),this.__$write(";\n}\n.dialog-header-close{\nfloat: right;\nfont-size: 1em;\ncursor: pointer;\ntext-decoration: none;\ncolor: ",23),this.__$write($black,30),this.__$write(";\n}\n.paragraph-content {\nmargin : 1em;\n}\n.dialog-button {\nfloat:right;\nmargin: 0.5em 0;\nbackground-color: ",30),this.__$write($grayLight,38),this.__$write(";\ncolor: ",38),this.__$write($grayDarken,39),this.__$write(";\n}\n",39)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(t){t.__$prefix=!1},__$initTemplate:function(){return this.$Common.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/styles/customTable/CustomTable.tpl.css
//*******************
var Aria=require("ariatemplates/Aria");module.exports=Aria.classDefinition({$classpath:"plnextv2.styles.customTable.CustomTable",$extends:require("plnextv2/styles/Common.tpl.css"),$constructor:function(){this.$Common.constructor.call(this)},$destructor:function(){this.$Common.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.__$write("\n\n.dialog-Table{\ntable-layout: fixed;\nborder: 1px solid ",8),this.__$write($gray,11),this.__$write(";\nborder-collapse: separate;\nwidth: 100%;\nmargin: 0.5em 0;\n}\n.dialog-Table thead{\nbackground-color: ",11),this.__$write($grayLighter,17),this.__$write(";\n}\n.dialog-Table thead th, .dialog-Table td{\npadding: 0.8em 1.2em;\n}\n.table-striped {\nbackground-color: ",17),this.__$write($grayLightest,23),this.__$write(";\n}\n\n",23)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(t){t.__$prefix=!1},__$initTemplate:function(){return this.$Common.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/views/CarPageTemplate.tpl
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("ariatemplates/html/Template.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.views.CarPageTemplate",$extends:require("plnextv2/views/PageTemplate.tpl"),$constructor:function(){this.$PageTemplate.constructor.call(this)},$destructor:function(){this.$PageTemplate.$destructor.call(this)},$prototype:{macro_timeoutAlertDialogMacro:function(){try{with(this)this.__$processWidgetMarkup("aria.html.HtmlLibrary","Template",{classpath:"plnextv2.modules.COMMON.timeout.desktop.views.CarTimeoutAlertTemplate"},9)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["timeoutAlertDialogMacro",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayDiscountMessage:function(pageCode){try{with(this)pageCode&&data&&data.config&&data.config[pageCode]&&data.config[pageCode].forceDisplayDiscountPanel===!0?(this.__$write('\n<div class="row panel fidelity-message">\n<p> ',16),this.__$write(plnextv2.utils.I18n.getLabel("CARP.avail.generalDiscountMessage"),17),this.__$write(' </p>\n<img class="partnerLogo" alt="Partner logo" title="Partner logo" src="./img/carLogo/Partner.png">\n</div>\n',17)):("loyalty"===data.DiscountType&&(this.__$write('\n<div class="row panel fidelity-message">\n\n<p> ',22),this.__$write(plnextv2.utils.I18n.getStringFromPattern("CARP.avail.discountLoyaltyApplied",[data.FrequentFlyerType]),24),this.__$write(" </p>\n</div>\n",24)),"id_nbr"===data.DiscountType&&(this.__$write('\n<div class="row panel fidelity-message">\n\n<p> ',28),this.__$write(plnextv2.utils.I18n.getLabel("CARP.avail.idDiscountApplied"),30),this.__$write(" </p>\n</div>\n",30)),"cd_nbr"===data.DiscountType&&(this.__$write('\n<div class="row panel fidelity-message">\n\n<p> ',34),this.__$write(plnextv2.utils.I18n.getLabel("CARP.avail.cdDiscountApplied"),36),this.__$write(" </p>\n</div>\n",36)),"default"===data.DiscountType&&(this.__$write('\n<div class="row panel fidelity-message">\n<p> ',40),this.__$write(plnextv2.utils.I18n.getLabel("CARP.avail.dfltDiscountMessage"),41),this.__$write(" </p>\n\n</div>\n",41)))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayDiscountMessage",__filename,this["aria:currentLineNumber"]],_ex)}},__$initTemplate:function(){return this.$PageTemplate.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/views/MainTemplate.tpl
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/views/MainTemplateScript.js"),require("cse/pageEngine/CustomPlaceholder.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.views.MainTemplate",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$MainTemplateScript.constructor.call(this)},$destructor:function(){this.$MainTemplateScript.$destructor.call(this),this.$Template.$destructor.call(this)},$css:[require("plnextv2/styles/Common.tpl.css")],$prototype:{macro_main:function(){try{with(this)this.macro_mainArticle()}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},macro_mainArticle:function(){try{with(this)this.__$processWidgetMarkup("cse.pageEngine.CseWidgets","Placeholder",{name:"pageContent",type:"div"},19)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["mainArticle",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(t){t.__$macrolibs={},t.__$width={},t.__$height={},aria.core.TplClassLoader._importScriptPrototype(plnextv2.views.MainTemplateScript,t)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/views/MainTemplateScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.views.MainTemplateScript",$dependencies:["plnextv2.utils.BootstrapUtils"],$prototype:{$dataReady:function(){this.appData=this.data.storage.appData,this.pageData=this.data.storage.pageData,this.bsGridClass={left:{cols:{xs:1,sm:1}},right:{cols:{xs:1,sm:1}},main:{cols:{xs:10,sm:10}}}},getBsGridClass:function(t){return plnextv2.utils.BootstrapUtils.getBsGridClass(this.bsGridClass,t)},$displayReady:function(){plnextv2.utils.HtmlUtils.deactivateLoading(document.body),plnextv2.utils.HtmlUtils.scrollTop(),plnextv2.utils.HtmlUtils.setDeviceTypeClass()}}});
//*******************
//LOGICAL-PATH:plnextv2/views/PageTemplate.tpl
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/animations/ripple/Ripple.js"),require("plnextv2/utils/macroLibs/uiWidgets/UIWidgets.tml"),require("plnextv2/utils/macroLibs/accessibility/Accessibility.tml"),require("plnextv2/utils/errorComponent/ErrorMacro.tml"),require("plnextv2/views/PageTemplateScript.js"),require("cse/pageEngine/CustomPlaceholder.js"),require("plnextv2/utils/widgets/plnextLib/modalDialog/core/ModalDialog.js"),require("ariatemplates/html/Template.js"),require("plnextv2/utils/widgets/plnextLib/dialog/core/Dialog.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.views.PageTemplate",$extends:require("ariatemplates/templates/Template.js"),$constructor:function(){this.$Template.constructor.call(this),this.$PageTemplateScript.constructor.call(this)},$destructor:function(){this.$PageTemplateScript.$destructor.call(this),this.$Template.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.wcagLib.macro_skipTo({id:this.getPageId()+"-page",href:this.getPageId()+"-page",content:plnextv2.utils.I18n.getLabel("tx_pltg_text_skipToMainContent"),isPageContent:!0}),this.__$write('\n\n<header id="page-template-header" class="row">\n',20),this.__$processWidgetMarkup("cse.pageEngine.CseWidgets","Placeholder",{name:"debug_dwm_placeholder"},22),this._isEmbeddedInApp()||this.__$processWidgetMarkup("cse.pageEngine.CseWidgets","Placeholder",{name:"top_dwm_placeholder"},26),this.macro_headerMacro(),this.__$write('\n</header>\n\n\n<section id="',31),this.__$write(this.getPageId(),34),this.__$write('-page" data-page-name="',34),this.__$write(this.getPageId(),34),this.__$write('"\nclass="row page-template-section ',34),this.__$write(_getDeviceSpecificCSS(),35),this.__$write('" >\n<section id="',35),this.__$write(this.getPageId(),36),this.__$write('-page-content" class="',36),this.__$write(this.getBsGridClass("main"),36),this.__$write('">\n',36),this.macro_leftMacro(),this.macro_mainMacro(),this.macro_rightMacro(),this.macro_commonMacro(),this.__$write('\n</section>\n\n</section>\n\n<footer id="page-template-footer" class="row">\n',41),this.macro_footerMacro(),this.__$processWidgetMarkup("cse.pageEngine.CseWidgets","Placeholder",{name:"bottom_dwm_placeholder"},47),this.__$write("\n</footer>\n",50)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},macro_mainMacro:function(){try{with(this);}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["mainMacro",__filename,this["aria:currentLineNumber"]],_ex)}},macro_commonMacro:function(){try{with(this){if(plnextv2.utils.context.AppContext.getSiteConfig().appData.config.timeout.isTimeoutAlertEnabled&&(bsGrid=this.getBsGridClass("timeout"),this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","ModalDialog",{id:"timeout-warning-dialog",bind:{visible:{inside:plnextv2.utils.context.AppContext.getAppData().config.timeout,to:"timeOutWarning"}},closeOnMouseClick:!1,closeButton:!1,closeOnEscape:!1},67)&&(this.__$processWidgetMarkup("aria.html.HtmlLibrary","Template",{classpath:"plnextv2.modules.COMMON.timeout.desktop.views.TimeoutTemplate"},78),this.__$endContainerWidget()),this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","ModalDialog",{id:"timeout-dialog",bind:{visible:{inside:plnextv2.utils.context.AppContext.getAppData().config.timeout,to:"timeOut"}},closeOnMouseClick:!1,closeButton:!1,closeOnEscape:!1},85)&&(this.macro_timeoutAlertDialogMacro(),this.__$endContainerWidget())),window.__gateway){var state=this.navigation.getPageBlockState();this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","ModalDialog",{id:"transition-block-warning-dialog",bind:{visible:{inside:state,to:"isBlocked"}},closeOnMouseClick:!1,closeButton:!1,closeOnEscape:!1},104)&&(this.__$processWidgetMarkup("aria.html.HtmlLibrary","Template",{classpath:"plnextv2.modules.COMMON.transitionBlock.desktop.views.TransitionBlockTemplate"},116),this.__$endContainerWidget())}this.macro_interceptPageLoadMacro()}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["commonMacro",__filename,this["aria:currentLineNumber"]],_ex)}},macro_timeoutAlertDialogMacro:function(){try{with(this)this.__$processWidgetMarkup("aria.html.HtmlLibrary","Template",{classpath:"plnextv2.modules.COMMON.timeout.desktop.views.TimeoutAlertTemplate"},127)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["timeoutAlertDialogMacro",__filename,this["aria:currentLineNumber"]],_ex)}},macro_headerMacro:function(){try{with(this);}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["headerMacro",__filename,this["aria:currentLineNumber"]],_ex)}},macro_footerMacro:function(){try{with(this);}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["footerMacro",__filename,this["aria:currentLineNumber"]],_ex)}},macro_leftMacro:function(){try{with(this)this.__$write('\n<aside id="left-page-custom-content" class="page-custom-content">\n',144),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_NewUiCustomLeftPanel"),145),this.__$processWidgetMarkup("cse.pageEngine.CseWidgets","Placeholder",{name:"left_dwm_placeholder"},146),this.__$write("\n\n\n</aside>\n",149)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["leftMacro",__filename,this["aria:currentLineNumber"]],_ex)}},macro_rightMacro:function(){try{with(this)this.__$write('\n<aside id="right-page-custom-content" class="page-custom-content">\n',158),this.__$write(plnextv2.utils.I18n.getLabel("tx_pltg_text_NewUiCustomRightPanel"),159),this.__$processWidgetMarkup("cse.pageEngine.CseWidgets","Placeholder",{name:"right_dwm_placeholder"},160),this.__$write("\n</aside>\n",163)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["rightMacro",__filename,this["aria:currentLineNumber"]],_ex)}},macro_pageActionsBar:function(options){try{with(this){if(this.__$write('\n<div class="page-actions-bar text-right">\n<div class="row">\n<div class="col-xs-24 button-container">\n\n',174),options.backButton&&this.uiWidgetsLib.macro_backButton({text:options.backButton.text,classList:["pull-left"],onClickCb:options.backButton.onClick}),options.ignoreButton&&this.uiWidgetsLib.macro_ignoreButton({text:options.ignoreButton.text,classList:["white-button","ignore-button"],onClickCb:options.ignoreButton.onClick}),options.nextButton&&this.uiWidgetsLib.macro_nextStepButton({text:options.nextButton.text,classList:["next-button"],onClickCb:options.nextButton.onClick}),options.buttons){var __v_1=options.buttons;void 0==options.buttons&&this.$logError(this.ITERABLE_UNDEFINED,["foreach",__filename,200]);for(var button_ct=0,__v_2=__v_1.length,button_index=0;__v_2>button_index;button_index++){var button=__v_1[button_index];button_ct++,this.uiWidgetsLib.macro_button(button)}}this.__$write("\n</div>\n</div>\n</div>\n",205)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["pageActionsBar",__filename,this["aria:currentLineNumber"]],_ex)}},macro_interceptPageLoadMacro:function(){try{with(this)plnextv2.utils.context.AppContext.getSiteConfig().appData.config.interceptPageLoad&&plnextv2.utils.context.AppContext.getSiteConfig().appData.config.interceptPageLoad.interceptEnabled&&this.__$beginContainerWidget("plnextv2.utils.widgets.PlnextLib","Dialog",{id:"intercept-page-load-dialog",bind:{visible:{inside:plnextv2.utils.context.AppContext.getAppData().config.interceptPageLoad,to:"showDialog"}},closeOnMouseClick:!1,width:600,maxHeight:500,modal:!0},217)&&(this.__$processWidgetMarkup("aria.html.HtmlLibrary","Template",{classpath:"plnextv2.modules.COMMON.interceptPageLoad.desktop.views.InterceptPageLoad"},230),this.__$endContainerWidget())}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["interceptPageLoadMacro",__filename,this["aria:currentLineNumber"]],_ex)}},macro_oldSearchBar:function(config){try{with(this)config&&this.data.config.SEARCH_BAR&&!this.data.config.SEARCH_BAR.newSearchBarEnabled&&(this.__$write('\n<div id="searchBar" class="component-container searchbar-container ',244),this.__$write(this.getBsGridClass("searchBar"),244),this.__$write(' ">\n',244),this.__$processWidgetMarkup("cse.pageEngine.CseWidgets","Placeholder",{name:"searchBar"},245),this.__$write("\n</div>\n",248))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["oldSearchBar",__filename,this["aria:currentLineNumber"]],_ex)}},macro_newSearchBar:function(config,customClass){try{with(this)if(isNewSearchBarEnabled(config)||isOpenJawsSearch(config)){var searchBar="searchBar";isOpenJawsSearch(config)&&(searchBar="searchBarAdvanced"),customClass=this.getCustomClass(customClass),this.__$write('\n\n<div class=\'clearfix\'></div>\n<div id="searchBar" class="new-search-bar component-container searchbar-container ',267),this.__$write(customClass,269),this.__$write('">\n',269),this.__$processWidgetMarkup("cse.pageEngine.CseWidgets","Placeholder",{name:searchBar},270),this.__$write("\n</div>\n",273)}}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["newSearchBar",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(t){t.__$macrolibs={errorLib:"plnextv2.utils.errorComponent.ErrorMacro",wcagLib:"plnextv2.utils.macroLibs.accessibility.Accessibility",uiWidgetsLib:"plnextv2.utils.macroLibs.uiWidgets.UIWidgets"},t.__$width={},t.__$height={},aria.core.TplClassLoader._importScriptPrototype(plnextv2.views.PageTemplateScript,t)},__$initTemplate:function(){return!0}}});
//*******************
//LOGICAL-PATH:plnextv2/views/PageTemplateScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.views.PageTemplateScript",$dependencies:["plnextv2.utils.BootstrapUtils","plnextv2.utils.I18n","plnextv2.utils.HtmlUtils","plnextv2.utils.DeviceUtils"],$statics:{PAGE_FDCS_ID:"FDCS",TRIP_TYPE_OPEN_JAWS:"M"},$constructor:function(){this.navigation=plnextv2.utils.widgets.plnextLib.navigationManager.PlnextNavigationManager,this.bsGridClass={main:{cols:{xs:24}},searchBar:{cols:{xs:24}}}},$prototype:{$dataReady:function(){this._dataReady(),this.data.bsGrid&&aria.utils.Json.inject(this.data.bsGrid,this.bsGridClass,!0),jQuery(document).trigger("plnext:customData:ready"),"function"==typeof sendPerfRequest&&sendPerfRequest()},$displayReady:function(){this._displayReady()},$viewReady:function(){this._viewReady(),jQuery(document.body).attr("data-template-name",this.getPageId())},_viewReady:function(){},_displayReady:function(){},_dataReady:function(){},getBsGridClass:function(t){return plnextv2.utils.BootstrapUtils.getBsGridClass(this.bsGridClass,t)},getPageId:function(){return this.moduleCtrl.getUID()},_isPageDeviceTypeDesktop:function(){return plnextv2.utils.DeviceUtils.isPageDeviceTypeDesktop()},_isPageDeviceTypeTablet:function(){return plnextv2.utils.DeviceUtils.isPageDeviceTypeTablet()},_isPageDeviceTypeMobile:function(){return plnextv2.utils.DeviceUtils.isPageDeviceTypeMobile()},setBsGrid:function(t){aria.utils.Json.inject(t,this.bsGridClass,!0)},_getDeviceSpecificCSS:function(){var t="";return(this._isPageDeviceTypeTablet()||this._isPageDeviceTypeMobile())&&(t="tablet-page-template-section"),t},getCustomClass:function(t){return t||(t=this.getBsGridClass("searchBar")),this.getPageId()===this.PAGE_FDCS_ID&&(t="row"),t},isNewSearchBarEnabled:function(t){return t.SEARCH_BAR&&t.SEARCH_BAR.newSearchBarEnabled&&!t.SEARCH_BAR.hideSearchBar},isOpenJawsSearch:function(t){var e=plnextv2.utils.context.AppContext.getPageId(),i=aria.utils.Json.getValue(t[e],"initTripType");return i===this.TRIP_TYPE_OPEN_JAWS},_isEmbeddedInApp:function(){return plnextv2.utils.DeviceUtils.isEmbeddedInApp()}}});
//*******************
//LOGICAL-PATH:plnextv2/views/PageTemplateWithTripSummary.tpl
//*******************
var Aria=require("ariatemplates/Aria");require("ariatemplates/widgets/AriaLib.js"),require("cse/pageEngine/CseWidgets.js"),require("ariatemplates/html/HtmlLibrary.js"),require("plnextv2/utils/widgets/PlnextLib.js"),require("plnextv2/utils/widgets/light/LightWidgetLib.js"),require("plnextv2/utils/DeviceUtils.js"),require("plnextv2/utils/macroLibs/accessibility/Accessibility.tml"),require("plnextv2/views/PageTemplateWithTripSummaryScript.js"),require("cse/pageEngine/CustomPlaceholder.js"),require("ariatemplates/core/TplClassLoader.js"),module.exports=Aria.classDefinition({$classpath:"plnextv2.views.PageTemplateWithTripSummary",$extends:require("plnextv2/views/PageTemplate.tpl"),$constructor:function(){this.$PageTemplate.constructor.call(this),this.$PageTemplateWithTripSummaryScript.constructor.call(this)},$destructor:function(){this.$PageTemplateWithTripSummaryScript.$destructor.call(this),this.$PageTemplate.$destructor.call(this)},$prototype:{macro_main:function(){try{with(this)this.wcagLib.macro_skipTo({id:this.getPageId()+"-page",href:this.getPageId()+"-page",content:plnextv2.utils.I18n.getLabel("tx_pltg_text_skipToMainContent"),isPageContent:!0}),this.__$write('\n\n<header id="page-template-header" class="row">\n',26),this.__$processWidgetMarkup("cse.pageEngine.CseWidgets","Placeholder",{name:"debug_dwm_placeholder"},28),this._isEmbeddedInApp()||this.__$processWidgetMarkup("cse.pageEngine.CseWidgets","Placeholder",{name:"top_dwm_placeholder"},32),this.macro_headerMacro(),this.__$write("\n</header>\n\n\n",37),(this._isPageDeviceTypeTablet()||this._isPageDeviceTypeMobile())&&this._showTripSummary()&&this.__$processWidgetMarkup("cse.pageEngine.CseWidgets","Placeholder",{name:"tripSummary",type:"div",attributes:{classList:["tripsummary-sticky-wrapper"]}},41),this.__$write('\n\n<div id="page-content">\n<section id="',49),this.__$write(this.getPageId(),51),this.__$write('-page" data-page-name="',51),this.__$write(this.getPageId(),51),this.__$write('"\nclass="row page-template-section ',51),this.__$write(_getDeviceSpecificCSS(),52),this.__$write('" >\n<section id="',52),this.__$write(this.getPageId(),53),this.__$write('-page-content" class="',53),this.__$write(this.getBsGridClass("main"),53),this.__$write('">\n',53),this.macro_leftMacro(),this.macro_mainMacroByDevice(),this.macro_rightMacro(),this.macro_commonMacro(),this.__$write("\n</section>\n</section>\n</div>\n\n",58),(this._isPageDeviceTypeTablet()||this._isPageDeviceTypeMobile())&&this._showTripSummary()&&this.data.config.TRIP_SUMMARY.displayFooterMode&&this.__$processWidgetMarkup("cse.pageEngine.CseWidgets","Placeholder",{name:"priceSummaryBottom",type:"div"},63),this.__$write('\n<footer id="page-template-footer" class="row">\n',68),this.macro_footerMacro(),this.__$processWidgetMarkup("cse.pageEngine.CseWidgets","Placeholder",{name:"bottom_dwm_placeholder"},70),this.__$write("\n</footer>\n",73)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["main",__filename,this["aria:currentLineNumber"]],_ex)}},macro_mainMacroByDevice:function(){try{with(this)this.__$write('\n<div class="row">\n\n\n',80),!this._showTripSummary()||this._isPageDeviceTypeTablet()||this._isPageDeviceTypeMobile()?(this.__$write('\n<section class="col-xs-24">\n',94),this.macro_mainMacro(),this.__$write("\n</section>\n",96)):(this.__$write('\n<section class="col-xs-18">\n',84),this.macro_mainMacro(),this.__$write("\n</section>\n",86),this.__$processWidgetMarkup("cse.pageEngine.CseWidgets","Placeholder",{name:"tripSummary",type:"div"},87)),this.__$write("\n\n</div>\n",98)}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["mainMacroByDevice",__filename,this["aria:currentLineNumber"]],_ex)}},macro_displayPriceReview:function(display){try{with(this)display&&(this.__$write('\n<div id="price-review" class="component-container price-review-container">\n',105),this.__$processWidgetMarkup("cse.pageEngine.CseWidgets","Placeholder",{name:"priceReview"},106),this.__$write("\n</div>\n",109))}catch(_ex){this.$logError(this.EXCEPTION_IN_MACRO,["displayPriceReview",__filename,this["aria:currentLineNumber"]],_ex)}},$init:function(t){var e={};Aria.copyObject(t.__$macrolibs,e),Aria.copyObject({wcagLib:"plnextv2.utils.macroLibs.accessibility.Accessibility"},e),t.__$macrolibs=e,aria.core.TplClassLoader._importScriptPrototype(plnextv2.views.PageTemplateWithTripSummaryScript,t)},__$initTemplate:function(){return this.$PageTemplate.__$initTemplate.call(this)?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/views/PageTemplateWithTripSummaryScript.js
//*******************
Aria.tplScriptDefinition({$classpath:"plnextv2.views.PageTemplateWithTripSummaryScript",$dependencies:["plnextv2.utils.DiscountUtils","plnextv2.utils.I18n"],$constructor:function(){this._i18n=plnextv2.utils.I18n,this._discountUtils=plnextv2.utils.DiscountUtils},$prototype:{_showTripSummary:function(){return!0},getPromocodeWarningMessage:function(t){if(!this._displayPromocodeWarningMessage())return"";var e="",i=this._discountUtils.getPromocodeFromSession(),n=this.data.business.Price;if(this._discountUtils.displayWarningMessage(n)&&(this._discountUtils.removePromocodeFromSession(),e=this._discountUtils.getDiscountCodeNotAppliedMessage(n,i)),!t&&this._discountUtils.isPromocodeAppliedForPrice(n)){var s=this._discountUtils.getPromocode({priceBean:n});this._discountUtils.addPromocodeToSession(s)}return e},_displayPromocodeWarningMessage:function(){return this.moduleCtrl.getPageConfig()&&this.moduleCtrl.getPageConfig().displayAirDiscountReason}}});
//*******************
//LOGICAL-PATH:plnextv2/controller/BaseComponentController.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.controller.BaseComponentController",$extends:"plnextv2.controller.BaseController",$implements:["plnextv2.controller.IBaseComponentController"],$dependencies:["plnextv2.utils.context.AppContext"],$constructor:function(){this.$BaseController.constructor.call(this),this._active=null},$prototype:{$publicInterfaceName:"plnextv2.controller.IBaseComponentController",doInit:function(){this.$BaseController.doInit.call(this),this._appContext.addComponentCtrl(this),this._active=!0,this._eventBus.subscribe("page:dmin:build",this._storeDmin,this),this._data.constants=this._appConstants,this._initComponent()},doClear:function(){this._active=!1,this._clearComponent(),this.$BaseController.doClear.call(this)},_storeDmin:function(){var t=this._buildDmin(),e=this._appContext.getPageData().dmin;"undefined"!=typeof t&&aria.utils.Json.inject(t,e,!0)},_buildDmin:function(){this.$logError("_buildDmin method has to be implemented in %1",[this.$classpath])},_initComponent:function(){this.$logError("_initComponent method has to be implemented in %1",[this.$classpath])},_clearComponent:function(){this.$logError("_clearComponent method has to be implemented in %1",[this.$classpath])},_doBindings:function(){var t=this._appContext.getPageData();if(this._bindings)for(var e in this._bindings.pageData)this._bindData(t,this._bindings.pageData[e],this._data,e);this._bindData(t.config,this._UID,this._data,"config")},isActive:function(){return this._active},getPageId:function(){return plnextv2.utils.context.AppContext?plnextv2.utils.context.AppContext.getPageId():void 0}}});
//*******************
//LOGICAL-PATH:plnextv2/controller/BaseController.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.controller.BaseController",$extends:"aria.templates.ModuleCtrl",$implements:["plnextv2.controller.IBaseController"],$dependencies:["plnextv2.utils.EventBus","plnextv2.utils.context.AppContext","plnextv2.utils.CustomAriaUtils","plnextv2.utils.widgets.plnextLib.navigationManager.PlnextNavigationManager"],$statics:{NAVIGATE:"navigate",PASSENGER_MODIFY_PAGES:{MALPI:"MALPI",MAPIS:"MAPIS",MAPIM:"MAPIM"}},$constructor:function(){this.$ModuleCtrl.constructor.call(this),this._UID=null,this._appContext=null,this._bindings=null,this._eventBus=null,this._appConstants={FLOW_TYPE_STANDARD:"STANDARD",FLOW_TYPE_REBOOK:"REBOOK",FLOW_TYPE_INVOLUNTARY_REBOOK:"INVOLUNTARY_REBOOK",FLOW_TYPE_UPGRADE:"UPGRADE",FLOW_TYPE_MODIFY_INSURANCE:"MODIFY_INSURANCE",FLOW_TYPE_CANCELLATION:"CANCELLATION",FLOW_TYPE_SERVICING:"SERVICING"}},$destructor:function(){this._UID=null,this._appContext=null,this._bindings=null,this._appConstants=null,this.doClear(),this.$ModuleCtrl.$destructor.call(this)},$prototype:{$publicInterfaceName:"plnextv2.controller.IBaseController",$raiseEvent:function(t){if(t&&t.name===this.NAVIGATE){disableAbandonDetection=!0;var e=plnextv2.utils.context.AppContext.getAppData();e.config.interceptPageLoad&&e.config.interceptPageLoad.interceptEnabled&&!e.config.interceptPageLoad.showDialog?(aria.utils.Json.setValue(e.config.interceptPageLoad,"showDialog",!0),aria.utils.Json.setValue(e.config.interceptPageLoad,"callback",this.$raiseEvent),aria.utils.Json.setValue(e.config.interceptPageLoad,"callbackArgs",{name:t.name,page:t.page})):this.$ModuleCtrl.$raiseEvent.call(this,t)}else this.$ModuleCtrl.$raiseEvent.call(this,t)},init:function(t,e){this._appContext=plnextv2.utils.context.AppContext,this._eventBus=this._appContext.getEventBus(),this._navigationManager=plnextv2.utils.widgets.plnextLib.navigationManager.PlnextNavigationManager,t.name&&(this._UID=t.name),t.bindings&&(this._bindings=t.bindings),this.doInit(),this.$callback(e)},doClear:function(){this._data={}},doInit:function(){this._doBindings(),this._subscribeEvents()},_doBindings:function(){this.$logError("_doBindings method has to be implemented in %1",[this.$classpath])},_subscribeEvents:function(){this.$logError("_subscribeEvents method has to be implemented in %1",[this.$classpath])},publishAnalyticsEvent:function(t,e){this._eventBus.publish("analytics:event:"+t,this,e)},_createObjectIfNotExist:function(t,e){var i=null;if(t&&e)for(var n=e.split("."),s=0,a=n.length;a>s;s++){var i=n[s];i in t||(t[i]={}),s+1<n.length&&(t=t[i])}return{container:t,property:i}},_bindData:function(t,e,i,n){var s=aria.utils.Path.describe(t,e);if(null!=s){var a=this._createObjectIfNotExist(i,n);a.container[a.property]=s.container[s.property];var r={fn:this._updateLocalData,scope:this,args:{keyFrom:e,keyTo:n}},o={fn:this._updateGlobalData,scope:this,args:{keyFrom:n,keyTo:e,listenerToExclude:r}};r.args.listenerToExclude=o,aria.utils.Json.addListener(s.container,s.property,r,!1,!1),aria.utils.Json.addListener(a.container,a.property,o,!1,!1)}},_updateLocalData:function(t,e){var i=e.keyFrom,n=e.keyTo,s=aria.utils.Path.resolve(i,this._appContext.getPageData()),a=t.dataName,r=t.dataHolder,o=t.newValue,l=t.oldValue;if(o==o||l==l){var c=this.getPath(s,r,a);if(null!=c){n+=c;var d=this._createObjectIfNotExist(this._data,n);aria.utils.Json.setValue(d.container,d.property,o,e.listenerToExclude)}}},_updateGlobalData:function(t,e){var i=e.keyFrom,n=e.keyTo,s=aria.utils.Path.resolve(i,this._data),a=t.dataName,r=t.dataHolder,o=t.newValue,l=t.oldValue;if(o==o||l==l){var c=this.getPath(s,r,a);if(null!=c){n+=c;var d=this._createObjectIfNotExist(this._appContext.getPageData(),n);aria.utils.Json.setValue(d.container,d.property,o,e.listenerToExclude)}}},getPath:function(t,e,i){if(aria.utils.Json.isMetadata(i))return null;if(e[i]===t)return"";if(e["aria:parent"]&&e["aria:parent"].length>0)for(var n=e["aria:parent"].length,s=0;n>s;s++){var a=this.getPath(t,e["aria:parent"][s].parent,e["aria:parent"][s].property);if(null!=a)return a+"."+i}return null},getUID:function(){return this._UID},isRebookingFlow:function(){return this._data.config.flowType===this._data.constants.FLOW_TYPE_REBOOK},isUpgradeFlow:function(){return this._data.config.flowType===this._data.constants.FLOW_TYPE_UPGRADE},isServicingFlow:function(){return this._data.config.flowType===this._data.constants.FLOW_TYPE_SERVICING},isModifyInsuranceFlow:function(){return this._data.config.flowType===this._data.constants.FLOW_TYPE_MODIFY_INSURANCE},isStandardFlow:function(){return this._data.config.flowType===this._data.constants.FLOW_TYPE_STANDARD},continueAfterInterceptPageLoad:function(){var t=plnextv2.utils.context.AppContext.getAppData().config.interceptPageLoad;t.callback.call(this,t.callbackArgs),aria.utils.Json.setValue(t,"showDialog",!1)},isPassengerModifiyPage:function(){var t=[this.PASSENGER_MODIFY_PAGES.MALPI,this.PASSENGER_MODIFY_PAGES.MAPIS,this.PASSENGER_MODIFY_PAGES.MAPIM];return this._pageId=plnextv2.utils.context.AppContext.getPageId(),t.indexOf(this._pageId)>=0?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/controller/BasePageController.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.controller.BasePageController",$extends:"plnextv2.controller.BaseController",$implements:["plnextv2.controller.IBasePageController"],$dependencies:["plnextv2.utils.storage.SessionStorageManager","aria.core.useragent.UserAgent","aria.core.Timer","plnextv2.utils.CEMInformationUtils","plnextv2.analytics.schemes.DigitalDataScheme","plnextv2.utils.analytics.PerformancesAnalysis","plnextv2.utils.NativeAppCommunicationWrapper","plnextv2.utils.DeviceUtils","plnextv2.utils.ProfileUtils"],$constructor:function(){this.$BaseController.constructor.call(this),this.digitalDataScheme=plnextv2.analytics.schemes.DigitalDataScheme,this.deviceUtils=plnextv2.utils.DeviceUtils,this.merciApp=plnextv2.utils.NativeAppCommunicationWrapper,this._profileUtils=plnextv2.utils.ProfileUtils,this.parser=aria.core.useragent.UserAgent},$statics:{DUAL_DISPLAY_TYPE:"2",NO_FLOW_RESTART:"Impossible to re-launch the flow. Encryption timeout.",EXTERNAL_LOGIN:"ExtLogin",DIGITAL_DATA_PARAMETER:"DIGITAL_DATA",SITE_DATA_LAKE_PUSH_ALL_VALUE:{ALL:"ALL",UI_ONLY:"UI_ONLY",OFF:"OFF"},PRODUCT_INFORMATION:"DX",PERFORMANCE_METRICS_VERSION:"1.0.0",DEFAULT_DEVICE:"Desktop"},$prototype:{$publicInterfaceName:"plnextv2.controller.IBasePageController",doInit:function(){this.$BaseController.doInit.call(this),this._appContext.addPageCtrl(this),this._bindEvents(),this._subscribeAnalyticsGlobalEvents(),this._buildAnalytics(this._appContext),this._buildTravellerAudience(this._appContext),this._storeLoginData(),this._initPage(),this._addResponseTimeEvents(),this.isUsingDigitalLibrary()||this._publishAnalyticsGlobalEvents(),this.storageManager=plnextv2.utils.storage.SessionStorageManager,this._data.constants=this._appConstants,this.reqMgr=plnextv2.utils.requestManager.PlnextRequestManager,this.__storeCEMInformationInLocalStorage()},isUsingDigitalLibrary:function(){return this._appContext._siteConfig.appData.config.analytics.SITE_DIG_ANALYTICS_ENABLE&&this._appContext._siteConfig.appData.config.analytics.SITE_DIG_ANALYTICS_DIRCDN&&this._appContext._siteConfig.appData.config.analytics.SITE_ENABLE_ANALYTICS},$raiseEvent:function(t){t&&t.name===this.NAVIGATE&&"GET"!==t.page.requestObj.method&&(this._storeDigitalDataCollectedInDmin(t.page.requestObj.data),this._storePerformanceAnalyticsInDmIn(t.page.requestObj.data)),t&&t.name===this.NAVIGATE&&null!=responseTime&&(responseTime.startTime=(new Date).getTime(),this.analytics&&(t.page.requestObj.action===this.EXTERNAL_LOGIN&&(responseTime.action=this.analytics.analyticsUtils.EVENT_ACTION.EXTERNAL_LOGIN),this._setAnalyticsResponseTime())),this.$BaseController.$raiseEvent.call(this,t)},doClear:function(){this._clearPage(),this.$BaseController.doClear.call(this)},_initPage:function(){this.$logError("_initPage method has to be implemented in %1",[this.$classpath])},_clearPage:function(){this.$logError("_clearPage method has to be implemented in %1",[this.$classpath])},_bindEvents:function(){this.$logError("_bindEvents method has to be implemented in %1",[this.$classpath])},_buildAnalytics:function(){this.$logError("_buildAnalytics method has to be implemented in %1",[this.$classpath])},_subscribeAnalyticsGlobalEvents:function(){this.analytics&&(this._eventBus.subscribe("analytics:event:error",function(t,e){this.analytics.eventDataError(e)},this),this._eventBus.subscribe("analytics:event:globalError",function(t,e){this.analytics.eventGlobalError(e)},this),this._eventBus.subscribe("analytics:event:timeoutDisplayed",function(t,e){this.analytics.eventTimeoutDisplayed(e)},this),this._eventBus.subscribe("analytics:event:timeoutClosed",function(t,e){this.analytics.eventTimeoutClosed(e)},this),this._eventBus.subscribe("analytics:event:pageLoad",function(t,e){"function"==typeof this.analytics.eventPageLoad&&this.analytics.eventPageLoad(e)},this),this._eventBus.subscribe("analytics:event:ignoreChanges",function(t,e){this.analytics.eventIgnoreChanges(e)},this),this._eventBus.subscribe("analytics:event:currencyConverterPopup",function(t,e){this.analytics.eventCurrencyConverterPopup(e)},this),this._eventBus.subscribe("analytics:event:convertedToCurrency",function(t,e){this.analytics.eventConvertedToCurrency(e)},this),this._eventBus.subscribe("analytics:event:pageView",function(t,e){"function"==typeof this.analytics.eventPageView&&this.analytics.eventPageView(e)},this),this._eventBus.subscribe("analytics:event:pageNavigation",function(t,e){"function"==typeof this.analytics.eventNavigationPageView&&this.analytics.eventNavigationPageView(e)},this))},_buildTravellerAudience:function(){},requestBuildDmin:function(t){this._eventBus.publish("page:dmin:build",this,this._onBuildDminCompleted,t)},_onBuildDminCompleted:function(){this.$logError("_onBuildDminCompleted method has to be implemented in %1",[this.$classpath])},bindEvent:function(t,e,i){this._eventBus.subscribe(t,this._onEventReceived,this,e,i)},_onEventReceived:function(){var t=Array.prototype.slice.call(arguments),e=t.pop(),i=t.pop(),n=t.splice(0,1)[0].type;if(void 0!==e){var s=new aria.utils.Callback(e);t=s.call(t)}this.$logDebug("OUT event: '"+n+"' triggered IN event: '"+i+"'"),t=[i,this].concat(t),this._eventBus.publish.apply(this._eventBus,t)},_doBindings:function(){this._data=this._appContext.getPageData(),aria.utils.Json.setValue(this._data,"dmin",{})},callExtendSessionAjax:function(){var t={url:"AffinityKeepAliveSession.action",method:"POST"};this.reqMgr.sendJSON(t)},restartFlow:function(){if(this._appContext.getAppData().config.encryption.timeout)this.$logError(this.NO_FLOW_RESTART);else{var t=this.storageManager.get("restartFlow","Links"),e=this.storageManager.get("actionUrl","Links");if(t&&e){var i={url:e,method:"POST",isHTTP:!0,data:t,isExternalUrl:!1,clearSession:!0,clearData:!0,clearDeviceType:!0};!this._navigationManager.isRouterAvailable()&&plnextv2.utils.HtmlUtils.activateLoading({container:document.body}),this.$raiseEvent({name:"navigate",page:{requestObj:i}})}}},startOver:function(){if(this.deviceUtils.isEmbeddedInApp())this.merciApp.navigateTo({pageId:"SEARCH"});else{var t=this._appContext.getAppData(),e=!t.config.encryption.isEncrypted;if(t.config.links.startOver){var i={url:t.config.links.startOver,method:"GET",isHTTP:!0,clearSession:e,clearData:!0,clearDeviceType:!0};this.reqMgr._sendRequest(i)}}},isRebookingFlow:function(){return this._data.config[this.getUID()].flowType===this._data.constants.FLOW_TYPE_REBOOK},isServicingFlow:function(){return this._data.config[this.getUID()].flowType===this._data.constants.FLOW_TYPE_SERVICING},isUpgradeFlow:function(){return this._data.config[this.getUID()].flowType===this._data.constants.FLOW_TYPE_UPGRADE},__storeCEMInformationInLocalStorage:function(){this._data.business.CEMInformation&&plnextv2.utils.CEMInformationUtils.storeCEMInformation(this._data.business.CEMInformation)},_addResponseTimeEvents:function(){this.analytics&&this._getAnalyticsResponseTime(),this._updateResponseTimeInfo(),this.analytics&&responseTime&&responseTime.action&&(this._eventBus.subscribe("analytics:event:ResponseTime",function(t,e){this.analytics.eventResponseTime(e)},this),this.analytics.analyticsUtils&&this.publishAnalyticsEvent(this.analytics.analyticsUtils.EVENT_NAME.RESPONSE_TIME,{action:responseTime.action}),responseTime.action="",this._setAnalyticsResponseTime())},_updateResponseTimeInfo:function(){"undefined"!=typeof responseTime&&null!==responseTime&&responseTime.startTime?(responseTime.endTime=(new Date).getTime(),responseTime.elapsedTime=responseTime.endTime-responseTime.startTime,responseTime.startTime=0):responseTime={startTime:0,endTime:0,elapsedTime:0,action:""}},_getAnalyticsResponseTime:function(){responseTime=this.analytics.sessionStorageManager&&this.analytics.sessionStorageManager.get("responseTime","Analytics"),responseTime||(responseTime=this.analytics.localStorageManager&&this.analytics.localStorageManager.get("responseTime","Analytics"))},_setAnalyticsResponseTime:function(){this.analytics.sessionStorageManager&&this.analytics.sessionStorageManager.set("responseTime",responseTime,"Analytics"),this.analytics.localStorageManager&&this.analytics.localStorageManager.set("responseTime",responseTime,"Analytics")},_publishAnalyticsGlobalEvents:function(){this.publishAnalyticsEvent("pageLoad",{pageID:this._UID}),this.publishAnalyticsEvent("pageView",{pageID:this._UID}),this._navigationManager.isHydrated()&&this.publishAnalyticsEvent("pageNavigation")},_isDisplayTypeTwo:function(){if(this._data&&this._data.business&&this._data.business.Search){var t=this._data.business.Search;return t.displayType==this.DUAL_DISPLAY_TYPE}return!1},_storeDigitalDataCollectedInDmin:function(t){if(this.analytics&&this.analytics.existsDigitalData()){var e=plnextv2.utils.context.AppContext.getAppData();this.analytics.PageAnalytics._setPerformanceData&&!e.config.analytics.SITE_ENABLE_PERF_UI&&(this.analytics.PageAnalytics._setPerformanceData(plnextv2.utils.analytics.PerformancesAnalysis.buildPerformancesMetrics()),this.analytics.storeDigitalData());var i=JSON.parse(JSON.stringify(this.analytics.getDigitalData())),n=JSON.parse(JSON.stringify(this.analytics.getDigitalData())),s=this.analytics.getInitialDigitalData(),a=this.analytics.analyticsUtils.getAlwaysPushedDigitalData(n),r=this.analytics.analyticsUtils.getDigitalDifference(s,i,a);if(r.version||(r.version=i.version),e.config.analytics.SITE_DATA_LAKE_PUSH_ALL===this.SITE_DATA_LAKE_PUSH_ALL_VALUE.ALL)aria.utils.Json.setValue(t,this.DIGITAL_DATA_PARAMETER,JSON.stringify(r));else if(e.config.analytics.SITE_DATA_LAKE_PUSH_ALL===this.SITE_DATA_LAKE_PUSH_ALL_VALUE.UI_ONLY){var o=this.analytics.analyticsUtils.getUISpecificDigitalData(r);aria.utils.Json.setValue(t,this.DIGITAL_DATA_PARAMETER,JSON.stringify(o))}}},retrieveExchangeRateAjax:function(){var t;t=this._data.business.Availability?this._data.business.Availability.currencyBean.code.toString():this._data.business.CalendarMatrix.currencyBean.code.toString();var e={EXTERNAL_ID:"BOOKING",TRANSACTION_ID:"GetCurrencyConversionOffers",SITE:this.reqMgr.__params.SITE,LANGUAGE:this.reqMgr.__params.LANGUAGE,AMOUNT:1,CURRENCY:t},i={url:"GetCurrencyConversionOffers",uid:"PAYMENT",action:"ajax",data:e,callback:{fn:this._onRetrieveExchangeRateAjaxResponse,scope:this}};plnextv2.utils.HtmlUtils.activateLoading({container:document.body}),this.reqMgr.sendAjax(i)},_storePerformanceAnalyticsInDmIn:function(t){var e=plnextv2.utils.context.AppContext.getAppData();if(e.config.analytics.SITE_ENABLE_PERF_UI){var i=plnextv2.utils.analytics.PerformancesAnalysis.buildPerformancesMetrics();i.timing.resources&&i.timing.resources.count&&delete i.timing.resources.count,0===i.timing.error.length&&delete i.timing.error;var n=this._getUserAgentValues(),s={version:this.PERFORMANCE_METRICS_VERSION,timing:i.timing,client:{pageID:this._UID,product:this.PRODUCT_INFORMATION,flow:this._data.config[this.getUID()].flowType,deviceType:n.device,browser:n.browser,userAgent:n.ua,OS:n.os},context:{requestIDServer:this._data.transactionId||""}};t.REQUEST_UI_DATA=JSON.stringify(s)}},_getUserAgentValues:function(){var t={},e=this.parser.getUserAgentInfo();return e&&e.results&&(t.device=e.results.device,t.device=t.device&&t.device.type?t.device.type.charAt(0).toUpperCase()+t.device.type.slice(1):this.DEFAULT_DEVICE,t.browser=e.results.browser&&e.results.browser.name,t.ua=e.results.ua,e.results.os&&(t.os=e.results.os.name||"",t.os&&(t.os+=" "),t.os+=e.results.os.version||"")),t},_onRetrieveExchangeRateAjaxResponse:function(t){plnextv2.utils.HtmlUtils.deactivateLoading(document.body),this._eventBus.publish("purc:mcpOffers:response",this,t)},getPageConfig:function(){return this._data.config[this.getUID()]},_setJspFrom:function(){aria.utils.Json.setValue(this._data.dmin,"JSP_FROM",this.getUID().toLowerCase())},_storeLoginData:function(){var t=this.getPageConfig();t&&t.accessToken&&this._profileUtils.setAccessTokenToSession(t.accessToken)},setAnalytics:function(t){this.analytics=t}}});
//*******************
//LOGICAL-PATH:plnextv2/controller/CarBasePageController.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.controller.CarBasePageController",$extends:"plnextv2.controller.BasePageController",$dependencies:["plnextv2.utils.requestManager.PlnextRequestManager","plnextv2.utils.storage.SessionStorageManager"],$constructor:function(){this.$BasePageController.constructor.call(this),this.$CarBasePageController.reqMgr=plnextv2.utils.requestManager.PlnextRequestManager},$prototype:{__setDiscountType:function(t){if(t&&!this._data.DiscountType){var e=plnextv2.utils.storage.SessionStorageManager.get("CarAdvancedSearchCriteria","CARS");e?e.frequentflyerselected?(aria.utils.Json.setValue(this._data,"FrequentFlyerType",e.frequentflyerselected),aria.utils.Json.setValue(this._data,"DiscountType","loyalty")):e.cd_input?aria.utils.Json.setValue(this._data,"DiscountType","cd_nbr"):e.id_input?aria.utils.Json.setValue(this._data,"DiscountType","id_nbr"):aria.utils.Json.setValue(this._data,"DiscountType","default"):aria.utils.Json.setValue(this._data,"DiscountType","default")}},startOver:function(){var t={url:"CarShopperStart.action",method:"GET",isHTTP:!0,clearSession:!0};this.reqMgr._sendRequest(t)},restartFlow:function(){var t=this.storageManager.get("restartFlow","Links");if(t){var e={url:"CarAvailabilityDisplay.action",method:"POST",isHTTP:!0,data:t,clearSession:!0};this.reqMgr._sendRequest(e)}}}});
//*******************
//LOGICAL-PATH:plnextv2/controller/IBaseComponentController.js
//*******************
Aria.interfaceDefinition({$classpath:"plnextv2.controller.IBaseComponentController",$extends:"plnextv2.controller.IBaseController",$interface:{_initComponent:Aria.empty,_clearComponent:Aria.empty,getPageId:Aria.empty}});
//*******************
//LOGICAL-PATH:plnextv2/controller/IBaseController.js
//*******************
Aria.interfaceDefinition({$classpath:"plnextv2.controller.IBaseController",$extends:"aria.templates.IModuleCtrl",$interface:{_doBindings:"Function",_subscribeEvents:"Function",publishAnalyticsEvent:"Function",doInit:"Function",doClear:"Function",getUID:"Function",isRebookingFlow:"Function",isUpgradeFlow:"Function",isServicingFlow:"Function",isModifyInsuranceFlow:"Function",isStandardFlow:"Function",isPassengerModifiyPage:Aria.empty},$events:{navigate:""}});
//*******************
//LOGICAL-PATH:plnextv2/controller/IBasePageController.js
//*******************
Aria.interfaceDefinition({$classpath:"plnextv2.controller.IBasePageController",$extends:"plnextv2.controller.IBaseController",$interface:{_bindEvents:"Function",_initPage:"Function",_clearPage:"Function",callExtendSessionAjax:"Function",restartFlow:"Function",startOver:"Function",continueAfterInterceptPageLoad:"Function",getPageConfig:"Function"}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/AncillaryAnalytics.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.AncillaryAnalytics",$dependencies:["plnextv2.utils.CustomAriaUtils","plnextv2.utils.analytics.AnalyticsUtils"],$constructor:function(t){this._customUtils=plnextv2.utils.CustomAriaUtils,this._analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils,this.mappingAnalytics=t},$statics:{ANCILLARY_SERVICE:"AncillaryService",STATUS_SELECTED:"selected",STATUS_PAID:"paid",LIST_CATEGORIES:"SL_CHARGEABLE_SERVICES_TYPE_LABELS",LIST_SERVICES:"SL_CHARGEABLE_SERVICES_LABELS"},$prototype:{buildAncillaryData:function(t){var e=t.ServiceSelectionBreakdown;e&&null!=e.totalPrice&&(this._resetDigitalDataAncillary(),this._buildDigitalDataAncillaryService(e.servicesBySegment,"segment_id"),this._buildDigitalDataAncillaryService(e.servicesByBound,"bound_id"),this._buildDigitalDataAncillaryService(e.servicesByItinerary),this._buildDigitalDataAncillaryService(e.servicesByGround),this._analyticsUtils.getDigitalDataParameters().DATA_PRICE_DETAILS&&this._setDigitalDataAncillaryTotalPrice(t),eBaDataLayer.ancillary_services=[],this._buildAncillaryServices(aria.utils.Json.copy(e.servicesBySegment),"segment_id"),this._buildAncillaryServices(aria.utils.Json.copy(e.servicesByBound),"bound_id"),eBaDataLayer.ancillary_services=eBaDataLayer.ancillary_services.concat(e.servicesByItinerary),eBaDataLayer.ancillary_services=eBaDataLayer.ancillary_services.concat(e.servicesByGround))},_setDigitalDataAncillaryTotalPrice:function(t){var e=0;t.Price.totalServices&&t.Price.totalServices.totalAmount&&(e=t.Price.totalServices.totalAmount.amount||0);var i=this.mappingAnalytics.getCartPrice();i.AAASPrice=e;var n=this.mappingAnalytics.getTransactionTotal();n.AAASPrice=e},_resetDigitalDataAncillary:function(){for(var t=this.mappingAnalytics.getProduct(),e=this.mappingAnalytics.getCartItem(),i=this.mappingAnalytics.getTransactionItem(),n=0;n<t.length;n++){var s=this.mappingAnalytics.getProductCategory(n);s.primaryCategory&&s.primaryCategory===this.ANCILLARY_SERVICE&&(t.splice(n,1),e.splice(n,1),i.splice(n,1),n--)}},_buildAncillaryServices:function(t,e){for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];if(null!=n)for(var s=0;s<n.length;s++)if(n[s])for(var a=n[s].listServices,r=0;r<a.length;r++)if(a[r]){var o=this._createAncillaryObject(n[s],a[r],e,i);eBaDataLayer.ancillary_services.push(o)}}},_createAncillaryObject:function(t,e,i,n){var s={category_code:t.code,service_code:e.code,quantity:null!=e.number?e.number:1,total_price:e.price&&e.price.cash?e.price.cash.totalAmount:null,currency:e.price&&e.price.cash?e.price.cash.currency.code:null,traveller_id:e.passengerId,status:e.status};return i&&(s[i]=n),s},_buildDigitalDataAncillaryService:function(t,e){for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];null!=n&&this._buildDigitalDataAASCategories(n,e,i)}},_buildDigitalDataAASCategories:function(t,e,i){for(var n=0;n<t.length;n++)t[n]&&this._buildDigitalDataAASServices(t[n],t[n].listServices,e,i)},_buildDigitalDataAASServices:function(t,e,i,n){if(i=i.replace("_id","ID"),e)for(var s=0;s<e.length;s++)e[s]&&this._addDigitalDataAncillaryService(t,e[s],i,n)},_addDigitalDataAncillaryService:function(t,e,i,n){n=parseInt(n);var s=e.isAdded===!0?this.STATUS_SELECTED:this.STATUS_PAID;s||(s="");var a={categoryCode:t.code,serviceCode:e.code,travellerID:e.passengerId,initialPrice:this._getAncillaryServiceInitialPrice(e),quantity:null!=e.number?e.number:1,status:s};a=this._setAncillaryProductPrice(a,e),this._analyticsUtils.getDigitalDataParameters().DATA_LOCALIZATION&&(a.categoryName=this._analyticsUtils.getLocalizedLabel(this.LIST_CATEGORIES,t.code)||"",a.serviceName=this._analyticsUtils.getLocalizedLabel(this.LIST_SERVICES,e.code)||""),a=this._addSeatSelection(a,e),"segmentID"===i?a=this._setBoundAndSegment(n,a):a.boundID=n+1,a.emd=this._addDigitalDataAASemd(e),a=this._addDigitalDataAAScharacteristic(e,a);var r=this.mappingAnalytics.getProduct(),o=this.mappingAnalytics.getProductInfo(r.length-1).productID+1;this._addDigitalDataProduct(o,a,r),this._addDigitalDataCartItem(o,a),this.mappingAnalytics.getDigitalData().transaction&&this._addDigitalDataTransactionItem(o,a)},_addDigitalDataProduct:function(t,e,i){i.push({productInfo:{productID:t},category:{primaryCategory:this.ANCILLARY_SERVICE},ancillaryService:e})},_setAncillaryProductPrice:function(t,e){return t.price=e.price&&e.price.cash?e.price.cash.totalAmount:0,t},_addDigitalDataCartItem:function(t){var e=this.mappingAnalytics.getCartItem();e.push({productInfo:{productID:t}})},_addDigitalDataTransactionItem:function(t,e){var i=this.mappingAnalytics.getTransactionItem();i.push({productInfo:{productID:t},status:e.status})},_addSeatSelection:function(t,e){return this._isSeatService(e)&&(t.seatSelection=e.seat),t},_isSeatService:function(t){return t.seat},_addDigitalDataAASemd:function(t){var e="";if(t.price&&t.price.cash&&t.price.cash.listTicketNumber){var i=this._customUtils.removeMetadata(t.price.cash.listTicketNumber),n=[];for(var s in i)i.hasOwnProperty(s)&&n.push(i[s]);e=n.join(",")}return e},_addDigitalDataAAScharacteristic:function(t,e){if(this._analyticsUtils.getDigitalDataParameters().DATA_PRODUCT_DETAILS){var i=[];if(t.inputParams&&t.inputParams.length>0)for(var n=0;n<t.inputParams.length;n++)i.push({key:t.inputParams[n].code,value:t.inputParams[n].value});e.characteristic=i}return e},_getAncillaryServiceInitialPrice:function(t){var e=0,i=t.price.cash;return t.price&&t.price.cash&&(e=i.initialAmount?i.initialAmount:i.totalAmount||0),e},_setBoundAndSegment:function(t,e){for(var i=this.mappingAnalytics.getFlightTicketBound(),n=0,s=0;s<i.length;s++)for(var a=0;a<i[s].segment.length;a++)n++,n===t&&(e.segmentID=i[s].segment[a].segmentID,e.boundID=i[s].boundID);return e.segmentID=e.segmentID||t,e}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/BaseAnalytics.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.BaseAnalytics",$dependencies:["aria.utils.Object","plnextv2.utils.ErrorUtils","plnextv2.utils.analytics.AnalyticsUtils","plnextv2.utils.DateUtils","aria.core.useragent.UserAgent","plnextv2.utils.storage.SessionStorageManager","plnextv2.utils.storage.LocalStorageManager","plnextv2.utils.requestManager.PlnextRequestManager","plnextv2.utils.widgets.plnextLib.navigationManager.PlnextNavigationManager"],$constructor:function(){this.plnextRequestManager=plnextv2.utils.requestManager.PlnextRequestManager,this.navigationManager=plnextv2.utils.widgets.plnextLib.navigationManager.PlnextNavigationManager,this.sessionStorageManager=plnextv2.utils.storage.SessionStorageManager,this.localStorageManager=plnextv2.utils.storage.LocalStorageManager,this.analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils,this.dateUtils=plnextv2.utils.DateUtils,this.errorUtils=plnextv2.utils.ErrorUtils,this.arrayUtils=aria.utils.Array,this.parser=aria.core.useragent.UserAgent,this.digitalDataParameters={},this.lazyEventsToBeLoaded=!1,this.jsonUtils=aria.utils.Json},$statics:{CHANNEL:"eRetail",FORMAT_DATE_CART:"dd/MM/yyyy",FLIGHT_TICKET:"FlightTicket",CONF:"CONF",MCONF:"MCONF",GERR:"GERR",BOOKING:"Booking",SERVICING:"Servicing",BKG_FUNNEL:"BkgFunnel",BKG_PASSENGER_BOTTOM:"BkgPgPassengerBottom",HTTPS_PROTOCOL:"https:",DIGITAL_ANALYTICS_LIBRARY:"DigitalAnalytics.umd.js",NAVIGATION_ALLOWED:0,NAVIGATION_TEMPORARY_BLOCKED:1,NAVIGATION_PERSISTENT_BLOCKED:2,COOKIE_NAME:"_dd1A",VERSION_1_0_0:"1.0.0"},$prototype:{_buildPageAnalytics:function(){this.$logError("_buildPageAnalytics method has to be implemented in %1",[this.$classpath])},_cacheChainEmpty:function(){return{previousKey:null,currentKey:null,currentKeyIndex:-1,chain:[]}},_cacheUpdate:function(t,e,i){t&&this.sessionStorageManager.set("cacheChain",t,"Analytics"),e&&this.sessionStorageManager.set(this._cacheIndex(e),i,"Analytics")},_cacheSnapshotDrop:function(t){this.sessionStorageManager.remove(this._cacheIndex(t),"Analytics")},_cacheIndex:function(t){return"snapshotDigitalData-"+t},cacheChainCurrent:function(){return this.sessionStorageManager.get("cacheChain","Analytics")||this._cacheChainEmpty()},cacheChainCurrentSplice:function(t,e){var i=this.cacheChainCurrent(),n=Number.MAX_VALUE,s=this.navigationManager.currentHistoryPosition(),a=i.chain.splice(s,n,t);a.map(this._cacheSnapshotDrop.bind(this)),i.previousKey=i.currentKey,i.currentKey=t,i.currentKeyIndex=s,this._cacheUpdate(i,t,e)},cacheChainCurrentReplace:function(t,e){var i=this.cacheChainCurrent(),n=this.navigationManager.currentHistoryPosition(),s=i.chain[n];n!==i.currentKeyIndex&&(i.previousKey=i.chain[i.currentKeyIndex]),i.currentKey=t,i.currentKeyIndex=n,i.chain[n]=t,this._cacheSnapshotDrop(s),this._cacheUpdate(i,t,e)},cacheChainCurrentKey:function(t){var e=this.cacheChainCurrent(),i=this.navigationManager.currentHistoryPosition();e.previousKey=e.currentKey,e.currentKey=t,e.currentKeyIndex=i,this._cacheUpdate(e)},cacheRestore:function(){var t=this.sessionStorageManager.get("digitalData","Analytics"),e=t&&t.event;this.previousPage=t&&t.pageInstanceID;var i=this.cacheChainCurrent(),n=this.sessionStorageManager.get(this._cacheIndex(i.currentKey),"Analytics");e&&(n.digitalData.event=e),n&&(this.sessionStorageManager.set("digitalData",n.digitalData,"Analytics"),this.sessionStorageManager.set("InitialDigitalData",n.initialDigitalData,"Analytics"))},_handleNavigation:function(t,e){var i=e.action,n=e.location,s={digitalData:this.sessionStorageManager.get("digitalData","Analytics"),initialDigitalData:this.sessionStorageManager.get("InitialDigitalData","Analytics")};switch(i){case"PUSH":this.cacheChainCurrentSplice(n.key,s);break;case"REPLACE":n.replaceEmptyState?this.cacheChainCurrentSplice(n.key,s):this.cacheChainCurrentReplace(n.key,s);break;case"POP":this.cacheChainCurrentKey(n.key)}},buildAnalytics:function(t){var e=t.getAppData(),i=t.getEventBus();this._pageData=t.getPageData(),this.digitalDataParameters=this.analyticsUtils.getDigitalDataParameters(e);var n=this.existsDigitalData(),s="undefined"!=typeof eBaDataLayer&&!aria.utils.Object.isEmpty(eBaDataLayer);if(e.config.analytics.SITE_ENABLE_ANALYTICS||e.config.analytics.SITE_RUI_ENABLE_IMPL_DATA){i.subscribe("event::navigation",this._handleNavigation,this),s||(eBaDataLayer=this.sessionStorageManager.get("eBaDataLayer","Analytics"),eBaDataLayer||(eBaDataLayer=this.localStorageManager.get("eBaDataLayer","Analytics"))),eBaDataLayer&&eBaDataLayer.session_id===this.plnextRequestManager.getSessionId()||(eBaDataLayer={}),eBaDataLayer.office_id=e.config.analytics.SITE_OFFICE_ID,eBaDataLayer.market=e.config.analytics.SITE_MARKET_ID,eBaDataLayer.language=e.requestParameters.LANGUAGE,eBaDataLayer.site_code=e.requestParameters.SITE,eBaDataLayer.session_id=this.plnextRequestManager.getSessionId(),e.requestParameters.EXTERNAL_ID&&(eBaDataLayer.external_id=e.requestParameters.EXTERNAL_ID),e.requestParameters.BOOKING_FLOW&&(eBaDataLayer.trip_flow=e.requestParameters.BOOKING_FLOW);for(var a=1;5>=a;a++){var r=e.config.analytics["SITE_CUSTOM_DHTML_PE_VAR"+a];r&&(eBaDataLayer["pe_variable_"+a]=r)}this.__loadDigitalData(n),this.__addDigitalDataUser(this._pageData,digitalData),digitalData.page?this.__updateDigitalDataPage():this.__addDigitalDataPage(e);try{this.FlightAnalytics.initDigitalDataProduct(),this._buildPageAnalytics(),this._buildSearchData(t),this._buildFlightsAnalytics(this._pageData),this._buildAncillaryAnalytics(),this._buildTransactionAnalytics(this._pageData),this._buildContextAnalytics(this.parser.getUserAgentInfo().results,e)}catch(o){this.$logInfo("issues with dataLayer",null,o)}this.sessionStorageManager.set("eBaDataLayer",eBaDataLayer,"Analytics"),this.localStorageManager.set("eBaDataLayer",eBaDataLayer,"Analytics"),this.storeDigitalData(),e.config.analytics.SITE_ENABLE_ANALYTICS&&this.loadTrackingScripts(s,n,e)}this.prepareAbandonDetection()},loadTrackingScripts:function(t,e,i){if(this.lazyEventsToBeLoaded=!(!i.config.analytics.SITE_DIG_ANALYTICS_ENABLE||!i.config.analytics.SITE_DIG_ANALYTICS_DIRCDN),t&&e&&window.launchGlobalTracking){try{launchGlobalTracking()}catch(n){this.$logError("A problem occured in the global tracking")}this.lazyEventsToBeLoaded&&this.lazyPageLoadEvents(this)}else this._loadAnalyticsScript(i)},__initDigitalData:function(){this.initialDigitalData={},digitalData={version:this.mappingAnalytics.getVersion()}},__loadDigitalData:function(t){this.navigationManager.isHydrated()&&this.cacheRestore(),t||(digitalData=this.sessionStorageManager.get("digitalData","Analytics"),digitalData||(digitalData=this.localStorageManager.get("digitalData","Analytics"))),digitalData?(this.__cloneDigitalData(),this.__setCookieSessionsNumber()):this.__initDigitalData(),(this.mappingAnalytics.getSessionId()!==this.plnextRequestManager.getSessionId()||this.mappingAnalytics.getPageInstanceId()!==this.PAGE_ID)&&this.storeInitialDigitalData(digitalData);var e=this.mappingAnalytics.getEventParent();e.event=e.event||[]},__cloneDigitalData:function(){this.initialDigitalData=JSON.parse(JSON.stringify(digitalData));var t=this.__getSessionID();t!==this.plnextRequestManager.getSessionId()?this.__initDigitalData():digitalData.version&&this.mappingAnalytics.getVersion()!==digitalData.version?this.__initDigitalData():digitalData.version||this.mappingAnalytics.getVersion()===this.VERSION_1_0_0||this.__initDigitalData()},__setCookieSessionsNumber:function(){if(this.__getSessionID()!==this.plnextRequestManager.getSessionId()&&this.digitalDataParameters&&this.digitalDataParameters.DATA_PII){var t=new Date;t.setTime(t.getTime()+31536e6);var e=parseInt(this.analyticsUtils._getCookie(this.COOKIE_NAME).split(".")[1]),i=e>=1?e+1:1,n=this._getClientID(i),s=this.analyticsUtils._getDomain();document.cookie=this.COOKIE_NAME+"="+n+"."+i+"; Domain="+s+"; expires="+t.toUTCString()+"; path=/; Secure;"}},_getClientID:function(t){return 1===t?this.plnextRequestManager.getSessionId().replace(".","")+this.dateUtils.fromDateToTimestamp(Date.now()):this.analyticsUtils._getCookie(this.COOKIE_NAME).split(".")[0]},__getSessionID:function(){return this.mappingAnalytics.getSessionId()||this.ContextAnalytics.getSessionIDByLocator("digitalTouchpoint.touchpointInfo")||this.ContextAnalytics.getSessionIDByLocator("page.context")||this.ContextAnalytics.getSessionIDByLocator("transaction.context")},__addDigitalDataUser:function(t){!digitalData.user&&t.business&&t.business.FareReview&&t.business.FareReview.tripSummary&&this.PassengerAnalytics.buildDigitalDataUserList(t.business.FareReview.tripSummary.listTravellerTypeInfo)},__addDigitalDataPage:function(){var t=this.PAGE_ID||"",e=this.PAGE_NAME||"",i=this.PRIMARY_CATEGORY||"";this._setDigitalDataPage(t,e,i)},__updateDigitalDataPage:function(){var t=this.PAGE_ID,e=this.PAGE_NAME,i=this.PRIMARY_CATEGORY;this._setDigitalDataPage(t,e,i)},_isServicingFlow:function(t){var e=!1;return t===this.SERVICING||digitalData.page&&digitalData.page.category&&digitalData.page.category.primaryCategory===this.SERVICING?!0:e},_buildContextAnalytics:function(t,e){this.ContextAnalytics.buildContext(e,t)},_setDigitalDataPage:function(t,e,i){t===this.CONF&&this._isServicingFlow(i)&&(t=this.MCONF,i=this.SERVICING),t===this.GERR&&(i=this.mappingAnalytics.getPageCategory().primaryCategory||null),this.PageAnalytics.buildPage(t,e,i,this.CHANNEL),eBaDataLayer.page_code=t},_loadAnalyticsScript:function(t){this._loadEBAAnalyticsScript(t),t.config.analytics.SITE_DIG_ANALYTICS_ENABLE&&t.config.analytics.SITE_DIG_ANALYTICS_DIRCDN&&this._loadDigitalAnalyticsScript(t)},_loadEBAAnalyticsScript:function(t){var e=t.config.analytics.SITE_ANALYTICS_EBA_CLIENT,i=t.config.analytics.SITE_ANALYTICS_DIRCDN,n=t.config.analytics.SITE_ANALYTICS_TOOL,s=document.createElement("script");s.type="text/javascript",s.src=this.__getAnalyticsCDNHost(t)+i+n+"_"+e+".js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(s,a)},_loadDigitalAnalyticsScript:function(t){var e=this,i=document.createElement("script");i.type="text/javascript",i.src=this.__buildDigAnalyticsConfigURL(t);var n=document.getElementsByTagName("script")[0],s=this.lazyPageLoadEvents;i.onload=function(){var a=document.createElement("script");a.type="text/javascript",a.onload=function(){var t=new DigitalAnalytics;t.init(window.digitalAnalyticsConf),s(e)},a.src=this.__buildDigAnalyticsLibURL(t),n.parentNode.insertBefore(a,i)}.bind(this),n.parentNode.insertBefore(i,n)},lazyPageLoadEvents:function(t){var e=t._pageData.config;t.eventPageView({pageID:this.PAGE_ID}),t.eventPageLoad({pageID:this.PAGE_ID}),t.navigationManager&&t.navigationManager.isHydrated()&&t.eventNavigationPageView&&t.eventNavigationPageView(),t.hasGlobalErrorsOrWarnings(t)&&(e.GERR&&e.GERR.enableEventGlobalError?t.eventGlobalError({pageID:t.analyticsUtils.getPreviousPageLoaded(),errorCodeList:t.errorUtils.getCodeList(t._pageData.errorList.globalErrors.E),warningCodeList:t.errorUtils.getCodeList(t._pageData.errorList.globalErrors.W),lazySent:!0}):t.setEventDataErrors(t)),t.lazyEventsToBeLoaded=!1},setEventDataErrors:function(t){var e=this.jsonUtils.removeMetadata(t._pageData.errorList.globalErrors);for(var i in e)e[i]&&t.setErrorsFromList(t,e[i])},setErrorsFromList:function(t,e){for(var i=0;i<e.length;i++)t.eventDataError({pageID:t.PAGE_ID,errorCode:e[i].code,type:e[i].type,lazySent:!0})},hasGlobalErrorsOrWarnings:function(t){var e=0;return t._pageData&&t._pageData.errorList&&t._pageData.errorList.globalErrors&&(e=t._pageData.errorList.globalErrors.E&&t._pageData.errorList.globalErrors.E.length||0,e+=t._pageData.errorList.globalErrors.W&&t._pageData.errorList.globalErrors.W.length||0),e>0},__getAnalyticsCDNHost:function(t){var e;return e=this.HTTPS_PROTOCOL===document.location.protocol?t.config.analytics.SITE_ANALYTICS_HOSTCDNSSL:t.config.analytics.SITE_ANALYTICS_HOSTCDN},__buildDigAnalyticsConfigURL:function(t){var e=t.config.analytics.SITE_DIG_ANALYTICS_DIRCDN,i=this.mappingAnalytics.getContextSite().site;return this.__getAnalyticsCDNHost(t)+e+i+".js"},__buildDigAnalyticsLibURL:function(t){var e=window.digitalAnalyticsVersion(digitalData.version);return this.__getAnalyticsCDNHost(t)+e+this.DIGITAL_ANALYTICS_LIBRARY},_buildCommonData:function(){if(null!=this._pageData.business){if(null!=this._pageData.business.TripSummary&&null!=this._pageData.business.TripSummary.listTravellerTypeInfo){var t=this._pageData.business.TripSummary.listTravellerTypeInfo;this.PassengerAnalytics.buildPassengerList(t)}else if(null!=this._pageData.business.FareReview&&null!=this._pageData.business.FareReview.tripSummary&&null!=this._pageData.business.FareReview.tripSummary.listTravellerTypeInfo){var e=this._pageData.business.FareReview.tripSummary.listTravellerTypeInfo;this.PassengerAnalytics.buildPassengerList(e)}null!=this._pageData.business.TRAVELLER_REVIEW&&null!=eBaDataLayer.passengerList&&this.PassengerAnalytics.buildDetailedInformationForPax(this._pageData.business.TRAVELLER_REVIEW),(this._pageData.business.RefundPreviewView||this._pageData.business.Price)&&(this.PriceDetailsAnalytics.buildPriceData(this._pageData.business),null!=this._pageData.business.Price&&(this.PriceDetailsAnalytics.buildPriceData(this._pageData.business.Price),null!=this._pageData.business.Price.milesAndCash&&null!=this._pageData.business.ItineraryList&&(this.FlightAnalytics.buildMilesAndCashFareData(this._pageData.business.ItineraryList),this.PassengerAnalytics.buildFrequentFlyerData(this._pageData.business.TRAVELLER_REVIEW.travellerListBean))),null!=this._pageData.business.MilesAndCashView&&this.PriceDetailsAnalytics.buildMilesAndCashSliderData(this._pageData.business.MilesAndCashView),null!=this._pageData.business.FareReview&&null!=this._pageData.business.FareReview.contactInformation&&this.ContactInformationAnalytics.buildContactInformation(this._pageData.business.FareReview.contactInformation))}},_buildSearchData:function(t){if(null!=this._pageData.business){var e="";this._pageData.appData.config.links&&this._pageData.appData.config.links.restartFlow&&this._pageData.appData.config.links.restartFlow.dmIn&&(e=this._pageData.appData.config.links.restartFlow.dmIn.CORPORATE_CODE),this._isRebookingSearchPage(t)?this.SearchAnalytics.buildDynamicWaiverData(this._pageData.business):this._isAfterSearchPage(t)&&this.SearchAnalytics.buildAdditionalSearchData(this._pageData.business,e)}},_buildAncillaryAnalytics:function(){null!=this._pageData.business&&this.AncillaryAnalytics.buildAncillaryData(this._pageData.business)},_buildFlightsAnalytics:function(t){this.FlightAnalytics.buildDigitalDataFlight(t)},_buildTransactionAnalytics:function(t){this.PaymentAnalytics.buildDigitalDataTransaction&&this.PaymentAnalytics.buildDigitalDataTransaction(t)},_isRebookingSearchPage:function(t){return"RADVS"===t._currentPageId},_isAfterSearchPage:function(t){var e=["FDCS","FDCT","FDCSCPX","FPOW","FDFF","FPC","FPRM","FDFFAW","FDFFCPX","SDAI","RFDCS","RFDCT","RFDFF","RFPOW","RFPC","RSDAI","FARE"];return aria.utils.Array.indexOf(e,t._currentPageId)>-1},storeDigitalData:function(){this.existsDigitalData()&&(this.sessionStorageManager.set("digitalData",digitalData,"Analytics"),this.localStorageManager.set("digitalData",digitalData,"Analytics"))},storeInitialDigitalData:function(t){t&&(this.sessionStorageManager.set("InitialDigitalData",t,"Analytics"),this.localStorageManager.set("InitialDigitalData",t,"Analytics"))},existsDigitalData:function(){return window.digitalData},eventDataError:function(t){if(!this.lazyEventsToBeLoaded||t.lazySent){var e=this.BOOKING;this.existsDigitalData()&&this.mappingAnalytics.getPageCategory().primaryCategory&&(e=this.mappingAnalytics.getPageCategory().primaryCategory);var i={eventId:this.analyticsUtils.EVENT.DATA_ERROR,eventName:this.analyticsUtils.EVENT_NAME.ERROR,pageID:t.pageID,eventValue:t.errorCode,eventAction:this.analyticsUtils.EVENT_ACTION.ERROR_RAISED,eventLabel:t.type,eventCategory:this.PRIMARY_CATEGORY||e,eventType:t.eventType||this.analyticsUtils.EVENT_TYPE.ERROR,forceSaveData:!0,activationParameter:this.analyticsUtils.getDigitalDataParameters().DATA_ERROR};this.analyticsUtils.launchAnalyticsEvent(i)}},eventGlobalError:function(t){if(!this.lazyEventsToBeLoaded||t.lazySent){var e=this.BOOKING;this.existsDigitalData()&&this.mappingAnalytics.getPageCategory().primaryCategory&&(e=this.mappingAnalytics.getPageCategory().primaryCategory),""===t.warningCodeList&&(t.warningCodeList=0),""===t.errorCodeList&&(t.errorCodeList=0);var i={eventId:this.analyticsUtils.EVENT.GLOBAL_ERROR,eventName:this.analyticsUtils.EVENT_NAME.ERROR,pageID:this.pageId,eventLabel:this.analyticsUtils.EVENT_LABEL.GLOBAL_ERROR,eventValue:t.pageID+this.analyticsUtils.EVENT_VALUES.SEPARATOR_LEVEL_1+t.errorCodeList+this.analyticsUtils.EVENT_VALUES.SEPARATOR_LEVEL_1+t.warningCodeList,eventAction:this.analyticsUtils.EVENT_ACTION.GLOBAL_ERROR,eventCategory:this.PRIMARY_CATEGORY||e,eventType:this.analyticsUtils.EVENT_TYPE.ERROR,forceSaveData:!0,activationParameter:this.analyticsUtils.getDigitalDataParameters().DATA_ERROR};this.analyticsUtils.launchAnalyticsEvent(i)}},eventTimeoutDisplayed:function(t){var e=this.BOOKING;this.existsDigitalData()&&this.mappingAnalytics.getPageCategory().primaryCategory&&(e=this.mappingAnalytics.getPageCategory().primaryCategory);var i={eventId:this.analyticsUtils.EVENT.TIMEOUT_DISPLAYED,eventName:this.analyticsUtils.EVENT_NAME.TIMEOUT,pageID:t.pageID,eventAction:this.analyticsUtils.EVENT_ACTION.TIMEOUT_WINDOW_DISPLAYED,eventCategory:this.PRIMARY_CATEGORY||e,eventType:this.analyticsUtils.EVENT_TYPE.TIMEOUT,forceSaveData:!0,activationParameter:this.analyticsUtils.getDigitalDataParameters().DATA_ERROR};this.analyticsUtils.launchAnalyticsEvent(i)},eventTimeoutClosed:function(t){var e=this.BOOKING;this.existsDigitalData()&&this.mappingAnalytics.getPageCategory().primaryCategory&&(e=this.mappingAnalytics.getPageCategory().primaryCategory);var i;switch(t.buttonClicked){case"restartFlow":i=this.analyticsUtils.EVENT_VALUES.GO_AVAILABILITY;break;case"starOver":i=this.analyticsUtils.EVENT_VALUES.GO_HOME_PAGE;break;case"resetTimer":i=this.analyticsUtils.EVENT_VALUES.ADD_MORE_TIME;break;default:i="unknown"}var n={eventId:this.analyticsUtils.EVENT.TIMEOUT_CLOSED,eventName:this.analyticsUtils.EVENT_NAME.TIMEOUT,pageID:t.pageID,eventLabel:this.analyticsUtils.EVENT_LABEL.ACTION_CHOOSED,eventValue:i,eventAction:this.analyticsUtils.EVENT_ACTION.TIMEOUT_WINDOW_CLOSED,eventCategory:this.PRIMARY_CATEGORY||e,eventType:this.analyticsUtils.EVENT_TYPE.TIMEOUT,forceSaveData:!0,activationParameter:this.analyticsUtils.getDigitalDataParameters().DATA_ERROR};this.analyticsUtils.launchAnalyticsEvent(n)},eventPageLoad:function(t){var e=this.BOOKING,i={eventId:this.analyticsUtils.EVENT.PAGE_LOAD,eventName:this.analyticsUtils.EVENT_NAME.PAGE_LOAD,eventAction:this.analyticsUtils.EVENT_ACTION.PAGE_LOAD,pageID:this.PAGE_ID,eventLabel:this.analyticsUtils.EVENT_LABEL.PAGE_ID,eventValue:t.pageID,eventCategory:this.PRIMARY_CATEGORY||e,eventType:this.analyticsUtils.EVENT_TYPE.DISPLAY,forceSaveData:!0};this.analyticsUtils.launchAnalyticsEvent(i)},eventPageView:function(t){var e=this.BOOKING,i={eventId:this.analyticsUtils.EVENT.PAGE_VIEW,eventName:this.analyticsUtils.EVENT_NAME.PAGE_VIEW,eventAction:this.analyticsUtils.EVENT_ACTION.PAGE_VIEW,pageID:this.PAGE_ID,eventLabel:this.analyticsUtils.EVENT_LABEL.PAGE_ID,eventValue:t.pageID,eventCategory:this.PRIMARY_CATEGORY||e,eventType:this.analyticsUtils.EVENT_TYPE.VIEW,forceSaveData:!0};this.analyticsUtils.launchAnalyticsEvent(i)},eventNavigationPageView:function(){var t=this.navigationManager.getPageBlockState(),e=this.NAVIGATION_ALLOWED;t.isBlocked&&(e=t.reason===this.navigationManager.REASON_BLOCK_PERSISTENT?this.NAVIGATION_PERSISTENT_BLOCKED:this.NAVIGATION_TEMPORARY_BLOCKED);var i=-1,n="",s="",a="";e===this.NAVIGATION_TEMPORARY_BLOCKED?(i=this.analyticsUtils.EVENT.NAVIGATION_NOT_ALLOWED,n=this.analyticsUtils.EVENT_ACTION.NAVIGATION_NOT_ALLOWED,s=this.analyticsUtils.EVENT_LABEL.PAGE_ID,a=this.PAGE_ID):e===this.NAVIGATION_PERSISTENT_BLOCKED?(i=this.analyticsUtils.EVENT.PAGE_BLOCKED,n=this.analyticsUtils.EVENT_ACTION.PAGE_BLOCKED,s=this.analyticsUtils.EVENT_LABEL.PAGE_ID,a=this.PAGE_ID):(i=this.analyticsUtils.EVENT.NAVIGATION,n=this.analyticsUtils.EVENT_ACTION.NAVIGATION,s=this.analyticsUtils.EVENT_LABEL.ORIGIN_PAGE_ID,a=this.previousPage);var r=this.BOOKING,o={eventId:i,eventName:this.analyticsUtils.EVENT_NAME.NAVIGATION,pageID:this.PAGE_ID,eventAction:n,eventLabel:s,eventValue:a,eventCategory:this.PRIMARY_CATEGORY||r,eventType:this.analyticsUtils.EVENT_TYPE.DISPLAY,forceSaveData:!0};this.analyticsUtils.launchAnalyticsEvent(o)},eventIgnoreChanges:function(){this.analyticsUtils.launchAnalyticsEvent({eventId:this.analyticsUtils.EVENT.IGNORE_CHANGES,eventName:this.analyticsUtils.EVENT_NAME.IGNORE_CHANGES,pageID:this.PAGE_ID,eventCategory:this.PRIMARY_CATEGORY,eventAction:this.analyticsUtils.EVENT_NAME.IGNORE_CHANGES,eventLabel:this.analyticsUtils.EVENT_NAME.IGNORE_CHANGES,eventValue:this.analyticsUtils.EVENT_NAME.IGNORE_CHANGES,forceSaveData:!0})},eventNextStep:function(t){var e;e=t&&t.tripSummary?this.analyticsUtils.EVENT_COMPONENT.TRIP_SUMMARY:this.analyticsUtils.EVENT_COMPONENT.PAGE;var i={eventId:this.analyticsUtils.EVENT.CLICK_NEXT_STEP,eventName:this.analyticsUtils.EVENT_NAME.CONTINUE,pageID:this.PAGE_ID,componentID:e,eventCategory:this.PRIMARY_CATEGORY,eventAction:this.analyticsUtils.EVENT_ACTION.CONTINUE,forceSaveData:!0};this.analyticsUtils.launchAnalyticsEvent(i)},eventClickSearchBarModify:function(){var t={eventId:this.analyticsUtils.EVENT.CLICK_SEARCHBAR_MODIFY,eventName:this.analyticsUtils.EVENT_NAME.SEARCH_BAR,pageID:this.PAGE_ID,componentID:this.analyticsUtils.EVENT_COMPONENT.SEARCH_BAR,eventCategory:this.PRIMARY_CATEGORY,eventAction:this.analyticsUtils.EVENT_ACTION.EXPAND_SEARCH_BAR,forceSaveData:!0};this.analyticsUtils.launchAnalyticsEvent(t)},eventClickSearchBarHide:function(){var t={eventId:this.analyticsUtils.EVENT.CLICK_SEARCHBAR_MODIFY,eventName:this.analyticsUtils.EVENT_NAME.SEARCH_BAR,pageID:this.PAGE_ID,componentID:this.analyticsUtils.EVENT_COMPONENT.SEARCH_BAR,eventCategory:this.PRIMARY_CATEGORY,eventAction:this.analyticsUtils.EVENT_ACTION.COLLAPSE_SEARCH_BAR,forceSaveData:!0};this.analyticsUtils.launchAnalyticsEvent(t)},eventClickSearchBarSearch:function(t){for(var e=t.tripType,i=[],n=[],s=[],a=0;a<t.destinations.length;a++)i.push(t.destinations[a].beginLocation.locationCode.toUpperCase()||t.destinations[a].beginLocation.cityCode.toUpperCase()),n.push(t.destinations[a].endLocation.locationCode.toUpperCase()||t.destinations[a].endLocation.cityCode.toUpperCase()),s.push(this.analyticsUtils.formatDate(t.destinations[a].beginDate,""));for(var r=[],a=0;a<t.listTravellerTypeInfo.length;a++){var o=t.listTravellerTypeInfo[a],l=o.travellersNumber+" "+o.travellerCode;this.arrayUtils.contains(r,l)||r.push(l)}var c=t.fareTypeFamily.code,d=[];d.push(e),d.push(i.join(this.analyticsUtils.EVENT_VALUES.SEPARATOR_LEVEL_2)),d.push(n.join(this.analyticsUtils.EVENT_VALUES.SEPARATOR_LEVEL_2)),d.push(s.join(this.analyticsUtils.EVENT_VALUES.SEPARATOR_LEVEL_2)),d.push(r.join(this.analyticsUtils.EVENT_VALUES.SEPARATOR_LEVEL_2)),d.push(c);var p={eventId:this.analyticsUtils.EVENT.CLICK_SEARCHBAR_MODIFY,eventName:this.analyticsUtils.EVENT_NAME.SEARCH_BAR,pageID:this.PAGE_ID,componentID:this.analyticsUtils.EVENT_COMPONENT.SEARCH_BAR,eventCategory:this.PRIMARY_CATEGORY,eventAction:this.analyticsUtils.EVENT_ACTION.NEW_SEARCH,eventLabel:this.analyticsUtils.EVENT_LABEL.SEARCH_INFO,eventValue:d.join(this.analyticsUtils.EVENT_VALUES.SEPARATOR_LEVEL_1),forceSaveData:!0};this.analyticsUtils.launchAnalyticsEvent(p)},eventOpenDialogFareReview:function(){var t={eventId:this.analyticsUtils.EVENT.CLICK_FARE_REVIEW,eventName:this.analyticsUtils.EVENT_NAME.BOOKING_DETAILS,pageID:this.PAGE_ID,eventCategory:this.PRIMARY_CATEGORY,componentID:this.analyticsUtils.EVENT_COMPONENT.TRIP_SUMMARY,eventAction:this.analyticsUtils.EVENT_ACTION.FARE_REVIEW,forceSaveData:!0};this.analyticsUtils.launchAnalyticsEvent(t)},eventOpenDialogMiniRules:function(){var t={eventId:this.analyticsUtils.EVENT.CLICK_FARE_CONDITIONS,eventName:this.analyticsUtils.EVENT_NAME.BOOKING_DETAILS,pageID:this.PAGE_ID,eventCategory:this.PRIMARY_CATEGORY,componentID:this.analyticsUtils.EVENT_COMPONENT.TRIP_SUMMARY,eventAction:this.analyticsUtils.EVENT_ACTION.FARE_CONDITIONS,forceSaveData:!0};this.analyticsUtils.launchAnalyticsEvent(t)},eventOpenDialogPurcConditions:function(){var t={eventId:this.analyticsUtils.EVENT.CLICK_PURCHASE_CONDITIONS,eventName:this.analyticsUtils.EVENT_NAME.BOOKING_DETAILS,pageID:this.PAGE_ID,eventCategory:this.PRIMARY_CATEGORY,componentID:this.analyticsUtils.EVENT_COMPONENT.TRIP_SUMMARY,eventAction:this.analyticsUtils.EVENT_ACTION.PURCHASE_CONDITIONS,forceSaveData:!0};this.analyticsUtils.launchAnalyticsEvent(t)},eventOpenDialogBaggagePolicy:function(){var t={eventId:this.analyticsUtils.EVENT.CLICK_BAGGAGE_POLICY,eventName:this.analyticsUtils.EVENT_NAME.BOOKING_DETAILS,pageID:this.PAGE_ID,eventCategory:this.PRIMARY_CATEGORY,componentID:this.analyticsUtils.EVENT_COMPONENT.TRIP_SUMMARY,eventAction:this.analyticsUtils.EVENT_ACTION.BAGGAGE_POLICY,forceSaveData:!0};this.analyticsUtils.launchAnalyticsEvent(t)},eventOpenDialogTripNotes:function(){var t={eventId:this.analyticsUtils.EVENT.CLICK_TRIP_NOTES,eventName:this.analyticsUtils.EVENT_NAME.BOOKING_DETAILS,pageID:this.PAGE_ID,eventCategory:this.PRIMARY_CATEGORY,componentID:this.analyticsUtils.EVENT_COMPONENT.TRIP_SUMMARY,eventAction:this.analyticsUtils.EVENT_ACTION.FARE_NOTES,forceSaveData:!0};this.analyticsUtils.launchAnalyticsEvent(t)},showFareConditionsPanel:function(){var t={eventId:this.analyticsUtils.EVENT.SHOW_FARE_CONDITIONS_PANEL,eventName:this.analyticsUtils.EVENT_NAME.BOOKING_DETAILS,eventType:this.analyticsUtils.EVENT_TYPE.DISPLAY,pageID:this.PAGE_ID,eventCategory:this.PRIMARY_CATEGORY,componentID:this.analyticsUtils.EVENT_COMPONENT.COMMON_RESERVATION_DETAILS,eventAction:this.analyticsUtils.EVENT_ACTION.SHOW_FARE_CONDITIONS_PANEL};this.analyticsUtils.launchAnalyticsEvent(t)},closeFareConditionsPanel:function(){var t={eventId:this.analyticsUtils.EVENT.CLOSE_FARE_CONDITIONS_PANEL,eventName:this.analyticsUtils.EVENT_NAME.BOOKING_DETAILS,eventType:this.analyticsUtils.EVENT_TYPE.USER_EVENT,pageID:this.PAGE_ID,eventCategory:this.PRIMARY_CATEGORY,componentID:this.analyticsUtils.EVENT_COMPONENT.COMMON_RESERVATION_DETAILS,eventAction:this.analyticsUtils.EVENT_ACTION.CLOSE_FARE_CONDITIONS_PANEL};this.analyticsUtils.launchAnalyticsEvent(t)},eventClickFareFamilyDescriptionDialog:function(t){var e="";t.prefix&&(e=t.prefix);var i={componentID:e,eventId:this.analyticsUtils.EVENT.CLICK_FARE_FAMILY_DESC_DIALOG,eventName:this.analyticsUtils.EVENT_NAME.FARE_FAMILY_DETAILS,pageID:this.PAGE_ID,eventCategory:this.PRIMARY_CATEGORY,eventAction:this.analyticsUtils.EVENT_ACTION.FARE_FAMILY_DESCRIPTION,eventLabel:this.analyticsUtils.EVENT_LABEL.FARE_FAMILY_CODE_TRIP,eventValue:t.ffCode,forceSaveData:!0};this.analyticsUtils.launchAnalyticsEvent(i)},eventClickFareTaxDetails:function(){var t={eventId:this.analyticsUtils.EVENT.CLICK_FARE_TAX_DETAILS,eventName:this.analyticsUtils.EVENT_NAME.BOOKING_DETAILS,pageID:this.PAGE_ID,eventCategory:this.PRIMARY_CATEGORY,componentID:this.analyticsUtils.EVENT_COMPONENT.TRIP_SUMMARY,eventAction:this.analyticsUtils.EVENT_ACTION.TAXES_AND_FEES,forceSaveData:!0};this.analyticsUtils.launchAnalyticsEvent(t)},eventClickOpenService:function(t){var e=this.analyticsUtils.getDigitalDataParameters().DATA_PRODUCT_DETAILS,i={eventId:this.analyticsUtils.EVENT.CLICK_OPEN_SERVICE,eventName:this.analyticsUtils.EVENT_NAME.AAAS_CATALOG,pageID:this.PAGE_ID,eventCategory:this.PRIMARY_CATEGORY,eventAction:this.analyticsUtils.EVENT_ACTION.CLICK_ANCILLARY_SERVICE,eventLabel:this.analyticsUtils.EVENT_LABEL.SERVICE_CATEGORY,eventValue:this.analyticsUtils.valueAvailable(t,e),forceSaveData:!0};this.analyticsUtils.launchAnalyticsEvent(i)},eventDisplayAAASPack:function(t){var e=this.analyticsUtils.getDigitalDataParameters().DATA_PRODUCT_DETAILS,i={eventId:this.analyticsUtils.EVENT.EVENT_DISPLAY_AAAS_PACK,eventName:this.analyticsUtils.EVENT_NAME.ESPECIAL_OFFER,pageID:this.PAGE_ID,eventCategory:this.PRIMARY_CATEGORY,eventAction:this.analyticsUtils.EVENT_ACTION.DISPLAY_AAAS_PACK,eventLabel:this.analyticsUtils.EVENT_LABEL.PACK_CODE,eventValue:this.analyticsUtils.valueAvailable(t,e),eventType:this.analyticsUtils.EVENT_TYPE.DISPLAY,forceSaveData:!0};this.analyticsUtils.launchAnalyticsEvent(i)},eventCurrencyConverterPopup:function(t){var e={eventId:this.analyticsUtils.EVENT.CLICK_POPUP_CURRENCY_CONVERTER,eventName:this.analyticsUtils.EVENT_NAME.CURRENCY_CONVERTER,pageID:this.PAGE_ID,eventCategory:this.PRIMARY_CATEGORY,eventAction:this.analyticsUtils.EVENT_ACTION.CURRENCY_CONVERTER,eventValue:t,forceSaveData:!0};this.analyticsUtils.launchAnalyticsEvent(e)},eventConvertedToCurrency:function(t){var e={eventId:this.analyticsUtils.EVENT.CURRENCY_CONVERTED_VALUE,eventName:this.analyticsUtils.EVENT_NAME.CURRENCY_CONVERTER,pageID:this.PAGE_ID,eventCategory:this.PRIMARY_CATEGORY,eventAction:this.analyticsUtils.EVENT_ACTION.CONVERTED_CURRENCY,eventValue:t,forceSaveData:!0};this.analyticsUtils.launchAnalyticsEvent(e)},prepareAbandonDetection:function(){var t={eventId:this.analyticsUtils.EVENT.LEAVING,eventName:this.analyticsUtils.EVENT_NAME.ABANDON,pageID:this.PAGE_ID,eventCategory:this.PRIMARY_CATEGORY,eventAction:this.analyticsUtils.EVENT_ACTION.ABANDON,eventLabel:this.analyticsUtils.EVENT_LABEL.LEAVING,eventValue:this.analyticsUtils.EVENT_ACTION.ABANDON,forceSaveData:!0},e=this.analyticsUtils;disableAbandonDetection=!1,window.onbeforeunload=function(){disableAbandonDetection||e.launchAnalyticsEvent(t)}},eventResponseTime:function(t){var e=t.action||"",i={eventId:this.analyticsUtils.EVENT.RESPONSE_TIME,eventName:this.analyticsUtils.EVENT_NAME.RESPONSE_TIME,pageID:this.PAGE_ID,eventCategory:this.PRIMARY_CATEGORY,eventAction:this.analyticsUtils.EVENT_ACTION.RESPONSE_TIME,eventLabel:e+this.analyticsUtils.EVENT_VALUES.SEPARATOR_LEVEL_1+responseTime.elapsedTime,eventValue:e+this.analyticsUtils.EVENT_VALUES.SEPARATOR_LEVEL_1+responseTime.elapsedTime,eventType:this.analyticsUtils.EVENT_TYPE.RESPONSE,forceSaveData:!0};this.analyticsUtils.launchAnalyticsEvent(i)},isLastEvent:function(t){return"undefined"!=typeof digitalData&&digitalData.event&&digitalData.event[digitalData.event.length-1]&&digitalData.event[digitalData.event.length-1].eventInfo?digitalData.event[digitalData.event.length-1].eventInfo.key===t:!1},updateTravellerList:function(t){this.PassengerAnalytics.updateTravellerList(t),this.storeDigitalData()},getRecoTotalAmount:function(t,e){var i,n=t.cell;return e&&n.bounds&&n.bounds[t.boundIndex]?(i=n.bounds[t.boundIndex],i.boundAmount.totalAmount):!e&&n.recoAmountList?(i=n.recoAmountList[0].boundsAmountList[t.boundIndex],i.totalAmount):(i=n.bounds[0],i.boundAmount.totalAmount)},eventClickMoreDetailsFareFamily:function(t){var e="",i="",n="",s="",a=t.boundIndex>-1?t.boundIndex:t.bound_index;if(t.boundDetails=this.getSelectedCellDetails(a),t.boundDetails){var r=t.boundDetails.fareFamilyIndex,o=t.boundDetails.flightIndex;if(t.cell=this.getCurrentBestRecommendation(a,r,o),t.cell&&t.cell.bounds){var l=this.getRecoOptimizedEnabled(),c=this._pageData.business.TripSummary.listItinerary.listItineraryElem[a];n=this.dateUtils.fromDateToTimestamp(c.listSegment[0].beginDateGMT||c.listSegment[0].beginDate),i=this.getRecoTotalAmount(t,l)}e=this.getFFCodeMoreDetails(t,a)}if(!t.boundDetails&&""===n){var d=this._pageData.business.Availability.proposedBounds[t.boundIndex],p=d.proposedFlightsGroup[0].segments[0].beginDateGMT;n=this.dateUtils.fromDateToTimestamp(p)}s=this.getMoreDetailsValue(t,e,i,n);var _={eventId:this.analyticsUtils.EVENT.CLICK_MODE_DETAILS_FARE_FAMILY,eventName:this.analyticsUtils.EVENT_NAME.FARE_FAMILY_DETAILS,pageID:this.PAGE_ID,eventCategory:this.PRIMARY_CATEGORY,eventAction:this.analyticsUtils.EVENT_ACTION.FARE_FAMILY_DESCRIPTION,eventLabel:this.analyticsUtils.EVENT_LABEL.FARE_FAMILY_CODE,eventValue:s,forceSaveData:!0};
this.analyticsUtils.launchAnalyticsEvent(_)},getMoreDetailsValue:function(t,e,i,n){var s="";return s=t.ffCode,e&&e.length>0&&(s+=this.analyticsUtils.EVENT_VALUES.SEPARATOR_LEVEL_1+e),i&&i.toString().length>0&&(s+=this.analyticsUtils.EVENT_VALUES.SEPARATOR_LEVEL_1+i),n&&n.toString().length>0&&(s+=this.analyticsUtils.EVENT_VALUES.SEPARATOR_LEVEL_1+n),s},getFFCodeMoreDetails:function(t,e){var i="";return t.cell&&(i=t.cell.ffCode?t.cell.ffCode:t.cell.bounds[e].ffCode?t.cell.bounds[e].ffCode:t.cell.bounds[e].fareFamily?t.cell.bounds[e].fareFamily.ffCode:t.cell.fareFamily.ffCode),i},eventClickShowFlightDetails:function(t){var e="",i="",n="",s=this.getRecoOptimizedEnabled();t.prefix&&(n=t.prefix),t.bound_index>-1&&(t.boundIndex=t.bound_index);var a=t.boundIndex;if(t.boundDetails=this.getSelectedCellDetails(a),t.boundDetails){var r=t.boundDetails.fareFamilyIndex,o=t.boundDetails.flightIndex;t.cell=this.getCurrentBestRecommendation(a,r,o),t.cell&&t.cell.bounds&&(i=this.getRecoTotalAmount(t,s))}e=this.getFFCode(t,a,s);var l=this.analyticsUtils.getDigitalDataParameters().DATA_PRICE_DETAILS,c="";c+=this.dateUtils.dateToJSON(this.getDepartureDateSelected(t,a)),c+=t.prefix&&"availability"===t.prefix?this.analyticsUtils.EVENT_VALUES.SEPARATOR_LEVEL_1+this.getAvailablesFareFamily(t):this.analyticsUtils.EVENT_VALUES.SEPARATOR_LEVEL_1+e+this.analyticsUtils.EVENT_VALUES.SEPARATOR_LEVEL_1+this.analyticsUtils.valueAvailable(i,l);var d={componentID:n,eventId:this.analyticsUtils.EVENT.CLICK_SHOW_FLIGHT_DETAILS,eventName:this.analyticsUtils.EVENT_NAME.BOOKING_DETAILS,pageID:this.PAGE_ID,eventCategory:this.PRIMARY_CATEGORY,eventLabel:this.analyticsUtils.EVENT_LABEL.FLIGHT_DETAILS,eventAction:this.analyticsUtils.EVENT_ACTION.SHOW_FLIGHT_DETAILS,eventValue:c,forceSaveData:!0};this.analyticsUtils.launchAnalyticsEvent(d)},eventDisplayCarTeaserDisclaimer:function(){var t={componentID:this.analyticsUtils.EVENT_COMPONENT.SB_TEASER,eventId:this.analyticsUtils.EVENT.DISPLAY_DISCLAIMER,eventName:this.analyticsUtils.EVENT_NAME.CAR_TEASER_DISCLAIMER,pageID:this.PAGE_ID,eventCategory:this.PRIMARY_CATEGORY,eventAction:this.analyticsUtils.EVENT_ACTION.CAR_TEASER_DISCLAIMER_SHOW,eventType:this.analyticsUtils.EVENT_TYPE.DISPLAY,forceSaveData:!0};this.analyticsUtils.launchAnalyticsEvent(t)},eventOpenPurchaseConditions:function(){var t={componentID:this.analyticsUtils.EVENT_COMPONENT.SB_TEASER,eventId:this.analyticsUtils.EVENT.CLICK_ADDITIONAL_PROTECTION,eventName:this.analyticsUtils.EVENT_NAME.CAR_TEASER_DISCLAIMER,pageID:this.PAGE_ID,eventCategory:this.PRIMARY_CATEGORY,eventAction:this.analyticsUtils.EVENT_ACTION.CLICK_ADDITIONAL_PROTECTION,eventType:this.analyticsUtils.EVENT_TYPE.USER_EVENT,forceSaveData:!0};this.analyticsUtils.launchAnalyticsEvent(t)},getDepartureDateSelected:function(t,e){if(t.cell&&t.prefix&&"TripSummary"===t.prefix){var i=this._pageData.business.TripSummary.listItinerary.listItineraryElem[e],n=i?i.listSegment[0].beginDateGMT:i.listSegment[0].beginDate;return this.dateUtils.fromDateToTimestamp(n)}if(t.flight){var s=t.flight.segments[0];return this.dateUtils.fromDateToTimestamp(s.beginDateGMT||s.beginDate)}},getFFCode:function(t,e,i){return t.cell&&t.cell.bounds[e]&&t.cell.bounds[e].ffCode?i?t.cell.bounds[e].ffCode:t.cell.bounds[e].fareFamily.ffCode:t.cell?i?t.cell.ffCode:t.cell.fareFamily.ffCode:void 0},getDepartureDate:function(t){var e=null;return e=t&&t.segments?t.segments[0]:t&&t.firstSegment?t.firstSegment:this._pageData.business.TripSummary.listItinerary.listItineraryElem[0].listSegment[0],this.dateUtils.fromDateToTimestamp(e.beginDateGMT||e.beginDate)},getSelectedCellDetails:function(t){var e=this._pageData.business.FareReview.tripSummary.listItinerary.listItineraryElem[t];if(null!=e&&null!=e.fareFamily){var i={};return i.boundIndex=t,i.fareFamilyIndex=this.getFareFamilyIndex(e.fareFamily.ffCode,t),i.flightIndex=e.proposedBoundId,i}return null},getFareFamilyIndex:function(t){var e=this._pageData.business.Availability.fareFamilyList,i=0;return e.forEach(function(e,n){e.ffCode===t&&(i=n)}),i},getCurrentBestRecommendation:function(t,e,i){var n=this.getCell(t,e,i);if(n&&n.currentBestRecommendationIndex>=0){var s=n.currentBestRecommendationIndex;return this._pageData.business.Availability.recommendations[s]}return null},getBounds:function(){return this._pageData.business.Availability.cube.bounds},getBound:function(t){var e=this.getBounds();return e[t]?e[t]:e[0]},getCells:function(t,e){return this.getBound(t).fareFamilyList[e].flights},getCell:function(t,e,i){return this.getCells(t,e)[i]},getRecoOptimizedEnabled:function(){return this._pageData.config.AVAILABILITY.optimizedRecoEnabled},getAvailablesFareFamily:function(t){var e=this._pageData.business.Availability.cube.bounds[t.boundIndex].fareFamilyList,i=this._pageData.business.Availability.recommendations,n=this.analyticsUtils.getDigitalDataParameters().DATA_PRICE_DETAILS,s="0",a="not",r=this;return e.forEach(function(e){if(e.flights[t.flightIndex]){var n=e.flights[t.flightIndex].currentBestRecommendationIndex,o=i[n];s=r.getPricesList(s,t,o),a=r.getFareFamilyList(a,t,o)}}),a+this.analyticsUtils.EVENT_VALUES.SEPARATOR_LEVEL_1+this.analyticsUtils.valueAvailable(s,n)},getPricesList:function(t,e,i){return i.bounds&&i.bounds[e.boundIndex].boundAmount?"0"===t?i.bounds[e.boundIndex].boundAmount.totalAmount:t+this.analyticsUtils.EVENT_VALUES.SEPARATOR_LEVEL_2+i.bounds[e.boundIndex].boundAmount.totalAmount:i.recoAmountList[e.boundIndex]?"0"===t?i.recoAmountList[e.boundIndex].boundsAmountList[0].totalAmount:t+this.analyticsUtils.EVENT_VALUES.SEPARATOR_LEVEL_2+i.recoAmountList[e.boundIndex].boundsAmountList[0].totalAmount:t},getFareFamilyList:function(t,e,i){if(i.bounds&&i.bounds[e.boundIndex].ffCode)return"not"===t?i.bounds[e.boundIndex].ffCode:t+this.analyticsUtils.EVENT_VALUES.SEPARATOR_LEVEL_2+i.bounds[e.boundIndex].ffCode;var n="";return n=i.ffCode?i.ffCode:i.bounds[0].fareFamily?i.bounds[0].fareFamily.ffCode:i.fareFamily.ffCode,"not"===t?n:t+this.analyticsUtils.EVENT_VALUES.SEPARATOR_LEVEL_2+n},getInitialDigitalData:function(){return this.initialDigitalData}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/ContactInformationAnalytics.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.ContactInformationAnalytics",$singleton:!0,$prototype:{buildContactInformation:function(t){eBaDataLayer.contact_information={};var e={Email:"email",EmailConfirm:"email_confirm",Email2:"email2",Email3:"email3",PhoneHome:"home_phone",PhoneHomeCode:"",PhoneMobile:"mobile_phone",PhoneMobileCode:"",PhoneBusiness:"business_phone",PhoneBusinessCode:"",PhoneOther:"other_phone",PhoneOtherCode:"",PhoneSmsNotif:"notification_phone",PhoneSmsNotifCode:"",EMailNotif:"notification_email",PhoneFax:"fax",PhoneFaxCode:"",SosName:"emergency_name",SosPhone:"emergency_phone",SosPhoneCode:"",NewsSubscription:"news_subscription"};for(var i in e)null!=t[i]&&""!==t[i]&&this._fillContactInformation(i,e,t)},_fillContactInformation:function(t,e,i){if(-1!==t.indexOf("Phone")&&-1!==t.indexOf("Code")){var n=t.replace("Code","");null!=i[n]&&""!==i[n]&&(eBaDataLayer.contact_information[e[n]]=i[t]+i[n])}else eBaDataLayer.contact_information[e[t]]=i[t]}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/ContextAnalytics.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.ContextAnalytics",$dependencies:["plnextv2.utils.requestManager.PlnextRequestManager","plnextv2.utils.analytics.AnalyticsUtils"],$statics:{DEFAULT_DEVICE:"Desktop",EXTERNAL_ORI:"EXTERNAL_ID_",EXTERNAL_DES:"externalID",MAX_PE_VARIABLE:5,PE_VARIABLE_ORI:"SITE_CUSTOM_DHTML_PE_VAR",PE_VARIABLE_DES:"peVariable"},$constructor:function(t){this.plnextRequestManager=plnextv2.utils.requestManager.PlnextRequestManager,this.analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils,this.digitalDataParameters={},this.mappingAnalytics=t},$prototype:{buildContext:function(t,e){var i=this.mappingAnalytics.getContext();this.digitalDataParameters=this.analyticsUtils.getDigitalDataParameters(t),this._setSite(i,t.requestParameters),this._setSession(i),this._setLanguage(i,t.requestParameters),this._setMarket(i,t.config&&t.config.analytics),this._setOffice(i,t.config&&t.config.analytics),this._setExternals(i,t.requestParameters),this.digitalDataParameters.DATA_CONTEXT&&(this._setDeviceType(i,e&&e.device),this._setBrowser(i,e&&e.browser),this._setBookingFlow(i,t.requestParameters),this._setTripFlow(i,t.requestParameters),this._setPEVariables(i,t.config&&t.config.analytics),this.__addExternalIDExtra(i,t.requestParameters))},getSessionIDByLocator:function(t){return this.mappingAnalytics.getDigitalDataLocator(t).sessionID},_setSite:function(t,e){this.mappingAnalytics.initParent(t),e&&e.SITE&&(t.site=e.SITE)},_setSession:function(t){this.mappingAnalytics.initParent(t),t.sessionID=this.plnextRequestManager.getSessionId()},_setLanguage:function(t,e){this.mappingAnalytics.initParent(t),t.language=e&&e.LANGUAGE},_setMarket:function(t,e){this.mappingAnalytics.initParent(t),t.market=e.SITE_MARKET_ID},_setOffice:function(t,e){this.mappingAnalytics.initParent(t),t.officeID=e.SITE_OFFICE_ID},_setExternals:function(t,e){this.mappingAnalytics.initParent(t),e.EXTERNAL_ID&&(t.externalID=e.EXTERNAL_ID)},_setDeviceType:function(t,e){this.mappingAnalytics.initParent(t),t.deviceType=e&&this._capitalizeFirst(e.type)||this.DEFAULT_DEVICE},_setBrowser:function(t,e){this.mappingAnalytics.initParent(t),t.browser=e.name},_setBookingFlow:function(t,e){this.mappingAnalytics.initParent(t),e.BOOKING_FLOW&&(t.bookingFlow=e.BOOKING_FLOW)},_setTripFlow:function(t,e){this.mappingAnalytics.initParent(t),e.TRIP_FLOW&&(t.tripFlow=e.TRIP_FLOW)},_setPEVariables:function(t,e){this.mappingAnalytics.initParent(t);for(var i=1;i<=this.MAX_PE_VARIABLE;i++){var n=e[this.PE_VARIABLE_ORI+i];n&&(t[this.PE_VARIABLE_DES+i]=n)}},__addExternalIDExtra:function(t,e){for(var i=e.SITE_EXTERNAL_ID_LIMIT||1,n=2;i>=n;n++)e[this.EXTERNAL_ORI+n]&&(t[this.EXTERNAL_DES+n]=e[this.EXTERNAL_ORI+n])},getSessionID:function(t){var e=digitalData&&digitalData[t];return e&&e.context?e.context.sessionID:null},_capitalizeFirst:function(t){return t?t.charAt(0).toUpperCase()+t.slice(1):t}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/FlightAnalytics.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.FlightAnalytics",$dependencies:["plnextv2.utils.DateTimeUtils","plnextv2.utils.DateUtils","plnextv2.utils.analytics.AnalyticsUtils","aria.utils.Date"],$statics:{FORMAT_DATE:"yyyy-MM-ddTHH:mm:ss",FORMAT_DATE_DIGITAL:"yyyy-MM-ddTHH:mm:ss.s",LIST_FARE_FAMILIES:"SL_FARE_FAMILY_BRAND_NAME"},$constructor:function(t){this._dateTimeUtils=plnextv2.utils.DateTimeUtils,this._dateUtils=plnextv2.utils.DateUtils,this._analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils,this._date=aria.utils.Date,this._typeUtils=aria.utils.Type,this.mappingAnalytics=t},$prototype:{buildDigitalDataFlight:function(t){t.business&&this.buildFlightsData(t.business)},initDigitalDataProduct:function(){this.mappingAnalytics.getDigitalData().product||this._addDigitalDataProduct(),this.mappingAnalytics.getDigitalData().cart||this._addDigitalDataCart()},_addDigitalDataProduct:function(){var t=this.mappingAnalytics.getProductParent();t.product||(t.product=[{productInfo:{productID:1},category:{primaryCategory:this.mappingAnalytics.FLIGHT_TICKET_CAT},flightTicket:{bound:[]}}])},_addDigitalDataCart:function(){var t=this.mappingAnalytics.getCartParent();t.cart||(t.cart={price:{},item:[{productInfo:this.mappingAnalytics.getProductInfo(0)}]})},buildFlightsData:function(t){var e=null;t.ItineraryList?e=t.ItineraryList.listItinerary:t.FareReview&&t.FareReview.tripSummary?e=t.FareReview.tripSummary.listItinerary.listItineraryElem:t.ListItineraryView?e=t.ListItineraryView.listItineraryElem:t.ListTimeTable&&(e=t.ListTimeTable.listTimeTable),e&&this._createFlightList(e,t.DynamicWaiver)},buildMilesAndCashFareData:function(t){var e=t.listItinerary;if(null!=e){eBaDataLayer.faresUsedInMAC=[];for(var i=0;i<e.length;i++)eBaDataLayer.faresUsedInMAC.push(e[i].fareFamily)}},buildDigitalDataFlightsFromTripSummary:function(t){if(t.TripSummary.listItinerary.listItineraryElem){var e=t.TripSummary.listItinerary.listItineraryElem;e&&this._createDigitalDataFlightList(e)}},_createFlightList:function(t,e){for(var i=0;i<t.length;i++){var n=t[i],s=[],a=[],r="";if(null!==n&&n.isDeleted!==!0&&n.listSegment){for(var o=0;o<n.listSegment.length;o++){var l=n.listSegment[o],c=this._dateGMTHoursDiff(l.beginDateGMT,l.beginDate),d=this._dateGMTHoursDiff(l.endDateGMT,l.endDate),p={id:l.id,departure:{city_code:l.beginLocation.cityCode,airport_code:l.beginLocation.locationCode,country_code:l.beginLocation.countryCode,date_time:this._dateUtils.formatDate(new Date(l.beginDate),this.FORMAT_DATE)+c},arrival:{city_code:l.endLocation.cityCode,airport_code:l.endLocation.locationCode,country_code:l.endLocation.countryCode,date_time:this._dateUtils.formatDate(new Date(l.endDate),this.FORMAT_DATE)+d},aircraft_type:null!=l.equipment?l.equipment.code:"",cabin:l.listCabin&&l.listCabin[0]?l.listCabin[0].code:"",fare_family_code:null!=l.fareFamily?l.fareFamily.ffCode:"",marketing_flight_number:l.flightNumber,marketing_airline_code:l.airline?l.airline.code:"",operated_by:{airline_code:l.opAirline?l.opAirline.code:""}};s.push(p),r=null!=l.fareFamily?l.fareFamily.ffCode:"";var _=this._loadFlightDetails(l,"segmentID",o,e);a.push(_)}this._digitalDataInsertBound(i,r,a,t)}eBaDataLayer.bound&&null!=eBaDataLayer.bound[i]?eBaDataLayer.bound[i].flights=s:null==eBaDataLayer.bound?eBaDataLayer.bound=[{flights:s}]:eBaDataLayer.bound.push({flights:s})}this._digitalDataInsertJourneyLength(t)},_digitalDataInsertJourneyLength:function(t){var e,i;if(t&&t.length>0){var n=t.length-1;if(t[n]&&null!=t[n].listSegment&&t[n].listSegment.length>0){var s=t[n].listSegment.length-1;e=t[0].listSegment[0].beginDateGMT,i=t[n].listSegment[s].endDateGMT}}var a=this.mappingAnalytics.getFlightTicket();if(a&&i){var r=this._date.dayDifference(new Date(e),new Date(i));a.journeyLength=r,eBaDataLayer.journey_length=r}},_createDigitalDataFlightList:function(t){for(var e=0;e<t.length;e++){var i=t[e],n=[],s=i?i.fareFamily:null,a=s?s.ffCode:"";if(i&&!i.isDeleted){for(var r=0;r<i.listSegment.length;r++){var o=i.listSegment[r];a=o.fareFamily&&""===a?o.fareFamily.ffCode:a;var l=this._loadFlightDetails(o,"segmentID",r);n.push(l)}this._digitalDataInsertBound(e,a,n,t)}}},_digitalDataInsertBound:function(t,e,i,n){var s=this._createBound(t,e,i,n),a=this.mappingAnalytics.getFlightTicketBound();null!=a[t]?(a[t].boundID=s.boundID,a[t].fareFamilyCode=e,this._analyticsUtils.getDigitalDataParameters().DATA_LOCALIZATION&&(a[t].fareFamilyName=this._analyticsUtils.getLocalizedLabel(this.LIST_FARE_FAMILIES,e)),a[t].segment=s.segment,s.status&&(a[t].status=s.status)):a?a.push(s):a=[s]},_createBound:function(t,e,i){var n={boundID:t+1,segment:i};return e&&""!==e&&(n.fareFamilyCode=e,n.fareFamilyName=this._analyticsUtils.getLocalizedLabel(this.LIST_FARE_FAMILIES,e)),n},_loadFlightDetails:function(t,e,i){var n=this._dateGMTHoursDiff(t.beginDateGMT,t.beginDate),s=this._dateGMTHoursDiff(t.endDateGMT,t.endDate),a={departure:{cityCode:t.beginLocation.cityCode,airportCode:t.beginLocation.locationCode,dateTime:this._dateUtils.formatDate(new Date(t.beginDate),this.FORMAT_DATE_DIGITAL)+n},arrival:{cityCode:t.endLocation.cityCode,airportCode:t.endLocation.locationCode,dateTime:this._dateUtils.formatDate(new Date(t.endDate),this.FORMAT_DATE_DIGITAL)+s},cabin:t.listCabin&&t.listCabin[0]?t.listCabin[0].code:"",bookingClass:t.listCabin&&t.listCabin[0]&&t.listCabin[0].listRbd[0]?t.listCabin[0].listRbd[0].rbd:"",marketingFlightNumber:t.flightNumber,marketingAirlineCode:t.airline?t.airline.code:""};return this._loadFlightMoreDetails(t,a),this._analyticsUtils.getDigitalDataParameters().DATA_PRODUCT_DETAILS?(this._loadLegs(t,a),a[e]=i+1):"legID"!==e&&(a[e]=i+1),a},_loadFlightMoreDetails:function(t,e){e.operatedBy=this._getFlightOperatedBy(t),e.marketingOperationalSuffix=t.operationalSuffix||""},_dateGMTHoursDiff:function(t,e){var i="";if(t&&e){var n,s=new Date(null),a=new Date(e),r=new Date(t);r>a?(n=(r-a)/1e3,i="-"):(n=(a-r)/1e3,i="+"),s.setSeconds(n),i+=s.toISOString().substr(11,5)}else e&&(i=this._dateTimeUtils.getTimeZoneString(new Date(e)));return i},_getFlightOperatedBy:function(t){var e={};return t.opAirline&&(e={disclosure:t.opAirline.name||"",airlineCode:t.opAirline.code||""}),e},_loadLegs:function(t,e){if(t.listLegs){e.leg=[];for(var i,n,s=0;s<t.listLegs.length;s++)n=t.listLegs[s],i={legID:s+1,marketingAirlineCode:e.marketingAirlineCode,marketingFlightNumber:e.marketingFlightNumber,marketingOperationalSuffix:e.marketingOperationalSuffix,operatedBy:{},departure:{},arrival:{},cabin:e.cabin,bookingClass:e.bookingClass},this._loadLegDeparture(n,i),this._loadLegArrival(n,i),n.equipment&&(i.aircraftCode=n.equipment.code?n.equipment.code:""),e.operatedBy&&(i.operatedBy=e.operatedBy),e.leg.push(i)}},_loadLegDeparture:function(t,e){t.boardPoint&&(e.departure.cityCode=t.boardPoint.cityCode||"",e.departure.airportCode=t.boardPoint.locationCode||"",e.departure.terminal=t.boardPoint.terminal||""),t.departureDate&&(e.departure.dateTime=this._formatDigitalDataDate(t.departureDate,t.departureDateGMT))},_loadLegArrival:function(t,e){t.offPoint&&(e.arrival.cityCode=t.offPoint.cityCode||"",e.arrival.airportCode=t.offPoint.locationCode||"",e.arrival.terminal=t.offPoint.terminal||""),t.arrivalDate&&(e.arrival.dateTime=this._formatDigitalDataDate(t.arrivalDate,t.arrivalDateGMT))},_formatDigitalDataDate:function(t,e){var i,n=new Date(t);return i=e?this._dateGMTHoursDiff(e,t):this._dateTimeUtils.getTimeZoneString(n),this._dateUtils.formatDate(n,this.FORMAT_DATE_DIGITAL)+i},setDigitalDataOtherFareFamilies:function(t,e,i,n){if(e){var s=this.mappingAnalytics.getFlightTicketBoundByIndex(t);this.__setUpsellOtherFareFamily(s),s.upsell.otherFareFamily[n]={},s.upsell.otherFareFamily[n].fareFamilyCode=e,this._setFareFamilyName&&this._setFareFamilyName(s,e,n),this._typeUtils.isNumber(i)&&(s.upsell.otherFareFamily[n].price=i)}},setFlightTicketBoundID:function(t){var e=this.mappingAnalytics.getFlightTicketBound();e[t]||(e[t]={boundID:t+1})},_insertDigitalDataUpsell:function(t,e){var i=t.realBoundIndex||t.boundIndex;if(this._analyticsUtils.getDigitalDataParameters().DATA_UPSELL){var n=this.mappingAnalytics.getFlightTicketBoundByIndex(i);n&&(n.upsell=e)}},__setUpsellOtherFareFamily:function(t){t.upsell||(t.upsell={}),t.upsell.otherFareFamily||(t.upsell.otherFareFamily=[])}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/GlobalAnalytics.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.GlobalAnalytics",$extends:"plnextv2.analytics.BaseAnalytics",$dependencies:["plnextv2.analytics.MappingAnalytics","plnextv2.analytics.versions.v_1_1_0.MappingAnalyticsV_1_1_0","plnextv2.analytics.versions.v_1_2_0.MappingAnalyticsV_1_2_0","plnextv2.analytics.versions.v_2_0_0.MappingAnalyticsV_2_0_0","plnextv2.analytics.versions.v_2_2_0.MappingAnalyticsV_2_2_0","plnextv2.analytics.versions.v_2_3_0.MappingAnalyticsV_2_3_0","plnextv2.analytics.versions.v_2_4_0.MappingAnalyticsV_2_4_0","plnextv2.analytics.versions.v_2_5_0.MappingAnalyticsV_2_5_0","plnextv2.analytics.PassengerAnalytics","plnextv2.analytics.versions.v_2_0_0.PassengerAnalyticsV_2_0_0","plnextv2.analytics.versions.v_2_2_0.PassengerAnalyticsV_2_2_0","plnextv2.analytics.versions.v_2_3_0.PassengerAnalyticsV_2_3_0","plnextv2.analytics.ContactInformationAnalytics","plnextv2.analytics.PriceDetailsAnalytics","plnextv2.analytics.versions.v_2_0_0.PriceDetailsAnalyticsV_2_0_0","plnextv2.analytics.SearchAnalytics","plnextv2.analytics.versions.v_1_1_0.SearchAnalyticsV_1_1_0","plnextv2.analytics.versions.v_1_2_0.SearchAnalyticsV_1_2_0","plnextv2.analytics.versions.v_2_0_0.SearchAnalyticsV_2_0_0","plnextv2.analytics.versions.v_2_2_0.SearchAnalyticsV_2_2_0","plnextv2.analytics.FlightAnalytics","plnextv2.analytics.versions.v_1_1_0.FlightAnalyticsV_1_1_0","plnextv2.analytics.versions.v_1_2_0.FlightAnalyticsV_1_2_0","plnextv2.analytics.versions.v_2_0_0.FlightAnalyticsV_2_0_0","plnextv2.analytics.versions.v_2_2_0.FlightAnalyticsV_2_2_0","plnextv2.analytics.versions.v_2_4_0.FlightAnalyticsV_2_4_0","plnextv2.analytics.AncillaryAnalytics","plnextv2.analytics.versions.v_2_0_0.AncillaryAnalyticsV_2_0_0","plnextv2.analytics.versions.v_2_2_0.AncillaryAnalyticsV_2_2_0","plnextv2.analytics.PageAnalytics","plnextv2.analytics.versions.v_2_0_0.PageAnalyticsV_2_0_0","plnextv2.analytics.versions.v_2_2_0.PageAnalyticsV_2_2_0","plnextv2.analytics.versions.v_2_4_0.PageAnalyticsV_2_4_0","plnextv2.analytics.versions.v_2_5_0.PageAnalyticsV_2_5_0","plnextv2.analytics.ContextAnalytics","plnextv2.analytics.versions.v_1_1_0.ContextAnalyticsV_1_1_0","plnextv2.analytics.versions.v_2_0_0.ContextAnalyticsV_2_0_0","plnextv2.analytics.versions.v_2_2_0.ContextAnalyticsV_2_2_0","plnextv2.analytics.versions.v_2_5_0.ContextAnalyticsV_2_5_0","plnextv2.analytics.PaymentAnalytics","plnextv2.analytics.versions.v_2_0_0.PaymentAnalyticsV_2_0_0","plnextv2.analytics.InsuranceAnalytics","plnextv2.analytics.versions.v_2_0_0.InsuranceAnalyticsV_2_0_0","plnextv2.utils.context.AppContext"],$statics:{VERSION_ANALYTICS_PARAMETER:"SITE_ANALYTICS_VERSION"},$constructor:function(t){this.$BaseAnalytics.constructor.call(this);var e=plnextv2.utils.context.AppContext.getAppData(),i=e&&e.config&&e.config.analytics;i&&i.SITE_ENABLE_ANALYTICS&&(t||(t=i[this.VERSION_ANALYTICS_PARAMETER]||"1.0.0"),this._buildVersion(t)),this._instantiateVersion(),this.ContactInformationAnalytics=plnextv2.analytics.ContactInformationAnalytics},$prototype:{_buildPageAnalytics:function(){this.$logError("_buildPageAnalytics method has to be implemented in %1",[this.$classpath])},_instantiateVersion:function(){this.mappingAnalytics=this.mappingAnalytics||new plnextv2.analytics.MappingAnalytics,this._helpersVersion()},_helpersVersion:function(){this.ContextAnalytics=this.ContextAnalytics||new plnextv2.analytics.ContextAnalytics(this.mappingAnalytics),this.FlightAnalytics=this.FlightAnalytics||new plnextv2.analytics.FlightAnalytics(this.mappingAnalytics),this.SearchAnalytics=this.SearchAnalytics||new plnextv2.analytics.SearchAnalytics(this.mappingAnalytics),this.PriceDetailsAnalytics=this.PriceDetailsAnalytics||new plnextv2.analytics.PriceDetailsAnalytics(this.mappingAnalytics),this.AncillaryAnalytics=this.AncillaryAnalytics||new plnextv2.analytics.AncillaryAnalytics(this.mappingAnalytics),this.PaymentAnalytics=this.PaymentAnalytics||new plnextv2.analytics.PaymentAnalytics(this.mappingAnalytics),this.InsuranceAnalytics=this.InsuranceAnalytics||new plnextv2.analytics.InsuranceAnalytics(this.mappingAnalytics),this.PassengerAnalytics=this.PassengerAnalytics||new plnextv2.analytics.PassengerAnalytics(this.mappingAnalytics),this.PageAnalytics=this.PageAnalytics||new plnextv2.analytics.PageAnalytics(this.mappingAnalytics)},_buildVersion:function(t){switch(t){case"1.0.0":this.mappingAnalytics=new plnextv2.analytics.MappingAnalytics;break;case"1.1.0":this.mappingAnalytics=new plnextv2.analytics.versions.v_1_1_0.MappingAnalyticsV_1_1_0,this.ContextAnalytics=new plnextv2.analytics.versions.v_1_1_0.ContextAnalyticsV_1_1_0(this.mappingAnalytics),this.FlightAnalytics=new plnextv2.analytics.versions.v_1_1_0.FlightAnalyticsV_1_1_0(this.mappingAnalytics),this.SearchAnalytics=new plnextv2.analytics.versions.v_1_1_0.SearchAnalyticsV_1_1_0(this.mappingAnalytics);break;case"1.2.0":this.mappingAnalytics=new plnextv2.analytics.versions.v_1_2_0.MappingAnalyticsV_1_2_0,this.ContextAnalytics=new plnextv2.analytics.versions.v_1_1_0.ContextAnalyticsV_1_1_0(this.mappingAnalytics),this.FlightAnalytics=new plnextv2.analytics.versions.v_1_2_0.FlightAnalyticsV_1_2_0(this.mappingAnalytics),this.SearchAnalytics=new plnextv2.analytics.versions.v_1_2_0.SearchAnalyticsV_1_2_0(this.mappingAnalytics);break;case"2.0.0":this.mappingAnalytics=new plnextv2.analytics.versions.v_2_0_0.MappingAnalyticsV_2_0_0,this.ContextAnalytics=new plnextv2.analytics.versions.v_2_0_0.ContextAnalyticsV_2_0_0(this.mappingAnalytics),this.FlightAnalytics=new plnextv2.analytics.versions.v_2_0_0.FlightAnalyticsV_2_0_0(this.mappingAnalytics),this.PriceDetailsAnalytics=new plnextv2.analytics.versions.v_2_0_0.PriceDetailsAnalyticsV_2_0_0(this.mappingAnalytics),this.AncillaryAnalytics=new plnextv2.analytics.versions.v_2_0_0.AncillaryAnalyticsV_2_0_0(this.mappingAnalytics),this.PaymentAnalytics=new plnextv2.analytics.versions.v_2_0_0.PaymentAnalyticsV_2_0_0(this.mappingAnalytics),this.InsuranceAnalytics=new plnextv2.analytics.versions.v_2_0_0.InsuranceAnalyticsV_2_0_0(this.mappingAnalytics),this.PassengerAnalytics=new plnextv2.analytics.versions.v_2_0_0.PassengerAnalyticsV_2_0_0(this.mappingAnalytics),this.SearchAnalytics=new plnextv2.analytics.versions.v_2_0_0.SearchAnalyticsV_2_0_0(this.mappingAnalytics),this.PageAnalytics=new plnextv2.analytics.versions.v_2_0_0.PageAnalyticsV_2_0_0(this.mappingAnalytics);break;case"2.3.0":this.mappingAnalytics=new plnextv2.analytics.versions.v_2_3_0.MappingAnalyticsV_2_3_0,this.ContextAnalytics=new plnextv2.analytics.versions.v_2_2_0.ContextAnalyticsV_2_2_0(this.mappingAnalytics),this.FlightAnalytics=new plnextv2.analytics.versions.v_2_2_0.FlightAnalyticsV_2_2_0(this.mappingAnalytics),this.PriceDetailsAnalytics=new plnextv2.analytics.versions.v_2_0_0.PriceDetailsAnalyticsV_2_0_0(this.mappingAnalytics),this.AncillaryAnalytics=new plnextv2.analytics.versions.v_2_2_0.AncillaryAnalyticsV_2_2_0(this.mappingAnalytics),this.PaymentAnalytics=new plnextv2.analytics.versions.v_2_0_0.PaymentAnalyticsV_2_0_0(this.mappingAnalytics),this.InsuranceAnalytics=new plnextv2.analytics.versions.v_2_0_0.InsuranceAnalyticsV_2_0_0(this.mappingAnalytics),this.PassengerAnalytics=new plnextv2.analytics.versions.v_2_3_0.PassengerAnalyticsV_2_3_0(this.mappingAnalytics),this.SearchAnalytics=new plnextv2.analytics.versions.v_2_2_0.SearchAnalyticsV_2_2_0(this.mappingAnalytics),this.PageAnalytics=new plnextv2.analytics.versions.v_2_2_0.PageAnalyticsV_2_2_0(this.mappingAnalytics);break;case"2.4.0":this.mappingAnalytics=new plnextv2.analytics.versions.v_2_4_0.MappingAnalyticsV_2_4_0,this.ContextAnalytics=new plnextv2.analytics.versions.v_2_2_0.ContextAnalyticsV_2_2_0(this.mappingAnalytics),this.FlightAnalytics=new plnextv2.analytics.versions.v_2_4_0.FlightAnalyticsV_2_4_0(this.mappingAnalytics),this.PriceDetailsAnalytics=new plnextv2.analytics.versions.v_2_0_0.PriceDetailsAnalyticsV_2_0_0(this.mappingAnalytics),this.AncillaryAnalytics=new plnextv2.analytics.versions.v_2_2_0.AncillaryAnalyticsV_2_2_0(this.mappingAnalytics),this.PaymentAnalytics=new plnextv2.analytics.versions.v_2_0_0.PaymentAnalyticsV_2_0_0(this.mappingAnalytics),this.InsuranceAnalytics=new plnextv2.analytics.versions.v_2_0_0.InsuranceAnalyticsV_2_0_0(this.mappingAnalytics),this.PassengerAnalytics=new plnextv2.analytics.versions.v_2_3_0.PassengerAnalyticsV_2_3_0(this.mappingAnalytics),this.SearchAnalytics=new plnextv2.analytics.versions.v_2_2_0.SearchAnalyticsV_2_2_0(this.mappingAnalytics),this.PageAnalytics=new plnextv2.analytics.versions.v_2_4_0.PageAnalyticsV_2_4_0(this.mappingAnalytics);break;case"2.5.0":this.mappingAnalytics=new plnextv2.analytics.versions.v_2_5_0.MappingAnalyticsV_2_5_0,this.ContextAnalytics=new plnextv2.analytics.versions.v_2_5_0.ContextAnalyticsV_2_5_0(this.mappingAnalytics),this.FlightAnalytics=new plnextv2.analytics.versions.v_2_4_0.FlightAnalyticsV_2_4_0(this.mappingAnalytics),this.PriceDetailsAnalytics=new plnextv2.analytics.versions.v_2_0_0.PriceDetailsAnalyticsV_2_0_0(this.mappingAnalytics),this.AncillaryAnalytics=new plnextv2.analytics.versions.v_2_2_0.AncillaryAnalyticsV_2_2_0(this.mappingAnalytics),this.PaymentAnalytics=new plnextv2.analytics.versions.v_2_0_0.PaymentAnalyticsV_2_0_0(this.mappingAnalytics),this.InsuranceAnalytics=new plnextv2.analytics.versions.v_2_0_0.InsuranceAnalyticsV_2_0_0(this.mappingAnalytics),this.PassengerAnalytics=new plnextv2.analytics.versions.v_2_3_0.PassengerAnalyticsV_2_3_0(this.mappingAnalytics),this.SearchAnalytics=new plnextv2.analytics.versions.v_2_2_0.SearchAnalyticsV_2_2_0(this.mappingAnalytics),this.PageAnalytics=new plnextv2.analytics.versions.v_2_5_0.PageAnalyticsV_2_5_0(this.mappingAnalytics);break;case"2.2.0":default:this.mappingAnalytics=new plnextv2.analytics.versions.v_2_2_0.MappingAnalyticsV_2_2_0,this.ContextAnalytics=new plnextv2.analytics.versions.v_2_2_0.ContextAnalyticsV_2_2_0(this.mappingAnalytics),this.FlightAnalytics=new plnextv2.analytics.versions.v_2_2_0.FlightAnalyticsV_2_2_0(this.mappingAnalytics),this.PriceDetailsAnalytics=new plnextv2.analytics.versions.v_2_0_0.PriceDetailsAnalyticsV_2_0_0(this.mappingAnalytics),this.AncillaryAnalytics=new plnextv2.analytics.versions.v_2_2_0.AncillaryAnalyticsV_2_2_0(this.mappingAnalytics),this.PaymentAnalytics=new plnextv2.analytics.versions.v_2_0_0.PaymentAnalyticsV_2_0_0(this.mappingAnalytics),this.InsuranceAnalytics=new plnextv2.analytics.versions.v_2_0_0.InsuranceAnalyticsV_2_0_0(this.mappingAnalytics),this.PassengerAnalytics=new plnextv2.analytics.versions.v_2_2_0.PassengerAnalyticsV_2_2_0(this.mappingAnalytics),this.SearchAnalytics=new plnextv2.analytics.versions.v_2_2_0.SearchAnalyticsV_2_2_0(this.mappingAnalytics),this.PageAnalytics=new plnextv2.analytics.versions.v_2_2_0.PageAnalyticsV_2_2_0(this.mappingAnalytics)}},getDigitalData:function(){return this.mappingAnalytics.getDigitalData()}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/InsuranceAnalytics.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.InsuranceAnalytics",$dependencies:[],$statics:{DEFAULT_DEVICE:"Desktop",INSURANCE:"Insurance"},$constructor:function(t){this.mappingAnalytics=t},$prototype:{_setDigitalDataInsurance:function(t){for(var e=t&&t.INSURANCE&&t.INSURANCE.listProducts,i=e&&e.length,n=this.mappingAnalytics.getProduct(),s=this.mappingAnalytics.getProductInfo(n.length-1).productID,a=0;i>a;a++){var r={productID:++s},o={insurance:{code:e[a].productCode,price:e[a].priceAmount&&e[a].priceAmount.totalAmount,travellerID:e[a].listCoveredTravellerId&&e[a].listCoveredTravellerId[0]},category:{primaryCategory:this.INSURANCE},productInfo:r};this._addDigitalDataInsurance(o)}var l=this.mappingAnalytics.getCartPrice();t.Price&&t.Price.totalInsurance&&this._setInsurancePrice(l,t.Price.totalInsurance.amount)},_addDigitalDataInsurance:function(t){var e=this.mappingAnalytics.getProduct();e.push(t),this._addDigitalDataCartItem(t);var i=this.mappingAnalytics.getCartPrice();if(i.insurancePrice||(i.insurancePrice=0),i.insurancePrice+=t.insurance.price,this.mappingAnalytics.getDigitalData().transaction){this._addDigitalDataTransactionItem(t);var n=this.mappingAnalytics.getTransactionTotal();n.insurancePrice||(n.insurancePrice=0),n.insurancePrice+=t.insurance.price}},_addDigitalDataCartItem:function(t){var e=this.mappingAnalytics.getCartItem();e.push({productInfo:{productID:t.productInfo.productID}})},_addDigitalDataTransactionItem:function(t){var e=this.mappingAnalytics.getTransactionItem();e.push({productInfo:{productID:t.productInfo.productID}})},_setInsurancePrice:function(t,e){t.insurancePrice=e},_resetDigitalDataInsurance:function(){var t=this.mappingAnalytics.getProduct(),e=this.mappingAnalytics.getCartItem(),i=this.mappingAnalytics.getTransactionItem();if(t)for(var n=0;n<t.length;n++){var s=this.mappingAnalytics.getProductCategory(n);s.primaryCategory&&s.primaryCategory===this.INSURANCE&&(t.splice(n,1),e.splice(n,1),i.splice(n,1),n--)}}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/MappingAnalytics.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.MappingAnalytics",$statics:{DIGITAL_DATA_VERSION:"1.0.0",OBJECT_SEPARATOR:".",ARRAY_SEPARATOR:"[]",ANCILLARY_SERVICE:"ancillaryService",INSURANCE:"insurance",FLIGHT_TICKET_OBJ:"flightTicket",FLIGHT_TICKET_CAT:"FlightTicket",SITE_CONTEXT:"site"},$constructor:function(){this.pageInstanceIdParent=".",this.pageInstanceId="pageInstanceID",this.eventParent=this.OBJECT_SEPARATOR,this.event="event"+this.ARRAY_SEPARATOR,this.page="page",this.contextParent=this.page,this.context=this.contextParent+this.OBJECT_SEPARATOR+"context",this.contextSite=this.context+this.OBJECT_SEPARATOR+this.SITE_CONTEXT,this.pageParent=this.OBJECT_SEPARATOR,this.pageInfoParent=this.page,this.pageInfo=this.pageInfoParent+this.OBJECT_SEPARATOR+"pageInfo",this.pageCategoryParent=this.page,this.pageCategory=this.pageCategoryParent+this.OBJECT_SEPARATOR+"category",this.productParent=this.OBJECT_SEPARATOR,this.product="product"+this.ARRAY_SEPARATOR,this.flightTicketParent=this.product+this.OBJECT_SEPARATOR+"0",this.flightTicket=this.flightTicketParent+this.OBJECT_SEPARATOR+"flightTicket",this.flightTicketBoundParent=this.flightTicket,this.flightTicketBound=this.flightTicketBoundParent+this.OBJECT_SEPARATOR+"bound"+this.ARRAY_SEPARATOR,this.searchInputsParent=this.flightTicket,this.searchInputs=this.searchInputsParent+this.OBJECT_SEPARATOR+"searchInputs",this.userParent=this.OBJECT_SEPARATOR,this.user="user"+this.ARRAY_SEPARATOR,this.cartParent=this.OBJECT_SEPARATOR,this.cart="cart",this.cartItem=this.cart+this.OBJECT_SEPARATOR+"item"+this.ARRAY_SEPARATOR,this.cartPrice=this.cart+this.OBJECT_SEPARATOR+"price",this.transactionParent=this.OBJECT_SEPARATOR,this.transaction="transaction",this.transactionItem=this.transaction+this.OBJECT_SEPARATOR+"item"+this.ARRAY_SEPARATOR,this.transactionTotal=this.transaction+this.OBJECT_SEPARATOR+"total",this.transactionPayment=this.transaction+this.OBJECT_SEPARATOR+"payment"},$destructor:function(){},$prototype:{getVersion:function(){return this.DIGITAL_DATA_VERSION},getSessionId:function(){return this.getDigitalDataLocator(this.context).sessionID},getPageInstanceIdParent:function(){return this.getDigitalDataLocator(this.pageInstanceIdParent)},getPageInstanceId:function(){return this.getDigitalDataLocator(this.pageInstanceId)},getEventParent:function(){return this.getDigitalDataLocator(this.eventParent)},getEvent:function(){return this.getDigitalDataLocator(this.event)},getContextParent:function(){return this.getDigitalDataLocator(this.contextParent)},getContext:function(){return this.getDigitalDataLocator(this.context)},getContextSite:function(){return this.getDigitalDataLocator(this.context)},getPageInfoParent:function(){return this.getDigitalDataLocator(this.pageInfoParent)},getPageInfo:function(){return this.getDigitalDataLocator(this.pageInfo)},getPageCategoryParent:function(){return this.getDigitalDataLocator(this.pageCategoryParent)},getPageCategory:function(){return this.getDigitalDataLocator(this.pageCategory)},getFlightTicketParent:function(){return this.getDigitalDataLocator(this.flightTicketParent)},getFlightTicket:function(){return this.getDigitalDataLocator(this.flightTicket)},getFlightTicketBoundParent:function(){return this.getDigitalDataLocator(this.flightTicketBoundParent)},getFlightTicketBound:function(){return this.getDigitalDataLocator(this.flightTicketBound)},getFlightTicketBoundByIndex:function(t){return this.getDigitalDataLocator(this.flightTicketBound+"."+t)},getSearchInputsParent:function(){return this.getDigitalDataLocator(this.searchInputsParent)},getSearchInputs:function(){return this.getDigitalDataLocator(this.searchInputs)},getUserParent:function(){return this.getDigitalDataLocator(this.userParent)},getUser:function(){return this.getDigitalDataLocator(this.user)},getProductParent:function(){return this.getDigitalDataLocator(this.productParent)},getProduct:function(){return this.getDigitalDataLocator(this.product)},getCartParent:function(){return this.getDigitalDataLocator(this.cartParent)},getCart:function(){return this.getDigitalDataLocator(this.cart)},getCartItemParent:function(){return this.getDigitalDataLocator(this.cart)},getCartItem:function(){return this.getDigitalDataLocator(this.cartItem)},getCartPriceParent:function(){return this.getDigitalDataLocator(this.cart)},getCartPrice:function(){return this.getDigitalDataLocator(this.cartPrice)},getTransaction:function(){return this.getDigitalDataLocator(this.transaction)},getTransactionItemParent:function(){return this.getDigitalDataLocator(this.transaction)},getTransactionItem:function(){return this.getDigitalDataLocator(this.transactionItem)},getTransactionTotalParent:function(){return this.getDigitalDataLocator(this.transaction)},getTransactionTotal:function(){return this.getDigitalDataLocator(this.transactionTotal)},getTransactionPaymentParent:function(){return this.getDigitalDataLocator(this.transaction)},getTransactionPayment:function(){return this.getDigitalDataLocator(this.transactionPayment)},getProductInfo:function(t){return this.getProduct()[t]&&this.getProduct()[t].productInfo},getProductCategory:function(t){return this.getProduct()[t]&&this.getProduct()[t].category},initParent:function(t){t=t||{}},getDigitalDataLocator:function(t){var e=[];if("string"!=typeof t)return this.$logError("getDigitalDataLocator method needs a String as a parameter %1",[this.$classpath]),!1;if("."!==t&&(e=t.split("."),!e))return this.$logError("getDigitalDataLocator method The provider parameter is not correct %1",[this.$classpath]),!1;this.isDigitalData()||(digitalData={});for(var i=digitalData,n=0;n<e.length;n++)i=this.__getProperty(i,e[n]);return i},__getProperty:function(t,e){return"[]"===e.substr(e.length-2)?(e=e.substr(0,e.length-2),t[e]||(t[e]=[])):t[e]||(t[e]={}),t[e]},getDigitalData:function(){return digitalData},isDigitalData:function(){return window.digitalData}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/PageAnalytics.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.PageAnalytics",$constructor:function(t){this.mappingAnalytics=t},$prototype:{buildPage:function(t,e,i,n){var s=this.mappingAnalytics.getPageInstanceIdParent();this._setPageInstanceId(s,t),s=this.mappingAnalytics.getPageInfo(),this._setPageId(s,t),this._setPageName(s,e),this._setPageChannel(s,n),s=this.mappingAnalytics.getPageCategory(),this._setPagePrimaryCategory(s,i)},_setPageInstanceId:function(t,e){this.mappingAnalytics.initParent(t),t.pageInstanceID=e},_setPageId:function(t,e){this.mappingAnalytics.initParent(t),t.pageID=e},_setPageName:function(t,e){this.mappingAnalytics.initParent(t),t.pageName=e},_setPageChannel:function(t,e){this.mappingAnalytics.initParent(t),t.channel=e},_setPagePrimaryCategory:function(t,e){this.mappingAnalytics.initParent(t),t.primaryCategory=e}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/PassengerAnalytics.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.PassengerAnalytics",$dependencies:["plnextv2.utils.DateUtils","plnextv2.utils.analytics.AnalyticsUtils"],$statics:{PSPT_DocumentType:"P",KNWT_DocumentType:"K",REDN_DocumentType:"R",VISA_DocumentType:"V"},$constructor:function(t){this._analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils,this.mappingAnalytics=t},$prototype:{buildPassengerList:function(t){eBaDataLayer.passengers=[],eBaDataLayer.passengerList=[],this.buildDigitalDataUserList(t);for(var e=0,i=0;i<t.length;i++)for(var n=t[i].listTravellerTypeRequested,s=0;s<n.length;s++)null!==t[i].travellersNumber&&(eBaDataLayer.passengers[e]={},eBaDataLayer.passengers[e].pax_type=t[i].travellerCode,eBaDataLayer.passengers[e].nb_pax_type=t[i].travellersNumber),eBaDataLayer.passengerList[e]={},eBaDataLayer.passengerList[e].pax_type=t[i].travellerCode,eBaDataLayer.passengerList[e].first_name=n[s].firstName,eBaDataLayer.passengerList[e].last_name=n[s].lastName,eBaDataLayer.passengerList[e].traveller_id=n[s].travellerId,n[s].listFrequentFlyer&&n[s].listFrequentFlyer.length>0&&(eBaDataLayer.passengerList[e].frequent_flyer={},eBaDataLayer.passengerList[e].frequent_flyer.ff_number=n[s].listFrequentFlyer[0].FREQ_Number,eBaDataLayer.passengerList[e].frequent_flyer.ff_program=n[s].listFrequentFlyer[0].FREQ_Airline,eBaDataLayer.passengerList[e].frequent_flyer.tier_level=n[s].listFrequentFlyer[0].FREQ_Level),e++},buildDetailedInformationForPax:function(t){for(var e=this.mappingAnalytics.getUser(),i=0;i<t.travellerInfoList.length;i++)for(var n=t.travellerInfoList[i],s=0;s<eBaDataLayer.passengerList.length;s++){var a=eBaDataLayer.passengerList[i];a.traveller_id===n.travellerId&&(a.title=n.identity.titleCode,n.identityInfo.IDEN_Gender&&(a.gender=n.identityInfo.IDEN_Gender),n.identity.dateOfBirth&&(a.date_of_birth=plnextv2.utils.DateUtils.formatDate(new Date(n.identity.dateOfBirth),"dd/MM/yyyy"))),e[i].travellerID===parseInt(n.travellerId)&&this._analyticsUtils.getDigitalDataParameters().DATA_PII&&this._insertDigitalDataTravellerDetails(n,i)}},_insertDigitalDataTravellerDetails:function(t,e){var i=this.mappingAnalytics.getUser();t.identity&&(t.identity.titleCode&&(i[e].title=t.identity.titleCode),t.identity.dateOfBirth&&(i[e].dateOfBirth=plnextv2.utils.DateUtils.formatDate(new Date(t.identity.dateOfBirth),"dd/MM/yyyy"))),t.identityInfo&&(t.identityInfo.IDEN_Gender&&(i[e].gender=t.identityInfo.IDEN_Gender),t.identityInfo.IDEN_Nationality&&(i[e].nationality=t.identityInfo.IDEN_Nationality))},buildDigitalDataUserList:function(t){for(var e=this.mappingAnalytics.getUser(),i=0,n=plnextv2.utils.context.AppContext.getPageData(),s=this._analyticsUtils.getDigitalDataParameters(),a=0;a<t.length;a++)for(var r=t[a].listTravellerTypeRequested,o=0;o<r.length;o++)e[i]=e[i]||{},e[i].travellerID=r[o].travellerId,e[i].passengerTypeCode=t[a].travellerCode,this._addDigitalDataUserLoyaltyProgram(r[o].listFrequentFlyer,i,s),s.DATA_PII&&this._addDigitalDataPersonalInfo(n,e,i,r[o]),i++;e.length>i&&e.splice(i)},_addDigitalDataPersonalInfo:function(t,e,i,n){this.__setDigitalDataDataPersonalNames(e,i,n),this.__setDigitalDataAdditionalInformation(t,e,i,n)},__setDigitalDataDataPersonalNames:function(t,e,i){t[e].lastName=i.lastName,t[e].firstName=i.firstName},__setDigitalDataUserEmail:function(t,e){var i=this.mappingAnalytics.getUser();t.business.FareReview&&t.business.FareReview.contactInformation&&t.business.FareReview.contactInformation.Email&&(i[e].email=t.business.FareReview.contactInformation.Email)},buildFrequentFlyerData:function(t){var e=t.Travellers;eBaDataLayer.milesBalance=[];for(var i=0;i<e.length;i++){var n=e[i].FrequentFlyer;if(null!=n)for(var s=0;s<n.length;s++){var a={freq_num:n[s].FREQ_Number,freq_balance:n[s].FREQ_Miles};eBaDataLayer.milesBalance.push(a)}}},_addDigitalDataUserLoyaltyProgram:function(t,e,i){var n=this.mappingAnalytics.getUser();if(t){n[e].loyaltyProgram=n[e].loyaltyProgram||[];for(var s=0,a=t.length;a>s;s++)n[e].loyaltyProgram[s]||(n[e].loyaltyProgram[s]={}),n[e].loyaltyProgram[s].program=t[s].FREQ_Airline,i.DATA_PII&&(n[e].loyaltyProgram[s].number=t[s].FREQ_Number)}},_addDigitalDataUserDocumentNumberTicket:function(t,e){if(this.mappingAnalytics.isDigitalData()){var i=this.mappingAnalytics.getUser();i[t].eTicket||(i[t].eTicket=[]),i[t].eTicket.push({ticketNumber:e})}},updateTravellerList:function(t){if(this.mappingAnalytics.isDigitalData())for(var e=this.mappingAnalytics.getUser(),i=0;i<t.length;i++)this.__updateTraveller(t[i],e)},__updateTraveller:function(t,e){for(var i=0;i<e.length;i++)e[i].travellerID===parseInt(t.Id)&&this._analyticsUtils.getDigitalDataParameters().DATA_PII&&this._setTravellerIdentityInformation(t,i)},_setTravellerIdentityInformation:function(t,e){var i=this.mappingAnalytics.getUser(),n=this.getTravellerIdentityInformation(t,i[e].passengerTypeCode);n&&(n.IDEN_TitleCode&&(i[e].title=n.IDEN_TitleCode),n.IDEN_Gender&&(i[e].gender=n.IDEN_Gender),n.IDEN_DateOfBirth&&(i[e].dateOfBirth=plnextv2.utils.DateUtils.formatDate(new Date(n.IDEN_DateOfBirth),"dd/MM/yyyy")),n.IDEN_Nationality&&(i[e].nationality=n.IDEN_Nationality))},getTravellerIdentityInformation:function(t,e){var i=t.IdentityInformation;return"INF"===e&&(i=t.Infants&&t.Infants[0]&&t.Infants[0].IdentityInformation),i},__setDigitalDataAdditionalInformation:function(t,e,i,n){this.__setDigitalDataUserEmail&&this.__setDigitalDataUserEmail(t,i),this.__setDigitalDataContactInformation&&this.__setDigitalDataContactInformation(t,i),this.__setDigitalDataDocument&&this.__setDigitalDataDocument(t,e,i,n),this.__setDigitalDataAddress&&this.__setDigitalDataAddress(t,e,i,n),this._setIdenMiddleName&&this._setIdenMiddleName(t,e,i,n),this._setSuffix&&this._setSuffix(e,i)}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/PaymentAnalytics.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.PaymentAnalytics",$dependencies:["plnextv2.utils.analytics.AnalyticsUtils"],$statics:{DEFAULT_DEVICE:"Desktop",INSTALL_ISI:"ISI",INSTALL_ISF:"ISF",INSTALL_ISN:"ISN",CREDIT_CARD:"CC",PAY_LATER:"PLCC",AMOP:"AMOP",PAY_LATER_DES:"PAYLATER"},$constructor:function(t){this._analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils,this.mappingAnalytics=t},$prototype:{_addDigitalDataTransactionItems:function(){digitalData.transaction||(digitalData.transaction={}),digitalData.transaction.item||(digitalData.transaction.item=[]);for(var t=0,e=digitalData.product.length;e>t;t++){var i="confirmed";digitalData.product[t].ancillaryService&&(i=digitalData.product[t].ancillaryService.status),digitalData.transaction.item[t]={productInfo:{productID:digitalData.product[t].productInfo.productID},status:i}}},_getCCCityFromReservation:function(t){var e=t&&t.liTravellerInfo[0];return e&&e.addressList&&e.addressList[0]&&e.addressList[0].city},_getCCCountryFromReservation:function(t){var e=t&&t.liTravellerInfo[0];return e&&e.addressList&&e.addressList[0]&&e.addressList[0].country},_setDigitalDataPayment:function(t){var e=t.paymentInformation.paymentTypeCode,i="";e===this.AMOP&&(e=t.paymentInformation.AMOPConfirmation.code,t.paymentInformation.AMOPConfirmation.asyncReference?i=t.paymentInformation.AMOPConfirmation.asyncReference.id:t.paymentInformation.AMOPConfirmation.asnInfo?i=t.paymentInformation.AMOPConfirmation.asnInfo.reference.id:t.paymentInformation.AMOPConfirmation.govInfo&&(i=t.paymentInformation.AMOPConfirmation.govInfo.referenceLetter.number));var n=t.paymentInformation.creditCardInformation?t.paymentInformation.creditCardInformation[0].companyCode:"",s=this.mappingAnalytics.getTransaction();s.payment={methodOfPayment:e,paymentReference:i,creditCardType:n};var a=this.mappingAnalytics.getTransactionPayment();if(this._analyticsUtils.getDigitalDataParameters().DATA_PAYMENT){var r=t.paymentInformation.installmentInfo;r&&r.numberOfInstallments&&(a.installment=this._setDigitalDataInstallment(r)),"CC"===e&&(a.billingCity=this._getCCCityFromReservation(t),a.billingCountry=this._getCCCountryFromReservation(t))}},_setDigitalDataProfile:function(){},_setDigitalDataInstallment:function(t){var e=t.installmentPlanSummary;return e&&e[0]?this._getInstallment(t):{}},_getInstallment:function(t){var e=t.installmentPlanSummary,i={};if(e&&e[0]){var n=e[0];i.plan=t.numberOfInstallments;for(var s=n.monetaryDetails,a=0;a<s.length;a++){var r=s[a].amount.value,o=s[a].amount.currency.code||"";switch(s[a].type){case this.INSTALL_ISI:i.interest=r,i.currency=o;break;case this.INSTALL_ISF:i.firstMonthAmount=r;break;case this.INSTALL_ISN:default:i.nextMonthAmount=r}}}return i}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/PriceDetailsAnalytics.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.PriceDetailsAnalytics",$dependencies:["plnextv2.utils.analytics.AnalyticsUtils","plnextv2.utils.DateUtils"],$statics:{FORMAT_DATE_CART:"dd/MM/yyyy",FUEL_SURCHARGE_TAX_YQ:"YQ",FUEL_SURCHARGE_TAX_YR:"YR"},$constructor:function(t){this._analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils,this.dateUtils=plnextv2.utils.DateUtils,this.digitalDataParameters={},this.mappingAnalytics=t},$prototype:{buildPriceData:function(t){if(t.Price){var e=t.Price;if(eBaDataLayer.price_details={},e.totalTaxes&&(eBaDataLayer.tax_amount=e.totalTaxes.amount,eBaDataLayer.price_details.tax_amount=e.totalTaxes.amount),e.bookingFees&&(eBaDataLayer.service_fee=e.bookingFees.amount,eBaDataLayer.price_details.service_fee=e.bookingFees.amount),e.baseFare&&(eBaDataLayer.base_fare_price=e.baseFare.amount,eBaDataLayer.price_details.base_fare_price=e.baseFare.amount),e.totalAmount&&(eBaDataLayer.total_price=e.totalAmount.amount,eBaDataLayer.price_details.total_price=e.totalAmount.amount),null!=e.listTravellerPrice){var i=this.__buildFuelSurcharge(e.listTravellerPrice);eBaDataLayer.fuel_surcharge=i,eBaDataLayer.price_details.fuel_surcharge=i}if(null!=e.currency&&null!=e.currency.code&&(eBaDataLayer.currency=e.currency.code,eBaDataLayer.price_details.currency_code=e.currency.code),e.milesAndCashMergedFlow&&e.milesAndCashMergedFlow.nonConvertedAmount&&!isNaN(e.milesAndCashMergedFlow.nonConvertedAmount.amount)&&e.totalAmount&&!isNaN(e.totalAmount.amount)){var n=e.airTotalPrice.amount-e.milesAndCashMergedFlow.nonConvertedAmount.amount,s=n.toFixed(2);eBaDataLayer.price_details.cash_paid_in_miles=parseFloat(s)}this.__buildAwardPriceData(e),this.__buildServicesPriceData(e),this.__buildInsurancePriceData(e),this.__buildDiscountPriceData(e),this.__buildRebookingPriceData(e),this.__buildMilesAndCashPriceData(e),this.setDigitalDataCartPrice(e),this.setDigitalDataRebookingPrice(e)}t.RefundPreviewView&&this._analyticsUtils.getDigitalDataParameters().DATA_PRICE_DETAILS&&this.setDigitalDataRefundPrice(t)},buildMilesAndCashSliderData:function(t){null!=t.listRanks&&t.listRanks.length>0&&(eBaDataLayer.miles_and_cash_slider_details={},null!=t.listRanks[1]&&(eBaDataLayer.miles_and_cash_slider_details.first_rank_miles_amount=t.listRanks[1].milesAmount))},updateMilesAndCash:function(t){if(this.mappingAnalytics.isDigitalData()){var e=this.mappingAnalytics.getCartPrice();e.totalPrice=t.totalPrice,e.totalMiles=t.totalMiles,e.cashPaidInMiles=t.cashPaidInMiles,t.taxes&&(e.taxAmount=t.taxes)}},setDigitalDataBoundPrice:function(t,e,i,n){var s=e,a=this.getRecoBoundsAmount(t,i);s>a.length-1&&(s=a.length-1);var r=this.getRecoBoundAmount(t,s,i),o={totalPrice:r.totalAmount,currency:n.code,baseFarePrice:r.amountWithoutTaxAndFee,serviceFee:this._getServiceFee(r.serviceFee,r.obFee),taxAmount:r.tax,fuelSurcharge:r.fuelAmountValue||this.__addFuelSurchargeValue(r.listTaxes),rebookingDetails:{changeFees:0,balance:0}};if(o.rebookingDetails.changeFees=r.rebookingFees||0,o.rebookingDetails.balance=r.rebookBalance||0,this._analyticsUtils.getDigitalDataParameters().DATA_PRICE_DETAILS){var l=this.mappingAnalytics.getFlightTicketBoundByIndex(e);l.price=o,l.pricePerTravellerType=this.__setDigitalDataPricePerTravellerSwitch(t,s,n,i)}},__setDigitalDataPricePerTravellerOptimized:function(t,e,i){var n=[],s=t.bounds[e].travellerPrices;if(s)for(var a in s)if(s.hasOwnProperty(a)){var r=s[a];aria.utils.Type.isArray(r)||(n=this.addDigitalDataPricePerTraveller(n,a,r,i.code))}return n},__setDigitalDataPricePerTraveller:function(t,e,i){var n=[];if(t.PNRprices[0].travellerPrices)for(var s=t.PNRprices[0].travellerPrices,a=0;a<s.length;a++){var r=s[a].traveller.travellerCode,o=0,l="";s[a].travellersPrice&&(o=s[a].travellersPrice[0].boundsAmountList[e].amount,l=i.code),n=this.addDigitalDataPricePerTraveller(n,r,o,l)}return n},addDigitalDataPricePerTraveller:function(t,e,i,n){return t.push({passengerTypeCode:e,totalPrice:i,currency:n}),t},setDigitalDataCartPrice:function(t){var e=this.mappingAnalytics.getCart();e.price=this._getDigitalDataPrice(t)},setDigitalDataTotalPrice:function(t){var e=this.mappingAnalytics.getTransaction();e.total=this._getDigitalDataPrice(t);var i=this.mappingAnalytics.getTransactionTotal();if(this._analyticsUtils.getDigitalDataParameters().DATA_PRICE_DETAILS){var n=0;this.mappingAnalytics.getTransaction().payment&&t.installmentInterests&&(n=t.installmentInterests.amount||0),i.installmentInterests=n}},_hasAmountProperty:function(t){return t&&t.amount},_getDigitalDataPrice:function(t){var e={};return e.taxAmount=0,this._hasAmountProperty(t.totalTaxes)&&(e.taxAmount=t.totalTaxes.amount),e.serviceFee=this._getServiceFee(t.bookingFees,t.obFees),e.baseFarePrice=0,this._hasAmountProperty(t.baseFare)&&(e.baseFarePrice=t.baseFare.amount),e.totalPrice=0,this._hasAmountProperty(t.totalAmount)&&(e.totalPrice=t.totalAmount.amount),e.totalMiles=this.__getDigitalTotalMiles(t),e.cashPaidInMiles=0,t.milesAndCash&&t.milesAndCash.milesAmount&&(e.cashPaidInMiles=t.milesAndCash.milesAmount.amount),this._updatePrices(e,t),null!=t.currency&&null!=t.currency.code&&(e.currency=t.currency.code),e},__getDigitalTotalMiles:function(t){var e=0;return this._hasAmountProperty(t.totalMiles)?e=t.totalMiles.amount:t.milesAndCash&&(e=t.milesAndCash.convertedCashMiles),e},_updatePrices:function(t,e){this._analyticsUtils.getDigitalDataParameters().DATA_PRICE_DETAILS&&(t.initialPrice=this._getDigitalDataInitialPrice(e),null!=e.listTravellerPrice&&(t.fuelSurcharge=this.__buildFuelSurcharge(e.listTravellerPrice)),t.insurancePrice||(t.insurancePrice=0),t.AAASPrice||(t.AAASPrice=0))},_getDigitalDataInitialPrice:function(t){var e=0;return this._hasAmountProperty(t.totalAmount)&&(e=t.totalAmount.amount),t.discount&&this._hasAmountProperty(t.discount.discountAmount)&&(e+=t.discount.discountAmount.amount),this._hasAmountProperty(t.totalAmount)&&t.promoCode&&t.promoCode.promotionValue&&(e+=parseFloat(t.promoCode.promotionValue)),e},setDigitalDataRebookingPrice:function(t){if(this._analyticsUtils.getDigitalDataParameters().DATA_PRICE_DETAILS){var e={};e=this.__setDigitalRebookingOldPrice(t,e),e=this.__setDigitalRebookingTotal(t,e),this.__setDigitalRebookingDetailsDefaults(t,e)}},__setDigitalRebookingOldPrice:function(t,e){return e||(e={}),t.oldPrice&&(t.oldPrice.amount&&(e.previousTotal=t.oldPrice.amount),t.oldPrice.currency&&(e.previousCurrency=t.oldPrice.currency.code)),t.totalCollectBalance&&(e.balance=t.totalCollectBalance.amount),t.nonRefundable&&(e.nonRefundableAmount=t.nonRefundable.amount),e},setDigitalDataRefundPrice:function(t){var e={};this.mappingAnalytics.getCartPrice().rebookingDetails&&(e=this.mappingAnalytics.getCartPrice().rebookingDetails),e=this.__setDigitalDataOriginalPrice(t.Price,e);var i=this.__getRefundPreviewPrice(t.RefundPreviewView);i&&(e.newTotal=0,e=this.__setDigitalDataRefundCurrencyPrice(i,e),!e.previousTotal&&i.totalAmountRefunded&&(e.previousTotal=i.totalAmountRefunded,i.penalty&&(e.previousTotal+=-i.penalty)),e.changeFees=i.penalty||0,e.refund=i.totalAmountRefunded||0,e.balance=0,e.nonRefundableAmount=0),this.__setDigitalRebookingDetailsDefaults(t.Price,e)},__getRefundPreviewPrice:function(t){var e,i=t;return t&&t.globalRefundAmounts&&(e=aria.utils.Object.keys(t.globalRefundAmounts)[0]),e&&(i=t.globalRefundAmounts[e]),i},__setDigitalDataRefundCurrencyPrice:function(t,e){return t.currency&&(e.newCurrency=t.currency.code,e.previousCurrency||(e.previousCurrency=t.currency.code)),e},__setDigitalDataOriginalPrice:function(t,e){return e||(e={}),t&&t.totalOriginalAmount&&(e.previousTotal=t.totalOriginalAmount.amount||0,t.totalOriginalAmount.currency&&(e.previousCurrency=t.totalOriginalAmount.currency.code)),e},__setDigitalRebookingTotal:function(t,e){return e||(e={}),t.rebookingTotal&&(e.newTotal=t.rebookingTotal.amount,t.rebookingTotal.currency&&(e.newCurrency=t.rebookingTotal.currency.code),t.rebookingFees&&(e.changeFees=t.rebookingFees.amount),t.totalRefund&&(e.refund=t.totalRefund.amount)),e},__setDigitalRebookingDetailsDefaults:function(t,e){var i=this.__setDigitalRebookingDefaultCurrency(t);e.previousTotal=e.previousTotal||0,e.previousCurrency=e.previousCurrency||i,e.newTotal=e.newTotal||0,e.newCurrency=e.newCurrency||i,e.changeFees=e.changeFees||0,e.refund=e.refund||0,e.balance=e.balance||0,e.nonRefundableAmount=e.nonRefundableAmount||0;var n=this.mappingAnalytics.getCartPrice();n.rebookingDetails=e},__setDigitalRebookingDefaultCurrency:function(t){var e="";return t&&t.currency&&t.currency.code&&(e=t.currency.code),e},__buildAwardPriceData:function(t){null!=t.totalMiles&&null!=t.totalMiles.amount&&(eBaDataLayer.price_details.total_miles=t.totalMiles.amount)},__buildMilesAndCashPriceData:function(t){null!=t.milesAndCash&&null!=t.milesAndCash.milesCost&&(eBaDataLayer.price_details.total_miles=t.milesAndCash.milesCost,eBaDataLayer.price_details.total_cash_paid=t.milesAndCash.nonConvertedAmount.amount,eBaDataLayer.price_details.cash_equivalent_of_miles_spent=t.milesAndCash.milesAmount.amount)},__buildServicesPriceData:function(t){null!=t.totalServices&&null!=t.totalServices.totalAmount&&null!=t.totalServices.totalAmount.amount&&(eBaDataLayer.price_details.AAAS_price=t.totalServices.totalAmount.amount)},__buildInsurancePriceData:function(t){null!=t.totalInsurance&&null!=t.totalInsurance.amount&&(eBaDataLayer.price_details.insurance_price=t.totalInsurance.amount)},__buildDiscountPriceData:function(t){null!=t.discount&&null!=t.discount.discountAmount&&null!=t.discount.discountAmount.amount&&(eBaDataLayer.price_details.initial_price=t.discount.discountAmount.amount)},__buildRebookingPriceData:function(t){null!=t.rebookingTotal&&null!=t.rebookingTotal.amount&&(eBaDataLayer.price_details.new_total=t.rebookingTotal.amount),null!=t.oldPrice&&null!=t.oldPrice.amount&&(eBaDataLayer.price_details.previous_total=t.oldPrice.amount),null!=t.rebookingFees&&null!=t.rebookingFees.amount&&(eBaDataLayer.price_details.change_fees=t.rebookingFees.amount),null!=t.totalCollectBalance&&null!=t.totalCollectBalance.amount&&(eBaDataLayer.price_details.balance_to_pay=t.totalCollectBalance.amount),null!=t.totalRefund&&null!=t.totalRefund.amount&&(eBaDataLayer.price_details.total_to_be_refund=t.totalRefund.amount)},__buildFuelSurcharge:function(t){var e=0,i=t;for(var n in i)if(i[n]&&"undefined"!=typeof i[n].travellerPrice){var s=i[n].travellerPrice;e+=this._fuelSurchargePriceSumm(s)}return this.fixDecimalsOrInteger(e)},fixDecimalsOrInteger:function(t){return t.toString().split(".").length>1?parseFloat(t.toFixed(2)):t},_fuelSurchargePriceSumm:function(t){var e=0;if(t.length&&null!=t[0].taxes&&aria.utils.Type.isArray(t[0].taxes))for(var i in t[0].taxes)e+=this.__addFuelSurchargeValue(t[0].taxes[i]);return e},__addFuelSurchargeValue:function(t){var e=0;for(var i in t)if(t[i]&&t[i].code){var n=t[i].code;!n||n.substr(0,this.FUEL_SURCHARGE_TAX_YQ.length)!==this.FUEL_SURCHARGE_TAX_YQ&&n.substr(0,this.FUEL_SURCHARGE_TAX_YR.length)!==this.FUEL_SURCHARGE_TAX_YR||(e+=t[i].value)}return e},getRecoBoundAmount:function(t,e,i){return i?t.bounds[e]?t.bounds[e].boundAmount:void 0:t.recoAmountList[0].boundsAmountList[e]},getRecoAmount:function(t,e){return e?t.recoAmount:t.recoAmountList[0].recoAmount},getRecoBoundsAmount:function(t,e){return e?t.bounds:t.recoAmountList[0].boundsAmountList},__setDigitalDataPricePerTravellerSwitch:function(t,e,i,n){return n?this.__setDigitalDataPricePerTravellerOptimized(t,e,i):this.__setDigitalDataPricePerTraveller(t,e,i)},_setDigitalDataCartCreationDate:function(t){var e=this.mappingAnalytics.getCart();e.creationDate=this.dateUtils.formatDate(new Date(t.creationDate),this.FORMAT_DATE_CART)},_getServiceFee:function(t,e){var i=this._getPriceAmount(t)||0,n=this._getPriceAmount(e)||0;return this.fixDecimalsOrInteger(i+n)},_getPriceAmount:function(t){return t&&this._hasAmountProperty(t)?t.amount:t}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/SearchAnalytics.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.SearchAnalytics",$dependencies:["plnextv2.utils.DateUtils","plnextv2.utils.DateTimeUtils","plnextv2.utils.analytics.AnalyticsUtils"],$statics:{FORMAT_DATETIME:"yyyy-MM-ddTHH:mm:ss.s",FORMAT_DATE:"yyyy-MM-dd",LIST_COM_FARE_FAMILIES:"SL_COMMERCIAL_FARE_FAMILY"},$constructor:function(t){this._dateUtils=plnextv2.utils.DateUtils,this._dateTimeUtils=plnextv2.utils.DateTimeUtils,this._analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils,this.mappingAnalytics=t},$prototype:{buildAdditionalSearchData:function(t,e){t.Search?this.buildDataFromSearch(t,e):t.ListTimeTable&&this.buildDataFromTimeTable(t)},buildDataFromSearch:function(t,e){eBaDataLayer.search={flights:[]},eBaDataLayer.user_logged=""!==t.Search.userFirstName?!0:!1;var i=t.Search,n=this.mappingAnalytics.getSearchInputs();this._setDateTime(n),this._setTripType(n,i.tripType);var s=i.dateRange;i.destinations&&i.destinations.length&&i.destinations[0].dateRange&&(s=i.destinations[0].dateRange.value||0),this._setFlexibleDate(n,s),i.listTravellerTypeInfo?this._setTravellerTypeInfo(n,i.listTravellerTypeInfo):this._addTravellerTypeInfo(t,n),this._setCommercialFareFamily(n,i.commercialFareFamilies),this._setBound(n,i.destinations),this._setCorporateCode(n,i,e),this._setCabin(n,i.cabin);for(var a=0;a<i.destinations.length;a++){var r={departure:{location_code:i.destinations[a].beginLocation.locationCode},arrival:{location_code:i.destinations[a].endLocation.locationCode}};eBaDataLayer.search.flights.push(r)}},_addTravellerTypeInfo:function(t,e){if(t&&t.FareReview&&t.FareReview.tripSummary&&t.FareReview.tripSummary.listTravellerTypeInfo){e.traveller=[];for(var i=t.FareReview.tripSummary.listTravellerTypeInfo,n=0;n<i.length;n++){var s={};s.passengerTypeCode=i[n].travellerCode,s.numberOfPassengers=i[n].travellersNumber,e.traveller.push(s)}}},_createCommercialFareFamily:function(t){var e={code:t};return this._analyticsUtils.getDigitalDataParameters().DATA_LOCALIZATION&&(e.name=this._analyticsUtils.getLocalizedLabel(this.LIST_COM_FARE_FAMILIES,t)||""),e},_setDigitalCorporateCode:function(t,e,i){this.mappingAnalytics.initParent(t),!i&&e.corporateCode?t.corporateCode=e.corporateCode:i&&(t.corporateCode=i)},buildDataFromTimeTable:function(t){var e={departure:{location_code:t.ListTimeTable.originAndDestination.beginLocation.locationCode},arrival:{location_code:t.ListTimeTable.originAndDestination.endLocation.locationCode}};eBaDataLayer.search.flights.push(e)},_setDateTime:function(t){if(this.mappingAnalytics.initParent(t),!t.dateTime){var e=new Date;t.dateTime=this._dateUtils.formatDate(e,this.FORMAT_DATETIME)+this._dateTimeUtils.getTimeZoneString(new Date(e))}},_setTripType:function(t,e){this.mappingAnalytics.initParent(t),e&&(t.tripType=e)},_setFlexibleDate:function(t,e){this.mappingAnalytics.initParent(t),t.flexibleDateValue||(t.flexibleDateValue=e||0)},_setTravellerTypeInfo:function(t,e){this.mappingAnalytics.initParent(t),t.traveller=[];for(var i=0;i<e.length;i++){var n={};n.passengerTypeCode=e[i].travellerCode,n.numberOfPassengers=e[i].travellersNumber,t.traveller.push(n)}},_setCommercialFareFamily:function(t,e){this.mappingAnalytics.initParent(t),(e.length||!t.commercialFareFamily)&&(t.commercialFareFamily=[]);for(var i=0;i<e.length;i++){var n=this._createCommercialFareFamily(e[i].code);t.commercialFareFamily.push(n)}},_setBound:function(t,e){this.mappingAnalytics.initParent(t),t.bound||(t.bound=[]);for(var i=0;i<e.length;i++){t.bound[i]||(t.bound[i]={},t.bound[i].departure={},t.bound[i].arrival={});var n=this._dateUtils.formatDate(new Date(e[i].beginDate),this.FORMAT_DATE),s=null;e[i].endDate&&(s=this._dateUtils.formatDate(new Date(e[i].endDate),this.FORMAT_DATE)),aria.utils.Object.isEmpty(e[i].beginLocation)||(t.bound[i].departure.cityCode=e[i].beginLocation.cityCode,t.bound[i].departure.locationCode=e[i].beginLocation.locationCode,t.bound[i].departure.date=n),aria.utils.Object.isEmpty(e[i].endLocation)||(t.bound[i].arrival.cityCode=e[i].endLocation.cityCode,t.bound[i].arrival.locationCode=e[i].endLocation.locationCode,t.bound[i].arrival.date=s),this._setBoundAdditionals&&(t.bound[i]=this._setBoundAdditionals(t.bound[i],e[i]))}},_setCorporateCode:function(t,e,i){this.mappingAnalytics.initParent(t),t.corporateCode||(!i&&e.corporateCode?t.corporateCode=e.corporateCode:i&&(t.corporateCode=i))},_setCabin:function(t,e){this.mappingAnalytics.initParent(t),e&&(t.cabin=e)},buildDynamicWaiverData:function(){}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/schemes/DigitalDataScheme.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.schemes.DigitalDataScheme",$singleton:!0,$statics:{SCHEMA:{"1.0.0":{$schema:"http://json-schema.org/draft-04/schema#",version:"1.0.0",$ref:"#/definitions/ROOT",skipValidation:!1,definitions:{ROOT:{description2:"TO BE REVIEWED - Schema proposal based on recent feedback.",type:"object",properties:{version:{type:"string",description:"Version of the data layer",regExp:"[0-9]+.[0-9]+.[0-9]+",example:"1.0.0",page:"ALL",jiraLink:"NUI-10722"},pageInstanceID:{type:"string",description:"Current page/state identifier",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL",jiraLink:"NUI-10722"},user:{$ref:"#/definitions/array_user"},transaction:{$ref:"#/definitions/transaction"},page:{$ref:"#/definitions/page"},product:{title:"product",type:"array",items:{$ref:"#/definitions/product"}},cart:{$ref:"#/definitions/cart"},event:{$ref:"#/definitions/array_event"}},required:["version","pageInstanceID","page","product","cart","event"],additionalProperties:!1},user:{type:"object",page:"ALL",properties:{travellerID:{type:"number",description:"Id of the traveller within the cart",regExp:"[0-9]",example:"1",page:"ALL",jiraLink:"NUI-10722"},passengerTypeCode:{type:"string",description:"Passenger type code (PTC)",regExp:"[A-Z0-9]{3}",example:"ADT",page:"ALL",jiraLink:"NUI-10722"},lastName:{type:"string",description:"Last name of the traveller",regExp:"[A-Z]+",example:"Doe",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"},firstName:{type:"string",description:"First name of the traveller",regExp:"[A-Z]+",example:"John",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"},email:{type:"string",format:"email",description:"Main mail address (so associated to the first traveller by default)",regExp:"[A-Z@.]+",example:"noreply@amadeus.com",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"},title:{type:"string",description:"Title of the traveller",regExp:"[A-Z]+",example:"Mr",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},dateOfBirth:{type:"string",description:"Data of birth of the traveller",regExp:"dd/MM/yyyy",example:"12-31-13",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},nationality:{type:"string",description:"Nationality of the traveller",regExp:"[A-Z]+",example:"FR",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},gender:{type:"string",comment:"Values: Male/Female",description:"Gender of the traveller",regExp:"[A-Z]",example:"Male",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},loyaltyProgram:{title:"loyaltyProgram",type:"array",items:{type:"object",page:"ALL",jiraLink:"NUI-10722",additionalProperties:!1,properties:{program:{type:"string",description:"Usually associated airline code",regExp:"[A-Z0-9]{2}",example:"1A",page:"ALL",jiraLink:"NUI-10722"},number:{type:"string",description:"Frequent flyer number",regExp:"[A-Z0-9]+",example:"123456789",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"}}}},eTicket:{title:"eTicket",type:"array",items:{type:"object",page:"CONF,RTPL",jiraLink:"NUI-10722",properties:{ticketNumber:{type:"string",description:"Array of e-ticket numbers associated to the traveller id",regExp:"[A-Z0-9]+",page:"CONF,RTPL",jiraLink:"NUI-10722",example:"1"}},required:["ticketNumber"],additionalProperties:!1}}},required:["travellerID","passengerTypeCode"],additionalProperties:!1},productInfo:{title:"productInfo",type:"object",page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722",properties:{productID:{type:"number",description:"Id of a product",regExp:"[0-9]+",example:"8",page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"}},required:["productID"],additionalProperties:!1},item:{type:"object",page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722",properties:{productInfo:{$ref:"#/definitions/productInfo"},status:{type:"string",description:"Status of the product as paid, pre-booked, guaranteed, waitlist\u2026",regExp:"[A-Z0-9]+",example:"Confirmed",page:"transaction: CONF,RTPL",jiraLink:"NUI-10722"}},required:["productInfo"],additionalProperties:!1},alias_price:{description2:"TO BE REVIEWED - Proposal based on recent feedback.",type:"object",page:"cart : FARE,ALPI bound : AVAIL",jiraLink:"NUI-10722",activation:"bound : DATA_PRICE_DETAILS",properties:{totalPrice:{type:"number",description:"Total price of the booking",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"cart : FARE,ALPI bound : AVAIL",jiraLink:"NUI-10722",activation:"bound: DATA_PRICE_DETAILS"},totalMiles:{type:"number",description:"Miles amount",regExp:"[0-9]+",example:"2000",page:"AVAIL",jiraLink:"NUI-10739",activation:"DATA_PRICE_DETAILS"},cashPaidInMiles:{type:"number",description:"Cash amount paid by the miles",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},currency:{type:"string",description:"Currency code",regExp:"[A-Z]{3}",example:"EUR",page:"FARE,ALPI",jiraLink:"NUI-10722"},initialPrice:{type:"number",description:"Initial price when a discount is applied on the totalPrice",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-10735",activation:"DATA_PRICE_DETAILS"},baseFarePrice:{type:"number",description:"Base fare of the flight segments",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-10722"},taxAmount:{type:"number",description:"Tax amout",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},fuelSurcharge:{type:"number",description:"Sum of fuel surcharges for all travellers",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},serviceFee:{type:"number",description:"Booking fee",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"cart: FARE,ALPI transaction.total: CONF,RTPL",jiraLink:"NUI-10722"},AAASPrice:{type:"number",description:"Total amount of all ancillary services",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"cart: PURC / transaction: CONF,RTPL",jiraLink:"NUI-10986",activation:"DATA_PRICE_DETAILS"},rebookingDetails:{title:"rebookingDetails",type:"object",page:"cart: FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS",properties:{changeFees:{type:"number",description:"Change fees",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},balance:{type:"number",description:"Balance to pay",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["changeFees","balance"],additionalProperties:!1}},additionalProperties:!1},transaction:{title:"transaction",description2:"TO BE REVIEWED - Proposal based on recent feedback.",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10722",properties:{item:{$ref:"#/definitions/array_item"},payment:{title:"payment",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10722",properties:{methodOfPayment:{type:"string",description:"Code of the method of payment",regExp:"[A-Z0-9]+",example:"CC",page:"CONF,RTPL"},paymentReference:{type:"string",description:"Reference from the payment provider",regExp:"[A-Z0-9]+",example:"123456789",page:"CONF,RTPL",jiraLink:"NUI-10722"},creditCardType:{description2:"!!! TO BE RENAMED: more abstract name needed (in roder to be able to store not only CC type, but also AMOP)",type:"string",description:"Type of credit card (credit card vendor)",regExp:"[A-Z0-9]+",example:"VI",page:"CONF,RTPL",jiraLink:"NUI-10722"},billingCity:{type:"string",description:"City name of the billing address",regExp:"[A-Z]+",example:"PARIS",page:"CONF,RTPL",jiraLink:"NUI-10742",activation:"DATA_PAYMENT"},billingCountry:{type:"string",description:"Country code of the billing address",regExp:"[A-Z]{2}",example:"FR",page:"CONF,RTPL",jiraLink:"NUI-10742",activation:"DATA_PAYMENT"},installment:{title:"installment",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT",properties:{plan:{type:"number",description:"Number of instalment to pay the trip",regExp:"[0-9]+",example:"5",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},interest:{type:"number",description:"Amount of interest",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},currency:{type:"string",description:"Currency for the instalment",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},firstMonthAmount:{type:"number",description:"First month amount",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},nextMonthAmount:{type:"number",description:"Next months amount",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"}},required:["plan","interest","currency"],additionalProperties:!1}},required:["methodOfPayment","paymentReference","creditCardType"],additionalProperties:!1},total:{$ref:"#/definitions/alias_total"}},additionalProperties:!1},category:{title:"category",type:"object",page:"ALL",jiraLink:"NUI-10722",properties:{primaryCategory:{type:["string","null"],description:"Category of the product or flow",regExp:"[A-Z]+",example:"Flight Ticket",page:"ALL",jiraLink:"NUI-10722"}},required:["primaryCategory"],additionalProperties:!1},page:{title:"page",type:"object",page:"ALL",jiraLink:"NUI-10722",properties:{pageInfo:{title:"pageInfo",type:"object",page:"ALL",jiraLink:"NUI-10722",properties:{pageID:{type:"string",description:"Id of the page/state",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL"},pageName:{type:"string",description:"Name of the page/state in English",regExp:"[A-Z]+",example:"Flex pricer OWD availability",page:"ALL",jiraLink:"NUI-10722"},channel:{type:"string",description:"Digital touchpoint",regExp:"[A-Z0-9]+",example:"eRetail",page:"ALL",jiraLink:"NUI-10722"}},required:["pageID","pageName","channel"],additionalProperties:!1},category:{$ref:"#/definitions/category"},context:{$ref:"#/definitions/context"}},required:["pageInfo","category"],additionalProperties:!1},upsell:{title:"upsell",type:"object",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",properties:{otherFareFamily:{title:"otherFareFamily",type:"array",items:{type:"object",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",properties:{fareFamilyCode:{type:"string",description:"Fare family code",regExp:"[A-Z0-9]+",example:"BUS",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL"},fareFamilyName:{type:"string",description:"Fare family name (localized)",regExp:"[A-Z0-9]+",example:"Business",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},price:{type:"number",description:"Price if any",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL"}},required:["fareFamilyCode"],additionalProperties:!1}},teaser:{title:"teaser",type:"object",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",properties:{fareFamilyCode:{type:"string",description:"Fare family code of the one displayed in the upsell teaser",regExp:"[A-Z0-9]+",example:"FIRST",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL"},fareFamilyName:{type:"string",description:"Fare family name (localized)",regExp:"[A-Z0-9]+",example:"First",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"}},additionalProperties:!1}},required:["otherFareFamily"],additionalProperties:!1},segment:{type:"object",page:"AVAIL",jiraLink:"NUI-10722",properties:{departure:{$ref:"#/definitions/alias_city"},arrival:{$ref:"#/definitions/alias_city"},leg:{$ref:"#/definitions/array_leg"},cabin:{type:"string",description:"Cabin code",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10722"},bookingClass:{type:"string",description:"RBD (Reservation Booking Designator)",regExp:"[A-Z]",example:"E",page:"AVAIL",jiraLink:"NUI-10722"},marketingFlightNumber:{type:"string",description:"Flight number of the marketing carrier",regExp:"[0-9]{3-4}",example:"1234",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingAirlineCode:{type:"string",description:"Airline code of the marketing carrier",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingOperationalSuffix:{type:"string",description:"Operational suffix if any",regExp:"[A-Z]",example:"A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},operatedBy:{$ref:"#/definitions/operatedBy"},segmentID:{type:"number",description:"Id of the segment on which the service is booked (present only if the service is booked at segment level)",regExp:"[0-9]",example:"1",page:"PURC",jiraLink:"NUI-10986"}},required:["departure","arrival"],additionalProperties:!1},bound:{type:"object",page:"ALL",jiraLink:"NUI-10721",properties:{boundID:{type:"number",description:"Id of the bound (starting from 1)",regExp:"[0-9]+",example:"8",page:"AVAIL",jiraLink:"NUI-10722"},fareFamilyCode:{type:"string",description:"Fare family code",regExp:"[A-Z0-9]+",example:"BUS",page:"AVAIL",jiraLink:"NUI-10722"},fareFamilyName:{type:"string",description:"Fare family name (localized)",regExp:"[A-Z0-9]+",example:"Business",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},departure:{$ref:"#/definitions/alias_city"},arrival:{$ref:"#/definitions/alias_city"},price:{$ref:"#/definitions/alias_price"},pricePerTravellerType:{title:"pricePerTravellerType",type:"array",items:{type:"object",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS",properties:{passengerTypeCode:{type:"string",description:"Passenger type code (PTC)",regExp:"[A-Z0-9]{3}",example:"ADT",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},totalPrice:{type:"number",description:"Total price of the booking",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},currency:{type:"string",description:"Currency code",regExp:"[A-Z]{3}",example:"EUR",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},required:["passengerTypeCode","totalPrice","currency"],additionalProperties:!1}},upsell:{$ref:"#/definitions/upsell"},segment:{$ref:"#/definitions/array_segment"}},additionalProperties:!1},leg:{type:"object",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS",properties:{departure:{$ref:"#/definitions/alias_city"},arrival:{$ref:"#/definitions/alias_city"},cabin:{type:"string",description:"Cabin code",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},bookingClass:{type:"string",description:"RBD (Reservation Booking Designator)",regExp:"[A-Z]",example:"E",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},aircraftCode:{type:"string",description:"Aircraft/equipment type/code",regExp:"[A-Z0-9]+",example:"A380",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingFlightNumber:{type:"string",description:"Flight number of the marketing carrier",regExp:"[0-9]{3-4}",example:"1234",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingAirlineCode:{type:"string",description:"Airline code of the marketing carrier",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingOperationalSuffix:{type:"string",description:"Operational suffix if any",regExp:"[A-Z]",example:"A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},operatedBy:{$ref:"#/definitions/operatedBy"},legID:{type:"number",description:"Id of the leg (starting from 1)",regExp:"[0-9]+",example:"1",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"}},required:["departure","arrival"],additionalProperties:!1},operatedBy:{title:"operatedBy",type:"object",page:"AVAIL",jiraLink:"NUI-10727",activation:"leg: DATA_PRODUCT_DETAILS segment: NONE",properties:{disclosure:{type:"string",description:"Operated by information",regExp:"[A-Z]+",example:"Amadeus Airlines for Amadeus Airways",page:"AVAIL",jiraLink:"NUI-10722"},airlineCode:{type:"string",description:"Airline code of the marketing carrier",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10722"}},required:["disclosure","airlineCode"],additionalProperties:!1},alias_city:{type:"object",page:"ALL",jiraLink:"NUI-10721",properties:{countryCode:{type:"string",description:"Departure or Arrival country code provided in input by the end user",regExp:"[A-Z]{2}",example:"GB",page:"ALL",jiraLink:"NUI-15686"},cityCode:{type:"string",description:"Departure or Arrival City Code",regExp:"[A-Z]{3}",example:"PAR",page:"ALL",jiraLink:"NUI-10721"},locationCode:{type:"string",description:"Departure or Arrival location code provided in input by the end user (it could be a city or airport code)",regExp:"[A-Z]{3}",example:"PAR",page:"ALL",jiraLink:"NUI-10721"},airportCode:{type:"string",description:"Departure Airport Code",regExp:"[A-Z]{3}",example:"CDG",page:"AVAIL",jiraLink:"NUI-10722"},date:{type:["string","null"],description:"Departure or Arrival Date",regExp:"YYYY-MM-DD",example:"31-12-2013",page:"ALL",jiraLink:"NUI-10721"},terminal:{type:"string",description:"Departure or Arrival terminal",regExp:"[A-Z0-9]+",example:"TW",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},dateTime:{type:["string","null"],description:"Date and time of when the search has been initiated",regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL",jiraLink:"NUI-10721"}},additionalProperties:!1},searchInputs:{title:"searchInputs",description2:"TO BE REVIEWED - Proposal based on recent feedback.",type:"object",page:"ALL",jiraLink:"NUI-10721",properties:{dateTime:{type:"string",format:"date-time",description:"Date and time of when the search has been initiated",regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL",jiraLink:"NUI-10721"},tripType:{type:"string",description:"Type of trip (one way, round trip, multi-destination)",regExp:"[A-Z]",example:"RT",page:"ALL",jiraLink:"NUI-10721"},flexibleDateValue:{type:"number",description:"Value of the flexibility (3 for +/- 3 days of flexibility)",regExp:"[0-9]+",example:"3",page:"ALL",jiraLink:"NUI-10721"},cabin:{type:"string",description:"Cabin code",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10728"},traveller:{title:"traveller",type:"array",items:{type:"object",page:"ALL",jiraLink:"NUI-10721",properties:{passengerTypeCode:{type:"string",description:"Type of passenger",regExp:"[A-Z0-9]{3}",example:"ADT",page:"ALL",jiraLink:"NUI-10721"},numberOfPassengers:{type:"number",description:"Number of this type of passenger",regExp:"[0-9]{1-2}",example:"2",page:"ALL",jiraLink:"NUI-10721"}},required:["passengerTypeCode","numberOfPassengers"],additionalProperties:!1}},commercialFareFamily:{title:"commercialFareFamily",type:"array",items:{type:"object",page:"ALL",jiraLink:"NUI-10721",properties:{code:{type:"string",description:"Commercial fare families provided in input",regExp:"[A-Z0-9]+",example:"BUS",page:"ALL",jiraLink:"NUI-10721"},name:{type:"string",description:"Commercial fare families provided in input (localized)",regExp:"[A-Z0-9]+",example:"Business",page:"ALL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"}},required:["code"],additionalProperties:!1}},corporateCode:{title:"Corporate Code",type:"string",description:"Corporate code specified in inputs and allowing to access to negotiated fares",regExp:"[A-Z0-9]+",example:"SummerPromo",page:"ALL",jiraLink:"NUI-10734"},bound:{$ref:"#/definitions/array_bound"}},required:["dateTime","commercialFareFamily","bound"],additionalProperties:!1},flightTicket:{title:"flightTicket",type:"object",page:"ALL",jiraLink:"NUI-10721",properties:{bound:{$ref:"#/definitions/array_bound"},searchInputs:{$ref:"#/definitions/searchInputs"},journeyLength:{type:"number",description:"Number of days between the departure and return flights",regExp:"[0-9]+",example:"7",page:"ALL"}},required:["bound"],additionalProperties:!1},product:{type:"object",page:"ALL",jiraLink:"NUI-10722",properties:{productInfo:{$ref:"#/definitions/productInfo"},category:{$ref:"#/definitions/category"},ancillaryService:{$ref:"#/definitions/ancillaryService"},insurance:{title:"insurance",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10730",properties:{code:{type:"string",description:"Insurance product code",regExp:"[A-Z0-9]+",page:"CONF,RTPL",jiraLink:"NUI-10730"},price:{type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10730"},travellerID:{type:"number",description:"Traveller id if the insurance is selected per passenger",regExp:"[0-9]",example:"1",page:"CONF,RTPL",jiraLink:"NUI-10730"}},required:["code","price"],additionalProperties:!1},flightTicket:{$ref:"#/definitions/flightTicket"}},required:["productInfo","category"],additionalProperties:!1},ancillaryService:{title:"ancillaryService",type:"object",page:"PURC",jiraLink:"NUI-10986",properties:{categoryCode:{type:"string",description:"Code of the category of service",regExp:"[A-Z]{3}",example:"BAG",page:"PURC",jiraLink:"NUI-10986"},categoryName:{type:"string",description:"Service category name in English",regExp:"[A-Z]+",example:"Baggage",page:"PURC",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},serviceCode:{type:"string",description:"Code of the ancillary service",regExp:"[A-Z]{4}",example:"XBAG",page:"PURC",jiraLink:"NUI-10986"},serviceName:{type:"string",description:"Service name in English",regExp:"[A-Z]+",example:"Extra baggage",page:"PURC",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},travellerID:{type:"number",description:"Id of the traveller to whom the service is associated",regExp:"[0-9]",example:"1",page:"PURC",jiraLink:"NUI-10986"},price:{type:"number",description:"Price of this ancillary service",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"PURC",jiraLink:"NUI-10986"},initialPrice:{type:"number",description:"Initial price when a discount is applied on this ancillary service",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"PURC",jiraLink:"NUI-10986"},quantity:{type:"number",description:"Number of booked services",regExp:"[0-9]+",example:"1",page:"PURC",jiraLink:"NUI-10986"},status:{type:"string",comment:"values: paid, selected / default: selected",description:"Status of the ancillary service in servicing flow to distinguish already booked/paid services from the ones selected through the servicing flow",regExp:"[A-Z]",example:"paid",page:"MPURC",jiraLink:"NUI-10737"},boundID:{type:"number",description:"Id of the bound on which the service is booked (present only if the service is booked at bound level)",regExp:"[0-9]",example:"1",page:"PURC",jiraLink:"NUI-10986"},segmentID:{type:"number",description:"Id of the segment on which the service is booked (present only if the service is booked at segment level)",regExp:"[0-9]",example:"1",page:"PURC",jiraLink:"NUI-10986"},emd:{type:"string",description:"EMD number",regExp:"[A-Z0-9]+",example:"123456789",page:"CONF,RTPL",jiraLink:"NUI-10986"},characteristic:{title:"characteristic",type:"array",items:{type:"object",page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS",properties:{key:{type:"string",regExp:"[A-Z0-9]+",example:"Weight",page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS"},value:{type:"string",description:"Value of the service characteristic",regExp:"[A-Z0-9]+",example:"20KG",page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS"}},required:["key","value"],additionalProperties:!1}},seatSelection:{type:"string",description:"Seat selected by the user",regExp:"[0-9]+[A-Za-z]{1}",example:"2A",page:"PURC,CONF,RTPL",jiraLink:"NUI-14081"}},required:["categoryCode","serviceCode","travellerID","price","initialPrice","quantity","status","emd"],additionalProperties:!1},cart:{title:"cart",type:"object",page:"FARE,ALPI",properties:{price:{$ref:"#/definitions/alias_total"},item:{$ref:"#/definitions/array_item"},creationDate:{type:"string",description:"Creation date of the cart in the system",regExp:"dd/MM/yyyy",example:"12-31-13",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["price","item"],additionalProperties:!1},context:{title:"context",description2:"TO BE REVIEWED - Proposal based on recent feedback.",type:"object",page:"ALL",jiraLink:"NUI-10722",properties:{site:{type:"string",description:"Site code",regExp:"[A-Z]{8}",example:"ABCDABCD",page:"ALL",jiraLink:"NUI-10722"},sessionID:{type:"string",description:"Digital session id",regExp:"[A-Z]+",example:"abcdefghjkl",page:"ALL",jiraLink:"NUI-10722"},language:{type:"string",description:"Language code",regExp:"[A-Z]{2}",example:"GB",page:"ALL",jiraLink:"NUI-10722"},market:{type:"string",description:"Market id",regExp:"[A-Z]{2-3}",example:"US",page:"ALL",jiraLink:"NUI-10722"},officeID:{type:"string",description:"Office id composed of: IATA city or airport code - first three characters Corporate code - 2 characters Corporate qualifier - 1 character from 0 to 9 Office identifier - final three characters",regExp:"[A-Z0-9]{9}",example:"LON1A08AA",jiraLink:"NUI-10722"},bookingFlow:{type:"string",description:"BOOKING_FLOW input parameter",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-11437",activation:"DATA_CONTEXT"},tripFlow:{type:"string",description:"TRIP_FLOW input parameter",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-11437",activation:"DATA_CONTEXT"},externalID:{type:"string",description:"HTTP input parameter",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-10722"},internetProtocolAddress:{type:"string",description:"IP address of the end user",regExp:"[0-9]{1-3}\\.[0-9]{1-3}",example:"255.255.255.255",page:"ALL",jiraLink:"NUI-10527",activation:"DATA_PII"},deviceType:{type:"string",description:"Type of device",regExp:"[A-Z]+",example:"TABLET",page:"ALL",jiraLink:"NUI-10527",activation:"DATA_CONTEXT"},browser:{type:"string",description:"User agent of the browser",regExp:"[A-Z0-9]+",example:"IE8..11|Edge|FireFox|Chrome|Opera|Safari",page:"ALL",jiraLink:"NUI-10527",activation:"DATA_CONTEXT"}},patternProperties:{"^externalID[1-9]$":{type:"string",description:"HTTP input parameter",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-11437",activation:"DATA_CONTEXT"},"^peVariable[1-5]$":{type:"string",description:"HTTP input parameter",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-11437",activation:"DATA_CONTEXT"}},additionalProperties:!1},alias_total:{description2:"TO BE REVIEWED - Proposal based on recent feedback.",type:"object",properties:{totalPrice:{type:"number",description:"Total price of the booking",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10722"},currency:{type:"string",description:"Currency code",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"},totalMiles:{description2:"TO BE REVIEWED - Do we need miles on bound level?",type:"number",description:"Miles amount",regExp:"[0-9]+",example:"2000",page:"CONF,RTPL",jiraLink:"NUI-10732"},cashPaidInMiles:{description2:"TO BE REVIEWED - Do we need miles on bound level?.",type:"number",description:"Cash amount paid by the miles",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},installmentInterests:{description2:"TO BE REVIEWED - Do we need installment on bound level?.",type:"number",description:"Interests of the installment plan",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"transaction: CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PRICE_DETAILS"},insurancePrice:{type:"number",description:"Price of the insurance product(s)",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10730",activation:"DATA_PRICE_DETAILS"},AAASPrice:{type:"number",description:"Total amount of all ancillary services",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"cart: PURC / transaction: CONF,RTPL",jiraLink:"NUI-10986",activation:"DATA_PRICE_DETAILS"},initialPrice:{type:"number",description:"Initial price when a discount is applied on the totalPrice",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10735",activation:"DATA_PRICE_DETAILS"},baseFarePrice:{type:"number",description:"Base fare of the flight segments",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10722"},taxAmount:{type:"number",description:"Tax amout",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10722"},fuelSurcharge:{type:"number",description:"Sum of fuel surcharges for all travellers",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},serviceFee:{type:"number",description:"Booking fee",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10722"},rebookingDetails:{title:"rebookingDetails",type:"object",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS",properties:{newTotal:{type:"number",description:"New total price",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},previousTotal:{type:"number",description:"Previous total price",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},previousCurrency:{type:"string",description:"Currency code of the previous total price",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},newCurrency:{type:"string",description:"Currency code of the new total price",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},changeFees:{type:"number",description:"Change fees",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},refund:{type:"number",description:"Amount to be refunded",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},balance:{type:"number",description:"Balance to pay",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},nonRefundableAmount:{type:"number",description:"Non-refundable amout",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"cart: FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["newTotal","previousTotal","previousCurrency","newCurrency","changeFees","refund","balance","nonRefundableAmount"],additionalProperties:!1}},additionalProperties:!1},event:{title:"event",type:"object",page:"ALL",properties:{eventInfo:{title:"eventInfo",type:"object",page:"ALL",properties:{eventName:{type:"string",description:"Name of the event in English",regExp:"[A-Z]+",example:"Click on fare family description link",page:"ALL"},key:{type:"string",description:"Event key",regExp:"[A-Z0-9]+",example:"FareFamilyDescription",page:"ALL"},value:{type:["string","number"],description:"Event value",regExp:"[A-Z0-9]+",example:"ECO",page:"ALL"},pageID:{type:"string",description:"Page/state identifier",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL"},componentID:{type:"string",description:"Component identifier",regExp:"[A-Z0-9]+",example:"TripSummary",page:"ALL"},eventType:{type:"string",description:"Type of the event catched",regExp:"[A-Z0-9]+",example:"Display",page:"ALL"}},required:["eventName","key"],additionalProperties:!1},category:{$ref:"#/definitions/category"},timestamp:{title:"timestamp",type:"string",description:"Timestamp when event is triggered",regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL"}},required:["eventInfo","category","timestamp"],additionalProperties:!1},array_bound:{type:"array",items:{$ref:"#/definitions/bound"}},array_event:{type:"array",items:{$ref:"#/definitions/event"}},array_item:{title:"item",type:"array",items:{$ref:"#/definitions/item"}},array_leg:{type:"array",items:{$ref:"#/definitions/leg"}},array_segment:{type:"array",items:{$ref:"#/definitions/segment"}},array_user:{type:"array",items:{$ref:"#/definitions/user"}}}},"1.1.0":{$schema:"http://json-schema.org/draft-04/schema#",version:"1.1.0",$ref:"#/definitions/ROOT",skipValidation:!1,definitions:{ROOT:{description2:"TO BE REVIEWED - Schema proposal based on recent feedback.",type:"object",properties:{version:{type:"string",description:"Version of the data layer",regExp:"[0-9]+.[0-9]+.[0-9]+",example:"1.1.0",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0},context:{$ref:"#/definitions/context"},pageInstanceID:{type:"string",description:"Current page/state identifier",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0},searchInputs:{$ref:"#/definitions/searchInputs"},traveller:{$ref:"#/definitions/array_user"},user:{$ref:"#/definitions/array_user_context"},transaction:{$ref:"#/definitions/transaction"},page:{$ref:"#/definitions/page"},product:{title:"product",type:"array",UISpecific:!0,items:{$ref:"#/definitions/product"}},cart:{$ref:"#/definitions/cart"},event:{$ref:"#/definitions/array_event"}},required:["version","pageInstanceID","context","page","product","cart","traveller","user","event"],additionalProperties:!1},user:{type:"object",page:"ALL",properties:{travellerID:{type:"number",description:"Id of the traveller within the cart",regExp:"[0-9]",example:"1",page:"ALL",jiraLink:"NUI-10722"},passengerTypeCode:{type:"string",description:"Passenger type code (PTC)",regExp:"[A-Z0-9]{3}",example:"ADT",page:"ALL",jiraLink:"NUI-10722"},lastName:{type:"string",description:"Last name of the traveller",regExp:"[A-Z]+",example:"Doe",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"},firstName:{type:"string",description:"First name of the traveller",regExp:"[A-Z]+",example:"John",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"},email:{type:"string",format:"email",description:"Main mail address (so associated to the first traveller by default)",regExp:"[A-Z@.]+",example:"noreply@amadeus.com",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"},title:{type:"string",description:"Title of the traveller",regExp:"[A-Z]+",example:"Mr",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},dateOfBirth:{type:"string",description:"Data of birth of the traveller",regExp:"dd/MM/yyyy",example:"12-31-13",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},nationality:{type:"string",description:"Nationality of the traveller",regExp:"[A-Z]+",example:"FR",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},gender:{type:"string",comment:"Values: Male/Female",description:"Gender of the traveller",regExp:"[A-Z]",example:"Male",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},loyaltyProgram:{title:"loyaltyProgram",type:"array",items:{type:"object",page:"ALL",jiraLink:"NUI-10722",required:["program"],additionalProperties:!1,properties:{program:{type:"string",description:"Usually associated airline code",regExp:"[A-Z0-9]{2}",example:"1A",page:"ALL",jiraLink:"NUI-10722"},number:{type:"string",description:"Frequent flyer number",regExp:"[A-Z0-9]+",example:"123456789",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"}}}},eTicket:{title:"eTicket",type:"array",items:{type:"object",page:"CONF,RTPL",jiraLink:"NUI-10722",properties:{ticketNumber:{type:"string",description:"Array of e-ticket numbers associated to the traveller id",regExp:"[A-Z0-9]+",page:"CONF,RTPL",jiraLink:"NUI-10722",example:"1"}},required:["ticketNumber"],additionalProperties:!1}}},required:["travellerID","passengerTypeCode"],additionalProperties:!1},productInfo:{title:"productInfo",type:"object",page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722",properties:{productID:{type:"number",description:"Id of a product",regExp:"[0-9]+",example:"8",page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"}},required:["productID"],additionalProperties:!1},item:{type:"object",page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722",properties:{productInfo:{$ref:"#/definitions/productInfo"},status:{type:"string",description:"Status of the product as paid, pre-booked, guaranteed, waitlist\u2026",regExp:"[A-Z0-9]+",example:"Confirmed",page:"transaction: CONF,RTPL",jiraLink:"NUI-10722"}},required:["productInfo"],additionalProperties:!1},alias_price:{description2:"TO BE REVIEWED - Proposal based on recent feedback.",type:"object",page:"cart : FARE,ALPI bound : AVAIL",jiraLink:"NUI-10722",activation:"bound : DATA_PRICE_DETAILS",properties:{totalPrice:{type:"number",description:"Total price of the booking",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"cart : FARE,ALPI bound : AVAIL",jiraLink:"NUI-10722",activation:"bound: DATA_PRICE_DETAILS"},totalMiles:{type:"number",description:"Miles amount",regExp:"[0-9]+",example:"2000",page:"AVAIL",jiraLink:"NUI-10739",activation:"DATA_PRICE_DETAILS"},cashPaidInMiles:{type:"number",description:"Cash amount paid by the miles",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},currency:{type:"string",description:"Currency code",regExp:"[A-Z]{3}",example:"EUR",page:"FARE,ALPI",jiraLink:"NUI-10722"},initialPrice:{type:"number",description:"Initial price when a discount is applied on the totalPrice",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-10735",activation:"DATA_PRICE_DETAILS"},baseFarePrice:{type:"number",description:"Base fare of the flight segments",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-10722"},taxAmount:{type:"number",description:"Tax amout",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},fuelSurcharge:{type:"number",description:"Sum of fuel surcharges for all travellers",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},serviceFee:{type:"number",description:"Booking fee",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"cart: FARE,ALPI transaction.total: CONF,RTPL",jiraLink:"NUI-10722"},AAASPrice:{type:"number",description:"Total amount of all ancillary services",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"cart: PURC / transaction: CONF,RTPL",jiraLink:"NUI-10986",activation:"DATA_PRICE_DETAILS"},rebookingDetails:{title:"rebookingDetails",type:"object",page:"cart: FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS",properties:{changeFees:{type:"number",description:"Change fees",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},balance:{type:"number",description:"Balance to pay",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["changeFees","balance"],additionalProperties:!1}},additionalProperties:!1},transaction:{title:"transaction",description2:"TO BE REVIEWED - Proposal based on recent feedback.",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10722",properties:{item:{$ref:"#/definitions/array_item"},payment:{title:"payment",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10722",properties:{methodOfPayment:{type:"string",description:"Code of the method of payment",regExp:"[A-Z0-9]+",example:"CC",page:"CONF,RTPL"},paymentReference:{type:"string",description:"Reference from the payment provider",regExp:"[A-Z0-9]+",example:"123456789",page:"CONF,RTPL",jiraLink:"NUI-10722"},creditCardType:{description2:"!!! TO BE RENAMED: more abstract name needed (in roder to be able to store not only CC type, but also AMOP)",type:"string",description:"Type of credit card (credit card vendor)",regExp:"[A-Z0-9]+",example:"VI",page:"CONF,RTPL",jiraLink:"NUI-10722"},billingCity:{type:"string",description:"City name of the billing address",regExp:"[A-Z]+",example:"PARIS",page:"CONF,RTPL",jiraLink:"NUI-10742",activation:"DATA_PAYMENT"},billingCountry:{type:"string",description:"Country code of the billing address",regExp:"[A-Z]{2}",example:"FR",page:"CONF,RTPL",jiraLink:"NUI-10742",activation:"DATA_PAYMENT"},installment:{title:"installment",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT",properties:{plan:{type:"number",description:"Number of instalment to pay the trip",regExp:"[0-9]+",example:"5",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},interest:{type:"number",description:"Amount of interest",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},currency:{type:"string",description:"Currency for the instalment",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},firstMonthAmount:{type:"number",description:"First month amount",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},nextMonthAmount:{type:"number",description:"Next months amount",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"}},required:["plan","interest","currency"],additionalProperties:!1}},required:["methodOfPayment","paymentReference","creditCardType"],additionalProperties:!1},total:{$ref:"#/definitions/alias_total"}},additionalProperties:!1},category:{title:"category",type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{primaryCategory:{type:["string","null"],description:"Category of the product or flow",regExp:"[A-Z]+",example:"Flight Ticket",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0}},required:["primaryCategory"],additionalProperties:!1},page:{title:"page",type:"object",page:"ALL",UISpecific:!0,jiraLink:"NUI-10722",properties:{pageInfo:{title:"pageInfo",type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{pageID:{type:"string",description:"Id of the page/state",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL",UISpecific:!0},pageName:{type:"string",description:"Name of the page/state in English",regExp:"[A-Z]+",example:"Flex pricer OWD availability",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0},channel:{type:"string",description:"Digital touchpoint",regExp:"[A-Z0-9]+",example:"eRetail",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0}},required:["pageID","pageName","channel"],additionalProperties:!1},category:{$ref:"#/definitions/category"}},required:["pageInfo","category"],additionalProperties:!1},upsell:{title:"upsell",type:"object",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0,properties:{otherFareFamily:{title:"otherFareFamily",type:"array",UISpecific:!0,items:{type:"object",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",properties:{fareFamilyCode:{type:"string",description:"Fare family code",regExp:"[A-Z0-9]+",example:"BUS",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0},fareFamilyName:{type:"string",description:"Fare family name (localized)",regExp:"[A-Z0-9]+",example:"Business",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION",UISpecific:!0},price:{type:"number",description:"Price if any",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0}},required:["fareFamilyCode"],additionalProperties:!1}},teaser:{title:"teaser",type:"object",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0,properties:{fareFamilyCode:{type:"string",description:"Fare family code of the one displayed in the upsell teaser",regExp:"[A-Z0-9]+",example:"FIRST",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0},fareFamilyName:{type:"string",description:"Fare family name (localized)",regExp:"[A-Z0-9]+",example:"First",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION",UISpecific:!0}},additionalProperties:!1}},required:["otherFareFamily"],additionalProperties:!1},segment:{type:"object",page:"AVAIL",jiraLink:"NUI-10722",properties:{departure:{$ref:"#/definitions/alias_city"},arrival:{$ref:"#/definitions/alias_city"},leg:{$ref:"#/definitions/array_leg"},cabin:{type:"string",description:"Cabin code",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10722"},bookingClass:{type:"string",description:"RBD (Reservation Booking Designator)",regExp:"[A-Z]",example:"E",page:"AVAIL",jiraLink:"NUI-10722"},marketingFlightNumber:{type:"string",description:"Flight number of the marketing carrier",regExp:"[0-9]{3-4}",example:"1234",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingAirlineCode:{type:"string",description:"Airline code of the marketing carrier",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingOperationalSuffix:{type:"string",description:"Operational suffix if any",regExp:"[A-Z]",example:"A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},operatedBy:{$ref:"#/definitions/operatedBy"},segmentID:{type:"number",description:"Id of the segment on which the service is booked (present only if the service is booked at segment level)",regExp:"[0-9]",example:"1",page:"PURC",jiraLink:"NUI-10986"}},required:["departure","arrival"],additionalProperties:!1},bound:{type:"object",page:"ALL",jiraLink:"NUI-10721",UISpecific:!0,properties:{boundID:{type:"number",description:"Id of the bound (starting from 1)",regExp:"[0-9]+",example:"8",page:"AVAIL",jiraLink:"NUI-10722"},fareFamilyCode:{type:"string",description:"Fare family code",regExp:"[A-Z0-9]+",example:"BUS",page:"AVAIL",jiraLink:"NUI-10722"},fareFamilyName:{type:"string",description:"Fare family name (localized)",regExp:"[A-Z0-9]+",example:"Business",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},departure:{$ref:"#/definitions/alias_city"},arrival:{$ref:"#/definitions/alias_city"},price:{$ref:"#/definitions/alias_price"},pricePerTravellerType:{title:"pricePerTravellerType",type:"array",items:{type:"object",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS",properties:{passengerTypeCode:{type:"string",description:"Passenger type code (PTC)",regExp:"[A-Z0-9]{3}",example:"ADT",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},totalPrice:{type:"number",description:"Total price of the booking",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},currency:{type:"string",description:"Currency code",regExp:"[A-Z]{3}",example:"EUR",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},required:["passengerTypeCode","totalPrice","currency"],additionalProperties:!1}},upsell:{$ref:"#/definitions/upsell"},segment:{$ref:"#/definitions/array_segment"}},additionalProperties:!1},leg:{type:"object",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS",properties:{departure:{$ref:"#/definitions/alias_city"},arrival:{$ref:"#/definitions/alias_city"},cabin:{type:"string",description:"Cabin code",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},bookingClass:{type:"string",description:"RBD (Reservation Booking Designator)",regExp:"[A-Z]",example:"E",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},aircraftCode:{type:"string",description:"Aircraft/equipment type/code",regExp:"[A-Z0-9]+",example:"A380",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingFlightNumber:{type:"string",description:"Flight number of the marketing carrier",regExp:"[0-9]{3-4}",example:"1234",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingAirlineCode:{type:"string",description:"Airline code of the marketing carrier",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingOperationalSuffix:{type:"string",description:"Operational suffix if any",regExp:"[A-Z]",example:"A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},operatedBy:{$ref:"#/definitions/operatedBy"},legID:{type:"number",description:"Id of the leg (starting from 1)",regExp:"[0-9]+",example:"1",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"}},required:["departure","arrival"],additionalProperties:!1},operatedBy:{title:"operatedBy",type:"object",page:"AVAIL",jiraLink:"NUI-10727",activation:"leg: DATA_PRODUCT_DETAILS segment: NONE",properties:{disclosure:{type:"string",description:"Operated by information",regExp:"[A-Z]+",example:"Amadeus Airlines for Amadeus Airways",page:"AVAIL",jiraLink:"NUI-10722"},airlineCode:{type:"string",description:"Airline code of the marketing carrier",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10722"}},required:["disclosure","airlineCode"],additionalProperties:!1},alias_city:{type:"object",page:"ALL",jiraLink:"NUI-10721",properties:{countryCode:{type:"string",description:"Departure or Arrival country code provided in input by the end user",regExp:"[A-Z]{2}",example:"GB",page:"ALL",jiraLink:"NUI-15685"},cityCode:{type:"string",description:"Departure or Arrival City Code",regExp:"[A-Z]{3}",example:"PAR",page:"ALL",jiraLink:"NUI-10721"},locationCode:{type:"string",description:"Departure or Arrival location code provided in input by the end user (it could be a city or airport code)",regExp:"[A-Z]{3}",example:"PAR",page:"ALL",jiraLink:"NUI-10721"},airportCode:{type:"string",description:"Departure Airport Code",regExp:"[A-Z]{3}",example:"CDG",page:"AVAIL",jiraLink:"NUI-10722"},date:{type:["string","null"],description:"Departure or Arrival Date",regExp:"YYYY-MM-DD",example:"31-12-2013",page:"ALL",jiraLink:"NUI-10721"},terminal:{type:"string",description:"Departure or Arrival terminal",regExp:"[A-Z0-9]+",example:"TW",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},dateTime:{type:["string","null"],description:"Date and time of when the search has been initiated",regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL",jiraLink:"NUI-10721"}},additionalProperties:!1},searchInputs:{title:"searchInputs",description2:"TO BE REVIEWED - Proposal based on recent feedback.",type:"object",page:"ALL",jiraLink:"NUI-10721",properties:{dateTime:{type:"string",format:"date-time",description:"Date and time of when the search has been initiated",regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL",jiraLink:"NUI-10721"},tripType:{type:"string",description:"Type of trip (one way, round trip, multi-destination)",regExp:"[A-Z]",example:"RT",page:"ALL",jiraLink:"NUI-10721"},flexibleDateValue:{type:"number",description:"Value of the flexibility (3 for +/- 3 days of flexibility)",regExp:"[0-9]+",example:"3",page:"ALL",jiraLink:"NUI-10721"},cabin:{type:"string",description:"Cabin code",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10728"},traveller:{title:"traveller",type:"array",items:{type:"object",page:"ALL",jiraLink:"NUI-10721",properties:{passengerTypeCode:{type:"string",description:"Type of passenger",regExp:"[A-Z0-9]{3}",example:"ADT",page:"ALL",jiraLink:"NUI-10721"},numberOfPassengers:{type:"number",description:"Number of this type of passenger",regExp:"[0-9]{1-2}",example:"2",page:"ALL",jiraLink:"NUI-10721"}},required:["passengerTypeCode","numberOfPassengers"],additionalProperties:!1}},commercialFareFamily:{title:"commercialFareFamily",type:"array",items:{type:"object",page:"ALL",jiraLink:"NUI-10721",properties:{code:{type:"string",description:"Commercial fare families provided in input",regExp:"[A-Z0-9]+",example:"BUS",page:"ALL",jiraLink:"NUI-10721"},name:{type:"string",description:"Commercial fare families provided in input (localized)",regExp:"[A-Z0-9]+",example:"Business",page:"ALL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"}},required:["code"],additionalProperties:!1}},corporateCode:{title:"Corporate Code",type:"string",description:"Corporate code specified in inputs and allowing to access to negotiated fares",regExp:"[A-Z0-9]+",example:"SummerPromo",page:"ALL",jiraLink:"NUI-10734"},bound:{$ref:"#/definitions/array_bound"}},required:["dateTime","commercialFareFamily","bound"],additionalProperties:!1},flightTicket:{title:"flightTicket",type:"object",page:"ALL",jiraLink:"NUI-10721",UISpecific:!0,properties:{bound:{$ref:"#/definitions/array_bound"},journeyLength:{type:"number",description:"Number of days between the departure and return flights",regExp:"[0-9]+",example:"7",page:"ALL"}},required:["bound"],additionalProperties:!1},product:{type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{productInfo:{$ref:"#/definitions/productInfo"},category:{$ref:"#/definitions/category"},ancillaryService:{$ref:"#/definitions/ancillaryService"},insurance:{title:"insurance",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10730",properties:{code:{type:"string",description:"Insurance product code",regExp:"[A-Z0-9]+",page:"CONF,RTPL",jiraLink:"NUI-10730"},price:{type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10730"},travellerID:{type:"number",description:"Traveller id if the insurance is selected per passenger",regExp:"[0-9]",example:"1",page:"CONF,RTPL",jiraLink:"NUI-10730"}},required:["code","price"],additionalProperties:!1},flightTicket:{$ref:"#/definitions/flightTicket"}},required:["productInfo","category"],additionalProperties:!1},ancillaryService:{title:"ancillaryService",type:"object",page:"PURC",jiraLink:"NUI-10986",properties:{categoryCode:{type:"string",description:"Code of the category of service",regExp:"[A-Z]{3}",example:"BAG",page:"PURC",jiraLink:"NUI-10986"},categoryName:{type:"string",description:"Service category name in English",regExp:"[A-Z]+",example:"Baggage",page:"PURC",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},serviceCode:{type:"string",description:"Code of the ancillary service",regExp:"[A-Z]{4}",example:"XBAG",page:"PURC",jiraLink:"NUI-10986"},serviceName:{type:"string",description:"Service name in English",regExp:"[A-Z]+",example:"Extra baggage",page:"PURC",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},travellerID:{type:"number",description:"Id of the traveller to whom the service is associated",regExp:"[0-9]",example:"1",page:"PURC",jiraLink:"NUI-10986"},price:{type:"number",description:"Price of this ancillary service",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"PURC",jiraLink:"NUI-10986"},initialPrice:{type:"number",description:"Initial price when a discount is applied on this ancillary service",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"PURC",jiraLink:"NUI-10986"},quantity:{type:"number",description:"Number of booked services",regExp:"[0-9]+",example:"1",page:"PURC",jiraLink:"NUI-10986"},status:{type:"string",comment:"values: paid, selected / default: selected",description:"Status of the ancillary service in servicing flow to distinguish already booked/paid services from the ones selected through the servicing flow",regExp:"[A-Z]",example:"paid",page:"MPURC",jiraLink:"NUI-10737"},boundID:{type:"number",description:"Id of the bound on which the service is booked (present only if the service is booked at bound level)",regExp:"[0-9]",example:"1",page:"PURC",jiraLink:"NUI-10986"},segmentID:{type:"number",description:"Id of the segment on which the service is booked (present only if the service is booked at segment level)",regExp:"[0-9]",example:"1",page:"PURC",jiraLink:"NUI-10986"},emd:{type:"string",description:"EMD number",regExp:"[A-Z0-9]+",example:"123456789",page:"CONF,RTPL",jiraLink:"NUI-10986"},characteristic:{title:"characteristic",type:"array",items:{type:"object",page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS",properties:{key:{type:"string",regExp:"[A-Z0-9]+",example:"Weight",page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS"},value:{type:"string",description:"Value of the service characteristic",regExp:"[A-Z0-9]+",example:"20KG",page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS"}},required:["key","value"],additionalProperties:!1}},seatSelection:{type:"string",description:"Seat selected by the user",regExp:"[0-9]+[A-Za-z]{1}",example:"2A",page:"PURC,CONF,RTPL",jiraLink:"NUI-14081"}},required:["categoryCode","serviceCode","travellerID","price","initialPrice","quantity","status","emd"],additionalProperties:!1},cart:{title:"cart",type:"object",page:"FARE,ALPI",properties:{price:{$ref:"#/definitions/alias_total"},item:{$ref:"#/definitions/array_item"},creationDate:{type:"string",description:"Creation date of the cart in the system",regExp:"dd/MM/yyyy",example:"12-31-13",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["price","item"],additionalProperties:!1},context:{title:"context",description2:"TO BE REVIEWED - Proposal based on recent feedback.",type:"object",page:"ALL",jiraLink:"NUI-10722",properties:{backend:{type:"string",description:"Site code",regExp:"[A-Za-z0-9-]+",example:"OCGPRD",page:"ALL",jiraLink:"NUI-14081"},site:{type:"string",description:"Site code",regExp:"[A-Z]{8}",example:"ABCDABCD",page:"ALL",jiraLink:"NUI-10722"},sessionID:{type:"string",description:"Digital session id",regExp:"[A-Z]+",example:"abcdefghjkl",page:"ALL",jiraLink:"NUI-10722"},language:{type:"string",description:"Language code",regExp:"[A-Z]{2}",example:"GB",page:"ALL",jiraLink:"NUI-10722"},market:{type:"string",description:"Market id",regExp:"[A-Z]{2-3}",example:"US",page:"ALL",jiraLink:"NUI-10722"},officeID:{type:"string",description:"Office id composed of: IATA city or airport code - first three characters Corporate code - 2 characters Corporate qualifier - 1 character from 0 to 9 Office identifier - final three characters",regExp:"[A-Z0-9]{9}",example:"LON1A08AA",jiraLink:"NUI-10722"},bookingFlow:{type:"string",description:"BOOKING_FLOW input parameter",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-11437",activation:"DATA_CONTEXT"},tripFlow:{type:"string",description:"TRIP_FLOW input parameter",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-11437",activation:"DATA_CONTEXT"},externalID:{type:"string",description:"HTTP input parameter",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-10722"},PNR:{type:"object",description:"PNR record",page:"PURC,RTPL",jiraLink:"NUI-15422",activation:"DATA_CONTEXT",properties:{recLoc:{type:"string",description:"HTTP input parameter",regExp:"[A-Z0-9]+",page:"PURC,RTPL",jiraLink:"NUI-15422",activation:"DATA_CONTEXT"},creationDate:{type:"string",description:"HTTP input parameter",regExp:"YYYY-MM-DDThh:mm:ss.sZ",page:"RTPL",jiraLink:"NUI-15422",activation:"DATA_CONTEXT"}},additionalProperties:!1,required:["recLoc"]}},patternProperties:{"^externalID[1-9]$":{description:"HTTP input parameter",regExp:"[A-Z0-9]+",type:"string",page:"ALL",jiraLink:"NUI-11437",activation:"DATA_CONTEXT"},"^peVariable[1-5]$":{type:"string",description:"HTTP input parameter",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-11437",activation:"DATA_CONTEXT"}},additionalProperties:!1},user_context:{title:"context",description2:"TO BE REVIEWED - Proposal based on recent feedback.",type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{internetProtocolAddress:{type:"string",description:"IP address of the end user",regExp:"[0-9]{1-3}\\.[0-9]{1-3}",example:"255.255.255.255",page:"ALL",jiraLink:"NUI-10527",activation:"DATA_PII"},deviceType:{type:"string",description:"Type of device",regExp:"[A-Z]+",example:"TABLET",page:"ALL",jiraLink:"NUI-10527",activation:"DATA_CONTEXT",UISpecific:!0},browser:{type:"string",description:"User agent of the browser",regExp:"[A-Z0-9]+",example:"IE8..11|Edge|FireFox|Chrome|Opera|Safari",page:"ALL",jiraLink:"NUI-10527",activation:"DATA_CONTEXT",UISpecific:!0}},additionalProperties:!1},alias_total:{description2:"TO BE REVIEWED - Proposal based on recent feedback.",type:"object",properties:{totalPrice:{type:"number",description:"Total price of the booking",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10722"},currency:{type:"string",description:"Currency code",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"},totalMiles:{description2:"TO BE REVIEWED - Do we need miles on bound level?",type:"number",description:"Miles amount",regExp:"[0-9]+",example:"2000",page:"CONF,RTPL",jiraLink:"NUI-10732"},cashPaidInMiles:{description2:"TO BE REVIEWED - Do we need miles on bound level?.",type:"number",description:"Cash amount paid by the miles",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},installmentInterests:{description2:"TO BE REVIEWED - Do we need installment on bound level?.",type:"number",description:"Interests of the installment plan",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"transaction: CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PRICE_DETAILS"},insurancePrice:{type:"number",description:"Price of the insurance product(s)",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10730",activation:"DATA_PRICE_DETAILS"},AAASPrice:{type:"number",description:"Total amount of all ancillary services",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"cart: PURC / transaction: CONF,RTPL",jiraLink:"NUI-10986",activation:"DATA_PRICE_DETAILS"},initialPrice:{type:"number",description:"Initial price when a discount is applied on the totalPrice",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10735",activation:"DATA_PRICE_DETAILS"},baseFarePrice:{type:"number",description:"Base fare of the flight segments",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10722"},taxAmount:{type:"number",description:"Tax amout",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10722"},fuelSurcharge:{type:"number",description:"Sum of fuel surcharges for all travellers",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},serviceFee:{type:"number",description:"Booking fee",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10722"},rebookingDetails:{title:"rebookingDetails",type:"object",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS",properties:{newTotal:{type:"number",description:"New total price",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},previousTotal:{type:"number",description:"Previous total price",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},previousCurrency:{type:"string",description:"Currency code of the previous total price",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},newCurrency:{type:"string",description:"Currency code of the new total price",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},changeFees:{type:"number",description:"Change fees",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},refund:{type:"number",description:"Amount to be refunded",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},balance:{type:"number",description:"Balance to pay",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},nonRefundableAmount:{type:"number",description:"Non-refundable amout",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"cart: FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["newTotal","previousTotal","previousCurrency","newCurrency","changeFees","refund","balance","nonRefundableAmount"],additionalProperties:!1}},additionalProperties:!1},event:{title:"event",type:"object",page:"ALL",UISpecific:!0,properties:{eventInfo:{title:"eventInfo",type:"object",page:"ALL",UISpecific:!0,properties:{eventName:{type:"string",description:"Name of the event in English",regExp:"[A-Z]+",example:"Click on fare family description link",page:"ALL",UISpecific:!0},key:{type:"string",description:"Event key",regExp:"[A-Z0-9]+",example:"FareFamilyDescription",page:"ALL",UISpecific:!0},value:{type:["string","number"],description:"Event value",regExp:"[A-Z0-9]+",example:"ECO",page:"ALL",UISpecific:!0},pageID:{type:"string",description:"Page/state identifier",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL",UISpecific:!0},componentID:{type:"string",description:"Component identifier",regExp:"[A-Z0-9]+",example:"TripSummary",page:"ALL",UISpecific:!0},eventType:{type:"string",description:"Type of the event catched",regExp:"[A-Z0-9]+",example:"Display",page:"ALL",UISpecific:!0}},required:["eventName","key"],additionalProperties:!1},category:{$ref:"#/definitions/category"},timestamp:{title:"timestamp",type:"string",description:"Timestamp when event is triggered",regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL",UISpecific:!0}},required:["eventInfo","category","timestamp"],additionalProperties:!1},array_bound:{type:"array",items:{$ref:"#/definitions/bound"}},array_event:{type:"array",items:{$ref:"#/definitions/event"}},array_item:{title:"item",type:"array",items:{$ref:"#/definitions/item"}},array_leg:{type:"array",items:{$ref:"#/definitions/leg"}},array_segment:{type:"array",items:{$ref:"#/definitions/segment"}},array_user:{type:"array",items:{$ref:"#/definitions/user"}},array_user_context:{type:"array",items:{$ref:"#/definitions/user_context"}}}},"1.2.0":{$schema:"http://json-schema.org/draft-04/schema#",version:"1.2.0",$ref:"#/definitions/ROOT",definitions:{ROOT:{description2:"TO BE REVIEWED - Schema proposal based on recent feedback.",type:"object",properties:{version:{description:"Version of the data layer",type:"string",regExp:"[0-9]+.[0-9]+.[0-9]+",example:"1.1.0",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0},context:{$ref:"#/definitions/context"},pageInstanceID:{description:"Current page/state identifier",type:"string",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0},searchInputs:{$ref:"#/definitions/searchInputs"},traveller:{$ref:"#/definitions/array_user"},user:{$ref:"#/definitions/array_user_context"},transaction:{$ref:"#/definitions/transaction"},page:{$ref:"#/definitions/page"},product:{title:"product",type:"array",items:{$ref:"#/definitions/product"},UISpecific:!0},cart:{$ref:"#/definitions/cart"},event:{$ref:"#/definitions/array_event"}},required:["version","context","pageInstanceID","traveller","user","page","product","cart","event"],additionalProperties:!1},user:{type:"object",properties:{travellerID:{description:"Id of the traveller within the cart",type:"number",regExp:"[0-9]",example:"1",page:"ALL",jiraLink:"NUI-10722"},passengerTypeCode:{description:"Passenger type code (PTC)",type:"string",regExp:"[A-Z0-9]{3}",example:"ADT",page:"ALL",jiraLink:"NUI-10722"},lastName:{description:"Last name of the traveller",type:"string",regExp:"[A-Z]+",example:"Doe",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"},firstName:{description:"First name of the traveller",type:"string",regExp:"[A-Z]+",example:"John",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"},email:{description:"Main mail address (so associated to the first traveller by default)",type:"string",format:"email",regExp:"[A-Z@.]+",example:"noreply@amadeus.com",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"},title:{description:"Title of the traveller",type:"string",regExp:"[A-Z]+",example:"Mr",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},dateOfBirth:{description:"Data of birth of the traveller",type:"string",regExp:"dd/MM/yyyy",example:"12-31-13",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},nationality:{description:"Nationality of the traveller",type:"string",regExp:"[A-Z]+",example:"FR",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},gender:{description:"Gender of the traveller",type:"string",comment:"Values: Male/Female",regExp:"[A-Z]",example:"Male",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},loyaltyProgram:{title:"loyaltyProgram",type:"array",items:{type:"object",properties:{program:{description:"Usually associated airline code",type:"string",regExp:"[A-Z0-9]{2}",example:"1A",page:"ALL",jiraLink:"NUI-10722"},number:{description:"Frequent flyer number",type:"string",regExp:"[A-Z0-9]+",example:"123456789",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"}},required:["program"],additionalProperties:!1,page:"ALL",jiraLink:"NUI-10722"}},eTicket:{title:"eTicket",type:"array",items:{type:"object",properties:{ticketNumber:{description:"Array of e-ticket numbers associated to the traveller id",type:"string",regExp:"[A-Z0-9]+",page:"CONF,RTPL",jiraLink:"NUI-10722",example:"1"}},required:["ticketNumber"],additionalProperties:!1,page:"CONF,RTPL",jiraLink:"NUI-10722"}}},required:["travellerID","passengerTypeCode"],additionalProperties:!1,page:"ALL"},productInfo:{title:"productInfo",type:"object",properties:{productID:{description:"Id of a product",type:"number",regExp:"[0-9]+",example:"8",page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"}},required:["productID"],additionalProperties:!1,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"},item:{type:"object",properties:{productInfo:{$ref:"#/definitions/productInfo"},status:{description:"Status of the product as paid, pre-booked, guaranteed, waitlist\u2026",type:"string",regExp:"[A-Z0-9]+",example:"Confirmed",page:"transaction: CONF,RTPL",jiraLink:"NUI-10722"}},required:["productInfo"],additionalProperties:!1,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"},alias_price:{description2:"TO BE REVIEWED - Proposal based on recent feedback.",type:"object",properties:{totalPrice:{description:"Total price of the booking",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"cart : FARE,ALPI bound : AVAIL",jiraLink:"NUI-10722",activation:"bound: DATA_PRICE_DETAILS"},totalMiles:{description:"Miles amount",type:"number",regExp:"[0-9]+",example:"2000",page:"AVAIL",jiraLink:"NUI-10739",activation:"DATA_PRICE_DETAILS"},cashPaidInMiles:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]{3}",example:"EUR",page:"FARE,ALPI",jiraLink:"NUI-10722"},initialPrice:{description:"Initial price when a discount is applied on the totalPrice",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-10735",activation:"DATA_PRICE_DETAILS"},baseFarePrice:{description:"Base fare of the flight segments",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-10722"},taxAmount:{description:"Tax amout",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},fuelSurcharge:{description:"Sum of fuel surcharges for all travellers",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},serviceFee:{description:"Booking fee",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"cart: FARE,ALPI transaction.total: CONF,RTPL",jiraLink:"NUI-10722"},AAASPrice:{description:"Total amount of all ancillary services",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"cart: PURC / transaction: CONF,RTPL",jiraLink:"NUI-10986",activation:"DATA_PRICE_DETAILS"},rebookingDetails:{title:"rebookingDetails",type:"object",properties:{changeFees:{description:"Change fees",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},balance:{description:"Balance to pay",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["changeFees","balance"],additionalProperties:!1,page:"cart: FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},additionalProperties:!1,page:"cart : FARE,ALPI bound : AVAIL",jiraLink:"NUI-10722",activation:"bound : DATA_PRICE_DETAILS"},transaction:{title:"transaction",type:"object",properties:{item:{$ref:"#/definitions/array_item"},payment:{title:"payment",type:"object",properties:{methodOfPayment:{description:"Code of the method of payment",type:"string",regExp:"[A-Z0-9]+",example:"CC",page:"CONF,RTPL"},paymentReference:{description:"Reference from the payment provider",type:"string",regExp:"[A-Z0-9]+",example:"123456789",page:"CONF,RTPL",jiraLink:"NUI-10722"},creditCardType:{description2:"!!! TO BE RENAMED: more abstract name needed (in roder to be able to store not only CC type, but also AMOP)",description:"Type of credit card (credit card vendor)",type:"string",regExp:"[A-Z0-9]+",example:"VI",page:"CONF,RTPL",jiraLink:"NUI-10722"},billingCity:{description:"City name of the billing address",type:"string",regExp:"[A-Z]+",example:"PARIS",page:"CONF,RTPL",jiraLink:"NUI-10742",activation:"DATA_PAYMENT"},billingCountry:{description:"Country code of the billing address",type:"string",regExp:"[A-Z]{2}",example:"FR",page:"CONF,RTPL",jiraLink:"NUI-10742",activation:"DATA_PAYMENT"},installment:{title:"installment",type:"object",properties:{plan:{description:"Number of instalment to pay the trip",type:"number",regExp:"[0-9]+",example:"5",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},interest:{description:"Amount of interest",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},currency:{description:"Currency for the instalment",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},firstMonthAmount:{description:"First month amount",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},nextMonthAmount:{description:"Next months amount",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"}},required:["plan","interest","currency"],additionalProperties:!1,page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"}},required:["methodOfPayment","paymentReference","creditCardType"],additionalProperties:!1,page:"CONF,RTPL",jiraLink:"NUI-10722"},total:{$ref:"#/definitions/alias_total"}},additionalProperties:!1,description2:"TO BE REVIEWED - Proposal based on recent feedback.",page:"CONF,RTPL",jiraLink:"NUI-10722"},category:{title:"category",type:"object",properties:{primaryCategory:{description:"Category of the product or flow",type:["string","null"],regExp:"[A-Z]+",example:"Flight Ticket",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0}},required:["primaryCategory"],additionalProperties:!1,page:"ALL",jiraLink:"NUI-10722",UISpecific:!0},page:{title:"page",type:"object",properties:{pageInfo:{title:"pageInfo",type:"object",properties:{pageID:{description:"Id of the page/state",type:"string",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL",UISpecific:!0},pageName:{description:"Name of the page/state in English",type:"string",regExp:"[A-Z]+",example:"Flex pricer OWD availability",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0},channel:{description:"Digital touchpoint",type:"string",regExp:"[A-Z0-9]+",example:"eRetail",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0}},required:["pageID","pageName","channel"],additionalProperties:!1,page:"ALL",jiraLink:"NUI-10722",UISpecific:!0},category:{$ref:"#/definitions/category"}},required:["pageInfo","category"],additionalProperties:!1,page:"ALL",UISpecific:!0,jiraLink:"NUI-10722"},upsell:{title:"upsell",type:"object",properties:{otherFareFamily:{title:"otherFareFamily",type:"array",items:{type:"object",properties:{fareFamilyCode:{description:"Fare family code",type:"string",regExp:"[A-Z0-9]+",example:"BUS",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0},fareFamilyName:{description:"Fare family name (localized)",type:"string",regExp:"[A-Z0-9]+",example:"Business",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION",UISpecific:!0},price:{description:"Price if any",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0},isNotCombinable:{type:"boolean",description:"Is cell not combinable",regExp:"(true|false)",example:"true",page:"AVAIL",jiraLink:"NUI-10896",activation:"DATA_UPSELL",UISpecific:!0}},required:["fareFamilyCode"],additionalProperties:!1,page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL"},UISpecific:!0},teaser:{title:"teaser",type:"object",properties:{fareFamilyCode:{description:"Fare family code of the one displayed in the upsell teaser",type:"string",regExp:"[A-Z0-9]+",example:"FIRST",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0},fareFamilyName:{description:"Fare family name (localized)",type:"string",regExp:"[A-Z0-9]+",example:"First",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION",UISpecific:!0}},additionalProperties:!1,page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0}},required:["otherFareFamily"],additionalProperties:!1,page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0},segment:{type:"object",properties:{departure:{$ref:"#/definitions/alias_city"},arrival:{$ref:"#/definitions/alias_city"},leg:{$ref:"#/definitions/array_leg"},cabin:{description:"Cabin code",type:"string",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10722"},bookingClass:{description:"RBD (Reservation Booking Designator)",type:"string",regExp:"[A-Z]",example:"E",page:"AVAIL",jiraLink:"NUI-10722"},marketingFlightNumber:{description:"Flight number of the marketing carrier",type:"string",regExp:"[0-9]{3-4}",example:"1234",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingAirlineCode:{description:"Airline code of the marketing carrier",type:"string",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingOperationalSuffix:{description:"Operational suffix if any",type:"string",regExp:"[A-Z]",example:"A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},operatedBy:{$ref:"#/definitions/operatedBy"},segmentID:{description:"Id of the segment on which the service is booked (present only if the service is booked at segment level)",type:"number",regExp:"[0-9]",example:"1",page:"PURC",jiraLink:"NUI-10986"},status:{description:"Possible value: waiverCandidate",type:"string"}},required:["departure","arrival"],additionalProperties:!1,page:"AVAIL",jiraLink:"NUI-10722"},bound:{type:"object",properties:{boundID:{description:"Id of the bound (starting from 1)",type:"number",regExp:"[0-9]+",example:"8",page:"AVAIL",jiraLink:"NUI-10722"},fareFamilyCode:{description:"Fare family code",type:"string",regExp:"[A-Z0-9]+",example:"BUS",page:"AVAIL",jiraLink:"NUI-10722"},fareFamilyName:{description:"Fare family name (localized)",type:"string",regExp:"[A-Z0-9]+",example:"Business",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},departure:{$ref:"#/definitions/alias_city"},arrival:{$ref:"#/definitions/alias_city"},price:{$ref:"#/definitions/alias_price"},pricePerTravellerType:{title:"pricePerTravellerType",type:"array",items:{type:"object",properties:{passengerTypeCode:{description:"Passenger type code (PTC)",type:"string",regExp:"[A-Z0-9]{3}",example:"ADT",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},totalPrice:{description:"Total price of the booking",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]{3}",example:"EUR",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},required:["passengerTypeCode","totalPrice","currency"],additionalProperties:!1,page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},upsell:{$ref:"#/definitions/upsell"},segment:{$ref:"#/definitions/array_segment"},disruptedDates:{$ref:"#/definitions/array_date"},waivableDates:{$ref:"#/definitions/array_date"},status:{type:"object",properties:{modificationAllowed:{type:"boolean",description:"True if modification is allowed, false otherwise",jiraLink:"NUI-15570"}}}},additionalProperties:!1,page:"ALL",jiraLink:"NUI-10721",UISpecific:!0},leg:{type:"object",properties:{departure:{$ref:"#/definitions/alias_city"},arrival:{$ref:"#/definitions/alias_city"},cabin:{description:"Cabin code",type:"string",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},bookingClass:{description:"RBD (Reservation Booking Designator)",type:"string",regExp:"[A-Z]",example:"E",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},aircraftCode:{description:"Aircraft/equipment type/code",type:"string",regExp:"[A-Z0-9]+",example:"A380",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingFlightNumber:{description:"Flight number of the marketing carrier",type:"string",regExp:"[0-9]{3-4}",example:"1234",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingAirlineCode:{description:"Airline code of the marketing carrier",type:"string",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingOperationalSuffix:{description:"Operational suffix if any",type:"string",regExp:"[A-Z]",example:"A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},operatedBy:{$ref:"#/definitions/operatedBy"},legID:{description:"Id of the leg (starting from 1)",type:"number",regExp:"[0-9]+",example:"1",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"}},required:["departure","arrival"],additionalProperties:!1,page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},operatedBy:{title:"operatedBy",type:"object",properties:{disclosure:{description:"Operated by information",type:"string",regExp:"[A-Z]+",example:"Amadeus Airlines for Amadeus Airways",page:"AVAIL",jiraLink:"NUI-10722"},airlineCode:{description:"Airline code of the marketing carrier",type:"string",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10722"}},required:["disclosure","airlineCode"],additionalProperties:!1,page:"AVAIL",jiraLink:"NUI-10727",activation:"leg: DATA_PRODUCT_DETAILS segment: NONE"},alias_city:{type:"object",properties:{countryCode:{description:"Departure or Arrival country code provided in input by the end user",type:"string",regExp:"[A-Z]{2}",example:"GB",page:"ALL",jiraLink:"NUI-15685"},cityCode:{description:"Departure or Arrival City Code",type:"string",regExp:"[A-Z]{3}",example:"PAR",page:"ALL",jiraLink:"NUI-10721"},locationCode:{description:"Departure or Arrival location code provided in input by the end user (it could be a city or airport code)",type:"string",regExp:"[A-Z]{3}",example:"PAR",page:"ALL",jiraLink:"NUI-10721"},airportCode:{description:"Departure Airport Code",type:"string",regExp:"[A-Z]{3}",example:"CDG",page:"AVAIL",jiraLink:"NUI-10722"},date:{description:"Departure or Arrival Date",type:["string","null"],regExp:"YYYY-MM-DD",example:"31-12-2013",page:"ALL",jiraLink:"NUI-10721"},terminal:{description:"Departure or Arrival terminal",type:"string",regExp:"[A-Z0-9]+",example:"TW",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},dateTime:{description:"Date and time of when the search has been initiated",type:["string","null"],regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL",jiraLink:"NUI-10721"}},additionalProperties:!1,page:"ALL",jiraLink:"NUI-10721"},searchInputs:{title:"searchInputs",type:"object",properties:{dateTime:{description:"Date and time of when the search has been initiated",type:"string",format:"date-time",regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL",jiraLink:"NUI-10721"},tripType:{description:"Type of trip (one way, round trip, multi-destination)",type:"string",regExp:"[A-Z]",example:"RT",page:"ALL",jiraLink:"NUI-10721"},flexibleDateValue:{description:"Value of the flexibility (3 for +/- 3 days of flexibility)",type:"number",regExp:"[0-9]+",example:"3",page:"ALL",jiraLink:"NUI-10721"},cabin:{description:"Cabin code",type:"string",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10728"},traveller:{title:"traveller",type:"array",items:{type:"object",properties:{passengerTypeCode:{description:"Type of passenger",type:"string",regExp:"[A-Z0-9]{3}",example:"ADT",page:"ALL",jiraLink:"NUI-10721"},numberOfPassengers:{description:"Number of this type of passenger",type:"number",regExp:"[0-9]{1-2}",example:"2",page:"ALL",jiraLink:"NUI-10721"}},required:["passengerTypeCode","numberOfPassengers"],additionalProperties:!1,page:"ALL",jiraLink:"NUI-10721"}},commercialFareFamily:{title:"commercialFareFamily",type:"array",items:{type:"object",properties:{code:{description:"Commercial fare families provided in input",type:"string",regExp:"[A-Z0-9]+",example:"BUS",page:"ALL",jiraLink:"NUI-10721"},name:{description:"Commercial fare families provided in input (localized)",type:"string",regExp:"[A-Z0-9]+",example:"Business",page:"ALL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"}},required:["code"],additionalProperties:!1,page:"ALL",jiraLink:"NUI-10721"}},corporateCode:{title:"Corporate Code",description:"Corporate code specified in inputs and allowing to access to negotiated fares",type:"string",regExp:"[A-Z0-9]+",example:"SummerPromo",page:"ALL",jiraLink:"NUI-10734"},bound:{$ref:"#/definitions/array_bound"}},required:["dateTime","commercialFareFamily","bound"],additionalProperties:!1,description2:"TO BE REVIEWED - Proposal based on recent feedback.",page:"ALL",jiraLink:"NUI-10721"},flightTicket:{title:"flightTicket",type:"object",properties:{bound:{$ref:"#/definitions/array_bound"},journeyLength:{description:"Number of days between the departure and return flights",type:"number",regExp:"[0-9]+",example:"7",page:"ALL"}},required:["bound"],additionalProperties:!1,page:"ALL",jiraLink:"NUI-10721",UISpecific:!0},product:{type:"object",properties:{productInfo:{$ref:"#/definitions/productInfo"},category:{$ref:"#/definitions/category"},ancillaryService:{$ref:"#/definitions/ancillaryService"},insurance:{title:"insurance",type:"object",properties:{code:{description:"Insurance product code",type:"string",regExp:"[A-Z0-9]+",page:"CONF,RTPL",jiraLink:"NUI-10730"},price:{type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10730"},travellerID:{description:"Traveller id if the insurance is selected per passenger",type:"number",regExp:"[0-9]",example:"1",page:"CONF,RTPL",jiraLink:"NUI-10730"}},required:["code","price"],additionalProperties:!1,page:"CONF,RTPL",jiraLink:"NUI-10730"},flightTicket:{$ref:"#/definitions/flightTicket"}},required:["productInfo","category"],additionalProperties:!1,page:"ALL",jiraLink:"NUI-10722",UISpecific:!0},ancillaryService:{title:"ancillaryService",type:"object",properties:{categoryCode:{description:"Code of the category of service",type:"string",regExp:"[A-Z]{3}",example:"BAG",page:"PURC",jiraLink:"NUI-10986"},categoryName:{description:"Service category name in English",type:"string",regExp:"[A-Z]+",example:"Baggage",page:"PURC",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},serviceCode:{description:"Code of the ancillary service",type:"string",regExp:"[A-Z]{4}",example:"XBAG",page:"PURC",jiraLink:"NUI-10986"},serviceName:{description:"Service name in English",type:"string",regExp:"[A-Z]+",example:"Extra baggage",page:"PURC",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},travellerID:{description:"Id of the traveller to whom the service is associated",type:"number",regExp:"[0-9]",example:"1",page:"PURC",jiraLink:"NUI-10986"},price:{description:"Price of this ancillary service",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"PURC",jiraLink:"NUI-10986"},initialPrice:{description:"Initial price when a discount is applied on this ancillary service",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"PURC",jiraLink:"NUI-10986"},quantity:{description:"Number of booked services",type:"number",regExp:"[0-9]+",example:"1",page:"PURC",jiraLink:"NUI-10986"},status:{description:"Status of the ancillary service in servicing flow to distinguish already booked/paid services from the ones selected through the servicing flow",type:"string",comment:"values: paid, selected / default: selected",regExp:"[A-Z]",example:"paid",page:"MPURC",jiraLink:"NUI-10737"},boundID:{description:"Id of the bound on which the service is booked (present only if the service is booked at bound level)",type:"number",regExp:"[0-9]",example:"1",page:"PURC",jiraLink:"NUI-10986"},segmentID:{description:"Id of the segment on which the service is booked (present only if the service is booked at segment level)",type:"number",regExp:"[0-9]",example:"1",page:"PURC",jiraLink:"NUI-10986"},emd:{description:"EMD number",type:"string",regExp:"[A-Z0-9]+",example:"123456789",page:"CONF,RTPL",jiraLink:"NUI-10986"},characteristic:{title:"characteristic",type:"array",items:{type:"object",properties:{key:{type:"string",regExp:"[A-Z0-9]+",example:"Weight",page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS"},value:{description:"Value of the service characteristic",type:"string",regExp:"[A-Z0-9]+",example:"20KG",page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS"}},required:["key","value"],additionalProperties:!1,page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS"}},seatSelection:{description:"Seat selected by the user",type:"string",regExp:"[0-9]+[A-Za-z]{1}",example:"2A",page:"PURC,CONF,RTPL",jiraLink:"NUI-14081"}},required:["categoryCode","serviceCode","travellerID","price","initialPrice","quantity","status","emd"],additionalProperties:!1,page:"PURC",jiraLink:"NUI-10986"},cart:{title:"cart",type:"object",properties:{price:{$ref:"#/definitions/alias_total"},item:{$ref:"#/definitions/array_item"},creationDate:{description:"Creation date of the cart in the system",type:"string",regExp:"dd/MM/yyyy",example:"12-31-13",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["price","item"],additionalProperties:!1,page:"FARE,ALPI"},context:{title:"context",type:"object",properties:{backend:{description:"Site code",type:"string",regExp:"[A-Za-z0-9-]+",example:"OCGPRD",page:"ALL",jiraLink:"NUI-14081"},site:{description:"Site code",type:"string",regExp:"[A-Z]{8}",example:"ABCDABCD",page:"ALL",jiraLink:"NUI-10722"},sessionID:{description:"Digital session id",type:"string",regExp:"[A-Z]+",example:"abcdefghjkl",page:"ALL",jiraLink:"NUI-10722"},language:{description:"Language code",type:"string",regExp:"[A-Z]{2}",example:"GB",page:"ALL",jiraLink:"NUI-10722"},market:{description:"Market id",type:"string",regExp:"[A-Z]{2-3}",example:"US",page:"ALL",jiraLink:"NUI-10722"},officeID:{description:"Office id composed of: IATA city or airport code - first three characters Corporate code - 2 characters Corporate qualifier - 1 character from 0 to 9 Office identifier - final three characters",type:"string",regExp:"[A-Z0-9]{9}",example:"LON1A08AA",jiraLink:"NUI-10722"},bookingFlow:{description:"BOOKING_FLOW input parameter",type:"string",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-11437",activation:"DATA_CONTEXT"},tripFlow:{description:"TRIP_FLOW input parameter",type:"string",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-11437",activation:"DATA_CONTEXT"},externalID:{description:"HTTP input parameter",type:"string",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-10722"},PNR:{description:"PNR record",type:"object",properties:{recLoc:{description:"HTTP input parameter",type:"string",regExp:"[A-Z0-9]+",page:"PURC,RTPL",jiraLink:"NUI-15422",activation:"DATA_CONTEXT"},creationDate:{description:"HTTP input parameter",type:"string",regExp:"YYYY-MM-DDThh:mm:ss.sZ",page:"RTPL",jiraLink:"NUI-15422",activation:"DATA_CONTEXT"}},required:["recLoc"],additionalProperties:!1,page:"PURC,RTPL",jiraLink:"NUI-15422",activation:"DATA_CONTEXT"}},patternProperties:{"^externalID[1-9]$":{description:"HTTP input parameter",type:"string",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-11437",activation:"DATA_CONTEXT"},"^peVariable[1-5]$":{description:"HTTP input parameter",type:"string",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-11437",activation:"DATA_CONTEXT"}},additionalProperties:!1,description2:"TO BE REVIEWED - Proposal based on recent feedback.",page:"ALL",jiraLink:"NUI-10722"},user_context:{title:"context",type:"object",properties:{internetProtocolAddress:{description:"IP address of the end user",type:"string",regExp:"[0-9]{1-3}\\.[0-9]{1-3}",example:"255.255.255.255",page:"ALL",jiraLink:"NUI-10527",activation:"DATA_PII"},deviceType:{description:"Type of device",type:"string",regExp:"[A-Z]+",example:"TABLET",page:"ALL",jiraLink:"NUI-10527",activation:"DATA_CONTEXT",UISpecific:!0},browser:{description:"User agent of the browser",type:"string",regExp:"[A-Z0-9]+",example:"IE8..11|Edge|FireFox|Chrome|Opera|Safari",page:"ALL",jiraLink:"NUI-10527",activation:"DATA_CONTEXT",UISpecific:!0}},additionalProperties:!1,description2:"TO BE REVIEWED - Proposal based on recent feedback.",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0},alias_total:{description2:"TO BE REVIEWED - Proposal based on recent feedback.",type:"object",properties:{totalPrice:{description:"Total price of the booking",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10722"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"},totalMiles:{description2:"TO BE REVIEWED - Do we need miles on bound level?",description:"Miles amount",type:"number",regExp:"[0-9]+",example:"2000",page:"CONF,RTPL",jiraLink:"NUI-10732"},cashPaidInMiles:{description2:"TO BE REVIEWED - Do we need miles on bound level?.",description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},installmentInterests:{description2:"TO BE REVIEWED - Do we need installment on bound level?.",description:"Interests of the installment plan",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"transaction: CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PRICE_DETAILS"},insurancePrice:{description:"Price of the insurance product(s)",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10730",activation:"DATA_PRICE_DETAILS"},AAASPrice:{description:"Total amount of all ancillary services",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"cart: PURC / transaction: CONF,RTPL",jiraLink:"NUI-10986",activation:"DATA_PRICE_DETAILS"},initialPrice:{description:"Initial price when a discount is applied on the totalPrice",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10735",activation:"DATA_PRICE_DETAILS"},baseFarePrice:{description:"Base fare of the flight segments",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10722"},taxAmount:{description:"Tax amout",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10722"},fuelSurcharge:{description:"Sum of fuel surcharges for all travellers",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},serviceFee:{description:"Booking fee",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10722"},rebookingDetails:{title:"rebookingDetails",type:"object",properties:{newTotal:{description:"New total price",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},previousTotal:{description:"Previous total price",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},previousCurrency:{description:"Currency code of the previous total price",type:"string",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},newCurrency:{description:"Currency code of the new total price",type:"string",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},changeFees:{description:"Change fees",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},refund:{description:"Amount to be refunded",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},balance:{description:"Balance to pay",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},nonRefundableAmount:{description:"Non-refundable amout",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"cart: FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["newTotal","previousTotal","previousCurrency","newCurrency","changeFees","refund","balance","nonRefundableAmount"],additionalProperties:!1,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},additionalProperties:!1},event:{title:"event",type:"object",properties:{eventInfo:{title:"eventInfo",type:"object",properties:{eventName:{description:"Name of the event in English",type:"string",regExp:"[A-Z]+",example:"Click on fare family description link",page:"ALL",UISpecific:!0},key:{description:"Event key",type:"string",regExp:"[A-Z0-9]+",example:"FareFamilyDescription",page:"ALL",UISpecific:!0},value:{description:"Event value",type:["string","number"],regExp:"[A-Z0-9]+",example:"ECO",page:"ALL",UISpecific:!0},pageID:{description:"Page/state identifier",type:"string",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL",UISpecific:!0},componentID:{description:"Component identifier",type:"string",regExp:"[A-Z0-9]+",example:"TripSummary",page:"ALL",UISpecific:!0},eventType:{description:"Type of the event catched",type:"string",regExp:"[A-Z0-9]+",example:"Display",page:"ALL",UISpecific:!0}},required:["eventName","key"],additionalProperties:!1,page:"ALL",UISpecific:!0},category:{$ref:"#/definitions/category"},timestamp:{title:"timestamp",description:"Timestamp when event is triggered",type:"string",regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL",UISpecific:!0}},required:["eventInfo","category","timestamp"],additionalProperties:!1,page:"ALL",UISpecific:!0},array_bound:{type:"array",items:{$ref:"#/definitions/bound"}},array_event:{type:"array",items:{$ref:"#/definitions/event"}},array_item:{title:"item",type:"array",items:{$ref:"#/definitions/item"}},array_leg:{type:"array",items:{$ref:"#/definitions/leg"}},array_segment:{type:"array",items:{$ref:"#/definitions/segment"}},array_user:{type:"array",items:{$ref:"#/definitions/user"}},array_user_context:{type:"array",items:{$ref:"#/definitions/user_context"}},array_date:{description:"Dynamic waiver dates",items:[{description:"Date in the format YYYY-MM-DD",type:"string"}],additionalItems:!1,additionalProperties:!1}},skipValidation:!1},"2.0.0":{$schema:"http://json-schema.org/draft-04/schema#",version:"2.0.0",$ref:"#/definitions/digitalData",description:"PROPOSAL for digitalData v.2.0.0",status:"released",release:"2018-01-08",skipValidation:!1,definitions:{digitalData:{description:"PROPOSAL for digitalData v.2.0.0",type:"object",properties:{version:{type:"string",description:"Version of the data layer",regExp:"[0-9]+.[0-9]+.[0-9]+",example:"2.0.0",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,alwaysPushed:!0},pageInstanceID:{type:"string",description:"Current page/state identifier",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,alwaysPushed:!0},digitalTouchpoint:{$ref:"#/definitions/digitalTouchpoint"},user:{type:"array",page:"ALL",jiraLink:"NUI-16580",UISpecific:!0,items:{$ref:"#/definitions/user_ref"}},traveller:{type:"array",page:"ALL",jiraLink:"NUI-10722",items:{$ref:"#/definitions/traveller_ref"}},searchInput:{$ref:"#/definitions/searchInput"},product:{title:"product",type:"array",UISpecific:!0,items:{$ref:"#/definitions/product"}},cart:{$ref:"#/definitions/cart"},transaction:{$ref:"#/definitions/transaction"},page:{$ref:"#/definitions/page"},event:{type:"array",items:{$ref:"#/definitions/event"}}},required:["version","pageInstanceID","traveller"],additionalProperties:!1},digitalTouchpoint:{title:"digitalTouchpoint",description2:"TO BE REVIEWED - Proposal based on recent feedback.",type:"object",page:"ALL",jiraLink:"NUI-16580",UISpecific:!0,properties:{category:{description:"NEW OBJECT - structure according to W3C guidelines",type:"object",UISpecific:!0,properties:{primaryCategory:{description:"Digital touchpoint",type:"string",regExp:"[A-Za-z0-9-]+",example:"DX",page:"ALL",UISpecific:!0}},required:["primaryCategory"],additionalProperties:!1},touchpointInfo:{description:"NEW OBJECT - structure according to W3C guidelines",type:"object",page:"ALL",jiraLink:"NUI-16580",UISpecific:!0,properties:{language:{description:"Language code",type:"string",regExp:"[A-Z]{2}",example:"GB",page:"ALL",jiraLink:"NUI-10722"},market:{description:"Market id",type:"string",regExp:"[A-Z]{2-3}",example:"US",page:"ALL",jiraLink:"NUI-10722"},backend:{type:"string",description:"Site code",regExp:"[A-Za-z0-9-]+",example:"OCGPRD",page:"ALL",jiraLink:"NUI-14081"},site:{type:"string",description:"Site code",regExp:"[A-Z]{8}",example:"ABCDABCD",page:"ALL",jiraLink:"NUI-10722"},sessionID:{description:"Digital session id",type:"string",regExp:"[A-Z]+",example:"abcdefghjkl",page:"ALL",jiraLink:"NUI-10722"},officeID:{description:"Office id composed of: IATA city or airport code - first three characters Corporate code - 2 characters Corporate qualifier - 1 character from 0 to 9 Office identifier - final three characters",type:"string",regExp:"[A-Z0-9]{9}",example:"LON1A08AA",jiraLink:"NUI-10722"},bookingFlow:{description:"BOOKING_FLOW input parameter",type:"string",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-11437",activation:"DATA_CONTEXT",UISpecific:!0},tripFlow:{description:"TRIP_FLOW input parameter",type:"string",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-11437",activation:"DATA_CONTEXT"},HTTPParameter:{description:"NEW OBJECT - based on DDS feedback - single array to consolidate all HTTPParameter",type:"array",items:{type:"object",properties:{key:{type:"string"},value:{type:"object"}},required:["key","value"],additionalProperties:!1}},campaign:{description:"NEW OBJECT - based on BIA requirement",type:"array",items:{type:"object",properties:{key:{type:"string"},value:{type:"string"}},required:["key","value"],additionalProperties:!1}}},additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["category","touchpointInfo"],additionalProperties:!1},user_ref:{title:"user",type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{profile:{type:"array",jiraLink:"NUI-16581",UISpecific:!0,description:"NEW OBJECT - to provide W3C compliance",items:{type:"object",properties:{profileInfo:{description:"NEW OBJECT - to provide W3C compliance",type:"object",jiraLink:"NUI-16581",UISpecific:!0,properties:{profileID:{description:"CEM Profile ID",type:"string",page:"ALL"},internetProtocolAddress:{type:"string",description:"IP address of the end user",regExp:"[0-9]{1-3}\\.[0-9]{1-3}",example:"255.255.255.255",page:"ALL",jiraLink:"NUI-10527",activation:"DATA_PII"},deviceType:{type:"string",description:"Type of device",regExp:"[A-Z]+",example:"TABLET",page:"ALL",jiraLink:"NUI-10527",activation:"DATA_CONTEXT",UISpecific:!0},userAgent:{description:"User agent of the browser",type:"string",regExp:"[A-Z0-9]+",example:"IE8..11|Edge|FireFox|Chrome|Opera|Safari",page:"ALL",jiraLink:"NUI-16581",activation:"DATA_CONTEXT",UISpecific:!0},OS:{description:"Version of Operating system",type:"string",regExp:"[A-Z0-9]+",example:"Windows 10|MacOs X|Ubuntu 16.06",page:"ALL",jiraLink:"NUI-16581",activation:"DATA_CONTEXT",UISpecific:!0},countryOfResidence:{type:"string",page:"ALL",activation:"DATA_CONTEXT",UISpecific:!0}},additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["profileInfo"],additionalProperties:!1}}},required:["profile"],additionalProperties:!1},traveller_ref:{title:"traveller",type:"object",page:"ALL",properties:{travellerID:{type:"number",description:"Id of the traveller within the cart",regExp:"[0-9]",example:"1",page:"ALL",jiraLink:"NUI-10722"},passengerTypeCode:{type:"string",description:"Passenger type code (PTC)",regExp:"[A-Z0-9]{3}",example:"ADT",page:"ALL",jiraLink:"NUI-10722"},lastName:{type:"string",description:"Last name of the traveller",regExp:"[A-Z]+",example:"Doe",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"},firstName:{type:"string",description:"First name of the traveller",regExp:"[A-Z]+",example:"John",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"},midName:{type:"string",description:"Middle name of the traveller",regExp:"[A-Z]+",example:"Clarke",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"},suffix:{type:"string",description:"Traveller suffix",regExp:"[A-Z]+",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"},title:{type:"string",description:"Title of the traveller",regExp:"[A-Z]+",example:"Mr",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},dateOfBirth:{type:"string",description:"Data of birth of the traveller",regExp:"dd/MM/yyyy",example:"12-31-13",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},nationality:{type:"string",description:"Nationality of the traveller",regExp:"[A-Z]+",example:"FR",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},gender:{type:"string",comment:"Values: Male/Female",description:"Gender of the traveller",regExp:"[A-Z]",example:"Male",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},loyaltyProgram:{title:"loyaltyProgram",type:"array",items:{type:"object",page:"ALL",jiraLink:"NUI-10722",additionalProperties:!1,properties:{program:{type:"string",description:"Usually associated airline code",regExp:"[A-Z0-9]{2}",example:"1A",page:"ALL",jiraLink:"NUI-10722"},number:{type:"string",description:"Frequent flyer number",regExp:"[A-Z0-9]+",example:"123456789",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"}}}},eTicket:{title:"eTicket",type:"array",items:{type:"object",page:"CONF,RTPL",jiraLink:"NUI-10722",properties:{ticketNumber:{type:"string",description:"Array of e-ticket numbers associated to the traveller id",regExp:"[A-Z0-9]+",page:"CONF,RTPL",jiraLink:"NUI-10722",example:"1"}},required:["ticketNumber"],additionalProperties:!1}},contactInformation:{title:"contactInformation",description:"Object which stores emails and phone numbers",type:"object",page:"AAAS,PURC",jiraLink:"NUI-15420",properties:{email:{title:"email",type:"array",items:{type:"object",page:"AAAS,PURC",jiraLink:"NUI-15420",properties:{emailAddress:{type:"string",format:"email",description:"Email address",regExp:"[A-Z@.]+",example:"noreply@amadeus.com",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"}},required:["emailAddress"],additionalProperties:!1}},phone:{title:"phone",type:"array",items:{type:"object",page:"AAAS,PURC",jiraLink:"NUI-15420",properties:{phoneNumber:{type:"string",description:"Phone number",regExp:"[0-9]+",example:"555632554",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"}},required:["phoneNumber"],additionalProperties:!1}}},additionalProperties:!1},document:{title:"document",description:"NEW OBJECT - based on PNR feedback",page:"AAAS,PURC",jiraLink:"NUI-15420",type:"array",items:{type:"object",properties:{type:{type:"string",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"},number:{type:"string",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"}},additionalProperties:!1}},address:{type:"array",page:"AAAS,PURC",jiraLink:"NUI-15420",items:{$ref:"#/definitions/address"}}},required:["travellerID","passengerTypeCode"],additionalProperties:!1},searchInput:{title:"searchInput",type:"object",page:"ALL",jiraLink:"NUI-16581",properties:{category:{description:"NEW OBJECT - to provide W3C compliance",type:"object",page:"ALL",jiraLink:"NUI-16581",properties:{primaryCategory:{type:"string",description:"Type of trip (one way, round trip, multi-destination)",page:"ALL",jiraLink:"NUI-16581",regExp:"[A-Z0-9]+",example:"R"}},required:["primaryCategory"],additionalProperties:!1},searchInputInfo:{description:"NEW OBJECT - to provide W3C compliance",type:"object",page:"ALL",jiraLink:"NUI-16581",properties:{dateTime:{type:"string",format:"date-time",description:"Date and time of when the search has been initiated",regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL",jiraLink:"NUI-10721"},corporateCode:{title:"Corporate Code",type:"string",description:"Corporate code specified in inputs and allowing to access to negotiated fares",regExp:"[A-Z0-9]+",example:"SummerPromo",page:"ALL",jiraLink:"NUI-10734"},flightDetails:{description:"NEW NAME - (instead of -bound- which was confusing due to element with the same name in flightTicket)",type:"array",items:{$ref:"#/definitions/flightDetails_ref"}}},required:["dateTime","flightDetails"],additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["category","searchInputInfo"],additionalProperties:!1},productDetails:{description:"NEW OBJECT - to represent the mutual exclusive characteristic",type:"object",properties:{flightTicket:{$ref:"#/definitions/flightTicket"},ancillaryService:{$ref:"#/definitions/ancillaryService"},insurance:{$ref:"#/definitions/insurance"}},additionalProperties:!1},product:{title:"product",description:"NEW JSON SCHEMA STRUCTURE - W3C compliance",type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{productInfo:{title:"productInfo",type:"object",properties:{productID:{type:"number",description:"Id of a product",regExp:"[0-9]+",example:"8",page:"ALL",jiraLink:"NUI-10722"},productDetails:{$ref:"#/definitions/productDetails"}},required:["productID","productDetails"],additionalProperties:!1},category:{type:"object",properties:{primaryCategory:{description:"Product category",type:"string",regExp:"[A-Za-z0-9-]+",example:"FlightTicket",page:"ALL"}},required:["primaryCategory"],additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["productInfo","category"],additionalProperties:!1},cart:{title:"cart",type:"object",page:"FARE,ALPI",properties:{cartInfo:{description:"NEW OBJECT - for W3C compliance",type:"object",page:"PURC,RTPL",jiraLink:"NUI-16580",properties:{cartID:{type:"string",page:"PURC,RTPL",jiraLink:"NUI-16580"},creationDate:{description:"Creation date of the cart in the system",type:"string",regExp:"dd/MM/yyyy",example:"12-31-13",page:"PURC,RTPL",jiraLink:"NUI-16580"},modificationDate:{description:"Last modification date of the cart in the system",type:"string",regExp:"dd/MM/yyyy",example:"12-31-13",page:"PURC,RTPL",jiraLink:"NUI-16580"}},required:["cartID","creationDate"],additionalProperties:!1},price:{$ref:"#/definitions/price"},item:{type:"array",items:{$ref:"#/definitions/item_ref"}},attributes:{$ref:"#/definitions/attributes"}},required:["price","item"],additionalProperties:!1},transaction:{title:"transaction",description:"NEW STRUCTURE - to provide W3C compliance",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10722",properties:{PNR:{description:"NEW OBJECT - moved from context",type:"object",page:"PURC,RTPL",jiraLink:"NUI-15422",activation:"DATA_CONTEXT",properties:{recLoc:{type:"string",description:"HTTP input parameter",regExp:"[A-Z0-9]+",page:"PURC,RTPL",jiraLink:"NUI-15422",activation:"DATA_CONTEXT"},creationDate:{type:"string",description:"Creation dateTime of the PNR",regExp:"YYYY-MM-DDThh:mm:ss.sZ",page:"RTPL",jiraLink:"NUI-15422",activation:"DATA_CONTEXT"},modificationDate:{description:"NEW OBJECT - based on recent feedback",type:"string",regExp:"YYYY-MM-DDThh:mm:ss.sZ",page:"MPURC,RPURC",jiraLink:"NUI-16767",activation:"DATA_CONTEXT"}},required:["recLoc"],additionalProperties:!1},total:{$ref:"#/definitions/price"},profile:{description:"NEW OBJECT - to provide W3C compliance",type:"object",properties:{profileInfo:{type:"object",properties:{profileID:{type:"string"}},required:["profileID"],additionalProperties:!1},billingAddress:{$ref:"#/definitions/address"},shippingAddress:{$ref:"#/definitions/address"}},required:["profileInfo"],additionalProperties:!1},payment:{type:"array",items:{$ref:"#/definitions/payment"}},item:{type:"array",items:{$ref:"#/definitions/item_ref"}},attributes:{$ref:"#/definitions/attributes"}},additionalProperties:!1},page:{title:"page",type:"object",page:"ALL",UISpecific:!0,jiraLink:"NUI-10722",properties:{pageInfo:{title:"pageInfo",type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{pageID:{type:"string",description:"Id of the page/state",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL",UISpecific:!0},pageName:{type:"string",description:"Name of the page/state in English",regExp:"[A-Z]+",example:"Flex pricer OWD availability",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0}},required:["pageID","pageName"],additionalProperties:!1},category:{$ref:"#/definitions/category"},attributes:{$ref:"#/definitions/attributes"}},required:["pageInfo","category"],additionalProperties:!1},event:{title:"event",type:"object",page:"ALL",UISpecific:!0,properties:{eventInfo:{title:"eventInfo",type:"object",page:"ALL",UISpecific:!0,properties:{eventName:{type:"string",description:"Context of the event in English",regExp:"[A-Z]+",example:"Click on fare family description link",page:"ALL",UISpecific:!0},key:{type:"string",description:"Event action key",regExp:"[A-Z0-9]+",example:"FareFamilyDescription",page:"ALL",UISpecific:!0},pageID:{type:"string",description:"Page/state identifier",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL",UISpecific:!0},componentID:{type:"string",description:"Component identifier",regExp:"[A-Z0-9]+",example:"TripSummary",page:"ALL",UISpecific:!0},timestamp:{title:"timestamp",type:"string",description:"Timestamp when event is triggered",regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL",UISpecific:!0}},required:["eventName","key","timestamp"],additionalProperties:!1},category:{$ref:"#/definitions/category"},attributes:{$ref:"#/definitions/attributes"}},required:["eventInfo","category"],additionalProperties:!1},flightTicket:{title:"flightTicket",type:"object",page:"ALL",jiraLink:"NUI-10721",UISpecific:!0,properties:{bound:{type:"array",page:"ALL",jiraLink:"NUI-10721",UISpecific:!0,items:{$ref:"#/definitions/bound_ref"}},journeyLength:{type:"number",description:"Number of days between the departure and return flights",regExp:"[0-9]+",example:"7",page:"ALL"}},required:["bound"],additionalProperties:!1},bound_ref:{type:"object",page:"ALL",jiraLink:"NUI-10721",UISpecific:!0,properties:{boundID:{type:"number",description:"Id of the bound (starting from 1)",regExp:"[0-9]+",example:"8",page:"AVAIL",jiraLink:"NUI-10722"},fareFamilyCode:{type:"string",description:"Fare family code",regExp:"[A-Z0-9]+",example:"BUS",page:"AVAIL",jiraLink:"NUI-10722"},fareFamilyName:{type:"string",description:"Fare family name (localized)",regExp:"[A-Z0-9]+",example:"Business",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},departure:{$ref:"#/definitions/city"},arrival:{$ref:"#/definitions/city"},price:{$ref:"#/definitions/price"},upsell:{$ref:"#/definitions/upsell"},segment:{type:"array",items:{$ref:"#/definitions/segment"}}},additionalProperties:!1},flightDetails_ref:{description:"NEW OBJECT - used to capture flight details in the searchInput",type:"object",page:"ALL",jiraLink:"NUI-16581",properties:{departure:{$ref:"#/definitions/city"},arrival:{$ref:"#/definitions/city"},passenger:{type:"array",page:"ALL",jiraLink:"NUI-10721",items:{type:"object",page:"ALL",jiraLink:"NUI-10721",properties:{passengerTypeCode:{description:"Type of passenger",type:"string",regExp:"[A-Z0-9]{3}",example:"ADT",page:"ALL",jiraLink:"NUI-10721"},numberOfPassengers:{description:"Number of this type of passenger",type:"number",regExp:"[0-9]{1-2}",example:"2",page:"ALL",jiraLink:"NUI-10721"}},required:["passengerTypeCode","numberOfPassengers"],additionalProperties:!1}},commercialFareFamily:{title:"commercialFareFamily",type:"array",page:"ALL",jiraLink:"NUI-10721",items:{type:"object",properties:{code:{description:"Commercial fare families provided in input",type:"string",regExp:"[A-Z0-9]+",example:"BUS",page:"ALL",jiraLink:"NUI-10721"},name:{description:"Commercial fare families provided in input (localized)",type:"string",regExp:"[A-Z0-9]+",example:"Business",page:"ALL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"}},required:["code"],additionalProperties:!1}},tripType:{description:"Type of trip (one way, round trip, multi-destination)",type:"string",regExp:"[A-Z]",example:"RT",page:"ALL",jiraLink:"NUI-10721"},flexibleDateValue:{description:"Value of the flexibility (3 for +/- 3 days of flexibility)",type:"number",regExp:"[0-9]+",example:"3",page:"ALL",jiraLink:"NUI-10721"},cabin:{description:"Cabin code",type:"string",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10728"}},additionalProperties:!1},segment:{type:"object",page:"AVAIL",jiraLink:"NUI-10722",properties:{departure:{$ref:"#/definitions/city"},arrival:{$ref:"#/definitions/city"},leg:{type:"array",items:{$ref:"#/definitions/leg"}},cabin:{type:"string",description:"Cabin code",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10722"},bookingClass:{type:"string",description:"RBD (Reservation Booking Designator)",regExp:"[A-Z]",example:"E",page:"AVAIL",jiraLink:"NUI-10722"},marketingFlightNumber:{type:"string",description:"Flight number of the marketing carrier",regExp:"[0-9]{3-4}",example:"1234",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingAirlineCode:{type:"string",description:"Airline code of the marketing carrier",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingOperationalSuffix:{type:"string",description:"Operational suffix if any",regExp:"[A-Z]",example:"A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},operatedBy:{$ref:"#/definitions/operatedBy"},segmentID:{type:"number",description:"Id of the segment on which the service is booked (present only if the service is booked at segment level)",regExp:"[0-9]",example:1,page:"PURC",jiraLink:"NUI-10986"}},required:["departure","arrival"],additionalProperties:!1},leg:{type:"object",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS",properties:{departure:{$ref:"#/definitions/city"},arrival:{$ref:"#/definitions/city"},cabin:{type:"string",description:"Cabin code",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},bookingClass:{type:"string",description:"RBD (Reservation Booking Designator)",regExp:"[A-Z]",example:"E",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},aircraftCode:{type:"string",description:"Aircraft/equipment type/code",regExp:"[A-Z0-9]+",example:"A380",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingFlightNumber:{type:"string",description:"Flight number of the marketing carrier",regExp:"[0-9]{3-4}",example:"1234",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingAirlineCode:{type:"string",description:"Airline code of the marketing carrier",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingOperationalSuffix:{type:"string",description:"Operational suffix if any",regExp:"[A-Z]",example:"A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},operatedBy:{$ref:"#/definitions/operatedBy"},legID:{type:"number",description:"Id of the leg (starting from 1)",regExp:"[0-9]+",example:1,page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"}},required:["departure","arrival"],additionalProperties:!1},operatedBy:{title:"operatedBy",type:"object",page:"AVAIL",jiraLink:"NUI-10727",activation:"leg: DATA_PRODUCT_DETAILS segment: NONE",properties:{disclosure:{type:"string",description:"Operated by information",regExp:"[A-Z]+",example:"Amadeus Airlines for Amadeus Airways",page:"AVAIL",jiraLink:"NUI-10722"},airlineCode:{type:"string",description:"Airline code of the marketing carrier",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10722"}},required:["disclosure","airlineCode"],additionalProperties:!1},city:{type:"object",page:"ALL",jiraLink:"NUI-10721",properties:{countryCode:{type:"string",description:"Departure or Arrival country code provided in input by the end user",regExp:"[A-Z]{2}",example:"GB",page:"ALL",jiraLink:"NUI-15686"},cityCode:{type:"string",description:"Departure or Arrival City Code",regExp:"[A-Z]{3}",example:"PAR",page:"ALL",jiraLink:"NUI-10721"},locationCode:{type:"string",description:"Departure or Arrival location code provided in input by the end user (it could be a city or airport code)",regExp:"[A-Z]{3}",example:"PAR",page:"ALL",jiraLink:"NUI-10721"},airportCode:{type:"string",description:"Departure Airport Code",regExp:"[A-Z]{3}",example:"CDG",page:"AVAIL",jiraLink:"NUI-10722"},terminal:{type:"string",description:"Departure or Arrival terminal",regExp:"[A-Z0-9]+",example:"TW",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},dateTime:{type:"string",description:"Date and time of when the search has been initiated",regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL",jiraLink:"NUI-10721"}},additionalProperties:!1},upsell:{title:"upsell",type:"object",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0,properties:{otherFareFamily:{title:"otherFareFamily",type:"array",UISpecific:!0,items:{type:"object",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",properties:{fareFamilyCode:{type:"string",description:"Fare family code",regExp:"[A-Z0-9]+",example:"BUS",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0},fareFamilyName:{type:"string",description:"Fare family name (localized)",regExp:"[A-Z0-9]+",example:"Business",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_UPSELL,DATA_LOCALIZATION",UISpecific:!0},price:{type:"number",description:"Price if any",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0}},required:["fareFamilyCode"],additionalProperties:!1}},teaser:{title:"teaser",type:"object",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0,properties:{fareFamilyCode:{type:"string",description:"Fare family code of the one displayed in the upsell teaser",regExp:"[A-Z0-9]+",example:"FIRST",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0},fareFamilyName:{type:"string",description:"Fare family name (localized)",regExp:"[A-Z0-9]+",example:"First",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_UPSELL,DATA_LOCALIZATION",UISpecific:!0}},additionalProperties:!1}},required:["otherFareFamily"],additionalProperties:!1},ancillaryService:{title:"ancillaryService",type:"object",page:"PURC",jiraLink:"NUI-10986",properties:{categoryCode:{type:"string",description:"Code of the category of service",regExp:"[A-Z]{3}",example:"BAG",page:"PURC",jiraLink:"NUI-10986"},categoryName:{type:"string",description:"Service category name in English",regExp:"[A-Z]+",example:"Baggage",page:"PURC",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},serviceCode:{type:"string",description:"Code of the ancillary service",regExp:"[A-Z]{4}",example:"XBAG",page:"PURC",jiraLink:"NUI-10986"},serviceName:{type:"string",description:"Service name in English",regExp:"[A-Z]+",example:"Extra baggage",page:"PURC",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},travellerID:{type:"number",description:"Id of the traveller to whom the service is associated",regExp:"[0-9]",example:1,page:"PURC",jiraLink:"NUI-10986"},price:{$ref:"#/definitions/ancillaryPrice"},quantity:{type:"number",description:"Number of booked services",regExp:"[0-9]+",example:"1",page:"PURC",jiraLink:"NUI-10986"},status:{type:"string",comment:"values: paid, selected / default: selected",description:"Status of the ancillary service in servicing flow to distinguish already booked/paid services from the ones selected through the servicing flow",regExp:"[A-Z]",example:"paid",page:"MPURC",jiraLink:"NUI-10737"},boundID:{type:"number",description:"Id of the bound on which the service is booked (present only if the service is booked at bound level)",regExp:"[0-9]",example:"1",page:"PURC",jiraLink:"NUI-10986"},segmentID:{type:"number",description:"Id of the segment on which the service is booked (present only if the service is booked at segment level)",regExp:"[0-9]",example:"1",page:"PURC",jiraLink:"NUI-10986"},emd:{type:"string",description:"EMD number",regExp:"[A-Z0-9]+",example:"123456789",page:"CONF,RTPL",jiraLink:"NUI-10986"},characteristic:{title:"characteristic",type:"array",items:{type:"object",page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS",properties:{key:{type:"string",regExp:"[A-Z0-9]+",example:"Weight",page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS"},value:{type:"string",description:"Value of the service characteristic",regExp:"[A-Z0-9]+",example:"20KG",page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS"}},required:["key","value"],additionalProperties:!1}},seatSelection:{type:"string",description:"Seat selected by the user",regExp:"[0-9]+[A-Za-z]{1}",example:"2A",page:"PURC,CONF,RTPL",jiraLink:"NUI-14081"}},required:["categoryCode","serviceCode","travellerID","price","quantity","status","emd"],additionalProperties:!1},insurance:{title:"insurance",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10730",properties:{code:{description:"Insurance product code",type:"string",regExp:"[A-Z0-9]+",page:"CONF,RTPL",jiraLink:"NUI-10730"},price:{$ref:"#/definitions/insurancePrice"},travellerID:{description:"Traveller id if the insurance is selected per passenger",type:"number",regExp:"[0-9]",example:1,page:"CONF,RTPL",jiraLink:"NUI-10730"}},required:["code","price"],additionalProperties:!1},price:{description:"NEW PRICE OBJECT - based on recent feedback. Providing more structure and support for: multi currency, miles, discount",type:"object",properties:{totalPrice:{type:"object",properties:{amount:{description:"Total price of the booking",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"cart : FARE,ALPI bound : AVAIL",jiraLink:"NUI-10722",activation:"bound: DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"},pricePerTravellerType:{title:"pricePerTravellerType",description:"MOVED from bound to price",type:"array",items:{type:"object",properties:{passengerTypeCode:{description:"Passenger type code (PTC)",type:"string",regExp:"[A-Z0-9]{3}",example:"ADT",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},totalPrice:{type:"object",properties:{amount:{description:"Total price of the booking",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]{3}",example:"EUR",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},additionalProperties:!1}},required:["passengerTypeCode","totalPrice"],additionalProperties:!1,page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},priceBreakdown:{title:"priceBreakdown",description:"NEW OBJECT - to capture price details in a structured way",type:"object",properties:{baseFarePrice:{type:"object",properties:{amount:{description:"Base fare of the flight segments",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10722"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},tax:{type:"object",properties:{totalTax:{type:"object",properties:{amount:{description:"Tax amount",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1},fuelSurcharge:{type:"object",properties:{amount:{description:"Sum of fuel surcharges for all travellers",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1}},required:["totalTax"],additionalProperties:!1},serviceFee:{type:"object",properties:{amount:{description:"Booking fee",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10722"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},ancillaryServicePrice:{type:"object",properties:{amount:{description:"Total amount of all ancillary services",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"cart: PURC / transaction: CONF,RTPL",jiraLink:"NUI-10986",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},insurancePrice:{type:"object",properties:{amount:{description:"Price of the insurance product(s)",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10730",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1}},additionalProperties:!1},currencyConversion:{description:"NEW OBJECT - to support multi-currency use cases",type:"object",properties:{convertedAmount:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},additionalProperties:!1},newValue:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL"}},additionalProperties:!1},exchangeRate:{type:"number"},conversionFee:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},additionalProperties:!1}},required:["convertedAmount","newValue","exchangeRate"],additionalProperties:!1},miles:{description:"NEW OBJECT - to capture miles&cash details in a structured way",type:"object",properties:{milesAmount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},cashPaidInMiles:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"}},required:["milesAmount","cashPaidInMiles"],additionalProperties:!1},discount:{title:"discount",description:"NEW OBJECT - to capture discount details in a structured way",type:"object",page:"CONF,RTPL",jiraLink:"NUI-16177",properties:{initialPrice:{$ref:"#/definitions/initialPrice"},discountPercentValue:{type:"number",page:"CONF,RTPL",jiraLink:"NUI-16177"},discountFixedValue:{type:"object",properties:{amount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-16177",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-16177"}},required:["amount","currency"],additionalProperties:!1}},required:["initialPrice"],additionalProperties:!1},rebookingDetails:{title:"rebookingDetails",type:"object",properties:{initialPrice:{$ref:"#/definitions/initialPrice"},totalPrice:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},balance:{type:"object",properties:{amount:{description:"Balance to pay",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code of the previous total price",type:"string",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1},changeFees:{type:"object",properties:{amount:{description:"Change fees",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code of the previous total price",type:"string",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1},refund:{type:"object",properties:{amount:{description:"Amount to be refunded",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code of the previous total price",type:"string",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1},nonRefundableAmount:{type:"object",properties:{amount:{description:"Non-refundable amout",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"cart: FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code of the previous total price",type:"string",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1}},required:["initialPrice","balance"],additionalProperties:!1,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},additionalProperties:!1},ancillaryPrice:{type:"object",properties:{totalPrice:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},miles:{type:"object",properties:{milesAmount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},cashPaidInMiles:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"}},additionalProperties:!1},discount:{title:"discount",type:"object",properties:{initialPrice:{$ref:"#/definitions/initialPrice"},discountPercentValue:{type:"number"},discountFixedValue:{type:"object",properties:{amount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1}},required:["initialPrice"],additionalProperties:!1}},additionalProperties:!1},insurancePrice:{type:"object",properties:{amount:{type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10730"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},initialPrice:{type:"object",properties:{amount:{description:"Initial price when a discount is applied on the totalPrice",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10735",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},payment:{title:"payment",description:"NOW AS ARRAY- to support multi FOP",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10722",properties:{price:{$ref:"#/definitions/price"},methodOfPayment:{type:"string",description:"Code of the method of payment",regExp:"[A-Z0-9]+",example:"CC",page:"CONF,RTPL"},paymentReference:{type:"string",description:"Reference from the payment provider",regExp:"[A-Z0-9]+",example:"123456789",page:"CONF,RTPL",jiraLink:"NUI-10722"},paymentType:{description:"NEW NAME - more abstract name introduced (instead of creditCardType) in roder to be able to store not only CC type, but also AMOP",type:"string",description2:"Type of credit card (credit card vendor)",regExp:"[A-Z0-9]+",example:"VI",page:"CONF,RTPL",jiraLink:"NUI-10722"},installment:{title:"installment",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT",properties:{plan:{type:"number",description:"Number of instalment to pay the trip",regExp:"[0-9]+",example:"5",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},interest:{type:"number",description:"Amount of interest",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},currency:{type:"string",description:"Currency for the instalment",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},firstMonthAmount:{type:"number",description:"First month amount",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},nextMonthAmount:{type:"number",description:"Next months amount",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"}},required:["plan","interest","currency"],additionalProperties:!1},item:{type:"array",items:{$ref:"#/definitions/item_ref"}}},required:["price","methodOfPayment","paymentReference","paymentType"],additionalProperties:!1},productInfo:{title:"productInfo",type:"object",properties:{productID:{description:"Id of a product",type:"number",regExp:"[0-9]+",example:8,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"}},required:["productID"],additionalProperties:!1,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"},item_ref:{title:"item",type:"object",page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722",properties:{productInfo:{$ref:"#/definitions/productInfo"},quantity:{type:"number"}},required:["productInfo","quantity"],additionalProperties:!1},category:{title:"category",type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{primaryCategory:{type:["string","null"],description:"Category of the product or flow",regExp:"[A-Z]+",example:"Flight Ticket",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0}},required:["primaryCategory"],additionalProperties:!1},attributes:{title:"details",description:"NEW OBJECT - providing flexibility to capture additional information (e.g. DDS specific)",type:"array",page:"ALL",jiralink:"NUI-14753",items:{type:"object",properties:{key:{description:"key for the attribute",type:"string",page:"ALL",jiralink:"NUI-14753"},value:{description:" value",type:"object",page:"ALL",jiralink:"NUI-14753"}},required:["key","value"],additionalProperties:!1}},address:{description:"NEW OBJECT - based on PNR feedback",type:"object",properties:{line1:{type:"string",activation:"DATA_PII"},line2:{type:"string",activation:"DATA_PII"},city:{type:"string",activation:"DATA_PII"},country:{type:"string",activation:"DATA_PII"},zipCode:{type:"string",activation:"DATA_PII"},state:{type:"string",activation:"DATA_PII"}},additionalProperties:!1}}},"2.2.0":{$schema:"http://json-schema.org/draft-04/schema#",version:"2.2.0",$ref:"#/definitions/digitalData",description:"Digital data schema for AeRE - JCP",definitions:{digitalData:{description:"Schema for digitalData v.2.2.0",type:"object",properties:{version:{type:"string",description:"Version of the data layer",regExp:"[0-9]+.[0-9]+.[0-9]+",example:"2.0.0",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,alwaysPushed:!0},pageInstanceID:{type:"string",description:"Current page/state identifier",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,alwaysPushed:!0},digitalTouchpoint:{$ref:"#/definitions/digitalTouchpoint"},user:{type:"array",page:"ALL",jiraLink:"NUI-16580",UISpecific:!0,items:{$ref:"#/definitions/user_ref"}},traveller:{type:"array",page:"ALL",jiraLink:"NUI-10722",items:{$ref:"#/definitions/traveller_ref"}},searchInput:{$ref:"#/definitions/searchInput"},product:{title:"product",type:"array",UISpecific:!0,items:{$ref:"#/definitions/product"}},cart:{$ref:"#/definitions/cart"},transaction:{$ref:"#/definitions/transaction"},page:{UISpecific:!0,$ref:"#/definitions/page"},feature:{$ref:"#/definitions/feature"},event:{UISpecific:!0,type:"array",items:{$ref:"#/definitions/event"}},service:{$ref:"#/definitions/service"}},required:["version","pageInstanceID","traveller"],additionalProperties:!1},error:{type:"object",properties:{code:{description:"error code",type:"string"},message:{description:"error message",type:"string"},severity:{description:"error severity (F-E-W-I)",type:"string"},subError:{type:"array",items:{type:"object",properties:{code:{description:"error code",type:"string"},message:{description:"error message",type:"string"},severity:{description:"error severity (F-E-W-I)",type:"string"}}}}}},service:{type:"object",properties:{serviceInfo:{type:"object",properties:{serviceName:{type:"string"},status:{description:"status of the service call - 0 if OK - not 0 if KO: e.g. 46 if pax issue",type:"number"},error:{type:"array",items:{$ref:"#/definitions/error"}}}}}},digitalTouchpoint:{title:"digitalTouchpoint",description2:"TO BE REVIEWED - Proposal based on recent feedback.",type:"object",page:"ALL",jiraLink:"NUI-16580",UISpecific:!0,properties:{category:{description:"NEW OBJECT - structure according to W3C guidelines",type:"object",UISpecific:!0,properties:{primaryCategory:{description:"Digital touchpoint",type:"string",regExp:"[A-Za-z0-9-]+",example:"DX",page:"ALL",UISpecific:!0}},required:["primaryCategory"],additionalProperties:!1},touchpointInfo:{description:"NEW OBJECT - structure according to W3C guidelines",type:"object",page:"ALL",jiraLink:"NUI-16580",UISpecific:!0,properties:{language:{description:"Language code",type:"string",regExp:"[A-Z]{2}",example:"GB",page:"ALL",jiraLink:"NUI-10722"},market:{description:"Market id",type:"string",regExp:"[A-Z]{2-3}",example:"US",page:"ALL",jiraLink:"NUI-10722"},backend:{type:"string",description:"Backend",regExp:"[A-Za-z0-9-]+",example:"OCGPRD",page:"ALL",jiraLink:"NUI-14081"},site:{type:"string",description:"Site code",regExp:"[A-Z]{8}",example:"ABCDABCD",page:"ALL",jiraLink:"NUI-10722"},sessionID:{description:"Digital session id",type:"string",regExp:"[A-Z]+",example:"abcdefghjkl",page:"ALL",jiraLink:"NUI-10722"},officeID:{description:"Office id composed of: IATA city or airport code - first three characters Corporate code - 2 characters Corporate qualifier - 1 character from 0 to 9 Office identifier - final three characters",type:"string",regExp:"[A-Z0-9]{9}",example:"LON1A08AA",jiraLink:"NUI-10722"},bookingFlow:{description:"BOOKING_FLOW input parameter",type:"string",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-11437",UISpecific:!0,activation:"DATA_CONTEXT"},tripFlow:{description:"TRIP_FLOW input parameter",type:"string",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-11437",activation:"DATA_CONTEXT"},HTTPParameter:{description:"NEW OBJECT - based on DDS feedback - single array to consolidate all HTTPParameter",type:"array",items:{type:"object",properties:{key:{type:"string"},value:{type:"object"}},required:["key","value"],additionalProperties:!1}},campaign:{description:"NEW OBJECT - based on BIA requirement",type:"array",items:{type:"object",properties:{key:{type:"string"},value:{type:"string"}},required:["key","value"],additionalProperties:!1}}},additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["category","touchpointInfo"],additionalProperties:!1},user_ref:{title:"user",type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{profile:{type:"array",jiraLink:"NUI-16581",UISpecific:!0,description:"NEW OBJECT - to provide W3C compliance",items:{type:"object",properties:{profileInfo:{description:"NEW OBJECT - to provide W3C compliance",type:"object",jiraLink:"NUI-16581",UISpecific:!0,properties:{profileID:{description:"User ID",type:"string",page:"ALL"},clientID:{description:"The clientID is linked to the cookie.",type:"string",page:"ALL",jiraLink:"NUI-17821",activation:"DATA_PII",UISpecific:!0},userID:{description:"User-id is used to associate multiple sessions across several touchpoints. Provides a more accurate user count based on signed-in users. DX maps the value to USER_ID from the request",type:"string",example:"0100",page:"ALL",jiraLink:"NUI-15784",UISpecific:!0},internetProtocolAddress:{type:"string",description:"IP address of the end user",regExp:"[0-9]{1-3}\\.[0-9]{1-3}",example:"255.255.255.255",page:"ALL",jiraLink:"NUI-10527",activation:"DATA_PII"},deviceType:{type:"string",description:"Type of device",regExp:"[A-Z]+",example:"TABLET",page:"ALL",jiraLink:"NUI-10527",activation:"DATA_CONTEXT",UISpecific:!0},userAgent:{description:"User agent of the browser",type:"string",regExp:"[A-Z0-9]+",example:"IE8..11|Edge|FireFox|Chrome|Opera|Safari",page:"ALL",jiraLink:"NUI-16581",activation:"DATA_CONTEXT",UISpecific:!0},OS:{description:"Version of Operating system",type:"string",regExp:"[A-Z0-9]+",example:"Windows 10|MacOs X|Ubuntu 16.06",page:"ALL",jiraLink:"NUI-16581",activation:"DATA_CONTEXT",UISpecific:!0},countryOfResidence:{type:"string",page:"ALL",activation:"DATA_CONTEXT",UISpecific:!0}},additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["profileInfo"],additionalProperties:!1,UISpecific:!0}}},required:["profile"],additionalProperties:!1},traveller_ref:{title:"traveller",type:"object",page:"ALL",properties:{travellerID:{type:"number",description:"Id of the traveller within the cart",regExp:"[0-9]",example:"1",page:"ALL",jiraLink:"NUI-10722"},profileID:{description:"CEM Profile ID",type:"string"},passengerTypeCode:{type:"string",description:"Passenger type code (PTC)",regExp:"[A-Z0-9]{3}",example:"ADT",page:"ALL",jiraLink:"NUI-10722"},lastName:{type:"string",description:"Last name of the traveller",regExp:"[A-Z]+",example:"Doe",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"},firstName:{type:"string",description:"First name of the traveller",regExp:"[A-Z]+",example:"John",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"},midName:{type:"string",description:"Middle name of the traveller",regExp:"[A-Z]+",example:"Clarke",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"},suffix:{type:"string",description:"Traveller suffix",regExp:"[A-Z]+",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"},title:{type:"string",description:"Title of the traveller",regExp:"[A-Z]+",example:"Mr",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},dateOfBirth:{type:"string",description:"Data of birth of the traveller",regExp:"dd/MM/yyyy",example:"12-31-13",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},nationality:{type:"string",description:"Nationality of the traveller",regExp:"[A-Z]+",example:"FR",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},gender:{type:"string",comment:"Values: Male/Female",description:"Gender of the traveller",regExp:"[A-Z]",example:"Male",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},loyaltyProgram:{title:"loyaltyProgram",type:"array",items:{type:"object",page:"ALL",jiraLink:"NUI-10722",additionalProperties:!1,properties:{program:{type:"string",description:"Usually associated airline code",regExp:"[A-Z0-9]{2}",example:"1A",page:"ALL",jiraLink:"NUI-10722"},number:{type:"string",description:"Frequent flyer number",regExp:"[A-Z0-9]+",example:"123456789",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"}}}},eTicket:{title:"eTicket",type:"array",items:{type:"object",page:"CONF,RTPL",jiraLink:"NUI-10722",properties:{ticketNumber:{type:"string",description:"Array of e-ticket numbers associated to the traveller id",regExp:"[A-Z0-9]+",page:"CONF,RTPL",jiraLink:"NUI-10722",example:"1"}},required:["ticketNumber"],additionalProperties:!1}},contactInformation:{title:"contactInformation",description:"Object which stores emails and phone numbers",type:"object",page:"AAAS,PURC",jiraLink:"NUI-15420",properties:{email:{title:"email",type:"array",items:{type:"object",page:"AAAS,PURC",jiraLink:"NUI-15420",properties:{emailAddress:{type:"string",format:"email",description:"Email address",regExp:"[A-Z@.]+",example:"noreply@amadeus.com",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"}},required:["emailAddress"],additionalProperties:!1}},phone:{title:"phone",type:"array",items:{type:"object",page:"AAAS,PURC",jiraLink:"NUI-15420",properties:{phoneNumber:{type:"string",description:"Phone number",regExp:"[0-9]+",example:"555632554",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"}},required:["phoneNumber"],additionalProperties:!1}}},additionalProperties:!1},document:{title:"document",description:"NEW OBJECT - based on PNR feedback",page:"AAAS,PURC",jiraLink:"NUI-15420",type:"array",items:{type:"object",properties:{type:{type:"string",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"},number:{type:"string",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"}},additionalProperties:!1}},address:{type:"array",page:"AAAS,PURC",jiraLink:"NUI-15420",items:{$ref:"#/definitions/address"}},hasInfant:{description:"Indicator for infant",type:"boolean",comment:"Indicates if an infant travels along with the passenger. Values: true/false ",page:"AAAS,PURC",jiraLink:"NUI-18841"}},required:["travellerID","passengerTypeCode"],additionalProperties:!1},searchInput:{title:"searchInput",type:"object",page:"ALL",jiraLink:"NUI-16581",properties:{category:{description:"NEW OBJECT - to provide W3C compliance",type:"object",page:"ALL",jiraLink:"NUI-16581",properties:{primaryCategory:{type:"string",description:"Type of trip (one way, round trip, multi-destination)",page:"ALL",jiraLink:"NUI-16581",regExp:"[A-Z0-9]+",example:"R"}},required:["primaryCategory"],additionalProperties:!1},searchInputInfo:{description:"NEW OBJECT - to provide W3C compliance",type:"object",page:"ALL",jiraLink:"NUI-16581",properties:{dateTime:{type:"string",format:"date-time",description:"Date and time of when the search has been initiated",regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL",jiraLink:"NUI-10721"},corporateCode:{title:"Corporate Code",type:"string",description:"Corporate code specified in inputs and allowing to access to negotiated fares",regExp:"[A-Z0-9]+",example:"SummerPromo",page:"ALL",jiraLink:"NUI-10734"},flightDetails:{description:"NEW NAME - (instead of -bound- which was confusing due to element with the same name in flightTicket)",type:"array",items:{$ref:"#/definitions/flightDetails_ref"}}},required:["dateTime","flightDetails"],additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["category","searchInputInfo"],additionalProperties:!1},productDetails:{description:"NEW OBJECT - to represent the mutual exclusive characteristic",type:"object",properties:{flightTicket:{$ref:"#/definitions/flightTicket"},ancillaryService:{$ref:"#/definitions/ancillaryService"},insurance:{$ref:"#/definitions/insurance"}},additionalProperties:!1},product:{title:"product",description:"NEW JSON SCHEMA STRUCTURE - W3C compliance",type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{productInfo:{title:"productInfo",type:"object",properties:{productID:{type:"number",description:"Id of a product",regExp:"[0-9]+",example:"8",page:"ALL",jiraLink:"NUI-10722"},productDetails:{$ref:"#/definitions/productDetails"}},required:["productID","productDetails"],additionalProperties:!1},category:{type:"object",properties:{primaryCategory:{description:"Product category",type:"string",regExp:"[A-Za-z0-9-]+",example:"FlightTicket",page:"ALL"}},required:["primaryCategory"],additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["productInfo","category"],additionalProperties:!1},cart:{title:"cart",type:"object",page:"FARE,ALPI",properties:{cartInfo:{description:"NEW OBJECT - for W3C compliance",type:"object",page:"PURC,RTPL",jiraLink:"NUI-16580",properties:{cartID:{type:"string",page:"PURC,RTPL",jiraLink:"NUI-16580"},creationDate:{description:"Creation date of the cart in the system",type:"string",regExp:"dd/MM/yyyy",example:"12-31-13",page:"PURC,RTPL",jiraLink:"NUI-16580"},modificationDate:{description:"Last modification date of the cart in the system",type:"string",regExp:"dd/MM/yyyy",example:"12-31-13",page:"PURC,RTPL",jiraLink:"NUI-16580"}},required:["cartID","creationDate"],additionalProperties:!1},price:{$ref:"#/definitions/price"},item:{type:"array",items:{$ref:"#/definitions/item_ref"}},attributes:{$ref:"#/definitions/attributes"}},required:["price","item"],additionalProperties:!1},transaction:{title:"transaction",description:"NEW STRUCTURE - to provide W3C compliance",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10722",properties:{PNR:{description:"NEW OBJECT - moved from context",type:"object",page:"PURC,RTPL",jiraLink:"NUI-15422",activation:"DATA_CONTEXT",properties:{recLoc:{type:"string",description:"HTTP input parameter",regExp:"[A-Z0-9]+",page:"PURC,RTPL",jiraLink:"NUI-15422",activation:"DATA_CONTEXT"},creationDate:{type:"string",description:"Creation dateTime of the PNR",regExp:"YYYY-MM-DDThh:mm:ss.sZ",page:"RTPL",jiraLink:"NUI-15422",activation:"DATA_CONTEXT"},modificationDate:{description:"NEW OBJECT - based on recent feedback",type:"string",regExp:"YYYY-MM-DDThh:mm:ss.sZ",page:"MPURC,RPURC",jiraLink:"NUI-16767",activation:"DATA_CONTEXT"},mode:{description:"Describes the current state of the travel: C creation - M modification",type:"string"},state:{description:"Booking Status of the PNR (P - pending, B - prebooked, Q - confirmed)",type:"string"}},required:["recLoc"],additionalProperties:!1},total:{$ref:"#/definitions/price"},profile:{description:"NEW OBJECT - to provide W3C compliance",type:"object",properties:{profileInfo:{type:"object",properties:{profileID:{type:"string"}},required:["profileID"],additionalProperties:!1},billingAddress:{$ref:"#/definitions/address"},shippingAddress:{$ref:"#/definitions/address"}},required:["profileInfo"],additionalProperties:!1},payment:{type:"array",items:{$ref:"#/definitions/payment"}},item:{type:"array",items:{$ref:"#/definitions/item_ref"}},attributes:{$ref:"#/definitions/attributes"}},additionalProperties:!1},page:{title:"page",type:"object",page:"ALL",UISpecific:!0,jiraLink:"NUI-10722",properties:{pageInfo:{title:"pageInfo",type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{pageID:{type:"string",description:"Id of the page/state",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL",UISpecific:!0},pageName:{type:"string",description:"Name of the page/state in English",regExp:"[A-Z]+",example:"Flex pricer OWD availability",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0},timing:{$ref:"#/definitions/timing"}},required:["pageID","pageName"],additionalProperties:!1},category:{$ref:"#/definitions/category"},attributes:{$ref:"#/definitions/attributes"}},required:["pageInfo","category"],additionalProperties:!1},event:{title:"event",type:"object",page:"ALL",UISpecific:!0,properties:{eventInfo:{title:"eventInfo",type:"object",page:"ALL",UISpecific:!0,properties:{eventName:{type:"string",description:"Context of the event in English",regExp:"[A-Z]+",example:"FareFamilyDetails",page:"ALL",UISpecific:!0},key:{type:"string",description:"Event name",regExp:"[A-Z0-9]+",example:"ClickFareFamilyDescrip",page:"ALL",UISpecific:!0},pageID:{type:"string",description:"Page/state identifier",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL",UISpecific:!0},productID:{description:"Product identifier",type:"string",page:"ALL",UISpecific:!0},componentID:{type:"string",description:"Component identifier",regExp:"[A-Z0-9]+",example:"TripSummary",page:"ALL",UISpecific:!0},timestamp:{title:"timestamp",type:"string",description:"Timestamp when event is triggered",regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL",UISpecific:!0}},required:["eventName","key","timestamp"],additionalProperties:!1},category:{$ref:"#/definitions/category"},attributes:{$ref:"#/definitions/attributes"}},required:["eventInfo","category"],additionalProperties:!1},feature:{description:"NEW OBJECT - to capture information regarding activated product features",type:"array",items:{type:"object",properties:{category:{$ref:"#/definitions/category"},featureInfo:{type:"object",properties:{featureName:{type:"string"},ComponentID:{type:"string"}},required:["featureName"],additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["category","featureInfo"],additionalProperties:!1}},flightTicket:{title:"flightTicket",type:"object",page:"ALL",jiraLink:"NUI-10721",UISpecific:!0,properties:{itineraryPrice:{description:"Gives the price of the whole itinerary.",type:"object",items:{$ref:"#/definitions/price"}},bound:{type:"array",page:"ALL",jiraLink:"NUI-10721",UISpecific:!0,items:{$ref:"#/definitions/bound_ref"}},journeyLength:{type:"number",description:"Number of days between the departure and return flights",regExp:"[0-9]+",example:"7",page:"ALL"}},required:["bound"],additionalProperties:!1},bound_ref:{type:"object",page:"ALL",jiraLink:"NUI-10721",UISpecific:!0,properties:{boundID:{type:"number",description:"Id of the bound (starting from 1)",regExp:"[0-9]+",example:"8",page:"AVAIL",jiraLink:"NUI-10722"},fareFamilyCode:{type:"string",description:"Fare family code",regExp:"[A-Z0-9]+",example:"BUS",page:"AVAIL",jiraLink:"NUI-10722"},fareFamilyName:{type:"string",description:"Fare family name (localized)",regExp:"[A-Z0-9]+",example:"Business",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},departure:{$ref:"#/definitions/city"},arrival:{$ref:"#/definitions/city"},price:{$ref:"#/definitions/price"},upsell:{$ref:"#/definitions/upsell"},status:{type:"object",jiraLink:"NUI-15570,NUI-17821",page:"AVAIL",properties:{modificationAllowed:{type:"boolean",description:"True if modification is allowed, false otherwise",jiraLink:"NUI-15570,NUI-17821",page:"AVAIL"}}},segment:{type:"array",items:{$ref:"#/definitions/segment"}}},additionalProperties:!1},flightDetails_ref:{description:"NEW OBJECT - used to capture flight details in the searchInput",type:"object",page:"ALL",jiraLink:"NUI-16581",properties:{departure:{$ref:"#/definitions/city"},arrival:{$ref:"#/definitions/city"},passenger:{type:"array",page:"ALL",jiraLink:"NUI-10721",items:{type:"object",page:"ALL",jiraLink:"NUI-10721",properties:{passengerTypeCode:{description:"Type of passenger",type:"string",regExp:"[A-Z0-9]{3}",example:"ADT",page:"ALL",jiraLink:"NUI-10721"},numberOfPassengers:{description:"Number of this type of passenger",type:"number",regExp:"[0-9]{1-2}",example:"2",page:"ALL",jiraLink:"NUI-10721"}},required:["passengerTypeCode","numberOfPassengers"],additionalProperties:!1}},commercialFareFamily:{title:"commercialFareFamily",type:"array",page:"ALL",jiraLink:"NUI-10721",items:{type:"object",properties:{code:{description:"Commercial fare families provided in input",type:"string",regExp:"[A-Z0-9]+",example:"BUS",page:"ALL",jiraLink:"NUI-10721"},name:{description:"Commercial fare families provided in input (localized)",type:"string",regExp:"[A-Z0-9]+",example:"Business",page:"ALL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"}},required:["code"],additionalProperties:!1}},tripType:{description:"Type of trip (O - one way, R - round trip, M - multi-destination)",type:"string",regExp:"[A-Z]",example:"RT",page:"ALL",jiraLink:"NUI-10721"},flexibleDateValue:{description:"Value of the flexibility (3 for +/- 3 days of flexibility)",type:"number",regExp:"[0-9]+",example:"3",page:"ALL",jiraLink:"NUI-10721"},cabin:{description:"Cabin code",type:"string",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10728"},fareFamilyCode:{description:"Fare family code",type:"string",regExp:"[A-Z0-9]+",example:"BUS",page:"AVAIL",jiraLink:"NUI-10722"},fareFamilyName:{description:"Fare family name (localized)",type:"string",regExp:"[A-Z0-9]+",example:"Business",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},disruptedDates:{type:"array",description:"Disrupted dates - TO BE COMPLETED",items:[{description:"Date in the format YYYY-MM-DD",type:"string"}]},waivableDates:{type:"array",description:"Dynamic waivable dates - TO BE COMPLETED",items:[{description:"Date in the format YYYY-MM-DD",type:"string"}]}},additionalProperties:!1},segment:{type:"object",page:"AVAIL",jiraLink:"NUI-10722",properties:{departure:{$ref:"#/definitions/city"},arrival:{$ref:"#/definitions/city"},leg:{type:"array",items:{$ref:"#/definitions/leg"}},cabin:{type:"string",description:"Cabin code",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10722"},bookingClass:{type:"string",description:"RBD (Reservation Booking Designator)",regExp:"[A-Z]",example:"E",page:"AVAIL",jiraLink:"NUI-10722"},marketingFlightNumber:{type:"string",description:"Flight number of the marketing carrier",regExp:"[0-9]{3-4}",example:"1234",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingAirlineCode:{type:"string",description:"Airline code of the marketing carrier",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingOperationalSuffix:{type:"string",description:"Operational suffix if any",regExp:"[A-Z]",example:"A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},operatedBy:{$ref:"#/definitions/operatedBy"},segmentID:{type:"number",description:"Id of the segment on which the service is booked (present only if the service is booked at segment level)",regExp:"[0-9]",example:1,page:"PURC",jiraLink:"NUI-10986"},status:{type:"string",description:"Possible value : waivable",example:"waivable",page:"FARE,ALPI",jiraLink:"NUI-????"}},required:["departure","arrival"],additionalProperties:!1},leg:{type:"object",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS",properties:{departure:{$ref:"#/definitions/city"},arrival:{$ref:"#/definitions/city"},cabin:{type:"string",description:"Cabin code",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},bookingClass:{type:"string",description:"RBD (Reservation Booking Designator)",regExp:"[A-Z]",example:"E",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},aircraftCode:{type:"string",description:"Aircraft/equipment type/code",regExp:"[A-Z0-9]+",example:"A380",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingFlightNumber:{type:"string",description:"Flight number of the marketing carrier",regExp:"[0-9]{3-4}",example:"1234",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingAirlineCode:{type:"string",description:"Airline code of the marketing carrier",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingOperationalSuffix:{type:"string",description:"Operational suffix if any",regExp:"[A-Z]",example:"A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},operatedBy:{$ref:"#/definitions/operatedBy"},legID:{type:"number",description:"Id of the leg (starting from 1)",regExp:"[0-9]+",example:1,page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"}},required:["departure","arrival"],additionalProperties:!1},operatedBy:{title:"operatedBy",type:"object",page:"AVAIL",jiraLink:"NUI-10727",activation:"leg: DATA_PRODUCT_DETAILS segment: NONE",properties:{disclosure:{type:"string",description:"Operated by information",regExp:"[A-Z]+",example:"Amadeus Airlines for Amadeus Airways",page:"AVAIL",jiraLink:"NUI-10722"},airlineCode:{type:"string",description:"Airline code of the marketing carrier",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10722"}},required:["disclosure","airlineCode"],additionalProperties:!1},city:{type:"object",page:"ALL",jiraLink:"NUI-10721",properties:{countryCode:{type:"string",description:"Departure or Arrival country code provided in input by the end user",regExp:"[A-Z]{2}",example:"GB",page:"ALL",jiraLink:"NUI-15686"},cityCode:{type:"string",description:"Departure or Arrival City Code",regExp:"[A-Z]{3}",example:"PAR",page:"ALL",jiraLink:"NUI-10721"},locationCode:{type:"string",description:"Departure or Arrival location code provided in input by the end user (it could be a city or airport code)",regExp:"[A-Z]{3}",example:"PAR",page:"ALL",jiraLink:"NUI-10721"},airportCode:{type:"string",description:"Departure Airport Code",regExp:"[A-Z]{3}",example:"CDG",page:"AVAIL",jiraLink:"NUI-10722"},terminal:{type:"string",description:"Departure or Arrival terminal",regExp:"[A-Z0-9]+",example:"TW",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},dateTime:{type:"string",description:"Date and time of when the search has been initiated",regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL",jiraLink:"NUI-10721"}},additionalProperties:!1},upsell:{title:"upsell",type:"object",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0,properties:{otherFareFamily:{title:"otherFareFamily",type:"array",UISpecific:!0,items:{type:"object",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",properties:{fareFamilyCode:{type:"string",description:"Fare family code",regExp:"[A-Z0-9]+",example:"BUS",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0},fareFamilyName:{type:"string",description:"Fare family name (localized)",regExp:"[A-Z0-9]+",example:"Business",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_UPSELL,DATA_LOCALIZATION",UISpecific:!0},price:{type:"number",description:"Price if any",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0},isNotCombinable:{type:"boolean",description:"Is cell not combinable",regExp:"(true|false)",example:"true",page:"AVAIL",jiraLink:"NUI-10896",activation:"DATA_UPSELL",UISpecific:!0}},required:["fareFamilyCode"],additionalProperties:!1}},teaser:{title:"teaser",type:"object",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0,properties:{fareFamilyCode:{type:"string",description:"Fare family code of the one displayed in the upsell teaser",regExp:"[A-Z0-9]+",example:"FIRST",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0},fareFamilyName:{type:"string",description:"Fare family name (localized)",regExp:"[A-Z0-9]+",example:"First",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_UPSELL,DATA_LOCALIZATION",UISpecific:!0}},additionalProperties:!1}},required:["otherFareFamily"],additionalProperties:!1},ancillaryService:{title:"ancillaryService",type:"object",page:"PURC",jiraLink:"NUI-10986",properties:{categoryCode:{type:"string",description:"Code of the category of service",regExp:"[A-Z]{3}",example:"BAG",page:"PURC",jiraLink:"NUI-10986"},categoryName:{type:"string",description:"Service category name in English",regExp:"[A-Z]+",example:"Baggage",page:"PURC",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},serviceCode:{type:"string",description:"Code of the ancillary service",regExp:"[A-Z]{4}",example:"XBAG",page:"PURC",jiraLink:"NUI-10986"},serviceName:{type:"string",description:"Service name in English",regExp:"[A-Z]+",example:"Extra baggage",page:"PURC",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},travellerID:{type:"number",description:"Id of the traveller to whom the service is associated",regExp:"[0-9]",example:1,page:"PURC",jiraLink:"NUI-10986"},price:{$ref:"#/definitions/ancillaryPrice"},isChargeable:{description:"Flag to say if the ancillary service is free or chargeable",type:"boolean",example:!0},quantity:{type:"number",description:"Number of booked services",regExp:"[0-9]+",example:"1",page:"PURC",jiraLink:"NUI-10986"},status:{type:"string",comment:"values: paid, selected / default: selected",description:"Status of the ancillary service in servicing flow to distinguish already booked/paid services from the ones selected through the servicing flow",regExp:"[A-Z]",example:"paid",page:"MPURC",jiraLink:"NUI-10737"},boundID:{type:"number",description:"Id of the bound on which the service is booked (present only if the service is booked at bound level)",regExp:"[0-9]",example:"1",page:"PURC",jiraLink:"NUI-10986"},segmentID:{type:"number",description:"Id of the segment on which the service is booked (present only if the service is booked at segment level)",regExp:"[0-9]",example:"1",page:"PURC",jiraLink:"NUI-10986"},emd:{type:"string",description:"EMD number",regExp:"[A-Z0-9]+",example:"123456789",page:"CONF,RTPL",jiraLink:"NUI-10986"},characteristic:{title:"characteristic",type:"array",items:{type:"object",page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS",properties:{key:{type:"string",regExp:"[A-Z0-9]+",example:"Weight",page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS"},value:{type:"string",description:"Value of the service characteristic",regExp:"[A-Z0-9]+",example:"20KG",page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS"}},required:["key","value"],additionalProperties:!1}},seatSelection:{type:"string",description:"Seat selected by the user",regExp:"[0-9]+[A-Za-z]{1}",example:"2A",page:"PURC,CONF,RTPL",jiraLink:"NUI-14081"}},required:["categoryCode","serviceCode","travellerID","price","quantity","status","emd"],additionalProperties:!1},insurance:{title:"insurance",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10730",properties:{code:{description:"Insurance product code",type:"string",regExp:"[A-Z0-9]+",page:"CONF,RTPL",jiraLink:"NUI-10730"},price:{$ref:"#/definitions/insurancePrice"},travellerID:{description:"Traveller id if the insurance is selected per passenger",type:"number",regExp:"[0-9]",example:1,page:"CONF,RTPL",jiraLink:"NUI-10730"}},required:["code","price"],additionalProperties:!1},price:{description:"NEW PRICE OBJECT - based on recent feedback. Providing more structure and support for: multi currency, miles, discount",type:"object",properties:{totalPrice:{type:"object",properties:{amount:{description:"Total price of the booking",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"cart : FARE,ALPI bound : AVAIL",jiraLink:"NUI-10722",activation:"bound: DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"},pricePerTravellerType:{title:"pricePerTravellerType",description:"MOVED from bound to price",type:"array",items:{type:"object",properties:{passengerTypeCode:{description:"Passenger type code (PTC)",type:"string",regExp:"[A-Z0-9]{3}",example:"ADT",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},totalPrice:{type:"object",properties:{amount:{description:"Total price of the booking",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]{3}",example:"EUR",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},additionalProperties:!1}},required:["passengerTypeCode","totalPrice"],additionalProperties:!1,page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},priceBreakdown:{title:"priceBreakdown",description:"NEW OBJECT - to capture price details in a structured way",type:"object",properties:{baseFarePrice:{type:"object",properties:{amount:{description:"Base fare of the flight segments",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10722"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},tax:{type:"object",properties:{totalTax:{type:"object",properties:{amount:{description:"Tax amount",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1},fuelSurcharge:{type:"object",properties:{amount:{description:"Sum of fuel surcharges for all travellers",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1}},required:["totalTax"],additionalProperties:!1},serviceFee:{type:"object",properties:{amount:{description:"Booking fee",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10722"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},ancillaryServicePrice:{type:"object",properties:{amount:{description:"Total amount of all ancillary services",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"cart: PURC / transaction: CONF,RTPL",jiraLink:"NUI-10986",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},insurancePrice:{type:"object",properties:{amount:{description:"Price of the insurance product(s)",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10730",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1}},additionalProperties:!1},currencyConversion:{description:"NEW OBJECT - to support multi-currency use cases",type:"object",properties:{convertedAmount:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},additionalProperties:!1},newValue:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL"}},additionalProperties:!1},exchangeRate:{type:"number"},conversionFee:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},additionalProperties:!1}},required:["convertedAmount","newValue","exchangeRate"],additionalProperties:!1},miles:{description:"NEW OBJECT - to capture miles&cash details in a structured way",type:"object",properties:{milesAmount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},cashPaidInMiles:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"}},required:["milesAmount","cashPaidInMiles"],additionalProperties:!1},discount:{title:"discount",description:"NEW OBJECT - to capture discount details in a structured way",type:"object",page:"CONF,RTPL",jiraLink:"NUI-16177",properties:{discountType:{type:"string"},initialPrice:{$ref:"#/definitions/initialPrice"},discountPercentValue:{type:"number",page:"CONF,RTPL",jiraLink:"NUI-16177"},discountFixedValue:{type:"object",properties:{amount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-16177",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-16177"}},required:["amount","currency"],additionalProperties:!1}},required:["initialPrice"],additionalProperties:!1},rebookingDetails:{title:"rebookingDetails",type:"object",properties:{initialPrice:{$ref:"#/definitions/initialPrice"},totalPrice:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},balance:{type:"object",properties:{amount:{description:"Balance to pay",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code of the previous total price",type:"string",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1},changeFees:{type:"object",properties:{amount:{description:"Change fees",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code of the previous total price",type:"string",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1},refund:{type:"object",properties:{amount:{description:"Amount to be refunded",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code of the previous total price",type:"string",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1},nonRefundableAmount:{type:"object",properties:{amount:{description:"Non-refundable amout",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"cart: FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code of the previous total price",type:"string",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1}},required:["initialPrice","balance"],additionalProperties:!1,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},additionalProperties:!1},ancillaryPrice:{type:"object",properties:{totalPrice:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},miles:{type:"object",properties:{milesAmount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},cashPaidInMiles:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"}},additionalProperties:!1},discount:{title:"discount",type:"object",properties:{initialPrice:{$ref:"#/definitions/initialPrice"},discountPercentValue:{type:"number"},discountFixedValue:{type:"object",properties:{amount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1}},required:["initialPrice"],additionalProperties:!1}},additionalProperties:!1},insurancePrice:{type:"object",properties:{amount:{type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10730"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},discountType:{type:"string"},initialPrice:{type:"object",properties:{amount:{description:"Initial price when a discount is applied on the totalPrice",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10735",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},payment:{title:"payment",description:"NOW AS ARRAY- to support multi FOP",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10722",properties:{price:{$ref:"#/definitions/price"},methodOfPayment:{type:"string",description:"Code of the method of payment",regExp:"[A-Z0-9]+",example:"CC",page:"CONF,RTPL"},paymentReference:{type:"string",description:"Reference from the payment provider",regExp:"[A-Z0-9]+",example:"123456789",page:"CONF,RTPL",jiraLink:"NUI-10722"},paymentType:{description:"NEW NAME - more abstract name introduced (instead of creditCardType) in roder to be able to store not only CC type, but also AMOP",type:"string",description2:"Type of credit card (credit card vendor)",regExp:"[A-Z0-9]+",example:"VI",page:"CONF,RTPL",jiraLink:"NUI-10722"},installment:{title:"installment",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT",properties:{plan:{type:"number",description:"Number of instalment to pay the trip",regExp:"[0-9]+",example:"5",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},interest:{type:"number",description:"Amount of interest",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},currency:{type:"string",description:"Currency for the instalment",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},firstMonthAmount:{type:"number",description:"First month amount",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},nextMonthAmount:{type:"number",description:"Next months amount",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"}},required:["plan","interest","currency"],additionalProperties:!1},item:{type:"array",items:{$ref:"#/definitions/item_ref"}}},required:["price","methodOfPayment","paymentReference","paymentType"],additionalProperties:!1},productInfo:{title:"productInfo",type:"object",properties:{productID:{description:"Id of a product",type:"number",regExp:"[0-9]+",example:8,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"}},required:["productID"],additionalProperties:!1,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"},item_ref:{title:"item",type:"object",page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722",properties:{productInfo:{$ref:"#/definitions/productInfo"},quantity:{type:"number"}},required:["productInfo","quantity"],additionalProperties:!1},category:{title:"category",type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{primaryCategory:{type:["string","null"],description:"Category of the product or flow",regExp:"[A-Z]+",example:"Flight Ticket",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0}},required:["primaryCategory"],additionalProperties:!1},attributes:{title:"details",description:"NEW OBJECT - providing flexibility to capture additional information (e.g. DDS specific)",type:"array",page:"ALL",jiralink:"NUI-14753",items:{type:"object",properties:{key:{description:"key for the attribute",type:"string",page:"ALL",jiralink:"NUI-14753"},value:{description:" value",type:"object",page:"ALL",jiralink:"NUI-14753"}},required:["key","value"],additionalProperties:!1}},priceValue:{type:"object",properties:{amount:{description:"Price value",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR"}},additionalProperties:!1,required:["amount","currency"]},miles:{type:"object",properties:{milesAmount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",activation:"DATA_PRICE_DETAILS"},cashPaidInMiles:{$ref:"#/definitions/priceValue"}},additionalProperties:!1},address:{description:"NEW OBJECT - based on PNR feedback",type:"object",properties:{line1:{type:"string",activation:"DATA_PII"},line2:{type:"string",activation:"DATA_PII"},city:{type:"string",activation:"DATA_PII"},country:{type:"string",activation:"DATA_PII"},zipCode:{type:"string",activation:"DATA_PII"},state:{type:"string",activation:"DATA_PII"}},additionalProperties:!1},timing:{description:"Represents the response time breakdown (Navigation + Post Navigation) linked to the page. This includes static resource downloads. Times are given in ms. ",type:"object",properties:{error:{type:"array",UISpecific:!0,items:{$ref:"#/definitions/error"}},navigation:{description:"Represents the response time navigation as defined per W3C API. Times are given in ms.",type:"object",properties:{connection:{description:"Time in ms to establish the connection to the server",type:"number",regExp:"[0-9]+",example:"8",page:"ALL",UISpecific:!0},request:{description:"Time in ms to send the request",type:"number",regExp:"[0-9]+",example:"3567",page:"ALL",UISpecific:!0},response:{description:"Time in ms to get the response from server and get it back on the client.",type:"number",regExp:"[0-9]+",example:"63",page:"ALL",UISpecific:!0},DOM:{description:"Time in ms to load the DOM and display the page (overall UI processing time)",type:"number",regExp:"[0-9]+",example:"892",page:"ALL",UISpecific:!0},total:{description:"Total in ms of the navigation phase",type:"number",regExp:"[0-9]+",example:"Flex pricer OWD availability",page:"ALL",UISpecific:!0}},additionalProperties:!1,page:"ALL",UISpecific:!0},postNavigation:{description:"Covers the post-processing after navigation phase. It is optional and would depend on the UI implementation (ex: post processing due to Aria template)is needed after navigation. Times are given in ms.",type:"object",properties:{startAt:{description:"Time in ms when the post navigation is starting. It should be equal or very close to the total of navigation.",type:"number",regExp:"[0-9]+",example:"4530",page:"ALL",UISpecific:!0},pageReady:{description:"Time in ms when the page is ready for display (from UI framework perspective). ",type:"number",regExp:"[0-9]+",example:"13368",page:"ALL",UISpecific:!0},spinnerEnd:{description:"Time in ms when the waiting layer is removed.",type:"number",regExp:"[0-9]+",example:"12688",page:"ALL",UISpecific:!0},total:{description:"Time in ms of the post navigation phase. Depending on UI implementation, total is max of pageReady and spinnerEnd.",type:"number",regExp:"[0-9]+",example:"8838",page:"ALL",UISpecific:!0}},additionalProperties:!1,page:"ALL",UISpecific:!0},total:{description:"Sum of navigation.total and postNavigation.total. It should correspond to the full response time from end-user point of view. Time is given in ms.",type:"number",regExp:"[0-9]+",example:"13368",page:"ALL",UISpecific:!0},resources:{description:"Represents the static resources attached to the current page",type:"object",properties:{count:{description:"Number of static resources downloaded along this page",type:"number",regExp:"[0-9]+",example:"54",page:"ALL",UISpecific:!0},totalDownload:{description:"Amount of download bytes over network (compressed data compression is activated)",type:"number",regExp:"[0-9]+",example:"1432463",page:"ALL",UISpecific:!0}},additionalProperties:!1,page:"ALL",UISpecific:!0}},additionalProperties:!1,page:"ALL",UISpecific:!0}}},"2.3.0":{$schema:"http://json-schema.org/draft-04/schema#",version:"2.3.0",$ref:"#/definitions/digitalData",description:"Digital data schema for AeRE - JCP",definitions:{digitalData:{description:"Schema for digitalData v.2.3.0",type:"object",properties:{version:{type:"string",description:"Version of the data layer",regExp:"[0-9]+.[0-9]+.[0-9]+",example:"2.0.0",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,alwaysPushed:!0},pageInstanceID:{type:"string",description:"Current page/state identifier",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,alwaysPushed:!0},digitalTouchpoint:{$ref:"#/definitions/digitalTouchpoint"},user:{type:"array",page:"ALL",jiraLink:"NUI-16580",UISpecific:!0,items:{$ref:"#/definitions/user_ref"}},traveller:{type:"array",page:"ALL",jiraLink:"NUI-10722",items:{$ref:"#/definitions/traveller_ref"}},searchInput:{$ref:"#/definitions/searchInput"},product:{title:"product",type:"array",UISpecific:!0,items:{$ref:"#/definitions/product"}},cart:{$ref:"#/definitions/cart"},transaction:{$ref:"#/definitions/transaction"},page:{UISpecific:!0,$ref:"#/definitions/page"},feature:{$ref:"#/definitions/feature"},event:{UISpecific:!0,type:"array",items:{$ref:"#/definitions/event"}},service:{$ref:"#/definitions/service"}},required:["version","pageInstanceID","traveller"],additionalProperties:!1},error:{type:"object",properties:{code:{description:"error code",type:"string"},message:{description:"error message",type:"string"},severity:{description:"error severity (F-E-W-I)",type:"string"},subError:{type:"array",items:{type:"object",properties:{code:{description:"error code",type:"string"},message:{description:"error message",type:"string"},severity:{description:"error severity (F-E-W-I)",type:"string"}}}}}},service:{type:"object",properties:{serviceInfo:{type:"object",properties:{serviceName:{type:"string"},status:{description:"status of the service call - 0 if OK - not 0 if KO: e.g. 46 if pax issue",type:"number"},error:{type:"array",items:{$ref:"#/definitions/error"}}}}}},digitalTouchpoint:{title:"digitalTouchpoint",description2:"TO BE REVIEWED - Proposal based on recent feedback.",type:"object",page:"ALL",jiraLink:"NUI-16580",UISpecific:!0,properties:{category:{description:"NEW OBJECT - structure according to W3C guidelines",type:"object",UISpecific:!0,properties:{primaryCategory:{description:"Digital touchpoint",type:"string",regExp:"[A-Za-z0-9-]+",example:"DX",page:"ALL",UISpecific:!0}},required:["primaryCategory"],additionalProperties:!1},touchpointInfo:{description:"NEW OBJECT - structure according to W3C guidelines",type:"object",page:"ALL",jiraLink:"NUI-16580",UISpecific:!0,properties:{language:{description:"Language code",type:"string",regExp:"[A-Z]{2}",example:"GB",page:"ALL",jiraLink:"NUI-10722"},market:{description:"Market id",type:"string",regExp:"[A-Z]{2-3}",example:"US",page:"ALL",jiraLink:"NUI-10722"},backend:{type:"string",description:"Backend",regExp:"[A-Za-z0-9-]+",example:"OCGPRD",page:"ALL",jiraLink:"NUI-14081"},site:{type:"string",description:"Site code",regExp:"[A-Z]{8}",example:"ABCDABCD",page:"ALL",jiraLink:"NUI-10722"},sessionID:{description:"Digital session id",type:"string",regExp:"[A-Z]+",example:"abcdefghjkl",page:"ALL",jiraLink:"NUI-10722"},officeID:{description:"Office id composed of: IATA city or airport code - first three characters Corporate code - 2 characters Corporate qualifier - 1 character from 0 to 9 Office identifier - final three characters",type:"string",regExp:"[A-Z0-9]{9}",example:"LON1A08AA",jiraLink:"NUI-10722"},bookingFlow:{description:"BOOKING_FLOW input parameter",type:"string",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-11437",UISpecific:!0,activation:"DATA_CONTEXT"},tripFlow:{description:"TRIP_FLOW input parameter",type:"string",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-11437",activation:"DATA_CONTEXT"},HTTPParameter:{description:"NEW OBJECT - based on DDS feedback - single array to consolidate all HTTPParameter",type:"array",items:{type:"object",properties:{key:{type:"string"},value:{type:"object"}},required:["key","value"],additionalProperties:!1}},campaign:{description:"NEW OBJECT - based on BIA requirement",type:"array",items:{type:"object",properties:{key:{type:"string"},value:{type:"string"}},required:["key","value"],additionalProperties:!1}}},additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["category","touchpointInfo"],additionalProperties:!1},user_ref:{title:"user",type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{profile:{type:"array",jiraLink:"NUI-16581",UISpecific:!0,description:"NEW OBJECT - to provide W3C compliance",items:{type:"object",properties:{profileInfo:{description:"NEW OBJECT - to provide W3C compliance",type:"object",jiraLink:"NUI-16581",UISpecific:!0,properties:{profileID:{description:"User ID",type:"string",page:"ALL"},clientID:{description:"The clientID is linked to the cookie.",type:"string",page:"ALL",jiraLink:"NUI-17821",activation:"DATA_PII",UISpecific:!0},userID:{description:"User-id is used to associate multiple sessions across several touchpoints. Provides a more accurate user count based on signed-in users. DX maps the value to USER_ID from the request",type:"string",example:"0100",page:"ALL",jiraLink:"NUI-15784",UISpecific:!0},internetProtocolAddress:{type:"string",description:"IP address of the end user",regExp:"[0-9]{1-3}\\.[0-9]{1-3}",example:"255.255.255.255",page:"ALL",jiraLink:"NUI-10527",activation:"DATA_PII"},deviceType:{type:"string",description:"Type of device",regExp:"[A-Z]+",example:"TABLET",page:"ALL",jiraLink:"NUI-10527",activation:"DATA_CONTEXT",UISpecific:!0},userAgent:{description:"User agent of the browser",type:"string",regExp:"[A-Z0-9]+",example:"IE8..11|Edge|FireFox|Chrome|Opera|Safari",page:"ALL",jiraLink:"NUI-16581",activation:"DATA_CONTEXT",UISpecific:!0},OS:{description:"Version of Operating system",type:"string",regExp:"[A-Z0-9]+",example:"Windows 10|MacOs X|Ubuntu 16.06",page:"ALL",jiraLink:"NUI-16581",activation:"DATA_CONTEXT",UISpecific:!0},countryOfResidence:{type:"string",page:"ALL",activation:"DATA_CONTEXT",UISpecific:!0}},additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["profileInfo"],additionalProperties:!1,UISpecific:!0}}},required:["profile"],additionalProperties:!1},traveller_ref:{title:"traveller",type:"object",page:"ALL",properties:{travellerID:{type:"number",description:"Id of the traveller within the cart",regExp:"[0-9]",example:"1",page:"ALL",jiraLink:"NUI-10722"},profileID:{description:"CEM Profile ID",type:"string"},passengerTypeCode:{type:"string",description:"Passenger type code (PTC)",regExp:"[A-Z0-9]{3}",example:"ADT",page:"ALL",jiraLink:"NUI-10722"},lastName:{type:"string",description:"Last name of the traveller",regExp:"[A-Z]+",example:"Doe",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"},firstName:{type:"string",description:"First name of the traveller",regExp:"[A-Z]+",example:"John",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"},midName:{type:"string",description:"Middle name of the traveller",regExp:"[A-Z]+",example:"Clarke",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"},suffix:{type:"string",description:"Traveller suffix",regExp:"[A-Z]+",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"},title:{type:"string",description:"Title of the traveller",regExp:"[A-Z]+",example:"Mr",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},dateOfBirth:{type:"string",description:"Data of birth of the traveller",regExp:"dd/MM/yyyy",example:"12-31-13",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},nationality:{type:"string",description:"Nationality of the traveller",regExp:"[A-Z]+",example:"FR",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},gender:{type:"string",comment:"Values: Male/Female",description:"Gender of the traveller",regExp:"[A-Z]",example:"Male",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},loyaltyProgram:{title:"loyaltyProgram",type:"array",items:{type:"object",page:"ALL",jiraLink:"NUI-10722",additionalProperties:!1,properties:{program:{type:"string",description:"Usually associated airline code",regExp:"[A-Z0-9]{2}",example:"1A",page:"ALL",jiraLink:"NUI-10722"},number:{type:"string",description:"Frequent flyer number",regExp:"[A-Z0-9]+",example:"123456789",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"},milesBalance:{description:"Number of miles / points the traveller has",type:"number",regExp:"^[0-9]+$",example:"1000",page:"RTPL,UPGD, MPURC",jiraLink:"EP-3955"}}}},eTicket:{title:"eTicket",type:"array",items:{type:"object",page:"CONF,RTPL",jiraLink:"NUI-10722",properties:{ticketNumber:{type:"string",description:"Array of e-ticket numbers associated to the traveller id",regExp:"[A-Z0-9]+",page:"CONF,RTPL",jiraLink:"NUI-10722",example:"1"}},required:["ticketNumber"],additionalProperties:!1}},contactInformation:{title:"contactInformation",description:"Object which stores emails and phone numbers",type:"object",page:"AAAS,PURC",jiraLink:"NUI-15420",properties:{email:{title:"email",type:"array",items:{type:"object",page:"AAAS,PURC",jiraLink:"NUI-15420",properties:{emailAddress:{type:"string",format:"email",description:"Email address",regExp:"[A-Z@.]+",example:"noreply@amadeus.com",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"}},required:["emailAddress"],additionalProperties:!1}},phone:{title:"phone",type:"array",items:{type:"object",page:"AAAS,PURC",jiraLink:"NUI-15420",properties:{phoneNumber:{type:"string",description:"Phone number",regExp:"[0-9]+",example:"555632554",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"}},required:["phoneNumber"],additionalProperties:!1}}},additionalProperties:!1},document:{title:"document",description:"NEW OBJECT - based on PNR feedback",page:"AAAS,PURC",jiraLink:"NUI-15420",type:"array",items:{type:"object",properties:{type:{type:"string",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"},number:{type:"string",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"}},additionalProperties:!1}},address:{type:"array",page:"AAAS,PURC",jiraLink:"NUI-15420",items:{$ref:"#/definitions/address"}},hasInfant:{description:"Indicator for infant",type:"boolean",comment:"Indicates if an infant travels along with the passenger. Values: true/false ",page:"AAAS,PURC",jiraLink:"NUI-18841"}},required:["travellerID","passengerTypeCode"],additionalProperties:!1},searchInput:{title:"searchInput",type:"object",page:"ALL",jiraLink:"NUI-16581",properties:{category:{description:"NEW OBJECT - to provide W3C compliance",type:"object",page:"ALL",jiraLink:"NUI-16581",properties:{primaryCategory:{type:"string",description:"Type of trip (one way, round trip, multi-destination)",page:"ALL",jiraLink:"NUI-16581",regExp:"[A-Z0-9]+",example:"R"}},required:["primaryCategory"],additionalProperties:!1},searchInputInfo:{description:"NEW OBJECT - to provide W3C compliance",type:"object",page:"ALL",jiraLink:"NUI-16581",properties:{dateTime:{type:"string",format:"date-time",description:"Date and time of when the search has been initiated",regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL",jiraLink:"NUI-10721"},corporateCode:{title:"Corporate Code",type:"string",description:"Corporate code specified in inputs and allowing to access to negotiated fares",regExp:"[A-Z0-9]+",example:"SummerPromo",page:"ALL",jiraLink:"NUI-10734"},flightDetails:{description:"NEW NAME - (instead of -bound- which was confusing due to element with the same name in flightTicket)",type:"array",items:{$ref:"#/definitions/flightDetails_ref"}}},required:["dateTime","flightDetails"],additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["category","searchInputInfo"],additionalProperties:!1},productDetails:{description:"NEW OBJECT - to represent the mutual exclusive characteristic",type:"object",properties:{flightTicket:{$ref:"#/definitions/flightTicket"},ancillaryService:{$ref:"#/definitions/ancillaryService"},insurance:{$ref:"#/definitions/insurance"}},additionalProperties:!1},product:{title:"product",description:"NEW JSON SCHEMA STRUCTURE - W3C compliance",type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{productInfo:{title:"productInfo",type:"object",properties:{productID:{type:"number",description:"Id of a product",regExp:"[0-9]+",example:"8",page:"ALL",jiraLink:"NUI-10722"},productDetails:{$ref:"#/definitions/productDetails"}},required:["productID","productDetails"],additionalProperties:!1},category:{type:"object",properties:{primaryCategory:{description:"Product category",type:"string",regExp:"[A-Za-z0-9-]+",example:"FlightTicket",page:"ALL"}},required:["primaryCategory"],additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["productInfo","category"],additionalProperties:!1},cart:{title:"cart",type:"object",page:"FARE,ALPI",properties:{cartInfo:{description:"NEW OBJECT - for W3C compliance",type:"object",page:"PURC,RTPL",jiraLink:"NUI-16580",properties:{cartID:{type:"string",page:"PURC,RTPL",jiraLink:"NUI-16580"},creationDate:{description:"Creation date of the cart in the system",type:"string",regExp:"dd/MM/yyyy",example:"12-31-13",page:"PURC,RTPL",jiraLink:"NUI-16580"},modificationDate:{description:"Last modification date of the cart in the system",type:"string",regExp:"dd/MM/yyyy",example:"12-31-13",page:"PURC,RTPL",jiraLink:"NUI-16580"}},required:["cartID","creationDate"],additionalProperties:!1},price:{$ref:"#/definitions/price"},item:{type:"array",items:{$ref:"#/definitions/item_ref"}},attributes:{$ref:"#/definitions/attributes"}},required:["price","item"],additionalProperties:!1},transaction:{title:"transaction",description:"NEW STRUCTURE - to provide W3C compliance",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10722",properties:{PNR:{description:"NEW OBJECT - moved from context",type:"object",page:"PURC,RTPL",jiraLink:"NUI-15422",activation:"DATA_CONTEXT",properties:{recLoc:{type:"string",description:"HTTP input parameter",regExp:"[A-Z0-9]+",page:"PURC,RTPL",jiraLink:"NUI-15422",activation:"DATA_CONTEXT"},creationDate:{type:"string",description:"Creation dateTime of the PNR",regExp:"YYYY-MM-DDThh:mm:ss.sZ",page:"RTPL",jiraLink:"NUI-15422",activation:"DATA_CONTEXT"},modificationDate:{description:"NEW OBJECT - based on recent feedback",type:"string",regExp:"YYYY-MM-DDThh:mm:ss.sZ",page:"MPURC,RPURC",jiraLink:"NUI-16767",activation:"DATA_CONTEXT"},mode:{description:"Describes the current state of the travel: C creation - M modification",type:"string"},state:{description:"Booking Status of the PNR (P - pending, B - prebooked, Q - confirmed)",type:"string"}},required:["recLoc"],additionalProperties:!1},total:{$ref:"#/definitions/price"},profile:{description:"NEW OBJECT - to provide W3C compliance",type:"object",properties:{profileInfo:{type:"object",properties:{profileID:{type:"string"}},required:["profileID"],additionalProperties:!1},billingAddress:{$ref:"#/definitions/address"},shippingAddress:{$ref:"#/definitions/address"}},required:["profileInfo"],additionalProperties:!1},payment:{type:"array",items:{$ref:"#/definitions/payment"}},item:{type:"array",items:{$ref:"#/definitions/item_ref"}},attributes:{$ref:"#/definitions/attributes"}},additionalProperties:!1},page:{title:"page",type:"object",page:"ALL",UISpecific:!0,jiraLink:"NUI-10722",properties:{pageInfo:{title:"pageInfo",type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{pageID:{type:"string",description:"Id of the page/state",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL",UISpecific:!0},pageName:{type:"string",description:"Name of the page/state in English",regExp:"[A-Z]+",example:"Flex pricer OWD availability",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0},timing:{$ref:"#/definitions/timing"}},required:["pageID","pageName"],additionalProperties:!1},category:{$ref:"#/definitions/category"},attributes:{$ref:"#/definitions/attributes"}},required:["pageInfo","category"],additionalProperties:!1},event:{title:"event",type:"object",page:"ALL",UISpecific:!0,properties:{eventInfo:{title:"eventInfo",type:"object",page:"ALL",UISpecific:!0,properties:{eventName:{type:"string",description:"Context of the event in English",regExp:"[A-Z]+",example:"FareFamilyDetails",page:"ALL",UISpecific:!0},key:{type:"string",description:"Event name",regExp:"[A-Z0-9]+",example:"ClickFareFamilyDescrip",page:"ALL",UISpecific:!0},pageID:{type:"string",description:"Page/state identifier",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL",UISpecific:!0},productID:{description:"Product identifier",type:"string",page:"ALL",UISpecific:!0},componentID:{type:"string",description:"Component identifier",regExp:"[A-Z0-9]+",example:"TripSummary",page:"ALL",UISpecific:!0},timestamp:{title:"timestamp",type:"string",description:"Timestamp when event is triggered",regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL",UISpecific:!0}},required:["eventName","key","timestamp"],additionalProperties:!1},category:{$ref:"#/definitions/category"},attributes:{$ref:"#/definitions/attributes"}},required:["eventInfo","category"],additionalProperties:!1},feature:{description:"NEW OBJECT - to capture information regarding activated product features",type:"array",items:{type:"object",properties:{category:{$ref:"#/definitions/category"},featureInfo:{type:"object",properties:{featureName:{type:"string"},ComponentID:{type:"string"}},required:["featureName"],additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["category","featureInfo"],additionalProperties:!1}},flightTicket:{title:"flightTicket",type:"object",page:"ALL",jiraLink:"NUI-10721",UISpecific:!0,properties:{itineraryPrice:{description:"Gives the price of the whole itinerary.",type:"object",items:{$ref:"#/definitions/price"}},bound:{type:"array",page:"ALL",jiraLink:"NUI-10721",UISpecific:!0,items:{$ref:"#/definitions/bound_ref"}},journeyLength:{type:"number",description:"Number of days between the departure and return flights",regExp:"[0-9]+",example:"7",page:"ALL"}},required:["bound"],additionalProperties:!1},bound_ref:{type:"object",page:"ALL",jiraLink:"NUI-10721",UISpecific:!0,properties:{boundID:{type:"number",description:"Id of the bound (starting from 1)",regExp:"[0-9]+",example:"8",page:"AVAIL",jiraLink:"NUI-10722"},fareFamilyCode:{type:"string",description:"Fare family code",regExp:"[A-Z0-9]+",example:"BUS",page:"AVAIL",jiraLink:"NUI-10722"},fareFamilyName:{type:"string",description:"Fare family name (localized)",regExp:"[A-Z0-9]+",example:"Business",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},departure:{$ref:"#/definitions/city"},arrival:{$ref:"#/definitions/city"},price:{$ref:"#/definitions/price"},upsell:{$ref:"#/definitions/upsell"},status:{type:"object",jiraLink:"NUI-15570,NUI-17821",page:"AVAIL",properties:{modificationAllowed:{type:"boolean",description:"True if modification is allowed, false otherwise",jiraLink:"NUI-15570,NUI-17821",page:"AVAIL"}}},segment:{type:"array",items:{$ref:"#/definitions/segment"}}},additionalProperties:!1},flightDetails_ref:{description:"NEW OBJECT - used to capture flight details in the searchInput",type:"object",page:"ALL",jiraLink:"NUI-16581",properties:{departure:{$ref:"#/definitions/city"},arrival:{$ref:"#/definitions/city"},passenger:{type:"array",page:"ALL",jiraLink:"NUI-10721",items:{type:"object",page:"ALL",jiraLink:"NUI-10721",properties:{passengerTypeCode:{description:"Type of passenger",type:"string",regExp:"[A-Z0-9]{3}",example:"ADT",page:"ALL",jiraLink:"NUI-10721"},numberOfPassengers:{description:"Number of this type of passenger",type:"number",regExp:"[0-9]{1-2}",example:"2",page:"ALL",jiraLink:"NUI-10721"}},required:["passengerTypeCode","numberOfPassengers"],additionalProperties:!1}},commercialFareFamily:{title:"commercialFareFamily",type:"array",page:"ALL",jiraLink:"NUI-10721",items:{type:"object",properties:{code:{description:"Commercial fare families provided in input",type:"string",regExp:"[A-Z0-9]+",example:"BUS",page:"ALL",jiraLink:"NUI-10721"},name:{description:"Commercial fare families provided in input (localized)",type:"string",regExp:"[A-Z0-9]+",example:"Business",page:"ALL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"}},required:["code"],additionalProperties:!1}},tripType:{description:"Type of trip (O - one way, R - round trip, M - multi-destination)",type:"string",regExp:"[A-Z]",example:"RT",page:"ALL",jiraLink:"NUI-10721"},flexibleDateValue:{description:"Value of the flexibility (3 for +/- 3 days of flexibility)",type:"number",regExp:"[0-9]+",example:"3",page:"ALL",jiraLink:"NUI-10721"},cabin:{description:"Cabin code",type:"string",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10728"},fareFamilyCode:{description:"Fare family code",type:"string",regExp:"[A-Z0-9]+",example:"BUS",page:"AVAIL",jiraLink:"NUI-10722"},fareFamilyName:{description:"Fare family name (localized)",type:"string",regExp:"[A-Z0-9]+",example:"Business",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},disruptedDates:{type:"array",description:"Disrupted dates - TO BE COMPLETED",items:[{description:"Date in the format YYYY-MM-DD",type:"string"}]},waivableDates:{type:"array",description:"Dynamic waivable dates - TO BE COMPLETED",items:[{description:"Date in the format YYYY-MM-DD",type:"string"}]}},additionalProperties:!1},segment:{type:"object",page:"AVAIL",jiraLink:"NUI-10722",properties:{departure:{$ref:"#/definitions/city"},arrival:{$ref:"#/definitions/city"},leg:{type:"array",items:{$ref:"#/definitions/leg"}},cabin:{type:"string",description:"Cabin code",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10722"},bookingClass:{type:"string",description:"RBD (Reservation Booking Designator)",regExp:"[A-Z]",example:"E",page:"AVAIL",jiraLink:"NUI-10722"},marketingFlightNumber:{type:"string",description:"Flight number of the marketing carrier",regExp:"[0-9]{3-4}",example:"1234",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingAirlineCode:{type:"string",description:"Airline code of the marketing carrier",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingOperationalSuffix:{type:"string",description:"Operational suffix if any",regExp:"[A-Z]",example:"A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},operatedBy:{$ref:"#/definitions/operatedBy"},segmentID:{type:"number",description:"Id of the segment on which the service is booked (present only if the service is booked at segment level)",regExp:"[0-9]",example:1,page:"PURC",jiraLink:"NUI-10986"},status:{type:"string",description:"Possible value : waivable",example:"waivable",page:"FARE,ALPI",jiraLink:"NUI-????"}},required:["departure","arrival"],additionalProperties:!1},leg:{type:"object",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS",properties:{departure:{$ref:"#/definitions/city"},arrival:{$ref:"#/definitions/city"},cabin:{type:"string",description:"Cabin code",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},bookingClass:{type:"string",description:"RBD (Reservation Booking Designator)",regExp:"[A-Z]",example:"E",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},aircraftCode:{type:"string",description:"Aircraft/equipment type/code",regExp:"[A-Z0-9]+",example:"A380",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingFlightNumber:{type:"string",description:"Flight number of the marketing carrier",regExp:"[0-9]{3-4}",example:"1234",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingAirlineCode:{type:"string",description:"Airline code of the marketing carrier",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingOperationalSuffix:{type:"string",description:"Operational suffix if any",regExp:"[A-Z]",example:"A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},operatedBy:{$ref:"#/definitions/operatedBy"},legID:{type:"number",description:"Id of the leg (starting from 1)",regExp:"[0-9]+",example:1,page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"}},required:["departure","arrival"],additionalProperties:!1},operatedBy:{title:"operatedBy",type:"object",page:"AVAIL",jiraLink:"NUI-10727",activation:"leg: DATA_PRODUCT_DETAILS segment: NONE",properties:{disclosure:{type:"string",description:"Operated by information",regExp:"[A-Z]+",example:"Amadeus Airlines for Amadeus Airways",page:"AVAIL",jiraLink:"NUI-10722"},airlineCode:{type:"string",description:"Airline code of the marketing carrier",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10722"}},required:["disclosure","airlineCode"],additionalProperties:!1},city:{type:"object",page:"ALL",jiraLink:"NUI-10721",properties:{countryCode:{type:"string",description:"Departure or Arrival country code provided in input by the end user",regExp:"[A-Z]{2}",example:"GB",page:"ALL",jiraLink:"NUI-15686"},cityCode:{type:"string",description:"Departure or Arrival City Code",regExp:"[A-Z]{3}",example:"PAR",page:"ALL",jiraLink:"NUI-10721"},locationCode:{type:"string",description:"Departure or Arrival location code provided in input by the end user (it could be a city or airport code)",regExp:"[A-Z]{3}",example:"PAR",page:"ALL",jiraLink:"NUI-10721"},airportCode:{type:"string",description:"Departure Airport Code",regExp:"[A-Z]{3}",example:"CDG",page:"AVAIL",jiraLink:"NUI-10722"},terminal:{type:"string",description:"Departure or Arrival terminal",regExp:"[A-Z0-9]+",example:"TW",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},dateTime:{type:"string",description:"Date and time of when the search has been initiated",regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL",jiraLink:"NUI-10721"}},additionalProperties:!1},upsell:{title:"upsell",type:"object",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0,properties:{otherFareFamily:{title:"otherFareFamily",type:"array",UISpecific:!0,items:{type:"object",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",properties:{fareFamilyCode:{type:"string",description:"Fare family code",regExp:"[A-Z0-9]+",example:"BUS",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0},fareFamilyName:{type:"string",description:"Fare family name (localized)",regExp:"[A-Z0-9]+",example:"Business",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_UPSELL,DATA_LOCALIZATION",UISpecific:!0},price:{type:"number",description:"Price if any",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0},isNotCombinable:{type:"boolean",description:"Is cell not combinable",regExp:"(true|false)",example:"true",page:"AVAIL",jiraLink:"NUI-10896",activation:"DATA_UPSELL",UISpecific:!0}},required:["fareFamilyCode"],additionalProperties:!1}},teaser:{title:"teaser",type:"object",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0,properties:{fareFamilyCode:{type:"string",description:"Fare family code of the one displayed in the upsell teaser",regExp:"[A-Z0-9]+",example:"FIRST",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0},fareFamilyName:{type:"string",description:"Fare family name (localized)",regExp:"[A-Z0-9]+",example:"First",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_UPSELL,DATA_LOCALIZATION",UISpecific:!0}},additionalProperties:!1}},required:["otherFareFamily"],additionalProperties:!1},ancillaryService:{title:"ancillaryService",type:"object",page:"PURC",jiraLink:"NUI-10986",properties:{categoryCode:{type:"string",description:"Code of the category of service",regExp:"[A-Z]{3}",example:"BAG",page:"PURC",jiraLink:"NUI-10986"},categoryName:{type:"string",description:"Service category name in English",regExp:"[A-Z]+",example:"Baggage",page:"PURC",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},serviceCode:{type:"string",description:"Code of the ancillary service",regExp:"[A-Z]{4}",example:"XBAG",page:"PURC",jiraLink:"NUI-10986"},serviceName:{type:"string",description:"Service name in English",regExp:"[A-Z]+",example:"Extra baggage",page:"PURC",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},travellerID:{type:"number",description:"Id of the traveller to whom the service is associated",regExp:"[0-9]",example:1,page:"PURC",jiraLink:"NUI-10986"},price:{$ref:"#/definitions/ancillaryPrice"},isChargeable:{description:"Flag to say if the ancillary service is free or chargeable",type:"boolean",example:!0},quantity:{type:"number",description:"Number of booked services",regExp:"[0-9]+",example:"1",page:"PURC",jiraLink:"NUI-10986"},status:{type:"string",comment:"values: paid, selected / default: selected",description:"Status of the ancillary service in servicing flow to distinguish already booked/paid services from the ones selected through the servicing flow",regExp:"[A-Z]",example:"paid",page:"MPURC",jiraLink:"NUI-10737"},boundID:{type:"number",description:"Id of the bound on which the service is booked (present only if the service is booked at bound level)",regExp:"[0-9]",example:"1",page:"PURC",jiraLink:"NUI-10986"},segmentID:{type:"number",description:"Id of the segment on which the service is booked (present only if the service is booked at segment level)",regExp:"[0-9]",example:"1",page:"PURC",jiraLink:"NUI-10986"},emd:{type:"string",description:"EMD number",regExp:"[A-Z0-9]+",example:"123456789",page:"CONF,RTPL",jiraLink:"NUI-10986"},characteristic:{title:"characteristic",type:"array",items:{type:"object",page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS",properties:{key:{type:"string",regExp:"[A-Z0-9]+",example:"Weight",page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS"},value:{type:"string",description:"Value of the service characteristic",regExp:"[A-Z0-9]+",example:"20KG",page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS"}},required:["key","value"],additionalProperties:!1}},seatSelection:{type:"string",description:"Seat selected by the user",regExp:"[0-9]+[A-Za-z]{1}",example:"2A",page:"PURC,CONF,RTPL",jiraLink:"NUI-14081"}},required:["categoryCode","serviceCode","travellerID","price","quantity","status","emd"],additionalProperties:!1},insurance:{title:"insurance",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10730",properties:{code:{description:"Insurance product code",type:"string",regExp:"[A-Z0-9]+",page:"CONF,RTPL",jiraLink:"NUI-10730"},price:{$ref:"#/definitions/insurancePrice"},travellerID:{description:"Traveller id if the insurance is selected per passenger",type:"number",regExp:"[0-9]",example:1,page:"CONF,RTPL",jiraLink:"NUI-10730"}},required:["code","price"],additionalProperties:!1},price:{description:"NEW PRICE OBJECT - based on recent feedback. Providing more structure and support for: multi currency, miles, discount",type:"object",properties:{totalPrice:{type:"object",properties:{amount:{description:"Total price of the booking",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"cart : FARE,ALPI bound : AVAIL",jiraLink:"NUI-10722",activation:"bound: DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"},pricePerTravellerType:{title:"pricePerTravellerType",description:"MOVED from bound to price",type:"array",items:{type:"object",properties:{passengerTypeCode:{description:"Passenger type code (PTC)",type:"string",regExp:"[A-Z0-9]{3}",example:"ADT",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},totalPrice:{type:"object",properties:{amount:{description:"Total price of the booking",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]{3}",example:"EUR",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},additionalProperties:!1}},required:["passengerTypeCode","totalPrice"],additionalProperties:!1,page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},priceBreakdown:{title:"priceBreakdown",description:"NEW OBJECT - to capture price details in a structured way",type:"object",properties:{baseFarePrice:{type:"object",properties:{amount:{description:"Base fare of the flight segments",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10722"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},tax:{type:"object",properties:{totalTax:{type:"object",properties:{amount:{description:"Tax amount",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1},fuelSurcharge:{type:"object",properties:{amount:{description:"Sum of fuel surcharges for all travellers",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1}},required:["totalTax"],additionalProperties:!1},serviceFee:{type:"object",properties:{amount:{description:"Booking fee",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10722"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},ancillaryServicePrice:{type:"object",properties:{amount:{description:"Total amount of all ancillary services",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"cart: PURC / transaction: CONF,RTPL",jiraLink:"NUI-10986",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},insurancePrice:{type:"object",properties:{amount:{description:"Price of the insurance product(s)",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10730",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1}},additionalProperties:!1},currencyConversion:{description:"NEW OBJECT - to support multi-currency use cases",type:"object",properties:{convertedAmount:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},additionalProperties:!1},newValue:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL"}},additionalProperties:!1},exchangeRate:{type:"number"},conversionFee:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},additionalProperties:!1}},required:["convertedAmount","newValue","exchangeRate"],additionalProperties:!1},miles:{description:"NEW OBJECT - to capture miles&cash details in a structured way",type:"object",properties:{milesAmount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},cashPaidInMiles:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"}},required:["milesAmount","cashPaidInMiles"],additionalProperties:!1},discount:{title:"discount",description:"NEW OBJECT - to capture discount details in a structured way",type:"object",page:"CONF,RTPL",jiraLink:"NUI-16177",properties:{discountType:{type:"string"},initialPrice:{$ref:"#/definitions/initialPrice"},discountPercentValue:{type:"number",page:"CONF,RTPL",jiraLink:"NUI-16177"},discountFixedValue:{type:"object",properties:{amount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-16177",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-16177"}},required:["amount","currency"],additionalProperties:!1}},required:["initialPrice"],additionalProperties:!1},rebookingDetails:{title:"rebookingDetails",type:"object",properties:{initialPrice:{$ref:"#/definitions/initialPrice"},totalPrice:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},balance:{type:"object",properties:{amount:{description:"Balance to pay",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code of the previous total price",type:"string",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1},changeFees:{type:"object",properties:{amount:{description:"Change fees",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code of the previous total price",type:"string",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1},refund:{type:"object",properties:{amount:{description:"Amount to be refunded",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code of the previous total price",type:"string",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1},nonRefundableAmount:{type:"object",properties:{amount:{description:"Non-refundable amout",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"cart: FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code of the previous total price",type:"string",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1}},required:["initialPrice","balance"],additionalProperties:!1,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},additionalProperties:!1},ancillaryPrice:{type:"object",properties:{totalPrice:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},miles:{type:"object",properties:{milesAmount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},cashPaidInMiles:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"}},additionalProperties:!1},discount:{title:"discount",type:"object",properties:{initialPrice:{$ref:"#/definitions/initialPrice"},discountPercentValue:{type:"number"},discountFixedValue:{type:"object",properties:{amount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1}},required:["initialPrice"],additionalProperties:!1}},additionalProperties:!1},insurancePrice:{type:"object",properties:{amount:{type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10730"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},discountType:{type:"string"},initialPrice:{type:"object",properties:{amount:{description:"Initial price when a discount is applied on the totalPrice",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10735",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},payment:{title:"payment",description:"NOW AS ARRAY- to support multi FOP",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10722",properties:{price:{$ref:"#/definitions/price"},methodOfPayment:{type:"string",description:"Code of the method of payment",regExp:"[A-Z0-9]+",example:"CC",page:"CONF,RTPL"},paymentReference:{type:"string",description:"Reference from the payment provider",regExp:"[A-Z0-9]+",example:"123456789",page:"CONF,RTPL",jiraLink:"NUI-10722"},paymentType:{description:"NEW NAME - more abstract name introduced (instead of creditCardType) in roder to be able to store not only CC type, but also AMOP",type:"string",description2:"Type of credit card (credit card vendor)",regExp:"[A-Z0-9]+",example:"VI",page:"CONF,RTPL",jiraLink:"NUI-10722"},installment:{title:"installment",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT",properties:{plan:{type:"number",description:"Number of instalment to pay the trip",regExp:"[0-9]+",example:"5",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},interest:{type:"number",description:"Amount of interest",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},currency:{type:"string",description:"Currency for the instalment",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},firstMonthAmount:{type:"number",description:"First month amount",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},nextMonthAmount:{type:"number",description:"Next months amount",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"}},required:["plan","interest","currency"],additionalProperties:!1},item:{type:"array",items:{$ref:"#/definitions/item_ref"}}},required:["price","methodOfPayment","paymentReference","paymentType"],additionalProperties:!1},productInfo:{title:"productInfo",type:"object",properties:{productID:{description:"Id of a product",type:"number",regExp:"[0-9]+",example:8,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"}},required:["productID"],additionalProperties:!1,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"},item_ref:{title:"item",type:"object",page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722",properties:{productInfo:{$ref:"#/definitions/productInfo"},quantity:{type:"number"}},required:["productInfo","quantity"],additionalProperties:!1},category:{title:"category",type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{primaryCategory:{type:["string","null"],description:"Category of the product or flow",regExp:"[A-Z]+",example:"Flight Ticket",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0}},required:["primaryCategory"],additionalProperties:!1},attributes:{title:"details",description:"NEW OBJECT - providing flexibility to capture additional information (e.g. DDS specific)",type:"array",page:"ALL",jiralink:"NUI-14753",items:{type:"object",properties:{key:{description:"key for the attribute",type:"string",page:"ALL",jiralink:"NUI-14753"},value:{description:" value",type:"object",page:"ALL",jiralink:"NUI-14753"}},required:["key","value"],additionalProperties:!1}},priceValue:{type:"object",properties:{amount:{description:"Price value",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR"}},additionalProperties:!1,required:["amount","currency"]},miles:{type:"object",properties:{milesAmount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",activation:"DATA_PRICE_DETAILS"},cashPaidInMiles:{$ref:"#/definitions/priceValue"}},additionalProperties:!1},address:{description:"NEW OBJECT - based on PNR feedback",type:"object",properties:{line1:{type:"string",activation:"DATA_PII"},line2:{type:"string",activation:"DATA_PII"},city:{type:"string",activation:"DATA_PII"},country:{type:"string",activation:"DATA_PII"},zipCode:{type:"string",activation:"DATA_PII"},state:{type:"string",activation:"DATA_PII"}},additionalProperties:!1},timing:{description:"Represents the response time breakdown (Navigation + Post Navigation) linked to the page. This includes static resource downloads. Times are given in ms. ",type:"object",properties:{error:{type:"array",UISpecific:!0,items:{$ref:"#/definitions/error"}},navigation:{description:"Represents the response time navigation as defined per W3C API. Times are given in ms.",type:"object",properties:{connection:{description:"Time in ms to establish the connection to the server",type:"number",regExp:"[0-9]+",example:"8",page:"ALL",UISpecific:!0},request:{description:"Time in ms to send the request",type:"number",regExp:"[0-9]+",example:"3567",page:"ALL",UISpecific:!0},response:{description:"Time in ms to get the response from server and get it back on the client.",type:"number",regExp:"[0-9]+",example:"63",page:"ALL",UISpecific:!0},DOM:{description:"Time in ms to load the DOM and display the page (overall UI processing time)",type:"number",regExp:"[0-9]+",example:"892",page:"ALL",UISpecific:!0},total:{description:"Total in ms of the navigation phase",type:"number",regExp:"[0-9]+",example:"Flex pricer OWD availability",page:"ALL",UISpecific:!0}},additionalProperties:!1,page:"ALL",UISpecific:!0},postNavigation:{description:"Covers the post-processing after navigation phase. It is optional and would depend on the UI implementation (ex: post processing due to Aria template)is needed after navigation. Times are given in ms.",type:"object",properties:{startAt:{description:"Time in ms when the post navigation is starting. It should be equal or very close to the total of navigation.",type:"number",regExp:"[0-9]+",example:"4530",page:"ALL",UISpecific:!0},pageReady:{description:"Time in ms when the page is ready for display (from UI framework perspective). ",type:"number",regExp:"[0-9]+",example:"13368",page:"ALL",UISpecific:!0},spinnerEnd:{description:"Time in ms when the waiting layer is removed.",type:"number",regExp:"[0-9]+",example:"12688",page:"ALL",UISpecific:!0},total:{description:"Time in ms of the post navigation phase. Depending on UI implementation, total is max of pageReady and spinnerEnd.",type:"number",regExp:"[0-9]+",example:"8838",page:"ALL",UISpecific:!0}},additionalProperties:!1,page:"ALL",UISpecific:!0},total:{description:"Sum of navigation.total and postNavigation.total. It should correspond to the full response time from end-user point of view. Time is given in ms.",type:"number",regExp:"[0-9]+",example:"13368",page:"ALL",UISpecific:!0},resources:{description:"Represents the static resources attached to the current page",type:"object",properties:{count:{description:"Number of static resources downloaded along this page",type:"number",regExp:"[0-9]+",example:"54",page:"ALL",UISpecific:!0},totalDownload:{description:"Amount of download bytes over network (compressed data compression is activated)",type:"number",regExp:"[0-9]+",example:"1432463",page:"ALL",UISpecific:!0}},additionalProperties:!1,page:"ALL",UISpecific:!0}},additionalProperties:!1,page:"ALL",UISpecific:!0}}},"2.4.0":{$schema:"http://json-schema.org/draft-04/schema#",version:"2.4.0",$ref:"#/definitions/digitalData",description:"Digital data schema for AeRE - JCP",definitions:{digitalData:{description:"Schema for digitalData v.2.4.0",type:"object",properties:{version:{type:"string",description:"Version of the data layer",regExp:"[0-9]+.[0-9]+.[0-9]+",example:"2.0.0",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,alwaysPushed:!0},pageInstanceID:{type:"string",description:"Current page/state identifier",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,alwaysPushed:!0},digitalTouchpoint:{$ref:"#/definitions/digitalTouchpoint"},user:{type:"array",page:"ALL",jiraLink:"NUI-16580",UISpecific:!0,items:{$ref:"#/definitions/user_ref"}},traveller:{type:"array",page:"ALL",jiraLink:"NUI-10722",items:{$ref:"#/definitions/traveller_ref"}},searchInput:{$ref:"#/definitions/searchInput"},product:{title:"product",type:"array",UISpecific:!0,items:{$ref:"#/definitions/product"}},cart:{$ref:"#/definitions/cart"},transaction:{$ref:"#/definitions/transaction"},page:{UISpecific:!0,$ref:"#/definitions/page"},feature:{$ref:"#/definitions/feature"},event:{UISpecific:!0,type:"array",items:{$ref:"#/definitions/event"}},service:{$ref:"#/definitions/service"}},required:["version","pageInstanceID","traveller"],additionalProperties:!1},error:{type:"object",properties:{code:{description:"error code",type:"string"},message:{description:"error message",type:"string"},severity:{description:"error severity (F-E-W-I)",type:"string"},subError:{type:"array",items:{type:"object",properties:{code:{description:"error code",type:"string"},message:{description:"error message",type:"string"},severity:{description:"error severity (F-E-W-I)",type:"string"}}}}}},service:{type:"object",properties:{serviceInfo:{type:"object",properties:{serviceName:{type:"string"},status:{description:"status of the service call - 0 if OK - not 0 if KO: e.g. 46 if pax issue",type:"number"},error:{type:"array",items:{$ref:"#/definitions/error"}}}}}},digitalTouchpoint:{title:"digitalTouchpoint",description2:"TO BE REVIEWED - Proposal based on recent feedback.",type:"object",page:"ALL",jiraLink:"NUI-16580",UISpecific:!0,properties:{category:{description:"NEW OBJECT - structure according to W3C guidelines",type:"object",UISpecific:!0,properties:{primaryCategory:{description:"Digital touchpoint",type:"string",regExp:"[A-Za-z0-9-]+",example:"DX",page:"ALL",UISpecific:!0},subCategory:{description:"Sub category, which sub defines the primary category. It is useful when we have an embedded product in another one.",type:"string",regExp:"[A-Za-z0-9-]+",example:"DX",page:"ALL",UISpecific:!0}},required:["primaryCategory"],additionalProperties:!1},touchpointInfo:{description:"NEW OBJECT - structure according to W3C guidelines",type:"object",page:"ALL",jiraLink:"NUI-16580",UISpecific:!0,properties:{language:{description:"Language code",type:"string",regExp:"[A-Z]{2}",example:"GB",page:"ALL",jiraLink:"NUI-10722"},market:{description:"Market id",type:"string",regExp:"[A-Z]{2-3}",example:"US",page:"ALL",jiraLink:"NUI-10722"},backend:{type:"string",description:"Backend",regExp:"[A-Za-z0-9-]+",example:"OCGPRD",page:"ALL",jiraLink:"NUI-14081"},site:{type:"string",description:"Site code",regExp:"[A-Z]{8}",example:"ABCDABCD",page:"ALL",jiraLink:"NUI-10722"},sessionID:{description:"Digital session id",type:"string",regExp:"[A-Z]+",example:"abcdefghjkl",page:"ALL",jiraLink:"NUI-10722"},officeID:{description:"Office id composed of: IATA city or airport code - first three characters Corporate code - 2 characters Corporate qualifier - 1 character from 0 to 9 Office identifier - final three characters",type:"string",regExp:"[A-Z0-9]{9}",example:"LON1A08AA",jiraLink:"NUI-10722"},bookingFlow:{description:"BOOKING_FLOW input parameter",type:"string",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-11437",UISpecific:!0,activation:"DATA_CONTEXT"},tripFlow:{description:"TRIP_FLOW input parameter",type:"string",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-11437",activation:"DATA_CONTEXT"},HTTPParameter:{description:"NEW OBJECT - based on DDS feedback - single array to consolidate all HTTPParameter",type:"array",items:{type:"object",properties:{key:{type:"string"},value:{type:"object"}},required:["key","value"],additionalProperties:!1}},campaign:{description:"NEW OBJECT - based on BIA requirement",type:"array",items:{type:"object",properties:{key:{type:"string"},value:{type:"string"}},required:["key","value"],additionalProperties:!1}}},additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["category","touchpointInfo"],additionalProperties:!1},user_ref:{title:"user",type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{profile:{type:"array",jiraLink:"NUI-16581",UISpecific:!0,description:"NEW OBJECT - to provide W3C compliance",items:{type:"object",properties:{profileInfo:{description:"NEW OBJECT - to provide W3C compliance",type:"object",jiraLink:"NUI-16581",UISpecific:!0,properties:{profileID:{description:"User ID",type:"string",page:"ALL"},clientID:{description:"The clientID is linked to the cookie.",type:"string",page:"ALL",jiraLink:"NUI-17821",activation:"DATA_PII",UISpecific:!0},userID:{description:"The USER_ID from the request",type:"string",page:"ALL",jiraLink:"NUI-15784",UISpecific:!0},internetProtocolAddress:{type:"string",description:"IP address of the end user",regExp:"[0-9]{1-3}\\.[0-9]{1-3}",example:"255.255.255.255",page:"ALL",jiraLink:"NUI-10527",activation:"DATA_PII"},deviceType:{type:"string",description:"Type of device",regExp:"[A-Z]+",example:"TABLET",page:"ALL",jiraLink:"NUI-10527",activation:"DATA_CONTEXT",UISpecific:!0},userAgent:{description:"User agent of the browser",type:"string",regExp:"[A-Z0-9]+",example:"IE8..11|Edge|FireFox|Chrome|Opera|Safari",page:"ALL",jiraLink:"NUI-16581",activation:"DATA_CONTEXT",UISpecific:!0},OS:{description:"Version of Operating system",type:"string",regExp:"[A-Z0-9]+",example:"Windows 10|MacOs X|Ubuntu 16.06",page:"ALL",jiraLink:"NUI-16581",activation:"DATA_CONTEXT",UISpecific:!0},countryOfResidence:{type:"string",page:"ALL",activation:"DATA_CONTEXT",UISpecific:!0}},additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["profileInfo"],additionalProperties:!1,UISpecific:!0}}},required:["profile"],additionalProperties:!1},traveller_ref:{title:"traveller",type:"object",page:"ALL",properties:{travellerID:{type:"number",description:"Id of the traveller within the cart",regExp:"[0-9]",example:"1",page:"ALL",jiraLink:"NUI-10722"},profileID:{description:"CEM Profile ID",type:"string"},passengerTypeCode:{type:"string",description:"Passenger type code (PTC)",regExp:"[A-Z0-9]{3}",example:"ADT",page:"ALL",jiraLink:"NUI-10722"},lastName:{type:"string",description:"Last name of the traveller",regExp:"[A-Z]+",example:"Doe",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"},firstName:{type:"string",description:"First name of the traveller",regExp:"[A-Z]+",example:"John",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"},midName:{type:"string",description:"Middle name of the traveller",regExp:"[A-Z]+",example:"Clarke",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"},suffix:{type:"string",description:"Traveller suffix",regExp:"[A-Z]+",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"},title:{type:"string",description:"Title of the traveller",regExp:"[A-Z]+",example:"Mr",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},dateOfBirth:{type:"string",description:"Data of birth of the traveller",regExp:"dd/MM/yyyy",example:"12-31-13",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},nationality:{type:"string",description:"Nationality of the traveller",regExp:"[A-Z]+",example:"FR",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},gender:{type:"string",comment:"Values: Male/Female",description:"Gender of the traveller",regExp:"[A-Z]",example:"Male",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},loyaltyProgram:{title:"loyaltyProgram",type:"array",items:{type:"object",page:"ALL",jiraLink:"NUI-10722",additionalProperties:!1,properties:{program:{type:"string",description:"Usually associated airline code",regExp:"[A-Z0-9]{2}",example:"1A",page:"ALL",jiraLink:"NUI-10722"},number:{type:"string",description:"Frequent flyer number",regExp:"[A-Z0-9]+",example:"123456789",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"},milesBalance:{description:"Number of miles / points the traveller has",type:"number",regExp:"^[0-9]+$",example:"1000",page:"RTPL,UPGD, MPURC",jiraLink:"EP-3955"}}}},eTicket:{title:"eTicket",type:"array",items:{type:"object",page:"CONF,RTPL",jiraLink:"NUI-10722",properties:{ticketNumber:{type:"string",description:"Array of e-ticket numbers associated to the traveller id",regExp:"[A-Z0-9]+",page:"CONF,RTPL",jiraLink:"NUI-10722",example:"1"}},required:["ticketNumber"],additionalProperties:!1}},contactInformation:{title:"contactInformation",description:"Object which stores emails and phone numbers",type:"object",page:"AAAS,PURC",jiraLink:"NUI-15420",properties:{email:{title:"email",type:"array",items:{type:"object",page:"AAAS,PURC",jiraLink:"NUI-15420",properties:{emailAddress:{type:"string",format:"email",description:"Email address",regExp:"[A-Z@.]+",example:"noreply@amadeus.com",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"}},required:["emailAddress"],additionalProperties:!1}},phone:{title:"phone",type:"array",items:{type:"object",page:"AAAS,PURC",jiraLink:"NUI-15420",properties:{phoneNumber:{type:"string",description:"Phone number",regExp:"[0-9]+",example:"555632554",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"}},required:["phoneNumber"],additionalProperties:!1}}},additionalProperties:!1},document:{title:"document",description:"NEW OBJECT - based on PNR feedback",page:"AAAS,PURC",jiraLink:"NUI-15420",type:"array",items:{type:"object",properties:{type:{type:"string",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"},number:{type:"string",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"}},additionalProperties:!1}},address:{type:"array",page:"AAAS,PURC",jiraLink:"NUI-15420",items:{$ref:"#/definitions/address"}},hasInfant:{description:"Indicator for infant",type:"boolean",comment:"Indicates if an infant travels along with the passenger. Values: true/false ",page:"AAAS,PURC",jiraLink:"NUI-18841"}},required:["travellerID","passengerTypeCode"],additionalProperties:!1},searchInput:{title:"searchInput",type:"object",page:"ALL",jiraLink:"NUI-16581",properties:{category:{description:"NEW OBJECT - to provide W3C compliance",type:"object",page:"ALL",jiraLink:"NUI-16581",properties:{primaryCategory:{type:"string",description:"Type of trip (one way, round trip, multi-destination)",page:"ALL",jiraLink:"NUI-16581",regExp:"[A-Z0-9]+",example:"R"}},required:["primaryCategory"],additionalProperties:!1},searchInputInfo:{description:"NEW OBJECT - to provide W3C compliance",type:"object",page:"ALL",jiraLink:"NUI-16581",properties:{dateTime:{type:"string",format:"date-time",description:"Date and time of when the search has been initiated",regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL",jiraLink:"NUI-10721"},corporateCode:{title:"Corporate Code",type:"string",description:"Corporate code specified in inputs and allowing to access to negotiated fares",regExp:"[A-Z0-9]+",example:"SummerPromo",page:"ALL",jiraLink:"NUI-10734"},flightDetails:{description:"NEW NAME - (instead of -bound- which was confusing due to element with the same name in flightTicket)",type:"array",items:{$ref:"#/definitions/flightDetails_ref"}}},required:["dateTime","flightDetails"],additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["category","searchInputInfo"],additionalProperties:!1},productDetails:{description:"NEW OBJECT - to represent the mutual exclusive characteristic",type:"object",properties:{flightTicket:{$ref:"#/definitions/flightTicket"},ancillaryService:{$ref:"#/definitions/ancillaryService"},insurance:{$ref:"#/definitions/insurance"}},additionalProperties:!1},product:{title:"product",description:"NEW JSON SCHEMA STRUCTURE - W3C compliance",type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{productInfo:{title:"productInfo",type:"object",properties:{productID:{type:"number",description:"Id of a product",regExp:"[0-9]+",example:"8",page:"ALL",jiraLink:"NUI-10722"},productDetails:{$ref:"#/definitions/productDetails"}},required:["productID","productDetails"],additionalProperties:!1},category:{type:"object",properties:{primaryCategory:{description:"Product category",type:"string",regExp:"[A-Za-z0-9-]+",example:"FlightTicket",page:"ALL"}},required:["primaryCategory"],additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["productInfo","category"],additionalProperties:!1},cart:{title:"cart",type:"object",page:"FARE,ALPI",properties:{cartInfo:{description:"NEW OBJECT - for W3C compliance",type:"object",page:"PURC,RTPL",jiraLink:"NUI-16580",properties:{cartID:{type:"string",page:"PURC,RTPL",jiraLink:"NUI-16580"},creationDate:{description:"Creation date of the cart in the system",type:"string",regExp:"dd/MM/yyyy",example:"12-31-13",page:"PURC,RTPL",jiraLink:"NUI-16580"},modificationDate:{description:"Last modification date of the cart in the system",type:"string",regExp:"dd/MM/yyyy",example:"12-31-13",page:"PURC,RTPL",jiraLink:"NUI-16580"}},required:["cartID","creationDate"],additionalProperties:!1},price:{$ref:"#/definitions/price"},item:{type:"array",items:{$ref:"#/definitions/item_ref"}},attributes:{$ref:"#/definitions/attributes"}},required:["price","item"],additionalProperties:!1},transaction:{title:"transaction",description:"NEW STRUCTURE - to provide W3C compliance",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10722",properties:{PNR:{description:"NEW OBJECT - moved from context",type:"object",page:"PURC,RTPL",jiraLink:"NUI-15422",activation:"DATA_CONTEXT",properties:{recLoc:{type:"string",description:"HTTP input parameter",regExp:"[A-Z0-9]+",page:"PURC,RTPL",jiraLink:"NUI-15422",activation:"DATA_CONTEXT"},creationDate:{type:"string",description:"Creation dateTime of the PNR",regExp:"YYYY-MM-DDThh:mm:ss.sZ",page:"RTPL",jiraLink:"NUI-15422",activation:"DATA_CONTEXT"},modificationDate:{description:"NEW OBJECT - based on recent feedback",type:"string",regExp:"YYYY-MM-DDThh:mm:ss.sZ",page:"MPURC,RPURC",jiraLink:"NUI-16767",activation:"DATA_CONTEXT"},mode:{description:"Describes the current state of the travel: C creation - M modification",type:"string"},state:{description:"Booking Status of the PNR (P - pending, B - prebooked, Q - confirmed)",type:"string"}},required:["recLoc"],additionalProperties:!1},total:{$ref:"#/definitions/price"},profile:{description:"NEW OBJECT - to provide W3C compliance",type:"object",properties:{profileInfo:{type:"object",properties:{profileID:{type:"string"}},required:["profileID"],additionalProperties:!1},billingAddress:{$ref:"#/definitions/address"},shippingAddress:{$ref:"#/definitions/address"}},required:["profileInfo"],additionalProperties:!1},payment:{type:"array",items:{$ref:"#/definitions/payment"}},item:{type:"array",items:{$ref:"#/definitions/item_ref"}},attributes:{$ref:"#/definitions/attributes"}},additionalProperties:!1},page:{title:"page",type:"object",page:"ALL",UISpecific:!0,jiraLink:"NUI-10722",properties:{pageInfo:{title:"pageInfo",type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{pageID:{type:"string",description:"Id of the page/state",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL",UISpecific:!0},pageName:{type:"string",description:"Name of the page/state in English",regExp:"[A-Z]+",example:"Flex pricer OWD availability",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0},timing:{$ref:"#/definitions/timing"}},required:["pageID","pageName"],additionalProperties:!1},category:{$ref:"#/definitions/category"},attributes:{$ref:"#/definitions/attributes"}},required:["pageInfo","category"],additionalProperties:!1},event:{title:"event",type:"object",page:"ALL",UISpecific:!0,properties:{eventInfo:{title:"eventInfo",type:"object",page:"ALL",UISpecific:!0,properties:{eventName:{type:"string",description:"Context of the event in English",regExp:"[A-Z]+",example:"FareFamilyDetails",page:"ALL",UISpecific:!0},key:{type:"string",description:"Event name",regExp:"[A-Z0-9]+",example:"ClickFareFamilyDescrip",page:"ALL",UISpecific:!0},pageID:{type:"string",description:"Page/state identifier",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL",UISpecific:!0},productID:{description:"Product identifier",type:"string",page:"ALL",UISpecific:!0},componentID:{type:"string",description:"Component identifier",regExp:"[A-Z0-9]+",example:"TripSummary",page:"ALL",UISpecific:!0},timestamp:{title:"timestamp",type:"string",description:"Timestamp when event is triggered",regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL",UISpecific:!0}},required:["eventName","key","timestamp"],additionalProperties:!1},category:{$ref:"#/definitions/category"},attributes:{$ref:"#/definitions/attributes"}},required:["eventInfo","category"],additionalProperties:!1},feature:{description:"NEW OBJECT - to capture information regarding activated product features",type:"array",items:{type:"object",properties:{category:{$ref:"#/definitions/category"},featureInfo:{type:"object",properties:{featureName:{type:"string"},ComponentID:{type:"string"}},required:["featureName"],additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["category","featureInfo"],additionalProperties:!1}},flightTicket:{title:"flightTicket",type:"object",page:"ALL",jiraLink:"NUI-10721",UISpecific:!0,properties:{itineraryPrice:{description:"Gives the price of the whole itinerary.",type:"object",items:{$ref:"#/definitions/price"}},bound:{type:"array",page:"ALL",jiraLink:"NUI-10721",UISpecific:!0,items:{$ref:"#/definitions/bound_ref"}},journeyLength:{type:"number",description:"Number of days between the departure and return flights",regExp:"[0-9]+",example:"7",page:"ALL"}},required:["bound"],additionalProperties:!1},bound_ref:{type:"object",page:"ALL",jiraLink:"NUI-10721",UISpecific:!0,properties:{boundID:{type:"number",description:"Id of the bound (starting from 1)",regExp:"[0-9]+",example:"8",page:"AVAIL",jiraLink:"NUI-10722"},fareFamilyCode:{type:"string",description:"Fare family code",regExp:"[A-Z0-9]+",example:"BUS",page:"AVAIL",jiraLink:"NUI-10722"},fareFamilyName:{type:"string",description:"Fare family name (localized)",regExp:"[A-Z0-9]+",example:"Business",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},departure:{$ref:"#/definitions/city"},arrival:{$ref:"#/definitions/city"},price:{$ref:"#/definitions/price"},upsell:{$ref:"#/definitions/upsell"},boundViewers:{description:"Number of people viewing the bound",type:"number",pattern:"^[0-9]+$",example:"12",jiraLink:"NUI-20636",page:"AVAIL",UISpecific:!0},flightViewers:{description:"Number of people viewing the flight",type:"number",pattern:"^[0-9]+$",example:"12",jiraLink:"NUI-20636",page:"AVAIL",UISpecific:!0},status:{type:"object",jiraLink:"NUI-15570,NUI-17821",page:"AVAIL",properties:{modificationAllowed:{type:"boolean",description:"True if modification is allowed, false otherwise",jiraLink:"NUI-15570,NUI-17821",page:"AVAIL"}}},segment:{type:"array",items:{$ref:"#/definitions/segment"}}},additionalProperties:!1},flightDetails_ref:{description:"NEW OBJECT - used to capture flight details in the searchInput",type:"object",page:"ALL",jiraLink:"NUI-16581",properties:{departure:{$ref:"#/definitions/city"},arrival:{$ref:"#/definitions/city"},passenger:{type:"array",page:"ALL",jiraLink:"NUI-10721",items:{type:"object",page:"ALL",jiraLink:"NUI-10721",properties:{passengerTypeCode:{description:"Type of passenger",type:"string",regExp:"[A-Z0-9]{3}",example:"ADT",page:"ALL",jiraLink:"NUI-10721"},numberOfPassengers:{description:"Number of this type of passenger",type:"number",regExp:"[0-9]{1-2}",example:"2",page:"ALL",jiraLink:"NUI-10721"}},required:["passengerTypeCode","numberOfPassengers"],additionalProperties:!1}},commercialFareFamily:{title:"commercialFareFamily",type:"array",page:"ALL",jiraLink:"NUI-10721",items:{type:"object",properties:{code:{description:"Commercial fare families provided in input",type:"string",regExp:"[A-Z0-9]+",example:"BUS",page:"ALL",jiraLink:"NUI-10721"},name:{description:"Commercial fare families provided in input (localized)",type:"string",regExp:"[A-Z0-9]+",example:"Business",page:"ALL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"}},required:["code"],additionalProperties:!1}},tripType:{description:"Type of trip (O - one way, R - round trip, M - multi-destination)",type:"string",regExp:"[A-Z]",example:"RT",page:"ALL",jiraLink:"NUI-10721"},flexibleDateValue:{description:"Value of the flexibility (3 for +/- 3 days of flexibility)",type:"number",regExp:"[0-9]+",example:"3",page:"ALL",jiraLink:"NUI-10721"},cabin:{description:"Cabin code",type:"string",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10728"},fareFamilyCode:{description:"Fare family code",type:"string",regExp:"[A-Z0-9]+",example:"BUS",page:"AVAIL",jiraLink:"NUI-10722"},fareFamilyName:{description:"Fare family name (localized)",type:"string",regExp:"[A-Z0-9]+",example:"Business",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},disruptedDates:{type:"array",description:"Disrupted dates - TO BE COMPLETED",items:[{description:"Date in the format YYYY-MM-DD",type:"string"}]},waivableDates:{type:"array",description:"Dynamic waivable dates - TO BE COMPLETED",items:[{description:"Date in the format YYYY-MM-DD",type:"string"}]}},additionalProperties:!1},segment:{type:"object",page:"AVAIL",jiraLink:"NUI-10722",properties:{aircraftCode:{description:"Aircraft/equipment type/code",type:"string",regExp:"^[A-Z0-9]+$",example:"A380",page:"AVAIL",jiraLink:"NUI-24106",activation:"DATA_PRODUCT_DETAILS"},departure:{$ref:"#/definitions/city"},arrival:{$ref:"#/definitions/city"},leg:{type:"array",items:{$ref:"#/definitions/leg"}},cabin:{type:"string",description:"Cabin code",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10722"},bookingClass:{type:"string",description:"RBD (Reservation Booking Designator)",regExp:"[A-Z]",example:"E",page:"AVAIL",jiraLink:"NUI-10722"},marketingFlightNumber:{type:"string",description:"Flight number of the marketing carrier",regExp:"[0-9]{3-4}",example:"1234",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingAirlineCode:{type:"string",description:"Airline code of the marketing carrier",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingOperationalSuffix:{type:"string",description:"Operational suffix if any",regExp:"[A-Z]",example:"A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},operatedBy:{$ref:"#/definitions/operatedBy"},segmentID:{type:"number",description:"Id of the segment on which the service is booked (present only if the service is booked at segment level)",regExp:"[0-9]",example:1,page:"PURC",jiraLink:"NUI-10986"},status:{type:"string",description:"Possible value : waivable",example:"waivable",page:"FARE,ALPI",jiraLink:"NUI-????"}},required:["departure","arrival"],additionalProperties:!1},leg:{type:"object",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS",properties:{departure:{$ref:"#/definitions/city"},arrival:{$ref:"#/definitions/city"},cabin:{type:"string",description:"Cabin code",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},bookingClass:{type:"string",description:"RBD (Reservation Booking Designator)",regExp:"[A-Z]",example:"E",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},aircraftCode:{type:"string",description:"Aircraft/equipment type/code",regExp:"[A-Z0-9]+",example:"A380",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingFlightNumber:{type:"string",description:"Flight number of the marketing carrier",regExp:"[0-9]{3-4}",example:"1234",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingAirlineCode:{type:"string",description:"Airline code of the marketing carrier",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingOperationalSuffix:{type:"string",description:"Operational suffix if any",regExp:"[A-Z]",example:"A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},operatedBy:{$ref:"#/definitions/operatedBy"},legID:{type:"number",description:"Id of the leg (starting from 1)",regExp:"[0-9]+",example:1,page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"}},required:["departure","arrival"],additionalProperties:!1},operatedBy:{title:"operatedBy",type:"object",page:"AVAIL",jiraLink:"NUI-10727",activation:"leg: DATA_PRODUCT_DETAILS segment: NONE",properties:{disclosure:{type:"string",description:"Operated by information",regExp:"[A-Z]+",example:"Amadeus Airlines for Amadeus Airways",page:"AVAIL",jiraLink:"NUI-10722"},airlineCode:{type:"string",description:"Airline code of the marketing carrier",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10722"}},required:["disclosure","airlineCode"],additionalProperties:!1},city:{type:"object",page:"ALL",jiraLink:"NUI-10721",properties:{countryCode:{type:"string",description:"Departure or Arrival country code provided in input by the end user",regExp:"[A-Z]{2}",example:"GB",page:"ALL",jiraLink:"NUI-15686"},cityCode:{type:"string",description:"Departure or Arrival City Code",regExp:"[A-Z]{3}",example:"PAR",page:"ALL",jiraLink:"NUI-10721"},locationCode:{type:"string",description:"Departure or Arrival location code provided in input by the end user (it could be a city or airport code)",regExp:"[A-Z]{3}",example:"PAR",page:"ALL",jiraLink:"NUI-10721"},airportCode:{type:"string",description:"Departure Airport Code",regExp:"[A-Z]{3}",example:"CDG",page:"AVAIL",jiraLink:"NUI-10722"},terminal:{type:"string",description:"Departure or Arrival terminal",regExp:"[A-Z0-9]+",example:"TW",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},dateTime:{type:"string",description:"Date and time of when the search has been initiated",regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL",jiraLink:"NUI-10721"}},additionalProperties:!1},upsell:{title:"upsell",type:"object",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0,properties:{otherFareFamily:{title:"otherFareFamily",type:"array",UISpecific:!0,items:{type:"object",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",properties:{fareFamilyCode:{type:"string",description:"Fare family code",regExp:"[A-Z0-9]+",example:"BUS",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0},fareFamilyName:{type:"string",description:"Fare family name (localized)",regExp:"[A-Z0-9]+",example:"Business",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_UPSELL,DATA_LOCALIZATION",UISpecific:!0},price:{type:"number",description:"Price if any",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0},isNotCombinable:{type:"boolean",description:"Is cell not combinable",regExp:"(true|false)",example:"true",page:"AVAIL",jiraLink:"NUI-10896",activation:"DATA_UPSELL",UISpecific:!0},isNotSelectableReason:{type:"string",description:"That field gives the reason why a fare is not selectable for a user. isNotCombinable means it is not selectable related to other bound. isSoldOut means the fare family is sold out. isNotAvailable means it is not selectable for other reason. ",regExp:"^(isNotCombinable|isNotAvailable|isSoldOut)$",example:"isNotCombinable",page:"AVAIL",jiraLink:"NUI-24681",activation:"DATA_UPSELL",UISpecific:!0}},required:["fareFamilyCode"],additionalProperties:!1}},teaser:{title:"teaser",type:"object",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0,properties:{fareFamilyCode:{type:"string",description:"Fare family code of the one displayed in the upsell teaser",regExp:"[A-Z0-9]+",example:"FIRST",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0},fareFamilyName:{type:"string",description:"Fare family name (localized)",regExp:"[A-Z0-9]+",example:"First",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_UPSELL,DATA_LOCALIZATION",UISpecific:!0}},additionalProperties:!1}},required:["otherFareFamily"],additionalProperties:!1},ancillaryService:{title:"ancillaryService",type:"object",page:"PURC",jiraLink:"NUI-10986",properties:{categoryCode:{type:"string",description:"Code of the category of service",regExp:"[A-Z]{3}",example:"BAG",page:"PURC",jiraLink:"NUI-10986"},categoryName:{type:"string",description:"Service category name in English",regExp:"[A-Z]+",example:"Baggage",page:"PURC",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},serviceCode:{type:"string",description:"Code of the ancillary service",regExp:"[A-Z]{4}",example:"XBAG",page:"PURC",jiraLink:"NUI-10986"},serviceName:{type:"string",description:"Service name in English",regExp:"[A-Z]+",example:"Extra baggage",page:"PURC",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},travellerID:{type:"number",description:"Id of the traveller to whom the service is associated",regExp:"[0-9]",example:1,page:"PURC",jiraLink:"NUI-10986"},price:{$ref:"#/definitions/ancillaryPrice"},isChargeable:{description:"Flag to say if the ancillary service is free or chargeable",type:"boolean",example:!0},quantity:{type:"number",description:"Number of booked services",regExp:"[0-9]+",example:"1",page:"PURC",jiraLink:"NUI-10986"},status:{type:"string",comment:"values: paid, selected / default: selected",description:"Status of the ancillary service in servicing flow to distinguish already booked/paid services from the ones selected through the servicing flow",regExp:"[A-Z]",example:"paid",page:"MPURC",jiraLink:"NUI-10737"},boundID:{type:"number",description:"Id of the bound on which the service is booked (present only if the service is booked at bound level)",regExp:"[0-9]",example:"1",page:"PURC",jiraLink:"NUI-10986"},segmentID:{type:"number",description:"Id of the segment on which the service is booked (present only if the service is booked at segment level)",regExp:"[0-9]",example:"1",page:"PURC",jiraLink:"NUI-10986"},emd:{type:"string",description:"EMD number",regExp:"[A-Z0-9]+",example:"123456789",page:"CONF,RTPL",jiraLink:"NUI-10986"},characteristic:{title:"characteristic",type:"array",items:{type:"object",page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS",properties:{key:{type:"string",regExp:"[A-Z0-9]+",example:"Weight",page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS"},value:{type:"string",description:"Value of the service characteristic",regExp:"[A-Z0-9]+",example:"20KG",page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS"}},required:["key","value"],additionalProperties:!1}},seatSelection:{type:"string",description:"Seat selected by the user",regExp:"[0-9]+[A-Za-z]{1}",example:"2A",page:"PURC,CONF,RTPL",jiraLink:"NUI-14081"}},required:["categoryCode","serviceCode","travellerID","price","quantity","status","emd"],additionalProperties:!1},insurance:{title:"insurance",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10730",properties:{code:{description:"Insurance product code",type:"string",regExp:"[A-Z0-9]+",page:"CONF,RTPL",jiraLink:"NUI-10730"},price:{$ref:"#/definitions/insurancePrice"},travellerID:{description:"Traveller id if the insurance is selected per passenger",type:"number",regExp:"[0-9]",example:1,page:"CONF,RTPL",jiraLink:"NUI-10730"}},required:["code","price"],additionalProperties:!1},price:{description:"NEW PRICE OBJECT - based on recent feedback. Providing more structure and support for: multi currency, miles, discount",type:"object",properties:{totalPrice:{type:"object",properties:{amount:{description:"Total price of the booking",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"cart : FARE,ALPI bound : AVAIL",jiraLink:"NUI-10722",activation:"bound: DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"},pricePerTravellerType:{title:"pricePerTravellerType",description:"MOVED from bound to price",type:"array",items:{type:"object",properties:{passengerTypeCode:{description:"Passenger type code (PTC)",type:"string",regExp:"[A-Z0-9]{3}",example:"ADT",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},totalPrice:{type:"object",properties:{amount:{description:"Total price of the booking",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]{3}",example:"EUR",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},additionalProperties:!1}},required:["passengerTypeCode","totalPrice"],additionalProperties:!1,page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},priceBreakdown:{title:"priceBreakdown",description:"NEW OBJECT - to capture price details in a structured way",type:"object",properties:{baseFarePrice:{type:"object",properties:{amount:{description:"Base fare of the flight segments",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10722"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},tax:{type:"object",properties:{totalTax:{type:"object",properties:{amount:{description:"Tax amount",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1},fuelSurcharge:{type:"object",properties:{amount:{description:"Sum of fuel surcharges for all travellers",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1}},required:["totalTax"],additionalProperties:!1},serviceFee:{type:"object",properties:{amount:{description:"Booking fee",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10722"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},ancillaryServicePrice:{type:"object",properties:{amount:{description:"Total amount of all ancillary services",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"cart: PURC / transaction: CONF,RTPL",jiraLink:"NUI-10986",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},insurancePrice:{type:"object",properties:{amount:{description:"Price of the insurance product(s)",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10730",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1}},additionalProperties:!1},currencyConversion:{description:"NEW OBJECT - to support multi-currency use cases",type:"object",properties:{convertedAmount:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},additionalProperties:!1},newValue:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL"}},additionalProperties:!1},exchangeRate:{type:"number"},conversionFee:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},additionalProperties:!1}},required:["convertedAmount","newValue","exchangeRate"],additionalProperties:!1},miles:{description:"NEW OBJECT - to capture miles&cash details in a structured way",type:"object",properties:{milesAmount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},cashPaidInMiles:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"}},required:["milesAmount","cashPaidInMiles"],additionalProperties:!1},discount:{title:"discount",description:"NEW OBJECT - to capture discount details in a structured way",type:"object",page:"CONF,RTPL",jiraLink:"NUI-16177",properties:{discountType:{type:"string"},initialPrice:{$ref:"#/definitions/initialPrice"},discountPercentValue:{type:"number",page:"CONF,RTPL",jiraLink:"NUI-16177"},discountFixedValue:{type:"object",properties:{amount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-16177",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-16177"}},required:["amount","currency"],additionalProperties:!1}},required:["initialPrice"],additionalProperties:!1},rebookingDetails:{title:"rebookingDetails",type:"object",properties:{initialPrice:{$ref:"#/definitions/initialPrice"},totalPrice:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},balance:{type:"object",properties:{amount:{description:"Balance to pay",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code of the previous total price",type:"string",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1},changeFees:{type:"object",properties:{amount:{description:"Change fees",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code of the previous total price",type:"string",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1},refund:{type:"object",properties:{amount:{description:"Amount to be refunded",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code of the previous total price",type:"string",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1},nonRefundableAmount:{type:"object",properties:{amount:{description:"Non-refundable amout",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"cart: FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code of the previous total price",type:"string",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1}},required:["initialPrice","balance"],additionalProperties:!1,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},additionalProperties:!1},ancillaryPrice:{type:"object",properties:{totalPrice:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},miles:{type:"object",properties:{milesAmount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},cashPaidInMiles:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"}},additionalProperties:!1},discount:{title:"discount",type:"object",properties:{initialPrice:{$ref:"#/definitions/initialPrice"},discountPercentValue:{type:"number"},discountFixedValue:{type:"object",properties:{amount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1}},required:["initialPrice"],additionalProperties:!1}},additionalProperties:!1},insurancePrice:{type:"object",properties:{amount:{type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10730"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},discountType:{type:"string"},initialPrice:{type:"object",properties:{amount:{description:"Initial price when a discount is applied on the totalPrice",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10735",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},payment:{title:"payment",description:"NOW AS ARRAY- to support multi FOP",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10722",properties:{price:{$ref:"#/definitions/price"},methodOfPayment:{type:"string",description:"Code of the method of payment",regExp:"[A-Z0-9]+",example:"CC",page:"CONF,RTPL"},paymentReference:{type:"string",description:"Reference from the payment provider",regExp:"[A-Z0-9]+",example:"123456789",page:"CONF,RTPL",jiraLink:"NUI-10722"},paymentType:{description:"NEW NAME - more abstract name introduced (instead of creditCardType) in roder to be able to store not only CC type, but also AMOP",type:"string",description2:"Type of credit card (credit card vendor)",regExp:"[A-Z0-9]+",example:"VI",page:"CONF,RTPL",jiraLink:"NUI-10722"},installment:{title:"installment",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT",properties:{plan:{type:"number",description:"Number of instalment to pay the trip",regExp:"[0-9]+",example:"5",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},interest:{type:"number",description:"Amount of interest",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},currency:{type:"string",description:"Currency for the instalment",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},firstMonthAmount:{type:"number",description:"First month amount",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},nextMonthAmount:{type:"number",description:"Next months amount",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"}},required:["plan","interest","currency"],additionalProperties:!1},item:{type:"array",items:{$ref:"#/definitions/item_ref"}}},required:["price","methodOfPayment","paymentReference","paymentType"],additionalProperties:!1},productInfo:{title:"productInfo",type:"object",properties:{productID:{description:"Id of a product",type:"number",regExp:"[0-9]+",example:8,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"}},required:["productID"],additionalProperties:!1,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"},item_ref:{title:"item",type:"object",page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722",properties:{productInfo:{$ref:"#/definitions/productInfo"},quantity:{type:"number"}},required:["productInfo","quantity"],additionalProperties:!1},category:{title:"category",type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{primaryCategory:{type:["string","null"],description:"Category of the product or flow",regExp:"[A-Z]+",example:"Flight Ticket",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0}},required:["primaryCategory"],additionalProperties:!1},attributes:{title:"details",description:"NEW OBJECT - providing flexibility to capture additional information (e.g. DDS specific)",type:"array",page:"ALL",jiralink:"NUI-14753",items:{type:"object",properties:{key:{description:"key for the attribute",type:"string",page:"ALL",jiralink:"NUI-14753"},value:{description:" value",type:"object",page:"ALL",jiralink:"NUI-14753"}},required:["key","value"],additionalProperties:!1}},priceValue:{type:"object",properties:{amount:{description:"Price value",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR"}},additionalProperties:!1,required:["amount","currency"]},miles:{type:"object",properties:{milesAmount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",activation:"DATA_PRICE_DETAILS"},cashPaidInMiles:{$ref:"#/definitions/priceValue"}},additionalProperties:!1},address:{description:"NEW OBJECT - based on PNR feedback",type:"object",properties:{line1:{type:"string",activation:"DATA_PII"},line2:{type:"string",activation:"DATA_PII"},city:{type:"string",activation:"DATA_PII"},country:{type:"string",activation:"DATA_PII"},zipCode:{type:"string",activation:"DATA_PII"},state:{type:"string",activation:"DATA_PII"}},additionalProperties:!1},timing:{description:"Represents the response time breakdown (Navigation + Post Navigation) linked to the page. This includes static resource downloads. Times are given in ms. ",type:"object",properties:{error:{type:"array",UISpecific:!0,items:{$ref:"#/definitions/error"}},navigation:{description:"Represents the response time navigation as defined per W3C API. Times are given in ms.",type:"object",properties:{connection:{description:"Time in ms to establish the connection to the server",type:"number",regExp:"[0-9]+",example:"8",page:"ALL",UISpecific:!0},request:{description:"Time in ms to send the request",type:"number",regExp:"[0-9]+",example:"3567",page:"ALL",UISpecific:!0},response:{description:"Time in ms to get the response from server and get it back on the client.",type:"number",regExp:"[0-9]+",example:"63",page:"ALL",UISpecific:!0},DOM:{description:"Time in ms to load the DOM and display the page (overall UI processing time)",type:"number",regExp:"[0-9]+",example:"892",page:"ALL",UISpecific:!0},total:{description:"Total in ms of the navigation phase",type:"number",regExp:"[0-9]+",example:"Flex pricer OWD availability",page:"ALL",UISpecific:!0}},additionalProperties:!1,page:"ALL",UISpecific:!0},postNavigation:{description:"Covers the post-processing after navigation phase. It is optional and would depend on the UI implementation (ex: post processing due to Aria template)is needed after navigation. Times are given in ms.",type:"object",properties:{startAt:{description:"Time in ms when the post navigation is starting. It should be equal or very close to the total of navigation.",type:"number",regExp:"[0-9]+",example:"4530",page:"ALL",UISpecific:!0},pageReady:{description:"Time in ms when the page is ready for display (from UI framework perspective). ",type:"number",regExp:"[0-9]+",example:"13368",page:"ALL",UISpecific:!0},spinnerEnd:{description:"Time in ms when the waiting layer is removed.",type:"number",regExp:"[0-9]+",example:"12688",page:"ALL",UISpecific:!0},total:{description:"Time in ms of the post navigation phase. Depending on UI implementation, total is max of pageReady and spinnerEnd.",type:"number",regExp:"[0-9]+",example:"8838",page:"ALL",UISpecific:!0}},additionalProperties:!1,page:"ALL",UISpecific:!0},total:{description:"Sum of navigation.total and postNavigation.total. It should correspond to the full response time from end-user point of view. Time is given in ms.",type:"number",regExp:"[0-9]+",example:"13368",page:"ALL",UISpecific:!0},resources:{description:"Represents the static resources attached to the current page",type:"object",properties:{count:{description:"Number of static resources downloaded along this page",type:"number",regExp:"[0-9]+",example:"54",page:"ALL",UISpecific:!0},totalDownload:{description:"Amount of download bytes over network (compressed data compression is activated)",type:"number",regExp:"[0-9]+",example:"1432463",page:"ALL",UISpecific:!0}},additionalProperties:!1,page:"ALL",UISpecific:!0}},additionalProperties:!1,page:"ALL",UISpecific:!0}}},"2.5.0":{$schema:"http://json-schema.org/draft-04/schema#",version:"2.5.0",$ref:"#/definitions/digitalData",description:"Digital data schema for AeRE - JCP",definitions:{digitalData:{description:"Schema for digitalData v.2.5.0",type:"object",properties:{version:{type:"string",description:"Version of the data layer",regExp:"[0-9]+.[0-9]+.[0-9]+",example:"2.0.0",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,alwaysPushed:!0},pageInstanceID:{type:"string",description:"Current page/state identifier",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,alwaysPushed:!0},digitalTouchpoint:{$ref:"#/definitions/digitalTouchpoint"},user:{type:"array",page:"ALL",jiraLink:"NUI-16580",UISpecific:!0,items:{$ref:"#/definitions/user_ref"}},traveller:{type:"array",page:"ALL",jiraLink:"NUI-10722",items:{$ref:"#/definitions/traveller_ref"}},searchInput:{$ref:"#/definitions/searchInput"},product:{title:"product",type:"array",UISpecific:!0,items:{$ref:"#/definitions/product"}},cart:{$ref:"#/definitions/cart"},transaction:{$ref:"#/definitions/transaction"},page:{UISpecific:!0,$ref:"#/definitions/page"},feature:{$ref:"#/definitions/feature"},event:{UISpecific:!0,type:"array",items:{$ref:"#/definitions/event"}},service:{$ref:"#/definitions/service"}},required:["version","pageInstanceID","traveller"],additionalProperties:!1},error:{type:"object",properties:{code:{description:"error code",type:"string"},message:{description:"error message",type:"string"},severity:{description:"error severity (F-E-W-I)",type:"string"},subError:{type:"array",items:{type:"object",properties:{code:{description:"error code",type:"string"},message:{description:"error message",type:"string"},severity:{description:"error severity (F-E-W-I)",type:"string"}}}}}},service:{type:"object",properties:{serviceInfo:{type:"object",properties:{serviceName:{type:"string"},status:{description:"status of the service call - 0 if OK - not 0 if KO: e.g. 46 if pax issue",type:"number"},error:{type:"array",items:{$ref:"#/definitions/error"}}}}}},digitalTouchpoint:{title:"digitalTouchpoint",description2:"TO BE REVIEWED - Proposal based on recent feedback.",type:"object",page:"ALL",jiraLink:"NUI-16580",UISpecific:!0,properties:{category:{description:"NEW OBJECT - structure according to W3C guidelines",type:"object",UISpecific:!0,properties:{primaryCategory:{description:"Digital touchpoint",type:"string",regExp:"[A-Za-z0-9-]+",example:"DX",page:"ALL",UISpecific:!0},subCategory:{description:"Sub category, which sub defines the primary category. It is useful when we have an embedded product in another one.",type:"string",regExp:"[A-Za-z0-9-]+",example:"DX",page:"ALL",UISpecific:!0}},required:["primaryCategory"],additionalProperties:!1},touchpointInfo:{description:"NEW OBJECT - structure according to W3C guidelines",type:"object",page:"ALL",jiraLink:"NUI-16580",UISpecific:!0,properties:{language:{description:"Language code",type:"string",regExp:"[A-Z]{2}",example:"GB",page:"ALL",jiraLink:"NUI-10722"},market:{description:"Market id",type:"string",regExp:"[A-Z]{2-3}",example:"US",page:"ALL",jiraLink:"NUI-10722"},backend:{type:"string",description:"Backend",regExp:"[A-Za-z0-9-]+",example:"OCGPRD",page:"ALL",jiraLink:"NUI-14081"},site:{type:"string",description:"Site code",regExp:"[A-Z]{8}",example:"ABCDABCD",page:"ALL",jiraLink:"NUI-10722"},sessionID:{description:"Digital session id",type:"string",regExp:"[A-Z]+",example:"abcdefghjkl",page:"ALL",jiraLink:"NUI-10722"},officeID:{description:"Office id composed of: IATA city or airport code - first three characters Corporate code - 2 characters Corporate qualifier - 1 character from 0 to 9 Office identifier - final three characters",type:"string",regExp:"[A-Z0-9]{9}",example:"LON1A08AA",jiraLink:"NUI-10722"},bookingFlow:{description:"BOOKING_FLOW input parameter",type:"string",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-11437",UISpecific:!0,activation:"DATA_CONTEXT"},tripFlow:{description:"TRIP_FLOW input parameter",type:"string",regExp:"[A-Z0-9]+",page:"ALL",jiraLink:"NUI-11437",activation:"DATA_CONTEXT"},HTTPParameter:{description:"NEW OBJECT - based on DDS feedback - single array to consolidate all HTTPParameter",type:"array",items:{type:"object",properties:{key:{type:"string"},value:{type:"object"}},required:["key","value"],additionalProperties:!1}},campaign:{description:"NEW OBJECT - based on BIA requirement",type:"array",items:{type:"object",properties:{key:{type:"string"},value:{type:"string"}},required:["key","value"],additionalProperties:!1}}},additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["category","touchpointInfo"],additionalProperties:!1},user_ref:{title:"user",type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{profile:{type:"array",jiraLink:"NUI-16581",UISpecific:!0,description:"NEW OBJECT - to provide W3C compliance",items:{type:"object",properties:{profileInfo:{description:"NEW OBJECT - to provide W3C compliance",type:"object",jiraLink:"NUI-16581",UISpecific:!0,properties:{profileID:{description:"User ID",type:"string",page:"ALL"},clientID:{description:"The clientID is linked to the cookie.",type:"string",page:"ALL",jiraLink:"NUI-17821",activation:"DATA_PII",UISpecific:!0},userID:{description:"The USER_ID from the request",type:"string",page:"ALL",jiraLink:"NUI-15784",UISpecific:!0},internetProtocolAddress:{type:"string",description:"IP address of the end user",regExp:"[0-9]{1-3}\\.[0-9]{1-3}",example:"255.255.255.255",page:"ALL",jiraLink:"NUI-10527",activation:"DATA_PII"},deviceType:{type:"string",description:"Type of device",regExp:"[A-Z]+",example:"TABLET",page:"ALL",jiraLink:"NUI-10527",activation:"DATA_CONTEXT",UISpecific:!0},userAgent:{description:"User agent of the browser",type:"string",regExp:"[A-Z0-9]+",example:"IE8..11|Edge|FireFox|Chrome|Opera|Safari",page:"ALL",jiraLink:"NUI-16581",activation:"DATA_CONTEXT",UISpecific:!0},OS:{description:"Version of Operating system",type:"string",regExp:"[A-Z0-9]+",example:"Windows 10|MacOs X|Ubuntu 16.06",page:"ALL",jiraLink:"NUI-16581",activation:"DATA_CONTEXT",UISpecific:!0},countryOfResidence:{type:"string",page:"ALL",activation:"DATA_CONTEXT",UISpecific:!0},app:{type:"object",jiraLink:"NUI-18763",UISpecific:!0,properties:{name:{type:"string",regExp:"[A-Z0-9]+",example:"MyFly",page:"ALL",description:"Name of the app in the app store",activation:"DATA_CONTEXT",UISpecific:!0},version:{type:"string",regExp:"[A-Z0-9]+",example:"1.0.0",page:"ALL",description:"Version of the app",activation:"DATA_CONTEXT",UISpecific:!0},appInstallID:{type:"string",regExp:"[A-Z0-9]+",example:"XD253GHH",page:"ALL",description:"unique ID similar to Cookie ID in web, meaning tracking the productApp installed on a device",activation:"DATA_CONTEXT",UISpecific:!0},appInstanceID:{type:"string",regExp:"[A-Z0-9]+",example:"X11R3GHH",page:"ALL",description:"uniqueID for each instance of the app (to follow start/stop of the app)",activation:"DATA_CONTEXT",UISpecific:!0}}}},additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["profileInfo"],additionalProperties:!1,UISpecific:!0}}},required:["profile"],additionalProperties:!1},traveller_ref:{title:"traveller",type:"object",page:"ALL",properties:{travellerID:{type:"number",description:"Id of the traveller within the cart",regExp:"[0-9]",example:"1",page:"ALL",jiraLink:"NUI-10722"},profileID:{description:"CEM Profile ID",type:"string"},passengerTypeCode:{type:"string",description:"Passenger type code (PTC)",regExp:"[A-Z0-9]{3}",example:"ADT",page:"ALL",jiraLink:"NUI-10722"},lastName:{type:"string",description:"Last name of the traveller",regExp:"[A-Z]+",example:"Doe",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"},firstName:{type:"string",description:"First name of the traveller",regExp:"[A-Z]+",example:"John",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"},midName:{type:"string",description:"Middle name of the traveller",regExp:"[A-Z]+",example:"Clarke",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"},suffix:{type:"string",description:"Traveller suffix",regExp:"[A-Z]+",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"},title:{type:"string",description:"Title of the traveller",regExp:"[A-Z]+",example:"Mr",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},dateOfBirth:{type:"string",description:"Data of birth of the traveller",regExp:"dd/MM/yyyy",example:"12-31-13",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},nationality:{type:"string",description:"Nationality of the traveller",regExp:"[A-Z]+",example:"FR",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},gender:{type:"string",comment:"Values: Male/Female",description:"Gender of the traveller",regExp:"[A-Z]",example:"Male",page:"CONF,RTPL",jiraLink:"NUI-11376",activation:"DATA_PII"},loyaltyProgram:{title:"loyaltyProgram",type:"array",items:{type:"object",page:"ALL",jiraLink:"NUI-10722",additionalProperties:!1,properties:{program:{type:"string",description:"Usually associated airline code",regExp:"[A-Z0-9]{2}",example:"1A",page:"ALL",jiraLink:"NUI-10722"},number:{type:"string",description:"Frequent flyer number",regExp:"[A-Z0-9]+",example:"123456789",page:"AAAS,PURC",jiraLink:"NUI-11376",activation:"DATA_PII"},milesBalance:{description:"Number of miles / points the traveller has",type:"number",regExp:"^[0-9]+$",example:"1000",page:"RTPL,UPGD, MPURC",jiraLink:"EP-3955"}}}},eTicket:{title:"eTicket",type:"array",items:{type:"object",page:"CONF,RTPL",jiraLink:"NUI-10722",properties:{ticketNumber:{type:"string",description:"Array of e-ticket numbers associated to the traveller id",regExp:"[A-Z0-9]+",page:"CONF,RTPL",jiraLink:"NUI-10722",example:"1"}},required:["ticketNumber"],additionalProperties:!1}},contactInformation:{title:"contactInformation",description:"Object which stores emails and phone numbers",type:"object",page:"AAAS,PURC",jiraLink:"NUI-15420",properties:{email:{title:"email",type:"array",items:{type:"object",page:"AAAS,PURC",jiraLink:"NUI-15420",properties:{emailAddress:{type:"string",format:"email",description:"Email address",regExp:"[A-Z@.]+",example:"noreply@amadeus.com",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"}},required:["emailAddress"],additionalProperties:!1}},phone:{title:"phone",type:"array",items:{type:"object",page:"AAAS,PURC",jiraLink:"NUI-15420",properties:{phoneNumber:{type:"string",description:"Phone number",regExp:"[0-9]+",example:"555632554",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"}},required:["phoneNumber"],additionalProperties:!1}}},additionalProperties:!1},document:{title:"document",description:"NEW OBJECT - based on PNR feedback",page:"AAAS,PURC",jiraLink:"NUI-15420",type:"array",items:{type:"object",properties:{type:{type:"string",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"},number:{type:"string",page:"AAAS,PURC",jiraLink:"NUI-15420",activation:"DATA_PII"}},additionalProperties:!1}},address:{type:"array",page:"AAAS,PURC",jiraLink:"NUI-15420",items:{$ref:"#/definitions/address"}},hasInfant:{description:"Indicator for infant",type:"boolean",comment:"Indicates if an infant travels along with the passenger. Values: true/false ",page:"AAAS,PURC",jiraLink:"NUI-18841"}},required:["travellerID","passengerTypeCode"],additionalProperties:!1},searchInput:{title:"searchInput",type:"object",page:"ALL",jiraLink:"NUI-16581",properties:{category:{description:"NEW OBJECT - to provide W3C compliance",type:"object",page:"ALL",jiraLink:"NUI-16581",properties:{primaryCategory:{type:"string",description:"Type of trip (one way, round trip, multi-destination)",page:"ALL",jiraLink:"NUI-16581",regExp:"[A-Z0-9]+",example:"R"}},required:["primaryCategory"],additionalProperties:!1},searchInputInfo:{description:"NEW OBJECT - to provide W3C compliance",type:"object",page:"ALL",jiraLink:"NUI-16581",properties:{dateTime:{type:"string",format:"date-time",description:"Date and time of when the search has been initiated",regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL",jiraLink:"NUI-10721"},corporateCode:{title:"Corporate Code",type:"string",description:"Corporate code specified in inputs and allowing to access to negotiated fares",regExp:"[A-Z0-9]+",example:"SummerPromo",page:"ALL",jiraLink:"NUI-10734"},flightDetails:{description:"NEW NAME - (instead of -bound- which was confusing due to element with the same name in flightTicket)",type:"array",items:{$ref:"#/definitions/flightDetails_ref"}}},required:["dateTime","flightDetails"],additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["category","searchInputInfo"],additionalProperties:!1},productDetails:{description:"NEW OBJECT - to represent the mutual exclusive characteristic",type:"object",properties:{flightTicket:{$ref:"#/definitions/flightTicket"},ancillaryService:{$ref:"#/definitions/ancillaryService"},insurance:{$ref:"#/definitions/insurance"}},additionalProperties:!1},product:{title:"product",description:"NEW JSON SCHEMA STRUCTURE - W3C compliance",type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{productInfo:{title:"productInfo",type:"object",properties:{productID:{type:"number",description:"Id of a product",regExp:"[0-9]+",example:"8",page:"ALL",jiraLink:"NUI-10722"},productDetails:{$ref:"#/definitions/productDetails"}},required:["productID","productDetails"],additionalProperties:!1},category:{type:"object",properties:{primaryCategory:{description:"Product category",type:"string",regExp:"[A-Za-z0-9-]+",example:"FlightTicket",page:"ALL"}},required:["primaryCategory"],additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["productInfo","category"],additionalProperties:!1},cart:{title:"cart",type:"object",page:"FARE,ALPI",properties:{cartInfo:{description:"NEW OBJECT - for W3C compliance",type:"object",page:"PURC,RTPL",jiraLink:"NUI-16580",properties:{cartID:{type:"string",page:"PURC,RTPL",jiraLink:"NUI-16580"},creationDate:{description:"Creation date of the cart in the system",type:"string",regExp:"dd/MM/yyyy",example:"12-31-13",page:"PURC,RTPL",jiraLink:"NUI-16580"},modificationDate:{description:"Last modification date of the cart in the system",type:"string",regExp:"dd/MM/yyyy",example:"12-31-13",page:"PURC,RTPL",jiraLink:"NUI-16580"}},required:["cartID","creationDate"],additionalProperties:!1},price:{$ref:"#/definitions/price"},item:{type:"array",items:{$ref:"#/definitions/item_ref"}},attributes:{$ref:"#/definitions/attributes"}},required:["price","item"],additionalProperties:!1},transaction:{title:"transaction",description:"NEW STRUCTURE - to provide W3C compliance",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10722",properties:{PNR:{description:"NEW OBJECT - moved from context",type:"object",page:"PURC,RTPL",jiraLink:"NUI-15422",activation:"DATA_CONTEXT",properties:{recLoc:{type:"string",description:"HTTP input parameter",regExp:"[A-Z0-9]+",page:"PURC,RTPL",jiraLink:"NUI-15422",activation:"DATA_CONTEXT"},creationDate:{type:"string",description:"Creation dateTime of the PNR",regExp:"YYYY-MM-DDThh:mm:ss.sZ",page:"RTPL",jiraLink:"NUI-15422",activation:"DATA_CONTEXT"},modificationDate:{description:"NEW OBJECT - based on recent feedback",type:"string",regExp:"YYYY-MM-DDThh:mm:ss.sZ",page:"MPURC,RPURC",jiraLink:"NUI-16767",activation:"DATA_CONTEXT"},mode:{description:"Describes the current state of the travel: C creation - M modification",type:"string"},state:{description:"Booking Status of the PNR (P - pending, B - prebooked, Q - confirmed)",type:"string"}},required:["recLoc"],additionalProperties:!1},total:{$ref:"#/definitions/price"},profile:{description:"NEW OBJECT - to provide W3C compliance",type:"object",properties:{profileInfo:{type:"object",properties:{profileID:{type:"string"}},required:["profileID"],additionalProperties:!1},billingAddress:{$ref:"#/definitions/address"},shippingAddress:{$ref:"#/definitions/address"}},required:["profileInfo"],additionalProperties:!1},payment:{type:"array",items:{$ref:"#/definitions/payment"}},item:{type:"array",items:{$ref:"#/definitions/item_ref"}},attributes:{$ref:"#/definitions/attributes"}},additionalProperties:!1},page:{title:"page",type:"object",page:"ALL",UISpecific:!0,jiraLink:"NUI-10722",properties:{pageInfo:{title:"pageInfo",type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{pageID:{type:"string",description:"Id of the page/state",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL",UISpecific:!0},pageName:{type:"string",description:"Name of the page/state in English",regExp:"[A-Z]+",example:"Flex pricer OWD availability",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0},timing:{$ref:"#/definitions/timing"}},required:["pageID","pageName"],additionalProperties:!1},category:{$ref:"#/definitions/category"},attributes:{$ref:"#/definitions/attributes"}},required:["pageInfo","category"],additionalProperties:!1},event:{title:"event",type:"object",page:"ALL",UISpecific:!0,properties:{eventInfo:{title:"eventInfo",type:"object",page:"ALL",UISpecific:!0,properties:{eventName:{type:"string",description:"Context of the event in English",regExp:"[A-Z]+",example:"FareFamilyDetails",page:"ALL",UISpecific:!0},key:{type:"string",description:"Event name",regExp:"[A-Z0-9]+",example:"ClickFareFamilyDescrip",page:"ALL",UISpecific:!0},pageID:{type:"string",description:"Page/state identifier",regExp:"[A-Z0-9]+",example:"FPOW",page:"ALL",UISpecific:!0},productID:{description:"Product identifier",type:"string",page:"ALL",UISpecific:!0},componentID:{type:"string",description:"Component identifier",regExp:"[A-Z0-9]+",example:"TripSummary",page:"ALL",UISpecific:!0},timestamp:{title:"timestamp",type:"string",description:"Timestamp when event is triggered",regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL",UISpecific:!0}},required:["eventName","key","timestamp"],additionalProperties:!1},category:{$ref:"#/definitions/category"},attributes:{$ref:"#/definitions/attributes"}},required:["eventInfo","category"],additionalProperties:!1},feature:{description:"NEW OBJECT - to capture information regarding activated product features",type:"array",items:{type:"object",properties:{category:{$ref:"#/definitions/category"},featureInfo:{type:"object",properties:{featureName:{type:"string"},ComponentID:{type:"string"}},required:["featureName"],additionalProperties:!1},attributes:{$ref:"#/definitions/attributes"}},required:["category","featureInfo"],additionalProperties:!1}},flightTicket:{title:"flightTicket",type:"object",page:"ALL",jiraLink:"NUI-10721",UISpecific:!0,properties:{itineraryPrice:{description:"Gives the price of the whole itinerary.",type:"object",items:{$ref:"#/definitions/price"}},bound:{type:"array",page:"ALL",jiraLink:"NUI-10721",UISpecific:!0,items:{$ref:"#/definitions/bound_ref"}},journeyLength:{type:"number",description:"Number of days between the departure and return flights",regExp:"[0-9]+",example:"7",page:"ALL"}},required:["bound"],additionalProperties:!1},bound_ref:{type:"object",page:"ALL",jiraLink:"NUI-10721",UISpecific:!0,properties:{boundID:{type:"number",description:"Id of the bound (starting from 1)",regExp:"[0-9]+",example:"8",page:"AVAIL",jiraLink:"NUI-10722"},fareFamilyCode:{type:"string",description:"Fare family code",regExp:"[A-Z0-9]+",example:"BUS",page:"AVAIL",jiraLink:"NUI-10722"},fareFamilyName:{type:"string",description:"Fare family name (localized)",regExp:"[A-Z0-9]+",example:"Business",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},departure:{$ref:"#/definitions/city"},arrival:{$ref:"#/definitions/city"},price:{$ref:"#/definitions/price"},upsell:{$ref:"#/definitions/upsell"},boundViewers:{description:"Number of people viewing the bound",type:"number",pattern:"^[0-9]+$",example:"12",jiraLink:"NUI-20636",page:"AVAIL",UISpecific:!0},flightViewers:{description:"Number of people viewing the flight",type:"number",pattern:"^[0-9]+$",example:"12",jiraLink:"NUI-20636",page:"AVAIL",UISpecific:!0},status:{type:"object",jiraLink:"NUI-15570,NUI-17821",page:"AVAIL",properties:{modificationAllowed:{type:"boolean",description:"True if modification is allowed, false otherwise",jiraLink:"NUI-15570,NUI-17821",page:"AVAIL"}}},segment:{type:"array",items:{$ref:"#/definitions/segment"}}},additionalProperties:!1},flightDetails_ref:{description:"NEW OBJECT - used to capture flight details in the searchInput",type:"object",page:"ALL",jiraLink:"NUI-16581",properties:{departure:{$ref:"#/definitions/city"},arrival:{$ref:"#/definitions/city"},passenger:{type:"array",page:"ALL",jiraLink:"NUI-10721",items:{type:"object",page:"ALL",jiraLink:"NUI-10721",properties:{passengerTypeCode:{description:"Type of passenger",type:"string",regExp:"[A-Z0-9]{3}",example:"ADT",page:"ALL",jiraLink:"NUI-10721"},numberOfPassengers:{description:"Number of this type of passenger",type:"number",regExp:"[0-9]{1-2}",example:"2",page:"ALL",jiraLink:"NUI-10721"}},required:["passengerTypeCode","numberOfPassengers"],additionalProperties:!1}},commercialFareFamily:{title:"commercialFareFamily",type:"array",page:"ALL",jiraLink:"NUI-10721",items:{type:"object",properties:{code:{description:"Commercial fare families provided in input",type:"string",regExp:"[A-Z0-9]+",example:"BUS",page:"ALL",jiraLink:"NUI-10721"},name:{description:"Commercial fare families provided in input (localized)",type:"string",regExp:"[A-Z0-9]+",example:"Business",page:"ALL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"}},required:["code"],additionalProperties:!1}},tripType:{description:"Type of trip (O - one way, R - round trip, M - multi-destination)",type:"string",regExp:"[A-Z]",example:"RT",page:"ALL",jiraLink:"NUI-10721"},flexibleDateValue:{description:"Value of the flexibility (3 for +/- 3 days of flexibility)",type:"number",regExp:"[0-9]+",example:"3",page:"ALL",jiraLink:"NUI-10721"},cabin:{description:"Cabin code",type:"string",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10728"},fareFamilyCode:{description:"Fare family code",type:"string",regExp:"[A-Z0-9]+",example:"BUS",page:"AVAIL",jiraLink:"NUI-10722"},fareFamilyName:{description:"Fare family name (localized)",type:"string",regExp:"[A-Z0-9]+",example:"Business",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},disruptedDates:{type:"array",description:"Disrupted dates - TO BE COMPLETED",items:[{description:"Date in the format YYYY-MM-DD",type:"string"}]},waivableDates:{type:"array",description:"Dynamic waivable dates - TO BE COMPLETED",items:[{description:"Date in the format YYYY-MM-DD",type:"string"}]}},additionalProperties:!1},segment:{type:"object",page:"AVAIL",jiraLink:"NUI-10722",properties:{aircraftCode:{description:"Aircraft/equipment type/code",type:"string",regExp:"^[A-Z0-9]+$",example:"A380",page:"AVAIL",jiraLink:"NUI-24106",activation:"DATA_PRODUCT_DETAILS"},departure:{$ref:"#/definitions/city"},arrival:{$ref:"#/definitions/city"},leg:{type:"array",items:{$ref:"#/definitions/leg"}},cabin:{type:"string",description:"Cabin code",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10722"},bookingClass:{type:"string",description:"RBD (Reservation Booking Designator)",regExp:"[A-Z]",example:"E",page:"AVAIL",jiraLink:"NUI-10722"},marketingFlightNumber:{type:"string",description:"Flight number of the marketing carrier",regExp:"[0-9]{3-4}",example:"1234",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingAirlineCode:{type:"string",description:"Airline code of the marketing carrier",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingOperationalSuffix:{type:"string",description:"Operational suffix if any",regExp:"[A-Z]",example:"A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},operatedBy:{$ref:"#/definitions/operatedBy"},segmentID:{type:"number",description:"Id of the segment on which the service is booked (present only if the service is booked at segment level)",regExp:"[0-9]",example:1,page:"PURC",jiraLink:"NUI-10986"},status:{type:"string",description:"Possible value : waivable",example:"waivable",page:"FARE,ALPI",jiraLink:"NUI-????"}},required:["departure","arrival"],additionalProperties:!1},leg:{type:"object",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS",properties:{departure:{$ref:"#/definitions/city"},arrival:{$ref:"#/definitions/city"},cabin:{type:"string",description:"Cabin code",regExp:"[A-Z]",example:"Y",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},bookingClass:{type:"string",description:"RBD (Reservation Booking Designator)",regExp:"[A-Z]",example:"E",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},aircraftCode:{type:"string",description:"Aircraft/equipment type/code",regExp:"[A-Z0-9]+",example:"A380",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingFlightNumber:{type:"string",description:"Flight number of the marketing carrier",regExp:"[0-9]{3-4}",example:"1234",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingAirlineCode:{type:"string",description:"Airline code of the marketing carrier",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},marketingOperationalSuffix:{type:"string",description:"Operational suffix if any",regExp:"[A-Z]",example:"A",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},operatedBy:{$ref:"#/definitions/operatedBy"},legID:{type:"number",description:"Id of the leg (starting from 1)",regExp:"[0-9]+",example:1,page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"}},required:["departure","arrival"],additionalProperties:!1},operatedBy:{title:"operatedBy",type:"object",page:"AVAIL",jiraLink:"NUI-10727",activation:"leg: DATA_PRODUCT_DETAILS segment: NONE",properties:{disclosure:{type:"string",description:"Operated by information",regExp:"[A-Z]+",example:"Amadeus Airlines for Amadeus Airways",page:"AVAIL",jiraLink:"NUI-10722"},airlineCode:{type:"string",description:"Airline code of the marketing carrier",regExp:"[A-Z0-9]{2}[A-Z]*",example:"1A",page:"AVAIL",jiraLink:"NUI-10722"}},required:["disclosure","airlineCode"],additionalProperties:!1},city:{type:"object",page:"ALL",jiraLink:"NUI-10721",properties:{countryCode:{type:"string",description:"Departure or Arrival country code provided in input by the end user",regExp:"[A-Z]{2}",example:"GB",page:"ALL",jiraLink:"NUI-15686"},cityCode:{type:"string",description:"Departure or Arrival City Code",regExp:"[A-Z]{3}",example:"PAR",page:"ALL",jiraLink:"NUI-10721"},locationCode:{type:"string",description:"Departure or Arrival location code provided in input by the end user (it could be a city or airport code)",regExp:"[A-Z]{3}",example:"PAR",page:"ALL",jiraLink:"NUI-10721"},airportCode:{type:"string",description:"Departure Airport Code",regExp:"[A-Z]{3}",example:"CDG",page:"AVAIL",jiraLink:"NUI-10722"},terminal:{type:"string",description:"Departure or Arrival terminal",regExp:"[A-Z0-9]+",example:"TW",page:"AVAIL",jiraLink:"NUI-10727",activation:"DATA_PRODUCT_DETAILS"},dateTime:{type:"string",description:"Date and time of when the search has been initiated",regExp:"YYYY-MM-DDThh:mm:ss.sTZD",example:"2013-12-31T19:20:30.45+01:00",page:"ALL",jiraLink:"NUI-10721"}},additionalProperties:!1},upsell:{title:"upsell",type:"object",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0,properties:{otherFareFamily:{title:"otherFareFamily",type:"array",UISpecific:!0,items:{type:"object",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",properties:{fareFamilyCode:{type:"string",description:"Fare family code",regExp:"[A-Z0-9]+",example:"BUS",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0},fareFamilyName:{type:"string",description:"Fare family name (localized)",regExp:"[A-Z0-9]+",example:"Business",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_UPSELL,DATA_LOCALIZATION",UISpecific:!0},price:{type:"number",description:"Price if any",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0},isNotCombinable:{type:"boolean",description:"Is cell not combinable",regExp:"(true|false)",example:"true",page:"AVAIL",jiraLink:"NUI-10896",activation:"DATA_UPSELL",UISpecific:!0},isNotSelectableReason:{type:"string",description:"That field gives the reason why a fare is not selectable for a user. isNotCombinable means it is not selectable related to other bound. isSoldOut means the fare family is sold out. isNotAvailable means it is not selectable for other reason. ",regExp:"^(isNotCombinable|isNotAvailable|isSoldOut)$",example:"isNotCombinable",page:"AVAIL",jiraLink:"NUI-24681",activation:"DATA_UPSELL",UISpecific:!0}},required:["fareFamilyCode"],additionalProperties:!1}},teaser:{title:"teaser",type:"object",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0,properties:{fareFamilyCode:{type:"string",description:"Fare family code of the one displayed in the upsell teaser",regExp:"[A-Z0-9]+",example:"FIRST",page:"AVAIL",jiraLink:"NUI-10723",activation:"DATA_UPSELL",UISpecific:!0},fareFamilyName:{type:"string",description:"Fare family name (localized)",regExp:"[A-Z0-9]+",example:"First",page:"AVAIL",jiraLink:"NUI-9083",activation:"DATA_UPSELL,DATA_LOCALIZATION",UISpecific:!0}},additionalProperties:!1}},required:["otherFareFamily"],additionalProperties:!1},ancillaryService:{title:"ancillaryService",type:"object",page:"PURC",jiraLink:"NUI-10986",properties:{categoryCode:{type:"string",description:"Code of the category of service",regExp:"[A-Z]{3}",example:"BAG",page:"PURC",jiraLink:"NUI-10986"},categoryName:{type:"string",description:"Service category name in English",regExp:"[A-Z]+",example:"Baggage",page:"PURC",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},serviceCode:{type:"string",description:"Code of the ancillary service",regExp:"[A-Z]{4}",example:"XBAG",page:"PURC",jiraLink:"NUI-10986"},serviceName:{type:"string",description:"Service name in English",regExp:"[A-Z]+",example:"Extra baggage",page:"PURC",jiraLink:"NUI-9083",activation:"DATA_LOCALIZATION"},travellerID:{type:"number",description:"Id of the traveller to whom the service is associated",regExp:"[0-9]",example:1,page:"PURC",jiraLink:"NUI-10986"},price:{$ref:"#/definitions/ancillaryPrice"},isChargeable:{description:"Flag to say if the ancillary service is free or chargeable",type:"boolean",example:!0},quantity:{type:"number",description:"Number of booked services",regExp:"[0-9]+",example:"1",page:"PURC",jiraLink:"NUI-10986"},status:{type:"string",comment:"values: paid, selected / default: selected",description:"Status of the ancillary service in servicing flow to distinguish already booked/paid services from the ones selected through the servicing flow",regExp:"[A-Z]",example:"paid",page:"MPURC",jiraLink:"NUI-10737"},boundID:{type:"number",description:"Id of the bound on which the service is booked (present only if the service is booked at bound level)",regExp:"[0-9]",example:"1",page:"PURC",jiraLink:"NUI-10986"},segmentID:{type:"number",description:"Id of the segment on which the service is booked (present only if the service is booked at segment level)",regExp:"[0-9]",example:"1",page:"PURC",jiraLink:"NUI-10986"},emd:{type:"string",description:"EMD number",regExp:"[A-Z0-9]+",example:"123456789",page:"CONF,RTPL",jiraLink:"NUI-10986"},characteristic:{title:"characteristic",type:"array",items:{type:"object",page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS",properties:{key:{type:"string",regExp:"[A-Z0-9]+",example:"Weight",page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS"},value:{type:"string",description:"Value of the service characteristic",regExp:"[A-Z0-9]+",example:"20KG",page:"PURC",jiraLink:"NUI-10986",activation:"DATA_PRODUCT_DETAILS"}},required:["key","value"],additionalProperties:!1}},seatSelection:{type:"string",description:"Seat selected by the user",regExp:"[0-9]+[A-Za-z]{1}",example:"2A",page:"PURC,CONF,RTPL",jiraLink:"NUI-14081"}},required:["categoryCode","serviceCode","travellerID","price","quantity","status","emd"],additionalProperties:!1},insurance:{title:"insurance",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10730",properties:{code:{description:"Insurance product code",type:"string",regExp:"[A-Z0-9]+",page:"CONF,RTPL",jiraLink:"NUI-10730"},price:{$ref:"#/definitions/insurancePrice"},travellerID:{description:"Traveller id if the insurance is selected per passenger",type:"number",regExp:"[0-9]",example:1,page:"CONF,RTPL",jiraLink:"NUI-10730"}},required:["code","price"],additionalProperties:!1},price:{description:"NEW PRICE OBJECT - based on recent feedback. Providing more structure and support for: multi currency, miles, discount",type:"object",properties:{totalPrice:{type:"object",properties:{amount:{description:"Total price of the booking",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:"99.99",page:"cart : FARE,ALPI bound : AVAIL",jiraLink:"NUI-10722",activation:"bound: DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"},pricePerTravellerType:{title:"pricePerTravellerType",description:"MOVED from bound to price",type:"array",items:{type:"object",properties:{passengerTypeCode:{description:"Passenger type code (PTC)",type:"string",regExp:"[A-Z0-9]{3}",example:"ADT",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},totalPrice:{type:"object",properties:{amount:{description:"Total price of the booking",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]{3}",example:"EUR",page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},additionalProperties:!1}},required:["passengerTypeCode","totalPrice"],additionalProperties:!1,page:"AVAIL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},priceBreakdown:{title:"priceBreakdown",description:"NEW OBJECT - to capture price details in a structured way",type:"object",properties:{baseFarePrice:{type:"object",properties:{amount:{description:"Base fare of the flight segments",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10722"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},tax:{type:"object",properties:{totalTax:{type:"object",properties:{amount:{description:"Tax amount",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1},fuelSurcharge:{type:"object",properties:{amount:{description:"Sum of fuel surcharges for all travellers",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1}},required:["totalTax"],additionalProperties:!1},serviceFee:{type:"object",properties:{amount:{description:"Booking fee",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10722"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},ancillaryServicePrice:{type:"object",properties:{amount:{description:"Total amount of all ancillary services",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"cart: PURC / transaction: CONF,RTPL",jiraLink:"NUI-10986",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},insurancePrice:{type:"object",properties:{amount:{description:"Price of the insurance product(s)",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10730",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1}},additionalProperties:!1},currencyConversion:{description:"NEW OBJECT - to support multi-currency use cases",type:"object",properties:{convertedAmount:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},additionalProperties:!1},newValue:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL"}},additionalProperties:!1},exchangeRate:{type:"number"},conversionFee:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},additionalProperties:!1}},required:["convertedAmount","newValue","exchangeRate"],additionalProperties:!1},miles:{description:"NEW OBJECT - to capture miles&cash details in a structured way",type:"object",properties:{milesAmount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},cashPaidInMiles:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"}},required:["milesAmount","cashPaidInMiles"],additionalProperties:!1},discount:{title:"discount",description:"NEW OBJECT - to capture discount details in a structured way",type:"object",page:"CONF,RTPL",jiraLink:"NUI-16177",properties:{discountType:{type:"string"},initialPrice:{$ref:"#/definitions/initialPrice"},discountPercentValue:{type:"number",page:"CONF,RTPL",jiraLink:"NUI-16177"},discountFixedValue:{type:"object",properties:{amount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-16177",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-16177"}},required:["amount","currency"],additionalProperties:!1}},required:["initialPrice"],additionalProperties:!1},rebookingDetails:{title:"rebookingDetails",type:"object",properties:{initialPrice:{$ref:"#/definitions/initialPrice"},totalPrice:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},balance:{type:"object",properties:{amount:{description:"Balance to pay",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code of the previous total price",type:"string",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1},changeFees:{type:"object",properties:{amount:{description:"Change fees",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code of the previous total price",type:"string",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1},refund:{type:"object",properties:{amount:{description:"Amount to be refunded",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code of the previous total price",type:"string",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1},nonRefundableAmount:{type:"object",properties:{amount:{description:"Non-refundable amout",type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"cart: FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code of the previous total price",type:"string",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},required:["amount","currency"],additionalProperties:!1}},required:["initialPrice","balance"],additionalProperties:!1,page:"FARE,ALPI",jiraLink:"NUI-11373",activation:"DATA_PRICE_DETAILS"}},additionalProperties:!1},ancillaryPrice:{type:"object",properties:{totalPrice:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},miles:{type:"object",properties:{milesAmount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},cashPaidInMiles:{type:"object",properties:{amount:{description:"Cash amount paid by the miles",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10732",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"}},additionalProperties:!1},discount:{title:"discount",type:"object",properties:{initialPrice:{$ref:"#/definitions/initialPrice"},discountPercentValue:{type:"number"},discountFixedValue:{type:"object",properties:{amount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1}},required:["initialPrice"],additionalProperties:!1}},additionalProperties:!1},insurancePrice:{type:"object",properties:{amount:{type:"number",regExp:"[0-9]+\\.[0-9]{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10730"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},discountType:{type:"string"},initialPrice:{type:"object",properties:{amount:{description:"Initial price when a discount is applied on the totalPrice",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:99.99,page:"CONF,RTPL",jiraLink:"NUI-10735",activation:"DATA_PRICE_DETAILS"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10722"}},required:["amount","currency"],additionalProperties:!1},payment:{title:"payment",description:"NOW AS ARRAY- to support multi FOP",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10722",properties:{price:{$ref:"#/definitions/price"},methodOfPayment:{type:"string",description:"Code of the method of payment",regExp:"[A-Z0-9]+",example:"CC",page:"CONF,RTPL"},paymentReference:{type:"string",description:"Reference from the payment provider",regExp:"[A-Z0-9]+",example:"123456789",page:"CONF,RTPL",jiraLink:"NUI-10722"},paymentType:{description:"NEW NAME - more abstract name introduced (instead of creditCardType) in roder to be able to store not only CC type, but also AMOP",type:"string",description2:"Type of credit card (credit card vendor)",regExp:"[A-Z0-9]+",example:"VI",page:"CONF,RTPL",jiraLink:"NUI-10722"},installment:{title:"installment",type:"object",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT",properties:{plan:{type:"number",description:"Number of instalment to pay the trip",regExp:"[0-9]+",example:"5",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},interest:{type:"number",description:"Amount of interest",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},currency:{type:"string",description:"Currency for the instalment",regExp:"[A-Z]},{3}",example:"EUR",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},firstMonthAmount:{type:"number",description:"First month amount",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"},nextMonthAmount:{type:"number",description:"Next months amount",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",page:"CONF,RTPL",jiraLink:"NUI-10731",activation:"DATA_PAYMENT"}},required:["plan","interest","currency"],additionalProperties:!1},item:{type:"array",items:{$ref:"#/definitions/item_ref"}}},required:["price","methodOfPayment","paymentReference","paymentType"],additionalProperties:!1},productInfo:{title:"productInfo",type:"object",properties:{productID:{description:"Id of a product",type:"number",regExp:"[0-9]+",example:8,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"}},required:["productID"],additionalProperties:!1,page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722"},item_ref:{title:"item",type:"object",page:"cart : ALL / transaction : CONF,RTPL",jiraLink:"NUI-10722",properties:{productInfo:{$ref:"#/definitions/productInfo"},quantity:{type:"number"}},required:["productInfo","quantity"],additionalProperties:!1},category:{title:"category",type:"object",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0,properties:{primaryCategory:{type:["string","null"],description:"Category of the product or flow",regExp:"[A-Z]+",example:"Flight Ticket",page:"ALL",jiraLink:"NUI-10722",UISpecific:!0}},required:["primaryCategory"],additionalProperties:!1},attributes:{title:"details",description:"NEW OBJECT - providing flexibility to capture additional information (e.g. DDS specific)",type:"array",page:"ALL",jiralink:"NUI-14753",items:{type:"object",properties:{key:{description:"key for the attribute",type:"string",page:"ALL",jiralink:"NUI-14753"},value:{description:" value",type:"object",page:"ALL",jiralink:"NUI-14753"}},required:["key","value"],additionalProperties:!1}},priceValue:{type:"object",properties:{amount:{description:"Price value",type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99"},currency:{description:"Currency code",type:"string",regExp:"[A-Z]},{3}",example:"EUR"}},additionalProperties:!1,required:["amount","currency"]},miles:{type:"object",properties:{milesAmount:{type:"number",regExp:"[0-9]+\\.[0-9]},{2}",example:"99.99",activation:"DATA_PRICE_DETAILS"},cashPaidInMiles:{$ref:"#/definitions/priceValue"}},additionalProperties:!1},address:{description:"NEW OBJECT - based on PNR feedback",type:"object",properties:{line1:{type:"string",activation:"DATA_PII"},line2:{type:"string",activation:"DATA_PII"},city:{type:"string",activation:"DATA_PII"},country:{type:"string",activation:"DATA_PII"},zipCode:{type:"string",activation:"DATA_PII"},state:{type:"string",activation:"DATA_PII"}},additionalProperties:!1},timing:{description:"Represents the response time breakdown (Navigation + Post Navigation) linked to the page. This includes static resource downloads. Times are given in ms. ",type:"object",properties:{error:{type:"array",UISpecific:!0,items:{$ref:"#/definitions/error"}},navigation:{description:"Represents the response time navigation as defined per W3C API. Times are given in ms.",type:"object",properties:{connection:{description:"Time in ms to establish the connection to the server",type:"number",regExp:"[0-9]+",example:"8",page:"ALL",UISpecific:!0},request:{description:"Time in ms to send the request",type:"number",regExp:"[0-9]+",example:"3567",page:"ALL",UISpecific:!0},response:{description:"Time in ms to get the response from server and get it back on the client.",type:"number",regExp:"[0-9]+",example:"63",page:"ALL",UISpecific:!0},DOM:{description:"Time in ms to load the DOM and display the page (overall UI processing time)",type:"number",regExp:"[0-9]+",example:"892",page:"ALL",UISpecific:!0},total:{description:"Total in ms of the navigation phase",type:"number",regExp:"[0-9]+",example:"Flex pricer OWD availability",page:"ALL",UISpecific:!0}},additionalProperties:!1,page:"ALL",UISpecific:!0},postNavigation:{description:"Covers the post-processing after navigation phase. It is optional and would depend on the UI implementation (ex: post processing due to Aria template)is needed after navigation. Times are given in ms.",type:"object",properties:{startAt:{description:"Time in ms when the post navigation is starting. It should be equal or very close to the total of navigation.",type:"number",regExp:"[0-9]+",example:"4530",page:"ALL",UISpecific:!0},pageReady:{description:"Time in ms when the page is ready for display (from UI framework perspective). ",type:"number",regExp:"[0-9]+",example:"13368",page:"ALL",UISpecific:!0},spinnerEnd:{description:"Time in ms when the waiting layer is removed.",type:"number",regExp:"[0-9]+",example:"12688",page:"ALL",UISpecific:!0},total:{description:"Time in ms of the post navigation phase. Depending on UI implementation, total is max of pageReady and spinnerEnd.",type:"number",regExp:"[0-9]+",example:"8838",page:"ALL",UISpecific:!0}},additionalProperties:!1,page:"ALL",UISpecific:!0},total:{description:"Sum of navigation.total and postNavigation.total. It should correspond to the full response time from end-user point of view. Time is given in ms.",type:"number",regExp:"[0-9]+",example:"13368",page:"ALL",UISpecific:!0},resources:{description:"Represents the static resources attached to the current page",type:"object",properties:{count:{description:"Number of static resources downloaded along this page",type:"number",regExp:"[0-9]+",example:"54",page:"ALL",UISpecific:!0},totalDownload:{description:"Amount of download bytes over network (compressed data compression is activated)",type:"number",regExp:"[0-9]+",example:"1432463",page:"ALL",UISpecific:!0}},additionalProperties:!1,page:"ALL",UISpecific:!0}},additionalProperties:!1,page:"ALL",UISpecific:!0}}}}},$prototype:{getSchema:function(e){return e=e||"1.0.0",this.SCHEMA[e]
}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/schemes/TemplateDigitalDataScheme.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.schemes.DigitalDataScheme",$singleton:!0,$statics:{SCHEMA:{}},$prototype:{getSchema:function(e){return e=e||"1.0.0",this.SCHEMA[e]}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_1_1_0/ContextAnalyticsV_1_1_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_1_1_0.ContextAnalyticsV_1_1_0",$extends:"plnextv2.analytics.ContextAnalytics",$dependencies:["plnextv2.utils.context.AppContext","plnextv2.utils.DateUtils","plnextv2.utils.analytics.AnalyticsUtils"],$constructor:function(e){this.$ContextAnalytics.constructor.call(this,e),this.dateUtils=plnextv2.utils.DateUtils,this._appContext=plnextv2.utils.context.AppContext,this.analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils,this.digitalDataParameters={},this.mappingAnalytics=e},$prototype:{buildContext:function(e,t){var i=this.mappingAnalytics.getContext();this.digitalDataParameters=this.analyticsUtils.getDigitalDataParameters(e),this._setSite(i,e.requestParameters),this._setSession(i),this._setLanguage(i,e.requestParameters),this._setMarket(i,e.config&&e.config.analytics),this._setOffice(i,e.config&&e.config.analytics),this._setExternals(i,e.requestParameters),this.digitalDataParameters.DATA_CONTEXT&&(this._setContextDataValues(i,e,t),this._addContextPNR(),this.__addExternalIDExtra(i,e.requestParameters))},_setBackend:function(e,t){this.mappingAnalytics.initParent(e),t.SITE_CORPORATE_ID&&(e.backend=t.SITE_CORPORATE_ID)},_setContextDataValues:function(e,t,i){var n=this.mappingAnalytics.getUserContext();0===n.length&&n.push({}),this._setBookingFlow(e,t.requestParameters),this._setTripFlow(e,t.requestParameters),this._setPEVariables(e,t.config&&t.config.analytics),this._setBackend(e,t.requestParameters),this._setDeviceType(n[0],i&&i.device),this._setBrowser(n[0],i&&i.browser)},_addContextPNR:function(){this._pageData=this._appContext.getPageData();var e=this._pageData.business.RESERVATION_INFO||this._pageData.business.PAYMENT;if(e){var t=this.mappingAnalytics.getPNR();if(this._setRecLoc(t,e),e.creationDate){var i=this.dateUtils.dateToJSON(e.creationDate);this._setCreationDate(t,i)}}},_setRecLoc:function(e,t){this.mappingAnalytics.initParent(e),t&&(e.recLoc=t.locator||t.recLoc)},_setCreationDate:function(e,t){this.mappingAnalytics.initParent(e),t&&(e.creationDate=t)}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_1_1_0/FlightAnalyticsV_1_1_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_1_1_0.FlightAnalyticsV_1_1_0",$extends:"plnextv2.analytics.FlightAnalytics",$constructor:function(e){this.$FlightAnalytics.constructor.call(this,e),this.mappingAnalytics=e},$prototype:{_loadFlightDetails:function(e,t,i){var n=this.$FlightAnalytics._loadFlightDetails.call(this,e,t,i);return n.departure&&n.arrival&&(n.departure.countryCode=e.beginLocation.countryCode,n.arrival.countryCode=e.endLocation.countryCode),n},_loadLegDeparture:function(e,t){this.$FlightAnalytics._loadLegDeparture.call(this,e,t),e.boardPoint&&(t.departure.countryCode=e.boardPoint.countryCode||"")},_loadLegArrival:function(e,t){this.$FlightAnalytics._loadLegArrival.call(this,e,t),e.offPoint&&(t.arrival.countryCode=e.offPoint.countryCode||"")},_setFareFamilyName:function(e,t,i){this._analyticsUtils.getDigitalDataParameters().DATA_LOCALIZATION&&(e.upsell.otherFareFamily[i].fareFamilyName=this._analyticsUtils.getLocalizedLabel(this.LIST_FARE_FAMILIES,t)||"")}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_1_1_0/MappingAnalyticsV_1_1_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_1_1_0.MappingAnalyticsV_1_1_0",$extends:"plnextv2.analytics.MappingAnalytics",$statics:{DIGITAL_DATA_VERSION:"1.1.0"},$constructor:function(){this.$MappingAnalytics.constructor.call(this),this.contextParent=this.OBJECT_SEPARATOR,this.context="context",this.pnrParent=this.context+this.OBJECT_SEPARATOR,this.pnr=this.pnrParent+"PNR",this.searchInputsParent=this.OBJECT_SEPARATOR,this.searchInputs="searchInputs",this.userParent=".",this.user="traveller"+this.ARRAY_SEPARATOR,this.userContextParent=this.OBJECT_SEPARATOR,this.userContext="user"+this.ARRAY_SEPARATOR},$destructor:function(){this.$MappingAnalytics.destructor.call(this)},$prototype:{getUserContextParent:function(){return this.getDigitalDataLocator(this.userContextParent)},getUserContext:function(){return this.getDigitalDataLocator(this.userContext)},getPNRParent:function(){return this.getDigitalDataLocator(this.pnrParent)},getPNR:function(){return this.getDigitalDataLocator(this.pnr)}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_1_1_0/SearchAnalyticsV_1_1_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_1_1_0.SearchAnalyticsV_1_1_0",$extends:"plnextv2.analytics.SearchAnalytics",$dependencies:[],$constructor:function(e){this.$SearchAnalytics.constructor.call(this,e),this.mappingAnalytics=e},$prototype:{_setBoundAdditionals:function(e,t){return t.beginLocation&&t.endLocation&&(t.beginLocation.countryCode&&(e.departure.countryCode=t.beginLocation.countryCode),t.endLocation.countryCode&&(e.arrival.countryCode=t.endLocation.countryCode)),e}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_1_2_0/FlightAnalyticsV_1_2_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_1_2_0.FlightAnalyticsV_1_2_0",$extends:"plnextv2.analytics.FlightAnalytics",$statics:{FLIGHT_STATUS:{WAIVABLE:"waivable"}},$constructor:function(){this.$FlightAnalytics.constructor.apply(this,arguments)},$destructor:function(){this.$FlightAnalytics.destructor.apply(this,arguments)},$prototype:{_loadFlightDetails:function(e,t,i,n){var a=this.$FlightAnalytics._loadFlightDetails.call(this,e,t,i,n);if(n&&n.waiverItemsPerSegmentId)for(var r=0;r<n.waiverItemsPerSegmentId.length;r++)if(e.id===n.waiverItemsPerSegmentId[r].segmentId){a.status=this.FLIGHT_STATUS.WAIVABLE;break}return a},setIsNotCombinable:function(e,t){var i=t&&t.bestRecommendationIndex>-1&&-1===t.currentBestRecommendationIndex;i&&(e.isNotCombinable=i)},_createBound:function(e,t,i,n){var a=this.$FlightAnalytics._createBound.call(this,e,t,i,n);return a.status=this._createBoundStatus(e,n),a},_createBoundStatus:function(e,t){var i={modificationAllowed:t[e].allowModify};return i}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_1_2_0/MappingAnalyticsV_1_2_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_1_2_0.MappingAnalyticsV_1_2_0",$extends:"plnextv2.analytics.versions.v_1_1_0.MappingAnalyticsV_1_1_0",$statics:{DIGITAL_DATA_VERSION:"1.2.0"},$constructor:function(){this.$MappingAnalyticsV_1_1_0.constructor.apply(this,arguments)},$destructor:function(){this.$MappingAnalyticsV_1_1_0.destructor.apply(this,arguments)},$prototype:{getSearchInputsBound:function(e){return this.getDigitalDataLocator(this.searchInputs+".bound[]."+e)}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_1_2_0/SearchAnalyticsV_1_2_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_1_2_0.SearchAnalyticsV_1_2_0",$extends:"plnextv2.analytics.SearchAnalytics",$dependencies:["plnextv2.utils.DynamicWaiverUtils","plnextv2.utils.analytics.AnalyticsUtils"],$constructor:function(){this.$SearchAnalytics.$constructor.apply(this,arguments),this._dynamicWaiverUtils=plnextv2.utils.DynamicWaiverUtils,this._analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils},$prototype:{buildDynamicWaiverData:function(e){if(e.DynamicWaiver&&e.DynamicWaiver.waiverItemsPerSegmentId&&e.ITINERARY_REVIEW&&e.ITINERARY_REVIEW.itineraryListBean&&e.ITINERARY_REVIEW.itineraryListBean.listItinerary){var t=e.DynamicWaiver.waiverItemsPerSegmentId,i=e.ITINERARY_REVIEW.itineraryListBean.listItinerary;i.forEach(function(e,i){this._buildDynamicWaiverDataForBound(e,i,t)},this)}},_buildDynamicWaiverDataForBound:function(e,t,i){var n=this._dynamicWaiverUtils.getDisruptedDatesForBound(e,i),a=this._dynamicWaiverUtils.getWaivedDatesForBound(e,i),r=this.mappingAnalytics.getSearchInputsBound(t);(n.length||a.length)&&(n.length&&(r.disruptedDates=[],n.forEach(this.__formatDateAndPush(r.disruptedDates),this)),a.length&&(r.waivableDates=[],a.forEach(this.__formatDateAndPush(r.waivableDates),this)))},__formatDateAndPush:function(e){return function(t){var i=this._analyticsUtils.formatDate(t);-1===e.indexOf(i)&&e.push(i)}},_setBound:function(e,t){var i=e.bound;this.$SearchAnalytics._setBound.call(this,e,t),i&&e.bound&&i.length===e.bound.length&&i.forEach(function(t,i){e.bound[i].disruptedDates=t.disruptedDates,e.bound[i].waivableDates=t.waivableDates},this)}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_0_0/AncillaryAnalyticsV_2_0_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_0_0.AncillaryAnalyticsV_2_0_0",$extends:"plnextv2.analytics.AncillaryAnalytics",$dependencies:["plnextv2.utils.CustomAriaUtils","plnextv2.utils.analytics.AnalyticsUtils","plnextv2.analytics.versions.v_2_0_0.PriceDetailsAnalyticsV_2_0_0"],$constructor:function(e){this.$AncillaryAnalytics.constructor.call(this,e),this._priceDetails=new plnextv2.analytics.versions.v_2_0_0.PriceDetailsAnalyticsV_2_0_0(e),this._customUtils=plnextv2.utils.CustomAriaUtils,this._analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils,this.mappingAnalytics=e},$prototype:{_addDigitalDataAncillaryService:function(e,t,i,n){n=parseInt(n);var a=t.isAdded===!0?this.STATUS_SELECTED:this.STATUS_PAID;a||(a="");var r={categoryCode:e.code,serviceCode:t.code,travellerID:t.passengerId,quantity:null!=t.number?t.number:1,status:a};r=this._setAncillaryProductPrice(r,t),this._analyticsUtils.getDigitalDataParameters().DATA_LOCALIZATION&&(r.categoryName=this._analyticsUtils.getLocalizedLabel(this.LIST_CATEGORIES,e.code)||"",r.serviceName=this._analyticsUtils.getLocalizedLabel(this.LIST_SERVICES,t.code)||""),r=this._addSeatSelection(r,t),"segmentID"===i?r=this._setBoundAndSegment(n,r):r.boundID=n+1,this._addDigitalDataAncillaryAdditionals(r,t);var s=this.mappingAnalytics.getProduct(),o=this.mappingAnalytics.getProductInfo(s.length-1).productID+1;this._addDigitalDataProduct(o,r,s),this._addDigitalDataCartItem(o,r),this.mappingAnalytics.getDigitalData().transaction&&this._addDigitalDataTransactionItem(o,r)},_addDigitalDataAncillaryAdditionals:function(e,t){e.emd=this._addDigitalDataAASemd(t),this._addDigitalDataAAScharacteristic(t,e)},_setDigitalDataAncillaryTotalPrice:function(e){if(this._analyticsUtils.getDigitalDataParameters().DATA_PRICE_DETAILS&&e.Price&&e.Price.totalServices){var t=this._priceDetails.getAmountCurrency(e.Price.totalServices.totalAmount,e.Price),i=this.mappingAnalytics.getCartPricePriceBreakdown();if(i.ancillaryServicePrice=t,digitalData.transaction){var n=this.mappingAnalytics.getTransactionTotalPriceBreakdown();n.ancillaryServicePrice=t}}},_addDigitalDataProduct:function(e,t,i){i.push({productInfo:{productID:e,productDetails:{ancillaryService:t}},category:{primaryCategory:this.ANCILLARY_SERVICE}})},_setAncillaryProductPrice:function(e,t){if(this._analyticsUtils.getDigitalDataParameters().DATA_PRICE_DETAILS&&t.price&&t.price.cash){var i=t.price.cash.totalAmount||0,n=this._priceDetails.getPriceCurrency(t.price.cash,t.price);e.price={totalPrice:{amount:i,currency:n}},this._isDiscount(t)&&e.price&&(e.price.discount=this._getAncillaryServiceInitialPrice(t))}return e},_getAncillaryServiceInitialPrice:function(e){var t=0,i=0,n=0;if(e.price&&e.price.cash){var a=e.price.cash;a.discountInformation?(t=a.discountInformation.nonDiscountedTotalAmount,i=t-a.totalAmount):(t="???",i=a.totalAmount);var r=this._getServiceCurrency(a);n={initialPrice:{amount:t,currency:r},discountFixedValue:{amount:i,currency:r}}}return n},_addDigitalDataCartItem:function(e,t){var i=this.mappingAnalytics.getCartItem();i.push({productInfo:{productID:e},quantity:t.quantity})},_addDigitalDataTransactionItem:function(e,t){var i=this.mappingAnalytics.getTransactionItem();i.push({productInfo:{productID:e},quantity:t.quantity})},_getServiceCurrency:function(e){var t=plnextv2.utils.context.AppContext.getPageData(),i=t.business.Price,n="???";return e.currency?n=e.currency.code:i.currency&&(n=i.currency.code),n},_isDiscount:function(e){return e.price&&e.price.cash&&e.price.cash.discountInformation}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_0_0/ContextAnalyticsV_2_0_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_0_0.ContextAnalyticsV_2_0_0",$extends:"plnextv2.analytics.versions.v_1_1_0.ContextAnalyticsV_1_1_0",$dependencies:["plnextv2.utils.context.AppContext","plnextv2.utils.DateUtils","aria.utils.Array","plnextv2.utils.analytics.AnalyticsUtils"],$constructor:function(e){this.$ContextAnalyticsV_1_1_0.constructor.call(this,e),this.dateUtils=plnextv2.utils.DateUtils,this._arrayUtils=aria.utils.Array,this._appContext=plnextv2.utils.context.AppContext,this.analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils,this.digitalDataParameters={},this.mappingAnalytics=e},$statics:{EXTERNAL_ID:"externalID"},$prototype:{buildContext:function(e,t){if(this.mappingAnalytics.getDigitalTouchInfo())var i=this.mappingAnalytics.getDigitalTouchInfo();var n=e.config&&e.config.analytics;this.digitalDataParameters=this.analyticsUtils.getDigitalDataParameters(e),this._setSite(i,e.requestParameters),this._setSession(i),this._setLanguage(i,e.requestParameters),this._setMarket(i,n),this._setOffice(i,n),this._setExternals(e.requestParameters),this.__addExternalIDExtra(e.requestParameters),this.digitalDataParameters.DATA_CONTEXT&&this._setContextDataValues(i,e,t)},_setContextDataValues:function(e,t,i){this._setBookingFlow(e,t.requestParameters),this._setTripFlow(e,t.requestParameters),this._setPEVariables(t.config&&t.config.analytics),this._setBackend(e,t.requestParameters);var n=this.mappingAnalytics.getUserProfileInfo();this._setDeviceType(n,i&&i.device),this._setUserAgent(n,i),this._setOperatingSystem(n,i)},_setUserAgent:function(e,t){e&&t.ua&&(e.userAgent=t.ua)},_setOperatingSystem:function(e,t){if(e&&t.os){var i=t.os.name+" "+t.os.version;e.OS=i}},_setExternals:function(e){if(e.EXTERNAL_ID){var t={key:this.EXTERNAL_ID,value:{value:e.EXTERNAL_ID}};this._setHTTPParameters(t)}},_setPEVariables:function(e){if(e)for(var t=1;t<=this.MAX_PE_VARIABLE;t++)if(e[this.PE_VARIABLE_ORI+t]){var i={key:this.PE_VARIABLE_DES+t,value:{value:e[this.PE_VARIABLE_ORI+t]}};this._setHTTPParameters(i)}},__addExternalIDExtra:function(e){if(e)for(var t=e.SITE_EXTERNAL_ID_LIMIT||1,i=2;t>=i;i++)if(e[this.EXTERNAL_ORI+i]){var n={key:this.EXTERNAL_DES+i,value:{value:this.EXTERNAL_ORI+i}};this._setHTTPParameters(n)}},_setMarket:function(e,t){this.mappingAnalytics.initParent(e),t&&""!==t.SITE_MARKET_ID&&(e.market=t.SITE_MARKET_ID)},_setHTTPParameters:function(e){var t=this.mappingAnalytics.getHTTPParameter();if(t&&e&&e.key){var i=-1;this._arrayUtils.forEach(t,function(t,n){t.key===e.key&&(i=n)}),i>-1?t[i]=e:t.push(e)}}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_0_0/FlightAnalyticsV_2_0_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_0_0.FlightAnalyticsV_2_0_0",$extends:"plnextv2.analytics.versions.v_1_1_0.FlightAnalyticsV_1_1_0",$constructor:function(e){this.$FlightAnalytics.constructor.call(this,e),this.mappingAnalytics=e},$prototype:{_addDigitalDataProduct:function(){var e=this.mappingAnalytics.getProductParent();e.product||(e.product=[{productInfo:{productID:1,productDetails:{flightTicket:{bound:[]}}},category:{primaryCategory:this.mappingAnalytics.FLIGHT_TICKET_CAT}}])},_addDigitalDataCart:function(){this._addDigitalDataCartPrice(),this._addDigitalDataCartItem()},_addDigitalDataCartPrice:function(){var e=this.mappingAnalytics.getCartParent();e.cart||(e.cart={price:{}})},_addDigitalDataCartItem:function(){var e=this.mappingAnalytics.getCart();e.item||(e.item=[{productInfo:{productID:this.mappingAnalytics.getProductID(0)},quantity:1}])}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_0_0/InsuranceAnalyticsV_2_0_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_0_0.InsuranceAnalyticsV_2_0_0",$extends:"plnextv2.analytics.InsuranceAnalytics",$dependencies:["plnextv2.analytics.versions.v_2_0_0.PriceDetailsAnalyticsV_2_0_0","plnextv2.utils.analytics.AnalyticsUtils"],$constructor:function(e){this.$InsuranceAnalytics.constructor.call(this,e),this._priceDetails=new plnextv2.analytics.versions.v_2_0_0.PriceDetailsAnalyticsV_2_0_0(e),this.mappingAnalytics=e,this._analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils},$prototype:{_setDigitalDataInsurance:function(e){var t=e&&e.INSURANCE&&e.INSURANCE.listProducts,i=this.mappingAnalytics.getProduct(),n=this.mappingAnalytics.getProductInfo(i.length-1).productID+1;if(this._setDigitalDataInsuranceItems(e,t,n),this._analyticsUtils.getDigitalDataParameters().DATA_PRICE_DETAILS){var a={};e.Price&&e.Price.totalInsurance&&(a=e.Price.totalInsurance);var r=this.mappingAnalytics.getCartPrice();this._priceDetails.setPriceInsurance(r,a,e.Price)}},_setDigitalDataInsuranceItems:function(e,t,i){for(var n=t&&t.length,a=0;n>a;a++){var r=0,s=t[a].priceAmount,o=this._getInsurancePrice(s,e.Price);t[a].listCoveredTravellerId&&(r=t[a].listCoveredTravellerId[0]);var l={productInfo:{productID:i,productDetails:{insurance:{code:t[a].productCode,travellerID:r}}},category:{primaryCategory:this.INSURANCE}};this._analyticsUtils.getDigitalDataParameters().DATA_PRICE_DETAILS&&o&&(l.productInfo.productDetails.insurance.price=o),this._addDigitalDataInsurance(l)}},_getInsurancePrice:function(e,t){var i={amount:0,currency:""};return e.totalAmount&&(i.amount=e.totalAmount),i.currency=this._priceDetails.getPriceCurrency(e,t),i},_addDigitalDataInsurance:function(e){var t=this.mappingAnalytics.getProduct();if(t.push(e),this._addDigitalDataCartItem(e),this._addDigitalDataTransactionItem(e),this._analyticsUtils.getDigitalDataParameters().DATA_PRICE_DETAILS){var i=this.mappingAnalytics.getCartPricePriceBreakdown();this._addInsurancePrice(i,e);var n=this.mappingAnalytics.getTransactionTotalPriceBreakdown();this._addInsurancePrice(n,e)}},_addInsurancePrice:function(e,t){e.insurancePrice||(e.insurancePrice={});var i=e.insurancePrice;if(i.amount||(i.amount=0),t&&t.productInfo&&t.productInfo.productDetails){var n=t.productInfo.productDetails.insurance&&t.productInfo.productDetails.insurance.price;i.amount+=n.amount||0}},_addDigitalDataCartItem:function(e){var t=this.mappingAnalytics.getCartItem(),i=aria.utils.Json.copy(e);i.productInfo&&delete i.productInfo.productDetails,t.push({productInfo:i.productInfo,quantity:1})},_addDigitalDataTransactionItem:function(e){var t=this.mappingAnalytics.getTransactionItem();t.push({productInfo:e.productInfo,quantity:1})}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_0_0/MappingAnalyticsV_2_0_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_0_0.MappingAnalyticsV_2_0_0",$extends:"plnextv2.analytics.versions.v_1_1_0.MappingAnalyticsV_1_1_0",$statics:{DIGITAL_DATA_VERSION:"2.0.0",PRODUCT_INFO_OBJ:"productInfo",PRODUCT_DETAILS_OBJ:"productDetails",BOUND_OBJ:"bound",PNR_OBJ:"PNR",PAYMENT_OBJ:"payment",PROFILE_OBJ:"profile",PROFILE_INFO:"profileInfo",BILLING_ADDRESS_OBJ:"billingAddress",SHIPPING_ADDRES_OBJ:"shippingAddress",PRICE_BREAKDOWN_OBJ:"priceBreakdown",REBOOKING_DETAILS:"rebookingDetails",PRICE:"price",FLIGHT_DETAILS_OBJ:"flightDetails",SEARCH_INPUT_OBJ:"searchInput",SEARCH_INPUT_INFO_OBJ:"searchInputInfo",CATEGORY_OBJ:"category",ATTRIBUTES_ARRAY:"attributes",CART_INFO:"cartInfo",DIGITAL_TOUCH_POINT:"digitalTouchpoint",DIGITAL_TOUCH_INFO:"touchpointInfo",CATEGORY:"category",USER:"user",HTTP_PARAMETER:"HTTPParameter"},$constructor:function(){this.$MappingAnalyticsV_1_1_0.constructor.call(this),this._typeUtils=aria.utils.Type,this._objectUtils=aria.utils.Object,this.context=this.DIGITAL_TOUCH_POINT,this.pnrParent=this.context+this.OBJECT_SEPARATOR,this.flightTicketParent=this.product+this.OBJECT_SEPARATOR+"0"+this.OBJECT_SEPARATOR+this.PRODUCT_INFO_OBJ+this.OBJECT_SEPARATOR+this.PRODUCT_DETAILS_OBJ,this.flightTicket=this.flightTicketParent+this.OBJECT_SEPARATOR+this.FLIGHT_TICKET_OBJ,this.flightTicketBoundParent=this.flightTicket,this.flightTicketBound=this.flightTicketBoundParent+this.OBJECT_SEPARATOR+this.BOUND_OBJ+this.ARRAY_SEPARATOR,this.pnrParent=this.transaction+this.OBJECT_SEPARATOR,this.pnr=this.pnrParent+this.PNR_OBJ,this.transactionPayment=this.transaction+this.OBJECT_SEPARATOR+this.PAYMENT_OBJ+this.ARRAY_SEPARATOR,this.profileParent=this.transaction+this.OBJECT_SEPARATOR,this.profile=this.profileParent+this.PROFILE_OBJ,this.billingAddressParent=this.profile+this.OBJECT_SEPARATOR,this.billingAddress=this.billingAddressParent+this.BILLING_ADDRESS_OBJ,this.shippingAddressParent=this.profile+this.OBJECT_SEPARATOR,this.shippingAddress=this.shippingAddressParent+this.SHIPPING_ADDRESS_OBJ,this.cartPricePriceBreakdown=this.cartPrice+this.OBJECT_SEPARATOR+this.PRICE_BREAKDOWN_OBJ,this.cartInfo=this.cart+this.OBJECT_SEPARATOR+this.CART_INFO,this.transactionTotalPriceBreakdown=this.transactionTotal+this.OBJECT_SEPARATOR+this.PRICE_BREAKDOWN_OBJ,this.transactionTotalRebooking=this.transactionTotal+this.OBJECT_SEPARATOR+this.REBOOKING_DETAILS,this.cartPriceRebooking=this.cartPrice+this.OBJECT_SEPARATOR+this.REBOOKING_DETAILS,this.transactionPaymentRebooking=this.transactionPayment+this.OBJECT_SEPARATOR+"0"+this.OBJECT_SEPARATOR+this.PRICE+this.OBJECT_SEPARATOR+this.REBOOKING_DETAILS,this.searchInputsParent=this.SEARCH_INPUT_OBJ,this.flightDetails=this.searchInputsParent+this.OBJECT_SEPARATOR+this.SEARCH_INPUT_INFO_OBJ+this.OBJECT_SEPARATOR+this.FLIGHT_DETAILS_OBJ+this.ARRAY_SEPARATOR,this.searchInputsInfo=this.searchInputsParent+this.OBJECT_SEPARATOR+this.SEARCH_INPUT_INFO_OBJ,this.searchInputsCategory=this.searchInputsParent+this.OBJECT_SEPARATOR+this.CATEGORY_OBJ,this.searchAttributes=this.searchInputsParent+this.OBJECT_SEPARATOR+this.ATTRIBUTES_ARRAY+this.ARRAY_SEPARATOR,this.digitalTouchPoint=this.context,this.digitalTouchInfo=this.digitalTouchPoint+this.OBJECT_SEPARATOR+this.DIGITAL_TOUCH_INFO,this.httpParameter=this.digitalTouchInfo+this.OBJECT_SEPARATOR+this.HTTP_PARAMETER+this.ARRAY_SEPARATOR,this.digitalTouchCategory=this.digitalTouchPoint+this.OBJECT_SEPARATOR+this.CATEGORY,this.userProfile=this.USER+this.ARRAY_SEPARATOR},$destructor:function(){this.$MappingAnalyticsV_1_1_0.destructor.call(this)},$prototype:{getFlightTicket:function(){return this.getDigitalDataLocator(this.flightTicket)},getAncillaryServices:function(){return this.getProductByType(this.ANCILLARY_SERVICE)},getAncillaryService:function(e){return this.getProductByIndex(e,this.ANCILLARY_SERVICE)},getInsurances:function(){return this.getProductByType(this.INSURANCE)},getInsurance:function(e){return this.getProductByTypeIndex(e,this.INSURANCE)},getProductByIndex:function(e,t){var i=this.getProduct(),n=null,a=!0;return t&&e<i.length&&i[e]&&(a=this.getProductType(i[e])===t),a&&(n=i[e]),n},getProductByType:function(e){for(var t=this.getProduct(),i=[],n=0;n<t.length;n++)this.getProductType(t[n])===e&&i.push(t[n]);return i},getProductID:function(e){var t=this.getProduct(),i=null;return e<t.length&&t[e].productInfo&&(i=t[e].productInfo.productID),i},getProductQuantity:function(e){var t=1,i=this.getProduct();return e<i.length&&this.getProductType(i[e])===this.ANCILLARY_SERVICE&&(t=i[e].productInfo.productDetails.ancillaryService.quantity||t),t},getProductType:function(e){var t="";if(e.productInfo&&e.productInfo.productDetails){var i=this._objectUtils.keys(e.productInfo.productDetails);i.length&&(t=i[0])}return t},getProfileParent:function(){return this.getDigitalDataLocator(this.profileParent)},getProfile:function(){return this.getDigitalDataLocator(this.profile)},getBillingAddressParent:function(){return this.getDigitalDataLocator(this.billingAddressParent)},getBillingAddress:function(){return this.getDigitalDataLocator(this.billingAddress)},getShippingAddressParent:function(){return this.getDigitalDataLocator(this.shippingAddressParent)},getShippingAddress:function(){return this.getDigitalDataLocator(this.shippingAddress)},getCartInfo:function(){return this.getDigitalDataLocator(this.cartInfo)},getCartPricePriceBreakdown:function(){return this.getDigitalDataLocator(this.cartPricePriceBreakdown)},getCartPriceRebooking:function(){return this.getDigitalDataLocator(this.cartPriceRebooking)},getTransactionTotalPriceBreakdown:function(){return this.getDigitalDataLocator(this.transactionTotalPriceBreakdown)},getTransactionTotalRebookingDetail:function(){return this.getDigitalDataLocator(this.transactionTotalRebooking)},getTransactionPaymentRebookingDetail:function(){return this.getDigitalDataLocator(this.transactionPaymentRebooking)},getContextSite:function(){return this.getDigitalDataLocator(this.digitalTouchInfo)},getSearchInput:function(){return this.getDigitalDataLocator(this.searchInputsParent)},getSearchInputCategory:function(){return this.getDigitalDataLocator(this.searchInputsCategory)},getSearchInputInfo:function(){return this.getDigitalDataLocator(this.searchInputsInfo)},getSearchInputAttributes:function(){return this.getDigitalDataLocator(this.searchAttributes)},getDigitalTouchPoint:function(){return this.getDigitalDataLocator(this.digitalTouchPoint)},getDigitalTouchInfo:function(){return this.getDigitalDataLocator(this.digitalTouchInfo)},getDigitalTouchCategory:function(){return this.getDigitalDataLocator(this.digitalTouchCategory)},getHTTPParameter:function(){return this.getDigitalDataLocator(this.httpParameter)},getUserProfileInfo:function(){var e=this.getDigitalDataLocator(this.userProfile);return 0===e.length&&e.push({}),e[0].profile||(e[0].profile=[]),0===e[0].profile.length&&e[0].profile.push({profileInfo:{}}),e[0].profile[0].profileInfo}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_0_0/PageAnalyticsV_2_0_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_0_0.PageAnalyticsV_2_0_0",$extends:"plnextv2.analytics.PageAnalytics",$constructor:function(e){this.mappingAnalytics=e},$prototype:{buildPage:function(e,t,i,n){var a=this.mappingAnalytics.getPageInstanceIdParent();this._setPageInstanceId(a,e);var r=this.mappingAnalytics.getDigitalTouchCategory(),s=this.mappingAnalytics.getPageCategory(),o=this.mappingAnalytics.getPageInfo();this._setPageId(o,e),this._setPageName(o,t),n&&this._setPageChannel(r,n),this._setPagePrimaryCategory(s,i)},_setPageChannel:function(e,t){this.mappingAnalytics.initParent(e),e.primaryCategory=t}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_0_0/PassengerAnalyticsV_2_0_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_0_0.PassengerAnalyticsV_2_0_0",$extends:"plnextv2.analytics.PassengerAnalytics",$dependencies:["plnextv2.utils.DateUtils","plnextv2.utils.analytics.AnalyticsUtils"],$constructor:function(e){this.$PassengerAnalytics.constructor.call(this,e),this._dateUtils=plnextv2.utils.DateUtils,this._analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils,this.mappingAnalytics=e},$prototype:{__setDigitalDataUserEmail:function(){},_setIdenMiddleName:function(e,t,i,n){if(e.business&&e.business.TravellerList&&e.business.TravellerList.Travellers){var a=e.business.TravellerList.Travellers;if(n){var r=this.__getIdentityInformation(n,a,i);this._setIdenMiddleNameValue(r,t,i)}}},_setIdenMiddleNameValue:function(e,t,i){t[i].midName=e&&e.IDEN_MiddleName?e.IDEN_MiddleName:""},_setSuffix:function(e,t){e[t].suffix=""},__setDigitalDataContactInformation:function(e,t){var i=this.mappingAnalytics.getUser(),n=e.business.FareReview;if(i[t].contactInformation||(i[t].contactInformation={}),n){var a=n.contactInformation;a&&(i[t].contactInformation.email||(i[t].contactInformation.email=[]),i[t].contactInformation.phone||(i[t].contactInformation.phone=[]),this.__setContactEmails(a,i,t),this.__setContactPhones(a,i,t))}},__setContactEmails:function(e,t,i){var n=0;e.Email&&(t[i].contactInformation.email[n]={},t[i].contactInformation.email[n].emailAddress=e.Email,n++),e.Email2&&(t[i].contactInformation.email[n]={},t[i].contactInformation.email[n].emailAddress=e.Email2,n++),e.Email3&&(t[i].contactInformation.email[n]={},t[i].contactInformation.email[n].emailAddress=e.Email3)},__setContactPhones:function(e,t,i){var n,a=0;e.PhoneMobile&&(n=e.PhoneMobile,e.PhoneMobileCode&&(n=e.PhoneMobileCode+e.PhoneMobile),t[i].contactInformation.phone[a]={},t[i].contactInformation.phone[a].phoneNumber=n,a++),e.PhoneHome&&(n=e.PhoneHome,e.PhoneHomeCode&&(n=e.PhoneHomeCode+e.PhoneHome),t[i].contactInformation.phone[a]={},t[i].contactInformation.phone[a].phoneNumber=n,a++),e.PhoneBusiness&&(n=e.PhoneBusiness,e.PhoneBusinessCode&&(n=e.PhoneBusinessCode+e.PhoneBusiness),t[i].contactInformation.phone[a]={},t[i].contactInformation.phone[a].phoneNumber=n),e.PhoneOther&&(n=e.PhoneOther,e.PhoneOtherCode&&(n=e.PhoneOtherCode+e.PhoneOther),t[i].contactInformation.phone[a]={},t[i].contactInformation.phone[a].phoneNumber=n)},__setDigitalDataDocument:function(e,t,i,n){if(t[i].document||(t[i].document=[]),e.business&&e.business.TravellerList&&e.business.TravellerList.Travellers){var a=e.business.TravellerList.Travellers;if(n){var r=this.__getIdentityInformation(n,a,i);r&&this.__setDocuments(r,t,i)}}},__setDocuments:function(e,t,i){var n=0;e.DocumentsPSPT[0]&&(n=this.__setDocumentPSPT(e,t,i,n)),e.DocumentsKNWT[0]&&(n=this.__setDocumentKNWT(e,t,i,n)),e.DocumentsREDN[0]&&(n=this.__setDocumentREDN(e,t,i,n)),e.DocumentsVISA[0]&&this.__setDocumentVISA(e,t,i,n)},__setDocumentPSPT:function(e,t,i,n){for(var a=0;a<e.DocumentsPSPT.length;a++)e.DocumentsPSPT[a].PSPT_DocumentNumber&&(t[i].document[n]={},t[i].document[n].type=e.DocumentsPSPT[a].PSPT_DocumentType||this.PSPT_DocumentType,t[i].document[n].number=e.DocumentsPSPT[a].PSPT_DocumentNumber,n++);return n},__setDocumentKNWT:function(e,t,i,n){for(var a=0;a<e.DocumentsKNWT.length;a++)e.DocumentsKNWT[a].KNWT_DocumentNumber&&(t[i].document[n]={},t[i].document[n].type=this.KNWT_DocumentType,t[i].document[n].number=e.DocumentsKNWT[a].KNWT_DocumentNumber,n++);return n},__setDocumentREDN:function(e,t,i,n){for(var a=0;a<e.DocumentsREDN.length;a++)e.DocumentsREDN[a].REDN_DocumentNumber&&(t[i].document[n]={},t[i].document[n].type=this.REDN_DocumentType,t[i].document[n].number=e.DocumentsREDN[a].REDN_DocumentNumber,n++);return n},__setDocumentVISA:function(e,t,i,n){for(var a=0;a<e.DocumentsVISA.length;a++)e.DocumentsVISA[a].VISA_DocumentNumber&&(t[i].document[n]={},t[i].document[n].type=this.VISA_DocumentType,t[i].document[n].number=e.DocumentsVISA[a].VISA_DocumentNumber)},__setDigitalDataAddress:function(e,t,i,n){if(t[i].address||(t[i].address=[]),e.business&&e.business.TravellerList&&e.business.TravellerList.Travellers){var a=e.business.TravellerList.Travellers;if(n){var r=this.__getIdentityInformation(n,a,i),s=0;r&&(s=this.__setDestinationAddress(r,t,i,s),this.__setResidenceAddress(r,t,i,s))}}},__getIdentityInformation:function(e,t,i){if(e.travellerId&&(i=e.travellerId-1),e.travellerTypeBean&&"INF"===e.travellerTypeBean.code)for(var n=0;n<t.length;n++)if(t[n].Id===e.travellerId.toString())return t[n].Infants&&t[n].Infants[0]&&t[n].Infants[0].IdentityInformation;return t[i]&&t[i].IdentityInformation},__setDestinationAddress:function(e,t,i,n){if(e.Apis&&e.Apis.LIST_DESTINATION_ADDRESSES)for(var a=e.Apis.LIST_DESTINATION_ADDRESSES,r=0;r<a.length;r++)a[r].AddressCity&&(t[i].address[n]={},t[i].address[n].line1=a[r].AddressFirstLine||"",t[i].address[n].line2=a[r].AddressSecondLine||"",t[i].address[n].city=a[r].AddressCity,t[i].address[n].country=a[r].AddressCountry,t[i].address[n].zipCode=a[r].AddressZipCode||"",t[i].address[n].state=a[r].AddressState||"",n++);return n},__setResidenceAddress:function(e,t,i,n){if(e.Apis&&e.Apis.LIST_RESIDENCE_ADDRESSES)for(var a=e.Apis.LIST_RESIDENCE_ADDRESSES,r=0;r<a.length;r++)a[r].AddressCity&&(t[i].address[n]={},t[i].address[n].line1=a[r].AddressFirstLine||"",t[i].address[n].line2=a[r].AddressSecondLine||"",t[i].address[n].city=a[r].AddressCity,t[i].address[n].country=a[r].AddressCountry,t[i].address[n].zipCode=a[r].AddressZipCode,t[i].address[n].state=a[r].AddressState||"",n++)}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_0_0/PaymentAnalyticsV_2_0_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_0_0.PaymentAnalyticsV_2_0_0",$extends:"plnextv2.analytics.PaymentAnalytics",$dependencies:["plnextv2.utils.DateUtils","plnextv2.utils.analytics.AnalyticsUtils"],$statics:{DEFAULT_DEVICE:"Desktop"},$constructor:function(e){this.$PaymentAnalytics.constructor.call(this,e),this._dateUtils=plnextv2.utils.DateUtils,this._analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils,this.mappingAnalytics=e},$prototype:{buildDigitalDataTransaction:function(e){if(e&&e.business){var t=e.business.RESERVATION_INFO||e.business.PAYMENT;t&&(this._addDigitalDataTransactionPNR(t),this._addDigitalDataTransactionItems())}},_addDigitalDataTransactionPNR:function(e){if(this._analyticsUtils.getDigitalDataParameters().DATA_CONTEXT){var t=this.mappingAnalytics.getPNR();if(this._setRecLoc(t,e),e.creationDate){var i=this._dateUtils.dateToJSON(e.creationDate);this._setCreationDate(t,i)}if(e.modificationDate){var n=this._dateUtils.dateToJSON(e.modificationDate);this._setModificationDate(t,n)}}},_addDigitalDataTransactionItems:function(){var e=this.mappingAnalytics.getTransactionItemParent();e.item=[];for(var t=this.mappingAnalytics.getProduct(),i=0;i<t.length;i++)e.item[i]={productInfo:{productID:t[i].productInfo.productID},quantity:this.mappingAnalytics.getProductQuantity(i)}},_getCityFromReservation:function(e){var t=e&&e.liTravellerInfo[0];return this._emptyString(t&&t.addressList&&t.addressList[0]&&t.addressList[0].city)},_getCountryFromReservation:function(e){var t=e&&e.liTravellerInfo[0];return this._emptyString(t&&t.addressList&&t.addressList[0]&&t.addressList[0].country)},_getFirstLineFromReservation:function(e){var t=e&&e.liTravellerInfo[0];return this._emptyString(t&&t.addressList&&t.addressList[0]&&t.addressList[0].firstAddressLine)},_getSecondLineFromReservation:function(e){var t=e&&e.liTravellerInfo[0];return this._emptyString(t&&t.addressList&&t.addressList[0]&&t.addressList[0].secondAddressLine)},_getStateFromReservation:function(e){var t=e&&e.liTravellerInfo[0];return this._emptyString(t&&t.addressList&&t.addressList[0]&&t.addressList[0].state)},_getZipCodeFromReservation:function(e){var t=e&&e.liTravellerInfo[0];return this._emptyString(t&&t.addressList&&t.addressList[0]&&t.addressList[0].zipCode)},_getCityFromTraveller:function(e){var t=e&&e.travellerInfoList[0];return this._emptyString(t&&t.addressList&&t.addressList[0]&&t.addressList[0].city)},_getCountryFromTraveller:function(e){var t=e&&e.travellerInfoList[0];return this._emptyString(t&&t.addressList&&t.addressList[0]&&t.addressList[0].country)},_getFirstLineFromTraveller:function(e){var t=e&&e.travellerInfoList[0];return this._emptyString(t&&t.addressList&&t.addressList[0]&&t.addressList[0].firstAddressLine)},_getSecondLineFromTraveller:function(e){var t=e&&e.travellerInfoList[0];return this._emptyString(t&&t.addressList&&t.addressList[0]&&t.addressList[0].secondAddressLine)},_getStateFromTraveller:function(e){var t=e&&e.travellerInfoList[0];return this._emptyString(t&&t.addressList&&t.addressList[0]&&t.addressList[0].state)},_getZipCodeFromTraveller:function(e){var t=e&&e.travellerInfoList[0];return this._emptyString(t&&t.addressList&&t.addressList[0]&&t.addressList[0].zipCode)},_emptyString:function(e){var t="";return e&&(t=e),t},_setDigitalDataProfile:function(e,t){var i=this.mappingAnalytics.getProfile();if(i.profileInfo={profileID:"1"},this._analyticsUtils.getDigitalDataParameters().DATA_PAYMENT){var n={};n.city=this._getCityFromReservation(e),n.country=this._getCountryFromReservation(e),n.line1=this._getFirstLineFromReservation(e),n.line2=this._getSecondLineFromReservation(e),n.zipCode=this._getZipCodeFromReservation(e),n.state=this._getStateFromReservation(e);var a=n.city+n.country+n.line1+n.line2+n.zipCode+n.state;a&&a.length>0&&(i.billingAddress=n);var r={};r.city=this._getCityFromTraveller(t),r.country=this._getCountryFromTraveller(t),r.line1=this._getFirstLineFromTraveller(t),r.line2=this._getSecondLineFromTraveller(t),r.zipCode=this._getZipCodeFromTraveller(t),r.state=this._getStateFromTraveller(t),a=r.city+r.country+r.line1+r.line2+r.zipCode+r.state,a&&a.length>0&&(i.shippingAddress=r)}},_setDigitalDataPayment:function(e){var t=this.mappingAnalytics.getTransaction();t.payment||(t.payment=[]);var i=this._setPaymentElements(e);if(this._analyticsUtils.getDigitalDataParameters().DATA_PAYMENT){var n=e.paymentInformation.installmentInfo;n&&n.numberOfInstallments&&(i.installment=this._setDigitalDataInstallment(n))}i.price={},i.item||(i.item=[]);for(var a=this.mappingAnalytics.getProduct(),r=0,s=a.length;s>r;r++)i.item[r]={productInfo:{productID:this.mappingAnalytics.getProductID(r)}},i.item[r].quantity=this.mappingAnalytics.getProductType(a[r])===this.mappingAnalytics.ANCILLARY_SERVICE?this.mappingAnalytics.getProductQuantity(r):1;t.payment=[i]},_setPaymentElements:function(e){var t=e.paymentInformation.paymentTypeCode,i=this._setPaymentType(e.paymentInformation),n="";t===this.AMOP&&(e.paymentInformation.AMOPConfirmation.asyncReference?n=e.paymentInformation.AMOPConfirmation.asyncReference.id:e.paymentInformation.AMOPConfirmation.asnInfo?n=e.paymentInformation.AMOPConfirmation.asnInfo.reference.id:e.paymentInformation.AMOPConfirmation.govInfo&&(n=e.paymentInformation.AMOPConfirmation.govInfo.referenceLetter.number));var a={methodOfPayment:t,paymentReference:n,paymentType:i};return a},_setPaymentType:function(e){var t;return t=e.paymentTypeCode===this.CREDIT_CARD&&e.creditCardInformation&&aria.utils.Type.isArray(e.creditCardInformation)?e.creditCardInformation[0].companyCode:e.paymentTypeCode===this.AMOP&&e.AMOPConfirmation?e.AMOPConfirmation.code:e.paymentTypeCode===this.PAY_LATER?this.PAY_LATER_DES:e.paymentTypeCode},_setRecLoc:function(e,t){t&&(this.mappingAnalytics.initParent(e),e.recLoc=t.locator||t.recLoc)},_setCreationDate:function(e,t){t&&(this.mappingAnalytics.initParent(e),e.creationDate=t)},_setModificationDate:function(e,t){this.mappingAnalytics.initParent(e),t&&(e.modificationDate=t)},_setPaymentPriceFromTotal:function(){var e=this.mappingAnalytics.getTransactionTotal(),t=this.mappingAnalytics.getTransactionPayment();t.length>0&&(t[0].price=e)}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_0_0/PriceDetailsAnalyticsV_2_0_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_0_0.PriceDetailsAnalyticsV_2_0_0",$extends:"plnextv2.analytics.PriceDetailsAnalytics",$dependencies:["plnextv2.utils.analytics.AnalyticsUtils"],$constructor:function(e){this.$PriceDetailsAnalytics.constructor.call(this,e),this.mappingAnalytics=e,this._typeUtils=aria.utils.Type,this._analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils,this.digitalDataParameters=this._analyticsUtils.getDigitalDataParameters()},$statics:{PROMO_CODE_TYPE_PERCENTAGE:"P"},$prototype:{buildPriceData:function(e){this.$PriceDetailsAnalytics.buildPriceData.call(this,e)},setDigitalDataBoundPrice:function(e,t,i,n){if(n=n||"",this._analyticsUtils.getDigitalDataParameters().DATA_PRICE_DETAILS){var a=t,r=this.getRecoBoundsAmount(e,i);a>r.length-1&&(a=r.length-1);var s=this.getRecoBoundAmount(e,a,i);s.currency=n;var o=this.mappingAnalytics.getFlightTicketBoundByIndex(t);o.price||(o.price={}),this.setPriceTotalPrice(o.price,s.totalAmount,s),this.setPriceBaseFare(o.price,s.amountWithoutTaxAndFee,s),this.setPriceServiceFee(o.price,s.serviceFee,s),this.setPriceTotalTax(o.price,s.tax,s),this.digitalDataParameters.DATA_PRICE_DETAILS&&(o.price.pricePerTravellerType=this.__setDigitalDataPricePerTravellerSwitch(e,a,n,i),this.setPriceFuelSurcharge(o.price,s.fuelAmountValue||this.__addFuelSurchargeValue(s.listTaxes),s)),o.price.rebookingDetails||(o.price.rebookingDetails={});var l=o.price.rebookingDetails;this._setTotalPrice(l,s.totalAmount,n.code),this._setRebookingInitialPrice(l,s.totalPrice,n.code),this._setRebookingFees(l,s.changeFees,n.code),this._setRebookingBalance(l,s.rebookBalance,n.code),this._setNonRefundableAmount(l,s.nonRefundableAmount,n.code),this._setRefund(l,s.totalRefund,n.code)}},_getDigitalDataInitialPrice:function(e){var t={initialPrice:{amount:0,currency:this.getPriceCurrency({},e)}};return this._hasAmountProperty(e.totalAmount)&&(t.initialPrice={amount:e.totalAmount.amount,currency:this.getPriceCurrency(e.totalAmount,e)}),this._hasAmountProperty(e.totalAmount)&&e.promoCode&&e.promoCode.promotionValue&&(t=this._getPromoCodeDiscount(e,t)),this._hasAmountProperty(e.totalAmount)&&e.discount&&(t=this._getPriceDiscount(e,t)),t.initialPrice&&!t.initialPrice.currency&&(t.initialPrice.currency=e.currency?e.currency.code:""),t},_getDigitalDataPrice:function(e){var t={};if(this.setPriceTotalPrice(t,e.totalAmount,e),this.setPriceBaseFare(t,e.baseFare,e),this.setPriceServiceFee(t,e.bookingFees,e),this.setPriceTotalTax(t,e.totalTaxes,e),this.setDoubleCurrency(t,e),this.setCurrencyConversionDccMcp(t,e),this.setCurrencyConversionApc(t,e),this.digitalDataParameters.DATA_PRICE_DETAILS){e.listTravellerPrice&&(t.pricePerTravellerType=this._getPricePerTravellerForTotals(e)),this.setPriceMilesAmount(t,this.__getDigitalTotalMiles(e));var i={};e.milesAndCash&&e.milesAndCash.milesAmount&&(i=e.milesAndCash.milesAmount),this.setPriceMilesCash(t,i,e)}return this._updatePrices(t,e),t},__getDigitalTotalMiles:function(e){var t=0;return this._typeUtils.isNumber(e)?t=e:this._hasAmountProperty(e.totalMiles)?t=e.totalMiles.amount:e.milesAndCash&&(t=e.milesAndCash.convertedCashMiles),t},updateMilesAndCash:function(e){if(this.mappingAnalytics.isDigitalData()&&e){var t=this.mappingAnalytics.getCartPrice();this.setPriceTotalPrice(t,e.totalPrice),this.digitalDataParameters.DATA_PRICE_DETAILS&&(this.setPriceMilesAmount(t,this.__getDigitalTotalMiles(e.totalMiles)),t.miles.cashPaidInMiles=this._getAmountCurrency(e.cashPaidInMiles)),this.setPriceTotalTax(t,e.taxes)}},addDigitalDataPricePerTraveller:function(e,t,i,n){return e.push({passengerTypeCode:t,totalPrice:{amount:i,currency:n||""}}),e},_getPricePerTravellerForTotals:function(e){for(var t=[],i=e.listTravellerPrice,n=0;n<i.length;n++){var a=this.getPriceCurrency(e,i[n]),r={amount:0,currency:a},s=i[n].traveller&&i[n].traveller.travellerCode;i[n].travellerTypePrice&&i[n].travellerTypePrice[0]&&i[n].travellerTypePrice[0].priceBean&&(r=this.getAmountCurrency(i[n].travellerTypePrice[0].priceBean.recoAmount,e)),t=this.addDigitalDataPricePerTraveller(t,s,r.amount,r.currency)}return t},setDigitalDataTotalPrice:function(e){var t=this.mappingAnalytics.getTransaction();t.total=this._getDigitalDataPrice(e),this.setTransactionRebooking(e)},_updatePrices:function(e,t){if(this._analyticsUtils.getDigitalDataParameters().DATA_PRICE_DETAILS){e.discount=this._getDigitalDataInitialPrice(t);var i={};null!=t.listTravellerPrice&&(i=this.__buildFuelSurcharge(t.listTravellerPrice)),this.setPriceFuelSurcharge(e,i,t),this.setPriceInsurance(e,{},t),this.setPriceAncillary(e,{},t)}},setPriceAncillary:function(e,t,i){e.priceBreakdown||(e.priceBreakdown={}),e.priceBreakdown.ancillaryServicePrice||(e.priceBreakdown.ancillaryServicePrice={}),e.priceBreakdown.ancillaryServicePrice=this.getAmountCurrency(t,i)},setPriceBaseFare:function(e,t,i){e.priceBreakdown||(e.priceBreakdown={}),e.priceBreakdown.baseFarePrice||(e.priceBreakdown.baseFarePrice={}),e.priceBreakdown.baseFarePrice=this.getAmountCurrency(t,i)},setPriceFuelSurcharge:function(e,t,i){e.priceBreakdown||(e.priceBreakdown={}),e.priceBreakdown.tax||(e.priceBreakdown.tax={}),e.priceBreakdown.tax.fuelSurcharge||(e.priceBreakdown.tax.fuelSurcharge={}),e.priceBreakdown.tax.fuelSurcharge=this.getAmountCurrency(t,i)},setPriceInsurance:function(e,t,i){e.priceBreakdown||(e.priceBreakdown={}),e.priceBreakdown.insurancePrice||(e.priceBreakdown.insurancePrice={}),e.priceBreakdown.insurancePrice=this.getAmountCurrency(t,i)},setPriceMiles:function(e,t,i){this.setPriceMilesAmount(e,t),this.setPriceMilesCash(e,i)},setPriceMilesAmount:function(e,t){e.miles||(e.miles={}),e.miles.milesAmount=t||0},setPriceMilesCash:function(e,t,i){e.miles||(e.miles={}),e.miles.cashPaidInMiles||(e.miles.cashPaidInMiles={}),e.miles.cashPaidInMiles=this.getAmountCurrency(t,i)},setPriceServiceFee:function(e,t,i){e.priceBreakdown||(e.priceBreakdown={}),e.priceBreakdown.serviceFee||(e.priceBreakdown.serviceFee={});var n=i&&i.obFees?i.obFees:0,a=this._getServiceFee(t,n);e.priceBreakdown.serviceFee=this.getAmountCurrency(a,i)},setPriceTotalPrice:function(e,t,i){e.totalPrice||(e.totalPrice={}),e.totalPrice=this.getAmountCurrency(t,i)},setPriceTotalTax:function(e,t,i){e.priceBreakdown||(e.priceBreakdown={}),e.priceBreakdown.tax||(e.priceBreakdown.tax={}),e.priceBreakdown.tax.totalTax||(e.priceBreakdown.tax.totalTax={}),e.priceBreakdown.tax.totalTax=this.getAmountCurrency(t,i)},_getPriceDiscount:function(e,t){if(this._isPercentageDiscount(e)){var i=e.discount.discountAmount.amount;return{discountPercentValue:e.discount.discountAmount.amount,initialPrice:{amount:t.initialPrice.amount+i}}}return{discountFixedValue:{amount:e.discount.discountAmount.amount,currency:this.getPriceCurrency(e.discount.discountAmount,e)},initialPrice:{amount:t.initialPrice.amount+e.discount.discountAmount.amount}}},setDoubleCurrency:function(e,t){t.totalAmount&&t.totalAmount.convertedCurrency&&(e.currencyConversion||(e.currencyConversion={}),e.currencyConversion.convertedAmount||(e.currencyConversion.convertedAmount={}),e.currencyConversion.newValue||(e.currencyConversion.newValue={}),e.currencyConversion.exchangeRate=t.totalAmount.exchangeRate,t.totalCollectBalance&&t.totalCollectBalance.amount?this._setCollectBalance(e,t):(e.currencyConversion.convertedAmount=this._getAmountCurrency(t.totalAmount),t.totalAmount.convertedAmount&&(e.currencyConversion.newValue.amount=t.totalAmount.convertedAmount),t.totalAmount.convertedCurrency.code&&(e.currencyConversion.newValue.currency=t.totalAmount.convertedCurrency.code),this._setConversionFee(e,t),this._applyConversionFee(e)))},setCurrencyConversionApc:function(e,t){t.apc&&(e.currencyConversion||(e.currencyConversion={}),e.currencyConversion.convertedAmount||(e.currencyConversion.convertedAmount={}),e.currencyConversion.newValue||(e.currencyConversion.newValue={}),e.currencyConversion.exchangeRate=t.apc.exchangeRate,t.totalCollectBalance&&t.totalCollectBalance.amount?this._setCollectBalance(e,t):(e.currencyConversion.convertedAmount=this._getAmountCurrency(t.totalAmount),t.apc.convertedAmount&&(e.currencyConversion.newValue.amount=t.apc.convertedAmount),t.apc.currency&&(e.currencyConversion.newValue.currency=t.apc.currency.code),this._setConversionFee(e,t),this._applyConversionFee(e)))},setCurrencyConversionDccMcp:function(e,t){t.dccMcp&&(e.currencyConversion||(e.currencyConversion={}),e.currencyConversion.convertedAmount||(e.currencyConversion.convertedAmount={}),e.currencyConversion.newValue||(e.currencyConversion.newValue={}),e.currencyConversion.exchangeRate=t.dccMcp.exchangeRate,t.totalCollectBalance&&t.totalCollectBalance.amount?this._setCollectBalance(e,t):(e.currencyConversion.convertedAmount=this._getAmountCurrency(t.totalAmount),e.currencyConversion.newValue=this._getAmountCurrency(t.dccMcp),this._setConversionFee(e,t),this._applyConversionFee(e)))},_setCollectBalance:function(e,t){var i=t.totalCollectBalance.amount*t.totalAmount.exchangeRate||parseFloat("0"),n="",a="";t.totalAmount&&t.totalAmount.currency&&(n=t.totalAmount.currency.code),t.totalAmount&&t.totalAmount.convertedCurrency&&(a=t.totalAmount.convertedCurrency.code),t.dccMcp&&t.dccMcp.currency&&(a=t.dccMcp.currency.code),t.apc&&t.apc.currency&&(a=t.apc.currency.code),e.currencyConversion.convertedAmount.amount=t.totalCollectBalance.amount,e.currencyConversion.convertedAmount.currency=n,e.currencyConversion.newValue.amount=i.toFixed(4),e.currencyConversion.newValue.currency=a},_setConversionFee:function(e,t){e.currencyConversion.conversionFee||(e.currencyConversion.conversionFee={}),e.currencyConversion.conversionFee=t.creditCardFees?this._getAmountCurrency(t.creditCardFees.amount,t.currency.code):{amount:0,currency:t.currency.code}},_applyConversionFee:function(e){e.currencyConversion.conversionFee&&e.currencyConversion.conversionFee.amount&&(e.currencyConversion.convertedAmount.amount=e.currencyConversion.convertedAmount.amount-e.currencyConversion.conversionFee.amount)},_getPromoCodeDiscount:function(e,t){var i=e.promoCode;return this._isPromotionByPercentage(i.promotionType)?{discountPercentValue:parseFloat(i.promotionValue),initialPrice:{amount:t.initialPrice.amount+i.estimatedDiscountAmount}}:{discountFixedValue:{amount:parseFloat(i.promotionValue),currency:this.getPriceCurrency(i,e)},initialPrice:{amount:t.initialPrice.amount+i.estimatedDiscountAmount}}},_isPercentageDiscount:function(e){return e.discount?e.discount.discountAmount.isPercentage:void 0},_isPromotionByPercentage:function(e){return e===this.PROMO_CODE_TYPE_PERCENTAGE},getPriceCurrency:function(e,t){var i="";return e&&e.currency?i=e.currency.code:t&&t.currency&&(i=t.currency.code),i},_getAmountCurrency:function(e,t){var i={amount:0,currency:t||""};return this._typeUtils.isNumber(e)?i.amount=e:this._typeUtils.isObject(e)&&(i.amount=e.amount||0,e.currency&&e.currency.code&&(i.currency=e.currency.code)),i},getAmountCurrency:function(e,t){var i={amount:0,currency:""};return this._typeUtils.isNumber(e)?i.amount=e:this._typeUtils.isObject(e)&&(i.amount=e.amount||0),i.currency=this.getPriceCurrency(e,t),i},setDigitalDataRebookingPrice:function(e){if(this._analyticsUtils.getDigitalDataParameters().DATA_PRICE_DETAILS){var t={};if(this.mappingAnalytics.getCartPriceRebooking()){var i=this.mappingAnalytics.getCartPriceRebooking();this.__setDigitalRebookingDetailsDefaults(i,t,e)}this.setTransactionRebooking(e)}},setDigitalDataRefundPrice:function(e){var t={};t=this.__setDigitalDataOriginalPrice(e.Price,t);var i=this.__getRefundPreviewPrice(e.RefundPreviewView);i&&(t.newTotal=0,t=this.__setDigitalDataRefundCurrencyPrice(i,t),!t.previousTotal&&i.totalAmountRefunded&&(t.previousTotal=i.totalAmountRefunded,i.penalty&&(t.previousTotal+=-i.penalty)),t.changeFees=i.penalty||0,t.refund=i.totalAmountRefunded||0,t.balance=0,t.nonRefundableAmount=0),this.setRefundRebookingDetails(t,e)},setRefundRebookingDetails:function(e,t){if(this.mappingAnalytics.getTransactionTotalRebookingDetail){var i=this.mappingAnalytics.getTransactionTotalRebookingDetail();this.__setDigitalRebookingDetailsDefaults(i,e,t.price)}if(this.mappingAnalytics.getCartPriceRebooking){var n=this.mappingAnalytics.getCartPriceRebooking();this.__setDigitalRebookingDetailsDefaults(n,e,t.price)}if(this.mappingAnalytics.getTransactionPaymentRebookingDetail&&t.Price){var a=this.mappingAnalytics.getTransactionPaymentRebookingDetail();this.__setDigitalRebookingDetailsDefaults(a,e,t.price)}},__setDigitalRebookingDetailsDefaults:function(e,t,i){var n=this.__setDigitalRebookingDefaultCurrency(i);i?(t=this.__setDigitalRebookingOldPrice(i,t),t=this.__setDigitalRebookingTotal(i,t)):n=t.newCurrency;var a=0;t.previousTotal>0&&(a=t.previousTotal);var r=t.previousCurrency||n,s=t.newTotal,o=t.newCurrency||n;this._setTotalPrice(e,s,o),this._setRebookingInitialPrice(e,a,r),this._setRebookingFees(e,t.changeFees,n),this._setRebookingBalance(e,t.balance,n),this._setNonRefundableAmount(e,t.nonRefundableAmount,n),this._setRefund(e,t.refund,n)},setTransactionRebooking:function(e){if(this.mappingAnalytics.getTransactionTotalRebookingDetail()){var t={},i=this.mappingAnalytics.getTransactionTotalRebookingDetail();this.__setDigitalRebookingDetailsDefaults(i,t,e)}},_setTotalPrice:function(e,t,i){e.totalPrice={amount:t||0,currency:i||this.getPriceCurrency({},i)}},_setRebookingInitialPrice:function(e,t,i){e.initialPrice={amount:t||0,currency:i||this.getPriceCurrency({},i)}},_setRebookingFees:function(e,t,i){e.changeFees={amount:t||0,currency:i||this.getPriceCurrency({},i)}},_setRebookingBalance:function(e,t,i){e.balance={amount:t||0,currency:i||this.getPriceCurrency({},i)}},_setNonRefundableAmount:function(e,t,i){e.nonRefundableAmount={amount:t||0,currency:i||this.getPriceCurrency({},i)}},_setRefund:function(e,t,i){e.refund={amount:t||0,currency:i||this.getPriceCurrency({},i)}},_setDigitalDataCartCreationDate:function(e){var t=this.mappingAnalytics.getCartInfo();e.locator&&(t.cartID=e.locator),e.creationDate&&(t.creationDate=this.dateUtils.formatDate(new Date(e.creationDate),this.FORMAT_DATE_CART)),e.modificationDate&&(t.modificationDate=this.dateUtils.formatDate(new Date(e.modificationDate),this.FORMAT_DATE_CART))},setDigitalDataCartPrice:function(e){var t=this.mappingAnalytics.getCart();this._checkDigitalDataCartPrice(t,e)&&(t.price=this._getDigitalDataPrice(e))},_checkDigitalDataCartPrice:function(e,t){return this.checkPriceObject(t)&&this.checkCurrencyObject(e,t)?!1:!0},checkPriceObject:function(e){var t=!!e.totalAmount&&!!e.totalAmount.convertedCurrency;return e.dccMcp||e.apc||t?!1:!0},checkCurrencyObject:function(e,t){return e.price&&e.price.currencyConversion&&t.totalAmount?!0:!1}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_0_0/SearchAnalyticsV_2_0_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_0_0.SearchAnalyticsV_2_0_0",$extends:"plnextv2.analytics.versions.v_1_1_0.SearchAnalyticsV_1_1_0",$dependencies:[],$constructor:function(e){this.$SearchAnalytics.constructor.call(this,e),this.mappingAnalytics=e},$prototype:{buildDataFromSearch:function(e,t){eBaDataLayer.search={flights:[]},eBaDataLayer.user_logged=""!==e.Search.userFirstName?!0:!1;var i=e.Search,n=this.mappingAnalytics.getSearchInputCategory(),a=this.mappingAnalytics.getSearchInputInfo();this._setDateTime(a),this._setCategory(n,i.tripType),this._setFlightDetails(a,i,e),this._setCorporateCode(a,i,t);for(var r=0;r<i.destinations.length;r++){var s={departure:{location_code:i.destinations[r].beginLocation.locationCode},arrival:{location_code:i.destinations[r].endLocation.locationCode}};eBaDataLayer.search.flights.push(s)}},_setBoundAdditionals:function(e,t){return t.beginLocation&&t.endLocation&&(t.beginLocation.countryCode&&(e.departure.countryCode=t.beginLocation.countryCode),t.endLocation.countryCode&&(e.arrival.countryCode=t.endLocation.countryCode)),e},_setCategory:function(e,t){this.mappingAnalytics.initParent(e),t&&(e.primaryCategory=t)},_setFlightDetails:function(e,t,i){this.mappingAnalytics.initParent(e);var n=t.destinations,a=null;e.flightDetails||(e.flightDetails=[]);for(var r=0;r<n.length;r++)e.flightDetails[r]||(e.flightDetails[r]={},e.flightDetails[r].departure={},e.flightDetails[r].arrival={}),aria.utils.Object.isEmpty(n[r].beginLocation)||(e.flightDetails[r].departure.cityCode=n[r].beginLocation.cityCode,e.flightDetails[r].departure.locationCode=n[r].beginLocation.locationCode),aria.utils.Object.isEmpty(n[r].endLocation)||(e.flightDetails[r].arrival.cityCode=n[r].endLocation.cityCode,e.flightDetails[r].arrival.locationCode=n[r].endLocation.locationCode),e.flightDetails[r].departure&&(a=this._dateUtils.formatDate(new Date(n[r].beginDate),this.FORMAT_DATE),e.flightDetails[r].departure.dateTime=a),this._setBoundAdditionals&&(e.flightDetails[r]=this._setBoundAdditionals(e.flightDetails[r],n[r])),this._setDateRange(e.flightDetails[r],t,r),this._setCabin(e.flightDetails[r],t.cabin),this._setCommercialFareFamily(e.flightDetails[r],t.commercialFareFamilies),this._setTripType(e.flightDetails[r],t.tripType),t.listTravellerTypeInfo?this._setTravellerTypeInfo(e.flightDetails[r],t.listTravellerTypeInfo):this._addTravellerTypeInfo(i,e.flightDetails[r])},_addTravellerTypeInfo:function(e,t){if(e&&e.FareReview&&e.FareReview.tripSummary&&e.FareReview.tripSummary.listTravellerTypeInfo){t.passenger=[];for(var i=e.FareReview.tripSummary.listTravellerTypeInfo,n=0;n<i.length;n++){var a={};a.passengerTypeCode=i[n].travellerCode,a.numberOfPassengers=i[n].travellersNumber,t.passenger.push(a)}}},_setTravellerTypeInfo:function(e,t){this.mappingAnalytics.initParent(e),e.passenger=[];for(var i=0;i<t.length;i++){var n={};n.passengerTypeCode=t[i].travellerCode,n.numberOfPassengers=t[i].travellersNumber,e.passenger.push(n)}},_setDateRange:function(e,t,i){var n=t.dateRange;t.destinations&&t.destinations.length&&t.destinations[i].dateRange&&(n=t.destinations[i].dateRange.value||0),this._setFlexibleDate(e,n)},_setCommercialFareFamily:function(e,t){if(this.mappingAnalytics.initParent(e),!e.commercialFareFamily&&t.length){e.commercialFareFamily=[];for(var i=0;i<t.length;i++){var n=this._createCommercialFareFamily(t[i].code);e.commercialFareFamily[i],e.commercialFareFamily[i]||(e.commercialFareFamily[i]={}),e.commercialFareFamily[i]=n}}},_setFlexibleDate:function(e,t){this.mappingAnalytics.initParent(e),e.flexibleDateValue&&null===t||(e.flexibleDateValue=t||0)}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_2_0/AncillaryAnalyticsV_2_2_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_2_0.AncillaryAnalyticsV_2_2_0",$extends:"plnextv2.analytics.versions.v_2_0_0.AncillaryAnalyticsV_2_0_0",$dependencies:["plnextv2.utils.CustomAriaUtils","plnextv2.utils.analytics.AnalyticsUtils","plnextv2.analytics.versions.v_2_0_0.PriceDetailsAnalyticsV_2_0_0"],$constructor:function(e){this.$AncillaryAnalyticsV_2_0_0.constructor.call(this,e),this._priceDetails=new plnextv2.analytics.versions.v_2_0_0.PriceDetailsAnalyticsV_2_0_0(e),this._customUtils=plnextv2.utils.CustomAriaUtils,this._analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils,this.mappingAnalytics=e},$prototype:{_addDigitalDataAncillaryAdditionals:function(e,t){var i=this._addDigitalDataAASemd(t);i&&(e.emd=i);var n=this._getDigitalDataAAScharacteristic(t);n&&n.length>0&&(e.characteristic=n)},_getDigitalDataAAScharacteristic:function(e){var t=[];if(this._analyticsUtils.getDigitalDataParameters().DATA_PRODUCT_DETAILS&&e.inputParams&&e.inputParams.length>0)for(var i=0;i<e.inputParams.length;i++)t.push({key:e.inputParams[i].code,value:e.inputParams[i].value});return t}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_2_0/ContextAnalyticsV_2_2_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_2_0.ContextAnalyticsV_2_2_0",$extends:"plnextv2.analytics.versions.v_2_0_0.ContextAnalyticsV_2_0_0",$constructor:function(e){this.$ContextAnalyticsV_2_0_0.constructor.call(this,e),this.mappingAnalytics=e,this.analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils},$statics:{EXTERNAL_ID:"externalID",COOKIE_NAME:"_dd1A",BLANK_VALUE:""},$prototype:{buildContext:function(e,t){this.$ContextAnalyticsV_2_0_0.buildContext.call(this,e,t);var i=this.mappingAnalytics.getUserProfileInfo();this._setUserID(i),this.digitalDataParameters.DATA_PII&&this._setClientID(i)},_setClientID:function(e){e&&!e.clientID&&(e.clientID=this.analyticsUtils._getCookie(this.COOKIE_NAME).split(".")[0]||this.BLANK_VALUE)},_setUserID:function(e){var t=this.analyticsUtils.getUserID();""!==t&&e&&(e.userID=t)}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_2_0/FlightAnalyticsV_2_2_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_2_0.FlightAnalyticsV_2_2_0",$extends:"plnextv2.analytics.versions.v_2_0_0.FlightAnalyticsV_2_0_0",$statics:{FLIGHT_STATUS:{WAIVABLE:"waivable"}},$constructor:function(e){this.$FlightAnalyticsV_2_0_0.constructor.call(this,e),this.mappingAnalytics=e},$destructor:function(){this.$FlightAnalyticsV_2_0_0.destructor.apply(this)},$prototype:{_loadFlightDetails:function(e,t,i,n){var a=this.$FlightAnalyticsV_2_0_0._loadFlightDetails.call(this,e,t,i,n);if(n&&n.waiverItemsPerSegmentId)for(var r=0;r<n.waiverItemsPerSegmentId.length;r++)if(e.id===n.waiverItemsPerSegmentId[r].segmentId){a.status=this.FLIGHT_STATUS.WAIVABLE;break}return a},_loadFlightMoreDetails:function(e,t){var i=this._getFlightOperatedBy(e);i&&Object.keys(i).length>0&&(t.operatedBy=i),e&&e.operationalSuffix&&(t.marketingOperationalSuffix=e.operationalSuffix)},_getFlightOperatedBy:function(e){var t={};return e.opAirline&&(e.opAirline.name&&(t.disclosure=e.opAirline.name),e.opAirline.code&&(t.airlineCode=e.opAirline.code)),t},setIsNotCombinable:function(e,t){var i=t&&t.bestRecommendationIndex>-1&&-1===t.currentBestRecommendationIndex;i&&(e.isNotCombinable=i)},_createBound:function(e,t,i,n){var a=this.$FlightAnalytics._createBound.call(this,e,t,i,n);return a&&!a.status&&(a.status=this._createBoundStatus(e,n)),a},_createBoundStatus:function(e,t){var i={modificationAllowed:t[e].allowModify};return i},_addDigitalDataCart:function(){this._addDigitalDataCartItem()},setFamilyFareNotAvailable:function(e,t){var i=this.mappingAnalytics.getFlightTicketBoundByIndex(e);this.__setUpsellOtherFareFamily(i),i.upsell.otherFareFamily[t]||(i.upsell.otherFareFamily[t]={}),i.upsell.otherFareFamily[t].isNotAvailable=!0}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_2_0/MappingAnalyticsV_2_2_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_2_0.MappingAnalyticsV_2_2_0",$extends:"plnextv2.analytics.versions.v_2_0_0.MappingAnalyticsV_2_0_0",$statics:{DIGITAL_DATA_VERSION:"2.2.0",TIMING:"timing",ATTRIBUTES_VALUE_DEFAULT:"value"},$constructor:function(){this.$MappingAnalyticsV_2_0_0.constructor.apply(this,arguments),this.timingParent=this.pageInfo,this.timing=this.timingParent+this.OBJECT_SEPARATOR+this.TIMING},$destructor:function(){this.$MappingAnalyticsV_2_0_0.destructor.apply(this,arguments)},$prototype:{getSearchInputsBound:function(e){return this.getDigitalDataLocator(this.flightDetails+this.OBJECT_SEPARATOR+e)},getTimingParent:function(){return this.getDigitalDataLocator(this.timingParent)},getTiming:function(){return this.getDigitalDataLocator(this.timing)}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_2_0/PageAnalyticsV_2_2_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_2_0.PageAnalyticsV_2_2_0",$extends:"plnextv2.analytics.versions.v_2_0_0.PageAnalyticsV_2_0_0",$constructor:function(e){this.mappingAnalytics=e},$prototype:{_setPerformanceData:function(e){if(e&&e.timing){var t=this.mappingAnalytics.getTimingParent();t.timing=e.timing}}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_2_0/PassengerAnalyticsV_2_2_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_2_0.PassengerAnalyticsV_2_2_0",$extends:"plnextv2.analytics.versions.v_2_0_0.PassengerAnalyticsV_2_0_0",$dependencies:["plnextv2.utils.DateUtils","plnextv2.utils.analytics.AnalyticsUtils"],$constructor:function(e){this.$PassengerAnalyticsV_2_0_0.constructor.call(this,e),this._dateUtils=plnextv2.utils.DateUtils,this._analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils,this.mappingAnalytics=e},$statics:{DocumentsPSPT:"DocumentsPSPT",DocumentsKNWT:"DocumentsKNWT",DocumentsREDN:"DocumentsREDN",DocumentsVISA:"DocumentsVISA",PSPT_DocumentNumber:"PSPT_DocumentNumber",KNWT_DocumentNumber:"KNWT_DocumentNumber",REDN_DocumentNumber:"REDN_DocumentNumber",VISA_DocumentNumber:"VISA_DocumentNumber",INFANT_CODE:"INF"},$destructor:function(){this.$PassengerAnalyticsV_2_0_0.destructor.apply(this)},$prototype:{__setDigitalDataAdditionalInformation:function(e,t,i,n){this.$PassengerAnalyticsV_2_0_0.__setDigitalDataAdditionalInformation.call(this,e,t,i,n),this._manageHasInfant(e,t,i,n)},_manageHasInfant:function(e,t,i,n){var a=n.travellerId,r=t[i].travellerID;if(e.business&&e.business.TravellerList&&e.business.TravellerList.Travellers)for(var s=e.business.TravellerList.Travellers,o=0;o<s.length;o++){var l=s[o].Id===a.toString()&&s[o].Id===r.toString()&&n.travellerTypeBean.code!==this.INFANT_CODE;l&&this._manageTravellerHasInfant(t[i],s[o])}},_manageTravellerHasInfant:function(e,t){this._checkHasInfant(e,t)?e.hasInfant=!0:delete e.hasInfant},_checkHasInfant:function(e,t){var i=e.passengerTypeCode&&e.passengerTypeCode!==this.INFANT_CODE;return i&&t.Infants&&t.Infants.length>0},__setDigitalDataDataPersonalNames:function(e,t,i){i.lastName&&(e[t].lastName=i.lastName),i.firstName&&(e[t].firstName=i.firstName)},_setIdenMiddleNameValue:function(e,t,i){e&&e.IDEN_MiddleName&&(t[i].midName=e.IDEN_MiddleName)},_setSuffix:function(){},__setDigitalDataContactInformation:function(e,t){var i=this.mappingAnalytics.getUser(),n=e.business.FareReview;if(n&&n.contactInformation){var a=n.contactInformation;this.__setContactInfoEmails(a,i,t)&&this.__setContactEmails(a,i,t),this.__setContactInfoPhones(a,i,t)&&this.__setContactPhones(a,i,t)}},__setContactInfoEmails:function(e,t,i){return e.Email||e.Email2||e.Email3?(t[i].contactInformation||(t[i].contactInformation={}),t[i].contactInformation.email||(t[i].contactInformation.email=[]),!0):!1},__setContactInfoPhones:function(e,t,i){return e.PhoneMobile||e.PhoneHome||e.PhoneBusiness||e.PhoneOther?(t[i].contactInformation||(t[i].contactInformation={}),t[i].contactInformation.phone||(t[i].contactInformation.phone=[]),!0):!1},__setDigitalDataDocument:function(e,t,i,n){if(e.business&&e.business.TravellerList&&e.business.TravellerList.Travellers){var a=e.business.TravellerList.Travellers;if(n){var r=this.__getIdentityInformation(n,a,i);r&&this.__setDocumentArray(r,t,i)&&this.__setDocuments(r,t,i)}}},__setDocumentArray:function(e,t,i){for(var n=!1,a=[{property:this.DocumentsPSPT,documentNumber:this.PSPT_DocumentNumber},{property:this.DocumentsKNWT,documentNumber:this.KNWT_DocumentNumber},{property:this.DocumentsREDN,documentNumber:this.REDN_DocumentNumber},{property:this.DocumentsVISA,documentNumber:this.VISA_DocumentNumber}],r=0;r<a.length;r++){var s=a[r].property,o=a[r].documentNumber;if(e[s]&&e[s][r]&&e[s][r][o]){n=!0;break}}return n&&!t[i].document&&(t[i].document=[]),n},__setDigitalDataAddress:function(e,t,i,n){if(e.business&&e.business.TravellerList&&e.business.TravellerList.Travellers){var a=e.business.TravellerList.Travellers;if(n){var r=this.__getIdentityInformation(n,a,i),s=0;r&&this.__setAddressArray(r,t,i,s)&&(s=this.__setDestinationAddress(r,t,i,s),this.__setResidenceAddress(r,t,i,s))}}},__setAddressArray:function(e,t,i){var n=!1;if(e.Apis){var a=e.Apis.LIST_RESIDENCE_ADDRESSES&&e.Apis.LIST_RESIDENCE_ADDRESSES[0]&&e.Apis.LIST_RESIDENCE_ADDRESSES[0].AddressCity,r=e.Apis.LIST_DESTINATION_ADDRESSES&&e.Apis.LIST_DESTINATION_ADDRESSES[0]&&e.Apis.LIST_DESTINATION_ADDRESSES[0].AddressCity;(a||r)&&(n=!0),n&&!t[i].address&&(t[i].address=[])}return n},_addDigitalDataUserDocumentNumberTicket:function(e,t){if(t&&this.mappingAnalytics.isDigitalData()){var i=this.mappingAnalytics.getUser();i[e].eTicket||(i[e].eTicket=[]),i[e].eTicket.push({ticketNumber:t})}},_addDigitalDataUserLoyaltyProgram:function(e,t,i){if(e&&e.length){for(var n=[],a=0,r=e.length;r>a;a++)n[a]={},e[a].FREQ_Airline&&(n[a].program=e[a].FREQ_Airline),e[a].FREQ_Number&&i.DATA_PII&&(n[a].number=e[a].FREQ_Number),this.__setLoyaltyProgramMilesBalance&&this.__setLoyaltyProgramMilesBalance(n[a],e[a]);if(n){var s=this.mappingAnalytics.getUser();s[t]||(s[t]={}),s[t].loyaltyProgram=n}}}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_2_0/SearchAnalyticsV_2_2_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_2_0.SearchAnalyticsV_2_2_0",$extends:"plnextv2.analytics.versions.v_2_0_0.SearchAnalyticsV_2_0_0",$dependencies:["plnextv2.utils.DynamicWaiverUtils","plnextv2.utils.analytics.AnalyticsUtils"],$constructor:function(e){this.$SearchAnalyticsV_2_0_0.$constructor.call(this,e),this.mappingAnalytics=e,this._dynamicWaiverUtils=plnextv2.utils.DynamicWaiverUtils,this._analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils},$prototype:{buildDynamicWaiverData:function(e){var t=e.DynamicWaiver&&e.DynamicWaiver.waiverItemsPerSegmentId;if(t&&e.ITINERARY_REVIEW&&e.ITINERARY_REVIEW.itineraryListBean&&e.ITINERARY_REVIEW.itineraryListBean.listItinerary){var i=e.DynamicWaiver.waiverItemsPerSegmentId,n=e.ITINERARY_REVIEW.itineraryListBean.listItinerary;n.forEach(function(e,t){this._buildDynamicWaiverDataForBound(e,t,i)},this)}},_buildDynamicWaiverDataForBound:function(e,t,i){var n=this._dynamicWaiverUtils.getDisruptedDatesForBound(e,i),a=this._dynamicWaiverUtils.getWaivedDatesForBound(e,i),r=this.mappingAnalytics.getSearchInputsBound(t);(n.length||a.length)&&(n.length&&(r.disruptedDates=[],n.forEach(this.__formatDateAndPush(r.disruptedDates),this)),a.length&&(r.waivableDates=[],a.forEach(this.__formatDateAndPush(r.waivableDates),this)))},__formatDateAndPush:function(e){return function(t){var i=this._analyticsUtils.formatDate(t);-1===e.indexOf(i)&&e.push(i)}},_setBound:function(e,t){var i=e.flightDetails;this.$SearchAnalyticsV_2_0_0._setBound.call(this,e,t),i&&e.flightDetails&&i.length===e.flightDetails.length&&i.forEach(function(t,i){e.flightDetails[i].disruptedDates=t.disruptedDates,e.flightDetails[i].waivableDates=t.waivableDates},this)}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_3_0/MappingAnalyticsV_2_3_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_3_0.MappingAnalyticsV_2_3_0",$extends:"plnextv2.analytics.versions.v_2_2_0.MappingAnalyticsV_2_2_0",$statics:{DIGITAL_DATA_VERSION:"2.3.0"},$constructor:function(){this.$MappingAnalyticsV_2_2_0.constructor.apply(this,arguments)},$destructor:function(){this.$MappingAnalyticsV_2_2_0.destructor.apply(this,arguments)},$prototype:{}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_3_0/PassengerAnalyticsV_2_3_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_3_0.PassengerAnalyticsV_2_3_0",$extends:"plnextv2.analytics.versions.v_2_2_0.PassengerAnalyticsV_2_2_0",$dependencies:["plnextv2.utils.DateUtils","plnextv2.utils.analytics.AnalyticsUtils"],$constructor:function(e){this.$PassengerAnalyticsV_2_2_0.constructor.call(this,e)},$destructor:function(){this.$PassengerAnalyticsV_2_0_0.destructor.apply(this)},$prototype:{__setLoyaltyProgramMilesBalance:function(e,t){e.milesBalance=t.FREQ_Miles||0}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_4_0/FlightAnalyticsV_2_4_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_4_0.FlightAnalyticsV_2_4_0",$extends:"plnextv2.analytics.versions.v_2_2_0.FlightAnalyticsV_2_2_0",$statics:{IS_NOT_COMBINABLE:"isNotCombinable",IS_NOT_AVAILABLE:"isNotAvailable",IS_SOLDOUT:"isSoldOut",SOLDOUT:"SOLDOUT"},$constructor:function(e){this.$FlightAnalyticsV_2_2_0.constructor.call(this,e),this.mappingAnalytics=e,this._analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils},$destructor:function(){this.$FlightAnalyticsV_2_2_0.destructor.apply(this)},$prototype:{setUrgencyToBookViewersinDigitalData:function(e,t){var i=e.boundIndex,n=this.mappingAnalytics.getFlightTicketBound(),a=n[i],r=t.numOfPplViewingITIN,s=null!=t.proposedFlightsGroup[e.flightIndex]?t.proposedFlightsGroup[e.flightIndex].numOfPplViewingFLT:null;null!=a&&(r&&(a.boundViewers=r),s&&(a.flightViewers=s))},_loadFlightDetails:function(e,t,i,n){var a=this.$FlightAnalyticsV_2_2_0._loadFlightDetails.call(this,e,t,i,n),r=e&&e.equipment&&e.equipment.code;return this._analyticsUtils.getDigitalDataParameters().DATA_PRODUCT_DETAILS&&r&&(a.aircraftCode=e.equipment.code),a},setIsNotSelectableReason:function(e,t){t&&t.bestRecommendationIndex>-1&&-1===t.currentBestRecommendationIndex?e.isNotSelectableReason=this.IS_NOT_COMBINABLE:t&&t.flight&&t.flight.status===this.SOLDOUT&&(e.isNotSelectableReason=this.IS_SOLDOUT)}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_4_0/MappingAnalyticsV_2_4_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_4_0.MappingAnalyticsV_2_4_0",$extends:"plnextv2.analytics.versions.v_2_3_0.MappingAnalyticsV_2_3_0",$statics:{DIGITAL_DATA_VERSION:"2.4.0"},$constructor:function(){this.$MappingAnalyticsV_2_3_0.constructor.apply(this,arguments)},$destructor:function(){this.$MappingAnalyticsV_2_3_0.destructor.apply(this,arguments)},$prototype:{}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_4_0/PageAnalyticsV_2_4_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_4_0.PageAnalyticsV_2_4_0",$extends:"plnextv2.analytics.versions.v_2_2_0.PageAnalyticsV_2_2_0",$constructor:function(e){this.$PageAnalyticsV_2_2_0.constructor.call(this,e),this.mappingAnalytics=e},$statics:{CHANNEL:"DX"},$prototype:{_setPageChannel:function(e){this.mappingAnalytics.initParent(e),e.primaryCategory=this.CHANNEL}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_5_0/ContextAnalyticsV_2_5_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_5_0.ContextAnalyticsV_2_5_0",$extends:"plnextv2.analytics.versions.v_2_2_0.ContextAnalyticsV_2_2_0",$dependencies:["plnextv2.utils.NativeAppCommunicationWrapper"],$constructor:function(e){this.$ContextAnalyticsV_2_2_0.constructor.call(this,e),this.mappingAnalytics=e,this.analyticsUtils=plnextv2.utils.analytics.AnalyticsUtils,this.merciApp=plnextv2.utils.NativeAppCommunicationWrapper},$statics:{},$prototype:{buildContext:function(e,t){this.$ContextAnalyticsV_2_2_0.buildContext.call(this,e,t);var i=this.mappingAnalytics.getUserProfileInfo();if(this.merciApp.isEnabled()){var n=JSON.parse(window.nativeAppCommunication.getDeviceAppInfo());n&&(i.app||(i.app={}),this._setAppName(i.app,n),this._setAppVersion(i.app,n),this._setAppInstallID(i.app,n),this._setAppInstanceID(i.app,n))}},_setAppName:function(e,t){!e.name&&t.appName&&(e.name=t.appName)},_setAppVersion:function(e,t){!e.version&&t.appVersion&&(e.version=t.appVersion)},_setAppInstallID:function(e,t){!e.appInstallID&&t.appInstallID&&(e.appInstallID=t.appInstallID)},_setAppInstanceID:function(e,t){!e.appInstanceID&&t.appInstanceID&&(e.appInstanceID=t.appInstanceID)}}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_5_0/MappingAnalyticsV_2_5_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_5_0.MappingAnalyticsV_2_5_0",$extends:"plnextv2.analytics.versions.v_2_4_0.MappingAnalyticsV_2_4_0",$statics:{DIGITAL_DATA_VERSION:"2.5.0"},$constructor:function(){this.$MappingAnalyticsV_2_4_0.constructor.apply(this,arguments)},$destructor:function(){this.$MappingAnalyticsV_2_4_0.destructor.apply(this,arguments)},$prototype:{}});
//*******************
//LOGICAL-PATH:plnextv2/analytics/versions/v_2_5_0/PageAnalyticsV_2_5_0.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.analytics.versions.v_2_5_0.PageAnalyticsV_2_5_0",$extends:"plnextv2.analytics.versions.v_2_4_0.PageAnalyticsV_2_4_0",$dependencies:["plnextv2.utils.DeviceUtils"],$constructor:function(e){this.$PageAnalyticsV_2_4_0.constructor.call(this,e),this.mappingAnalytics=e,this.deviceUtils=plnextv2.utils.DeviceUtils},$statics:{MOBILE_APP:"MobileApp",CHANNEL:"DX"},$prototype:{_setPageChannel:function(e){this.mappingAnalytics.initParent(e),this.deviceUtils.isEmbeddedInApp()?(e.primaryCategory=this.MOBILE_APP,e.subCategory=this.CHANNEL):e.primaryCategory=this.CHANNEL}}});
//*******************
//LOGICAL-PATH:plnextv2/config/ComponentsDefinitions.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.config.ComponentsDefinitions",$singleton:!0,$dependencies:["plnextv2.utils.DeviceUtils","aria.utils.Json"],$prototype:{getDeviceComponentDefinition:function(e,t){var i=this[e];if(null==i)throw new Error("No component definition found for component: '"+e+"'");var n=plnextv2.utils.DeviceUtils,a=i[t]||i[n.getPageDeviceType()]||i[n.DESKTOP];return t&&i[t]&&this.$logDebug("(cfg.js \u2192 customDevice) Device overriding to "+t+" for a component "+e),aria.utils.Json.copy(a)}},$statics:{SKELETON:{DESKTOP:{placeholderName:"skeleton",placeholder:{template:"plnextv2.components.skeleton.desktop.views.DSkeletonView",module:"skeletonController"},module:{classpath:"plnextv2.components.skeleton.desktop.controller.DSkeletonController"}}},SKELETON_TRAVELLER:{DESKTOP:{placeholderName:"skeletonTraveller",placeholder:{template:"plnextv2.components.skeletonTraveller.desktop.views.DSkeletonTravellerView",module:"skeletonTravellerController"},module:{classpath:"plnextv2.components.skeletonTraveller.desktop.controller.DSkeletonTravellerController"}}},TRAVELLER_LIST:{DESKTOP:{placeholderName:"travellerList",placeholder:{template:"plnextv2.components.travellerList.desktop.views.DTravellerListView",module:"travellerListController"},module:{classpath:"plnextv2.components.travellerList.desktop.controller.DTravellerListController"},children:["LOGIN_PANEL_DIGITAL_PROFILE"]},TABLET:{placeholderName:"travellerList",placeholder:{template:"plnextv2.components.travellerList.tablet.views.TTravellerListView",module:"travellerListController"},module:{classpath:"plnextv2.components.travellerList.tablet.controller.TTravellerListController"},children:["LOGIN_PANEL_DIGITAL_PROFILE"]},MOBILE:{placeholderName:"travellerList",placeholder:{template:"plnextv2.components.travellerList.mobile.views.MTravellerListView",module:"travellerListController"},module:{classpath:"plnextv2.components.travellerList.mobile.controller.MTravellerListController"},children:["LOGIN_PANEL_DIGITAL_PROFILE"]}},TRAVELLER_LIST_ADVANCED:{DESKTOP:{placeholderName:"travellerListAdvanced",placeholder:{template:"plnextv2.components.travellerListAdvanced.desktop.views.DTravellerListAdvancedView",module:"travellerListAdvancedController"},module:{classpath:"plnextv2.components.travellerListAdvanced.desktop.controller.DTravellerListAdvancedController"},children:["LOGIN_PANEL_DIGITAL_PROFILE"]},TABLET:{placeholderName:"travellerListAdvanced",placeholder:{template:"plnextv2.components.travellerListAdvanced.tablet.views.TTravellerListAdvancedView",module:"travellerListAdvancedController"},module:{classpath:"plnextv2.components.travellerListAdvanced.tablet.controller.TTravellerListAdvancedController"},children:["LOGIN_PANEL_DIGITAL_PROFILE"]},MOBILE:{placeholderName:"travellerListAdvanced",placeholder:{template:"plnextv2.components.travellerListAdvanced.mobile.views.MTravellerListAdvancedView",module:"travellerListAdvancedController"},module:{classpath:"plnextv2.components.travellerListAdvanced.mobile.controller.MTravellerListAdvancedController"},children:["LOGIN_PANEL_DIGITAL_PROFILE"]}},APIM_TRAVELLERS:{DESKTOP:{placeholderName:"apimTravellers",placeholder:{template:"plnextv2.components.apimTravellers.desktop.views.DApimTravellersView",module:"apimTravellersController"},module:{classpath:"plnextv2.components.apimTravellers.desktop.controller.DApimTravellersController"},children:["LOGIN_PANEL_DIGITAL_PROFILE"]}},SEARCH_BAR:{DESKTOP:{placeholderName:"searchBar",placeholder:{template:"plnextv2.components.searchBar.desktop.views.DSearchBarView",module:"searchBarController"},module:{classpath:"plnextv2.components.searchBar.desktop.controller.DSearchBarController"}}},SEARCH_BAR_ADVANCED:{DESKTOP:{placeholderName:"searchBarAdvanced",placeholder:{template:"plnextv2.components.searchBarAdvanced.desktop.views.DSearchBarAdvancedView",module:"searchBarAdvancedController"},module:{classpath:"plnextv2.components.searchBarAdvanced.desktop.controller.DSearchBarAdvancedController"}},TABLET:{placeholderName:"searchBarAdvanced",placeholder:{template:"plnextv2.components.searchBarAdvanced.tablet.views.TSearchBarAdvancedView",module:"searchBarAdvancedController"},module:{classpath:"plnextv2.components.searchBarAdvanced.tablet.controller.TSearchBarAdvancedController"}},MOBILE:{placeholderName:"searchBarAdvanced",placeholder:{template:"plnextv2.components.searchBarAdvanced.mobile.views.MSearchBarAdvancedView",module:"searchBarAdvancedController"},module:{classpath:"plnextv2.components.searchBarAdvanced.mobile.controller.MSearchBarAdvancedController"}}},CURRENCY_CONVERTER:{DESKTOP:{placeholderName:"currencyConverter",placeholder:{template:"plnextv2.components.currencyConverter.desktop.views.DCurrencyConverterView",module:"CurrencyConverterController"},module:{classpath:"plnextv2.components.currencyConverter.desktop.controller.DCurrencyConverterController"}},TABLET:{placeholderName:"currencyConverter",placeholder:{template:"plnextv2.components.currencyConverter.tablet.views.TCurrencyConverterView",module:"CurrencyConverterController"},module:{classpath:"plnextv2.components.currencyConverter.desktop.controller.DCurrencyConverterController"}},MOBILE:{placeholderName:"currencyConverter",placeholder:{template:"plnextv2.components.currencyConverter.mobile.views.MCurrencyConverterView",module:"CurrencyConverterController"},module:{classpath:"plnextv2.components.currencyConverter.desktop.controller.DCurrencyConverterController"}}},PREVIOUS_SEARCH:{DESKTOP:{placeholderName:"prevSearches",placeholder:{template:"plnextv2.components.previousSearch.desktop.views.DPrevSearchesView",module:"prevSearchesController"},module:{classpath:"plnextv2.components.previousSearch.desktop.controller.DPrevSearchesController"}}},AVAILABILITY:{DESKTOP:{placeholderName:"Availability",placeholder:{template:"plnextv2.components.availability.desktop.views.DAvailabilityView",module:"availabilityController"},module:{classpath:"plnextv2.components.availability.desktop.controller.DAvailabilityController"}},TABLET:{placeholderName:"Availability",placeholder:{template:"plnextv2.components.availability.tablet.views.TAvailabilityView",module:"availabilityController"},module:{classpath:"plnextv2.components.availability.tablet.controller.TAvailabilityController"}},MOBILE:{placeholderName:"Availability",placeholder:{template:"plnextv2.components.availability.mobile.views.MAvailabilityView",module:"availabilityController"},module:{classpath:"plnextv2.components.availability.mobile.controller.MAvailabilityController"}}},AVAILABILITY_PREMIUM:{DESKTOP:{placeholderName:"AvailabilityPremium",placeholder:{template:"plnextv2.components.availabilityPremium.desktop.views.DAvailabilityView",module:"availabilityController"},module:{classpath:"plnextv2.components.availabilityPremium.desktop.controller.DAvailabilityController"}}},AVAILABILITY_OWC:{DESKTOP:{placeholderName:"OwcAvailability",placeholder:{template:"plnextv2.components.owcAvailability.desktop.views.DAvailabilityView",module:"availabilityController"},module:{classpath:"plnextv2.components.owcAvailability.desktop.controller.DAvailabilityController"}},TABLET:{placeholderName:"OwcAvailability",placeholder:{template:"plnextv2.components.owcAvailability.tablet.views.TAvailabilityView",module:"availabilityController"},module:{classpath:"plnextv2.components.owcAvailability.tablet.controller.TAvailabilityController"}},MOBILE:{placeholderName:"OwcAvailability",placeholder:{template:"plnextv2.components.owcAvailability.mobile.views.MAvailabilityView",module:"availabilityController"},module:{classpath:"plnextv2.components.owcAvailability.mobile.controller.MAvailabilityController"}}},ITINERARY:{DESKTOP:{placeholderName:"Itinerary",placeholder:{template:"plnextv2.components.itinerary.desktop.views.DAvailabilityView",module:"availabilityController"},module:{classpath:"plnextv2.components.itinerary.desktop.controller.DAvailabilityController"}},TABLET:{placeholderName:"Itinerary",placeholder:{template:"plnextv2.components.itinerary.tablet.views.TAvailabilityView",module:"availabilityController"},module:{classpath:"plnextv2.components.itinerary.tablet.controller.TAvailabilityController"}},MOBILE:{placeholderName:"Itinerary",placeholder:{template:"plnextv2.components.itinerary.mobile.views.MAvailabilityView",module:"availabilityController"},module:{classpath:"plnextv2.components.itinerary.mobile.controller.MAvailabilityController"}}},FLIGHT_TIMELINE:{DESKTOP:{placeholderName:"flightTimeline",placeholder:{template:"plnextv2.components.flightTimeline.desktop.views.DFlightTimelineAndStatusChangedView",module:"flightTimelineController"},module:{classpath:"plnextv2.components.flightTimeline.desktop.controller.DFlightTimelineController"}}},DELIVERY:{DESKTOP:{placeholderName:"ticketDelivery",placeholder:{template:"plnextv2.components.delivery.desktop.views.DDeliveryView",module:"DDeliveryController"},module:{classpath:"plnextv2.components.delivery.desktop.controller.DDeliveryController"},children:["FOID"]},TABLET:{placeholderName:"ticketDelivery",placeholder:{template:"plnextv2.components.delivery.tablet.views.TDeliveryView",module:"TDeliveryController"},module:{classpath:"plnextv2.components.delivery.tablet.controller.TDeliveryController"},children:["FOID"]}},PAYMENT:{DESKTOP:{placeholderName:"payment",placeholder:{template:"plnextv2.components.payment.desktop.views.DPaymentView",module:"paymentController"},module:{classpath:"plnextv2.components.payment.desktop.controller.DPaymentController"}},TABLET:{placeholderName:"payment",placeholder:{template:"plnextv2.components.payment.tablet.views.TPaymentView",module:"paymentController"},module:{classpath:"plnextv2.components.payment.tablet.controller.TPaymentController"}},MOBILE:{placeholderName:"payment",placeholder:{template:"plnextv2.components.payment.mobile.views.MPaymentView",module:"paymentController"},module:{classpath:"plnextv2.components.payment.mobile.controller.MPaymentController"}}},INSURANCE:{DESKTOP:{placeholderName:"insurance",placeholder:{template:"plnextv2.components.insurance.desktop.views.DInsuranceView",module:"DInsuranceController"},module:{classpath:"plnextv2.components.insurance.desktop.controller.DInsuranceController"}}},TRIP_SUMMARY:{DESKTOP:{placeholderName:"tripSummary",placeholder:{template:"plnextv2.components.tripSummary.desktop.views.DTripSummaryView",module:"tripSummaryController"},module:{classpath:"plnextv2.components.tripSummary.desktop.controller.DTripSummaryController"},children:["FARE_REVIEW","SERVICES_POLICY","MINI_RULES","SERVICES_BREAKDOWN","PURCHASE_CONDITIONS","TRIP_NOTES","UPGRADE_DETAILS","FARE_BASIS_INFORMATION","PRICE_REVIEW_POPUP","CURRENCY_CONVERTER"]},TABLET:{placeholderName:"tripSummary",placeholder:{template:"plnextv2.components.tripSummary.tablet.views.TTripSummaryView",module:"tripSummaryController"},module:{classpath:"plnextv2.components.tripSummary.tablet.controller.TTripSummaryController"},children:["FARE_REVIEW","SERVICES_POLICY","MINI_RULES","SERVICES_BREAKDOWN","PURCHASE_CONDITIONS","TRIP_NOTES","UPGRADE_DETAILS","FARE_BASIS_INFORMATION","CURRENCY_CONVERTER"]},MOBILE:{placeholderName:"tripSummary",placeholder:{template:"plnextv2.components.tripSummary.mobile.views.MTripSummaryView",module:"tripSummaryController"},module:{classpath:"plnextv2.components.tripSummary.mobile.controller.MTripSummaryController"},children:["FARE_REVIEW","SERVICES_POLICY","MINI_RULES","SERVICES_BREAKDOWN","PURCHASE_CONDITIONS","TRIP_NOTES","UPGRADE_DETAILS","FARE_BASIS_INFORMATION","CURRENCY_CONVERTER"]}},PRICE_SUMMARY_BOTTOM:{DESKTOP:{placeholderName:"priceSummaryBottom",placeholder:{template:"plnextv2.components.priceSummaryBottom.desktop.views.DPriceSummaryBottomView",module:"priceSummaryBottomController"},module:{classpath:"plnextv2.components.priceSummaryBottom.desktop.controller.DPriceSummaryBottomController"}},TABLET:{placeholderName:"priceSummaryBottom",placeholder:{template:"plnextv2.components.priceSummaryBottom.tablet.views.TPriceSummaryBottomView",module:"priceSummaryBottomController"},module:{classpath:"plnextv2.components.priceSummaryBottom.tablet.controller.TPriceSummaryBottomController"}},MOBILE:{placeholderName:"priceSummaryBottom",placeholder:{template:"plnextv2.components.priceSummaryBottom.mobile.views.MPriceSummaryBottomView",module:"priceSummaryBottomController"},module:{classpath:"plnextv2.components.priceSummaryBottom.mobile.controller.MPriceSummaryBottomController"}}},BREAD_CRUMB:{DESKTOP:{placeholderName:"breadCrumb",placeholder:{template:"plnextv2.components.breadCrumb.desktop.views.DBreadCrumbView",module:"DBreadCrumbController"},module:{classpath:"plnextv2.components.breadCrumb.desktop.controller.DBreadCrumbController"}},TABLET:{placeholderName:"breadCrumb",placeholder:{template:"plnextv2.components.breadCrumb.tablet.views.TBreadCrumbView",module:"TBreadCrumbController"},module:{classpath:"plnextv2.components.breadCrumb.tablet.controller.TBreadCrumbController"}},MOBILE:{placeholderName:"breadCrumb",placeholder:{template:"plnextv2.components.breadCrumb.mobile.views.MBreadCrumbView",module:"MBreadCrumbController"},module:{classpath:"plnextv2.components.breadCrumb.mobile.controller.MBreadCrumbController"}}},PURCHASE_CONDITIONS:{DESKTOP:{placeholderName:"purchaseConditions",placeholder:{template:"plnextv2.components.purchaseConditions.desktop.views.DPurchaseConditionsPopupView",module:"DPurchaseConditionsController"},module:{classpath:"plnextv2.components.purchaseConditions.desktop.controller.DPurchaseConditionsController"}},TABLET:{placeholderName:"purchaseConditions",placeholder:{template:"plnextv2.components.purchaseConditions.tablet.views.TPurchaseConditionsPopupView",module:"TPurchaseConditionsController"},module:{classpath:"plnextv2.components.purchaseConditions.tablet.controller.TPurchaseConditionsController"}},MOBILE:{placeholderName:"purchaseConditions",placeholder:{template:"plnextv2.components.purchaseConditions.mobile.views.MPurchaseConditionsPopupView",module:"MPurchaseConditionsController"},module:{classpath:"plnextv2.components.purchaseConditions.mobile.controller.MPurchaseConditionsController"}}},TRIP_NOTES:{DESKTOP:{placeholderName:"tripNotes",placeholder:{template:"plnextv2.components.tripNotes.desktop.views.DTripNotesPopupView",module:"DTripNotesController"},module:{classpath:"plnextv2.components.tripNotes.desktop.controller.DTripNotesController"},children:["FARE_NOTES","FLIGHT_NOTES"]},TABLET:{placeholderName:"tripNotes",placeholder:{template:"plnextv2.components.tripNotes.tablet.views.TTripNotesPopupView",module:"TTripNotesController"},module:{classpath:"plnextv2.components.tripNotes.tablet.controller.TTripNotesController"},children:["FARE_NOTES","FLIGHT_NOTES"]},MOBILE:{placeholderName:"tripNotes",placeholder:{template:"plnextv2.components.tripNotes.mobile.views.MTripNotesPopupView",module:"MTripNotesController"},module:{classpath:"plnextv2.components.tripNotes.mobile.controller.MTripNotesController"},children:["FARE_NOTES","FLIGHT_NOTES"]}},UPGRADE_DETAILS:{DESKTOP:{placeholderName:"upgradeDetails",placeholder:{template:"plnextv2.components.upgradeDetails.desktop.views.DUpgradeDetailsPopupView",module:"DUpgradeDetailsController"},module:{classpath:"plnextv2.components.upgradeDetails.desktop.controller.DUpgradeDetailsController"}}},FARE_NOTES:{DESKTOP:{placeholderName:"fareNotes",placeholder:{template:"plnextv2.components.fareNotes.desktop.views.DFareNotesView",module:"DFareNotesController"},module:{classpath:"plnextv2.components.fareNotes.desktop.controller.DFareNotesController"}}},FLIGHT_NOTES:{DESKTOP:{placeholderName:"flightNotes",placeholder:{template:"plnextv2.components.flightNotes.desktop.views.DFlightNotesView",module:"DFlightNotesController"},module:{classpath:"plnextv2.components.flightNotes.desktop.controller.DFlightNotesController"}}},FARE_BASIS_INFORMATION:{DESKTOP:{placeholderName:"fareBasisInformation",placeholder:{template:"plnextv2.components.fareBasisInformation.desktop.views.DFareBasisPopupView",module:"DFareBasisController"},module:{classpath:"plnextv2.components.fareBasisInformation.desktop.controller.DFareBasisController"}}},SPECIAL_REQUESTS:{DESKTOP:{placeholderName:"specialRequests",placeholder:{template:"plnextv2.components.specialRequests.desktop.views.DSpecialRequestsView",module:"SpecialRequestsController"},module:{classpath:"plnextv2.components.specialRequests.desktop.controller.DSpecialRequestsController"}},TABLET:{placeholderName:"specialRequests",placeholder:{template:"plnextv2.components.specialRequests.tablet.views.TSpecialRequestsView",module:"specialRequestsController"},module:{classpath:"plnextv2.components.specialRequests.tablet.controller.TSpecialRequestsController"}}},SERVICES_POLICY:{DESKTOP:{placeholderName:"servicesPolicy",placeholder:{template:"plnextv2.components.servicesPolicy.desktop.views.DServicesPolicyView",module:"DServicesPolicyController"},module:{classpath:"plnextv2.components.servicesPolicy.desktop.controller.DServicesPolicyController"}},TABLET:{placeholderName:"servicesPolicy",placeholder:{template:"plnextv2.components.servicesPolicy.tablet.views.TServicesPolicyView",module:"TServicesPolicyController"},module:{classpath:"plnextv2.components.servicesPolicy.tablet.controller.TServicesPolicyController"}},MOBILE:{placeholderName:"servicesPolicy",placeholder:{template:"plnextv2.components.servicesPolicy.mobile.views.MServicesPolicyView",module:"MServicesPolicyController"},module:{classpath:"plnextv2.components.servicesPolicy.mobile.controller.MServicesPolicyController"}}},FARE_REVIEW:{DESKTOP:{placeholderName:"fareReview",placeholder:{template:"plnextv2.components.fareReview.desktop.views.DFareReviewView",module:"fareReviewController"},module:{classpath:"plnextv2.components.fareReview.desktop.controller.DFareReviewController"},children:["FLIGHT_RECAP_PANEL","CAR_RECAP","SB_TEASERS","MINI_RULES","TRANSFER_TEASER"]},TABLET:{placeholderName:"fareReview",placeholder:{template:"plnextv2.components.fareReview.tablet.views.TFareReviewView",module:"fareReviewController"},module:{classpath:"plnextv2.components.fareReview.tablet.controller.TFareReviewController"},children:["FLIGHT_RECAP_PANEL","CAR_RECAP","SB_TEASERS","MINI_RULES","TRANSFER_TEASER"]},MOBILE:{placeholderName:"fareReview",placeholder:{template:"plnextv2.components.fareReview.mobile.views.MFareReviewView",module:"fareReviewController"},module:{classpath:"plnextv2.components.fareReview.mobile.controller.MFareReviewController"},children:["FLIGHT_RECAP_PANEL","CAR_RECAP","SB_TEASERS","MINI_RULES","TRANSFER_TEASER"]}},PRICE_REVIEW:{DESKTOP:{placeholderName:"priceReview",placeholder:{template:"plnextv2.components.priceReview.desktop.views.DPriceReviewView",module:"priceReviewController"},module:{classpath:"plnextv2.components.priceReview.desktop.controller.DPriceReviewController"}}},PRICE_REVIEW_POPUP:{DESKTOP:{placeholderName:"priceReviewPopup",placeholder:{template:"plnextv2.components.priceReviewPopup.desktop.views.DPriceReviewPopupView",module:"priceReviewPopupController"},module:{classpath:"plnextv2.components.priceReviewPopup.desktop.controller.DPriceReviewPopupController"}}},RESERVATION_INFO:{DESKTOP:{placeholderName:"reservationInfo",placeholder:{template:"plnextv2.components.reservationInfo.desktop.views.DReservationInfoView",module:"reservationInfoController"},module:{classpath:"plnextv2.components.reservationInfo.desktop.controller.DReservationInfoController"}},TABLET:{placeholderName:"reservationInfo",placeholder:{template:"plnextv2.components.reservationInfo.tablet.views.TReservationInfoView",module:"reservationInfoController"},module:{classpath:"plnextv2.components.reservationInfo.tablet.controller.TReservationInfoController"}},MOBILE:{placeholderName:"reservationInfo",placeholder:{template:"plnextv2.components.reservationInfo.mobile.views.MReservationInfoView",module:"reservationInfoController"},module:{classpath:"plnextv2.components.reservationInfo.mobile.controller.MReservationInfoController"}}},CANCELLATION_INFO:{DESKTOP:{placeholderName:"cancellationInfo",placeholder:{template:"plnextv2.components.cancellationInfo.desktop.views.DCancellationInfoView",module:"DCancellationInfoController"},module:{classpath:"plnextv2.components.cancellationInfo.desktop.controller.DCancellationInfoController"}},TABLET:{placeholderName:"cancellationInfo",placeholder:{template:"plnextv2.components.cancellationInfo.tablet.views.TCancellationInfoView",module:"DCancellationInfoController"},module:{classpath:"plnextv2.components.cancellationInfo.tablet.controller.TCancellationInfoController"}},MOBILE:{placeholderName:"cancellationInfo",placeholder:{template:"plnextv2.components.cancellationInfo.mobile.views.MCancellationInfoView",module:"DCancellationInfoController"},module:{classpath:"plnextv2.components.cancellationInfo.mobile.controller.MCancellationInfoController"}}},TRAVELLER_REVIEW:{DESKTOP:{placeholderName:"travellerReview",placeholder:{template:"plnextv2.components.travellerReview.desktop.views.DTravellerReviewView",module:"DTravellerReviewController"},module:{classpath:"plnextv2.components.travellerReview.desktop.controller.DTravellerReviewController"}}},RESERVATION_MENU:{DESKTOP:{placeholderName:"reservationMenu",placeholder:{template:"plnextv2.components.reservationMenu.desktop.views.DReservationMenuView",module:"reservationMenuController"},module:{classpath:"plnextv2.components.reservationMenu.desktop.controller.DReservationMenuController"}},TABLET:{placeholderName:"reservationMenu",placeholder:{template:"plnextv2.components.reservationMenu.tablet.views.TReservationMenuView",module:"reservationMenuController"},module:{classpath:"plnextv2.components.reservationMenu.tablet.controller.TReservationMenuController"}},MOBILE:{placeholderName:"reservationMenu",placeholder:{template:"plnextv2.components.reservationMenu.mobile.views.MReservationMenuView",module:"reservationMenuController"},module:{classpath:"plnextv2.components.reservationMenu.mobile.controller.MReservationMenuController"}}},CATALOG_SERVICES:{DESKTOP:{placeholderName:"catalogServices",placeholder:{template:"plnextv2.components.catalogServices.desktop.views.DCatalogServicesView",module:"catalogServicesController"},module:{classpath:"plnextv2.components.catalogServices.desktop.controller.DCatalogServicesController"}},TABLET:{placeholderName:"catalogServices",placeholder:{template:"plnextv2.components.catalogServices.tablet.views.TCatalogServicesView",module:"catalogServicesController"},module:{classpath:"plnextv2.components.catalogServices.tablet.controller.TCatalogServicesController"}},MOBILE:{placeholderName:"catalogServices",placeholder:{template:"plnextv2.components.catalogServices.mobile.views.MCatalogServicesView",module:"catalogServicesController"},module:{classpath:"plnextv2.components.catalogServices.mobile.controller.MCatalogServicesController"}}},MINI_RULES:{DESKTOP:{placeholderName:"miniRules",placeholder:{template:"plnextv2.components.miniRules.desktop.views.DMiniRulesView",module:"miniRulesController"},module:{classpath:"plnextv2.components.miniRules.desktop.controller.DMiniRulesController"}},TABLET:{placeholderName:"miniRules",placeholder:{template:"plnextv2.components.miniRules.tablet.views.TMiniRulesView",module:"miniRulesController"},module:{classpath:"plnextv2.components.miniRules.tablet.controller.TMiniRulesController"}},MOBILE:{placeholderName:"miniRules",placeholder:{template:"plnextv2.components.miniRules.mobile.views.MMiniRulesView",module:"miniRulesController"},module:{classpath:"plnextv2.components.miniRules.mobile.controller.MMiniRulesController"}}},SERVICES_BREAKDOWN:{DESKTOP:{placeholderName:"servicesBreakdown",placeholder:{template:"plnextv2.components.servicesBreakdown.desktop.views.DServicesBreakdownView",module:"ServicesBreakdownController"},module:{classpath:"plnextv2.components.servicesBreakdown.desktop.controller.DServicesBreakdownController"}}},DONATION:{DESKTOP:{placeholderName:"donation",placeholder:{template:"plnextv2.components.donation.desktop.views.DDonationView",module:"DDonationController"},module:{classpath:"plnextv2.components.donation.desktop.controller.DDonationController"}}},PROMOTION_CODE:{DESKTOP:{placeholderName:"promotionCode",placeholder:{template:"plnextv2.components.promotionCode.desktop.views.DPromotionCodeView",module:"DPromotionCodeController"},module:{classpath:"plnextv2.components.promotionCode.desktop.controller.DPromotionCodeController"}}},MCP:{DESKTOP:{placeholderName:"mcp",placeholder:{template:"plnextv2.components.mcp.desktop.views.DMultipleCurrencyPricing",module:"DMultipleCurrencyPricingController"},module:{classpath:"plnextv2.components.mcp.desktop.controller.DMultipleCurrencyPricingController"}},TABLET:{placeholderName:"mcp",placeholder:{template:"plnextv2.components.mcp.tablet.views.TMultipleCurrencyPricingView",module:"TMultipleCurrencyPricingController"},module:{classpath:"plnextv2.components.mcp.tablet.controller.TMultipleCurrencyPricingController"}},MOBILE:{placeholderName:"mcp",placeholder:{template:"plnextv2.components.mcp.mobile.views.MMultipleCurrencyPricingView",module:"MMultipleCurrencyPricingController"},module:{classpath:"plnextv2.components.mcp.mobile.controller.MMultipleCurrencyPricingController"}}},RESERVATION_LIST:{DESKTOP:{placeholderName:"reservationList",placeholder:{template:"plnextv2.components.reservationList.desktop.views.DReservationListView",module:"DReservationListController"},module:{classpath:"plnextv2.components.reservationList.desktop.controller.DReservationListController"}}},MILES_AND_CASH:{DESKTOP:{placeholderName:"milesAndCash",placeholder:{template:"plnextv2.components.milesAndCash.desktop.views.DMilesAndCashView",module:"DMilesAndCashController"},module:{classpath:"plnextv2.components.milesAndCash.desktop.controller.DMilesAndCashController"}}},EBANK:{DESKTOP:{placeholderName:"ebank",placeholder:{template:"plnextv2.components.ebank.desktop.views.DEbankVoucherView",module:"DEbankVoucherController"},module:{classpath:"plnextv2.components.ebank.desktop.controller.DEbankVoucherController"}},TABLET:{placeholderName:"ebank",placeholder:{template:"plnextv2.components.ebank.tablet.views.TEbankVoucherView",module:"TEbankVoucherController"},module:{classpath:"plnextv2.components.ebank.tablet.controller.TEbankVoucherController"}},MOBILE:{placeholderName:"ebank",placeholder:{template:"plnextv2.components.ebank.mobile.views.MEbankVoucherView",module:"MEbankVoucherController"},module:{classpath:"plnextv2.components.ebank.mobile.controller.MEbankVoucherController"}}},AXCALENDAR_MATRIX:{DESKTOP:{placeholderName:"calendarMatrix",placeholder:{template:"plnextv2.components.calendarMatrix.desktop.views.DAXCalendarMatrixView",module:"calendarController"},module:{classpath:"plnextv2.components.calendarMatrix.desktop.controller.DAXCalendarMatrixController"}},TABLET:{placeholderName:"calendarMatrix",placeholder:{template:"plnextv2.components.calendarMatrix.tablet.views.TAXCalendarMatrixView",module:"calendarController"},module:{classpath:"plnextv2.components.calendarMatrix.tablet.controller.TAXCalendarMatrixController"}},MOBILE:{placeholderName:"calendarMatrix",placeholder:{template:"plnextv2.components.calendarMatrix.mobile.views.MAXCalendarMatrixView",module:"calendarController"},module:{classpath:"plnextv2.components.calendarMatrix.mobile.controller.MAXCalendarMatrixController"}}},COMPLEX_CALENDAR_MATRIX:{DESKTOP:{placeholderName:"complexCalendarMatrix",placeholder:{template:"plnextv2.components.complexCalendarMatrix.desktop.views.DComplexCalendarMatrixView",module:"complexCalendarController"},module:{classpath:"plnextv2.components.complexCalendarMatrix.desktop.controller.DComplexCalendarMatrixController"}}},CHECK_IN:{DESKTOP:{placeholderName:"checkIn",placeholder:{template:"plnextv2.components.checkIn.desktop.views.DCheckInView",module:"checkInController"},module:{classpath:"plnextv2.components.checkIn.desktop.controller.DCheckInController"}}},FOID:{DESKTOP:{placeholderName:"FOID",placeholder:{template:"plnextv2.components.foid.desktop.views.DFOIDView",module:"DFOIDController"},module:{classpath:"plnextv2.components.foid.desktop.controller.DFOIDController"}}},ITINERARY_REVIEW:{DESKTOP:{placeholderName:"itineraryReview",placeholder:{template:"plnextv2.components.itineraryReview.desktop.views.DItineraryReviewView",module:"DItineraryReviewController"},module:{classpath:"plnextv2.components.itineraryReview.desktop.controller.DItineraryReviewController"}},TABLET:{placeholderName:"itineraryReview",placeholder:{template:"plnextv2.components.itineraryReview.tablet.views.TItineraryReviewView",module:"TItineraryReviewController"},module:{classpath:"plnextv2.components.itineraryReview.tablet.controller.TItineraryReviewController"}},MOBILE:{placeholderName:"itineraryReview",placeholder:{template:"plnextv2.components.itineraryReview.mobile.views.MItineraryReviewView",module:"MItineraryReviewController"},module:{classpath:"plnextv2.components.itineraryReview.mobile.controller.MItineraryReviewController"}}},COMPLEX_ITINERARY:{DESKTOP:{placeholderName:"complexItinerary",placeholder:{template:"plnextv2.components.complexItinerary.desktop.views.DComplexAvailabilityView",module:"complexAvailabilityController"},module:{classpath:"plnextv2.components.complexItinerary.desktop.controller.DComplexAvailabilityController"}},TABLET:{placeholderName:"complexItinerary",placeholder:{template:"plnextv2.components.complexItinerary.tablet.views.TComplexAvailabilityView",module:"TComplexAvailabilityController"},module:{classpath:"plnextv2.components.complexItinerary.tablet.controller.TComplexAvailabilityController"}},MOBILE:{placeholderName:"complexItinerary",placeholder:{template:"plnextv2.components.complexItinerary.mobile.views.MComplexAvailabilityView",module:"MComplexAvailabilityController"},module:{classpath:"plnextv2.components.complexItinerary.mobile.controller.MComplexAvailabilityController"}}},CAR_RATES:{DESKTOP:{placeholderName:"carRates",placeholder:{template:"plnextv2.components.carRates.desktop.views.DCarRatesView",module:"carRatesController"},module:{classpath:"plnextv2.components.carRates.desktop.controller.DCarRatesController"}}},CAR_CONDITIONS:{DESKTOP:{placeholderName:"carConditions",placeholder:{template:"plnextv2.components.carConditions.desktop.views.DCarConditionsView",module:"carConditionsController"},module:{classpath:"plnextv2.components.carConditions.desktop.controller.DCarConditionsController"}}},CAR_MULTIMEDIA:{DESKTOP:{placeholderName:"carMultimedia",placeholder:{template:"plnextv2.components.carMultimedia.desktop.views.DCarMultimediaView",module:"carMultimediaController"},module:{classpath:"plnextv2.components.carMultimedia.desktop.controller.DCarMultimediaController"}}},CAR_INSURANCEEXTRA:{DESKTOP:{placeholderName:"carInsuranceExtra",placeholder:{template:"plnextv2.components.carInsuranceExtra.desktop.views.DCarInsuranceExtraView",module:"carInsuranceExtraController"},module:{classpath:"plnextv2.components.carInsuranceExtra.desktop.controller.DCarInsuranceExtraController"}}},CAR_SEARCHBAR:{DESKTOP:{placeholderName:"carSearchBar",placeholder:{template:"plnextv2.components.carSearchBar.desktop.views.DCarSearchBarView",module:"carSearchBarController"},module:{classpath:"plnextv2.components.carSearchBar.desktop.controller.DCarSearchBarController"}}},CAR_SEARCHBASE:{DESKTOP:{placeholderName:"carSearchBase",placeholder:{template:"plnextv2.components.carSearchBase.desktop.views.DCarSearchBaseView",module:"carSearchBaseController"},module:{classpath:"plnextv2.components.carSearchBase.desktop.controller.DCarSearchBaseController"}}},SB_CAR_SEARCH:{DESKTOP:{placeholderName:"sbCarSearch",placeholder:{template:"plnextv2.components.sbCarSearch.desktop.views.DSbCarSearchView",module:"sbCarSearchBaseController"},module:{classpath:"plnextv2.components.sbCarSearch.desktop.controller.DSbCarSearchController"}},TABLET:{placeholderName:"sbCarSearch",placeholder:{template:"plnextv2.components.sbCarSearch.desktop.views.DSbCarSearchView",module:"sbCarSearchBaseController"},module:{classpath:"plnextv2.components.sbCarSearch.desktop.controller.DSbCarSearchController"}},MOBILE:{placeholderName:"sbCarSearch",placeholder:{template:"plnextv2.components.sbCarSearch.desktop.views.DSbCarSearchView",module:"sbCarSearchBaseController"},module:{classpath:"plnextv2.components.sbCarSearch.desktop.controller.DSbCarSearchController"}}},CAR_SEARCHADVANCED:{DESKTOP:{placeholderName:"carSearchAdvanced",placeholder:{template:"plnextv2.components.carSearchAdvanced.desktop.views.DCarSearchAdvancedView",module:"carSearchAdvancedController"},module:{classpath:"plnextv2.components.carSearchAdvanced.desktop.controller.DCarSearchAdvancedController"}}},CAR_BOOKINGAREA:{DESKTOP:{placeholderName:"carBookingArea",placeholder:{template:"plnextv2.components.carBookingArea.desktop.views.DCarBookingAreaView",module:"carBookingAreaController"},module:{classpath:"plnextv2.components.carBookingArea.desktop.controller.DCarBookingAreaController"}}},CAR_PERSONALINFORMATION:{DESKTOP:{placeholderName:"carPersonalInformation",placeholder:{template:"plnextv2.components.carPersonalInformation.desktop.views.DCarPersonalInformationView",module:"carPersonalInformationController"},module:{classpath:"plnextv2.components.carPersonalInformation.desktop.controller.DCarPersonalInformationController"}}},CAR_ADDRESS:{DESKTOP:{placeholderName:"carAddress",placeholder:{template:"plnextv2.components.carAddress.desktop.views.DCarAddressView",module:"DCarAddressController"},module:{classpath:"plnextv2.components.carAddress.desktop.controller.DCarAddressController"}}},CAR_PAYMENT:{DESKTOP:{placeholderName:"carPayment",placeholder:{template:"plnextv2.components.carPayment.desktop.views.DCarPaymentView",module:"DCarPaymentController"},module:{classpath:"plnextv2.components.carPayment.desktop.controller.DCarPaymentController"}}},CAR_HOTEL_SEARCH:{DESKTOP:{placeholderName:"carHotelSearch",placeholder:{template:"plnextv2.components.carHotelSearch.desktop.views.DCarHotelSearchView",module:"carHoteSearchController"},module:{classpath:"plnextv2.components.carHotelSearch.desktop.controller.DCarHotelSearchController"}}},CAR_RESERVATION:{DESKTOP:{placeholderName:"carReservation",placeholder:{template:"plnextv2.components.carReservation.desktop.views.DCarReservationView",module:"carReservationController"},module:{classpath:"plnextv2.components.carReservation.desktop.controller.DCarReservationController"}}},HOTEL_RESERVATION:{DESKTOP:{placeholderName:"hotelReservation",placeholder:{template:"plnextv2.components.hotelReservation.desktop.views.DHotelReservationView",module:"hotelReservationController"},module:{classpath:"plnextv2.components.hotelReservation.desktop.controller.DHotelReservationController"}}},AVAILABILITY_SCHEDULE:{DESKTOP:{placeholderName:"availabilitySchedule",placeholder:{template:"plnextv2.components.availabilitySchedule.desktop.views.DAvailabilityScheduleView",module:"availabilityScheduleController"},module:{classpath:"plnextv2.components.availabilitySchedule.desktop.controller.DAvailabilityScheduleController"}}},FLIGHT_INFO:{DESKTOP:{placeholderName:"flightInfo",placeholder:{template:"plnextv2.components.flightInfo.desktop.views.DFlightInfoView",module:"flightInfoController"},module:{classpath:"plnextv2.components.flightInfo.desktop.controller.DFlightInfoController"}}},AXTIME_TABLE:{DESKTOP:{placeholderName:"axtimeTable",placeholder:{template:"plnextv2.components.axtimeTable.desktop.views.DAXTimeTableView",module:"DAXTimeTableController"},module:{classpath:"plnextv2.components.axtimeTable.desktop.controller.DAXTimeTableController"}}},FLIGHT_RECAP:{DESKTOP:{placeholderName:"flightRecap",placeholder:{template:"plnextv2.components.flightRecapPanel.desktop.views.DFlightRecapPanelView",module:"flightRecapPanelController"},module:{classpath:"plnextv2.components.flightRecapPanel.desktop.controller.DFlightRecapPanelController"}},TABLET:{placeholderName:"flightRecap",placeholder:{template:"plnextv2.components.flightRecapPanel.tablet.views.TFlightRecapPanelView",module:"flightRecapPanelController"},module:{classpath:"plnextv2.components.flightRecapPanel.tablet.controller.TFlightRecapPanelController"}},MOBILE:{placeholderName:"flightRecap",placeholder:{template:"plnextv2.components.flightRecapPanel.mobile.views.MFlightRecapPanelView",module:"flightRecapPanelController"},module:{classpath:"plnextv2.components.flightRecapPanel.mobile.controller.MFlightRecapPanelController"}}},FLIGHT_RECAP_PANEL:{DESKTOP:{placeholderName:"flightRecapPanel",placeholder:{template:"plnextv2.components.flightRecapPanel.desktop.views.DFlightRecapPanelView",module:"flightRecapPanelController"},module:{classpath:"plnextv2.components.flightRecapPanel.desktop.controller.DFlightRecapPanelController"}},TABLET:{placeholderName:"flightRecapPanel",placeholder:{template:"plnextv2.components.flightRecapPanel.tablet.views.TFlightRecapPanelView",module:"flightRecapPanelController"},module:{classpath:"plnextv2.components.flightRecapPanel.tablet.controller.TFlightRecapPanelController"}},MOBILE:{placeholderName:"flightRecapPanel",placeholder:{template:"plnextv2.components.flightRecapPanel.mobile.views.MFlightRecapPanelView",module:"flightRecapPanelController"},module:{classpath:"plnextv2.components.flightRecapPanel.mobile.controller.MFlightRecapPanelController"}}},CALENDAR_PER_BOUND:{DESKTOP:{placeholderName:"calendarPerBound",placeholder:{template:"plnextv2.components.calendarPerBound.desktop.views.DCalendarPerBoundView",module:"calendarPerBoundController"},module:{classpath:"plnextv2.components.calendarPerBound.desktop.controller.DCalendarPerBoundController"}},TABLET:{placeholderName:"calendarPerBound",placeholder:{template:"plnextv2.components.calendarPerBound.tablet.views.TCalendarPerBoundView",module:"calendarPerBoundController"},module:{classpath:"plnextv2.components.calendarPerBound.tablet.controller.TCalendarPerBoundController"}},MOBILE:{placeholderName:"calendarPerBound",placeholder:{template:"plnextv2.components.calendarPerBound.mobile.views.MCalendarPerBoundView",module:"calendarPerBoundController"},module:{classpath:"plnextv2.components.calendarPerBound.mobile.controller.MCalendarPerBoundController"}}},NEW_MILES_AND_CASH:{DESKTOP:{placeholderName:"newMilesAndCash",placeholder:{template:"plnextv2.components.newMilesAndCash.desktop.views.DNewMilesAndCashView",module:"newMilesAndCashController"},module:{classpath:"plnextv2.components.newMilesAndCash.desktop.controller.DNewMilesAndCashController"}}},REFUND_PREVIEW:{DESKTOP:{placeholderName:"refundPreview",placeholder:{template:"plnextv2.components.refundPreview.desktop.views.DRefundPreviewView",module:"DRefundPreviewController"},module:{classpath:"plnextv2.components.refundPreview.desktop.controller.DRefundPreviewController"}},TABLET:{placeholderName:"refundPreview",placeholder:{template:"plnextv2.components.refundPreview.tablet.views.TRefundPreviewView",module:"TRefundPreviewController"},module:{classpath:"plnextv2.components.refundPreview.tablet.controller.TRefundPreviewController"}},MOBILE:{placeholderName:"refundPreview",placeholder:{template:"plnextv2.components.refundPreview.mobile.views.MRefundPreviewView",module:"MRefundPreviewController"},module:{classpath:"plnextv2.components.refundPreview.mobile.controller.MRefundPreviewController"}}},ATC_REFUND_FARE_REVIEW:{DESKTOP:{placeholderName:"atcrFareReview",placeholder:{template:"plnextv2.components.atcrFareReview.desktop.views.DAtcrFareReviewView",module:"DAtcrFareReviewController"},module:{classpath:"plnextv2.components.atcrFareReview.desktop.controller.DAtcrFareReviewController"}},TABLET:{placeholderName:"atcrFareReview",placeholder:{template:"plnextv2.components.atcrFareReview.tablet.views.TAtcrFareReviewView",module:"TAtcrFareReviewController"},module:{classpath:"plnextv2.components.atcrFareReview.tablet.controller.TAtcrFareReviewController"}},MOBILE:{placeholderName:"atcrFareReview",placeholder:{template:"plnextv2.components.atcrFareReview.mobile.views.MAtcrFareReviewView",module:"MAtcrFareReviewController"},module:{classpath:"plnextv2.components.atcrFareReview.mobile.controller.MAtcrFareReviewController"}}},REFUND_MENU:{DESKTOP:{placeholderName:"refundMenu",placeholder:{template:"plnextv2.components.refundMenu.desktop.views.DRefundMenuView",module:"DRefundMenuController"},module:{classpath:"plnextv2.components.refundMenu.desktop.controller.DRefundMenuController"}},TABLET:{placeholderName:"refundMenu",placeholder:{template:"plnextv2.components.refundMenu.tablet.views.TRefundMenuView",module:"TRefundMenuController"},module:{classpath:"plnextv2.components.refundMenu.tablet.controller.TRefundMenuController"}},MOBILE:{placeholderName:"refundMenu",placeholder:{template:"plnextv2.components.refundMenu.mobile.views.MRefundMenuView",module:"MRefundMenuController"},module:{classpath:"plnextv2.components.refundMenu.mobile.controller.MRefundMenuController"}}},INVOICE_ADDRESS:{DESKTOP:{placeholderName:"invoiceAddress",placeholder:{template:"plnextv2.components.invoiceAddress.desktop.views.DInvoiceAddressView",module:"DInvoiceAddressController"},module:{classpath:"plnextv2.components.invoiceAddress.desktop.controller.DInvoiceAddressController"}}},CASH_AND_MILES_TEASER:{DESKTOP:{placeholderName:"cashAndMilesTeaser",placeholder:{template:"plnextv2.components.cashAndMilesTeaser.desktop.views.DCashAndMilesTeaserView",module:"DCashAndMilesTeaserController"},module:{classpath:"plnextv2.components.cashAndMilesTeaser.desktop.controller.DCashAndMilesTeaserController"}}},SB_TEASERS:{DESKTOP:{placeholderName:"sbTeasers",placeholder:{template:"plnextv2.components.sbTeasers.desktop.views.DSbTeasersView",module:"DSbTeasersController"},module:{classpath:"plnextv2.components.sbTeasers.desktop.controller.DSbTeasersController"}},TABLET:{placeholderName:"sbTeasers",placeholder:{template:"plnextv2.components.sbTeasers.tablet.views.TSbTeasersView",module:"TSbTeasersController"},module:{classpath:"plnextv2.components.sbTeasers.tablet.controller.TSbTeasersController"}},MOBILE:{placeholderName:"sbTeasers",placeholder:{template:"plnextv2.components.sbTeasers.mobile.views.MSbTeasersView",module:"MSbTeasersController"},module:{classpath:"plnextv2.components.sbTeasers.mobile.controller.MSbTeasersController"}}},TRANSFER_TEASER:{DESKTOP:{placeholderName:"transferTeaser",placeholder:{template:"plnextv2.components.transferTeaser.desktop.views.DTransferTeaserView",module:"DTransferTeaserController"},module:{classpath:"plnextv2.components.transferTeaser.desktop.controller.DTransferTeaserController"}},TABLET:{placeholderName:"transferTeaser",placeholder:{template:"plnextv2.components.transferTeaser.tablet.views.TTransferTeaserView",module:"TTransferTeaserController"},module:{classpath:"plnextv2.components.transferTeaser.tablet.controller.TTransferTeaserController"}},MOBILE:{placeholderName:"transferTeaser",placeholder:{template:"plnextv2.components.transferTeaser.mobile.views.MTransferTeaserView",module:"MTransferTeaserController"},module:{classpath:"plnextv2.components.transferTeaser.mobile.controller.MTransferTeaserController"}}},TRANSFER_RECAP:{DESKTOP:{placeholderName:"transferRecap",placeholder:{template:"plnextv2.components.transferRecap.desktop.views.DTransferRecapView",module:"DTransferRecapController"},module:{classpath:"plnextv2.components.transferRecap.desktop.controller.DTransferRecapController"}},TABLET:{placeholderName:"transferRecap",placeholder:{template:"plnextv2.components.transferRecap.tablet.views.TTransferRecapView",module:"TTransferRecapController"},module:{classpath:"plnextv2.components.transferRecap.tablet.controller.TTransferRecapController"}},MOBILE:{placeholderName:"transferRecap",placeholder:{template:"plnextv2.components.transferRecap.mobile.views.MTransferRecapView",module:"MTransferRecapController"},module:{classpath:"plnextv2.components.transferRecap.mobile.controller.MTransferRecapController"}}},CAR_RECAP:{DESKTOP:{placeholderName:"carRecap",placeholder:{template:"plnextv2.components.carRecap.desktop.views.DCarRecapView",module:"carRecapController"},module:{classpath:"plnextv2.components.carRecap.desktop.controller.DCarRecapController"}},TABLET:{placeholderName:"carRecap",placeholder:{template:"plnextv2.components.carRecap.tablet.views.TCarRecapView",module:"carRecapController"},module:{classpath:"plnextv2.components.carRecap.tablet.controller.TCarRecapController"}},MOBILE:{placeholderName:"carRecap",placeholder:{template:"plnextv2.components.carRecap.mobile.views.MCarRecapView",module:"carRecapController"},module:{classpath:"plnextv2.components.carRecap.mobile.controller.MCarRecapController"}}},CAR_AVAILABILITY:{DESKTOP:{placeholderName:"carAvailability",placeholder:{template:"plnextv2.components.carAvailability.desktop.views.DCarAvailabilityView",module:"carAvailabilityController"},module:{classpath:"plnextv2.components.carAvailability.desktop.controller.DCarAvailabilityController"}},TABLET:{placeholderName:"carAvailability",placeholder:{template:"plnextv2.components.carAvailability.tablet.views.TCarAvailabilityView",module:"carAvailabilityController"},module:{classpath:"plnextv2.components.carAvailability.tablet.controller.TCarAvailabilityController"}},MOBILE:{placeholderName:"carAvailability",placeholder:{template:"plnextv2.components.carAvailability.mobile.views.MCarAvailabilityView",module:"carAvailabilityController"},module:{classpath:"plnextv2.components.carAvailability.mobile.controller.MCarAvailabilityController"}}},ACCOMPANYINGTRAVELLER:{DESKTOP:{placeholderName:"accompanyingtraveller",placeholder:{template:"plnextv2.components.accompanyingtraveller.desktop.views.DAccompanyingTravellerView",module:"DAccompanyingTravellerController"},module:{classpath:"plnextv2.components.accompanyingtraveller.desktop.controller.DAccompanyingTravellerController"}}},TIMEOUT:{DESKTOP:{placeholderName:"timeout",placeholder:{module:"TimeoutManager",template:"plnextv2.modules.COMMON.timeout.desktop.views.TimeoutTemplate"},module:{classpath:"plnextv2.utils.requestManager.TimeoutManager"}}},REBOOKING_SERVICES_WARNINGS:{DESKTOP:{placeholderName:"rebookingServicesWarnings",placeholder:{template:"plnextv2.components.rebookingServicesWarnings.desktop.views.DRebookingServicesWarningsView",module:"DRebookingServicesWarningsController"},module:{classpath:"plnextv2.components.rebookingServicesWarnings.desktop.controller.DRebookingServicesWarningsController"}}},REBOOKING_SERVICES_DETAILS:{DESKTOP:{placeholderName:"rebookingServicesDetails",placeholder:{template:"plnextv2.components.rebookingServicesDetails.desktop.views.DRebookingServicesDetailsView",module:"DRebookingServicesDetailsController"},module:{classpath:"plnextv2.components.rebookingServicesDetails.desktop.controller.DRebookingServicesDetailsController"}}},USER_LOGIN:{DESKTOP:{placeholderName:"userlogin",placeholder:{template:"plnextv2.components.common.login.desktop.views.DUserLoginView",module:"DUserLoginController"},module:{classpath:"plnextv2.components.common.login.desktop.controller.DUserLoginController"}}},MERCHANDISING_PROMOTION_CODE:{DESKTOP:{placeholderName:"merchandisingPromotionCode",placeholder:{template:"plnextv2.components.merchandisingPromotionCode.desktop.views.DMerchandisingPromotionCodeView",module:"DMerchandisingPromotionCodeController"},module:{classpath:"plnextv2.components.merchandisingPromotionCode.desktop.controller.DMerchandisingPromotionCodeController"}},TABLET:{placeholderName:"merchandisingPromotionCode",placeholder:{template:"plnextv2.components.merchandisingPromotionCode.tablet.views.TMerchandisingPromotionCodeView",module:"TMerchandisingPromotionCodeController"},module:{classpath:"plnextv2.components.merchandisingPromotionCode.tablet.controller.TMerchandisingPromotionCodeController"}},MOBILE:{placeholderName:"merchandisingPromotionCode",placeholder:{template:"plnextv2.components.merchandisingPromotionCode.mobile.views.MMerchandisingPromotionCodeView",module:"MMerchandisingPromotionCodeController"},module:{classpath:"plnextv2.components.merchandisingPromotionCode.mobile.controller.MMerchandisingPromotionCodeController"}}},LOGIN_PANEL_DIGITAL_PROFILE:{DESKTOP:{placeholderName:"loginPanelDigitalProfile",placeholder:{template:"plnextv2.components.loginPanelDigitalProfile.desktop.views.DLoginPanelDigitalProfileView",module:"DLoginPanelDigitalProfileController"},module:{classpath:"plnextv2.components.loginPanelDigitalProfile.desktop.controller.DLoginPanelDigitalProfileController"}}},AVIOS_POINTS_PANEL:{DESKTOP:{placeholderName:"aviosPointsPanel",placeholder:{template:"plnextv2.components.aviosPointsPanel.desktop.views.DAviosPointsPanelView",module:"DAviosPointsPanelController"},module:{classpath:"plnextv2.components.aviosPointsPanel.desktop.controller.DAviosPointsPanelController"}},TABLET:{placeholderName:"aviosPointsPanel",placeholder:{template:"plnextv2.components.aviosPointsPanel.tablet.views.TAviosPointsPanelView",module:"TAviosPointsPanelController"},module:{classpath:"plnextv2.components.aviosPointsPanel.tablet.controller.TAviosPointsPanelController"}},MOBILE:{placeholderName:"aviosPointsPanel",placeholder:{template:"plnextv2.components.aviosPointsPanel.mobile.views.MAviosPointsPanelView",module:"MAviosPointsPanelController"},module:{classpath:"plnextv2.components.aviosPointsPanel.mobile.controller.MAviosPointsPanelController"}}}}});

//*******************
//LOGICAL-PATH:plnextv2/config/CustomPlaceholdersDefinitions.js
//*******************
var Aria=require("ariatemplates/Aria"),components=require("./ComponentsDefinitions"),jsonUtil=require("ariatemplates/utils/Json"),arrayUtil=require("ariatemplates/utils/Array"),typeUtil=require("ariatemplates/utils/Type"),stringUtil=require("ariatemplates/utils/String"),downloadMgr=require("ariatemplates/core/DownloadMgr"),asyncRequire=require("noder-js/asyncRequire"),Promise=require("noder-js/promise"),customEngine=require("cse/core/cse"),deviceUtils=require("plnextv2/utils/DeviceUtils"),customizationMap={},mapRetrieved=!1;module.exports=Aria.classDefinition({$classpath:"plnextv2.config.CustomPlaceholdersDefinitions",$singleton:!0,$statics:{SITE_CUSTOMISABLE_PLACEHOLDERS:"SITE_CUSTOMISABLE_PLACEHOLDERS",INVALID_GLOBALLIST_STRING:"Invalid customisable placeholders configuration:\n%2"},$prototype:{init:function(e){this._retrieveCustomisablePlaceholdersConfig(e),this._fixConfigurationUrls(e),this._processDeviceSpecificConfiguration()},_retrieveCustomisablePlaceholdersConfig:function(e){if(!mapRetrieved){var t=e.globalLists[this.SITE_CUSTOMISABLE_PLACEHOLDERS];t&&(customizationMap=jsonUtil.load(t[0][0],this,this.INVALID_GLOBALLIST_STRING)),mapRetrieved=!0}},_getCustomizableComponentConfig:function(e,t){if(!customizationMap||!customizationMap.components)return{conf:null,customName:null};var i=customizationMap.components,n=null,a=e+"::"+t,r=customEngine.getCfg();return i[e]&&(n=i[e][t]),n||(n=i["*"]?i["*"][t]:null,r[a]||(a=t)),{conf:n,customName:a}},_getCustomModules:function(e,t,i){e=e||[],0===e.length&&i&&(e=[i]);var n,a=[],r=e.length;if(r>0)for(var s=0;r>s;s++)n="PAGE"==e[s]?t:components.getDeviceComponentDefinition(e[s]).placeholder.module,a.push(n);return a},__getCustomizationDevice:function(e){var t=customEngine.getCfg(),i={};return t&&t[e]&&(i=t[e]),i.customDevice},getComponentCustomizationDevice:function(e,t){var i=this._getCustomizableComponentConfig(e,t);return i.conf?this.__getCustomizationDevice(t)||this.__getCustomizationDevice(e+"::"+t):void 0},getPageCustomizationDevice:function(e){var t=e+"/pageContent",i="*/pageContent";if(customizationMap&&customizationMap.placeholders){var n=customizationMap.placeholders,a=n[t]||n[i]||{};return this.__getCustomizationDevice(a.customName)}},addComponentCustomizationInformation:function(e,t,i,n){var a=this._getCustomizableComponentConfig(i,t),r=a.conf;return r&&(e=jsonUtil.copy(e),e.customName=a.customName,e.customModules=this._getCustomModules(r,n,t)),e},addPlaceholdersCustomizationInformation:function(e,t,i){var n=customEngine.getCfg(),a=e.placeholders;if(customizationMap&&customizationMap.pages&&arrayUtil.contains(customizationMap.pages,t)||(n[t]={template:e.template}),customizationMap&&customizationMap.placeholders){var r,s,o,l,c=customizationMap.placeholders;for(var p in a)a.hasOwnProperty(p)&&(o=p.replace(/\./g,"/"),r=t+"/"+o,s="*/"+o,l=c[r]||c[s],l&&(a[p].customName=l.customName,a[p].customModules=this._getCustomModules(l.customModules,i)))}},_fixConfigurationUrls:function(e){var t=customEngine.getCfg(),i=e.requestParameters.SITE;for(var n in t)if(t.hasOwnProperty(n)&&typeUtil.isObject(t[n])){var a=t[n];a.css&&(a.css=this._fixUrls(a.css,i)),a.scripts&&(a.scripts=this._fixUrls(a.scripts,i))}},_fixUrls:function(e,t){for(var i,n,a=[],r=location.origin,s=/^https?:\/\//,o=0,l=e.length;l>o;o++)n=e[o],s.test(n)?a.push(n):(i=downloadMgr.resolveURL(e[o]),s.test(i)||(i=r+i),a.push(i+"?SITE="+t));return a},_processDeviceSpecificConfiguration:function(){var e=customEngine.getCfg();for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];delete e[t],this._isForCurrentDevice(t)&&(e[t.replace(/(\[[^\]]+\]){0,1}$/,"")]=i)}},_isForCurrentDevice:function(e){var t=deviceUtils.getDeviceType();if(!/\[[^\]]+\]$/.test(e))return!0;for(var i=e.match(/\[([^\]]+)\]$/)[1].split(","),n=0,a=i.length;a>n;n++)i[n]=stringUtil.trim(i[n]);return arrayUtil.contains(i,t)}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/DropDownCfgBeans.js
//*******************
!function(){Aria.beanDefinitions({$package:"plnextv2.utils.widgets.light.DropDownCfgBeans",$namespaces:{json:"aria.core.JsonTypes"},$beans:{Configuration:{$type:"json:Object",$restricted:!1,$properties:{context:{$type:"json:ObjectRef",$mandatory:!0},lineNumber:{$type:"json:Integer"},domReference:{$type:"json:Object",$mandatory:!0},ignoreClicksOn:{$type:"json:Array",$contentType:{$type:"json:ObjectRef"},$default:[{}]}}}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/autocomplete/AutocompleteCfgBeans.js
//*******************
!function(){Aria.beanDefinitions({$package:"plnextv2.utils.widgets.light.autocomplete.AutocompleteCfgBeans",$namespaces:{json:"aria.core.JsonTypes",base:"aria.html.beans.TextInputCfg"},$beans:{Properties:{$type:"base:Properties",$properties:{preselect:{$type:"json:Enum",$enumValues:["strict","always","none"],$default:"strict"},suggestionsTemplate:{$type:"json:PackageName"},lazy:{$type:"json:Boolean",$default:!1},resourcesHandler:{$type:"json:MultiTypes",$contentTypes:[{$type:"json:PackageName"},{$type:"json:ObjectRef"}],$mandatory:!0},sclass:{$type:"json:String",$default:"std"}}}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/calendar/CalendarCfgBeans.js
//*******************
!function(){Aria.beanDefinitions({$package:"plnextv2.utils.widgets.light.calendar.CalendarCfgBeans",$namespaces:{json:"aria.core.JsonTypes",common:"aria.widgetLibs.CommonBeans",base:"aria.html.beans.ElementCfg"},$beans:{Properties:{$type:"base:Properties",$properties:{bind:{$type:"base:Properties.$properties.bind",$properties:{value:{$type:"common:BindingRef"},startDate:{$type:"common:BindingRef"}}},tagName:{$type:"base:Properties.$properties.tagName",$mandatory:!1,$default:"span"},template:{$type:"json:PackageName",$default:"plnextv2.utils.widgets.light.calendar.CalendarTemplate"},label:{$type:"json:String"},showWeekNumbers:{$type:"json:Boolean",$default:!1},value:{$type:"json:Date"},minValue:{$type:"json:Date"},maxValue:{$type:"json:Date"},displayUnit:{$type:"json:Enum",$enumValues:["M","W"],$default:"M"},numberOfUnits:{$type:"json:Integer",$default:3},startDate:{$type:"json:Date"},prevSelected:{$type:"json:Date"},firstDayOfWeek:{$type:"json:Integer",$minValue:0,$maxValue:6},monthLabelFormat:{$type:"json:String",$default:"MMMM yyyy"},dayOfWeekLabelFormat:{$type:"json:String",$default:"EE"},dateLabelFormat:{$type:"json:String",$default:"d"},completeDateLabelFormat:{$type:"json:String"},previousMonthLabel:{$type:"json:String",$default:""},nextMonthLabel:{$type:"json:String",$default:""},showShortcuts:{$type:"json:Boolean",$default:!1},restrainedNavigation:{$type:"json:Boolean",$default:!0},sclass:{$type:"json:String",$default:"std"},dynamicWaiver:{$type:"json:Object",$mandatory:!1,$properties:{disruptedDates:{$type:"json:Array",$mandatory:!0,$contentType:{$type:"json:Date"}},waivedDates:{$type:"json:Array",$mandatory:!0,$contentType:{$type:"json:Date"}},disruptedDateLabel:{$type:"json:String",$mandatory:!0},noPenaltyLabel:{$type:"json:String",$mandatory:!0},otherFeesLabel:{$type:"json:String",$mandatory:!0}}}}}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/datefield/DateFieldCfgBeans.js
//*******************
!function(){Aria.beanDefinitions({$package:"plnextv2.utils.widgets.light.datefield.DateFieldCfgBeans",$namespaces:{json:"aria.core.JsonTypes",base:"aria.html.beans.TextInputCfg"},$beans:{Properties:{$type:"base:Properties",$properties:{tagName:{$type:"base:Properties.$properties.tagName",$default:"input",$mandatory:!1},pattern:{$type:"json:String"},minValue:{$type:"json:Date"},maxValue:{$type:"json:Date"}}}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/light/datepicker/DatePickerCfgBeans.js
//*******************
!function(){Aria.beanDefinitions({$package:"plnextv2.utils.widgets.light.datepicker.DatePickerCfgBeans",$namespaces:{json:"aria.core.JsonTypes",base:"aria.html.beans.ElementCfg",calendar:"plnextv2.utils.widgets.light.calendar.CalendarCfgBeans",datefield:"plnextv2.utils.widgets.light.datefield.DateFieldCfgBeans",textinput:"aria.html.beans.TextInputCfg"},$beans:{Properties:{$type:"base:Properties",$properties:{tagName:{$type:"base:Properties.$properties.tagName",$default:"div",$mandatory:!1},minValue:{$type:"json:Date"},maxValue:{$type:"json:Date"},lazy:{$type:"json:Boolean",$default:!1},pattern:{$type:"json:String"},dateField:{$type:"datefield:Properties",$restricted:!1,$properties:{minValue:{$type:"datefield:Properties.$properties.minValue"},maxValue:{$type:"datefield:Properties.$properties.maxValue"},pattern:{$type:"datefield:Properties.$properties.pattern"},bind:{$type:"textinput:Properties.$properties.bind"}},$default:{}},calendar:{$type:"calendar:Properties",$restricted:!1,$properties:{bind:{$type:"calendar:Properties.$properties.bind"}},$default:{}},sclass:{$type:"json:String",$default:"std"},iconClass:{$type:"json:String",$default:"square icon-calendar"},iconBtni18n:{$type:"json:String"}}}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/accordion/bean/AccordionCfgBeans.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.accordion.bean.AccordionCfgBeans",$dependencies:["plnextv2.utils.I18n"],$namespaces:{json:"aria.core.JsonTypes",common:"aria.widgetLibs.CommonBeans",cfg:"aria.templates.CfgBeans"},$beans:{AccordionCfg:{$type:"json:Object",$properties:{accordionElements:{$type:"json:Array",$contentType:{$type:"json:Object",$properties:{heading:{$type:"json:String",$mandatory:!0},headingMacro:{$type:"cfg:MacroCfg",$mandatory:!1},iconCaretDown:{$type:"json:String",$mandatory:!1},iconCaretUp:{$type:"json:String",$mandatory:!1},subHeadingMacro:{$type:"cfg:MacroCfg",$mandatory:!1},contentMacro:{$type:"cfg:MacroCfg",$mandatory:!0},onShow:{$type:"common:Callback",$mandatory:!1},onHeaderClicked:{$type:"common:Callback",$mandatory:!1},onHeaderEnterPressed:{$type:"common:Callback",$mandatory:!1},elementClass:{$type:"json:String",$mandatory:!1}}},$mandatory:!0},multiSelectable:{$type:"json:Boolean",$default:!1,$mandatory:!1},headingLevel:{$type:"json:String",$mandatory:!0},isFirstElementOpenedOnInit:{$type:"json:Boolean",$default:!0,$mandatory:!1},areHeadersSticky:{$type:"json:Boolean",$default:!1,$mandatory:!1}},$mandatory:!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/autocompleteBox/AutocompleteBoxCfgBeans.js
//*******************
!function(){Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.autocompleteBox.AutocompleteBoxCfgBeans",$namespaces:{json:"aria.core.JsonTypes",base:"aria.html.beans.ElementCfg",textfield:"plnextv2.utils.widgets.plnextLib.autocompleteBox.textfield.TextFieldCfgBeans",textinput:"aria.html.beans.TextInputCfg"},$beans:{Properties:{$type:"base:Properties",$properties:{preselect:{$type:"json:Enum",$enumValues:["strict","always","none"],$default:"strict"},suggestionsTemplate:{$type:"json:PackageName"},lazy:{$type:"json:Boolean",$default:!1},resourcesHandler:{$type:"json:MultiTypes",$contentTypes:[{$type:"json:PackageName"},{$type:"json:ObjectRef"}],$mandatory:!0},sclass:{$type:"json:String",$default:"std"},tagName:{$type:"base:Properties.$properties.tagName",$default:"span",$mandatory:!1},formControlClass:{$type:"json:String"},readOnly:{$type:"json:Boolean",$default:!1},textField:{$type:"textfield:Properties",$restricted:!1,$properties:{bind:{$type:"textinput:Properties.$properties.bind"}},$default:{}},showSuggestionsOnFocus:{$type:"json:Boolean",$default:!1},allowValuesNotListed:{$type:"json:Boolean",$default:!1},allowRichContent:{$type:"json:Boolean",$default:!1},disabled:{$type:"json:Boolean",$default:!1},iconBtni18n:{$type:"json:String"},oneToOneMatch:{$type:"json:Boolean",$default:!1}}}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/autocompleteBox/textfield/TextFieldCfgBeans.js
//*******************
!function(){Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.autocompleteBox.textfield.TextFieldCfgBeans",$namespaces:{json:"aria.core.JsonTypes",base:"aria.html.beans.TextInputCfg"},$beans:{Properties:{$type:"base:Properties",$properties:{tagName:{$type:"base:Properties.$properties.tagName",$default:"input",$mandatory:!1},pattern:{$type:"json:String",$default:""}}}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/autocompleteWithSteps/bean/AutocompleteWithStepsCfgBeans.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.autocompleteWithSteps.bean.AutocompleteWithStepsCfgBeans",$namespaces:{json:"aria.core.JsonTypes",common:"aria.widgetLibs.CommonBeans"},$beans:{AutoCompleteWithStepsCfg:{$type:"json:Object",$properties:{label:{$type:"json:String",$mandatory:!0},bind:{$type:"json:Object",$properties:{value:{$type:"common:BindingRef"}}},onValueChange:{$type:"common:Callback"},steps:{$type:"json:Array",$contentType:{$type:"json:Object",$properties:{value:{$type:"json:Integer",$mandatory:!0},label:{$type:"json:String",$mandatory:!0}}},$default:[]},errorInputFormatNotValid:{$type:"json:String",$mandatory:!0},errorInputInvalidAmount:{$type:"json:String",$mandatory:!0},labelZeroSuggestions:{$type:"json:String",$mandatory:!0},labelOneSuggestion:{$type:"json:String",$mandatory:!0},labelManySuggestions:{$type:"json:String",$mandatory:!0},labelSelectedSuggestion:{$type:"json:String",$mandatory:!0}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/button/bean/ButtonCfgBeans.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.button.bean.ButtonCfgBeans",$namespaces:{json:"aria.core.JsonTypes",common:"aria.widgetLibs.CommonBeans",widget:"aria.widgets.CfgBeans",html:"aria.templates.CfgBeans"},$beans:{ButtonCfg:{$type:"json:Object",$properties:{bind:{$type:"widget:DivCfg.bind",$properties:{visible:{$type:"common:BindingRef"}}},text:{$type:"json:String",$sample:"Continue"},type:{$type:"json:String",$sample:"primary",$default:"primary"},noLeftIcon:{$type:"json:Boolean",$default:!1},noRightIcon:{$type:"json:Boolean",$default:!1},noIcons:{$type:"json:Boolean",$default:!0},onClick:{$type:"common:Callback"},classList:{$type:"ClassListCfg",$default:{}},attributes:{$type:"html:HtmlAttribute",$properties:{id:{$type:"json:String",$mandatory:!1}}},disableOnLoad:{$type:"json:Boolean",$default:!1}}},ClassListCfg:{$type:"json:Object",$properties:{leftIcon:{$type:"json:Array",$contentType:{$type:"json:String"},$default:[]},rightIcon:{$type:"json:Array",$contentType:{$type:"json:String"},$default:[]},text:{$type:"json:Array",$contentType:{$type:"json:String"},$default:[]},button:{$type:"json:Array",$contentType:{$type:"json:String"},$default:[]}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/dialog/bean/DialogCfgBeans.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.dialog.bean.DialogCfgBeans",$namespaces:{widget:"aria.widgets.CfgBeans",common:"aria.widgetLibs.CommonBeans",json:"aria.core.JsonTypes",templates:"aria.templates.CfgBeans"},$beans:{DialogCfg:{$type:"widget:DivCfg",$properties:{bind:{$type:"widget:DivCfg.bind",$properties:{visible:{$type:"common:BindingRef"},contentLoaded:{$type:"common:BindingRef"},title:{$type:"common:BindingRef"}}},closeOnMouseClick:{$type:"json:Boolean",$default:!0},closeOnEscape:{$type:"json:Boolean",$default:!0},closeButton:{$type:"json:Boolean",$default:!0},maskCssClass:{$type:"json:String",$default:"dialogMask"},bsGridClass:{$type:"json:Object"},xMargin:{$type:"json:Integer"},yMargin:{$type:"json:Integer"},minXMargin:{$type:"json:Integer"},minYMargin:{$type:"json:Integer"},onOpen:{$type:"common:Callback"},onClose:{$type:"common:Callback"},top:{$type:"json:String"},autoHeight:{$type:"json:Boolean"},closeButtonFooter:{$type:"json:Boolean"}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/dropdown/bean/BeanCfg.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.dropdown.bean.BeanCfg",$namespaces:{json:"aria.core.JsonTypes",templates:"aria.templates.CfgBeans",common:"aria.widgetLibs.CommonBeans"},$beans:{DropdownCfg:{$type:"json:Object",$properties:{id:{$type:"json:String",$mandatory:!1},label:{$type:"json:String",$mandatory:!1},initialLabel:{$type:"json:String",$mandatory:!1},buttonClass:{$type:"json:String",$mandatory:!1},dropDownClass:{$type:"json:String",$mandatory:!1},cssClass:{$type:"json:String",$mandatory:!1},iconClass:{$type:"json:String",$mandatory:!1},fitText:{$type:"json:Boolean",$mandatory:!1},options:{$type:"json:Array",$default:[],$mandatory:!1,$contentType:{$type:"json:Object",$properties:{label:{$type:"json:String",$mandatory:!0},labelCode:{$type:"json:String",$mandatory:!1},iconClass:{$type:"json:String",$mandatory:!1},action:{$type:"common:Callback",$mandatory:!1},showDropDownLabel:{$type:"json:Boolean",$mandatory:!1},cssClass:{$type:"json:String",$mandatory:!1},preselect:{$type:"json:Boolean",$mandatory:!1}}}},overwriteLabel:{$type:"json:Boolean",$mandatory:!1},addOptionLabel:{$type:"json:Boolean",$mandatory:!1}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/handlers/AirportCityResourcesHandlerBean.js
//*******************
!function(){Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.handlers.AirportCityResourcesHandlerBean",$namespaces:{base:"aria.widgets.form.AutoCompleteBean",json:"aria.core.JsonTypes"},$beans:{Suggestion:{$type:"json:Object",$restricted:!1,$properties:{code:{$type:"json:String",$sample:"CDG"},label:{$type:"json:String",$sample:"Paris (CDG)",$mandatory:!0},labelCustomised:{$type:"json:String",$sample:"Paris (CDG)",$mandatory:!1},countryName:{$type:"json:String",$sample:"France",$mandatory:!0},cityName:{$type:"json:String",$sample:"Paris",$mandatory:!0},airportDetails:{$type:"json:ObjectRef",$sample:""}}},Configuration:{$type:"json:Object",$restricted:!1,$properties:{labelKey:{$type:"json:String",$sample:"myLabel",$default:"label"},labelCustomisedKey:{$type:"json:String",$sample:"Paris (CDG)",$mandatory:!1},codeKey:{$type:"json:String",$sample:"myCode",$default:"code"},countryNameKey:{$type:"json:String",$sample:"myCountryName",$default:"countryName"},cityNameKey:{$type:"json:String",$sample:"myCityName",$default:"cityName"},airportDetailsKey:{$type:"json:String",$sample:"myAirpotDetails",$default:"airpotDetails"},sortingMethod:{$type:"json:FunctionRef"},codeExactMatch:{$type:"json:Boolean",$default:!1},labelMatchAtWordBoundaries:{$type:"json:Boolean",$default:!1},threshold:{$type:"json:Integer",$default:1}}}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/handlers/DefaultResourcesHandlerBean.js
//*******************
!function(){Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.handlers.DefaultResourcesHandlerBean",$namespaces:{base:"aria.widgets.form.AutoCompleteBean",json:"aria.core.JsonTypes"},$beans:{Suggestion:{$type:"json:Object",$restricted:!1,$properties:{code:{$type:"json:String",$sample:"CDG"},label:{$type:"json:String",$sample:"Paris (CDG)",$mandatory:!0},codeRender:{$type:"json:Object"},labelRender:{$type:"json:Object"}}},Configuration:{$type:"json:Object",$restricted:!1,$properties:{labelKey:{$type:"json:String",$sample:"myLabel",$default:"label"},codeKey:{$type:"json:String",$sample:"myCode",$default:"code"},sortingMethod:{$type:"json:FunctionRef"},codeExactMatch:{$type:"json:Boolean",$default:!1},labelMatchAtWordBoundaries:{$type:"json:Boolean",$default:!1},threshold:{$type:"json:Integer",$default:1}}}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/htmltag/bean/HtmlTagCfgBeans.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.htmltag.bean.HtmlTagCfgBeans",$namespaces:{json:"aria.core.JsonTypes"},$beans:{HtmlTagCfg:{$type:"json:Object",$properties:{tag:{$type:"json:String",$mandatory:!0},cssClass:{$type:"json:String",$default:""},id:{$type:"json:String",$default:""}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/message/bean/MessageCfgBeans.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.message.bean.MessageCfgBeans",$namespaces:{widget:"aria.widgets.CfgBeans",common:"aria.widgetLibs.CommonBeans",json:"aria.core.JsonTypes",templates:"aria.templates.CfgBeans"},$beans:{MessageCfg:{$type:"widget:DivCfg",$properties:{bind:{$type:"widget:DivCfg.bind",$properties:{visible:{$type:"common:BindingRef"}}},closeButton:{$type:"json:Boolean",$default:!1},type:{$type:"json:String"},titleLvl:{$type:"json:String",$default:"h4"},title:{$type:"json:String"},customIcon:{$type:"json:String"},containerBsGrid:{$type:"json:Object"},iconBsGrid:{$type:"json:Object"},textBsGrid:{$type:"json:Object"},style:{$type:"json:String"}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/modalDialog/bean/ModalDialogCfgBeans.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.modalDialog.bean.ModalDialogCfgBeans",$namespaces:{widget:"aria.widgets.CfgBeans",common:"aria.widgetLibs.CommonBeans",json:"aria.core.JsonTypes",templates:"aria.templates.CfgBeans"},$beans:{ModalDialogCfg:{$type:"widget:DivCfg",$properties:{bind:{$type:"widget:DivCfg.bind",$properties:{visible:{$type:"common:BindingRef"},contentLoaded:{$type:"common:BindingRef"},title:{$type:"common:BindingRef"}}},closeOnMouseClick:{$type:"json:Boolean",$default:!0},closeOnEscape:{$type:"json:Boolean",$default:!0},closeButton:{$type:"json:Boolean",$default:!0},maskCssClass:{$type:"json:String",$default:"dialogMask"},bsGridClass:{$type:"json:Object"},onOpen:{$type:"common:Callback"},onClose:{$type:"common:Callback"},closeButtonFooter:{$type:"json:Boolean"}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/modalPopover/bean/ModalPopoverCfgBean.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.modalPopover.bean.ModalPopoverCfgBean",$namespaces:{json:"aria.core.JsonTypes",common:"aria.widgetLibs.CommonBeans",cfg:"aria.templates.CfgBeans"},$beans:{ModalPopoverCfgBean:{$type:"json:Object",$mandatory:!0,$properties:{modalId:{$type:"json:String",$mandatory:!1},cssClass:{$type:"json:String",$mandatory:!1},subheaderMacro:{$type:"cfg:MacroCfg",$mandatory:!1},displaySubheaderSticky:{$type:"json:Boolean",$default:!1,$mandatory:!1},contentMacro:{$type:"cfg:MacroCfg",$mandatory:!0},binding:{$type:"json:Object",$mandatory:!0,$properties:{heading:{$type:"cfg:BindingConfiguration",$mandatory:!0},show:{$type:"cfg:BindingConfiguration",$mandatory:!0}}},backgroundContentSelector:{$type:"json:String",$default:"#main-container",$mandatory:!1},closeButtonLabel:{$type:"json:String",$mandatory:!1},closeButtonCssClass:{$type:"json:String",$mandatory:!1},showCloseButtonAfterContent:{$type:"json:Boolean",$default:!0,$mandatory:!1},onClose:{$type:"common:Callback",$mandatory:!1,$default:null}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/multipleSelect/MultipleSelectCfgBeans.js
//*******************
!function(){Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.multipleSelect.MultipleSelectCfgBeans",$namespaces:{json:"aria.core.JsonTypes",base:"aria.html.beans.ElementCfg",selectList:"plnextv2.utils.widgets.plnextLib.multipleSelect.selectList.SelectListCfgBeans",textfield:"plnextv2.utils.widgets.plnextLib.multipleSelect.textfield.TextFieldCfgBeans",textinput:"aria.html.beans.TextInputCfg"},$beans:{Properties:{$type:"base:Properties",$properties:{tagName:{$type:"base:Properties.$properties.tagName",$default:"span",$mandatory:!1},formControlClass:{$type:"json:String"},lazy:{$type:"json:Boolean",$default:!1},textField:{$type:"textfield:Properties",$restricted:!1,$properties:{bind:{$type:"textinput:Properties.$properties.bind"}},$default:{}},selectList:{$type:"selectList:Properties",$restricted:!1,$properties:{bind:{$type:"selectList:Properties.$properties.bind"}},$default:{}},iconBtni18n:{$type:"json:String"}}}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/multipleSelect/selectList/SelectListCfgBeans.js
//*******************
!function(){Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.multipleSelect.selectList.SelectListCfgBeans",$namespaces:{json:"aria.core.JsonTypes",common:"aria.widgetLibs.CommonBeans",base:"aria.html.beans.ElementCfg"},$beans:{Properties:{$type:"base:Properties",$properties:{bind:{$type:"base:Properties.$properties.bind",$properties:{value:{$type:"common:BindingRef"}}},tagName:{$type:"base:Properties.$properties.tagName",$mandatory:!1,$default:"span"},template:{$type:"json:PackageName",$default:"selectList.view.SelectListTemplate"},label:{$type:"json:String"},value:{$type:"json:ObjectRef"},sclass:{$type:"json:String",$default:"std"}}}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/multipleSelect/textfield/TextFieldCfgBeans.js
//*******************
!function(){Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.multipleSelect.textfield.TextFieldCfgBeans",$namespaces:{json:"aria.core.JsonTypes",base:"aria.html.beans.TextInputCfg"},$beans:{Properties:{$type:"base:Properties",$properties:{tagName:{$type:"base:Properties.$properties.tagName",$default:"input",$mandatory:!1},pattern:{$type:"json:String",$default:""}}}}})}();
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/panel/bean/CollapsiblePanelCfgBeans.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.panel.bean.CollapsiblePanelCfgBeans",$namespaces:{widget:"aria.widgets.CfgBeans",common:"aria.widgetLibs.CommonBeans",json:"aria.core.JsonTypes",templates:"aria.templates.CfgBeans"},$beans:{CollapsiblePanelCfg:{$type:"widget:DivCfg",$properties:{icon:{$type:"json:String"},title:{$type:"json:String",$mandatory:!0},titleMacro:{$type:"cfg:MacroCfg",$mandatory:!1},classList:{$type:"json:Array",$contentType:{$type:"json:String"},$default:[]},analyticsToggleEvent:{$type:"json:String"}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/panel/bean/PanelCfgBeans.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.panel.bean.PanelCfgBeans",$namespaces:{widget:"aria.widgets.CfgBeans",common:"aria.widgetLibs.CommonBeans",json:"aria.core.JsonTypes",templates:"aria.templates.CfgBeans"},$beans:{PanelCfg:{$type:"widget:DivCfg",$properties:{id:{$type:"json:String"},icon:{$type:"json:String"},title:{$type:"json:String",$mandatory:!0},subtitle:{$type:"json:String"},classList:{$type:"json:Array",$contentType:{$type:"json:String"},$default:[]}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/popover/BeanCfg.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.popover.BeanCfg",$namespaces:{json:"aria.core.JsonTypes",templates:"aria.templates.CfgBeans",common:"aria.widgetLibs.CommonBeans"},$beans:{PopoverCfg:{$type:"json:Object",$properties:{macro:{$type:"templates:MacroCfg",$mandatory:!1},htmlContent:{$type:"json:String",$mandatory:!1},targetId:{$type:"json:String",$mandatory:!1},wrapperCssClass:{$type:"json:String",$mandatory:!1,$default:""},position:{$type:"json:Enum",$enumValues:["left","top","right","bottom"],$default:"right"},cssClass:{$type:"json:String",$default:""},width:{$type:"json:Integer"},showOnMouseOver:{$type:"json:Boolean",$default:!1},xoffset:{$type:"json:Integer",$default:0},yoffset:{$type:"json:Integer",$default:0},fadeIn:{$type:"json:Boolean",$default:!0},fadeInTime:{$type:"json:Integer",$default:200},fadeOut:{$type:"json:Boolean",$default:!0},fadeOutTime:{$type:"json:Integer",$default:200},openOn:{$type:"json:Object",$properties:{inside:{$type:"json:ObjectRef",$mandatory:!0},to:{$type:"json:String",$mandatory:!0},booleanFn:{$type:"json:Object",$properties:{fn:{$type:"json:FunctionRef"},args:{$type:"json:MultiTypes"}}}}},closeOn:{$type:"json:Object",$properties:{inside:{$type:"json:ObjectRef",$mandatory:!0},to:{$type:"json:String",$mandatory:!0},booleanFn:{$type:"json:Object",$properties:{fn:{$type:"json:FunctionRef"},args:{$type:"json:MultiTypes"}}}}},bindRefreshTo:{$type:"json:Array",$default:[],$contentType:{$type:"templates:BindingConfiguration",$sample:"{inside : ..., to : ...}"}},onClose:{$type:"common:Callback"},responsive:{$type:"json:Boolean",$default:!1},responsiveBoundingContainer:{$type:"json:String",$default:null}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/slider/bean/SliderCfgBeans.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.slider.bean.SliderCfgBeans",$namespaces:{json:"aria.core.JsonTypes"},$beans:{SliderCfg:{$type:"json:Object",$properties:{type:{$type:"json:String",$default:""},label:{$type:"json:String",$default:""},labelFrom:{$type:"json:String",$default:""},labelTo:{$type:"json:String",$default:""},width:{$type:"json:Integer",$default:200},range:{$type:"json:Boolean",$default:!1},maxValue:{$type:"json:Integer",$default:100},minValue:{$type:"json:Integer",$default:0},valueText:{$type:"json:String",$default:""},baseIncrement:{$type:"json:Integer",$default:1},increment:{$type:"json:Integer",$default:1},bindValueLeft:{$type:"json:Object",$properties:{inside:{$type:"json:ObjectRef",$mandatory:!0},to:{$type:"json:String",$mandatory:!0}}},bindValueRight:{$type:"json:Object",$properties:{inside:{$type:"json:ObjectRef",$mandatory:!0},to:{$type:"json:String",$mandatory:!0}}},displayBoundValues:{$type:"json:Boolean",$default:!0},showSliderLimits:{$type:"json:Boolean",$default:!1},lowerLimitLabel:{$type:"json:String",$default:""},upperLimitLabel:{$type:"json:String",$default:""}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/sliderDiscrete/bean/SliderDiscreteCfgBeans.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.sliderDiscrete.bean.SliderDiscreteCfgBeans",$namespaces:{json:"aria.core.JsonTypes",common:"aria.widgetLibs.CommonBeans"},$beans:{SliderDiscreteCfg:{$type:"json:Object",$properties:{baseId:{$type:"json:String"},label:{$type:"json:String",$default:""},bind:{$type:"json:Object",$properties:{value:{$type:"common:BindingRef"}}},onValueChange:{$type:"common:Callback"},steps:{$type:"json:Array",$contentType:{$type:"json:Object",$properties:{value:{$type:"json:Integer",$mandatory:!0},label:{$type:"json:String",$mandatory:!0}}},$default:[]},handleStyle:{$type:"json:String",$default:"cursor"},showStepLabels:{$type:"json:Boolean",$default:!1},displayStepLabelsType:{$type:"json:String",$default:"none"},showSliderLimits:{$type:"json:Boolean",$default:!1},lowerLimitLabel:{$type:"json:String",$default:""},upperLimitLabel:{$type:"json:String",$default:""},showCurrentValue:{$type:"json:Boolean",$default:!1},rangeFromToLabel:{$type:"json:String",$default:""},showMinMaxButtons:{$type:"json:Boolean",$default:!1}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/stepper/bean/StepperCfgBeans.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.stepper.bean.StepperCfgBeans",$namespaces:{json:"aria.core.JsonTypes",common:"aria.widgetLibs.CommonBeans",widget:"aria.widgets.CfgBeans"},$beans:{StepperCfg:{$type:"json:Object",$properties:{id:{$type:"json:String"},step:{$type:"json:Integer",$default:1},maxValue:{$type:"json:Integer",$mandatory:!0},minValue:{$type:"json:Integer",$mandatory:!0},inputType:{$type:"json:Enum",$enumValues:["TEXTFIELD","DROPDOWN"],$default:"TEXTFIELD"},bind:{$type:"json:Object",$properties:{value:{$type:"common:BindingRef"},disabled:{$type:"common:BindingRef"}}},onValueChange:{$type:"common:Callback"},notifyChangeOnType:{$type:"json:Boolean"},label:{$type:"json:String",$default:""},labelMaxReached:{$type:"json:String",$default:""},labelMinReached:{$type:"json:String",$default:""},labelInvalidValue:{$type:"json:String",$default:""},labelPlusButton:{$type:"json:String",$default:""},labelMinusButton:{$type:"json:String",$default:""},srWarning:{$type:"json:String",$default:""},srWarningMinimum:{$type:"json:String",$default:""},srWarningMaximum:{$type:"json:String",$default:""},stepperClass:{$type:"json:String",$default:""},labelClass:{$type:"json:String",$default:""},inputClass:{$type:"json:String",$default:""}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/summaryDialog/bean/TripSummaryDialogCfgBeans.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.summaryDialog.bean.TripSummaryDialogCfgBeans",$namespaces:{widget:"aria.widgets.CfgBeans",common:"aria.widgetLibs.CommonBeans",json:"aria.core.JsonTypes",templates:"aria.templates.CfgBeans"},$beans:{DialogCfg:{$type:"widget:DivCfg",$properties:{bind:{$type:"widget:DivCfg.bind",$properties:{visible:{$type:"common:BindingRef"},contentLoaded:{$type:"common:BindingRef"}}},closeOnMouseClick:{$type:"json:Boolean",$default:!0},closeOnEscape:{$type:"json:Boolean",$default:!0},onClose:{$type:"common:Callback"}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/switchBtn/bean/SwitchCfgBeans.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.switchBtn.bean.SwitchCfgBeans",$namespaces:{json:"aria.core.JsonTypes"},$beans:{SwitchCfg:{$type:"json:Object",$properties:{onLabel:{$type:"json:String",$default:"ON"},offLabel:{$type:"json:String",$default:"OFF"},bind:{$type:"json:Object",$properties:{inside:{$type:"json:ObjectRef",$mandatory:!0},to:{$type:"json:String",$mandatory:!0}}}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/tabBar/bean/TabBarCfgBeans.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.tabBar.bean.TabBarCfgBeans",$namespaces:{json:"aria.core.JsonTypes",common:"aria.widgetLibs.CommonBeans"},$beans:{TabBarCfg:{$type:"json:Object",$properties:{buttonBeans:{$type:"json:Array",$contentType:{$type:"json:Object",$properties:{label:{$type:"json:String",$mandatory:!0},onClick:{$type:"common:Callback",$mandatory:!0}}},$mandatory:!0},numberOfButtonsDisplayed:{$type:"json:Integer",$mandatory:!1,$default:4,$minValue:1},responsiveNumberOfButtonsDisplayed:{$type:"json:Array",$mandatory:!1,$contentType:{$type:"json:Object",$properties:{min:{$type:"json:Integer",$mandatory:!1,$default:null,$minValue:1},max:{$type:"json:Integer",$mandatory:!1,$default:null,$minValue:1},numberOfButtonsDisplayed:{$type:"json:Integer",$mandatory:!0,$minValue:1}}}},defaultSelectionIndex:{$type:"json:Integer",$mandatory:!1,$default:0,$minValue:0},callOnClickOnInit:{$type:"json:Boolean",$mandatory:!1,$default:!1}},$mandatory:!0}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/teaserSwitch/bean/BeanCfg.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.teaserSwitch.bean.BeanCfg",$namespaces:{json:"aria.core.JsonTypes",templates:"aria.templates.CfgBeans",common:"aria.widgetLibs.CommonBeans"},$beans:{TeaserSwitchCfg:{$type:"json:Object",$properties:{labels:{$type:"json:Object",$default:[],$properties:{yes:{$type:"json:String"},no:{$type:"json:String"},question:{$type:"json:String"},SRWarningPattern:{$type:"json:String",$mandatory:!1}},$mandatory:!1},initialButton:{$type:"json:String",$mandatory:!1},callbackYes:{$type:"common:Callback",$mandatory:!1},callbackYesBlocked:{$type:"common:Callback",$mandatory:!1},callbackNo:{$type:"common:Callback",$mandatory:!1},bind:{$type:"json:Object",$default:[],$mandatory:!1,$properties:{value:{$type:"common:BindingRef"},isYesButtonBlocked:{$type:"common:BindingRef"}}}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/widgets/plnextLib/tooltip/bean/CustomTooltipCfgBeans.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.utils.widgets.plnextLib.tooltip.bean.CustomTooltipCfgBeans",$namespaces:{json:"aria.core.JsonTypes",common:"aria.widgetLibs.CommonBeans",base:"aria.html.beans.ElementCfg",dom:"aria.utils.DomBeans",templates:"aria.templates.CfgBeans",animation:"aria.utils.css.AnimationsBean"},$beans:{CustomTooltipCfg:{$type:"json:Object",$properties:{id:{$type:"json:String"},contentMacro:{$type:"templates:MacroCfg"},preferredWidth:{$type:"json:Integer",$default:-1},preferredHeight:{$type:"json:Integer",$default:-1},associatedElem:{$type:"json:String"},openOnMouseClick:{$type:"json:Boolean",$default:!1},openOnMouseOver:{$type:"json:Boolean",$default:!0},openOnMouseMove:{$type:"json:Boolean",$default:!0},openOnKeyboardEnter:{$type:"json:Boolean",$default:!0},closeOnMouseOut:{$type:"json:Boolean",$default:!1},closeOnMouseClick:{$type:"json:Boolean",$default:!1},closeOnMouseOutDelay:{$type:"json:Integer",$default:-1},arrow:{$type:"json:Boolean",$default:!1},closeButton:{$type:"json:Boolean",$default:!1},showDelay:{$type:"json:Integer",$default:100},cssClass:{$type:"json:String"},title:{$type:"json:String",$default:""},displaySide:{$type:"json:String",$default:"right"},modal:{$type:"json:Boolean",$default:!1},maskCssClass:{$type:"json:String"},absolutePosition:{$type:"dom:Position",$default:null},closeOnMouseScroll:{$type:"json:Boolean",$default:!0},isBodyReferencePosition:{$type:"json:Boolean",$default:!1},ignoreClicksOn:{$type:"json:Array",$contentType:{$type:"json:ObjectRef"},$default:[{}]},onAfterOpen:{$type:"json:Object",$properties:{fn:{$type:"json:FunctionRef"},scope:{$type:"json:ObjectRef"},onerror:{$type:"json:FunctionRef"},onerrorScope:{$type:"json:ObjectRef"},args:{$type:"json:MultiTypes"},timeout:{$type:"json:Integer"}}},onClose:{$type:"json:Object",$properties:{fn:{$type:"json:FunctionRef"},scope:{$type:"json:ObjectRef"},onerror:{$type:"json:FunctionRef"},onerrorScope:{$type:"json:ObjectRef"},args:{$type:"json:MultiTypes"},timeout:{$type:"json:Integer"}}},isWrapPosition:{$type:"json:Boolean",$default:!1}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/BeanValidationLogger.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.BeanValidationLogger",$singleton:!0,$prototype:{validate:function(e,t,i){try{aria.core.JsonValidator.check(e,t,i)}catch(n){for(var a=0;a<n.errors.length;a++)this.$logError(n.errors[a].msgId,n.errors[a].msgArgs)}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/pageBuilder/PageDefinitionConfigBean.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.utils.pageBuilder.PageDefinitionConfigBean",$namespaces:{json:"aria.core.JsonTypes",pageEngine:"aria.pageEngine.CfgBeans"},$beans:{PageDefinitionConfig:{$type:"json:Object",$properties:{animation:{$type:"pageEngine:PageAnimation"},contents:{$type:"pageEngine:PageContents"},pageCompositionConfig:{$type:"PageCompositionConfig"},pageId:{$type:"json:String",$sample:"Search your flight",$mandatory:!0},title:{$type:"json:String",$sample:"Search your flight"},url:{$type:"json:String",$sample:"/Search"},pageData:{$type:"json:ObjectRef"}}},PageCompositionConfig:{$type:"json:Object",$properties:{components:{$type:"ComponetsCfg"}}},ComponetCfg:{$type:"json:Object",$properties:{children:{$type:"json:Array",$contentType:{$type:"ComponetCfg"}},name:{$mandatory:!0,$type:"json:String"},parentPhName:{$mandatory:!1,$type:"json:String"}}},ComponetsCfg:{$type:"json:Array",$contentType:{$type:"ComponetCfg"}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/storage/StorageBeanCfg.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.utils.storage.StorageBeanCfg",$namespaces:{json:"aria.core.JsonTypes"},$beans:{ContextArgs:{$type:"json:Object",$properties:{key:{$type:"json:String"},path:{$type:"json:String"},context:{$type:"json:String"}}}}});
//*******************
//LOGICAL-PATH:plnextv2/config/LocalStorageBeans.js
//*******************
Aria.beanDefinitions({$package:"plnextv2.config.LocalStorageBeans",$namespaces:{json:"aria.core.JsonTypes"},$beans:{CEM_INFORMATION:{$type:"json:Object",$properties:{cemId:{$type:"json:String",$default:""},cemFirstname:{$type:"json:String",$default:""},cemLastname:{$type:"json:String",$default:""}}},PURC:{$type:"json:Object",$properties:{payment_type:{$type:"json:String",$default:""},air_cc_billing_address:{$type:"json:Object",$properties:{air_cc_address_firstline:{$type:"json:String",$default:""},air_cc_address_secondline:{$type:"json:String",$default:""},air_cc_address_zipcode:{$type:"json:String",$default:""},air_cc_address_city:{$type:"json:String",$default:""},air_cc_address_country:{$type:"json:String",$default:""},air_cc_address_state:{$type:"json:String",$default:""}}},payment_acc:{$type:"json:Object",$properties:{accountReference:{$type:"json:String",$default:""},fromProfile:{$type:"json:Boolean",$default:!1}}}}}}});
//*******************
//LOGICAL-PATH:plnextv2/utils/PriceBeanUtils.js
//*******************
Aria.classDefinition({$classpath:"plnextv2.utils.PriceBeanUtils",$dependencies:["aria.utils.Json","aria.utils.Type","aria.utils.Path","plnextv2.utils.storage.SessionStorageManager"],$statics:{ZO:"ZO",CARD_FEES_CODE:["FCA","FDA"],MCP_DATA:"mcpData",MCP_CONTEXT:"mcpContext"},$constructor:function(e){this._priceBean=e,this._pathUtils=aria.utils.Path,this._storageManager=plnextv2.utils.storage.SessionStorageManager},$prototype:{setPriceBean:function(e){this._priceBean=e},getPriceBean:function(){return this._priceBean},_createAmountViewBean:function(e,t,i){var n={amount:e};return t&&(n.currency=t),void 0!==i&&(n.isPercentage=i),n},_updateAmountViewBean:function(e,t,i){t=parseFloat(t.toFixed(2)),i&&!this._priceBean.currency&&aria.utils.Json.setValue(this._priceBean,"currency",i),this._priceBean[e]?(isNaN(t)||aria.utils.Json.setValue(this._priceBean[e],"amount",t),i&&aria.utils.Json.setValue(this._priceBean[e],"currency",i)):aria.utils.Json.setValue(this._priceBean,e,this._createAmountViewBean(t,i))},_updateTotalAmount:function(){var e=this._priceBean.baseFare?this._priceBean.baseFare.amount:0,t=this._priceBean.totalFees?this._priceBean.totalFees.amount:0,i=this._priceBean.totalTaxes?this._priceBean.totalTaxes.amount:0,n=this._priceBean.isCarInTotalPrice?this.getCarPrice():0,a=this._getTotalServicesAmount(),r=0;this._priceBean.totalUpgrades&&this._priceBean.totalUpgrades.totalAmount&&(r=this._priceBean.totalUpgrades.totalAmount.amount);var s=this._priceBean.totalInsurance?this._priceBean.totalInsurance.amount:0,o=0;this._priceBean.totalDiscount&&!this.isPromoZapOff()&&(o=this._priceBean.totalDiscount.amount),this._updateAmountViewBean("totalAmount",e+t+i+a+r+s+n-o)},isPromoZapOff:function(){return this._priceBean.promoCode&&this._priceBean.promoCode.typeOfPayment===this.ZO},getTotalAmountToBePaid:function(){return this._priceBean.isCarInTotalPrice?this._priceBean.totalAmount.amount-this.getCarPrice():this._priceBean.totalAmount.amount},_updateTotalConvertedAmount:function(){var e=this._priceBean.totalAmount;if(null!=e&&null!=e.convertedAmount){null==e.originalConvertedAmount&&(e.originalConvertedAmount=e.convertedAmount);var t=e.originalConvertedAmount,i=this._priceBean.totalConvertedDiscount?this._priceBean.totalConvertedDiscount.amount:0,n=t-i;isNaN(n)||aria.utils.Json.setValue(e,"convertedAmount",n)}},_updateTotalCashAmountMergedFlow:function(){var e=this._priceBean.milesAndCashMergedFlow,t=e.nonConvertedAmount.amount,i=this._getTotalServicesAmount(),n=this._priceBean.totalInsurance?this._priceBean.totalInsurance.amount:0;aria.utils.Json.setValue(e.nonConvertedAmount,"totalAmount",t+i+n)},_updateTotalAmountWithBreakDown:function(){var e=this._priceBean.milesAndCash.cashAmount.fareTotal?this._priceBean.milesAndCash.cashAmount.fareTotal:0,t=this._priceBean.milesAndCash.cashAmount.feesTotal?this._priceBean.milesAndCash.cashAmount.feesTotal:0,i=this._priceBean.milesAndCash.cashAmount.taxesTotal?this._priceBean.milesAndCash.cashAmount.taxesTotal:0,n=this._getTotalServicesAmount(),a=this._priceBean.totalInsurance?this._priceBean.totalInsurance.amount:0,r=this._priceBean.isCarInTotalPrice?this.getCarPrice():0;this._updateAmountViewBean("totalAmount",e+t+i+n+a+r),this._updateAmountViewBean("baseFare",e),this._updateAmountViewBean("totalTaxes",i),this._updateAmountViewBean("totalAirlineCharges",e),this._updateAmountViewBean("totalOtherTaxes",i),this.setObFeesAmount({amount:t})},_updateTotalCollectBalance:function(){var e=this._priceBean.rebookingTotal?this._priceBean.rebookingTotal.amount:0,t=this._priceBean.oldPrice?this._priceBean.oldPrice.amount:0;this._updateAmountViewBean("totalCollectBalance",e-t)},_addInstallmentToRebookingTotal:function(e){this._priceBean.rebookingTotal&&this._updateAmountViewBean("rebookingTotal",this._priceBean.rebookingTotal.amount+e)},getBookingFees:function(){var e=0;return e=this._priceBean.updatedBookingFees&&this._priceBean.updatedBookingFees.amount>0?this._priceBean.updatedBookingFees.amount:this._priceBean.bookingFees&&this._priceBean.bookingFees.amount>0?this._priceBean.bookingFees.amount:this.getFullAirlineFees()},getBookingFeesOnly:function(){return this._priceBean.bookingFees&&this._priceBean.bookingFees.amount>0?this._priceBean.bookingFees.amount:0},getFullAirlineFees:function(){return this.getAirlineFees(!0)},getCarPrice:function(){return this._priceBean.carTotalPrice&&this._priceBean.carTotalPrice.totalPrice?this._priceBean.carTotalPrice.totalPrice:0},getCarCurrency:function(){return this._priceBean.carTotalPrice&&this._priceBean.carTotalPrice.currency?this._priceBean.carTotalPrice.currency:0},getAirlineFees:function(e){var t=0;return this._priceBean&&(t+=this.getObFees(),e&&(t+=this.getCCFees())),t},getObFees:function(){var e=0;return null!=this._priceBean.obFees&&null!=this._priceBean.obFees.amount&&(e+=this._priceBean.obFees.amount),e},getCCFees:function(){var e=0;return null!=this._priceBean.creditCardFees&&null!=this._priceBean.creditCardFees.amount&&(e=this._priceBean.creditCardFees.amount),e},getAirlineFeesLabel:function(){var e="tx_pltg_text_TravellerFee";return null!=this._priceBean.creditCardFees&&this._priceBean.creditCardFees.amount===this.getFullAirlineFees()&&(e="tx_pltg_text_obFees_confirmed"),e},_updateTotalFees:function(){var e=this.getBookingFees(),t=this._priceBean.markup?this._priceBean.markup.amount:0,i=this._priceBean.installmentInterests?this._priceBean.installmentInterests.amount:0;this._updateAmountViewBean("totalFees",e+t+i)},_updateTotalDiscount:function(){var e=this._priceBean.milesAndCash?this._priceBean.milesAndCash.milesAmount.amount:0,t=this._priceBean.promoCode?this._priceBean.promoCode.estimatedDiscountAmount:0,i=this.isDiscountAmount()&&!this._priceBean.discount.includedInBaseFare?this._priceBean.discount.discountAmount.amount:0;this._updateAmountViewBean("totalDiscount",e+i+t)},_updateTotalConvertedDiscount:function(){var e=this._priceBean.totalAmount,t=this._priceBean.promoCode?this._priceBean.promoCode.convertedDiscountAmount:0;e&&this._updateAmountViewBean("totalConvertedDiscount",t,e.convertedCurrency)},_updateRebookingTotal:function(){if(this._priceBean.rebookingTotal){var e=this._priceBean.oldPrice?this._priceBean.oldPrice.amount:0,t=this._priceBean.totalCollectBalance?this._priceBean.totalCollectBalance.amount:0,i=this._priceBean.totalRefund?this._priceBean.totalRefund.amount:0;this._updateAmountViewBean("rebookingTotal",e+t-i)}},updatePriceBeanWithRecoAmount:function(e,t){if(e&&this._priceBean){t&&aria.utils.Json.setValue(this._priceBean,"isRecoAmountBean",!0);var i=e.currency;i&&aria.utils.Json.setValue(this._priceBean,"currency",i),e.milesCost&&e.milesCost>0&&(this._updateAmountViewBean("milesAmount",e.milesAmount),this.setMilesAndCashData({milesAmount:e.milesAmount,cashAmount:e.tax})),void 0!==e.totalAmount&&this._updateAmountViewBean("totalAmount",e.totalAmount,i),void 0!==e.tax&&this._updateAmountViewBean("totalTaxes",e.tax),void 0!==e.amountWithoutTaxAndFee&&this._updateAmountViewBean("baseFare",e.amountWithoutTaxAndFee),void 0!==e.serviceFee&&this._updateAmountViewBean("bookingFees",e.serviceFee),void 0!==e.markupFee&&this._updateAmountViewBean("markup",e.markupFee),this.setObFeesAmount({amount:e.obFees}),this._updateTotalAmount(),this.setCreditCardFeesAmount({amount:e.creditCardFees}),this.setTotalRefundAmount({amount:e.totalRefund}),void 0!==e.totalCollectBalance&&this.updateTotalCollectBalance(e.totalCollectBalance,i),void 0!==e.collectBalance&&this._updateAmountViewBean("collectBalance",e.collectBalance),null!=e.rebookingFees&&this.updateRebookingFees(e.rebookingFees,i),null!=e.totalRebookBalance&&this._updateAmountViewBean("totalRebookBalance",e.totalRebookBalance,i),null!=e.rebookBalance&&this._updateAmountViewBean("rebookBalance",e.rebookBalance,i),null!=e.previousAirTotalPrice&&this._updateAmountViewBean("previousAirTotalPrice",e.previousAirTotalPrice,i),null!=e.airTotalPrice&&this._updateAmountViewBean("airTotalPrice",e.airTotalPrice,i),null!=e.nonRefundable&&this._updateAmountViewBean("nonRefundable",e.nonRefundable,i),null!=e.totalServices&&this._updateAmountViewBean("totalServices",e.totalServices,i),this._updateTotalFees(),this._updateRebookingTotal(),this._updateTotalAmount()}},updateTotalAmount:function(e,t,i){i?this._updateAmountViewBean("totalAmountPerPax",e,t):this._updateAmountViewBean("totalAmount",e,t)},updateTimeToThinkPrice:function(e){aria.utils.Json.setValue(this._priceBean,"timeToThinkPrice",e)},updateRebookingFees:function(e,t){void 0!==this._priceBean.rebookingFees?aria.utils.Json.setValue(this._priceBean.rebookingFees,"amount",e):aria.utils.Json.setValue(this._priceBean,"rebookingFees",this._createAmountViewBean(e,t))},updateTotalCollectBalance:function(e,t){void 0!==this._priceBean.totalCollectBalance?aria.utils.Json.setValue(this._priceBean.totalCollectBalance,"amount",e):aria.utils.Json.setValue(this._priceBean,"totalCollectBalance",this._createAmountViewBean(e,t)),this._updateRebookingTotal()},setTotalServices:function(e,t){if(this._priceBean.totalServices&&this._priceBean.totalServices.totalAmount)null!==e&&aria.utils.Json.setValue(this._priceBean.totalServices.totalAmount,"amount",e),t&&aria.utils.Json.setValue(this._priceBean.totalServices.totalAmount,"currency",t);else{t=t||this._priceBean.currency;var i={};i.totalAmount=this._createAmountViewBean(e,t),i.balancedAmount=this._createAmountViewBean(e,t),aria.utils.Json.setValue(this._priceBean,"totalServices",i)}if(this._priceBean.totalServices.initialAmount&&this._priceBean.totalServices.initialAmount.amount){var n=this.getBalanceServices();this._priceBean.totalServices.balancedAmount||(this._priceBean.totalServices.balancedAmount={}),aria.utils.Json.setValue(this._priceBean.totalServices.balancedAmount,"amount",n)}this._updateTotalAmount()},setMilesAndCash:function(e,t,i){if(e){if(i){var n=this._priceBean.totalUpgrades;return void(n&&this._updateBalanceAmount(n,e))}if(t)return void this._updateBalanceAmount(this._priceBean.totalServices,e);aria.utils.Json.setValue(this._priceBean,"milesAndCash",e)}else aria.utils.Json.deleteKey(this._priceBean,"milesAndCash");this._updateTotalDiscount(),e&&e.cashAmount&&null!=e.cashAmount.baseFareTotal?this._updateTotalAmountWithBreakDown():this._updateTotalAmount()},_updateBalanceAmount:function(e,t){aria.utils.Json.setValue(e,"balancedMilesAmount",{amount:t.milesCost}),aria.utils.Json.setValue(e,"balancedMilesConvertedAmount",{amount:t.milesAmount.amount});var i=this.getBalance(e)-t.milesAmount.amount;aria.utils.Json.setValue(e.balancedAmount,"amount",i)},setInstallmentInterests:function(e,t){var i=this._priceBean.installmentInterests?this._priceBean.installmentInterests.amount:0,n=0;if(e?(aria.utils.Json.setValue(this._priceBean,"installmentInterests",e),n=e.amount):aria.utils.Json.deleteKey(this._priceBean,"installmentInterests"),this._updateTotalFees(),this._shouldUpdateTotalAmountWithBreakDown()?this._updateTotalAmountWithBreakDown():this._updateTotalAmount(),t){var a=n-i;this._addInstallmentToRebookingTotal(a),this._updateTotalCollectBalance()}},setMilesAndCashData:function(e){e&&e.milesAmount>0&&aria.utils.Json.setValue(this._priceBean,"milesAndCashData",e)},setObFeesAmount:function(e){e&&e.amount>0?(e.amount=parseFloat(e.amount),aria.utils.Json.setValue(this._priceBean,"obFees",e)):aria.utils.Json.deleteKey(this._priceBean,"obFees"),this._updateTotalFees()},setCreditCardFeesAmount:function(e,t){e&&e.amount>0?(e.amount=parseFloat(e.amount),aria.utils.Json.setValue(this._priceBean,"creditCardFees",e),this._priceBean.bookingFees&&this._priceBean.bookingFees.amount>0&&aria.utils.Json.setValue(this._priceBean,"updatedBookingFees",{amount:this._priceBean.bookingFees.amount+e.amount})):(aria.utils.Json.deleteKey(this._priceBean,"creditCardFees"),aria.utils.Json.deleteKey(this._priceBean,"updatedBookingFees"),this.__clearCCFees()),this._updateTotalFees(),t&&this.updateTotalAirlineCharges(t.groupAirCharges),this._shouldUpdateTotalAmountWithBreakDown()?this._updateTotalAmountWithBreakDown():this._updateTotalAmount()},setTotalRefundAmount:function(e){e&&e.amount?aria.utils.Json.setValue(this._priceBean,"totalRefund",e):aria.utils.Json.deleteKey(this._priceBean,"totalRefund")},setTotalInsurance:function(e){e?aria.utils.Json.setValue(this._priceBean,"totalInsurance",e):aria.utils.Json.deleteKey(this._priceBean,"totalInsurance"),this._updateTotalFees(),this._shouldUpdateTotalAmountWithBreakDown()?this._updateTotalAmountWithBreakDown():this._updateTotalAmount(),this._shouldUpdateTotalCashAmountMergedFlow()&&this._updateTotalCashAmountMergedFlow()},setDonation:function(e){e?aria.utils.Json.setValue(this._priceBean,"donation",e):aria.utils.Json.deleteKey(this._priceBean,"donation")},setPromoCode:function(e){e?aria.utils.Json.setValue(this._priceBean,"promoCode",e):aria.utils.Json.deleteKey(this._priceBean,"promoCode"),this._updateTotalDiscount(),this._updateTotalConvertedDiscount(),this._updateTotalAmount(),this._updateTotalConvertedAmount()},setEBankData:function(e){null!=e?aria.utils.Json.setValue(this._priceBean,"eBankData",e):aria.utils.Json.deleteKey(this._priceBean,"eBankData"),this._updateTotalFees(),this._shouldUpdateTotalAmountWithBreakDown()?this._updateTotalAmountWithBreakDown():this._updateTotalAmount()},setDccMcp:function(e){e?aria.utils.Json.setValue(this._priceBean,"dccMcp",e):aria.utils.Json.deleteKey(this._priceBean,"dccMcp")},getAirTotalPrice:function(){return this._priceBean.airTotalPrice},getTotalWithoutServices:function(e){if(null==this._priceBean.totalAmount)return this._createAmountViewBean(0,this._priceBean.currency);var t=this._priceBean.totalAmount.amount;return this._priceBean.totalServices&&this._priceBean.totalServices.totalAmount&&(t-=this._priceBean.totalServices.totalAmount.amount),e===!1&&this._priceBean.milesAndCash&&this._priceBean.milesAndCash.milesCost>0&&(t+=this._priceBean.milesAndCash.milesAmount.amount),this._createAmountViewBean(t,this._priceBean.currency)},getTotalAmount:function(e){return this._priceBean?e?this._priceBean.totalAmountPerPax:this._priceBean.totalAmount:null},getTotalDiscount:function(){return this._priceBean?this._priceBean.totalDiscount:null},getDiscount:function(e){return this.isDiscountEnabled()?e?this._priceBean.discountPerPax:this._priceBean.discount:null},getDiscountReasons:function(e){var t=this._priceBean.listTravellerPrice;if(e&&t)for(var i=0;i<t.length;i++){var n=t[i].traveller.listTravellerTypeRequested,a=t[i].travellerPrice[0].priceBean.discount;if(n&&a)for(var r=0;r<n.length;r++)if(n[r].isPrimaryTraveller)return a}return this._priceBean.discountWithReasons},getBaseFare:function(e){return this._priceBean?e?this._priceBean.baseFarePerPax:this._priceBean.baseFare:null},getBaseFareAmount:function(e){return this.__getAmountOfPriceBean(this.getBaseFare(e))},isPromocodeOrDiscountAvailable:function(e,t){return this.isDiscountReasonEnabled()&&(e||t)},isDiscountReasonEnabled:function(){if(this._priceBean){var e=this._priceBean.discountWithReasons;return e&&e.discountAmount&&e.discountAmount.amount>0}return!1},isDiscountEnabled:function(){if(this._priceBean){var e=this._priceBean.discount;return e&&e.discountAmount&&e.discountAmount.amount>0}return!1},isDiscountAmount:function(){return this.isDiscountEnabled()?!this._priceBean.discount.discountAmount.isPercentage:!1},isDiscountPercentage:function(){return this.isDiscountEnabled()?this._priceBean.discount.discountAmount.isPercentage:!1},getDiscountsForAllPax:function(){return this._priceBean.discounts?this._priceBean.discounts:null},getTotalTaxes:function(e){return e?this._priceBean.totalTaxesPerPax:this._priceBean.totalTaxes},getTotalTaxesAmount:function(e){return this.__getAmountOfPriceBean(this.getTotalTaxes(e))},getTotalAirlineCharges:function(e){return e?this._priceBean.totalAirlineChargesPerPax:this._priceBean.totalAirlineCharges},getTotalAirlineChargesAmount:function(e){return this.__getAmountOfPriceBean(this.getTotalAirlineCharges(e))},getTotalOtherTaxes:function(e){return e?this._priceBean.totalOtherTaxesPerPax:this._priceBean.totalOtherTaxes},getTotalOtherTaxesAmount:function(e){return this.__getAmountOfPriceBean(this.getTotalOtherTaxes(e))},getTotalFees:function(e){return e?this._priceBean.totalFeesPerPax:this._priceBean.totalFees},getTotalFeesAmount:function(e){return this.__getAmountOfPriceBean(this.getTotalFees(e))},displayFeesNotice:function(){return this._priceBean.creditCardFees&&this._priceBean.totalFees&&this._priceBean.creditCardFees.amount>0&&this._priceBean.totalFees.amount!==this._priceBean.creditCardFees.amount},getTimeToThinkPrice:function(){return this._priceBean.timeToThinkPrice},__getAmountOfPriceBean:function(e){return e?e.amount:null},clear:function(){var e=aria.utils.Json.keys(this._priceBean);for(var t in e)e.hasOwnProperty(t)&&aria.utils.Json.deleteKey(this._priceBean,e[t])},clearAirPrices:function(){var e=aria.utils.Json.keys(this._priceBean);for(var t in e)if(e.hasOwnProperty(t))switch(e[t]){case"currency":case"totalServices":case"totalInsurance":case"installmentInterests":case"obFees":break;default:aria.utils.Json.deleteKey(this._priceBean,e[t])}},__clearCCFees:function(){for(var e in this._priceBean.listTravellerPrice)if(!aria.utils.Json.isMetadata(e))for(var t=this._priceBean.listTravellerPrice[e],i=0;i<this.CARD_FEES_CODE.length;i++)this.__clearCCFeesFromTraveller(t,this.CARD_FEES_CODE[i])},__clearCCFeesFromTraveller:function(e,t){var i=e.travellerPrice;i&&i.length>0&&this.__removeTaxFromTraveller(i[0],t,1);var n=e.travellerTypePrice;n&&n.length>0&&this.__removeTaxFromTraveller(n[0],t,e.traveller.travellersNumber)},addTaxByTravellerType:function(e,t,i){for(var n in this._priceBean.listTravellerPrice)if(!aria.utils.Json.isMetadata(n)){var a=this._priceBean.listTravellerPrice[n].traveller;if(a&&0===a.travellerCode.indexOf(e)){var r=this._priceBean.listTravellerPrice[n].travellerPrice;!r||i&&!i.groupAirCharges||this.__addTaxToTraveller(r[0],t,1,i);var s=this._priceBean.listTravellerPrice[n].travellerTypePrice;s&&this.__addTaxToTraveller(s[0],t,a.travellersNumber,i)}}},__addTaxToTraveller:function(e,t,i,n){var a=e.priceBean.recoAmount;if(e.taxes&&a&&a.listTaxes){var r=aria.utils.Array.clone(e.taxes),s=aria.utils.Array.clone(a.listTaxes);this.__addTax(r[0],t),this.__updateSubTotalTaxes(r[0]);var o=this.__addTax(s[0],t);this.__updateSubTotalTaxes(s[0]),aria.utils.Json.setValue(e,"taxes",r),aria.utils.Json.setValue(a,"listTaxes",s),this.__updatePaxRecoAmountWithTax(a,o,t.value,i,n)}},__removeTaxFromTraveller:function(e,t,i){var n=e.priceBean.recoAmount;if(e.taxes&&n&&n.listTaxes){var a=aria.utils.Array.clone(e.taxes),r=aria.utils.Array.clone(n.listTaxes),s=this.__removeTax(a[0],t);this.__updateSubTotalTaxes(a[0]),this.__removeTax(r[0],t),this.__updateSubTotalTaxes(r[0]),aria.utils.Json.setValue(e,"taxes",a),aria.utils.Json.setValue(n,"listTaxes",r);var o=0;this.__updatePaxRecoAmountWithTax(n,s,o,i)}},__addTax:function(e,t){var i=this.__removeTax(e,t.code);return aria.utils.Json.add(e,t,0),i},__removeTax:function(e,t){var i=0;for(var n in e)if(!aria.utils.Json.isMetadata(n)&&e[n]&&e[n].code===t){i=e[n].value,aria.utils.Json.removeAt(e,parseInt(n));break}return i},__updateSubTotalTaxes:function(e){var t=0;for(var i in e)e.hasOwnProperty(i)&&(e[i].isSubTotal?e[i].value=t:t+=e[i].value)},__updatePaxRecoAmountWithTax:function(e,t,i,n,a){var r=t*n,s=i*n,o=s-r;(!a||a.groupAirCharges)&&aria.utils.Json.setValue(e,"tax",e.tax+o),aria.utils.Json.setValue(e,"amount",e.amount+o),aria.utils.Json.setValue(e,"totalAmount",e.totalAmount+o)},getNewTotalCash:function(){var e=this._priceBean.totalAmount.amount;return this._priceBean.totalServices&&this._priceBean.totalServices.balancedMilesConvertedAmount&&(e-=this._priceBean.totalServices.balancedMilesConvertedAmount.amount),e},getNewTotalMiles:function(){var e=this._priceBean.milesAndCash?this._priceBean.milesAndCash.milesCost:0;return this._priceBean.totalServices&&this._priceBean.totalServices.balancedMilesAmount&&(e+=this._priceBean.totalServices.balancedMilesAmount.amount),e},getPreviousTotal:function(){var e=this._priceBean.totalAmount,t=this.getTotalServicesBalancedAmount();if(e.currency&&t.currency&&e.currency.code===t.currency.code){var i=this.getBalanceServices();return e.amount-i}return e.amount},getBalanceServices:function(){return this._priceBean.totalServices?this._priceBean.totalServices.totalAmount.amount-this._priceBean.totalServices.initialAmount.amount:0},getBalance:function(e){return e&&e.totalAmount?e.initialAmount?e.totalAmount.amount-e.initialAmount.amount:e.totalAmount.amount:0},getTotalServicesBalancedAmount:function(){return this._priceBean.totalServices&&this._priceBean.totalServices.balancedAmount?(this._priceBean.totalServices.balancedAmount.currency||(this._priceBean.totalServices.balancedAmount.currency=this._priceBean.currency),this._priceBean.totalServices.balancedAmount.currency.code===this._priceBean.currency.code&&(this._priceBean.totalServices.balancedAmount.currency=this._priceBean.currency),this._priceBean.totalServices.balancedAmount):{amount:0,currency:this._priceBean.currency}},isRecoAmountBean:function(){return this._priceBean.isRecoAmountBean||!1},_shouldUpdateTotalAmountWithBreakDown:function(){var e=this._priceBean.milesAndCash;return e&&e.cashAmount&&e.cashAmount.baseFareTotal>=0},_shouldUpdateTotalCashAmountMergedFlow:function(){var e=this._priceBean.milesAndCashMergedFlow;return e&&e.nonConvertedAmount&&e.nonConvertedAmount.amount>=0},updateCarPrice:function(e){var t=this.getPreviousCarPrice();if(aria.utils.Json.setValue(this._priceBean,"carTotalPrice",e.priceInfo),this._priceBean.isCarInTotalPrice){var i=this._priceBean.totalAmount.amount;i-=t,i+=e.priceInfo.totalPrice,aria.utils.Json.setValue(this._priceBean.totalAmount,"amount",i)}this.updateCarMcpPrice()},getPreviousCarPrice:function(){return this._priceBean.carTotalPrice&&this._priceBean.carTotalPrice.totalPrice?this._priceBean.carTotalPrice.totalPrice:0},getFlightsPrice:function(){var e=0;return e+=this.getTotalAirlineChargeAmount(),e+=this._getOtherTaxesAmount(),e+=this._getTotalFeesAmount(),e+=this._getTotalUpgradesAmount(),e+=this._getTotalServicesAmount(),e+=this._getTotalInsuranceAmount(),e+=this._getTotalInstallmentInterestsAmount(),e+=this._getFullAirlineFeesAmount(),this._shouldUpdateTotalAmountWithBreakDown()||(e-=this._getMilesAndCashDiscountAmount()),e},getTotalAirlineChargeAmount:function(){if(!this._priceBean)return 0;var e=0;return this._priceBean.totalAirlineCharges&&this._priceBean.totalAirlineCharges.amount>0?e=this._priceBean.totalAirlineCharges.amount:this._priceBean.baseFare&&(e=this._priceBean.baseFare.amount),e},getTotalAmountConvertedInCash:function(e){var t=0;e.totalAmount&&e.totalAmount.amount&&(t+=e.totalAmount.amount);var i=e.milesAndCashMergedFlow||e.milesAndCash;return i&&i.milesAmount&&i.milesAmount.amount&&(t+=i.milesAmount.amount),i&&i.nonConvertedAmount&&i.nonConvertedAmount.amount&&(t+=i.nonConvertedAmount.amount),t},_getBaseFareAmount:function(){var e=0,t=this.getBaseFare(!1);return t&&(e+=t.amount),e},_getOtherTaxesAmount:function(){var e=this.getTotalOtherTaxes(!1),t=0;return e&&(t+=e.amount),t},_getTotalFeesAmount:function(){var e=0;return this._priceBean&&this._priceBean.totalFees&&this._priceBean.totalFees.amount>0&&(e=this._priceBean.totalFees.amount),e},updateTotalAirlineCharges:function(e){if(e){var t=this._priceBean.baseFare?this._priceBean.baseFare.amount:0,i=0;e.groupAirCharges&&this._priceBean.totalFees&&(i=this._priceBean.totalFees.amount),aria.utils.Json.setValue(this._priceBean.totalAirlineCharges,"amount",t+i)}},_getTotalUpgradesAmount:function(){var e=0;return this._priceBean.totalUpgrades&&this._priceBean.totalUpgrades.totalAmount>0&&(e+=this._priceBean.totalUpgrades.totalAmount),e},_getTotalServicesAmount:function(){if(!this._priceBean.totalServices||!this._priceBean.totalServices.totalAmount||this._priceBean.totalServices.totalAmount.amount<=0)return 0;var e=this._priceBean.totalServices.totalAmount.currency.code,t=this._priceBean.currency.code;return e===t?this._priceBean.totalServices.totalAmount.amount:0},_getTotalInsuranceAmount:function(){var e=0;return this._priceBean.totalInsurance&&this._priceBean.totalInsurance.amount>0&&(e+=this._priceBean.totalInsurance.amount),e},_getTotalInstallmentInterestsAmount:function(){var e=0;return this._priceBean.installmentInterests&&this._priceBean.installmentInterests.amount>0&&(e+=this._priceBean.installmentInterests.amount),e},_getFullAirlineFeesAmount:function(){var e=0,t=this.getFullAirlineFees();return t>0&&(e+=t),e},_getMilesAndCashDiscountAmount:function(){return this._priceBean.milesAndCash?this._priceBean.milesAndCash.milesAmount.amount:0},getTotalCollectBalanceAmountWithServicesExtraCost:function(e){var t=this._priceBean.totalCollectBalance?Math.abs(this._priceBean.totalCollectBalance.amount):null;return e&&null!==t&&t>=0&&(t+=this.getTotalServicesBalancedAmount().amount),t},getTotalRebookBalanceAmountWithServicesExtraCost:function(e){var t=this._priceBean.totalRebookBalance?Math.abs(this._priceBean.totalRebookBalance.amount):null;return e&&null!==t&&t>=0&&(t+=this.getTotalServicesBalancedAmount().amount),t},hasResidualValue:function(){var e=this._pathUtils.describe(this._priceBean,"totalResidualValue.amount");return e?e.value>0:!1},hasServicesExtraCost:function(){var e=this._pathUtils.describe(this._priceBean,"totalServices.balancedAmount.amount");return e?e.value>0:!1},hasAirRefund:function(){var e=this._pathUtils.describe(this._priceBean,"totalRebookBalance.amount");return e?e.value<0:!1},getTotalAmountWithoutDiscountApplied:function(e){var t=this.getBaseFareAmount(e),i=this.getTotalTaxesAmount(e),n=this.getDiscountReasons(e),a=n?n.discountAmount.amount:0,r=this.getTotalAmount(e).amount,s=a-i-t;return r+s},clearCarPrice:function(){this._priceBean.isCarInTotalPrice?(delete this._priceBean.carTotalPrice,this._shouldUpdateTotalAmountWithBreakDown()?this._updateTotalAmountWithBreakDown():this._updateTotalAmount()):aria.utils.Json.setValue(this._priceBean,"carTotalPrice",null)},updateCarMcpPrice:function(){if(this._priceBean.carTotalPrice){var e=this._storageManager.get(this.MCP_DATA,this.MCP_CONTEXT);e&&this._priceBean.totalAmount&&(this._priceBean.carTotalPrice.totalPriceConverted=e.amount*this._priceBean.carTotalPrice.totalPrice)}},getPriceConverted:function(){var e=this._priceBean.dccMcp&&"undefined"!=typeof this._priceBean.dccMcp.amount?this._priceBean.dccMcp.amount:0;return this._priceBean.isCarInTotalPrice&&this._priceBean.carTotalPrice&&this._priceBean.carTotalPrice.totalPrice>0&&(e+=this._priceBean.carTotalPrice.totalPriceConverted),e}}});